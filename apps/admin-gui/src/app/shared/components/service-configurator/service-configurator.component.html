<!--The min-height is a hack to prevent page scrolling on tab switching-->
<div class="min-height">
  <mat-tab-group [dynamicHeight]="true" [(selectedIndex)]="showTab" mat-stretch-tabs="false">
    <mat-tab [label]="facility.name + ' (facility)'">
      <button mat-flat-button class="me-2 mt-3" color="accent" (click)="onAddAttFacility()">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
      </button>

      <button
        mat-flat-button
        class="me-2 mt-3"
        color="accent"
        (click)="onSaveFacility()"
        [disabled]="selectionFacility.selected.length === 0">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
      </button>

      @if (!!facilityAttributes) {
        <perun-web-apps-attributes-list
          #FacilityAList
          [tableId]="tableId"
          [attributes]="facilityAttributes"
          [selection]="selectionFacility">
        </perun-web-apps-attributes-list>
      }
    </mat-tab>
    @if (!!resource) {
      <mat-tab [label]="resource.name + ' (resource)'">
        <button mat-flat-button class="me-2 mt-3" color="accent" (click)="onAddAttResource()">
          {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
        </button>
        <button
          mat-flat-button
          class="me-2 mt-3"
          color="accent"
          (click)="onSaveResource()"
          [disabled]="selectionResource.selected.length === 0">
          {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
        </button>
        @if (!!resourceAttributes) {
          <perun-web-apps-attributes-list
            #ResourceAList
            [tableId]="tableId"
            [attributes]="resourceAttributes"
            [selection]="selectionResource">
          </perun-web-apps-attributes-list>
        }
      </mat-tab>
    }
    @if (!!group) {
      <mat-tab [label]="group.name + ' (group)'">
        <button mat-flat-button class="me-2 mt-3" color="accent" (click)="onAddAttGroup()">
          {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
        </button>
        <button
          mat-flat-button
          class="me-2 mt-3"
          color="accent"
          (click)="onSaveGroup()"
          [disabled]="selectionGroup.selected.length === 0">
          {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
        </button>
        @if (!!groupAttributes) {
          <perun-web-apps-attributes-list
            #GroupAList
            [tableId]="tableId"
            [attributes]="groupAttributes"
            [selection]="selectionGroup">
          </perun-web-apps-attributes-list>
        }
      </mat-tab>
    }
    @if (!!member) {
      <mat-tab [label]="member.user.firstName + ' ' + member.user.lastName + ' (member)'">
        <button mat-flat-button class="me-2 mt-3" color="accent" (click)="onAddAttMember()">
          {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
        </button>
        <button
          mat-flat-button
          class="me-2 mt-3"
          color="accent"
          (click)="onSaveMember()"
          [disabled]="selectionMember.selected.length === 0">
          {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
        </button>
        @if (!!memberAttributes) {
          <perun-web-apps-attributes-list
            #MemberAList
            [tableId]="tableId"
            [attributes]="memberAttributes"
            [selection]="selectionMember">
          </perun-web-apps-attributes-list>
        }
      </mat-tab>
    }
  </mat-tab-group>
</div>
