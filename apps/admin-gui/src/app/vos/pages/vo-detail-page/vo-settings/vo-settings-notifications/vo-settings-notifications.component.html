<h1 class="page-subtitle">
  {{'VO_DETAIL.SETTINGS.NOTIFICATIONS.TITLE' | translate}}
</h1>

<div class="w-100 d-flex">
  <button
    *ngIf="!loading && addAuth"
    mat-flat-button
    color="accent"
    class="mr-2"
    (click)="add()">
    {{'VO_DETAIL.SETTINGS.NOTIFICATIONS.ADD' | translate}}
  </button>

  <button
    *ngIf="!loading && removeAuth"
    mat-flat-button
    color="warn"
    class="mr-2"
    (click)="remove()"
    [disabled]="selection.selected.length === 0">
    {{'VO_DETAIL.SETTINGS.NOTIFICATIONS.REMOVE' | translate}}
  </button>

  <button
    *ngIf="!loading"
    mat-stroked-button
    class="mr-2"
    (click)="changeEmailFooter()">
    <i class="material-icons">email</i>
    {{'VO_DETAIL.SETTINGS.NOTIFICATIONS.EMAIL_FOOTER' | translate}}
  </button>

  <button
    *ngIf="!loading && copyAuth"
    mat-stroked-button
    (click)="copy()">
    <i class="material-icons">file_copy</i>
    {{'VO_DETAIL.SETTINGS.NOTIFICATIONS.COPY_FROM_VO' | translate}}
  </button>
</div>

<mat-spinner *ngIf="loading" class="ml-auto mr-auto">
</mat-spinner>

<div *ngIf="applicationMails.length !== 0 && !loading" class="card mt-2">
  <app-notification-list
    [applicationMails]="applicationMails"
    [pageSize]="pageSize"
    (page)="pageChanged($event)"
    [voId]="voId"
    [displayedColumns]="displayedColumns"
    [disableSend]="!addAuth"
    [selection]="selection"
    [theme]="'vo-theme'"
    (selectionChange)="changeSelection($event)"></app-notification-list>
</div>
<app-alert *ngIf="this.applicationMails.length === 0 && !loading" [alert_type]="'warn'">
  {{'VO_DETAIL.SETTINGS.NOTIFICATIONS.NO_EMAILS' | translate}}
</app-alert>
