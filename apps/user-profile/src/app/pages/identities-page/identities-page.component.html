<div class="user-theme">
  <h1 class="page-title">{{'IDENTITIES.IDP' | customTranslate | translate}}</h1>
  <button mat-flat-button color="accent" (click)="addIdentity(false)" [disabled]="loading">
    {{'IDENTITIES.ADD' | customTranslate | translate}}
  </button>
  <button
    (click)="removeIdentity(idpSelection)"
    [disabled]="idpSelection.selected.length === 0 || loading"
    class="ms-2"
    color="warn"
    mat-flat-button>
    {{'IDENTITIES.REMOVE' | customTranslate | translate}}
  </button>
  <div class="position-relative table-min-height">
    <perun-web-apps-user-ext-sources-list
      *perunWebAppsLoader="loading; indicator: spinner"
      [loading]="loading"
      [userExtSources]="idpExtSources"
      [selection]="idpSelection"
      [displayedColumns]="displayedColumnsIdp"
      [loginHeader]="loginIdp"
      [disableRouting]="true"></perun-web-apps-user-ext-sources-list>
  </div>

  @if (displayCertificates) {
    <div>
      <h1 class="page-title mt-5">{{'IDENTITIES.CERT' | customTranslate | translate}}</h1>
      <button mat-flat-button color="accent" (click)="addIdentity(true)" [disabled]="loading">
        {{'IDENTITIES.ADD' | customTranslate | translate}}
      </button>
      <button
        (click)="removeIdentity(certSelection)"
        [disabled]="certSelection.selected.length === 0 || loading"
        class="ms-2"
        color="warn"
        mat-flat-button>
        {{'IDENTITIES.REMOVE' | customTranslate | translate}}
      </button>
      <div class="position-relative table-min-height">
        <perun-web-apps-user-ext-sources-list
          *perunWebAppsLoader="loading; indicator: spinner"
          [loading]="loading"
          [userExtSources]="certExtSources"
          [selection]="certSelection"
          [extSourceNameHeader]="extSourceNameCert"
          [loginHeader]="loginCert"
          [displayedColumns]="displayedColumnsCert"
          [disableRouting]="true"></perun-web-apps-user-ext-sources-list>
      </div>
    </div>
  }

  <h1 class="page-title mt-5">
    {{'IDENTITIES.OTHER' | customTranslate | translate}}
    <mat-icon
      [matTooltip]="'IDENTITIES.OTHER_TOOLTIP' | customTranslate | translate"
      class="center-icon"
      matTooltipPosition="above">
      info_outline
    </mat-icon>
  </h1>
  <div class="position-relative table-min-height">
    <perun-web-apps-user-ext-sources-list
      *perunWebAppsLoader="loading; indicator: spinner"
      [loading]="loading"
      [userExtSources]="otherExtSources"
      [selection]="otherSelection"
      [extSourceNameHeader]="extSourceNameOther"
      [displayedColumns]="displayedColumnsOther"
      [disableRouting]="true"></perun-web-apps-user-ext-sources-list>
  </div>

  <h1 class="page-title mt-5">
    {{'IDENTITIES.SERVICE' | customTranslate | translate}}
  </h1>
  <div class="position-relative table-min-height">
    <perun-web-apps-users-list
      *perunWebAppsLoader="loading; indicator: spinner"
      [loading]="loading"
      [noUsersFoundLabel]="'IDENTITIES.NO_SERVICE_ACCOUNTS' | translate"
      [displayColumns]="displayedColumnsService"
      [selection]="serviceIdentitiesSelection"
      [users]="serviceIdentities"
      [disableCheckbox]="true"
      [disableRouting]="true">
    </perun-web-apps-users-list>
  </div>
  <ng-template #spinner>
    <perun-web-apps-loading-table></perun-web-apps-loading-table>
  </ng-template>
</div>
