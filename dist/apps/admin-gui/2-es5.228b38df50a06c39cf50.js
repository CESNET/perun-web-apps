!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Fm3m:function(t,i,s){"use strict";s.d(i,"a",(function(){return f}));var n=s("X2Q7"),c=s("Ssnw"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("NU+N");function b(e,t){if(1&e&&a.Nb(0,"app-managers-page",1),2&e){var r=a.dc();a.kc("complementaryObject",r.resource)("complementaryObjectType",r.type)("theme",r.theme)("availableRoles",r.availableRoles)}}var f=function(){var t=function(){function t(r,i,s){e(this,t),this.route=r,this.resourceService=i,this.guiAuthResolver=s,this.availableRoles=[],this.type="Resource",this.theme="resource-theme"}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.resourceService.getResourceById(t.resourceId).subscribe((function(t){e.resource=t}))})),this.guiAuthResolver.assignAvailableRoles(this.availableRoles,"Resource")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(o.a),a.Mb(n.m),a.Mb(c.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-settings-managers"]],decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&a.Hc(0,b,1,4,"app-managers-page",0),2&e&&a.kc("ngIf",t.resource)},directives:[u.t,l.a],styles:[""]}),t}()},GyaY:function(t,i,s){"use strict";s.d(i,"a",(function(){return o}));var n=s("TkCa"),c=s("EM62"),a=s("ma6z"),o=function(){var t=function(){function t(){e(this,t)}return r(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Gb({type:t,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&c.Nb(0,"app-animated-router-outlet")},directives:[a.a],styles:[""],data:{animation:[n.a]}}),t}()},HUrR:function(t,i,s){"use strict";s.d(i,"a",(function(){return p}));var n=s("X2Q7"),c=s("Ssnw"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("csyo"),b=s("ZG5M");function f(e,t){1&e&&a.Nb(0,"mat-spinner",2)}function d(e,t){if(1&e&&(a.Sb(0,"div"),a.Nb(1,"perun-web-apps-menu-buttons-field",3),a.Rb()),2&e){var r=a.dc();a.Ab(1),a.kc("items",r.items)("size","small")}}var p=function(){var t=function(){function t(r,i,s){e(this,t),this.route=r,this.resourceManager=i,this.authResolver=s,this.items=[],this.loading=!1}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.parent.parent.params.subscribe((function(t){e.resourceManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.parent.snapshot.url[0].path),e.loading=!1}),(function(){return e.loading=!1}))}))}},{key:"initItems",value:function(e){this.items=[],this.authResolver.isManagerPagePrivileged(this.resource)&&this.items.push({cssIcon:"perun-manager",url:"".concat(e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings/managers"),label:"MENU_ITEMS.RESOURCE.MANAGERS",style:"resource-btn"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(o.a),a.Mb(n.m),a.Mb(c.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Eb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(a.Hc(0,f,1,0,"mat-spinner",0),a.Hc(1,d,2,2,"div",1)),2&e&&(a.kc("ngIf",t.loading),a.Ab(1),a.kc("ngIf",!t.loading))},directives:[u.t,l.c,b.a],styles:[""]}),t}()},TNye:function(t,i,s){"use strict";s.d(i,"a",(function(){return _}));var n=s("X2Q7"),c=s("iyZ4"),a=s("cqs0"),o=s("8clQ"),u=s("/bE8"),l=s("ESXS"),b=s("Ssnw"),f=s("EM62"),d=s("sEIs"),p=s("OZ4H"),h=s("0XDM"),g=s("2kYt"),v=s("A8Ay"),m=s("PBFl"),I=s("csyo"),S=s("gcZR"),R=s("s2Ay");function A(e,t){if(1&e){var r=f.Tb();f.Sb(0,"button",7),f.Zb("click",(function(){return f.xc(r),f.dc().addService()})),f.Jc(1),f.ec(2,"translate"),f.Rb()}2&e&&(f.Ab(1),f.Lc(" ",f.fc(2,1,"RESOURCE_DETAIL.ASSIGNED_SERVICES.ADD_SERVICE"),"\n"))}function E(e,t){if(1&e){var r=f.Tb();f.Sb(0,"button",8),f.Zb("click",(function(){return f.xc(r),f.dc().removeServices()})),f.Jc(1),f.ec(2,"translate"),f.Rb()}if(2&e){var i=f.dc();f.kc("disabled",0===i.selected.selected.length),f.Ab(1),f.Lc(" ",f.fc(2,2,"RESOURCE_DETAIL.ASSIGNED_SERVICES.REMOVE_SERVICE"),"\n")}}function y(e,t){1&e&&f.Nb(0,"mat-spinner",9)}var k=function(){return[]},M=function(){return["select"]};function T(e,t){if(1&e){var r=f.Tb();f.Sb(0,"app-services-list",10),f.Zb("page",(function(e){return f.xc(r),f.dc().pageChanged(e)})),f.Rb()}if(2&e){var i=f.dc();f.kc("pageSize",i.pageSize)("services",i.assignedServices)("selection",i.selected)("filterValue",i.filterValue)("hideColumns",i.removeServiceAuth?f.oc(6,k):f.oc(7,M))("disableRouting",!i.serviceRoutingAuth)}}var _=function(){var t=function(){function t(r,i,s,n,o){e(this,t),this.route=r,this.resourcesManager=i,this.tableConfigService=s,this.dialog=n,this.guiAuthResolver=o,this.assignedServices=[],this.selected=new a.c(!0,[]),this.tableId=c.T,this.filterValue=""}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.resourcesManager.getResourceById(e.resourceId).subscribe((function(t){e.resource=t,e.getDataForAuthorization(),e.loadAllServices()}))}))}},{key:"loadAllServices",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedServicesToResource(this.resourceId).subscribe((function(t){e.assignedServices=t,e.selected.clear(),e.loading=!1}))}},{key:"addService",value:function(){var e=this,t=Object(o.q)();t.width="800px",t.data={theme:"resource-theme",resourceId:this.resourceId},this.dialog.open(u.a,t).afterClosed().subscribe((function(t){t&&e.loadAllServices()}))}},{key:"removeServices",value:function(){var e=this,t=Object(o.q)();t.width="500px",t.data={theme:"resource-theme",resourceId:this.resourceId,services:this.selected.selected},this.dialog.open(l.a,t).afterClosed().subscribe((function(t){t&&e.loadAllServices()}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){this.assignServiceAuth=this.guiAuthResolver.isAuthorized("assignServices_Resource_List<Service>_policy",[this.resource]),this.removeServiceAuth=this.guiAuthResolver.isAuthorized("removeServices_Resource_List<Service>_policy",[this.resource]),this.serviceRoutingAuth=this.guiAuthResolver.isPerunAdmin()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Mb(d.a),f.Mb(n.m),f.Mb(c.pb),f.Mb(p.b),f.Mb(b.h))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-perun-web-apps-resource-assigned-services"]],decls:9,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","ml-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","services","selection","filterValue","hideColumns","disableRouting","page",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"pageSize","services","selection","filterValue","hideColumns","disableRouting","page"]],template:function(e,t){1&e&&(f.Sb(0,"h1",0),f.Jc(1),f.ec(2,"translate"),f.Rb(),f.Sb(3,"perun-web-apps-refresh-button",1),f.Zb("refresh",(function(){return t.loadAllServices()})),f.Rb(),f.Hc(4,A,3,3,"button",2),f.Hc(5,E,3,4,"button",3),f.Sb(6,"perun-web-apps-immediate-filter",4),f.Zb("filter",(function(e){return t.applyFilter(e)})),f.Rb(),f.Hc(7,y,1,0,"mat-spinner",5),f.Hc(8,T,1,8,"app-services-list",6)),2&e&&(f.Ab(1),f.Kc(f.fc(2,6,"RESOURCE_DETAIL.ASSIGNED_SERVICES.TITLE")),f.Ab(3),f.kc("ngIf",!t.loadingResource&&t.assignServiceAuth),f.Ab(1),f.kc("ngIf",!t.loadingResource&&t.removeServiceAuth),f.Ab(1),f.kc("placeholder","RESOURCE_DETAIL.ASSIGNED_SERVICES.FILTER_SERVICES"),f.Ab(1),f.kc("ngIf",t.loading),f.Ab(1),f.kc("ngIf",!t.loading))},directives:[h.a,g.t,v.a,m.b,I.c,S.a],pipes:[R.d],styles:[""]}),t}()},gxIj:function(t,i,s){"use strict";s.d(i,"a",(function(){return A}));var n=s("Ssnw"),c=s("X2Q7"),a=s("EM62"),o=s("sEIs"),u=s("KZIX"),l=s("2kYt"),b=s("ZfaE"),f=s("bdug"),d=s("s2Ay");function p(e,t){1&e&&(a.Jc(0),a.ec(1,"translate")),2&e&&a.Lc(" ",a.fc(1,1,"RESOURCE_DETAIL.ENTITY")," ")}function h(e,t){if(1&e&&a.Nb(0,"app-one-entity-attribute-page",4),2&e){var r=a.dc();a.kc("entity","resource")("entityId",r.resourceId)}}function g(e,t){1&e&&(a.Jc(0),a.ec(1,"translate"),a.ec(2,"translate")),2&e&&a.Mc(" ",a.fc(1,2,"RESOURCE_DETAIL.ENTITY")," - ",a.fc(2,4,"MEMBER_DETAIL.ENTITY")," ")}function v(e,t){if(1&e&&a.Nb(0,"app-two-entity-attribute-page",5),2&e){var r=a.dc(2);a.kc("firstEntity","resource")("firstEntityId",r.resourceId)("secondEntity","member")}}function m(e,t){1&e&&(a.Sb(0,"mat-tab"),a.Hc(1,g,3,6,"ng-template",1),a.Hc(2,v,1,3,"ng-template",2),a.Rb())}function I(e,t){1&e&&(a.Jc(0),a.ec(1,"translate"),a.ec(2,"translate")),2&e&&a.Mc(" ",a.fc(1,2,"RESOURCE_DETAIL.ENTITY")," - ",a.fc(2,4,"GROUP_DETAIL.ENTITY")," ")}function S(e,t){if(1&e&&a.Nb(0,"app-two-entity-attribute-page",5),2&e){var r=a.dc(2);a.kc("firstEntity","resource")("firstEntityId",r.resourceId)("secondEntity","group")}}function R(e,t){1&e&&(a.Sb(0,"mat-tab"),a.Hc(1,I,3,6,"ng-template",1),a.Hc(2,S,1,3,"ng-template",2),a.Rb())}var A=function(){var t=function(){function t(r,i,s){e(this,t),this.route=r,this.authResolver=i,this.resourceManager=s}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){e.resourceId=parseInt(t.resourceId,10),e.resourceManager.getResourceById(e.resourceId).subscribe((function(t){e.resource=t,e.resourceGroupAttAuth=e.authResolver.isAuthorized("getAssignedGroups_Resource_policy",[e.resource]),e.resourceMemberAttAuth=e.authResolver.isAuthorized("getAssignedRichMembers_Resource_policy",[e.resource])}))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(o.a),a.Mb(n.h),a.Mb(c.m))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-attributes"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Eb("router-component",!0)},decls:10,vars:5,consts:[[1,"page-subtitle"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(a.Sb(0,"div"),a.Sb(1,"h1",0),a.Jc(2),a.ec(3,"translate"),a.Rb(),a.Sb(4,"mat-tab-group"),a.Sb(5,"mat-tab"),a.Hc(6,p,2,3,"ng-template",1),a.Hc(7,h,1,2,"ng-template",2),a.Rb(),a.Hc(8,m,3,0,"mat-tab",3),a.Hc(9,R,3,0,"mat-tab",3),a.Rb(),a.Rb()),2&e&&(a.Ab(2),a.Kc(a.fc(3,3,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),a.Ab(6),a.kc("ngIf",t.resourceMemberAttAuth),a.Ab(1),a.kc("ngIf",t.resourceGroupAttAuth))},directives:[u.c,u.a,u.d,u.b,l.t,b.a,f.a],pipes:[d.d],styles:[""]}),t}()},jblC:function(t,i,s){"use strict";s.d(i,"a",(function(){return G}));var n=s("X2Q7"),c=s("cqs0"),a=s("ILoV"),o=s("VEwN"),u=s("iyZ4"),l=s("8clQ"),b=s("Ssnw"),f=s("EM62"),d=s("sEIs"),p=s("OZ4H"),h=s("0XDM"),g=s("2kYt"),v=s("PBFl"),m=s("Y2X+"),I=s("pynj"),S=s("csyo"),R=s("K9kF"),A=s("FcRk"),E=s("s2Ay"),y=["checkbox"];function k(e,t){if(1&e){var r=f.Tb();f.Sb(0,"button",9),f.Zb("click",(function(){return f.xc(r),f.dc().addGroup()})),f.Jc(1),f.ec(2,"translate"),f.Rb()}2&e&&(f.Ab(1),f.Lc(" ",f.fc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"))}function M(e,t){1&e&&f.Nb(0,"mat-spinner",10)}var T=function(e){return[e]},_=function(){return["select","id","name","description","status"]};function O(e,t){if(1&e){var r=f.Tb();f.Sb(0,"div",11),f.Sb(1,"perun-web-apps-groups-list",12),f.Zb("page",(function(e){return f.xc(r),f.dc().pageChanged(e)})),f.Rb(),f.Rb()}if(2&e){var i=f.dc();f.Ab(1),f.kc("pageSize",i.pageSize)("groups",i.assignedGroups)("filter",i.filteredValue)("selection",i.selected)("disableMembers",!1)("disableRouting",!i.guiAuthResolver.isAuthorized("getGroupById_int_policy",f.pc(7,T,i.assignedGroups[0])))("displayedColumns",f.oc(9,_))}}function C(e,t){1&e&&(f.Sb(0,"app-alert",13),f.Jc(1),f.ec(2,"translate"),f.Rb()),2&e&&(f.Ab(1),f.Lc(" ",f.fc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}var G=function(){var t=function(){function t(r,i,s,n,a,o){e(this,t),this.route=r,this.resourcesManager=i,this.vosManagerService=s,this.tableConfigService=n,this.dialog=a,this.guiAuthResolver=o,this.assignedGroups=[],this.selected=new c.c(!0,[]),this.filteredValue="",this.tableId=u.S}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.getDataForAuthorization(),e.loadAllGroups()}))}},{key:"loadAllGroups",value:function(){var e=this;this.loading=!0,this.resourcesManager.getGroupAssignments(this.resourceId).subscribe((function(t){e.assignedGroups=t.map((function(e){var t=e.enrichedGroup.group;return t.status=e.status,t})),e.selected.clear(),e.loading=!1}))}},{key:"addGroup",value:function(){var e=this,t=Object(l.q)();t.width="800px",t.data={theme:"resource-theme",resource:this.resource},this.dialog.open(o.a,t).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"removeGroups",value:function(){var e=this,t=Object(l.q)();t.width="500px",t.data={resourceId:this.resourceId,groups:this.selected.selected,theme:"resource-theme"},this.dialog.open(a.a,t).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"canRemoveGroups",value:function(){var e=this,t=!0;return this.selected.selected.forEach((function(r){e.guiAuthResolver.isAuthorized("removeGroupsFromResource_List<Group>_Resource_policy",[e.resource,r])||(t=!1)})),t}},{key:"applyFilter",value:function(e){this.filteredValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){var e=this;this.loadingResource=!0,this.resourcesManager.getResourceById(this.resourceId).subscribe((function(t){e.resource=t,e.loadingResource=!1}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Mb(d.a),f.Mb(n.m),f.Mb(n.r),f.Mb(u.pb),f.Mb(p.b),f.Mb(b.h))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(e,t){var r;1&e&&f.Dc(y,!0),2&e&&f.sc(r=f.ac())&&(t.checkbox=r.first)},decls:14,vars:18,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","mat-flat-button","",1,"ml-2","mr-2",3,"disabled","click"],[3,"matTooltipDisabled","matTooltip"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["alert_type","warn",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"pageSize","groups","filter","selection","disableMembers","disableRouting","displayedColumns","page"],["alert_type","warn"]],template:function(e,t){1&e&&(f.Sb(0,"h1",0),f.Jc(1),f.ec(2,"translate"),f.Rb(),f.Sb(3,"perun-web-apps-refresh-button",1),f.Zb("refresh",(function(){return t.loadAllGroups()})),f.Rb(),f.Hc(4,k,3,3,"button",2),f.Sb(5,"button",3),f.Zb("click",(function(){return t.removeGroups()})),f.Sb(6,"span",4),f.ec(7,"translate"),f.Jc(8),f.ec(9,"translate"),f.Rb(),f.Rb(),f.Sb(10,"perun-web-apps-debounce-filter",5),f.Zb("filter",(function(e){return t.applyFilter(e)})),f.Rb(),f.Hc(11,M,1,0,"mat-spinner",6),f.Hc(12,O,2,10,"div",7),f.Hc(13,C,3,3,"app-alert",8)),2&e&&(f.Ab(1),f.Kc(f.fc(2,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),f.Ab(3),f.kc("ngIf",!t.loadingResource&&t.guiAuthResolver.isAuthorized("assignGroupsToResource_List<Group>_Resource_policy",f.pc(16,T,t.resource))),f.Ab(1),f.kc("disabled",0===t.selected.selected.length||!t.canRemoveGroups()),f.Ab(1),f.lc("matTooltip",f.fc(7,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_TOOLTIP")),f.kc("matTooltipDisabled",t.canRemoveGroups()),f.Ab(2),f.Lc(" ",f.fc(9,14,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP")," "),f.Ab(2),f.kc("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),f.Ab(1),f.kc("ngIf",t.loading),f.Ab(1),f.kc("ngIf",!t.loading&&0!==t.assignedGroups.length),f.Ab(1),f.kc("ngIf",0===t.assignedGroups.length&&!t.loading))},directives:[h.a,g.t,v.b,m.a,I.a,S.c,R.a,A.a],pipes:[E.d],styles:[""]}),t}()},lfUW:function(t,i,s){"use strict";s.d(i,"a",(function(){return R}));var n=s("X2Q7"),c=s("iyZ4"),a=s("Ssnw"),o=s("EM62"),u=s("sEIs"),l=s("2kYt"),b=s("0XDM"),f=s("A8Ay"),d=s("csyo"),p=s("nz2m"),h=s("s2Ay");function g(e,t){if(1&e){var r=o.Tb();o.Sb(0,"perun-web-apps-refresh-button",5),o.Zb("refresh",(function(){return o.xc(r),o.dc().refreshTable()})),o.Rb()}}function v(e,t){if(1&e){var r=o.Tb();o.Sb(0,"perun-web-apps-immediate-filter",6),o.Zb("filter",(function(e){return o.xc(r),o.dc().applyFilter(e)})),o.Rb()}2&e&&o.kc("placeholder","RESOURCE_DETAIL.ASSIGNED_MEMBERS.FILTER")}function m(e,t){1&e&&o.Nb(0,"mat-spinner",7)}var I=function(){return["checkbox","email","status","groupStatus","sponsored","organization","logins","type"]};function S(e,t){if(1&e){var r=o.Tb();o.Sb(0,"perun-web-apps-members-list",8),o.Zb("page",(function(e){return o.xc(r),o.dc().pageChanged(e)}))("updateTable",(function(){return o.xc(r),o.dc().refreshTable()})),o.Rb()}if(2&e){var i=o.dc();o.kc("disableRouting",!i.routeAuth)("filter",i.filterValue)("hideColumns",o.oc(5,I))("members",i.members)("pageSize",i.pageSize)}}var R=function(){var t=function(){function t(r,i,s,n){e(this,t),this.route=r,this.resourceService=i,this.tableConfigService=s,this.authResolver=n,this.loading=!1,this.filterValue="",this.tableId=c.V}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.resourceService.getAssignedRichMembers(this.resourceId).subscribe((function(t){e.members=t,e.setAuthRights(),e.loading=!1}))}},{key:"setAuthRights",value:function(){0!==this.members.length&&(this.routeAuth=this.authResolver.isAuthorized("getMemberById_int_policy",[this.members[0]]))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Mb(u.a),o.Mb(n.m),o.Mb(c.pb),o.Mb(a.h))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-resource-assigned-members"]],decls:7,vars:7,consts:[[1,"page-subtitle"],[3,"refresh",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"disableRouting","filter","hideColumns","members","pageSize","page","updateTable",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"disableRouting","filter","hideColumns","members","pageSize","page","updateTable"]],template:function(e,t){1&e&&(o.Sb(0,"h1",0),o.Jc(1),o.ec(2,"translate"),o.Rb(),o.Hc(3,g,1,0,"perun-web-apps-refresh-button",1),o.Hc(4,v,1,1,"perun-web-apps-immediate-filter",2),o.Hc(5,m,1,0,"mat-spinner",3),o.Hc(6,S,1,6,"perun-web-apps-members-list",4)),2&e&&(o.Ab(1),o.Kc(o.fc(2,5,"RESOURCE_DETAIL.ASSIGNED_MEMBERS.TITLE")),o.Ab(2),o.kc("ngIf",!t.loading),o.Ab(1),o.kc("ngIf",!t.loading),o.Ab(1),o.kc("ngIf",t.loading),o.Ab(1),o.kc("ngIf",!t.loading))},directives:[l.t,b.a,f.a,d.c,p.a],pipes:[h.d],styles:[""]}),t}()},nSPi:function(t,i,s){"use strict";s.d(i,"a",(function(){return D}));var n=s("TkCa"),c=s("4sdY"),a=s("EkAj"),o=s("X2Q7"),u=s("8clQ"),l=s("Ssnw"),b=s("t47Z"),f=s("+0js"),d=s("V78E"),p=s("EM62"),h=s("sEIs"),g=s("OZ4H"),v=s("EtYo"),m=s("2kYt"),I=s("csyo"),S=s("bFHC"),R=s("Y2X+"),A=s("ma6z"),E=s("PBFl"),y=s("s2Ay");function k(e,t){1&e&&p.Nb(0,"mat-spinner",3)}function M(e,t){if(1&e){var r=p.Tb();p.Sb(0,"button",15),p.Zb("click",(function(){return p.xc(r),p.dc(2).editResource()})),p.Sb(1,"mat-icon"),p.Jc(2,"edit"),p.Rb(),p.Rb()}}function T(e,t){if(1&e){var r=p.Tb();p.Sb(0,"button",16),p.Zb("click",(function(){return p.xc(r),p.dc(2).deleteResource()})),p.Sb(1,"mat-icon"),p.Jc(2,"delete_forever"),p.Rb(),p.Rb()}}var _=function(e){return["/organizations",e]};function O(e,t){if(1&e&&(p.Sb(0,"a",8),p.Jc(1),p.Rb()),2&e){var r=p.dc(2);p.kc("routerLink",p.pc(2,_,r.resource.vo.id)),p.Ab(1),p.Kc(r.resource.vo.name)}}function C(e,t){if(1&e&&(p.Sb(0,"span"),p.Jc(1),p.Rb()),2&e){var r=p.dc(2);p.Ab(1),p.Lc(" ",r.resource.vo.name," ")}}var G=function(e){return["/facilities",e]};function w(e,t){if(1&e&&(p.Sb(0,"a",8),p.Jc(1),p.Rb()),2&e){var r=p.dc(2);p.kc("routerLink",p.pc(2,G,r.resource.facilityId)),p.Ab(1),p.Kc(r.resource.facility.name)}}function L(e,t){if(1&e&&(p.Sb(0,"span"),p.Jc(1),p.Rb()),2&e){var r=p.dc(2);p.Ab(1),p.Lc(" ",r.resource.facility.name," ")}}var z=function(){return{color:"black"}},U=function(e){return[e]};function N(e,t){if(1&e&&(p.Sb(0,"div"),p.Sb(1,"div",4),p.Nb(2,"mat-icon",5),p.ec(3,"translate"),p.Sb(4,"div",6),p.Sb(5,"div",7),p.Sb(6,"a",8),p.Jc(7),p.Rb(),p.Sb(8,"span",9),p.Jc(9),p.Rb(),p.Hc(10,M,3,0,"button",10),p.Hc(11,T,3,0,"button",11),p.Rb(),p.Sb(12,"span",12),p.Jc(13),p.ec(14,"translate"),p.ec(15,"translate"),p.Hc(16,O,2,4,"a",13),p.Hc(17,C,2,1,"span",2),p.Jc(18),p.ec(19,"translate"),p.Hc(20,w,2,4,"a",14),p.Hc(21,L,2,1,"span",2),p.Jc(22),p.ec(23,"translate"),p.Rb(),p.Rb(),p.Rb(),p.Nb(24,"app-animated-router-outlet"),p.Rb()),2&e){var r=p.dc();p.Ab(2),p.lc("matTooltip",p.fc(3,18,"RESOURCE_DETAIL.ENTITY")),p.kc("ngStyle",p.oc(28,z)),p.Ab(4),p.kc("routerLink",p.pc(29,U,r.baseUrl)),p.Ab(1),p.Lc(" ",r.resource.name," "),p.Ab(2),p.Lc(" \xa0#",r.resource.id," "),p.Ab(1),p.kc("ngIf",r.editResourceAuth),p.Ab(1),p.kc("ngIf",r.deleteAuth),p.Ab(2),p.Mc(" ",p.fc(14,20,"RESOURCE_DETAIL.ENTITY"),", ",p.fc(15,22,"RESOURCE_DETAIL.VO"),": "),p.Ab(3),p.kc("ngIf",r.voLinkAuth),p.Ab(1),p.kc("ngIf",!r.voLinkAuth),p.Ab(1),p.Mc(" #",r.resource.voId,", ",p.fc(19,24,"RESOURCE_DETAIL.FACILITY"),": "),p.Ab(2),p.kc("ngIf",r.facilityLinkAuth),p.Ab(1),p.kc("ngIf",!r.facilityLinkAuth),p.Ab(1),p.Nc(" #",r.resource.facilityId,", ",p.fc(23,26,"RESOURCE_DETAIL.DESCRIPTION"),": ",r.resource.description," ")}}var D=function(){var t=function(){function t(r,i,s,n,c,a,o,u,l){e(this,t),this.route=r,this.facilityManager=i,this.vosManagerService=s,this.resourcesManager=n,this.sideMenuService=c,this.sideMenuItemService=a,this.dialog=o,this.guiAuthResolver=u,this.router=l,this.deleteAuth=!1,this.baseUrl="",this.loading=!1}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe((function(t){e.resourcesManager.getRichResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.setAuth(),"facilities"===e.route.parent.snapshot.url[0].path?(e.baseUrl=(new b.a).transform(t,!1),e.facilityManager.getFacilityById(t.facilityId).subscribe((function(r){var i=e.sideMenuItemService.parseFacility(r),s=e.sideMenuItemService.parseResource(t,!1);e.sideMenuService.setFacilityMenuItems([i,s]),e.loading=!1}),(function(){return e.loading=!1}))):(e.baseUrl=(new b.a).transform(t,!0),e.vosManagerService.getVoById(t.voId).subscribe((function(r){var i=e.sideMenuItemService.parseVo(r),s=e.sideMenuItemService.parseResource(t,!0);e.sideMenuService.setAccessMenuItems([i,s]),e.loading=!1}),(function(){return e.loading=!1}))),Object(u.d)("resources",e.resource)}))}))}},{key:"setAuth",value:function(){this.facilityLinkAuth=this.guiAuthResolver.isAuthorized("getFacilityById_int_policy",[this.resource]),this.editResourceAuth=this.guiAuthResolver.isAuthorized("updateResource_Resource_policy",[this.resource]),this.voLinkAuth=this.guiAuthResolver.isAuthorized("getVoById_int_policy",[this.resource]),this.deleteAuth=this.guiAuthResolver.isAuthorized("deleteResource_Resource_policy",[this.resource])}},{key:"editResource",value:function(){var e,t=this;this.resourcesManager.getResourceById(this.resource.id).subscribe((function(r){e=r;var i=Object(u.q)();i.width="450px",i.data={theme:"resource-theme",resource:e,dialogType:f.j.RESOURCE},t.dialog.open(f.i,i).afterClosed().subscribe((function(e){e&&t.resourcesManager.getRichResourceById(t.resource.id).subscribe((function(e){t.resource=e}))}))}))}},{key:"deleteResource",value:function(){var e=this,t=Object(u.q)();t.width="500px",t.data={theme:"resource-theme",resources:[this.resource]},this.dialog.open(d.a,t).afterClosed().subscribe((function(t){t&&e.router.navigate(["../"],{relativeTo:e.route})}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Mb(h.a),p.Mb(o.g),p.Mb(o.r),p.Mb(o.m),p.Mb(c.a),p.Mb(a.a),p.Mb(g.b),p.Mb(l.h),p.Mb(h.f))},t.\u0275cmp=p.Gb({type:t,selectors:[["app-resource-detail-page"]],decls:4,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-resource-black",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"resource-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","","aria-label","Edit resource",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],["queryParamsHandling","merge","class","resource-link",3,"routerLink",4,"ngIf"],["class","resource-link","queryParamsHandling","merge",3,"routerLink",4,"ngIf"],["mat-icon-button","","aria-label","Edit resource",3,"click"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&(p.Sb(0,"div",0),p.Nb(1,"perun-web-apps-back-button"),p.Hc(2,k,1,0,"mat-spinner",1),p.Hc(3,N,25,31,"div",2),p.Rb()),2&e&&(p.Ab(2),p.kc("ngIf",t.loading),p.Ab(1),p.kc("ngIf",!t.loading&&void 0!==t.resource))},directives:[v.a,m.t,I.c,S.a,R.a,m.w,h.i,A.a,E.b],pipes:[y.d],styles:[".break-line[_ngcontent-%COMP%]{display:inline-block}"],data:{animation:[n.a]}}),t}()},"y/MV":function(t,i,s){"use strict";s.d(i,"a",(function(){return p}));var n=s("X2Q7"),c=s("Ssnw"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("csyo"),b=s("ZG5M");function f(e,t){1&e&&a.Nb(0,"mat-spinner",2)}function d(e,t){if(1&e&&(a.Sb(0,"div"),a.Nb(1,"perun-web-apps-menu-buttons-field",3),a.Rb()),2&e){var r=a.dc();a.Ab(1),a.kc("items",r.navItems)("size","small")}}var p=function(){var t=function(){function t(r,i,s){e(this,t),this.resourcesManager=r,this.route=i,this.guiAuthResolver=s,this.navItems=[],this.loading=!1}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe((function(t){e.resourcesManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.snapshot.url[0].path),e.loading=!1}),(function(){return e.loading=!1}))}))}},{key:"initItems",value:function(e){var t=e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId;this.navItems=[],this.guiAuthResolver.isAuthorized("getAssignedGroups_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-group",url:"".concat(t,"/resources/").concat(this.resource.id,"/groups"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedServices_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-service",url:"/".concat(t,"/resources/").concat(this.resource.id,"/services"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_SERVICES",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedMembers_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-user",url:"".concat(t,"/resources/").concat(this.resource.id,"/members"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_MEMBERS",style:"resource-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"".concat(t,"/resources/").concat(this.resource.id,"/attributes"),label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"}),this.guiAuthResolver.isManagerPagePrivileged(this.resource)&&this.navItems.push({cssIcon:"perun-settings2",url:"".concat(t,"/resources/").concat(this.resource.id,"/settings"),label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(n.m),a.Mb(o.a),a.Mb(c.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Eb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(a.Hc(0,f,1,0,"mat-spinner",0),a.Hc(1,d,2,2,"div",1)),2&e&&(a.kc("ngIf",t.loading),a.Ab(1),a.kc("ngIf",!t.loading))},directives:[u.t,l.c,b.a],styles:[""]}),t}()}}])}();