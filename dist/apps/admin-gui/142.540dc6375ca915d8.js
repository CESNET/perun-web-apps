"use strict";(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[142],{54668:(K,P,i)=>{i.d(P,{l:()=>d});var R=i(48966),c=i(112),e=i(36908),s=i(10036),t=i(20449),D=i(64080),l=i(93075),n=i(5e3),M=i(51062),N=i(67322),b=i(98833),L=i(47423),y=i(25245),Y=i(69808),C=i(64877),Z=i(98380),E=i(20773);function I(r,m){if(1&r&&n._UZ(0,"app-users-list",14),2&r){const h=n.oxw(2);n.Q6J("tableId",h.tableId)("displayedColumns",h.displayedColumns)("users",h.identities)("disableRouting",!0)("selection",h.selection)}}function O(r,m){if(1&r&&(n.TgZ(0,"div"),n.YNc(1,I,1,5,"app-users-list",13),n.qZA()),2&r){const h=n.oxw();n.xp6(1),n.Q6J("ngIf",void 0!==h.identities&&h.identities.length>0)}}function p(r,m){1&r&&(n.TgZ(0,"app-alert",15),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&r&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function T(r,m){1&r&&(n.TgZ(0,"app-alert",16),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&r&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES")," "))}function _(r,m){1&r&&n._UZ(0,"mat-spinner",17)}let d=(()=>{class r{constructor(h,U,J,Q,G,V){this.dialogRef=h,this.data=U,this.userManager=J,this.storeService=Q,this.notificator=G,this.translate=V,this.loading=!1,this.selection=new t.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=s.Iz}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new l.NI("",[l.kI.required,l.kI.pattern(".*[\\S]+.*")])}onAdd(){let h,U;this.loading=!0,this.isService?(h=this.selection.selected[0].id,U=this.userId):(h=this.userId,U=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(h,U).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid)return void this.searchCtrl.markAllAsTouched();this.loading=!0,this.firstSearchDone=!0;let h=[D.r.USER_DEF_ORGANIZATION,D.r.USER_DEF_PREFERRED_MAIL];h=h.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,h).subscribe(U=>{this.identities=this.filterIdentities(U),this.loading=!1},()=>{this.loading=!1})}onKeyInput(h){"Enter"===h.key&&this.onSearchByString()}filterIdentities(h){return h.filter(this.isService?U=>!U.serviceUser:U=>U.serviceUser)}}return r.\u0275fac=function(h){return new(h||r)(n.Y36(R.so),n.Y36(R.WI),n.Y36(c.Fv),n.Y36(e.d6),n.Y36(e.V6),n.Y36(M.sK))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-connect-identity-dialog"]],decls:25,vars:25,consts:[[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"mr-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"placeholder","formControl"],["mat-flat-button","","color","primary",1,"mr-2","search-btn",3,"disabled","click"],[4,"ngIf"],["alert_type","info",4,"ngIf"],["alert_type","warn",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[3,"tableId","displayedColumns","users","disableRouting","selection",4,"ngIf"],[3,"tableId","displayedColumns","users","disableRouting","selection"],["alert_type","info"],["alert_type","warn"],[1,"ml-auto","mr-auto"]],template:function(h,U){1&h&&(n.TgZ(0,"div",0),n.NdJ("keyup",function(Q){return U.onKeyInput(Q)}),n.TgZ(1,"h1",1),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"mat-form-field",3),n._UZ(6,"input",4),n.ALo(7,"translate"),n.TgZ(8,"mat-error"),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.qZA(),n.TgZ(11,"button",5),n.NdJ("click",function(){return U.onSearchByString()}),n.TgZ(12,"mat-icon"),n._uU(13,"search"),n.qZA(),n.qZA(),n.YNc(14,O,2,1,"div",6),n.YNc(15,p,3,3,"app-alert",7),n.YNc(16,T,3,3,"app-alert",8),n.qZA(),n.YNc(17,_,1,0,"mat-spinner",9),n.TgZ(18,"div",10),n.TgZ(19,"button",11),n.NdJ("click",function(){return U.onCancel()}),n._uU(20),n.ALo(21,"translate"),n.qZA(),n.TgZ(22,"button",12),n.NdJ("click",function(){return U.onAdd()}),n._uU(23),n.ALo(24,"translate"),n.qZA(),n.qZA(),n.qZA()),2&h&&(n.Tol(U.theme),n.xp6(2),n.Oqu(n.lcZ(3,15,"DIALOGS.CONNECT_IDENTITY.TITLE_"+U.target)),n.xp6(4),n.s9C("placeholder",n.lcZ(7,17,"DIALOGS.CONNECT_IDENTITY.SEARCH")),n.Q6J("formControl",U.searchCtrl),n.xp6(3),n.hij(" ",n.lcZ(10,19,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),n.xp6(2),n.Q6J("disabled",U.loading),n.xp6(3),n.Q6J("ngIf",!U.loading),n.xp6(1),n.Q6J("ngIf",!U.firstSearchDone),n.xp6(1),n.Q6J("ngIf",!U.loading&&U.firstSearchDone&&0===U.identities.length),n.xp6(1),n.Q6J("ngIf",U.loading),n.xp6(3),n.hij(" ",n.lcZ(21,21,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),n.xp6(2),n.Q6J("disabled",0===U.selection.selected.length),n.xp6(1),n.hij(" ",n.lcZ(24,23,"DIALOGS.CONNECT_IDENTITY.CONNECT")," "))},directives:[R.uh,R.xY,N.KE,b.Nt,l.Fj,l.JJ,l.oH,N.TO,L.lW,y.Hw,Y.O5,C.C,Z.w,E.$g,R.H8],pipes:[M.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]}),r})()},94814:(K,P,i)=>{i.d(P,{B:()=>E});var R=i(112),c=i(48966),e=i(36908),s=i(32075),t=i(5e3),D=i(51062),l=i(69808),n=i(98380),M=i(47423),N=i(31359);function b(I,O){1&I&&t._UZ(0,"th",13)}function L(I,O){if(1&I&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"userFullName"),t.qZA()),2&I){const p=O.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,p))}}function y(I,O){1&I&&t._UZ(0,"tr",15)}function Y(I,O){1&I&&t._UZ(0,"tr",16)}function C(I,O){1&I&&(t.TgZ(0,"app-alert",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&I&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function Z(I,O){1&I&&(t.TgZ(0,"app-alert",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&I&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}let E=(()=>{class I{constructor(p,T,_,d,r,m){this.dialogRef=p,this.data=T,this.userManager=_,this.notificator=d,this.translate=r,this.store=m,this.displayedColumns=["name"]}ngOnInit(){let p;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new s.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(p=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(p=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(p).subscribe(T=>{this.disconnectingLastOwner=1===T.length})}onConfirm(){let p,T;this.isService?(p=this.dataSource.data[0].id,T=this.userId):(p=this.userId,T=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(p,T).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}}return I.\u0275fac=function(p){return new(p||I)(t.Y36(c.so),t.Y36(c.WI),t.Y36(R.Fv),t.Y36(e.V6),t.Y36(D.sK),t.Y36(e.d6))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["alert_type","warn"]],template:function(p,T){1&p&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div"),t.TgZ(4,"div",1),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",2),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"table",3),t.ynx(12,4),t.YNc(13,b,1,0,"th",5),t.YNc(14,L,3,3,"td",6),t.BQk(),t.YNc(15,y,1,0,"tr",7),t.YNc(16,Y,1,0,"tr",8),t.qZA(),t.YNc(17,C,3,3,"app-alert",9),t.YNc(18,Z,3,3,"app-alert",9),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"button",11),t.NdJ("click",function(){return T.onCancel()}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return T.onConfirm()}),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA()),2&p&&(t.xp6(1),t.Oqu(t.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+T.targetTitle)),t.xp6(2),t.Tol(T.theme),t.xp6(3),t.Oqu(t.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+T.targetDescription)),t.xp6(3),t.hij(" ",t.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),t.xp6(2),t.Q6J("dataSource",T.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",T.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",T.displayedColumns),t.xp6(1),t.Q6J("ngIf",T.disconnectingSelf),t.xp6(1),t.Q6J("ngIf",T.disconnectingLastOwner),t.xp6(3),t.hij(" ",t.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},directives:[c.uh,c.xY,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,l.O5,n.w,c.H8,M.lW],pipes:[D.X$,N.d],styles:[""]}),I})()},29862:(K,P,i)=>{i.d(P,{x:()=>Z});var R=i(112),c=i(48966),e=i(36908),s=i(93075),t=i(5e3),D=i(51062),l=i(67322),n=i(98833),M=i(69808),N=i(47423);function b(E,I){1&E&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&E&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function L(E,I){1&E&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&E&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function y(E,I){1&E&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&E&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function Y(E,I){1&E&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&E&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function C(E,I){1&E&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&E&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}let Z=(()=>{class E{constructor(O,p,T,_,d){this.dialogRef=O,this.data=p,this.userService=T,this.notificator=_,this.translateService=d,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new s.NI(this.data.user.titleBefore,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.titleAfter=new s.NI(this.data.user.titleAfter,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.firstName=new s.NI(this.data.user.firstName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.middleName=new s.NI(this.data.user.middleName,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.lastName=new s.NI(this.data.user.lastName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(O=>{this.notificator.showSuccess(O),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return E.\u0275fac=function(O){return new(O||E)(t.Y36(c.so),t.Y36(c.WI),t.Y36(R.Fv),t.Y36(e.V6),t.Y36(D.sK))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-edit-user-dialog"]],decls:32,vars:38,consts:[[1,"mat-dialog-title"],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl","placeholder"],[4,"ngIf"],["matInput","","required","",3,"formControl","placeholder"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"]],template:function(O,p){1&O&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",1),t.TgZ(5,"mat-form-field"),t._UZ(6,"input",2),t.ALo(7,"translate"),t.YNc(8,b,3,3,"mat-error",3),t.qZA(),t.TgZ(9,"mat-form-field"),t._UZ(10,"input",2),t.ALo(11,"translate"),t.YNc(12,L,3,3,"mat-error",3),t.qZA(),t.TgZ(13,"mat-form-field"),t._UZ(14,"input",4),t.ALo(15,"translate"),t.YNc(16,y,3,3,"mat-error",3),t.qZA(),t.TgZ(17,"mat-form-field"),t._UZ(18,"input",2),t.ALo(19,"translate"),t.YNc(20,Y,3,3,"mat-error",3),t.qZA(),t.TgZ(21,"mat-form-field"),t._UZ(22,"input",4),t.ALo(23,"translate"),t.YNc(24,C,3,3,"mat-error",3),t.qZA(),t.qZA(),t.TgZ(25,"div",5),t.TgZ(26,"button",6),t.NdJ("click",function(){return p.onCancel()}),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"button",7),t.NdJ("click",function(){return p.onSave()}),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA()),2&O&&(t.Tol(p.theme),t.xp6(2),t.Oqu(t.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),t.xp6(4),t.s9C("placeholder",t.lcZ(7,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),t.Q6J("formControl",p.titleBefore),t.xp6(2),t.Q6J("ngIf",p.titleBefore.invalid),t.xp6(2),t.s9C("placeholder",t.lcZ(11,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),t.Q6J("formControl",p.titleAfter),t.xp6(2),t.Q6J("ngIf",p.titleAfter.invalid),t.xp6(2),t.s9C("placeholder",t.lcZ(15,28,"DIALOGS.EDIT_USER.FIRST_NAME")),t.Q6J("formControl",p.firstName),t.xp6(2),t.Q6J("ngIf",p.firstName.invalid),t.xp6(2),t.s9C("placeholder",t.lcZ(19,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),t.Q6J("formControl",p.middleName),t.xp6(2),t.Q6J("ngIf",p.middleName.invalid),t.xp6(2),t.s9C("placeholder",t.lcZ(23,32,"DIALOGS.EDIT_USER.LAST_NAME")),t.Q6J("formControl",p.lastName),t.xp6(2),t.Q6J("ngIf",p.lastName.invalid),t.xp6(3),t.hij(" ",t.lcZ(28,34,"DIALOGS.EDIT_USER.CANCEL")," "),t.xp6(2),t.Q6J("disabled",p.loading||p.firstName.invalid||p.lastName.invalid||p.titleBefore.invalid||p.titleAfter.invalid||p.middleName.invalid),t.xp6(1),t.hij(" ",t.lcZ(31,36,"DIALOGS.EDIT_USER.SAVE")," "))},directives:[c.xY,l.KE,n.Nt,s.Fj,s.JJ,s.oH,M.O5,l.TO,s.Q7,c.H8,N.lW],pipes:[D.X$],styles:[""]}),E})()},98973:(K,P,i)=>{i.d(P,{u:()=>Y});var R=i(36908),c=i(5e3),e=i(11735),s=i(53251),t=i(12651),D=i(69808),l=i(19191),n=i(51062);function M(C,Z){1&C&&(c._uU(0),c.ALo(1,"translate")),2&C&&c.hij(" ",c.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function N(C,Z){if(1&C&&c._UZ(0,"app-one-entity-attribute-page",5),2&C){const E=c.oxw();c.Q6J("entityId",E.userId)("entity","user")}}function b(C,Z){1&C&&(c._uU(0),c.ALo(1,"translate"),c.ALo(2,"translate")),2&C&&c.AsE(" ",c.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",c.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function L(C,Z){if(1&C&&c._UZ(0,"app-two-entity-attribute-page",6),2&C){const E=c.oxw(2);c.Q6J("firstEntity","user")("firstEntityId",E.userId)("secondEntity","facility")}}function y(C,Z){1&C&&(c.TgZ(0,"mat-tab"),c.YNc(1,b,3,6,"ng-template",2),c.YNc(2,L,1,3,"ng-template",3),c.qZA())}let Y=(()=>{class C{constructor(E,I,O){this.route=E,this.store=I,this.authResolver=O}ngOnInit(){this.route.parent.params.subscribe(E=>{this.userId=E.userId,void 0===this.userId&&(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}}return C.\u0275fac=function(E){return new(E||C)(c.Y36(e.gz),c.Y36(R.d6),c.Y36(R.x4))},C.\u0275cmp=c.Xpm({type:C,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(E,I){2&E&&c.ekj("router-component",I.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(E,I){1&E&&(c.TgZ(0,"h1",0),c._uU(1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"mat-tab-group"),c.TgZ(4,"mat-tab",1),c.YNc(5,M,2,3,"ng-template",2),c.YNc(6,N,1,2,"ng-template",3),c.qZA(),c.YNc(7,y,3,0,"mat-tab",4),c.qZA()),2&E&&(c.xp6(1),c.Oqu(c.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),c.xp6(6),c.Q6J("ngIf",I.userFacilityAttAuth))},directives:[s.SP,s.uX,s.uD,s.Vc,t.t,D.O5,l.Y],pipes:[n.X$],styles:[""]}),C})()},85985:(K,P,i)=>{i.d(P,{u:()=>T});var R=i(36908),c=i(112),e=i(10036),s=i(5e3),t=i(11735),D=i(69808),l=i(96214),n=i(7434),M=i(20773),N=i(24179),b=i(51062);function L(_,d){1&_&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&_&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function y(_,d){1&_&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&_&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function Y(_,d){1&_&&s._UZ(0,"mat-spinner",7)}const C=function(){return["id","vo","name","description","status"]};function Z(_,d){if(1&_&&s._UZ(0,"perun-web-apps-groups-list",8),2&_){const r=s.oxw();s.Q6J("tableId",r.tableId)("groups",r.membersGroups)("displayedColumns",s.DdM(5,C))("disableMembers",!1)("filter",r.memberFilterValue)}}function E(_,d){1&_&&s._UZ(0,"mat-spinner",7)}const I=function(){return["id","vo","name","description"]};function O(_,d){if(1&_&&s._UZ(0,"perun-web-apps-groups-list",8),2&_){const r=s.oxw(2);s.Q6J("tableId",r.adminTableId)("groups",r.adminsGroups)("displayedColumns",s.DdM(5,I))("disableMembers",!1)("filter",r.adminFilterValue)}}function p(_,d){if(1&_){const r=s.EpF();s.TgZ(0,"div",9),s.TgZ(1,"h1",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return s.CHM(r),s.oxw().refreshAdminTable()}),s.qZA(),s.TgZ(5,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(h){return s.CHM(r),s.oxw().adminFilter(h)}),s.qZA(),s.YNc(6,E,1,0,"mat-spinner",3),s.YNc(7,O,1,6,"perun-web-apps-groups-list",4),s.qZA()}if(2&_){const r=s.oxw();s.xp6(2),s.hij(" ",s.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",r.adminRefresh),s.xp6(1),s.Q6J("ngIf",!r.adminRefresh)}}let T=(()=>{class _{constructor(r,m,h,U,J){this.usersService=r,this.memberService=m,this.groupService=h,this.store=U,this.route=J,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=e.KE,this.adminTableId=e.Sb}ngOnInit(){!0===(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(r=>this.userId=r.userId),this.refreshAdminTable(),this.refreshMemberTable()}memberFilter(r){this.memberFilterValue=r}adminFilter(r){this.adminFilterValue=r}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(r=>{this.adminsGroups=r,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(r=>{this.vos=r;for(const m of this.vos)this.memberService.getMemberByUser(m.id,this.userId).subscribe(h=>{this.groupService.getMemberGroups(h.id).subscribe(U=>{this.membersGroups=this.membersGroups.concat(U),this.vos.indexOf(m)===this.vos.length-1&&(this.memberRefresh=!1)})});0===r.length&&(this.memberRefresh=!1)})}}return _.\u0275fac=function(r){return new(r||_)(s.Y36(c.Fv),s.Y36(c.uq),s.Y36(c.ff),s.Y36(R.d6),s.Y36(t.gz))},_.\u0275cmp=s.Xpm({type:_,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(r,m){2&r&&s.ekj("router-component",m.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","groups","displayedColumns","disableMembers","filter",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"tableId","groups","displayedColumns","disableMembers","filter"],[1,"mt-5"]],template:function(r,m){1&r&&(s.YNc(0,L,3,3,"h1",0),s.YNc(1,y,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return m.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(U){return m.memberFilter(U)}),s.qZA(),s.YNc(4,Y,1,0,"mat-spinner",3),s.YNc(5,Z,1,6,"perun-web-apps-groups-list",4),s.YNc(6,p,8,6,"div",5)),2&r&&(s.Q6J("ngIf",m.showPrincipal),s.xp6(1),s.Q6J("ngIf",!m.showPrincipal),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",m.memberRefresh),s.xp6(1),s.Q6J("ngIf",!m.memberRefresh),s.xp6(1),s.Q6J("ngIf",!m.showPrincipal))},directives:[D.O5,l.t,n.L,M.$g,N.W],pipes:[b.X$],styles:[""]}),_})()},74837:(K,P,i)=>{i.d(P,{j:()=>O});var R=i(112),c=i(36908),e=i(10036),s=i(5e3),t=i(11735),D=i(69808),l=i(96214),n=i(7434),M=i(20773),N=i(87831),b=i(51062);function L(p,T){1&p&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&p&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function y(p,T){1&p&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&p&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function Y(p,T){1&p&&s._UZ(0,"mat-spinner",7)}function C(p,T){if(1&p&&s._UZ(0,"perun-web-apps-vos-list",8),2&p){const _=s.oxw();s.Q6J("displayedColumns",_.displayedColumns)("tableId",_.memberTableId)("filterValue",_.memberFilterValue)("vos",_.vosWhereIsMember)}}function Z(p,T){1&p&&s._UZ(0,"mat-spinner",7)}function E(p,T){if(1&p&&s._UZ(0,"perun-web-apps-vos-list",8),2&p){const _=s.oxw(2);s.Q6J("displayedColumns",_.displayedColumns)("tableId",_.adminTableId)("filterValue",_.adminFilterValue)("vos",_.vosWhereIsAdmin)}}function I(p,T){if(1&p){const _=s.EpF();s.TgZ(0,"div",9),s.TgZ(1,"h1",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return s.CHM(_),s.oxw().refreshAdminTable()}),s.qZA(),s.TgZ(5,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(r){return s.CHM(_),s.oxw().applyAdminFilter(r)}),s.qZA(),s.YNc(6,Z,1,0,"mat-spinner",3),s.YNc(7,E,1,4,"perun-web-apps-vos-list",4),s.qZA()}if(2&p){const _=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",_.adminRefresh),s.xp6(1),s.Q6J("ngIf",!_.adminRefresh)}}let O=(()=>{class p{constructor(_,d,r,m){this.usersService=_,this.authResolver=d,this.store=r,this.route=m,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=e.YF,this.memberTableId=e.gc}ngOnInit(){!0===(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(_=>this.userId=_.userId),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(_=>{this.vosWhereIsMember=_,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(_=>{this.vosWhereIsAdmin=_,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(_){this.memberFilterValue=_}applyAdminFilter(_){this.adminFilterValue=_}}return p.\u0275fac=function(_){return new(_||p)(s.Y36(R.Fv),s.Y36(c.x4),s.Y36(c.d6),s.Y36(t.gz))},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(_,d){2&_&&s.ekj("router-component",d.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","tableId","filterValue","vos",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(_,d){1&_&&(s.YNc(0,L,3,3,"h1",0),s.YNc(1,y,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return d.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(m){return d.applyMemberFilter(m)}),s.qZA(),s.YNc(4,Y,1,0,"mat-spinner",3),s.YNc(5,C,1,4,"perun-web-apps-vos-list",4),s.YNc(6,I,8,6,"div",5)),2&_&&(s.Q6J("ngIf",d.isMyProfile),s.xp6(1),s.Q6J("ngIf",!d.isMyProfile),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",d.memberRefresh),s.xp6(1),s.Q6J("ngIf",!d.memberRefresh),s.xp6(1),s.Q6J("ngIf",!d.isMyProfile))},directives:[D.O5,l.t,n.L,M.$g,N.Z],pipes:[b.X$],styles:[""]}),p})()},17755:(K,P,i)=>{i.d(P,{Z:()=>_});var R=i(112),c=i(32075),e=i(36908),s=i(64080),t=i(9244),D=i(40071),l=i(5e3),n=i(11735),M=i(48966),N=i(69808),b=i(9224),L=i(47423),y=i(25245),Y=i(71135),C=i(51062);function Z(d,r){1&d&&l._UZ(0,"th",12)}function E(d,r){if(1&d&&(l.TgZ(0,"td",13),l._uU(1),l.qZA()),2&d){const m=r.$implicit;l.xp6(1),l.hij(" ",m.displayName,": ")}}function I(d,r){1&d&&l._UZ(0,"th",12)}function O(d,r){if(1&d){const m=l.EpF();l.TgZ(0,"td",14),l._uU(1),l.TgZ(2,"button",15),l.NdJ("click",function(){return l.CHM(m),l.oxw(2).changeEmail()}),l.TgZ(3,"mat-icon"),l._uU(4,"edit"),l.qZA(),l.qZA(),l.qZA()}if(2&d){const m=r.$implicit;l.xp6(1),l.hij(" ",m.value," ")}}function p(d,r){1&d&&l._UZ(0,"tr",16)}function T(d,r){if(1&d&&(l.TgZ(0,"div",2),l.TgZ(1,"mat-card",3),l.TgZ(2,"mat-card-header"),l.TgZ(3,"mat-card-title"),l.TgZ(4,"h1",4),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"mat-card-content"),l.TgZ(8,"table",5),l.ynx(9,6),l.YNc(10,Z,1,0,"th",7),l.YNc(11,E,2,1,"td",8),l.BQk(),l.ynx(12,9),l.YNc(13,I,1,0,"th",7),l.YNc(14,O,5,1,"td",10),l.BQk(),l.YNc(15,p,1,0,"tr",11),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&d){const m=l.oxw();l.xp6(5),l.Oqu(l.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),l.xp6(3),l.Q6J("dataSource",m.mailDataSource),l.xp6(7),l.Q6J("matRowDefColumns",m.displayedColumns)}}let _=(()=>{class d{constructor(m,h,U,J,Q){this.userService=m,this.attributeService=h,this.storeService=U,this.route=J,this.dialog=Q,this.navItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(m=>{void 0!==m.userId?this.userService.getUserById(m.userId).subscribe(h=>{this.user=h,this.isServiceUser=h.serviceUser,this.initNavItems()}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(h=>{this.preferredMail=h,this.handleMailNotDefined(),this.mailDataSource=new c.by([this.preferredMail]),this.initNavItems()}))})}initNavItems(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-user",url:"accounts",label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-identity",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-roles",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.navItems.push(this.isServiceUser?{cssIcon:"perun-manager",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}changeEmail(){const m=(0,t.kZ)();m.width="350px",m.data={userId:this.userID},this.dialog.open(D.gr,m).afterClosed().subscribe(U=>{U&&this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(J=>{this.preferredMail=J,this.handleMailNotDefined(),this.mailDataSource=new c.by([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,t.Cz)(s.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:Object("-")})}}return d.\u0275fac=function(m){return new(m||d)(l.Y36(R.Fv),l.Y36(R.H8),l.Y36(e.d6),l.Y36(n.gz),l.Y36(M.uw))},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(m,h){2&m&&l.ekj("router-component",h.true)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(m,h){1&m&&(l.YNc(0,T,16,5,"div",0),l._UZ(1,"perun-web-apps-menu-buttons-field",1)),2&m&&(l.Q6J("ngIf",h.inMyProfile),l.xp6(1),l.Q6J("items",h.navItems)("size","small"))},directives:[N.O5,b.a8,b.dk,b.n5,b.dn,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,L.lW,y.Hw,c.nj,c.Gk,Y.L],pipes:[C.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),d})()},6097:(K,P,i)=>{i.d(P,{t:()=>Ve});var R=i(112),c=i(36908),e=i(5e3),s=i(11735),t=i(69808),D=i(20773),l=i(81125),n=i(25245),M=i(9224),N=i(87831),b=i(64877),L=i(24179),y=i(62109),Y=i(74010),C=i(38383),Z=i(51062);function E(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function I(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function O(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.SELF_VOS_ADMIN")," "))}function p(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.SELF_VOS")," "))}function T(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.SELF_IDENTITIES_ADMIN")," "))}function _(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.SELF_IDENTITIES")," "))}const d=function(){return["user","id","name"]};function r(a,f){if(1&a&&(e.TgZ(0,"div",11),e.YNc(1,T,3,3,"div",2),e.YNc(2,_,3,3,"div",2),e._UZ(3,"app-users-list",12),e.qZA()),2&a){const o=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!o.showDescription),e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("users",o.users)("disableRouting",!0)("displayedColumns",e.DdM(5,d))}}const m=function(){return["id","name","shortName"]};function h(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,O,3,3,"div",2),e.YNc(2,p,3,3,"div",2),e._UZ(3,"perun-web-apps-vos-list",9),e.YNc(4,r,4,6,"div",10),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!o.showDescription),e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(5,m))("vos",o.vos),e.xp6(1),e.Q6J("ngIf",o.users.length)}}function U(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getSelfData()}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",7),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,I,1,0,"mat-spinner",1),e.YNc(8,h,5,6,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.SELF")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function J(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function Q(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.GROUPADMIN_GROUPS")," "))}const G=function(){return["id","vo","name","description"]};function V(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Q,3,3,"div",2),e._UZ(2,"perun-web-apps-groups-list",14),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("groups",o.groups)("displayedColumns",e.DdM(3,G))}}function ee(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getAdminGroupsAndVos()}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",13),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,J,1,0,"mat-spinner",1),e.YNc(8,V,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.GROUPADMIN")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function te(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function ne(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.GROUPOBSERVER_GROUPS")," "))}const se=function(){return["id","recent","vo","name","description"]};function ie(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,ne,3,3,"div",2),e._UZ(2,"perun-web-apps-groups-list",14),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("groups",o.groups)("displayedColumns",e.DdM(3,se))}}function ae(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getGroupsAndVos("GROUPOBSERVER")}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",13),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,te,1,0,"mat-spinner",1),e.YNc(8,ie,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.GROUPOBSERVER")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function oe(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function z(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.VOADMIN_VOS")," "))}function H(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,z,3,3,"div",2),e._UZ(2,"perun-web-apps-vos-list",9),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,m))("vos",o.vos)}}function re(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getAdminVos()}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",15),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,oe,1,0,"mat-spinner",1),e.YNc(8,H,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.VOADMIN")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function _e(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function le(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.VOOBSERVER_VOS")," "))}function pe(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,le,3,3,"div",2),e._UZ(2,"perun-web-apps-vos-list",9),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,m))("vos",o.vos)}}function ce(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){e.CHM(o);const A=e.oxw(2);return A.getVos(A.roles.get("VOOBSERVER").get("Vo"))}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",15),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,_e,1,0,"mat-spinner",1),e.YNc(8,pe,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.VOOBSERVER")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function me(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function ue(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.TRUSTEDFACILITYADMIN_VOS")," "))}function de(a,f){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e.YNc(2,ue,3,3,"div",2),e._UZ(3,"perun-web-apps-vos-list",9),e.qZA(),e.qZA()),2&a){const o=e.oxw(3);e.xp6(2),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,m))("vos",o.vos)}}function ge(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){e.CHM(o);const A=e.oxw(2);return A.getVos(A.roles.get("TRUSTEDFACILITYADMIN").get("Vo"))}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",15),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,me,1,0,"mat-spinner",1),e.YNc(8,de,4,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.TRUSTEDFACILITYADMIN")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function fe(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function he(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.TOPGROUPCREATOR_VOS")," "))}function Ee(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,he,3,3,"div",2),e._UZ(2,"perun-web-apps-vos-list",9),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,m))("vos",o.vos)}}function X(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){e.CHM(o);const A=e.oxw(2);return A.getVos(A.roles.get("TOPGROUPCREATOR").get("Vo"))}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",15),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,fe,1,0,"mat-spinner",1),e.YNc(8,Ee,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.TOPGROUPCREATOR")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function Ie(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function Te(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.RESOURCEADMIN_RESOURCES")," "))}const q=function(){return["id","name","vo","facility","description"]};function ve(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Te,3,3,"div",2),e._UZ(2,"perun-web-apps-resources-list",17),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("resources",o.resources)("routingVo",!0)("displayedColumns",e.DdM(4,q))}}function Ue(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getResourcesData("RESOURCEADMIN")}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",16),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,Ie,1,0,"mat-spinner",1),e.YNc(8,ve,3,5,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.RESOURCEADMIN")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function Ae(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function Ce(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.RESOURCEOBSERVER_RESOURCES")," "))}function Re(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ce,3,3,"div",2),e._UZ(2,"perun-web-apps-resources-list",17),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("resources",o.resources)("routingVo",!0)("displayedColumns",e.DdM(4,q))}}function Oe(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getResourcesData("RESOURCEOBSERVER")}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",16),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,Ae,1,0,"mat-spinner",1),e.YNc(8,Re,3,5,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.RESOURCEOBSERVER")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function xe(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function Se(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.RESOURCESELFSERVICE_RESOURCES")," "))}function Ze(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Se,3,3,"div",2),e._UZ(2,"perun-web-apps-resources-list",17),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("resources",o.resources)("routingVo",!0)("displayedColumns",e.DdM(4,q))}}function De(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getResourcesData("RESOURCESELFSERVICE")}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",16),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,xe,1,0,"mat-spinner",1),e.YNc(8,Ze,3,5,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.RESOURCESELFSERVICE")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function Me(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function $(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.FACILITYADMIN_FACILITIES")," "))}const k=function(){return["id","name","description"]};function be(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,$,3,3,"div",2),e._UZ(2,"perun-web-apps-facilities-list",19),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,k))("facilities",o.facilities)}}function Ne(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getAdminFacilities()}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",18),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,Me,1,0,"mat-spinner",1),e.YNc(8,be,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.FACILITYADMIN")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function Pe(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function Le(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.FACILITYOBSERVER_FACILITIES")," "))}function ye(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Le,3,3,"div",2),e._UZ(2,"perun-web-apps-facilities-list",19),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,k))("facilities",o.facilities)}}function Ye(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getFacilities("FACILITYOBSERVER")}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",18),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,Pe,1,0,"mat-spinner",1),e.YNc(8,ye,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.FACILITYOBSERVER")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function Be(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function Je(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.SPONSORSHIP_MEMBERS")," "))}const Fe=function(){return["id","fullName","sponsored"]};function Qe(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Je,3,3,"div",2),e._UZ(2,"perun-web-apps-members-list",20),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("members",o.members)("displayedColumns",e.DdM(3,Fe))}}function g(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){return e.CHM(o),e.oxw(2).getMembers()}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",7),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,Be,1,0,"mat-spinner",1),e.YNc(8,Qe,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.SPONSORSHIP")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function x(a,f){1&a&&e._UZ(0,"mat-spinner",3)}function u(a,f){1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ROLES.SPONSOR_VOS")," "))}function S(a,f){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,u,3,3,"div",2),e._UZ(2,"perun-web-apps-vos-list",9),e.qZA()),2&a){const o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.showDescription),e.xp6(1),e.Q6J("displayedColumns",e.DdM(3,m))("vos",o.vos)}}function F(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){e.CHM(o);const A=e.oxw(2);return A.getVos(A.roles.get("SPONSOR").get("Vo"))}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",7),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,x,1,0,"mat-spinner",1),e.YNc(8,S,3,4,"div",2),e.qZA()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,"ROLES.SPONSOR")),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading)}}function w(a,f){1&a&&(e.TgZ(0,"mat-expansion-panel"),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",7),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ROLES.PERUN_ADMIN")))}function We(a,f){1&a&&(e.TgZ(0,"mat-expansion-panel"),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",7),e.TgZ(4,"p",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"ROLES.PERUN_OBSERVER")))}function Ke(a,f){if(1&a&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&a){const o=f.$implicit;e.xp6(1),e.AsE("",o[0]," ids: ",o[1],"")}}function we(a,f){if(1&a){const o=e.EpF();e.TgZ(0,"mat-expansion-panel",6),e.NdJ("opened",function(){const B=e.CHM(o).$implicit;return e.oxw(2).getInnerKeys(B)}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",7),e.TgZ(4,"p",8),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,Ke,2,2,"p",21),e.qZA()}if(2&a){const o=f.$implicit,v=e.oxw(2);e.xp6(5),e.Oqu(o),e.xp6(1),e.Q6J("ngForOf",v.currentIds)}}function Ge(a,f){if(1&a&&(e.TgZ(0,"mat-accordion"),e.YNc(1,U,9,5,"mat-expansion-panel",4),e.YNc(2,ee,9,5,"mat-expansion-panel",4),e.YNc(3,ae,9,5,"mat-expansion-panel",4),e.YNc(4,re,9,5,"mat-expansion-panel",4),e.YNc(5,ce,9,5,"mat-expansion-panel",4),e.YNc(6,ge,9,5,"mat-expansion-panel",4),e.YNc(7,X,9,5,"mat-expansion-panel",4),e.YNc(8,Ue,9,5,"mat-expansion-panel",4),e.YNc(9,Oe,9,5,"mat-expansion-panel",4),e.YNc(10,De,9,5,"mat-expansion-panel",4),e.YNc(11,Ne,9,5,"mat-expansion-panel",4),e.YNc(12,Ye,9,5,"mat-expansion-panel",4),e.YNc(13,g,9,5,"mat-expansion-panel",4),e.YNc(14,F,9,5,"mat-expansion-panel",4),e.YNc(15,w,7,3,"mat-expansion-panel",2),e.YNc(16,We,7,3,"mat-expansion-panel",2),e.YNc(17,we,7,2,"mat-expansion-panel",5),e.qZA()),2&a){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isSelf),e.xp6(1),e.Q6J("ngIf",o.isGroupAdmin),e.xp6(1),e.Q6J("ngIf",o.isGroupObserver),e.xp6(1),e.Q6J("ngIf",o.isVoAdmin),e.xp6(1),e.Q6J("ngIf",o.isVoObserver),e.xp6(1),e.Q6J("ngIf",o.isTrustedFacilityAdmin),e.xp6(1),e.Q6J("ngIf",o.isTopGroupCreator),e.xp6(1),e.Q6J("ngIf",o.isResourceAdmin),e.xp6(1),e.Q6J("ngIf",o.isResourceObserver),e.xp6(1),e.Q6J("ngIf",o.isResourceSelfService),e.xp6(1),e.Q6J("ngIf",o.isFacilityAdmin),e.xp6(1),e.Q6J("ngIf",o.isFacilityObserver),e.xp6(1),e.Q6J("ngIf",o.hasSponsorship),e.xp6(1),e.Q6J("ngIf",o.isSponsor),e.xp6(1),e.Q6J("ngIf",o.isPerunAdmin),e.xp6(1),e.Q6J("ngIf",o.isPerunObserver),e.xp6(1),e.Q6J("ngForOf",o.roleNames)}}let Ve=(()=>{class a{constructor(o,v,A,B,W,j,He,qe,je){this.authzResolverService=o,this.usersManagerService=v,this.vosManagerService=A,this.facilitiesManagerService=B,this.resourcesManagerService=W,this.membersManagerService=j,this.groupsManagerService=He,this.route=qe,this.store=je,this.currentIds=[],this.roles=new Map,this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN","PERUNOBSERVER"],this.roleNames=[],this.groups=[],this.vos=[],this.facilities=[],this.users=[],this.resources=[],this.members=[]}ngOnInit(){this.outerLoading=!0,this.route.parent.params.subscribe(o=>{o.userId?(this.userId=o.userId,this.authzResolverService.getUserRoleNames(this.userId).subscribe(v=>{this.roleNames=v.map(A=>A.toUpperCase()),this.authzResolverService.getUserRoles(this.userId).subscribe(A=>{this.prepareRoles(A)})})):(this.showDescription=!0,this.principal=this.store.getPerunPrincipal(),this.userId=this.principal.userId,this.roleNames=Object.keys(this.principal.roles),this.prepareRoles(this.principal.roles))})}prepareRoles(o){this.roleNames.forEach(v=>{const A=new Map;switch(Object.keys(o[v]).forEach(W=>{A.set(W,o[v][W])}),v){case"SELF":this.isSelf=!0;break;case"GROUPADMIN":this.isGroupAdmin=!0;break;case"VOADMIN":this.isVoAdmin=!0;break;case"RESOURCEADMIN":this.isResourceAdmin=!0;break;case"FACILITYADMIN":this.isFacilityAdmin=!0;break;case"TOPGROUPCREATOR":this.isTopGroupCreator=!0;break;case"SPONSORSHIP":this.hasSponsorship=!0;break;case"SPONSOR":this.isSponsor=!0;break;case"RESOURCESELFSERVICE":this.isResourceSelfService=!0;break;case"VOOBSERVER":this.isVoObserver=!0;break;case"RESOURCEOBSERVER":this.isResourceObserver=!0;break;case"GROUPOBSERVER":this.isGroupObserver=!0;break;case"TRUSTEDFACILITYADMIN":this.isTrustedFacilityAdmin=!0;break;case"FACILITYOBSERVER":this.isFacilityObserver=!0;break;case"PERUNADMIN":this.isPerunAdmin=!0;break;case"PERUNOBSERVER":this.isPerunObserver=!0}this.roles.set(v,A)}),this.roleNames=this.roleNames.filter(v=>!this.roleFilter.includes(v)),this.outerLoading=!1}getAdminGroupsAndVos(){this.loading=!0,this.groups=[],this.usersManagerService.getGroupsWhereUserIsAdmin(this.userId).subscribe(o=>{this.groups=o;const v=[...new Set(this.groups.map(A=>A.voId))];this.getVos(v)})}getVos(o){this.loading=!0,this.vos=[],this.vosManagerService.getVosByIds(o).subscribe(v=>{this.vos=v,this.loading=!1})}getInnerKeys(o){if(this.roles.get(o)){const v=this.roles.get(o).entries(),A=[];let B=v.next().value;for(;B;)A.push(B),B=v.next().value;this.currentIds=A}else this.currentIds=[]}getAdminVos(){this.loading=!0,this.vos=[],this.usersManagerService.getVosWhereUserIsAdmin(this.userId).subscribe(o=>{this.vos=o,this.loading=!1})}getAdminFacilities(){this.loading=!0,this.facilities=[],this.facilitiesManagerService.getFacilitiesWhereUserIsAdmin(this.userId).subscribe(o=>{this.facilities=o.map(v=>({facility:v})),this.loading=!1})}getSelfData(){this.loading=!0,this.vos=[],this.users=[],this.usersManagerService.getVosWhereUserIsMember(this.userId).subscribe(o=>{this.vos=o;const v=this.roles.get("SELF").get("User");v?this.usersManagerService.getUsersByIds(v).subscribe(A=>{this.users=A,this.loading=!1}):this.loading=!1})}getResourcesData(o){this.loading=!0;const v=this.roles.get(o).get("Resource");this.vos=[],this.facilities=[],this.resources=[],this.resourcesManagerService.getRichResourcesByIds(v).subscribe(A=>{this.resources=A,this.vos=this.resources.map(B=>B.vo).filter((B,W,j)=>j.indexOf(B)===W),this.facilities=this.resources.map(B=>({facility:B.facility})).filter((B,W,j)=>j.indexOf(B)===W),this.loading=!1})}getMembers(){this.loading=!0;const o=this.roles.get("SPONSORSHIP").get("Member");this.members=[],this.membersManagerService.getRichMembersByIds(o).subscribe(v=>{this.members=v,this.loading=!1})}getGroupsAndVos(o){this.loading=!0;const v=this.roles.get(o).get("Vo"),A=this.roles.get(o).get("Group");this.vos=[],this.groups=[],this.groupsManagerService.getGroupsByIds(A).subscribe(B=>{this.groups=B,this.vosManagerService.getVosByIds(v).subscribe(W=>{this.vos=W,this.loading=!1})})}getFacilities(o){this.loading=!0,this.facilities=[];const v=this.roles.get(o).get("Facility");this.facilitiesManagerService.getFacilitiesByIds(v).subscribe(A=>{this.facilities=A.map(B=>({facility:B})),this.loading=!1})}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(R.Ct),e.Y36(R.Fv),e.Y36(R.YF),e.Y36(R.IQ),e.Y36(R.xk),e.Y36(R.uq),e.Y36(R.ff),e.Y36(s.gz),e.Y36(c.d6))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(o,v){2&o&&e.ekj("router-component",v.true)},decls:5,vars:5,consts:[[1,"page-subtitle","d-flex"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"opened",4,"ngIf"],[3,"opened",4,"ngFor","ngForOf"],[3,"opened"],["mat-card-avatar","","svgIcon","perun-user-dark",1,"mr-2"],[1,"mt-auto","mb-auto"],[3,"displayedColumns","vos"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[3,"users","disableRouting","displayedColumns"],["mat-card-avatar","","svgIcon","perun-group-black",1,"mr-2"],[3,"groups","displayedColumns"],["mat-card-avatar","","svgIcon","perun-vo-black",1,"mr-2"],["mat-card-avatar","","svgIcon","perun-resource-black",1,"mr-2"],[3,"resources","routingVo","displayedColumns"],["mat-card-avatar","","svgIcon","perun-facility-black",1,"mr-2"],[3,"displayedColumns","facilities"],[3,"members","displayedColumns"],["class","role-content",4,"ngFor","ngForOf"],[1,"role-content"]],template:function(o,v){1&o&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.YNc(3,E,1,0,"mat-spinner",1),e.YNc(4,Ge,18,17,"mat-accordion",2)),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"ROLES.TITLE")),e.xp6(2),e.Q6J("ngIf",v.outerLoading),e.xp6(1),e.Q6J("ngIf",!v.outerLoading))},directives:[t.O5,D.$g,l.pp,l.ib,l.yz,l.yK,n.Hw,M.kc,N.Z,b.C,L.W,y.C,Y.X,C.O,t.sg],pipes:[Z.X$],styles:[".role-content[_ngcontent-%COMP%]{overflow:auto;overflow-y:hidden}.info-icon[_ngcontent-%COMP%]{vertical-align:middle;transform:scale(.8)}"]}),a})()},46597:(K,P,i)=>{i.d(P,{d:()=>O});var R=i(10036),c=i(112),e=i(20449),s=i(9244),t=i(54668),D=i(94814),l=i(36908),n=i(5e3),M=i(48966),N=i(11735),b=i(96214),L=i(47423),y=i(69808),Y=i(64877),C=i(20773),Z=i(51062);function E(p,T){if(1&p&&(n._UZ(0,"app-users-list",6),n.ALo(1,"translate")),2&p){const _=n.oxw();n.Q6J("tableId",_.tableId)("noUsersFoundLabel",n.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("users",_.associatedUsers)("selection",_.selection)("disableRouting",_.disableRouting)("displayedColumns",_.displayedColumns)}}function I(p,T){1&p&&n._UZ(0,"mat-spinner",7)}let O=(()=>{class p{constructor(_,d,r,m,h){this.dialog=_,this.router=d,this.authResolver=r,this.userManager=m,this.entityStorageService=h,this.loading=!1,this.selection=new e.Ov(!1,[]),this.associatedUsers=[],this.tableId=R.It,this.displayedColumns=["select","id","user","name"]}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.userManager.getUsersBySpecificUser(this.user.id).subscribe(_=>{this.associatedUsers=_,this.setAuth(),this.loading=!1})}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).subscribe(_=>{this.associatedUsers=_,this.selection.clear(),this.loading=!1})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){const _=(0,s.kZ)();_.width="1250px",_.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(t.l,_).afterClosed().subscribe(r=>{r&&this.refreshTable()})}onRemove(){const _=(0,s.kZ)();_.width="650px",_.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(D.B,_).afterClosed().subscribe(r=>{r&&(this.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[this.user])?this.refreshTable():this.router.navigate(["/myProfile"]))})}}return p.\u0275fac=function(_){return new(_||p)(n.Y36(M.uw),n.Y36(N.F0),n.Y36(l.x4),n.Y36(c.Fv),n.Y36(l.fb))},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-user-settings-associated-users"]],decls:13,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[3,"tableId","noUsersFoundLabel","users","selection","disableRouting","displayedColumns",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","noUsersFoundLabel","users","selection","disableRouting","displayedColumns"],[1,"mr-auto","ml-auto"]],template:function(_,d){1&_&&(n.TgZ(0,"div"),n.TgZ(1,"h1",0),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"perun-web-apps-refresh-button",1),n.NdJ("refresh",function(){return d.refreshTable()}),n.qZA(),n.TgZ(5,"button",2),n.NdJ("click",function(){return d.onAdd()}),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"button",3),n.NdJ("click",function(){return d.onRemove()}),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.YNc(11,E,2,8,"app-users-list",4),n.qZA(),n.YNc(12,I,1,0,"mat-spinner",5)),2&_&&(n.xp6(2),n.Oqu(n.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),n.xp6(4),n.hij(" ",n.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),n.xp6(2),n.Q6J("disabled",0===d.selection.selected.length),n.xp6(1),n.hij(" ",n.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),n.xp6(2),n.Q6J("ngIf",!d.loading),n.xp6(1),n.Q6J("ngIf",d.loading))},directives:[b.t,L.lW,y.O5,Y.C,C.$g],pipes:[Z.X$],styles:[""]}),p})()},97453:(K,P,i)=>{i.d(P,{R:()=>T});var R=i(20449),c=i(112),e=i(10036),s=i(9244),t=i(54668),D=i(94814),l=i(36908),n=i(5e3),M=i(11735),N=i(48966),b=i(96214),L=i(69808),y=i(47423),Y=i(20773),C=i(64877),Z=i(51062);function E(_,d){if(1&_){const r=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(){return n.CHM(r),n.oxw().onAdd()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&_&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function I(_,d){if(1&_){const r=n.EpF();n.TgZ(0,"button",7),n.NdJ("click",function(){return n.CHM(r),n.oxw().onRemove()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&_){const r=n.oxw();n.Q6J("disabled",0===r.selection.selected.length),n.xp6(1),n.hij(" ",n.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function O(_,d){1&_&&n._UZ(0,"mat-spinner",8)}function p(_,d){if(1&_&&(n._UZ(0,"app-users-list",9),n.ALo(1,"translate")),2&_){const r=n.oxw();n.Q6J("tableId",r.tableId)("noUsersFoundLabel",n.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("users",r.identities)("selection",r.selection)("routeToAdmin",r.routeToAdminSection)("displayedColumns",r.displayedColumns)}}let T=(()=>{class _{constructor(r,m,h,U,J,Q){this.route=r,this.dialog=m,this.router=h,this.userManager=U,this.authResolver=J,this.store=Q,this.loading=!1,this.selection=new R.Ov(!1,[]),this.identities=[],this.tableId=e.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(r=>{this.userId=r.userId,void 0===this.userId&&(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(r=>{this.identities=r,this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){const r=(0,s.kZ)();r.width="1250px",r.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(t.l,r).afterClosed().subscribe(h=>{h&&this.refreshTable()})}onRemove(){const r=(0,s.kZ)();r.width="650px",r.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(D.B,r).afterClosed().subscribe(h=>{h&&this.refreshTable()})}}return _.\u0275fac=function(r){return new(r||_)(n.Y36(M.gz),n.Y36(N.uw),n.Y36(M.F0),n.Y36(c.Fv),n.Y36(l.x4),n.Y36(l.d6))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-user-settings-service-identities"]],decls:8,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","class","mr-2 action-button","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","class","mr-2","color","warn",3,"disabled","click",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","noUsersFoundLabel","users","selection","routeToAdmin","displayedColumns",4,"ngIf"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"tableId","noUsersFoundLabel","users","selection","routeToAdmin","displayedColumns"]],template:function(r,m){1&r&&(n.TgZ(0,"h1",0),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"perun-web-apps-refresh-button",1),n.NdJ("refresh",function(){return m.refreshTable()}),n.qZA(),n.YNc(4,E,3,3,"button",2),n.YNc(5,I,3,4,"button",3),n.YNc(6,O,1,0,"mat-spinner",4),n.YNc(7,p,2,8,"app-users-list",5)),2&r&&(n.xp6(1),n.Oqu(n.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),n.xp6(3),n.Q6J("ngIf",m.addIdentity),n.xp6(1),n.Q6J("ngIf",m.removeIdentity),n.xp6(1),n.Q6J("ngIf",m.loading),n.xp6(1),n.Q6J("ngIf",!m.loading))},directives:[b.t,L.O5,y.lW,Y.$g,C.C],pipes:[Z.X$],styles:[""]}),_})()},46142:(K,P,i)=>{i.r(P),i.d(P,{UsersModule:()=>Qe});var R=i(69808),c=i(11735),e=i(74837),s=i(85985),t=i(5e3),D=i(61283);let l=(()=>{class g{constructor(){}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(u,S){2&u&&t.ekj("router-component",S.true)},decls:1,vars:0,template:function(u,S){1&u&&t._UZ(0,"app-animated-router-outlet")},directives:[D.A],styles:[""]}),g})();var n=i(112),M=i(20773),N=i(71135);function b(g,x){1&g&&t._UZ(0,"mat-spinner",2)}function L(g,x){if(1&g&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",3),t.qZA()),2&g){const u=t.oxw();t.xp6(1),t.Q6J("items",u.navItems)("size","small")}}let y=(()=>{class g{constructor(u,S){this.route=u,this.userManager=S,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(u=>{this.userManager.getUserById(u.userId).subscribe(F=>{this.isServiceUser=F.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings1",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}return g.\u0275fac=function(u){return new(u||g)(t.Y36(c.gz),t.Y36(n.Fv))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(u,S){2&u&&t.ekj("router-component",S.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(u,S){1&u&&(t.YNc(0,b,1,0,"mat-spinner",0),t.YNc(1,L,2,2,"div",1)),2&u&&(t.Q6J("ngIf",S.loading),t.xp6(1),t.Q6J("ngIf",!S.loading))},directives:[R.O5,M.$g,N.L],styles:[""]}),g})();var Y=i(98973),C=i(80255),Z=i(9244),E=i(6335),I=i(67322),O=i(74107),p=i(90508),T=i(51062);function _(g,x){if(1&g&&(t.TgZ(0,"mat-option",5),t._uU(1),t.qZA()),2&g){const u=x.$implicit;t.Q6J("value",u),t.xp6(1),t.hij(" ",u," ")}}let d=(()=>{class g{constructor(u){this.guiConfigService=u,this.tablePageSizeOptions=Z.f7}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(E.Rc)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(E.Rc,this.preferredTablePageSize)}}return g.\u0275fac=function(u){return new(u||g)(t.Y36(E.Ng))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(u,S){1&u&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"mat-form-field",2),t.TgZ(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-select",3),t.NdJ("valueChange",function(w){return S.preferredTablePageSize=w})("valueChange",function(){return S.updatePreferredTablePageSize()}),t.YNc(9,_,2,2,"mat-option",4),t.qZA(),t.qZA(),t.qZA()),2&u&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),t.xp6(5),t.Oqu(t.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),t.xp6(2),t.Q6J("value",S.preferredTablePageSize),t.xp6(1),t.Q6J("ngForOf",S.tablePageSizeOptions))},directives:[I.KE,I.hX,O.gD,R.sg,p.ey],pipes:[T.X$],styles:[""]}),g})();var r=i(17755),m=i(36908),h=i(77968),U=i(4235),J=i(25245),Q=i(29772),G=i(31359);const V=function(){return{color:"black"}},ee=function(){return["/myProfile"]};function te(g,x){if(1&g&&(t.TgZ(0,"div",1),t._UZ(1,"perun-web-apps-back-button"),t.TgZ(2,"div",2),t._UZ(3,"mat-icon",3),t.ALo(4,"translate"),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"a",6),t._uU(8),t.ALo(9,"userFullName"),t.qZA(),t.TgZ(10,"span",7),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"span",8),t._uU(13),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(16,"app-animated-router-outlet"),t.qZA()),2&g){const u=t.oxw();t.xp6(3),t.s9C("matTooltip",t.lcZ(4,8,"MENU_ITEMS.USER.ENTITY")),t.Q6J("ngStyle",t.DdM(16,V)),t.xp6(4),t.Q6J("routerLink",t.DdM(17,ee)),t.xp6(1),t.hij(" ",t.lcZ(9,10,u.user)," "),t.xp6(3),t.hij(" \xa0#",u.user.id," "),t.xp6(2),t.lnq(" ",t.lcZ(14,12,"MENU_ITEMS.USER.ENTITY"),", ",t.lcZ(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",u.getUserType()," ")}}let ne=(()=>{class g{constructor(u,S,F){this.sideMenuService=u,this.store=S,this.router=F}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(()=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}}return g.\u0275fac=function(u){return new(u||g)(t.Y36(h.D),t.Y36(m.d6),t.Y36(c.F0))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(u,S){1&u&&t.YNc(0,te,17,18,"div",0),2&u&&t.Q6J("ngIf",void 0!==S.user)},directives:[R.O5,U.W,J.Hw,Q.gM,R.PC,c.yS,D.A],pipes:[T.X$,G.d],styles:[""]}),g})();var se=i(6097),ie=i(97453),ae=i(69024),oe=i(29862),z=i(48966),H=i(47423);function re(g,x){1&g&&t._UZ(0,"mat-spinner",11)}function _e(g,x){if(1&g){const u=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(u),t.oxw(2).editUser()}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}const le=function(){return{color:"black"}},pe=function(g){return["/myProfile/service-identities",g]};function ce(g,x){if(1&g&&(t.TgZ(0,"div",1),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,re,1,0,"mat-spinner",2),t.TgZ(3,"div",3),t._UZ(4,"mat-icon",4),t.ALo(5,"translate"),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"a",7),t._uU(9),t.ALo(10,"userFullName"),t.qZA(),t.TgZ(11,"span",8),t._uU(12),t.qZA(),t.YNc(13,_e,3,0,"button",9),t.qZA(),t.TgZ(14,"div"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",10),t._uU(18),t.ALo(19,"translate"),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(21,"app-animated-router-outlet"),t.qZA()),2&g){const u=t.oxw();t.xp6(2),t.Q6J("ngIf",u.loading),t.xp6(2),t.s9C("matTooltip",t.lcZ(5,12,"MENU_ITEMS.USER.ENTITY")),t.Q6J("ngStyle",t.DdM(22,le)),t.xp6(4),t.Q6J("routerLink",t.VKq(23,pe,u.user.id)),t.xp6(1),t.hij(" ",t.lcZ(10,14,u.user)," "),t.xp6(3),t.hij(" \xa0#",u.user.id," "),t.xp6(1),t.Q6J("ngIf",u.authResolver.isPerunAdmin()),t.xp6(2),t.AsE("",t.lcZ(16,16,"ADMIN_USER.UUID"),": ",u.user.uuid,""),t.xp6(3),t.lnq(" ",t.lcZ(19,18,"MENU_ITEMS.USER.ENTITY"),", ",t.lcZ(20,20,"MENU_ITEMS.USER.USER_TYPE"),": ",u.getUserType()," ")}}let me=(()=>{class g{constructor(u,S,F,w,We,Ke,we){this.sideMenuService=u,this.usersService=S,this.sideMenuItemService=F,this.route=w,this.dialog=We,this.authResolver=Ke,this.entityStorageService=we,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(u=>{const S=u.userId;this.entityStorageService.setEntity({id:Number(S),beanName:"User"}),this.usersService.getUserById(S).subscribe(F=>{this.user=F;const w=this.sideMenuItemService.parseServiceIdentity(F);this.sideMenuService.setUserItems([w]),this.loading=!1},()=>this.loading=!1)})}getUserType(){return this.user.serviceUser?"Service":"Person"}editUser(){const u=(0,Z.kZ)();u.width="450px",u.data={theme:"admin-theme",user:this.user},this.dialog.open(oe.x,u).afterClosed().subscribe(F=>{F&&this.usersService.getUserById(this.user.id).subscribe(w=>{this.user=w})})}}return g.\u0275fac=function(u){return new(u||g)(t.Y36(h.D),t.Y36(n.Fv),t.Y36(ae.V),t.Y36(c.gz),t.Y36(z.uw),t.Y36(m.x4),t.Y36(m.fb))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"mr-auto","ml-auto"],["mat-icon-button","",3,"click"]],template:function(u,S){1&u&&t.YNc(0,ce,22,25,"div",0),2&u&&t.Q6J("ngIf",void 0!==S.user)},directives:[R.O5,U.W,M.$g,J.Hw,Q.gM,R.PC,c.yS,H.lW,D.A],pipes:[T.X$,G.d],styles:[""]}),g})(),ue=(()=>{class g{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-manager",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}]}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-service-identity-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(u,S){1&u&&t._UZ(0,"perun-web-apps-menu-buttons-field",0),2&u&&t.Q6J("items",S.navItems)("size","small")},directives:[N.L],styles:[""]}),g})();var de=i(46597);const ge=[{path:"",component:ne,children:[{path:"",component:r.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:Y.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:e.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:s.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:se.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:ie.R,data:{animation:"UserServiceIdentities"}},{path:"settings",component:l,children:[{path:"",component:y,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:C.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:d,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:me,children:[{path:"",component:ue},{path:"associated-users",component:de.d}]}];let fe=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[[c.Bz.forChild(ge)],c.Bz]}),g})();var he=i(91079),Ee=i(98833),X=i(93075),Ie=i(2638),Te=i(81125),q=i(84847),ve=i(32075),Ue=i(53251),Ae=i(90149),Ce=i(77446),Re=i(57261),Oe=i(85899),xe=i(32368),Se=i(86856),Ze=i(79814),De=i(4834),Me=i(86087),$=i(9224),k=i(92081),be=i(44409),Ne=i(26688),Pe=i(92181),Le=i(53435),ye=i(63189),Ye=i(27544),Be=i(11243),Je=i(19516),Fe=i(14264);let Qe=(()=>{class g{constructor(u){this.translate=u,u.addLangs(["en","cs"])}}return g.\u0275fac=function(u){return new(u||g)(t.LFG(T.sK))},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[[R.ez,fe,he.Bb,Ee.c,I.lN,X.UX,X.u5,J.Ps,Ie.SJ,Te.To,T.aw.forChild({}),H.ot,q.JX,ve.p0,Ue.Nh,Ae.dp,H.ot,Ce.p9,z.Is,O.LD,Re.ZX,M.Cq,Oe.Cv,Q.AV,xe.rP,Se.FA,p.XK,Ze.Fk,De.t,p.si,Me.TU,$.QW,k.T5,be._t,$.QW,Ne.Hi,Pe.Tx,Le.Cl,ye.r,Ye.g,C.ez,Be.r,Je.d4,Fe.m]]}),g})()}}]);