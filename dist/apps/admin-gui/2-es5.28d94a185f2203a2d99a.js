!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Fm3m:function(t,r,s){"use strict";s.d(r,"a",(function(){return f}));var n=s("X2Q7"),c=s("Ssnw"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("NU+N");function b(e,t){if(1&e&&a.Nb(0,"app-managers-page",1),2&e){var i=a.dc();a.kc("complementaryObject",i.resource)("complementaryObjectType",i.type)("theme",i.theme)("availableRoles",i.availableRoles)}}var f=function(){var t=function(){function t(i,r,s){e(this,t),this.route=i,this.resourceService=r,this.guiAuthResolver=s,this.availableRoles=[],this.type="Resource",this.theme="resource-theme"}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.resourceService.getResourceById(t.resourceId).subscribe((function(t){e.resource=t}))})),this.guiAuthResolver.assignAvailableRoles(this.availableRoles,"Resource")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(o.a),a.Mb(n.m),a.Mb(c.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-settings-managers"]],decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&a.Hc(0,b,1,4,"app-managers-page",0),2&e&&a.kc("ngIf",t.resource)},directives:[u.t,l.a],styles:[""]}),t}()},GyaY:function(t,r,s){"use strict";s.d(r,"a",(function(){return o}));var n=s("TkCa"),c=s("EM62"),a=s("ma6z"),o=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Gb({type:t,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&c.Nb(0,"app-animated-router-outlet")},directives:[a.a],styles:[""],data:{animation:[n.a]}}),t}()},HUrR:function(t,r,s){"use strict";s.d(r,"a",(function(){return h}));var n=s("X2Q7"),c=s("Ssnw"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("csyo"),b=s("ZG5M");function f(e,t){1&e&&a.Nb(0,"mat-spinner",2)}function d(e,t){if(1&e&&(a.Sb(0,"div"),a.Nb(1,"perun-web-apps-menu-buttons-field",3),a.Rb()),2&e){var i=a.dc();a.Ab(1),a.kc("items",i.items)("size","small")}}var h=function(){var t=function(){function t(i,r,s){e(this,t),this.route=i,this.resourceManager=r,this.authResolver=s,this.items=[],this.loading=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.parent.parent.params.subscribe((function(t){e.resourceManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.parent.snapshot.url[0].path),e.loading=!1}),(function(){return e.loading=!1}))}))}},{key:"initItems",value:function(e){this.items=[],this.authResolver.isManagerPagePrivileged(this.resource)&&this.items.push({cssIcon:"perun-manager",url:"".concat(e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings/managers"),label:"MENU_ITEMS.RESOURCE.MANAGERS",style:"resource-btn"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(o.a),a.Mb(n.m),a.Mb(c.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Eb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(a.Hc(0,f,1,0,"mat-spinner",0),a.Hc(1,d,2,2,"div",1)),2&e&&(a.kc("ngIf",t.loading),a.Ab(1),a.kc("ngIf",!t.loading))},directives:[u.t,l.c,b.a],styles:[""]}),t}()},TNye:function(t,r,s){"use strict";s.d(r,"a",(function(){return _}));var n=s("X2Q7"),c=s("iyZ4"),a=s("cqs0"),o=s("8clQ"),u=s("/bE8"),l=s("ESXS"),b=s("Ssnw"),f=s("EM62"),d=s("sEIs"),h=s("OZ4H"),p=s("0XDM"),g=s("2kYt"),v=s("A8Ay"),S=s("PBFl"),m=s("csyo"),I=s("gcZR"),R=s("s2Ay");function E(e,t){if(1&e){var i=f.Tb();f.Sb(0,"button",7),f.Zb("click",(function(){return f.xc(i),f.dc().addService()})),f.Jc(1),f.ec(2,"translate"),f.Rb()}2&e&&(f.Ab(1),f.Lc(" ",f.fc(2,1,"RESOURCE_DETAIL.ASSIGNED_SERVICES.ADD_SERVICE"),"\n"))}function A(e,t){if(1&e){var i=f.Tb();f.Sb(0,"button",8),f.Zb("click",(function(){return f.xc(i),f.dc().removeServices()})),f.Jc(1),f.ec(2,"translate"),f.Rb()}if(2&e){var r=f.dc();f.kc("disabled",0===r.selected.selected.length),f.Ab(1),f.Lc(" ",f.fc(2,2,"RESOURCE_DETAIL.ASSIGNED_SERVICES.REMOVE_SERVICE"),"\n")}}function y(e,t){1&e&&f.Nb(0,"mat-spinner",9)}var T=function(){return[]},k=function(){return["select"]};function M(e,t){if(1&e){var i=f.Tb();f.Sb(0,"app-services-list",10),f.Zb("page",(function(e){return f.xc(i),f.dc().pageChanged(e)})),f.Rb()}if(2&e){var r=f.dc();f.kc("pageSize",r.pageSize)("services",r.assignedServices)("selection",r.selected)("filterValue",r.filterValue)("hideColumns",r.removeServiceAuth?f.oc(6,T):f.oc(7,k))("disableRouting",!r.serviceRoutingAuth)}}var _=function(){var t=function(){function t(i,r,s,n,o){e(this,t),this.route=i,this.resourcesManager=r,this.tableConfigService=s,this.dialog=n,this.guiAuthResolver=o,this.assignedServices=[],this.selected=new a.c(!0,[]),this.tableId=c.T,this.filterValue=""}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.resourcesManager.getResourceById(e.resourceId).subscribe((function(t){e.resource=t,e.getDataForAuthorization(),e.loadAllServices()}))}))}},{key:"loadAllServices",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedServicesToResource(this.resourceId).subscribe((function(t){e.assignedServices=t,e.selected.clear(),e.loading=!1}))}},{key:"addService",value:function(){var e=this,t=Object(o.o)();t.width="800px",t.data={theme:"resource-theme",resourceId:this.resourceId},this.dialog.open(u.a,t).afterClosed().subscribe((function(t){t&&e.loadAllServices()}))}},{key:"removeServices",value:function(){var e=this,t=Object(o.o)();t.width="500px",t.data={theme:"resource-theme",resourceId:this.resourceId,services:this.selected.selected},this.dialog.open(l.a,t).afterClosed().subscribe((function(t){t&&e.loadAllServices()}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){this.assignServiceAuth=this.guiAuthResolver.isAuthorized("assignServices_Resource_List<Service>_policy",[this.resource]),this.removeServiceAuth=this.guiAuthResolver.isAuthorized("removeServices_Resource_List<Service>_policy",[this.resource]),this.serviceRoutingAuth=this.guiAuthResolver.isPerunAdmin()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Mb(d.a),f.Mb(n.m),f.Mb(c.pb),f.Mb(h.b),f.Mb(b.h))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-perun-web-apps-resource-assigned-services"]],decls:9,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","ml-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","services","selection","filterValue","hideColumns","disableRouting","page",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"pageSize","services","selection","filterValue","hideColumns","disableRouting","page"]],template:function(e,t){1&e&&(f.Sb(0,"h1",0),f.Jc(1),f.ec(2,"translate"),f.Rb(),f.Sb(3,"perun-web-apps-refresh-button",1),f.Zb("refresh",(function(){return t.loadAllServices()})),f.Rb(),f.Hc(4,E,3,3,"button",2),f.Hc(5,A,3,4,"button",3),f.Sb(6,"perun-web-apps-immediate-filter",4),f.Zb("filter",(function(e){return t.applyFilter(e)})),f.Rb(),f.Hc(7,y,1,0,"mat-spinner",5),f.Hc(8,M,1,8,"app-services-list",6)),2&e&&(f.Ab(1),f.Kc(f.fc(2,6,"RESOURCE_DETAIL.ASSIGNED_SERVICES.TITLE")),f.Ab(3),f.kc("ngIf",!t.loadingResource&&t.assignServiceAuth),f.Ab(1),f.kc("ngIf",!t.loadingResource&&t.removeServiceAuth),f.Ab(1),f.kc("placeholder","RESOURCE_DETAIL.ASSIGNED_SERVICES.FILTER_SERVICES"),f.Ab(1),f.kc("ngIf",t.loading),f.Ab(1),f.kc("ngIf",!t.loading))},directives:[p.a,g.t,v.a,S.b,m.c,I.a],pipes:[R.d],styles:[""]}),t}()},gxIj:function(t,r,s){"use strict";s.d(r,"a",(function(){return N}));var n=s("Ssnw"),c=(s("HHEo"),s("cqs0")),a=s("mEf3"),o=s("8clQ"),u=s("X2Q7"),l=s("iyZ4"),b=s("+0js"),f=s("IDQ9"),d=s("EM62"),h=s("sEIs"),p=s("OZ4H"),g=s("s2Ay"),v=s("KZIX"),S=s("0XDM"),m=s("PBFl"),I=s("A8Ay"),R=s("2kYt"),E=s("csyo"),A=s("LKLE"),y=s("bdug"),T=["list"];function k(e,t){1&e&&(d.Jc(0),d.ec(1,"translate")),2&e&&d.Lc(" ",d.fc(1,1,"RESOURCE_DETAIL.ENTITY")," ")}function M(e,t){1&e&&d.Nb(0,"mat-spinner",10)}function _(e,t){if(1&e){var i=d.Tb();d.Sb(0,"perun-web-apps-attributes-list",11,12),d.Zb("page",(function(e){return d.xc(i),d.dc().pageChanged(e)})),d.Rb()}if(2&e){var r=d.dc();d.kc("pageSize",r.pageSize)("filterValue",r.filterValue)("attributes",r.attributes)("selection",r.selection)}}function C(e,t){1&e&&(d.Jc(0),d.ec(1,"translate"),d.ec(2,"translate")),2&e&&d.Mc(" ",d.fc(1,2,"RESOURCE_DETAIL.ENTITY")," - ",d.fc(2,4,"MEMBER_DETAIL.ENTITY")," ")}function O(e,t){if(1&e&&d.Nb(0,"app-two-entity-attribute-page",15),2&e){var i=d.dc(3);d.kc("firstEntity","resource")("firstEntityId",i.resourceId)("secondEntity","member")}}function w(e,t){if(1&e&&d.Hc(0,O,1,3,"app-two-entity-attribute-page",14),2&e){var i=d.dc(2);d.kc("ngIf",!i.loading)}}function G(e,t){1&e&&(d.Sb(0,"mat-tab"),d.Hc(1,C,3,6,"ng-template",1),d.Hc(2,w,1,1,"ng-template",13),d.Rb())}function L(e,t){1&e&&(d.Jc(0),d.ec(1,"translate"),d.ec(2,"translate")),2&e&&d.Mc(" ",d.fc(1,2,"RESOURCE_DETAIL.ENTITY")," - ",d.fc(2,4,"GROUP_DETAIL.ENTITY")," ")}function U(e,t){if(1&e&&d.Nb(0,"app-two-entity-attribute-page",15),2&e){var i=d.dc(3);d.kc("firstEntity","resource")("firstEntityId",i.resourceId)("secondEntity","group")}}function z(e,t){if(1&e&&d.Hc(0,U,1,3,"app-two-entity-attribute-page",14),2&e){var i=d.dc(2);d.kc("ngIf",!i.loading)}}function D(e,t){1&e&&(d.Sb(0,"mat-tab"),d.Hc(1,L,3,6,"ng-template",1),d.Hc(2,z,1,1,"ng-template",13),d.Rb())}var N=function(){var t=function(){function t(i,r,s,n,a,o,u,b){var f=this;e(this,t),this.attributesManager=i,this.route=r,this.dialog=s,this.notificator=n,this.tableConfigService=a,this.translate=o,this.authResolver=u,this.resourceManager=b,this.attributes=[],this.selection=new c.c(!0,[]),this.filterValue="",this.tableId=l.r,this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(e){return f.saveSuccessMessage=e})),this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(e){return f.deleteSuccessMessage=e}))}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=parseInt(t.resourceId,10),e.resourceManager.getResourceById(e.resourceId).subscribe((function(t){e.resource=t,e.resourceGroupAttAuth=e.authResolver.isAuthorized("getAssignedGroups_Resource_policy",[e.resource]),e.resourceMemberAttAuth=e.authResolver.isAuthorized("getAssignedRichMembers_Resource_policy",[e.resource]),e.refreshTable()}))}))}},{key:"onDelete",value:function(){var e=this,t=Object(o.o)();t.width="450px",t.data={entityId:this.resourceId,entity:"resource",attributes:this.selection.selected,theme:"resource-theme"},this.dialog.open(a.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes();var t=Object(o.o)();t.width="450px",t.data={entityId:this.resourceId,entity:"resource",attributes:this.selection.selected},this.dialog.open(b.f,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onCreate",value:function(){var e=this,t=Object(o.o)();t.width="1050px",t.data={entityId:this.resourceId,entity:"resource",notEmptyAttributes:this.attributes,style:"resource-theme"},this.dialog.open(f.a,t).afterClosed().subscribe((function(t){"saved"===t&&e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getResourceAttributes(this.resourceId).subscribe((function(t){e.attributes=t,e.selection.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.Mb(u.c),d.Mb(h.a),d.Mb(p.b),d.Mb(n.l),d.Mb(l.pb),d.Mb(g.e),d.Mb(n.h),d.Mb(u.m))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-resource-attributes"]],viewQuery:function(e,t){var i;1&e&&d.Qc(T,!0),2&e&&d.sc(i=d.ac())&&(t.list=i.first)},hostVars:2,hostBindings:function(e,t){2&e&&d.Eb("router-component",!0)},decls:22,vars:19,consts:[[1,"page-subtitle"],["matTabLabel",""],[1,"mt-2",3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"mt-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""],["matTabContent",""],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(d.Sb(0,"div"),d.Sb(1,"h1",0),d.Jc(2),d.ec(3,"translate"),d.Rb(),d.Sb(4,"mat-tab-group"),d.Sb(5,"mat-tab"),d.Hc(6,k,2,3,"ng-template",1),d.Sb(7,"perun-web-apps-refresh-button",2),d.Zb("refresh",(function(){return t.refreshTable()})),d.Rb(),d.Sb(8,"button",3),d.Zb("click",(function(){return t.onCreate()})),d.Jc(9),d.ec(10,"translate"),d.Rb(),d.Sb(11,"button",4),d.Zb("click",(function(){return t.onSave()})),d.Jc(12),d.ec(13,"translate"),d.Rb(),d.Sb(14,"button",5),d.Zb("click",(function(){return t.onDelete()})),d.Jc(15),d.ec(16,"translate"),d.Rb(),d.Sb(17,"perun-web-apps-immediate-filter",6),d.Zb("filter",(function(e){return t.applyFilter(e)})),d.Rb(),d.Hc(18,M,1,0,"mat-spinner",7),d.Hc(19,_,2,4,"perun-web-apps-attributes-list",8),d.Rb(),d.Hc(20,G,3,0,"mat-tab",9),d.Hc(21,D,3,0,"mat-tab",9),d.Rb(),d.Rb()),2&e&&(d.Ab(2),d.Kc(d.fc(3,11,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),d.Ab(7),d.Lc(" ",d.fc(10,13,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),d.Ab(2),d.kc("disabled",0===t.selection.selected.length),d.Ab(1),d.Lc(" ",d.fc(13,15,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),d.Ab(2),d.kc("disabled",0===t.selection.selected.length),d.Ab(1),d.Lc(" ",d.fc(16,17,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),d.Ab(2),d.kc("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),d.Ab(1),d.kc("ngIf",t.loading),d.Ab(1),d.kc("ngIf",!t.loading),d.Ab(1),d.kc("ngIf",t.resourceMemberAttAuth),d.Ab(1),d.kc("ngIf",t.resourceGroupAttAuth))},directives:[v.c,v.a,v.d,S.a,m.b,I.a,R.t,E.c,A.a,v.b,y.a],pipes:[g.d],styles:[""]}),t}()},jblC:function(t,r,s){"use strict";s.d(r,"a",(function(){return w}));var n=s("X2Q7"),c=s("cqs0"),a=s("ILoV"),o=s("VEwN"),u=s("iyZ4"),l=s("8clQ"),b=s("Ssnw"),f=s("EM62"),d=s("sEIs"),h=s("OZ4H"),p=s("0XDM"),g=s("2kYt"),v=s("PBFl"),S=s("Y2X+"),m=s("pynj"),I=s("csyo"),R=s("K9kF"),E=s("FcRk"),A=s("s2Ay"),y=["checkbox"];function T(e,t){if(1&e){var i=f.Tb();f.Sb(0,"button",9),f.Zb("click",(function(){return f.xc(i),f.dc().addGroup()})),f.Jc(1),f.ec(2,"translate"),f.Rb()}2&e&&(f.Ab(1),f.Lc(" ",f.fc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"))}function k(e,t){1&e&&f.Nb(0,"mat-spinner",10)}var M=function(e){return[e]},_=function(){return["vo","recent","expiration","menu"]};function C(e,t){if(1&e){var i=f.Tb();f.Sb(0,"div",11),f.Sb(1,"perun-web-apps-groups-list",12),f.Zb("page",(function(e){return f.xc(i),f.dc().pageChanged(e)})),f.Rb(),f.Rb()}if(2&e){var r=f.dc();f.Ab(1),f.kc("pageSize",r.pageSize)("groups",r.assignedGroups)("filter",r.filteredValue)("selection",r.selected)("disableMembers",!1)("disableRouting",!r.guiAuthResolver.isAuthorized("getGroupById_int_policy",f.pc(7,M,r.assignedGroups[0])))("hideColumns",f.oc(9,_))}}function O(e,t){1&e&&(f.Sb(0,"app-alert",13),f.Jc(1),f.ec(2,"translate"),f.Rb()),2&e&&(f.Ab(1),f.Lc(" ",f.fc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}var w=function(){var t=function(){function t(i,r,s,n,a,o){e(this,t),this.route=i,this.resourcesManager=r,this.vosManagerService=s,this.tableConfigService=n,this.dialog=a,this.guiAuthResolver=o,this.assignedGroups=[],this.selected=new c.c(!0,[]),this.filteredValue="",this.tableId=u.S}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.getDataForAuthorization(),e.loadAllGroups()}))}},{key:"loadAllGroups",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedGroups(this.resourceId).subscribe((function(t){e.assignedGroups=t,e.selected.clear(),e.loading=!1}))}},{key:"addGroup",value:function(){var e=this,t=Object(l.o)();t.width="800px",t.data={theme:"resource-theme",resource:this.resource},this.dialog.open(o.a,t).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"removeGroups",value:function(){var e=this,t=Object(l.o)();t.width="500px",t.data={resourceId:this.resourceId,groups:this.selected.selected,theme:"resource-theme"},this.dialog.open(a.a,t).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"canRemoveGroups",value:function(){var e=this,t=!0;return this.selected.selected.forEach((function(i){e.guiAuthResolver.isAuthorized("removeGroupsFromResource_List<Group>_Resource_policy",[e.resource,i])||(t=!1)})),t}},{key:"applyFilter",value:function(e){this.filteredValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){var e=this;this.loadingResource=!0,this.resourcesManager.getResourceById(this.resourceId).subscribe((function(t){e.resource=t,e.loadingResource=!1}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Mb(d.a),f.Mb(n.m),f.Mb(n.r),f.Mb(u.pb),f.Mb(h.b),f.Mb(b.h))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(e,t){var i;1&e&&f.Dc(y,!0),2&e&&f.sc(i=f.ac())&&(t.checkbox=i.first)},decls:14,vars:18,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","mat-flat-button","",1,"ml-2","mr-2",3,"disabled","click"],[3,"matTooltipDisabled","matTooltip"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["alert_type","warn",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"pageSize","groups","filter","selection","disableMembers","disableRouting","hideColumns","page"],["alert_type","warn"]],template:function(e,t){1&e&&(f.Sb(0,"h1",0),f.Jc(1),f.ec(2,"translate"),f.Rb(),f.Sb(3,"perun-web-apps-refresh-button",1),f.Zb("refresh",(function(){return t.loadAllGroups()})),f.Rb(),f.Hc(4,T,3,3,"button",2),f.Sb(5,"button",3),f.Zb("click",(function(){return t.removeGroups()})),f.Sb(6,"span",4),f.ec(7,"translate"),f.Jc(8),f.ec(9,"translate"),f.Rb(),f.Rb(),f.Sb(10,"perun-web-apps-debounce-filter",5),f.Zb("filter",(function(e){return t.applyFilter(e)})),f.Rb(),f.Hc(11,k,1,0,"mat-spinner",6),f.Hc(12,C,2,10,"div",7),f.Hc(13,O,3,3,"app-alert",8)),2&e&&(f.Ab(1),f.Kc(f.fc(2,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),f.Ab(3),f.kc("ngIf",!t.loadingResource&&t.guiAuthResolver.isAuthorized("assignGroupsToResource_List<Group>_Resource_policy",f.pc(16,M,t.resource))),f.Ab(1),f.kc("disabled",0===t.selected.selected.length||!t.canRemoveGroups()),f.Ab(1),f.lc("matTooltip",f.fc(7,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_TOOLTIP")),f.kc("matTooltipDisabled",t.canRemoveGroups()),f.Ab(2),f.Lc(" ",f.fc(9,14,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP")," "),f.Ab(2),f.kc("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),f.Ab(1),f.kc("ngIf",t.loading),f.Ab(1),f.kc("ngIf",!t.loading&&0!==t.assignedGroups.length),f.Ab(1),f.kc("ngIf",0===t.assignedGroups.length&&!t.loading))},directives:[p.a,g.t,v.b,S.a,m.a,I.c,R.a,E.a],pipes:[A.d],styles:[""]}),t}()},lfUW:function(t,r,s){"use strict";s.d(r,"a",(function(){return R}));var n=s("X2Q7"),c=s("iyZ4"),a=s("Ssnw"),o=s("EM62"),u=s("sEIs"),l=s("2kYt"),b=s("0XDM"),f=s("A8Ay"),d=s("csyo"),h=s("nz2m"),p=s("s2Ay");function g(e,t){if(1&e){var i=o.Tb();o.Sb(0,"perun-web-apps-refresh-button",5),o.Zb("refresh",(function(){return o.xc(i),o.dc().refreshTable()})),o.Rb()}}function v(e,t){if(1&e){var i=o.Tb();o.Sb(0,"perun-web-apps-immediate-filter",6),o.Zb("filter",(function(e){return o.xc(i),o.dc().applyFilter(e)})),o.Rb()}2&e&&o.kc("placeholder","RESOURCE_DETAIL.ASSIGNED_MEMBERS.FILTER")}function S(e,t){1&e&&o.Nb(0,"mat-spinner",7)}var m=function(){return["checkbox","email","status","groupStatus","sponsored","organization","logins","type"]};function I(e,t){if(1&e){var i=o.Tb();o.Sb(0,"perun-web-apps-members-list",8),o.Zb("page",(function(e){return o.xc(i),o.dc().pageChanged(e)}))("updateTable",(function(){return o.xc(i),o.dc().refreshTable()})),o.Rb()}if(2&e){var r=o.dc();o.kc("disableRouting",!r.routeAuth)("filter",r.filterValue)("hideColumns",o.oc(5,m))("members",r.members)("pageSize",r.pageSize)}}var R=function(){var t=function(){function t(i,r,s,n){e(this,t),this.route=i,this.resourceService=r,this.tableConfigService=s,this.authResolver=n,this.loading=!1,this.filterValue="",this.tableId=c.V}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.resourceService.getAssignedRichMembers(this.resourceId).subscribe((function(t){e.members=t,e.setAuthRights(),e.loading=!1}))}},{key:"setAuthRights",value:function(){0!==this.members.length&&(this.routeAuth=this.authResolver.isAuthorized("getMemberById_int_policy",[this.members[0]]))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Mb(u.a),o.Mb(n.m),o.Mb(c.pb),o.Mb(a.h))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-resource-assigned-members"]],decls:7,vars:7,consts:[[1,"page-subtitle"],[3,"refresh",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"disableRouting","filter","hideColumns","members","pageSize","page","updateTable",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"disableRouting","filter","hideColumns","members","pageSize","page","updateTable"]],template:function(e,t){1&e&&(o.Sb(0,"h1",0),o.Jc(1),o.ec(2,"translate"),o.Rb(),o.Hc(3,g,1,0,"perun-web-apps-refresh-button",1),o.Hc(4,v,1,1,"perun-web-apps-immediate-filter",2),o.Hc(5,S,1,0,"mat-spinner",3),o.Hc(6,I,1,6,"perun-web-apps-members-list",4)),2&e&&(o.Ab(1),o.Kc(o.fc(2,5,"RESOURCE_DETAIL.ASSIGNED_MEMBERS.TITLE")),o.Ab(2),o.kc("ngIf",!t.loading),o.Ab(1),o.kc("ngIf",!t.loading),o.Ab(1),o.kc("ngIf",t.loading),o.Ab(1),o.kc("ngIf",!t.loading))},directives:[l.t,b.a,f.a,d.c,h.a],pipes:[p.d],styles:[""]}),t}()},nSPi:function(t,r,s){"use strict";s.d(r,"a",(function(){return z}));var n=s("TkCa"),c=s("4sdY"),a=s("EkAj"),o=s("X2Q7"),u=s("8clQ"),l=s("Ssnw"),b=s("t47Z"),f=s("+0js"),d=s("EM62"),h=s("sEIs"),p=s("OZ4H"),g=s("EtYo"),v=s("2kYt"),S=s("csyo"),m=s("bFHC"),I=s("Y2X+"),R=s("ma6z"),E=s("PBFl"),A=s("s2Ay");function y(e,t){1&e&&d.Nb(0,"mat-spinner",3)}function T(e,t){if(1&e){var i=d.Tb();d.Sb(0,"button",13),d.Zb("click",(function(){return d.xc(i),d.dc(2).editResource()})),d.Sb(1,"mat-icon"),d.Jc(2,"edit"),d.Rb(),d.Rb()}}var k=function(e){return["/organizations",e]};function M(e,t){if(1&e&&(d.Sb(0,"a",8),d.Jc(1),d.Rb()),2&e){var i=d.dc(2);d.kc("routerLink",d.pc(2,k,i.resource.vo.id)),d.Ab(1),d.Kc(i.resource.vo.name)}}function _(e,t){if(1&e&&(d.Sb(0,"span"),d.Jc(1),d.Rb()),2&e){var i=d.dc(2);d.Ab(1),d.Lc(" ",i.resource.vo.name," ")}}var C=function(e){return["/facilities",e]};function O(e,t){if(1&e&&(d.Sb(0,"a",8),d.Jc(1),d.Rb()),2&e){var i=d.dc(2);d.kc("routerLink",d.pc(2,C,i.resource.facilityId)),d.Ab(1),d.Kc(i.resource.facility.name)}}function w(e,t){if(1&e&&(d.Sb(0,"span"),d.Jc(1),d.Rb()),2&e){var i=d.dc(2);d.Ab(1),d.Lc(" ",i.resource.facility.name," ")}}var G=function(){return{color:"black"}},L=function(e){return[e]};function U(e,t){if(1&e&&(d.Sb(0,"div"),d.Sb(1,"div",4),d.Nb(2,"mat-icon",5),d.ec(3,"translate"),d.Sb(4,"div",6),d.Sb(5,"div",7),d.Sb(6,"a",8),d.Jc(7),d.Rb(),d.Sb(8,"span",9),d.Jc(9),d.Rb(),d.Hc(10,T,3,0,"button",10),d.Rb(),d.Sb(11,"span",11),d.Jc(12),d.ec(13,"translate"),d.ec(14,"translate"),d.Hc(15,M,2,4,"a",12),d.Hc(16,_,2,1,"span",2),d.Jc(17),d.ec(18,"translate"),d.Hc(19,O,2,4,"a",12),d.Hc(20,w,2,1,"span",2),d.Jc(21),d.ec(22,"translate"),d.Rb(),d.Rb(),d.Rb(),d.Nb(23,"app-animated-router-outlet"),d.Rb()),2&e){var i=d.dc();d.Ab(2),d.lc("matTooltip",d.fc(3,17,"RESOURCE_DETAIL.ENTITY")),d.kc("ngStyle",d.oc(27,G)),d.Ab(4),d.kc("routerLink",d.pc(28,L,i.baseUrl)),d.Ab(1),d.Lc(" ",i.resource.name," "),d.Ab(2),d.Lc(" \xa0#",i.resource.id," "),d.Ab(1),d.kc("ngIf",i.editResourceAuth),d.Ab(2),d.Mc(" ",d.fc(13,19,"RESOURCE_DETAIL.ENTITY"),", ",d.fc(14,21,"RESOURCE_DETAIL.VO"),": "),d.Ab(3),d.kc("ngIf",i.voLinkAuth),d.Ab(1),d.kc("ngIf",!i.voLinkAuth),d.Ab(1),d.Mc(" #",i.resource.voId,", ",d.fc(18,23,"RESOURCE_DETAIL.FACILITY"),": "),d.Ab(2),d.kc("ngIf",i.facilityLinkAuth),d.Ab(1),d.kc("ngIf",!i.facilityLinkAuth),d.Ab(1),d.Nc(" #",i.resource.facilityId,", ",d.fc(22,25,"RESOURCE_DETAIL.DESCRIPTION"),": ",i.resource.description," ")}}var z=function(){var t=function(){function t(i,r,s,n,c,a,o,u){e(this,t),this.route=i,this.facilityManager=r,this.vosManagerService=s,this.resourcesManager=n,this.sideMenuService=c,this.sideMenuItemService=a,this.dialog=o,this.guiAuthResolver=u,this.baseUrl="",this.loading=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe((function(t){e.resourcesManager.getRichResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.setAuth(),"facilities"===e.route.parent.snapshot.url[0].path?(e.baseUrl=(new b.a).transform(t,!1),e.facilityManager.getFacilityById(t.facilityId).subscribe((function(i){var r=e.sideMenuItemService.parseFacility(i),s=e.sideMenuItemService.parseResource(t,!1);e.sideMenuService.setFacilityMenuItems([r,s]),e.loading=!1}),(function(){return e.loading=!1}))):(e.baseUrl=(new b.a).transform(t,!0),e.vosManagerService.getVoById(t.voId).subscribe((function(i){var r=e.sideMenuItemService.parseVo(i),s=e.sideMenuItemService.parseResource(t,!0);e.sideMenuService.setAccessMenuItems([r,s]),e.loading=!1}),(function(){return e.loading=!1}))),Object(u.b)("resources",e.resource)}))}))}},{key:"setAuth",value:function(){this.facilityLinkAuth=this.guiAuthResolver.isAuthorized("getFacilityById_int_policy",[this.resource]),this.editResourceAuth=this.guiAuthResolver.isAuthorized("updateResource_Resource_policy",[this.resource]),this.voLinkAuth=this.guiAuthResolver.isAuthorized("getVoById_int_policy",[this.resource])}},{key:"editResource",value:function(){var e,t=this;this.resourcesManager.getResourceById(this.resource.id).subscribe((function(i){e=i;var r=Object(u.o)();r.width="450px",r.data={theme:"resource-theme",resource:e,dialogType:f.h.RESOURCE},t.dialog.open(f.g,r).afterClosed().subscribe((function(e){e&&t.resourcesManager.getRichResourceById(t.resource.id).subscribe((function(e){t.resource=e}))}))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.Mb(h.a),d.Mb(o.g),d.Mb(o.r),d.Mb(o.m),d.Mb(c.a),d.Mb(a.a),d.Mb(p.b),d.Mb(l.h))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-resource-detail-page"]],decls:4,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-resource-black",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"resource-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","","aria-label","Edit resource",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],["class","resource-link",3,"routerLink",4,"ngIf"],["mat-icon-button","","aria-label","Edit resource",3,"click"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Nb(1,"perun-web-apps-back-button"),d.Hc(2,y,1,0,"mat-spinner",1),d.Hc(3,U,24,30,"div",2),d.Rb()),2&e&&(d.Ab(2),d.kc("ngIf",t.loading),d.Ab(1),d.kc("ngIf",!t.loading&&void 0!==t.resource))},directives:[g.a,v.t,S.c,m.a,I.a,v.w,h.i,R.a,E.b],pipes:[A.d],styles:[".break-line[_ngcontent-%COMP%]{display:inline-block}"],data:{animation:[n.a]}}),t}()},"y/MV":function(t,r,s){"use strict";s.d(r,"a",(function(){return h}));var n=s("X2Q7"),c=s("Ssnw"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("csyo"),b=s("ZG5M");function f(e,t){1&e&&a.Nb(0,"mat-spinner",2)}function d(e,t){if(1&e&&(a.Sb(0,"div"),a.Nb(1,"perun-web-apps-menu-buttons-field",3),a.Rb()),2&e){var i=a.dc();a.Ab(1),a.kc("items",i.navItems)("size","small")}}var h=function(){var t=function(){function t(i,r,s){e(this,t),this.resourcesManager=i,this.route=r,this.guiAuthResolver=s,this.navItems=[],this.loading=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe((function(t){e.resourcesManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.snapshot.url[0].path),e.loading=!1}),(function(){return e.loading=!1}))}))}},{key:"initItems",value:function(e){var t=e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId;this.navItems=[],this.guiAuthResolver.isAuthorized("getAssignedGroups_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-group",url:"".concat(t,"/resources/").concat(this.resource.id,"/groups"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedServices_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-service",url:"/".concat(t,"/resources/").concat(this.resource.id,"/services"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_SERVICES",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedMembers_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-user",url:"".concat(t,"/resources/").concat(this.resource.id,"/members"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_MEMBERS",style:"resource-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"".concat(t,"/resources/").concat(this.resource.id,"/attributes"),label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"}),this.guiAuthResolver.isManagerPagePrivileged(this.resource)&&this.navItems.push({cssIcon:"perun-settings2",url:"".concat(t,"/resources/").concat(this.resource.id,"/settings"),label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(n.m),a.Mb(o.a),a.Mb(c.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Eb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(a.Hc(0,f,1,0,"mat-spinner",0),a.Hc(1,d,2,2,"div",1)),2&e&&(a.kc("ngIf",t.loading),a.Ab(1),a.kc("ngIf",!t.loading))},directives:[u.t,l.c,b.a],styles:[""]}),t}()}}])}();