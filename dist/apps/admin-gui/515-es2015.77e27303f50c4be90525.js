(self.webpackChunkperun_web_apps=self.webpackChunkperun_web_apps||[]).push([[515],{93215:function(e,t,s){"use strict";s.d(t,{l:function(){return N}});var i=s(84608),n=s(65249),r=s(68416),a=s(60611),o=s(4230),l=s(67004),c=s(16073),u=s(31572),p=s(48160),d=s(66283),h=s(80340),g=s(15980),m=s(43691),f=s(61511),I=s(77889),Z=s(39571),A=s(67806);function S(e,t){if(1&e&&u._UZ(0,"app-users-list",14),2&e){const e=u.oxw(2);u.Q6J("tableId",e.tableId)("displayedColumns",e.displayedColumns)("users",e.identities)("disableRouting",!0)("selection",e.selection)}}function E(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,S,1,5,"app-users-list",13),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",void 0!==e.identities&&e.identities.length>0)}}function T(e,t){1&e&&(u.TgZ(0,"app-alert",15),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function b(e,t){1&e&&(u.TgZ(0,"app-alert",16),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES")," "))}function v(e,t){1&e&&u._UZ(0,"mat-spinner",17)}let N=(()=>{class e{constructor(e,t,s,i,n,r){this.dialogRef=e,this.data=t,this.userManager=s,this.storeService=i,this.notificator=n,this.translate=r,this.loading=!1,this.selection=new o.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=a.Iz}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new c.NI("",[c.kI.required,c.kI.pattern(".*[\\S]+.*")])}onAdd(){let e,t;this.loading=!0,this.isService?(e=this.selection.selected[0].id,t=this.userId):(e=this.userId,t=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(e,t).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid)return void this.searchCtrl.markAllAsTouched();this.loading=!0,this.firstSearchDone=!0;let e=[l.r.USER_DEF_ORGANIZATION,l.r.USER_DEF_PREFERRED_MAIL];e=e.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,e).subscribe(e=>{this.identities=this.filterIdentities(e),this.loading=!1},()=>{this.loading=!1})}onKeyInput(e){"Enter"===e.key&&this.onSearchByString()}filterIdentities(e){return e.filter(this.isService?e=>!e.serviceUser:e=>e.serviceUser)}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(i.so),u.Y36(i.WI),u.Y36(n.Fv),u.Y36(r.d6),u.Y36(r.V6),u.Y36(p.sK))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-connect-identity-dialog"]],decls:26,vars:25,consts:[[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"mr-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"placeholder","formControl"],["mat-flat-button","","color","primary",1,"mr-2","search-btn",3,"disabled","click"],[4,"ngIf"],["alert_type","info",4,"ngIf"],["alert_type","warn",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[3,"tableId","displayedColumns","users","disableRouting","selection",4,"ngIf"],[3,"tableId","displayedColumns","users","disableRouting","selection"],["alert_type","info"],["alert_type","warn"],[1,"ml-auto","mr-auto"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.NdJ("keyup",function(e){return t.onKeyInput(e)}),u.TgZ(1,"h1",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"mat-form-field",3),u.TgZ(6,"label"),u._UZ(7,"input",4),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"mat-error"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.qZA(),u.TgZ(12,"button",5),u.NdJ("click",function(){return t.onSearchByString()}),u.TgZ(13,"mat-icon"),u._uU(14,"search"),u.qZA(),u.qZA(),u.YNc(15,E,2,1,"div",6),u.YNc(16,T,3,3,"app-alert",7),u.YNc(17,b,3,3,"app-alert",8),u.qZA(),u.YNc(18,v,1,0,"mat-spinner",9),u.TgZ(19,"div",10),u.TgZ(20,"button",11),u.NdJ("click",function(){return t.onCancel()}),u._uU(21),u.ALo(22,"translate"),u.qZA(),u.TgZ(23,"button",12),u.NdJ("click",function(){return t.onAdd()}),u._uU(24),u.ALo(25,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Tol(t.theme),u.xp6(2),u.Oqu(u.lcZ(3,15,"DIALOGS.CONNECT_IDENTITY.TITLE_"+t.target)),u.xp6(5),u.s9C("placeholder",u.lcZ(8,17,"DIALOGS.CONNECT_IDENTITY.SEARCH")),u.Q6J("formControl",t.searchCtrl),u.xp6(3),u.hij(" ",u.lcZ(11,19,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),u.xp6(2),u.Q6J("disabled",t.loading),u.xp6(3),u.Q6J("ngIf",!t.loading),u.xp6(1),u.Q6J("ngIf",!t.firstSearchDone),u.xp6(1),u.Q6J("ngIf",!t.loading&&t.firstSearchDone&&0===t.identities.length),u.xp6(1),u.Q6J("ngIf",t.loading),u.xp6(3),u.hij(" ",u.lcZ(22,21,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),u.xp6(2),u.Q6J("disabled",0===t.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(25,23,"DIALOGS.CONNECT_IDENTITY.CONNECT")," "))},directives:[i.uh,i.xY,d.KE,h.Nt,c.Fj,c.JJ,c.oH,d.TO,g.lW,m.Hw,f.O5,i.H8,I.C,Z.w,A.$g],pipes:[p.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]}),e})()},26019:function(e,t,s){"use strict";s.d(t,{B:function(){return A}});var i=s(65249),n=s(84608),r=s(68416),a=s(67033),o=s(31572),l=s(48160),c=s(61511),u=s(15980),p=s(39571),d=s(22196);function h(e,t){1&e&&o._UZ(0,"th",13)}function g(e,t){if(1&e&&(o.TgZ(0,"td",14),o._uU(1),o.ALo(2,"userFullName"),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,e)," ")}}function m(e,t){1&e&&o._UZ(0,"tr",15)}function f(e,t){1&e&&o._UZ(0,"tr",16)}function I(e,t){1&e&&(o.TgZ(0,"app-alert",17),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function Z(e,t){1&e&&(o.TgZ(0,"app-alert",17),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}let A=(()=>{class e{constructor(e,t,s,i,n,r){this.dialogRef=e,this.data=t,this.userManager=s,this.notificator=i,this.translate=n,this.store=r,this.displayedColumns=["name"]}ngOnInit(){let e;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new a.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(e=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(e=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(e).subscribe(e=>{this.disconnectingLastOwner=1===e.length})}onConfirm(){let e,t;this.isService?(e=this.dataSource.data[0].id,t=this.userId):(e=this.userId,t=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(e,t).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.so),o.Y36(n.WI),o.Y36(i.Fv),o.Y36(r.V6),o.Y36(l.sK),o.Y36(r.d6))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["alert_type","warn"]],template:function(e,t){1&e&&(o.TgZ(0,"h1",0),o._uU(1),o.ALo(2,"translate"),o.qZA(),o.TgZ(3,"div"),o.TgZ(4,"div",1),o.TgZ(5,"p"),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"div",2),o._uU(9),o.ALo(10,"translate"),o.qZA(),o.TgZ(11,"table",3),o.ynx(12,4),o.YNc(13,h,1,0,"th",5),o.YNc(14,g,3,3,"td",6),o.BQk(),o.YNc(15,m,1,0,"tr",7),o.YNc(16,f,1,0,"tr",8),o.qZA(),o.YNc(17,I,3,3,"app-alert",9),o.YNc(18,Z,3,3,"app-alert",9),o.qZA(),o.TgZ(19,"div",10),o.TgZ(20,"button",11),o.NdJ("click",function(){return t.onCancel()}),o._uU(21),o.ALo(22,"translate"),o.qZA(),o.TgZ(23,"button",12),o.NdJ("click",function(){return t.onConfirm()}),o._uU(24),o.ALo(25,"translate"),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+t.targetTitle)),o.xp6(2),o.Tol(t.theme),o.xp6(3),o.Oqu(o.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+t.targetDescription)),o.xp6(3),o.hij(" ",o.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),o.xp6(2),o.Q6J("dataSource",t.dataSource),o.xp6(4),o.Q6J("matHeaderRowDef",t.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",t.displayedColumns),o.xp6(1),o.Q6J("ngIf",t.disconnectingSelf),o.xp6(1),o.Q6J("ngIf",t.disconnectingLastOwner),o.xp6(3),o.hij(" ",o.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),o.xp6(3),o.hij(" ",o.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},directives:[n.uh,n.xY,a.BZ,a.w1,a.fO,a.Dz,a.as,a.nj,c.O5,n.H8,u.lW,a.ge,a.ev,a.XQ,a.Gk,p.w],pipes:[l.X$,d.d],styles:[""]}),e})()},2898:function(e,t,s){"use strict";s.d(t,{x:function(){return Z}});var i=s(65249),n=s(84608),r=s(68416),a=s(16073),o=s(31572),l=s(48160),c=s(66283),u=s(80340),p=s(61511),d=s(15980);function h(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function g(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function m(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function f(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function I(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}let Z=(()=>{class e{constructor(e,t,s,i,n){this.dialogRef=e,this.data=t,this.userService=s,this.notificator=i,this.translateService=n,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new a.NI(this.data.user.titleBefore,[a.kI.pattern(".*[\\S]+.*"),a.kI.maxLength(129)]),this.titleAfter=new a.NI(this.data.user.titleAfter,[a.kI.pattern(".*[\\S]+.*"),a.kI.maxLength(129)]),this.firstName=new a.NI(this.data.user.firstName,[a.kI.required,a.kI.pattern(".*[\\S]+.*"),a.kI.maxLength(129)]),this.middleName=new a.NI(this.data.user.middleName,[a.kI.pattern(".*[\\S]+.*"),a.kI.maxLength(129)]),this.lastName=new a.NI(this.data.user.lastName,[a.kI.required,a.kI.pattern(".*[\\S]+.*"),a.kI.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(e=>{this.notificator.showSuccess(e),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.so),o.Y36(n.WI),o.Y36(i.Fv),o.Y36(r.V6),o.Y36(l.sK))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-edit-user-dialog"]],decls:32,vars:38,consts:[[1,"mat-dialog-title"],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl","placeholder"],[4,"ngIf"],["matInput","","required","",3,"formControl","placeholder"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"]],template:function(e,t){1&e&&(o.TgZ(0,"div"),o.TgZ(1,"h1",0),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"div",1),o.TgZ(5,"mat-form-field"),o._UZ(6,"input",2),o.ALo(7,"translate"),o.YNc(8,h,3,3,"mat-error",3),o.qZA(),o.TgZ(9,"mat-form-field"),o._UZ(10,"input",2),o.ALo(11,"translate"),o.YNc(12,g,3,3,"mat-error",3),o.qZA(),o.TgZ(13,"mat-form-field"),o._UZ(14,"input",4),o.ALo(15,"translate"),o.YNc(16,m,3,3,"mat-error",3),o.qZA(),o.TgZ(17,"mat-form-field"),o._UZ(18,"input",2),o.ALo(19,"translate"),o.YNc(20,f,3,3,"mat-error",3),o.qZA(),o.TgZ(21,"mat-form-field"),o._UZ(22,"input",4),o.ALo(23,"translate"),o.YNc(24,I,3,3,"mat-error",3),o.qZA(),o.qZA(),o.TgZ(25,"div",5),o.TgZ(26,"button",6),o.NdJ("click",function(){return t.onCancel()}),o._uU(27),o.ALo(28,"translate"),o.qZA(),o.TgZ(29,"button",7),o.NdJ("click",function(){return t.onSave()}),o._uU(30),o.ALo(31,"translate"),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.Tol(t.theme),o.xp6(2),o.Oqu(o.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),o.xp6(4),o.s9C("placeholder",o.lcZ(7,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),o.Q6J("formControl",t.titleBefore),o.xp6(2),o.Q6J("ngIf",t.titleBefore.invalid),o.xp6(2),o.s9C("placeholder",o.lcZ(11,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),o.Q6J("formControl",t.titleAfter),o.xp6(2),o.Q6J("ngIf",t.titleAfter.invalid),o.xp6(2),o.s9C("placeholder",o.lcZ(15,28,"DIALOGS.EDIT_USER.FIRST_NAME")),o.Q6J("formControl",t.firstName),o.xp6(2),o.Q6J("ngIf",t.firstName.invalid),o.xp6(2),o.s9C("placeholder",o.lcZ(19,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),o.Q6J("formControl",t.middleName),o.xp6(2),o.Q6J("ngIf",t.middleName.invalid),o.xp6(2),o.s9C("placeholder",o.lcZ(23,32,"DIALOGS.EDIT_USER.LAST_NAME")),o.Q6J("formControl",t.lastName),o.xp6(2),o.Q6J("ngIf",t.lastName.invalid),o.xp6(3),o.hij(" ",o.lcZ(28,34,"DIALOGS.EDIT_USER.CANCEL")," "),o.xp6(2),o.Q6J("disabled",t.loading||t.firstName.invalid||t.lastName.invalid||t.titleBefore.invalid||t.titleAfter.invalid||t.middleName.invalid),o.xp6(1),o.hij(" ",o.lcZ(31,36,"DIALOGS.EDIT_USER.SAVE")," "))},directives:[n.xY,c.KE,u.Nt,a.Fj,a.JJ,a.oH,p.O5,a.Q7,n.H8,d.lW,c.TO],pipes:[l.X$],styles:[""]}),e})()},95690:function(e,t,s){"use strict";s.d(t,{u:function(){return f}});var i=s(68416),n=s(31572),r=s(57629),a=s(55109),o=s(61511),l=s(541),c=s(3417),u=s(48160);function p(e,t){1&e&&(n._uU(0),n.ALo(1,"translate")),2&e&&n.hij(" ",n.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function d(e,t){if(1&e&&n._UZ(0,"app-one-entity-attribute-page",5),2&e){const e=n.oxw();n.Q6J("entityId",e.userId)("entity","user")}}function h(e,t){1&e&&(n._uU(0),n.ALo(1,"translate"),n.ALo(2,"translate")),2&e&&n.AsE(" ",n.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",n.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function g(e,t){if(1&e&&n._UZ(0,"app-two-entity-attribute-page",6),2&e){const e=n.oxw(2);n.Q6J("firstEntity","user")("firstEntityId",e.userId)("secondEntity","facility")}}function m(e,t){1&e&&(n.TgZ(0,"mat-tab"),n.YNc(1,h,3,6,"ng-template",2),n.YNc(2,g,1,3,"ng-template",3),n.qZA())}let f=(()=>{class e{constructor(e,t,s){this.route=e,this.store=t,this.authResolver=s}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=e.userId,void 0===this.userId&&(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(r.gz),n.Y36(i.d6),n.Y36(i.x4))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(e,t){2&e&&n.ekj("router-component",t.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(n.TgZ(0,"h1",0),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"mat-tab-group"),n.TgZ(4,"mat-tab",1),n.YNc(5,p,2,3,"ng-template",2),n.YNc(6,d,1,2,"ng-template",3),n.qZA(),n.YNc(7,m,3,0,"mat-tab",4),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),n.xp6(6),n.Q6J("ngIf",t.userFacilityAttAuth))},directives:[a.SP,a.uX,a.uD,a.Vc,o.O5,l.t,c.Y],pipes:[u.X$],styles:[""]}),e})()},31612:function(e,t,s){"use strict";s.d(t,{u:function(){return b}});var i=s(68416),n=s(65249),r=s(60611),a=s(31572),o=s(57629),l=s(61511),c=s(59403),u=s(19139),p=s(67806),d=s(78364),h=s(48160);function g(e,t){1&e&&(a.TgZ(0,"h1",6),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function m(e,t){1&e&&(a.TgZ(0,"h1",6),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function f(e,t){1&e&&a._UZ(0,"mat-spinner",7)}const I=function(){return["id","vo","name","description","status"]};function Z(e,t){if(1&e&&a._UZ(0,"perun-web-apps-groups-list",8),2&e){const e=a.oxw();a.Q6J("tableId",e.tableId)("groups",e.membersGroups)("displayedColumns",a.DdM(5,I))("disableMembers",!1)("filter",e.memberFilterValue)}}function A(e,t){1&e&&a._UZ(0,"mat-spinner",7)}const S=function(){return["id","vo","name","description"]};function E(e,t){if(1&e&&a._UZ(0,"perun-web-apps-groups-list",8),2&e){const e=a.oxw(2);a.Q6J("tableId",e.adminTableId)("groups",e.adminsGroups)("displayedColumns",a.DdM(5,S))("disableMembers",!1)("filter",e.adminFilterValue)}}function T(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",9),a.TgZ(1,"h1",6),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"perun-web-apps-refresh-button",1),a.NdJ("refresh",function(){return a.CHM(e),a.oxw().refreshAdminTable()}),a.qZA(),a.TgZ(5,"perun-web-apps-immediate-filter",2),a.NdJ("filter",function(t){return a.CHM(e),a.oxw().adminFilter(t)}),a.qZA(),a.YNc(6,A,1,0,"mat-spinner",3),a.YNc(7,E,1,6,"perun-web-apps-groups-list",4),a.qZA()}if(2&e){const e=a.oxw();a.xp6(2),a.hij(" ",a.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),a.xp6(3),a.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),a.xp6(1),a.Q6J("ngIf",e.adminRefresh),a.xp6(1),a.Q6J("ngIf",!e.adminRefresh)}}let b=(()=>{class e{constructor(e,t,s,i,n){this.usersService=e,this.memberService=t,this.groupService=s,this.store=i,this.route=n,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=r.KE,this.adminTableId=r.Sb}ngOnInit(){!0===(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(e=>this.userId=e.userId),this.refreshAdminTable(),this.refreshMemberTable()}memberFilter(e){this.memberFilterValue=e}adminFilter(e){this.adminFilterValue=e}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(e=>{this.adminsGroups=e,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(e=>{this.vos=e;for(const t of this.vos)this.memberService.getMemberByUser(t.id,this.userId).subscribe(e=>{this.groupService.getMemberGroups(e.id).subscribe(e=>{this.membersGroups=this.membersGroups.concat(e),this.vos.indexOf(t)===this.vos.length-1&&(this.memberRefresh=!1)})});0===e.length&&(this.memberRefresh=!1)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(n.Fv),a.Y36(n.uq),a.Y36(n.ff),a.Y36(i.d6),a.Y36(o.gz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(e,t){2&e&&a.ekj("router-component",t.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","groups","displayedColumns","disableMembers","filter",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"tableId","groups","displayedColumns","disableMembers","filter"],[1,"mt-5"]],template:function(e,t){1&e&&(a.YNc(0,g,3,3,"h1",0),a.YNc(1,m,3,3,"h1",0),a.TgZ(2,"perun-web-apps-refresh-button",1),a.NdJ("refresh",function(){return t.refreshMemberTable()}),a.qZA(),a.TgZ(3,"perun-web-apps-immediate-filter",2),a.NdJ("filter",function(e){return t.memberFilter(e)}),a.qZA(),a.YNc(4,f,1,0,"mat-spinner",3),a.YNc(5,Z,1,6,"perun-web-apps-groups-list",4),a.YNc(6,T,8,6,"div",5)),2&e&&(a.Q6J("ngIf",t.showPrincipal),a.xp6(1),a.Q6J("ngIf",!t.showPrincipal),a.xp6(2),a.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),a.xp6(1),a.Q6J("ngIf",t.memberRefresh),a.xp6(1),a.Q6J("ngIf",!t.memberRefresh),a.xp6(1),a.Q6J("ngIf",!t.showPrincipal))},directives:[l.O5,c.t,u.L,p.$g,d.W],pipes:[h.X$],styles:[""]}),e})()},15879:function(e,t,s){"use strict";s.d(t,{j:function(){return E}});var i=s(65249),n=s(68416),r=s(60611),a=s(31572),o=s(57629),l=s(61511),c=s(59403),u=s(19139),p=s(67806),d=s(97162),h=s(48160);function g(e,t){1&e&&(a.TgZ(0,"h1",6),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function m(e,t){1&e&&(a.TgZ(0,"h1",6),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function f(e,t){1&e&&a._UZ(0,"mat-spinner",7)}function I(e,t){if(1&e&&a._UZ(0,"perun-web-apps-vos-list",8),2&e){const e=a.oxw();a.Q6J("displayedColumns",e.displayedColumns)("tableId",e.memberTableId)("filterValue",e.memberFilterValue)("vos",e.vosWhereIsMember)}}function Z(e,t){1&e&&a._UZ(0,"mat-spinner",7)}function A(e,t){if(1&e&&a._UZ(0,"perun-web-apps-vos-list",8),2&e){const e=a.oxw(2);a.Q6J("displayedColumns",e.displayedColumns)("tableId",e.adminTableId)("filterValue",e.adminFilterValue)("vos",e.vosWhereIsAdmin)}}function S(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",9),a.TgZ(1,"h1",6),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"perun-web-apps-refresh-button",1),a.NdJ("refresh",function(){return a.CHM(e),a.oxw().refreshAdminTable()}),a.qZA(),a.TgZ(5,"perun-web-apps-immediate-filter",2),a.NdJ("filter",function(t){return a.CHM(e),a.oxw().applyAdminFilter(t)}),a.qZA(),a.YNc(6,Z,1,0,"mat-spinner",3),a.YNc(7,A,1,4,"perun-web-apps-vos-list",4),a.qZA()}if(2&e){const e=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),a.xp6(3),a.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),a.xp6(1),a.Q6J("ngIf",e.adminRefresh),a.xp6(1),a.Q6J("ngIf",!e.adminRefresh)}}let E=(()=>{class e{constructor(e,t,s,i){this.usersService=e,this.authResolver=t,this.store=s,this.route=i,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=r.YF,this.memberTableId=r.gc}ngOnInit(){!0===(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(e=>this.userId=e.userId),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(e=>{this.vosWhereIsMember=e,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(e=>{this.vosWhereIsAdmin=e,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(e){this.memberFilterValue=e}applyAdminFilter(e){this.adminFilterValue=e}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(i.Fv),a.Y36(n.x4),a.Y36(n.d6),a.Y36(o.gz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(e,t){2&e&&a.ekj("router-component",t.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","tableId","filterValue","vos",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(e,t){1&e&&(a.YNc(0,g,3,3,"h1",0),a.YNc(1,m,3,3,"h1",0),a.TgZ(2,"perun-web-apps-refresh-button",1),a.NdJ("refresh",function(){return t.refreshMemberTable()}),a.qZA(),a.TgZ(3,"perun-web-apps-immediate-filter",2),a.NdJ("filter",function(e){return t.applyMemberFilter(e)}),a.qZA(),a.YNc(4,f,1,0,"mat-spinner",3),a.YNc(5,I,1,4,"perun-web-apps-vos-list",4),a.YNc(6,S,8,6,"div",5)),2&e&&(a.Q6J("ngIf",t.isMyProfile),a.xp6(1),a.Q6J("ngIf",!t.isMyProfile),a.xp6(2),a.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),a.xp6(1),a.Q6J("ngIf",t.memberRefresh),a.xp6(1),a.Q6J("ngIf",!t.memberRefresh),a.xp6(1),a.Q6J("ngIf",!t.isMyProfile))},directives:[l.O5,c.t,u.L,p.$g,d.Z],pipes:[h.X$],styles:[""]}),e})()},71956:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var i=s(65249),n=s(67033),r=s(68416),a=s(67004),o=s(84140),l=s(6527),c=s(31572),u=s(57629),p=s(84608),d=s(61511),h=s(8557),g=s(27439),m=s(15980),f=s(43691),I=s(48160);function Z(e,t){1&e&&c._UZ(0,"th",12)}function A(e,t){if(1&e&&(c.TgZ(0,"td",13),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij(" ",e.displayName,": ")}}function S(e,t){1&e&&c._UZ(0,"th",12)}function E(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"td",14),c._uU(1),c.TgZ(2,"button",15),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).changeEmail()}),c.TgZ(3,"mat-icon"),c._uU(4,"edit"),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.xp6(1),c.hij(" ",e.value," ")}}function T(e,t){1&e&&c._UZ(0,"tr",16)}function b(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"mat-card",3),c.TgZ(2,"mat-card-header"),c.TgZ(3,"mat-card-title"),c.TgZ(4,"h1",4),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"mat-card-content"),c.TgZ(8,"table",5),c.ynx(9,6),c.YNc(10,Z,1,0,"th",7),c.YNc(11,A,2,1,"td",8),c.BQk(),c.ynx(12,9),c.YNc(13,S,1,0,"th",7),c.YNc(14,E,5,1,"td",10),c.BQk(),c.YNc(15,T,1,0,"tr",11),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(5),c.Oqu(c.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),c.xp6(3),c.Q6J("dataSource",e.mailDataSource),c.xp6(7),c.Q6J("matRowDefColumns",e.displayedColumns)}}let v=(()=>{class e{constructor(e,t,s,i,n){this.userService=e,this.attributeService=t,this.storeService=s,this.route=i,this.dialog=n,this.navItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(e=>{void 0!==e.userId?this.userService.getUserById(e.userId).subscribe(e=>{this.user=e,this.isServiceUser=e.serviceUser,this.initNavItems()}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,a.r.USER_DEF_PREFERRED_MAIL).subscribe(e=>{this.preferredMail=e,this.handleMailNotDefined(),this.mailDataSource=new n.by([this.preferredMail]),this.initNavItems()}))})}initNavItems(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-user",url:"accounts",label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-group",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-group",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.navItems.push(this.isServiceUser?{cssIcon:"perun-user-dark",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}changeEmail(){const e=(0,o.kZ)();e.width="350px",e.data={userId:this.userID},this.dialog.open(l.gr,e).afterClosed().subscribe(e=>{e&&this.attributeService.getUserAttributeByName(this.userID,a.r.USER_DEF_PREFERRED_MAIL).subscribe(e=>{this.preferredMail=e,this.handleMailNotDefined(),this.mailDataSource=new n.by([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,o.Cz)(a.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:Object("-")})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(i.Fv),c.Y36(i.H8),c.Y36(r.d6),c.Y36(u.gz),c.Y36(p.uw))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("router-component",t.true)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(e,t){1&e&&(c.YNc(0,b,16,5,"div",0),c._UZ(1,"perun-web-apps-menu-buttons-field",1)),2&e&&(c.Q6J("ngIf",t.inMyProfile),c.xp6(1),c.Q6J("items",t.navItems)("size","small"))},directives:[d.O5,h.L,g.a8,g.dk,g.n5,g.dn,n.BZ,n.w1,n.fO,n.Dz,n.nj,n.ge,n.ev,m.lW,f.Hw,n.Gk],pipes:[I.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),e})()},7233:function(e,t,s){"use strict";s.d(t,{t:function(){return Me}});var i=s(65249),n=s(68416),r=s(31572),a=s(57629),o=s(61511),l=s(67806),c=s(45001),u=s(43691),p=s(27439),d=s(97162),h=s(77889),g=s(78364),m=s(88884),f=s(60007),I=s(4252),Z=s(48160);function A(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function S(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function E(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.SELF_VOS_ADMIN")," "))}function T(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.SELF_VOS")," "))}function b(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.SELF_IDENTITIES_ADMIN")," "))}function v(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.SELF_IDENTITIES")," "))}const N=function(){return["user","id","name"]};function R(e,t){if(1&e&&(r.TgZ(0,"div",11),r.YNc(1,b,3,3,"div",2),r.YNc(2,v,3,3,"div",2),r._UZ(3,"app-users-list",12),r.qZA()),2&e){const e=r.oxw(4);r.xp6(1),r.Q6J("ngIf",!e.showDescription),r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("users",e.users)("disableRouting",!0)("displayedColumns",r.DdM(5,N))}}const U=function(){return["id","name","shortName"]};function x(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,E,3,3,"div",2),r.YNc(2,T,3,3,"div",2),r._UZ(3,"perun-web-apps-vos-list",9),r.YNc(4,R,4,6,"div",10),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",!e.showDescription),r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(5,U))("vos",e.vos),r.xp6(1),r.Q6J("ngIf",e.users.length)}}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getSelfData()}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",7),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,S,1,0,"mat-spinner",1),r.YNc(8,x,5,6,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.SELF")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function O(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function C(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.GROUPADMIN_GROUPS")," "))}const L=function(){return["id","vo","name","description"]};function D(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,C,3,3,"div",2),r._UZ(2,"perun-web-apps-groups-list",14),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("groups",e.groups)("displayedColumns",r.DdM(3,L))}}function q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getAdminGroupsAndVos()}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",13),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,O,1,0,"mat-spinner",1),r.YNc(8,D,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.GROUPADMIN")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function w(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function Y(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.GROUPOBSERVER_GROUPS")," "))}const y=function(){return["id","recent","vo","name","description"]};function M(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Y,3,3,"div",2),r._UZ(2,"perun-web-apps-groups-list",14),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("groups",e.groups)("displayedColumns",r.DdM(3,y))}}function J(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getGroupsAndVos("GROUPOBSERVER")}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",13),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,w,1,0,"mat-spinner",1),r.YNc(8,M,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.GROUPOBSERVER")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function Q(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function F(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.VOADMIN_VOS")," "))}function P(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,F,3,3,"div",2),r._UZ(2,"perun-web-apps-vos-list",9),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,U))("vos",e.vos)}}function V(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getAdminVos()}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",15),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,Q,1,0,"mat-spinner",1),r.YNc(8,P,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.VOADMIN")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function G(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function k(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.VOOBSERVER_VOS")," "))}function B(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,k,3,3,"div",2),r._UZ(2,"perun-web-apps-vos-list",9),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,U))("vos",e.vos)}}function j(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){r.CHM(e);const t=r.oxw(2);return t.getVos(t.roles.get("VOOBSERVER").get("Vo"))}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",15),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,G,1,0,"mat-spinner",1),r.YNc(8,B,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.VOOBSERVER")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function H(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function z(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.TRUSTEDFACILITYADMIN_VOS")," "))}function W(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"div"),r.YNc(2,z,3,3,"div",2),r._UZ(3,"perun-web-apps-vos-list",9),r.qZA(),r.qZA()),2&e){const e=r.oxw(3);r.xp6(2),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,U))("vos",e.vos)}}function X(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){r.CHM(e);const t=r.oxw(2);return t.getVos(t.roles.get("TRUSTEDFACILITYADMIN").get("Vo"))}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",15),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,H,1,0,"mat-spinner",1),r.YNc(8,W,4,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.TRUSTEDFACILITYADMIN")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function $(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function K(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.TOPGROUPCREATOR_VOS")," "))}function ee(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,K,3,3,"div",2),r._UZ(2,"perun-web-apps-vos-list",9),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,U))("vos",e.vos)}}function te(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){r.CHM(e);const t=r.oxw(2);return t.getVos(t.roles.get("TOPGROUPCREATOR").get("Vo"))}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",15),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,$,1,0,"mat-spinner",1),r.YNc(8,ee,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.TOPGROUPCREATOR")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function se(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function ie(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.RESOURCEADMIN_RESOURCES")," "))}const ne=function(){return["id","name","vo","facility","description"]};function re(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,ie,3,3,"div",2),r._UZ(2,"perun-web-apps-resources-list",17),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("resources",e.resources)("routingVo",!0)("displayedColumns",r.DdM(4,ne))}}function ae(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getResourcesData("RESOURCEADMIN")}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",16),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,se,1,0,"mat-spinner",1),r.YNc(8,re,3,5,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.RESOURCEADMIN")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function oe(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function le(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.RESOURCEOBSERVER_RESOURCES")," "))}function ce(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,le,3,3,"div",2),r._UZ(2,"perun-web-apps-resources-list",17),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("resources",e.resources)("routingVo",!0)("displayedColumns",r.DdM(4,ne))}}function ue(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getResourcesData("RESOURCEOBSERVER")}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",16),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,oe,1,0,"mat-spinner",1),r.YNc(8,ce,3,5,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.RESOURCEOBSERVER")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function pe(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function de(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.RESOURCESELFSERVICE_RESOURCES")," "))}function he(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,de,3,3,"div",2),r._UZ(2,"perun-web-apps-resources-list",17),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("resources",e.resources)("routingVo",!0)("displayedColumns",r.DdM(4,ne))}}function ge(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getResourcesData("RESOURCESELFSERVICE")}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",16),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,pe,1,0,"mat-spinner",1),r.YNc(8,he,3,5,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.RESOURCESELFSERVICE")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function me(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function fe(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.FACILITYADMIN_FACILITIES")," "))}const Ie=function(){return["id","name","description"]};function Ze(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,fe,3,3,"div",2),r._UZ(2,"perun-web-apps-facilities-list",19),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,Ie))("facilities",e.facilities)}}function Ae(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getAdminFacilities()}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",18),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,me,1,0,"mat-spinner",1),r.YNc(8,Ze,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.FACILITYADMIN")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function Se(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function Ee(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.FACILITYOBSERVER_FACILITIES")," "))}function Te(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Ee,3,3,"div",2),r._UZ(2,"perun-web-apps-facilities-list",19),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,Ie))("facilities",e.facilities)}}function be(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getFacilities("FACILITYOBSERVER")}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",18),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,Se,1,0,"mat-spinner",1),r.YNc(8,Te,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.FACILITYOBSERVER")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function ve(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function Ne(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.SPONSORSHIP_MEMBERS")," "))}const Re=function(){return["id","fullName","sponsored"]};function Ue(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Ne,3,3,"div",2),r._UZ(2,"perun-web-apps-members-list",20),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("members",e.members)("displayedColumns",r.DdM(3,Re))}}function xe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){return r.CHM(e),r.oxw(2).getMembers()}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",7),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,ve,1,0,"mat-spinner",1),r.YNc(8,Ue,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.SPONSORSHIP")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function _e(e,t){1&e&&r._UZ(0,"mat-spinner",3)}function Oe(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"ROLES.SPONSOR_VOS")," "))}function Ce(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Oe,3,3,"div",2),r._UZ(2,"perun-web-apps-vos-list",9),r.qZA()),2&e){const e=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.showDescription),r.xp6(1),r.Q6J("displayedColumns",r.DdM(3,U))("vos",e.vos)}}function Le(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){r.CHM(e);const t=r.oxw(2);return t.getVos(t.roles.get("SPONSOR").get("Vo"))}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",7),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,_e,1,0,"mat-spinner",1),r.YNc(8,Ce,3,4,"div",2),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Oqu(r.lcZ(6,3,"ROLES.SPONSOR")),r.xp6(2),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",!e.loading)}}function De(e,t){1&e&&(r.TgZ(0,"mat-expansion-panel"),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",7),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(5),r.Oqu(r.lcZ(6,1,"ROLES.PERUN_ADMIN")))}function qe(e,t){1&e&&(r.TgZ(0,"mat-expansion-panel"),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",7),r.TgZ(4,"p",8),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(5),r.Oqu(r.lcZ(6,1,"ROLES.PERUN_OBSERVER")))}function we(e,t){if(1&e&&(r.TgZ(0,"p",22),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.AsE("",e[0]," ids: ",e[1],"")}}function Ye(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-expansion-panel",6),r.NdJ("opened",function(){const t=r.CHM(e).$implicit;return r.oxw(2).getInnerKeys(t)}),r.TgZ(1,"mat-expansion-panel-header"),r.TgZ(2,"mat-panel-title"),r._UZ(3,"mat-icon",7),r.TgZ(4,"p",8),r._uU(5),r.qZA(),r.qZA(),r.qZA(),r.YNc(6,we,2,2,"p",21),r.qZA()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.xp6(5),r.Oqu(e),r.xp6(1),r.Q6J("ngForOf",s.currentIds)}}function ye(e,t){if(1&e&&(r.TgZ(0,"mat-accordion"),r.YNc(1,_,9,5,"mat-expansion-panel",4),r.YNc(2,q,9,5,"mat-expansion-panel",4),r.YNc(3,J,9,5,"mat-expansion-panel",4),r.YNc(4,V,9,5,"mat-expansion-panel",4),r.YNc(5,j,9,5,"mat-expansion-panel",4),r.YNc(6,X,9,5,"mat-expansion-panel",4),r.YNc(7,te,9,5,"mat-expansion-panel",4),r.YNc(8,ae,9,5,"mat-expansion-panel",4),r.YNc(9,ue,9,5,"mat-expansion-panel",4),r.YNc(10,ge,9,5,"mat-expansion-panel",4),r.YNc(11,Ae,9,5,"mat-expansion-panel",4),r.YNc(12,be,9,5,"mat-expansion-panel",4),r.YNc(13,xe,9,5,"mat-expansion-panel",4),r.YNc(14,Le,9,5,"mat-expansion-panel",4),r.YNc(15,De,7,3,"mat-expansion-panel",2),r.YNc(16,qe,7,3,"mat-expansion-panel",2),r.YNc(17,Ye,7,2,"mat-expansion-panel",5),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.isSelf),r.xp6(1),r.Q6J("ngIf",e.isGroupAdmin),r.xp6(1),r.Q6J("ngIf",e.isGroupObserver),r.xp6(1),r.Q6J("ngIf",e.isVoAdmin),r.xp6(1),r.Q6J("ngIf",e.isVoObserver),r.xp6(1),r.Q6J("ngIf",e.isTrustedFacilityAdmin),r.xp6(1),r.Q6J("ngIf",e.isTopGroupCreator),r.xp6(1),r.Q6J("ngIf",e.isResourceAdmin),r.xp6(1),r.Q6J("ngIf",e.isResourceObserver),r.xp6(1),r.Q6J("ngIf",e.isResourceSelfService),r.xp6(1),r.Q6J("ngIf",e.isFacilityAdmin),r.xp6(1),r.Q6J("ngIf",e.isFacilityObserver),r.xp6(1),r.Q6J("ngIf",e.hasSponsorship),r.xp6(1),r.Q6J("ngIf",e.isSponsor),r.xp6(1),r.Q6J("ngIf",e.isPerunAdmin),r.xp6(1),r.Q6J("ngIf",e.isPerunObserver),r.xp6(1),r.Q6J("ngForOf",e.roleNames)}}let Me=(()=>{class e{constructor(e,t,s,i,n,r,a,o,l){this.authzResolverService=e,this.usersManagerService=t,this.vosManagerService=s,this.facilitiesManagerService=i,this.resourcesManagerService=n,this.membersManagerService=r,this.groupsManagerService=a,this.route=o,this.store=l,this.currentIds=[],this.roles=new Map,this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN","PERUNOBSERVER"],this.roleNames=[],this.groups=[],this.vos=[],this.facilities=[],this.users=[],this.resources=[],this.members=[]}ngOnInit(){this.outerLoading=!0,this.route.parent.params.subscribe(e=>{e.userId?(this.userId=e.userId,this.authzResolverService.getUserRoleNames(this.userId).subscribe(e=>{this.roleNames=e.map(e=>e.toUpperCase()),this.authzResolverService.getUserRoles(this.userId).subscribe(e=>{this.prepareRoles(e)})})):(this.showDescription=!0,this.principal=this.store.getPerunPrincipal(),this.userId=this.principal.userId,this.roleNames=Object.keys(this.principal.roles),this.prepareRoles(this.principal.roles))})}prepareRoles(e){this.roleNames.forEach(t=>{const s=new Map;switch(Object.keys(e[t]).forEach(i=>{s.set(i,e[t][i])}),t){case"SELF":this.isSelf=!0;break;case"GROUPADMIN":this.isGroupAdmin=!0;break;case"VOADMIN":this.isVoAdmin=!0;break;case"RESOURCEADMIN":this.isResourceAdmin=!0;break;case"FACILITYADMIN":this.isFacilityAdmin=!0;break;case"TOPGROUPCREATOR":this.isTopGroupCreator=!0;break;case"SPONSORSHIP":this.hasSponsorship=!0;break;case"SPONSOR":this.isSponsor=!0;break;case"RESOURCESELFSERVICE":this.isResourceSelfService=!0;break;case"VOOBSERVER":this.isVoObserver=!0;break;case"RESOURCEOBSERVER":this.isResourceObserver=!0;break;case"GROUPOBSERVER":this.isGroupObserver=!0;break;case"TRUSTEDFACILITYADMIN":this.isTrustedFacilityAdmin=!0;break;case"FACILITYOBSERVER":this.isFacilityObserver=!0;break;case"PERUNADMIN":this.isPerunAdmin=!0;break;case"PERUNOBSERVER":this.isPerunObserver=!0}this.roles.set(t,s)}),this.roleNames=this.roleNames.filter(e=>!this.roleFilter.includes(e)),this.outerLoading=!1}getAdminGroupsAndVos(){this.loading=!0,this.groups=[],this.usersManagerService.getGroupsWhereUserIsAdmin(this.userId).subscribe(e=>{this.groups=e;const t=[...new Set(this.groups.map(e=>e.voId))];this.getVos(t)})}getVos(e){this.loading=!0,this.vos=[],this.vosManagerService.getVosByIds(e).subscribe(e=>{this.vos=e,this.loading=!1})}getInnerKeys(e){if(this.roles.get(e)){const t=this.roles.get(e).entries(),s=[];let i=t.next().value;for(;i;)s.push(i),i=t.next().value;this.currentIds=s}else this.currentIds=[]}getAdminVos(){this.loading=!0,this.vos=[],this.usersManagerService.getVosWhereUserIsAdmin(this.userId).subscribe(e=>{this.vos=e,this.loading=!1})}getAdminFacilities(){this.loading=!0,this.facilities=[],this.facilitiesManagerService.getFacilitiesWhereUserIsAdmin(this.userId).subscribe(e=>{this.facilities=e.map(e=>({facility:e})),this.loading=!1})}getSelfData(){this.loading=!0,this.vos=[],this.users=[],this.usersManagerService.getVosWhereUserIsMember(this.userId).subscribe(e=>{this.vos=e;const t=this.roles.get("SELF").get("User");t?this.usersManagerService.getUsersByIds(t).subscribe(e=>{this.users=e,this.loading=!1}):this.loading=!1})}getResourcesData(e){this.loading=!0;const t=this.roles.get(e).get("Resource");this.vos=[],this.facilities=[],this.resources=[],this.resourcesManagerService.getRichResourcesByIds(t).subscribe(e=>{this.resources=e,this.vos=this.resources.map(e=>e.vo).filter((e,t,s)=>s.indexOf(e)===t),this.facilities=this.resources.map(e=>({facility:e.facility})).filter((e,t,s)=>s.indexOf(e)===t),this.loading=!1})}getMembers(){this.loading=!0;const e=this.roles.get("SPONSORSHIP").get("Member");this.members=[],this.membersManagerService.getRichMembersByIds(e).subscribe(e=>{this.members=e,this.loading=!1})}getGroupsAndVos(e){this.loading=!0;const t=this.roles.get(e).get("Vo"),s=this.roles.get(e).get("Group");this.vos=[],this.groups=[],this.groupsManagerService.getGroupsByIds(s).subscribe(e=>{this.groups=e,this.vosManagerService.getVosByIds(t).subscribe(e=>{this.vos=e,this.loading=!1})})}getFacilities(e){this.loading=!0,this.facilities=[];const t=this.roles.get(e).get("Facility");this.facilitiesManagerService.getFacilitiesByIds(t).subscribe(e=>{this.facilities=e.map(e=>({facility:e})),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(i.Ct),r.Y36(i.Fv),r.Y36(i.YF),r.Y36(i.IQ),r.Y36(i.xk),r.Y36(i.uq),r.Y36(i.ff),r.Y36(a.gz),r.Y36(n.d6))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("router-component",t.true)},decls:5,vars:5,consts:[[1,"page-subtitle","d-flex"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"opened",4,"ngIf"],[3,"opened",4,"ngFor","ngForOf"],[3,"opened"],["mat-card-avatar","","svgIcon","perun-user-dark",1,"mr-2"],[1,"mt-auto","mb-auto"],[3,"displayedColumns","vos"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[3,"users","disableRouting","displayedColumns"],["mat-card-avatar","","svgIcon","perun-group-black",1,"mr-2"],[3,"groups","displayedColumns"],["mat-card-avatar","","svgIcon","perun-vo-black",1,"mr-2"],["mat-card-avatar","","svgIcon","perun-resource-black",1,"mr-2"],[3,"resources","routingVo","displayedColumns"],["mat-card-avatar","","svgIcon","perun-facility-black",1,"mr-2"],[3,"displayedColumns","facilities"],[3,"members","displayedColumns"],["class","role-content",4,"ngFor","ngForOf"],[1,"role-content"]],template:function(e,t){1&e&&(r.TgZ(0,"h1",0),r._uU(1),r.ALo(2,"translate"),r.qZA(),r.YNc(3,A,1,0,"mat-spinner",1),r.YNc(4,ye,18,17,"mat-accordion",2)),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,3,"ROLES.TITLE")),r.xp6(2),r.Q6J("ngIf",t.outerLoading),r.xp6(1),r.Q6J("ngIf",!t.outerLoading))},directives:[o.O5,l.$g,c.pp,o.sg,c.ib,c.yz,c.yK,u.Hw,p.kc,d.Z,h.C,g.W,m.C,f.X,I.O],pipes:[Z.X$],styles:[".role-content[_ngcontent-%COMP%]{overflow:auto;overflow-y:hidden}.info-icon[_ngcontent-%COMP%]{vertical-align:middle;transform:scale(.8)}"]}),e})()},2043:function(e,t,s){"use strict";s.d(t,{d:function(){return E}});var i=s(60611),n=s(65249),r=s(4230),a=s(84140),o=s(93215),l=s(26019),c=s(68416),u=s(31572),p=s(84608),d=s(57629),h=s(59403),g=s(15980),m=s(61511),f=s(77889),I=s(67806),Z=s(48160);function A(e,t){if(1&e&&(u._UZ(0,"app-users-list",6),u.ALo(1,"translate")),2&e){const e=u.oxw();u.Q6J("tableId",e.tableId)("noUsersFoundLabel",u.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("users",e.associatedUsers)("selection",e.selection)("disableRouting",e.disableRouting)("displayedColumns",e.displayedColumns)}}function S(e,t){1&e&&u._UZ(0,"mat-spinner",7)}let E=(()=>{class e{constructor(e,t,s,n,a){this.dialog=e,this.router=t,this.authResolver=s,this.userManager=n,this.entityStorageService=a,this.loading=!1,this.selection=new r.Ov(!1,[]),this.associatedUsers=[],this.tableId=i.It,this.displayedColumns=["select","id","user","name"]}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.userManager.getUsersBySpecificUser(this.user.id).subscribe(e=>{this.associatedUsers=e,this.setAuth(),this.loading=!1})}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).subscribe(e=>{this.associatedUsers=e,this.selection.clear(),this.loading=!1})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){const e=(0,a.kZ)();e.width="1250px",e.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(o.l,e).afterClosed().subscribe(e=>{e&&this.refreshTable()})}onRemove(){const e=(0,a.kZ)();e.width="650px",e.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(l.B,e).afterClosed().subscribe(e=>{e&&(this.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[this.user])?this.refreshTable():this.router.navigate(["/myProfile"]))})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(p.uw),u.Y36(d.F0),u.Y36(c.x4),u.Y36(n.Fv),u.Y36(c.fb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-settings-associated-users"]],decls:13,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[3,"tableId","noUsersFoundLabel","users","selection","disableRouting","displayedColumns",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","noUsersFoundLabel","users","selection","disableRouting","displayedColumns"],[1,"mr-auto","ml-auto"]],template:function(e,t){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"h1",0),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"perun-web-apps-refresh-button",1),u.NdJ("refresh",function(){return t.refreshTable()}),u.qZA(),u.TgZ(5,"button",2),u.NdJ("click",function(){return t.onAdd()}),u._uU(6),u.ALo(7,"translate"),u.qZA(),u.TgZ(8,"button",3),u.NdJ("click",function(){return t.onRemove()}),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.YNc(11,A,2,8,"app-users-list",4),u.qZA(),u.YNc(12,S,1,0,"mat-spinner",5)),2&e&&(u.xp6(2),u.Oqu(u.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),u.xp6(4),u.hij(" ",u.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),u.xp6(2),u.Q6J("disabled",0===t.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),u.xp6(2),u.Q6J("ngIf",!t.loading),u.xp6(1),u.Q6J("ngIf",t.loading))},directives:[h.t,g.lW,m.O5,f.C,I.$g],pipes:[Z.X$],styles:[""]}),e})()},52384:function(e,t,s){"use strict";s.d(t,{R:function(){return b}});var i=s(4230),n=s(65249),r=s(60611),a=s(84140),o=s(93215),l=s(26019),c=s(68416),u=s(31572),p=s(57629),d=s(84608),h=s(59403),g=s(61511),m=s(15980),f=s(67806),I=s(77889),Z=s(48160);function A(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){return u.CHM(e),u.oxw().onAdd()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function S(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",function(){return u.CHM(e),u.oxw().onRemove()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",0===e.selection.selected.length),u.xp6(1),u.hij(" ",u.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function E(e,t){1&e&&u._UZ(0,"mat-spinner",8)}function T(e,t){if(1&e&&(u._UZ(0,"app-users-list",9),u.ALo(1,"translate")),2&e){const e=u.oxw();u.Q6J("tableId",e.tableId)("noUsersFoundLabel",u.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("users",e.identities)("selection",e.selection)("routeToAdmin",e.routeToAdminSection)("displayedColumns",e.displayedColumns)}}let b=(()=>{class e{constructor(e,t,s,n,a,o){this.route=e,this.dialog=t,this.router=s,this.userManager=n,this.authResolver=a,this.store=o,this.loading=!1,this.selection=new i.Ov(!1,[]),this.identities=[],this.tableId=r.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userId=e.userId,void 0===this.userId&&(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(e=>{this.identities=e,this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){const e=(0,a.kZ)();e.width="1250px",e.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(o.l,e).afterClosed().subscribe(e=>{e&&this.refreshTable()})}onRemove(){const e=(0,a.kZ)();e.width="650px",e.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(l.B,e).afterClosed().subscribe(e=>{e&&this.refreshTable()})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(p.gz),u.Y36(d.uw),u.Y36(p.F0),u.Y36(n.Fv),u.Y36(c.x4),u.Y36(c.d6))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-settings-service-identities"]],decls:8,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","class","mr-2 action-button","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","class","mr-2","color","warn",3,"disabled","click",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","noUsersFoundLabel","users","selection","routeToAdmin","displayedColumns",4,"ngIf"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"tableId","noUsersFoundLabel","users","selection","routeToAdmin","displayedColumns"]],template:function(e,t){1&e&&(u.TgZ(0,"h1",0),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"perun-web-apps-refresh-button",1),u.NdJ("refresh",function(){return t.refreshTable()}),u.qZA(),u.YNc(4,A,3,3,"button",2),u.YNc(5,S,3,4,"button",3),u.YNc(6,E,1,0,"mat-spinner",4),u.YNc(7,T,2,8,"app-users-list",5)),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),u.xp6(3),u.Q6J("ngIf",t.addIdentity),u.xp6(1),u.Q6J("ngIf",t.removeIdentity),u.xp6(1),u.Q6J("ngIf",t.loading),u.xp6(1),u.Q6J("ngIf",!t.loading))},directives:[h.t,g.O5,m.lW,f.$g,I.C],pipes:[Z.X$],styles:[""]}),e})()},65515:function(e,t,s){"use strict";s.r(t),s.d(t,{UsersModule:function(){return Ue}});var i=s(61511),n=s(57629),r=s(15879),a=s(31612),o=s(31572),l=s(21575);let c=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&o.ekj("router-component",t.true)},decls:1,vars:0,template:function(e,t){1&e&&o._UZ(0,"app-animated-router-outlet")},directives:[l.A],styles:[""]}),e})();var u=s(65249),p=s(67806),d=s(8557);function h(e,t){1&e&&o._UZ(0,"mat-spinner",2)}function g(e,t){if(1&e&&(o.TgZ(0,"div"),o._UZ(1,"perun-web-apps-menu-buttons-field",3),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("items",e.navItems)("size","small")}}let m=(()=>{class e{constructor(e,t){this.route=e,this.userManager=t,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(e=>{this.userManager.getUserById(e.userId).subscribe(e=>{this.isServiceUser=e.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings2",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.gz),o.Y36(u.Fv))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&o.ekj("router-component",t.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(o.YNc(0,h,1,0,"mat-spinner",0),o.YNc(1,g,2,2,"div",1)),2&e&&(o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngIf",!t.loading))},directives:[i.O5,p.$g,d.L],styles:[""]}),e})();var f=s(95690),I=s(41939),Z=s(84140),A=s(13857),S=s(66283),E=s(4786),T=s(71522),b=s(48160);function v(e,t){if(1&e&&(o.TgZ(0,"mat-option",5),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}let N=(()=>{class e{constructor(e){this.guiConfigService=e,this.tablePageSizeOptions=Z.f7}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(A.Rc)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(A.Rc,this.preferredTablePageSize)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(A.Ng))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(o.TgZ(0,"h1",0),o._uU(1),o.ALo(2,"translate"),o.qZA(),o.TgZ(3,"div",1),o.TgZ(4,"mat-form-field",2),o.TgZ(5,"mat-label"),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"mat-select",3),o.NdJ("valueChange",function(e){return t.preferredTablePageSize=e})("valueChange",function(){return t.updatePreferredTablePageSize()}),o.YNc(9,v,2,2,"mat-option",4),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),o.xp6(5),o.Oqu(o.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),o.xp6(2),o.Q6J("value",t.preferredTablePageSize),o.xp6(1),o.Q6J("ngForOf",t.tablePageSizeOptions))},directives:[S.KE,S.hX,E.gD,i.sg,T.ey],pipes:[b.X$],styles:[""]}),e})();var R=s(71956),U=s(68416),x=s(48958),_=s(66297),O=s(43691),C=s(36922),L=s(22196);const D=function(){return{color:"black"}},q=function(){return["/myProfile"]};function w(e,t){if(1&e&&(o.TgZ(0,"div",1),o._UZ(1,"perun-web-apps-back-button"),o.TgZ(2,"div",2),o._UZ(3,"mat-icon",3),o.ALo(4,"translate"),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"a",6),o._uU(8),o.ALo(9,"userFullName"),o.qZA(),o.TgZ(10,"span",7),o._uU(11),o.qZA(),o.qZA(),o.TgZ(12,"span",8),o._uU(13),o.ALo(14,"translate"),o.ALo(15,"translate"),o.qZA(),o.qZA(),o.qZA(),o._UZ(16,"app-animated-router-outlet"),o.qZA()),2&e){const e=o.oxw();o.xp6(3),o.s9C("matTooltip",o.lcZ(4,8,"MENU_ITEMS.USER.ENTITY")),o.Q6J("ngStyle",o.DdM(16,D)),o.xp6(4),o.Q6J("routerLink",o.DdM(17,q)),o.xp6(1),o.hij(" ",o.lcZ(9,10,e.user)," "),o.xp6(3),o.hij(" \xa0#",e.user.id," "),o.xp6(2),o.lnq(" ",o.lcZ(14,12,"MENU_ITEMS.USER.ENTITY"),", ",o.lcZ(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",e.getUserType()," ")}}let Y=(()=>{class e{constructor(e,t,s){this.sideMenuService=e,this.store=t,this.router=s}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(()=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(x.D),o.Y36(U.d6),o.Y36(n.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(e,t){1&e&&o.YNc(0,w,17,18,"div",0),2&e&&o.Q6J("ngIf",void 0!==t.user)},directives:[i.O5,_.W,O.Hw,C.gM,i.PC,n.yS,l.A],pipes:[b.X$,L.d],styles:[""]}),e})();var y=s(7233),M=s(52384),J=s(75585),Q=s(2898),F=s(84608),P=s(15980);function V(e,t){1&e&&o._UZ(0,"mat-spinner",11)}function G(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).editUser()}),o.TgZ(1,"mat-icon"),o._uU(2,"edit"),o.qZA(),o.qZA()}}const k=function(){return{color:"black"}},B=function(e){return["/myProfile/service-identities",e]};function j(e,t){if(1&e&&(o.TgZ(0,"div",1),o._UZ(1,"perun-web-apps-back-button"),o.YNc(2,V,1,0,"mat-spinner",2),o.TgZ(3,"div",3),o._UZ(4,"mat-icon",4),o.ALo(5,"translate"),o.TgZ(6,"div",5),o.TgZ(7,"div",6),o.TgZ(8,"a",7),o._uU(9),o.ALo(10,"userFullName"),o.qZA(),o.TgZ(11,"span",8),o._uU(12),o.qZA(),o.YNc(13,G,3,0,"button",9),o.qZA(),o.TgZ(14,"div"),o._uU(15),o.ALo(16,"translate"),o.qZA(),o.TgZ(17,"span",10),o._uU(18),o.ALo(19,"translate"),o.ALo(20,"translate"),o.qZA(),o.qZA(),o.qZA(),o._UZ(21,"app-animated-router-outlet"),o.qZA()),2&e){const e=o.oxw();o.xp6(2),o.Q6J("ngIf",e.loading),o.xp6(2),o.s9C("matTooltip",o.lcZ(5,12,"MENU_ITEMS.USER.ENTITY")),o.Q6J("ngStyle",o.DdM(22,k)),o.xp6(4),o.Q6J("routerLink",o.VKq(23,B,e.user.id)),o.xp6(1),o.hij(" ",o.lcZ(10,14,e.user)," "),o.xp6(3),o.hij(" \xa0#",e.user.id," "),o.xp6(1),o.Q6J("ngIf",e.authResolver.isPerunAdmin()),o.xp6(2),o.AsE(" ",o.lcZ(16,16,"ADMIN_USER.UUID"),": ",e.user.uuid," "),o.xp6(3),o.lnq(" ",o.lcZ(19,18,"MENU_ITEMS.USER.ENTITY"),", ",o.lcZ(20,20,"MENU_ITEMS.USER.USER_TYPE"),": ",e.getUserType()," ")}}let H=(()=>{class e{constructor(e,t,s,i,n,r,a){this.sideMenuService=e,this.usersService=t,this.sideMenuItemService=s,this.route=i,this.dialog=n,this.authResolver=r,this.entityStorageService=a,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{const t=e.userId;this.entityStorageService.setEntity({id:Number(t),beanName:"User"}),this.usersService.getUserById(t).subscribe(e=>{this.user=e;const t=this.sideMenuItemService.parseServiceIdentity(e);this.sideMenuService.setUserItems([t]),this.loading=!1},()=>this.loading=!1)})}getUserType(){return this.user.serviceUser?"Service":"Person"}editUser(){const e=(0,Z.kZ)();e.width="450px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(Q.x,e).afterClosed().subscribe(e=>{e&&this.usersService.getUserById(this.user.id).subscribe(e=>{this.user=e})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(x.D),o.Y36(u.Fv),o.Y36(J.V),o.Y36(n.gz),o.Y36(F.uw),o.Y36(U.x4),o.Y36(U.fb))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"mr-auto","ml-auto"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&o.YNc(0,j,22,25,"div",0),2&e&&o.Q6J("ngIf",void 0!==t.user)},directives:[i.O5,_.W,O.Hw,C.gM,i.PC,n.yS,l.A,p.$g,P.lW],pipes:[b.X$,L.d],styles:[""]}),e})(),z=(()=>{class e{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-user",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-service-identity-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&o._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&o.Q6J("items",t.navItems)("size","small")},directives:[d.L],styles:[""]}),e})();var W=s(2043);const X=[{path:"",component:Y,children:[{path:"",component:R.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:f.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:r.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:a.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:y.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:M.R,data:{animation:"UserServiceIdentities"}},{path:"settings",component:c,children:[{path:"",component:m,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:I.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:N,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:H,children:[{path:"",component:z},{path:"associated-users",component:W.d}]}];let $=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.Bz.forChild(X)],n.Bz]}),e})();var K=s(40084),ee=s(80340),te=s(16073),se=s(25122),ie=s(45001),ne=s(58623),re=s(67033),ae=s(55109),oe=s(91010),le=s(29236),ce=s(71403),ue=s(45994),pe=s(27521),de=s(15812),he=s(54810),ge=s(27679),me=s(73005),fe=s(27439),Ie=s(70663),Ze=s(88975),Ae=s(10033),Se=s(8055),Ee=s(4253),Te=s(22727),be=s(41050),ve=s(7423),Ne=s(22280),Re=s(28780);let Ue=(()=>{class e{constructor(e){this.translate=e,e.addLangs(["en","cs"])}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(b.sK))},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,$,K.Bb,ee.c,S.lN,te.UX,te.u5,O.Ps,se.SJ,ie.To,b.aw.forChild({}),P.ot,ne.JX,re.p0,ae.Nh,oe.dp,P.ot,le.p9,F.Is,E.LD,ce.ZX,p.Cq,ue.Cv,C.AV,pe.rP,de.FA,T.XK,he.Fk,ge.t,T.si,me.TU,fe.QW,Ie.T5,Ze._t,fe.QW,Ae.Hi,Se.Tx,Ee.Cl,Te.r,be.g,I.ez,ve.r,Ne.d4,Re.m]]}),e})()}}]);