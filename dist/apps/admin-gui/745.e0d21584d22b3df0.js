(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[745],{89397:function(w,D){!function(s){"use strict";function c(Y,nt){return nt.forEach(function(rt){rt&&"string"!=typeof rt&&!Array.isArray(rt)&&Object.keys(rt).forEach(function(q){if("default"!==q&&!(q in Y)){var F=Object.getOwnPropertyDescriptor(rt,q);Object.defineProperty(Y,q,F.get?F:{enumerable:!0,get:function(){return rt[q]}})}})}),Object.freeze(Y)}var q,rt,x={exports:{}};q=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,rt=function(F){var ut,ft,E=typeof(F=F||{})<"u"?F:{};E.ready=new Promise(function(b,k){ut=b,ft=k});var St,Dt={};for(St in E)E.hasOwnProperty(St)&&(Dt[St]=E[St]);var Nt,zt,Qt="./this.program",wt="";typeof document<"u"&&document.currentScript&&(wt=document.currentScript.src),q&&(wt=q),wt=0!==wt.indexOf("blob:")?wt.substr(0,wt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Nt=function(b){var k=new XMLHttpRequest;return k.open("GET",b,!1),k.send(null),k.responseText},zt=function(b,k,V){var it=new XMLHttpRequest;it.open("GET",b,!0),it.responseType="arraybuffer",it.onload=function(){200==it.status||0==it.status&&it.response?k(it.response):V()},it.onerror=V,it.send(null)};var te,ie=E.print||console.log.bind(console),Mt=E.printErr||console.warn.bind(console);for(St in Dt)Dt.hasOwnProperty(St)&&(E[St]=Dt[St]);Dt=null,E.thisProgram&&(Qt=E.thisProgram),E.wasmBinary&&(te=E.wasmBinary),"object"!=typeof WebAssembly&&_i("no native wasm support detected");var jt,ae=!1;function At(b,k){b||_i("Assertion failed: "+k)}var Ue,Ve,en,be,sn,Ht=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Zt(b,k,V){for(var it=k+V,ht=k;b[ht]&&!(ht>=it);)++ht;if(ht-k>16&&b.subarray&&Ht)return Ht.decode(b.subarray(k,ht));for(var xt="";k<ht;){var Ot=b[k++];if(128&Ot){var Rt=63&b[k++];if(192!=(224&Ot)){var oe=63&b[k++];if((Ot=224==(240&Ot)?(15&Ot)<<12|Rt<<6|oe:(7&Ot)<<18|Rt<<12|oe<<6|63&b[k++])<65536)xt+=String.fromCharCode(Ot);else{var Ae=Ot-65536;xt+=String.fromCharCode(55296|Ae>>10,56320|1023&Ae)}}else xt+=String.fromCharCode((31&Ot)<<6|Rt)}else xt+=String.fromCharCode(Ot)}return xt}function Kt(b,k){return b?Zt(en,b,k):""}function xe(b,k,V,it){if(!(it>0))return 0;for(var ht=V,xt=V+it-1,Ot=0;Ot<b.length;++Ot){var Rt=b.charCodeAt(Ot);if(Rt>=55296&&Rt<=57343&&(Rt=65536+((1023&Rt)<<10)|1023&b.charCodeAt(++Ot)),Rt<=127){if(V>=xt)break;k[V++]=Rt}else if(Rt<=2047){if(V+1>=xt)break;k[V++]=192|Rt>>6,k[V++]=128|63&Rt}else if(Rt<=65535){if(V+2>=xt)break;k[V++]=224|Rt>>12,k[V++]=128|Rt>>6&63,k[V++]=128|63&Rt}else{if(V+3>=xt)break;k[V++]=240|Rt>>18,k[V++]=128|Rt>>12&63,k[V++]=128|Rt>>6&63,k[V++]=128|63&Rt}}return k[V]=0,V-ht}function Le(b){for(var k=0,V=0;V<b.length;++V){var it=b.charCodeAt(V);it>=55296&&it<=57343&&(it=65536+((1023&it)<<10)|1023&b.charCodeAt(++V)),it<=127?++k:k+=it<=2047?2:it<=65535?3:4}return k}function Ee(b,k){return b%k>0&&(b+=k-b%k),b}function Tt(b){Ue=b,E.HEAP8=Ve=new Int8Array(b),E.HEAP16=new Int16Array(b),E.HEAP32=be=new Int32Array(b),E.HEAPU8=en=new Uint8Array(b),E.HEAPU16=new Uint16Array(b),E.HEAPU32=new Uint32Array(b),E.HEAPF32=new Float32Array(b),E.HEAPF64=sn=new Float64Array(b)}var Wt,ce=[],_e=[],ee=[];var gi=0,Si=null;function Ri(b){gi++,E.monitorRunDependencies&&E.monitorRunDependencies(gi)}function Ni(b){if(gi--,E.monitorRunDependencies&&E.monitorRunDependencies(gi),0==gi&&Si){var k=Si;Si=null,k()}}function _i(b){E.onAbort&&E.onAbort(b),Mt(b="Aborted("+b+")"),ae=!0,b+=". Build with -s ASSERTIONS=1 for more info.";var k=new WebAssembly.RuntimeError(b);throw ft(k),k}E.preloadedImages={},E.preloadedAudios={};var fe;function Bi(b){return b.startsWith("data:application/octet-stream;base64,")}function En(b){try{if(b==fe&&te)return new Uint8Array(te);throw"both async and sync fetching of the wasm failed"}catch(k){_i(k)}}Bi(fe="expatlib.wasm")||(fe=function yt(b){return E.locateFile?E.locateFile(b,wt):wt+b}(fe));var mn,nn,Wn={11694:function(b){var k=E.getCache(E.CExpatJS)[b];if(!k.hasOwnProperty("startElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::startElement.";k.startElement()},11912:function(b){var k=E.getCache(E.CExpatJS)[b];if(!k.hasOwnProperty("endElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::endElement.";k.endElement()},12124:function(b){var k=E.getCache(E.CExpatJS)[b];if(!k.hasOwnProperty("characterData"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::characterData.";k.characterData()}};function li(b){for(;b.length>0;){var k=b.shift();if("function"!=typeof k){var V=k.func;"number"==typeof V?void 0===k.arg?kn(V)():kn(V)(k.arg):V(void 0===k.arg?null:k.arg)}else k(E)}}function kn(b){return Wt.get(b)}var we={splitPath:function(b){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(b).slice(1)},normalizeArray:function(b,k){for(var V=0,it=b.length-1;it>=0;it--){var ht=b[it];"."===ht?b.splice(it,1):".."===ht?(b.splice(it,1),V++):V&&(b.splice(it,1),V--)}if(k)for(;V;V--)b.unshift("..");return b},normalize:function(b){var k="/"===b.charAt(0),V="/"===b.substr(-1);return!(b=we.normalizeArray(b.split("/").filter(function(it){return!!it}),!k).join("/"))&&!k&&(b="."),b&&V&&(b+="/"),(k?"/":"")+b},dirname:function(b){var k=we.splitPath(b),V=k[0],it=k[1];return V||it?(it&&(it=it.substr(0,it.length-1)),V+it):"."},basename:function(b){if("/"===b)return"/";var k=(b=(b=we.normalize(b)).replace(/\/$/,"")).lastIndexOf("/");return-1===k?b:b.substr(k+1)},extname:function(b){return we.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return we.normalize(b.join("/"))},join2:function(b,k){return we.normalize(b+"/"+k)}};var Fn={resolve:function(){for(var b="",k=!1,V=arguments.length-1;V>=-1&&!k;V--){var it=V>=0?arguments[V]:A.cwd();if("string"!=typeof it)throw new TypeError("Arguments to path.resolve must be strings");if(!it)return"";b=it+"/"+b,k="/"===it.charAt(0)}return(k?"/":"")+(b=we.normalizeArray(b.split("/").filter(function(ht){return!!ht}),!k).join("/"))||"."},relative:function(b,k){function V(Ae){for(var $e=0;$e<Ae.length&&""===Ae[$e];$e++);for(var rn=Ae.length-1;rn>=0&&""===Ae[rn];rn--);return $e>rn?[]:Ae.slice($e,rn-$e+1)}b=Fn.resolve(b).substr(1),k=Fn.resolve(k).substr(1);for(var it=V(b.split("/")),ht=V(k.split("/")),xt=Math.min(it.length,ht.length),Ot=xt,Rt=0;Rt<xt;Rt++)if(it[Rt]!==ht[Rt]){Ot=Rt;break}var oe=[];for(Rt=Ot;Rt<it.length;Rt++)oe.push("..");return(oe=oe.concat(ht.slice(Ot))).join("/")}},dn={ttys:[],init:function(){},shutdown:function(){},register:function(b,k){dn.ttys[b]={input:[],output:[],ops:k},A.registerDevice(b,dn.stream_ops)},stream_ops:{open:function(b){var k=dn.ttys[b.node.rdev];if(!k)throw new A.ErrnoError(43);b.tty=k,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,k,V,it,ht){if(!b.tty||!b.tty.ops.get_char)throw new A.ErrnoError(60);for(var xt=0,Ot=0;Ot<it;Ot++){var Rt;try{Rt=b.tty.ops.get_char(b.tty)}catch{throw new A.ErrnoError(29)}if(void 0===Rt&&0===xt)throw new A.ErrnoError(6);if(null==Rt)break;xt++,k[V+Ot]=Rt}return xt&&(b.node.timestamp=Date.now()),xt},write:function(b,k,V,it,ht){if(!b.tty||!b.tty.ops.put_char)throw new A.ErrnoError(60);try{for(var xt=0;xt<it;xt++)b.tty.ops.put_char(b.tty,k[V+xt])}catch{throw new A.ErrnoError(29)}return it&&(b.node.timestamp=Date.now()),xt}},default_tty_ops:{get_char:function(b){if(!b.input.length){var k=null;if(typeof window<"u"&&"function"==typeof window.prompt?null!==(k=window.prompt("Input: "))&&(k+="\n"):"function"==typeof readline&&null!==(k=readline())&&(k+="\n"),!k)return null;b.input=me(k,!0)}return b.input.shift()},put_char:function(b,k){null===k||10===k?(ie(Zt(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(ie(Zt(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,k){null===k||10===k?(Mt(Zt(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(Mt(Zt(b.output,0)),b.output=[])}}};var X={ops_table:null,mount:function(b){return X.createNode(null,"/",16895,0)},createNode:function(b,k,V,it){if(A.isBlkdev(V)||A.isFIFO(V))throw new A.ErrnoError(63);X.ops_table||(X.ops_table={dir:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr,lookup:X.node_ops.lookup,mknod:X.node_ops.mknod,rename:X.node_ops.rename,unlink:X.node_ops.unlink,rmdir:X.node_ops.rmdir,readdir:X.node_ops.readdir,symlink:X.node_ops.symlink},stream:{llseek:X.stream_ops.llseek}},file:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr},stream:{llseek:X.stream_ops.llseek,read:X.stream_ops.read,write:X.stream_ops.write,allocate:X.stream_ops.allocate,mmap:X.stream_ops.mmap,msync:X.stream_ops.msync}},link:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr,readlink:X.node_ops.readlink},stream:{}},chrdev:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr},stream:A.chrdev_stream_ops}});var ht=A.createNode(b,k,V,it);return A.isDir(ht.mode)?(ht.node_ops=X.ops_table.dir.node,ht.stream_ops=X.ops_table.dir.stream,ht.contents={}):A.isFile(ht.mode)?(ht.node_ops=X.ops_table.file.node,ht.stream_ops=X.ops_table.file.stream,ht.usedBytes=0,ht.contents=null):A.isLink(ht.mode)?(ht.node_ops=X.ops_table.link.node,ht.stream_ops=X.ops_table.link.stream):A.isChrdev(ht.mode)&&(ht.node_ops=X.ops_table.chrdev.node,ht.stream_ops=X.ops_table.chrdev.stream),ht.timestamp=Date.now(),b&&(b.contents[k]=ht,b.timestamp=ht.timestamp),ht},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage:function(b,k){var V=b.contents?b.contents.length:0;if(!(V>=k)){k=Math.max(k,V*(V<1048576?2:1.125)>>>0),0!=V&&(k=Math.max(k,256));var ht=b.contents;b.contents=new Uint8Array(k),b.usedBytes>0&&b.contents.set(ht.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,k){if(b.usedBytes!=k)if(0==k)b.contents=null,b.usedBytes=0;else{var V=b.contents;b.contents=new Uint8Array(k),V&&b.contents.set(V.subarray(0,Math.min(k,b.usedBytes))),b.usedBytes=k}},node_ops:{getattr:function(b){var k={};return k.dev=A.isChrdev(b.mode)?b.id:1,k.ino=b.id,k.mode=b.mode,k.nlink=1,k.uid=0,k.gid=0,k.rdev=b.rdev,k.size=A.isDir(b.mode)?4096:A.isFile(b.mode)?b.usedBytes:A.isLink(b.mode)?b.link.length:0,k.atime=new Date(b.timestamp),k.mtime=new Date(b.timestamp),k.ctime=new Date(b.timestamp),k.blksize=4096,k.blocks=Math.ceil(k.size/k.blksize),k},setattr:function(b,k){void 0!==k.mode&&(b.mode=k.mode),void 0!==k.timestamp&&(b.timestamp=k.timestamp),void 0!==k.size&&X.resizeFileStorage(b,k.size)},lookup:function(b,k){throw A.genericErrors[44]},mknod:function(b,k,V,it){return X.createNode(b,k,V,it)},rename:function(b,k,V){if(A.isDir(b.mode)){var it;try{it=A.lookupNode(k,V)}catch{}if(it)for(var ht in it.contents)throw new A.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=V,k.contents[V]=b,k.timestamp=b.parent.timestamp,b.parent=k},unlink:function(b,k){delete b.contents[k],b.timestamp=Date.now()},rmdir:function(b,k){var V=A.lookupNode(b,k);for(var it in V.contents)throw new A.ErrnoError(55);delete b.contents[k],b.timestamp=Date.now()},readdir:function(b){var k=[".",".."];for(var V in b.contents)!b.contents.hasOwnProperty(V)||k.push(V);return k},symlink:function(b,k,V){var it=X.createNode(b,k,41471,0);return it.link=V,it},readlink:function(b){if(!A.isLink(b.mode))throw new A.ErrnoError(28);return b.link}},stream_ops:{read:function(b,k,V,it,ht){var xt=b.node.contents;if(ht>=b.node.usedBytes)return 0;var Ot=Math.min(b.node.usedBytes-ht,it);if(Ot>8&&xt.subarray)k.set(xt.subarray(ht,ht+Ot),V);else for(var Rt=0;Rt<Ot;Rt++)k[V+Rt]=xt[ht+Rt];return Ot},write:function(b,k,V,it,ht,xt){if(k.buffer===Ve.buffer&&(xt=!1),!it)return 0;var Ot=b.node;if(Ot.timestamp=Date.now(),k.subarray&&(!Ot.contents||Ot.contents.subarray)){if(xt)return Ot.contents=k.subarray(V,V+it),Ot.usedBytes=it,it;if(0===Ot.usedBytes&&0===ht)return Ot.contents=k.slice(V,V+it),Ot.usedBytes=it,it;if(ht+it<=Ot.usedBytes)return Ot.contents.set(k.subarray(V,V+it),ht),it}if(X.expandFileStorage(Ot,ht+it),Ot.contents.subarray&&k.subarray)Ot.contents.set(k.subarray(V,V+it),ht);else for(var Rt=0;Rt<it;Rt++)Ot.contents[ht+Rt]=k[V+Rt];return Ot.usedBytes=Math.max(Ot.usedBytes,ht+it),it},llseek:function(b,k,V){var it=k;if(1===V?it+=b.position:2===V&&A.isFile(b.node.mode)&&(it+=b.node.usedBytes),it<0)throw new A.ErrnoError(28);return it},allocate:function(b,k,V){X.expandFileStorage(b.node,k+V),b.node.usedBytes=Math.max(b.node.usedBytes,k+V)},mmap:function(b,k,V,it,ht,xt){if(0!==k)throw new A.ErrnoError(28);if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);var Ot,Rt,oe=b.node.contents;if(2&xt||oe.buffer!==Ue){if((it>0||it+V<oe.length)&&(oe=oe.subarray?oe.subarray(it,it+V):Array.prototype.slice.call(oe,it,it+V)),Rt=!0,!(Ot=function z(b){_i()}()))throw new A.ErrnoError(48);Ve.set(oe,Ot)}else Rt=!1,Ot=oe.byteOffset;return{ptr:Ot,allocated:Rt}},msync:function(b,k,V,it,ht){if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);return 2&ht||X.stream_ops.write(b,k,0,it,V,!1),0}}};var A={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(b,k){if(k=k||{},!(b=Fn.resolve(A.cwd(),b)))return{path:"",node:null};var V={follow_mount:!0,recurse_count:0};for(var it in V)void 0===k[it]&&(k[it]=V[it]);if(k.recurse_count>8)throw new A.ErrnoError(32);for(var ht=we.normalizeArray(b.split("/").filter(function(ke){return!!ke}),!1),xt=A.root,Ot="/",Rt=0;Rt<ht.length;Rt++){var oe=Rt===ht.length-1;if(oe&&k.parent)break;if(xt=A.lookupNode(xt,ht[Rt]),Ot=we.join2(Ot,ht[Rt]),A.isMountpoint(xt)&&(!oe||oe&&k.follow_mount)&&(xt=xt.mounted.root),!oe||k.follow)for(var Ae=0;A.isLink(xt.mode);){var $e=A.readlink(Ot);if(Ot=Fn.resolve(we.dirname(Ot),$e),xt=A.lookupPath(Ot,{recurse_count:k.recurse_count}).node,Ae++>40)throw new A.ErrnoError(32)}}return{path:Ot,node:xt}},getPath:function(b){for(var k;;){if(A.isRoot(b)){var V=b.mount.mountpoint;return k?"/"!==V[V.length-1]?V+"/"+k:V+k:V}k=k?b.name+"/"+k:b.name,b=b.parent}},hashName:function(b,k){for(var V=0,it=0;it<k.length;it++)V=(V<<5)-V+k.charCodeAt(it)|0;return(b+V>>>0)%A.nameTable.length},hashAddNode:function(b){var k=A.hashName(b.parent.id,b.name);b.name_next=A.nameTable[k],A.nameTable[k]=b},hashRemoveNode:function(b){var k=A.hashName(b.parent.id,b.name);if(A.nameTable[k]===b)A.nameTable[k]=b.name_next;else for(var V=A.nameTable[k];V;){if(V.name_next===b){V.name_next=b.name_next;break}V=V.name_next}},lookupNode:function(b,k){var V=A.mayLookup(b);if(V)throw new A.ErrnoError(V,b);for(var it=A.hashName(b.id,k),ht=A.nameTable[it];ht;ht=ht.name_next)if(ht.parent.id===b.id&&ht.name===k)return ht;return A.lookup(b,k)},createNode:function(b,k,V,it){var ht=new A.FSNode(b,k,V,it);return A.hashAddNode(ht),ht},destroyNode:function(b){A.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return 32768==(61440&b)},isDir:function(b){return 16384==(61440&b)},isLink:function(b){return 40960==(61440&b)},isChrdev:function(b){return 8192==(61440&b)},isBlkdev:function(b){return 24576==(61440&b)},isFIFO:function(b){return 4096==(61440&b)},isSocket:function(b){return 49152==(49152&b)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(b){var k=A.flagModes[b];if(typeof k>"u")throw new Error("Unknown file open mode: "+b);return k},flagsToPermissionString:function(b){var k=["r","w","rw"][3&b];return 512&b&&(k+="w"),k},nodePermissions:function(b,k){return A.ignorePermissions?0:k.includes("r")&&!(292&b.mode)||k.includes("w")&&!(146&b.mode)||k.includes("x")&&!(73&b.mode)?2:0},mayLookup:function(b){return A.nodePermissions(b,"x")||(b.node_ops.lookup?0:2)},mayCreate:function(b,k){try{return A.lookupNode(b,k),20}catch{}return A.nodePermissions(b,"wx")},mayDelete:function(b,k,V){var it;try{it=A.lookupNode(b,k)}catch(xt){return xt.errno}var ht=A.nodePermissions(b,"wx");if(ht)return ht;if(V){if(!A.isDir(it.mode))return 54;if(A.isRoot(it)||A.getPath(it)===A.cwd())return 10}else if(A.isDir(it.mode))return 31;return 0},mayOpen:function(b,k){return b?A.isLink(b.mode)?32:A.isDir(b.mode)&&("r"!==A.flagsToPermissionString(k)||512&k)?31:A.nodePermissions(b,A.flagsToPermissionString(k)):44},MAX_OPEN_FDS:4096,nextfd:function(b,k){k=k||A.MAX_OPEN_FDS;for(var V=b=b||0;V<=k;V++)if(!A.streams[V])return V;throw new A.ErrnoError(33)},getStream:function(b){return A.streams[b]},createStream:function(b,k,V){A.FSStream||(A.FSStream=function(){},A.FSStream.prototype={object:{get:function(){return this.node},set:function(Ot){this.node=Ot}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var it=new A.FSStream;for(var ht in b)it[ht]=b[ht];b=it;var xt=A.nextfd(k,V);return b.fd=xt,A.streams[xt]=b,b},closeStream:function(b){A.streams[b]=null},chrdev_stream_ops:{open:function(b){var k=A.getDevice(b.node.rdev);b.stream_ops=k.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new A.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return 255&b},makedev:function(b,k){return b<<8|k},registerDevice:function(b,k){A.devices[b]={stream_ops:k}},getDevice:function(b){return A.devices[b]},getMounts:function(b){for(var k=[],V=[b];V.length;){var it=V.pop();k.push(it),V.push.apply(V,it.mounts)}return k},syncfs:function(b,k){"function"==typeof b&&(k=b,b=!1),A.syncFSRequests++,A.syncFSRequests>1&&Mt("warning: "+A.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var V=A.getMounts(A.root.mount),it=0;function ht(Ot){return A.syncFSRequests--,k(Ot)}function xt(Ot){if(Ot)return xt.errored?void 0:(xt.errored=!0,ht(Ot));++it>=V.length&&ht(null)}V.forEach(function(Ot){if(!Ot.type.syncfs)return xt(null);Ot.type.syncfs(Ot,b,xt)})},mount:function(b,k,V){var xt,it="/"===V,ht=!V;if(it&&A.root)throw new A.ErrnoError(10);if(!it&&!ht){var Ot=A.lookupPath(V,{follow_mount:!1});if(V=Ot.path,A.isMountpoint(xt=Ot.node))throw new A.ErrnoError(10);if(!A.isDir(xt.mode))throw new A.ErrnoError(54)}var Rt={type:b,opts:k,mountpoint:V,mounts:[]},oe=b.mount(Rt);return oe.mount=Rt,Rt.root=oe,it?A.root=oe:xt&&(xt.mounted=Rt,xt.mount&&xt.mount.mounts.push(Rt)),oe},unmount:function(b){var k=A.lookupPath(b,{follow_mount:!1});if(!A.isMountpoint(k.node))throw new A.ErrnoError(28);var V=k.node,it=V.mounted,ht=A.getMounts(it);Object.keys(A.nameTable).forEach(function(Ot){for(var Rt=A.nameTable[Ot];Rt;){var oe=Rt.name_next;ht.includes(Rt.mount)&&A.destroyNode(Rt),Rt=oe}}),V.mounted=null;var xt=V.mount.mounts.indexOf(it);V.mount.mounts.splice(xt,1)},lookup:function(b,k){return b.node_ops.lookup(b,k)},mknod:function(b,k,V){var ht=A.lookupPath(b,{parent:!0}).node,xt=we.basename(b);if(!xt||"."===xt||".."===xt)throw new A.ErrnoError(28);var Ot=A.mayCreate(ht,xt);if(Ot)throw new A.ErrnoError(Ot);if(!ht.node_ops.mknod)throw new A.ErrnoError(63);return ht.node_ops.mknod(ht,xt,k,V)},create:function(b,k){return k=void 0!==k?k:438,k&=4095,A.mknod(b,k|=32768,0)},mkdir:function(b,k){return k=void 0!==k?k:511,k&=1023,A.mknod(b,k|=16384,0)},mkdirTree:function(b,k){for(var V=b.split("/"),it="",ht=0;ht<V.length;++ht)if(V[ht]){it+="/"+V[ht];try{A.mkdir(it,k)}catch(xt){if(20!=xt.errno)throw xt}}},mkdev:function(b,k,V){return typeof V>"u"&&(V=k,k=438),A.mknod(b,k|=8192,V)},symlink:function(b,k){if(!Fn.resolve(b))throw new A.ErrnoError(44);var it=A.lookupPath(k,{parent:!0}).node;if(!it)throw new A.ErrnoError(44);var ht=we.basename(k),xt=A.mayCreate(it,ht);if(xt)throw new A.ErrnoError(xt);if(!it.node_ops.symlink)throw new A.ErrnoError(63);return it.node_ops.symlink(it,ht,b)},rename:function(b,k){var Rt,oe,V=we.dirname(b),it=we.dirname(k),ht=we.basename(b),xt=we.basename(k);if(Rt=A.lookupPath(b,{parent:!0}).node,oe=A.lookupPath(k,{parent:!0}).node,!Rt||!oe)throw new A.ErrnoError(44);if(Rt.mount!==oe.mount)throw new A.ErrnoError(75);var rn,Ae=A.lookupNode(Rt,ht),$e=Fn.relative(b,it);if("."!==$e.charAt(0))throw new A.ErrnoError(28);if("."!==($e=Fn.relative(k,V)).charAt(0))throw new A.ErrnoError(55);try{rn=A.lookupNode(oe,xt)}catch{}if(Ae!==rn){var ke=A.isDir(Ae.mode),Me=A.mayDelete(Rt,ht,ke);if(Me)throw new A.ErrnoError(Me);if(Me=rn?A.mayDelete(oe,xt,ke):A.mayCreate(oe,xt))throw new A.ErrnoError(Me);if(!Rt.node_ops.rename)throw new A.ErrnoError(63);if(A.isMountpoint(Ae)||rn&&A.isMountpoint(rn))throw new A.ErrnoError(10);if(oe!==Rt&&(Me=A.nodePermissions(Rt,"w")))throw new A.ErrnoError(Me);A.hashRemoveNode(Ae);try{Rt.node_ops.rename(Ae,oe,xt)}catch(_n){throw _n}finally{A.hashAddNode(Ae)}}},rmdir:function(b){var V=A.lookupPath(b,{parent:!0}).node,it=we.basename(b),ht=A.lookupNode(V,it),xt=A.mayDelete(V,it,!0);if(xt)throw new A.ErrnoError(xt);if(!V.node_ops.rmdir)throw new A.ErrnoError(63);if(A.isMountpoint(ht))throw new A.ErrnoError(10);V.node_ops.rmdir(V,it),A.destroyNode(ht)},readdir:function(b){var V=A.lookupPath(b,{follow:!0}).node;if(!V.node_ops.readdir)throw new A.ErrnoError(54);return V.node_ops.readdir(V)},unlink:function(b){var V=A.lookupPath(b,{parent:!0}).node,it=we.basename(b),ht=A.lookupNode(V,it),xt=A.mayDelete(V,it,!1);if(xt)throw new A.ErrnoError(xt);if(!V.node_ops.unlink)throw new A.ErrnoError(63);if(A.isMountpoint(ht))throw new A.ErrnoError(10);V.node_ops.unlink(V,it),A.destroyNode(ht)},readlink:function(b){var V=A.lookupPath(b).node;if(!V)throw new A.ErrnoError(44);if(!V.node_ops.readlink)throw new A.ErrnoError(28);return Fn.resolve(A.getPath(V.parent),V.node_ops.readlink(V))},stat:function(b,k){var it=A.lookupPath(b,{follow:!k}).node;if(!it)throw new A.ErrnoError(44);if(!it.node_ops.getattr)throw new A.ErrnoError(63);return it.node_ops.getattr(it)},lstat:function(b){return A.stat(b,!0)},chmod:function(b,k,V){var it;if(!(it="string"==typeof b?A.lookupPath(b,{follow:!V}).node:b).node_ops.setattr)throw new A.ErrnoError(63);it.node_ops.setattr(it,{mode:4095&k|-4096&it.mode,timestamp:Date.now()})},lchmod:function(b,k){A.chmod(b,k,!0)},fchmod:function(b,k){var V=A.getStream(b);if(!V)throw new A.ErrnoError(8);A.chmod(V.node,k)},chown:function(b,k,V,it){var ht;if(!(ht="string"==typeof b?A.lookupPath(b,{follow:!it}).node:b).node_ops.setattr)throw new A.ErrnoError(63);ht.node_ops.setattr(ht,{timestamp:Date.now()})},lchown:function(b,k,V){A.chown(b,k,V,!0)},fchown:function(b,k,V){var it=A.getStream(b);if(!it)throw new A.ErrnoError(8);A.chown(it.node,k,V)},truncate:function(b,k){if(k<0)throw new A.ErrnoError(28);var V;if(!(V="string"==typeof b?A.lookupPath(b,{follow:!0}).node:b).node_ops.setattr)throw new A.ErrnoError(63);if(A.isDir(V.mode))throw new A.ErrnoError(31);if(!A.isFile(V.mode))throw new A.ErrnoError(28);var ht=A.nodePermissions(V,"w");if(ht)throw new A.ErrnoError(ht);V.node_ops.setattr(V,{size:k,timestamp:Date.now()})},ftruncate:function(b,k){var V=A.getStream(b);if(!V)throw new A.ErrnoError(8);if(0==(2097155&V.flags))throw new A.ErrnoError(28);A.truncate(V.node,k)},utime:function(b,k,V){var ht=A.lookupPath(b,{follow:!0}).node;ht.node_ops.setattr(ht,{timestamp:Math.max(k,V)})},open:function(b,k,V,it,ht){if(""===b)throw new A.ErrnoError(44);var xt;if(V=typeof V>"u"?438:V,V=64&(k="string"==typeof k?A.modeStringToFlags(k):k)?4095&V|32768:0,"object"==typeof b)xt=b;else{b=we.normalize(b);try{xt=A.lookupPath(b,{follow:!(131072&k)}).node}catch{}}var Rt=!1;if(64&k)if(xt){if(128&k)throw new A.ErrnoError(20)}else xt=A.mknod(b,V,0),Rt=!0;if(!xt)throw new A.ErrnoError(44);if(A.isChrdev(xt.mode)&&(k&=-513),65536&k&&!A.isDir(xt.mode))throw new A.ErrnoError(54);if(!Rt){var oe=A.mayOpen(xt,k);if(oe)throw new A.ErrnoError(oe)}512&k&&A.truncate(xt,0),k&=-131713;var Ae=A.createStream({node:xt,path:A.getPath(xt),id:xt.id,flags:k,mode:xt.mode,seekable:!0,position:0,stream_ops:xt.stream_ops,node_ops:xt.node_ops,ungotten:[],error:!1},it,ht);return Ae.stream_ops.open&&Ae.stream_ops.open(Ae),E.logReadFiles&&!(1&k)&&(A.readFiles||(A.readFiles={}),b in A.readFiles||(A.readFiles[b]=1)),Ae},close:function(b){if(A.isClosed(b))throw new A.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(k){throw k}finally{A.closeStream(b.fd)}b.fd=null},isClosed:function(b){return null===b.fd},llseek:function(b,k,V){if(A.isClosed(b))throw new A.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new A.ErrnoError(70);if(0!=V&&1!=V&&2!=V)throw new A.ErrnoError(28);return b.position=b.stream_ops.llseek(b,k,V),b.ungotten=[],b.position},read:function(b,k,V,it,ht){if(it<0||ht<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(1==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.read)throw new A.ErrnoError(28);var xt=typeof ht<"u";if(xt){if(!b.seekable)throw new A.ErrnoError(70)}else ht=b.position;var Ot=b.stream_ops.read(b,k,V,it,ht);return xt||(b.position+=Ot),Ot},write:function(b,k,V,it,ht,xt){if(it<0||ht<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.write)throw new A.ErrnoError(28);b.seekable&&1024&b.flags&&A.llseek(b,0,2);var Ot=typeof ht<"u";if(Ot){if(!b.seekable)throw new A.ErrnoError(70)}else ht=b.position;var Rt=b.stream_ops.write(b,k,V,it,ht,xt);return Ot||(b.position+=Rt),Rt},allocate:function(b,k,V){if(A.isClosed(b))throw new A.ErrnoError(8);if(k<0||V<=0)throw new A.ErrnoError(28);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(!A.isFile(b.node.mode)&&!A.isDir(b.node.mode))throw new A.ErrnoError(43);if(!b.stream_ops.allocate)throw new A.ErrnoError(138);b.stream_ops.allocate(b,k,V)},mmap:function(b,k,V,it,ht,xt){if(0!=(2&ht)&&0==(2&xt)&&2!=(2097155&b.flags))throw new A.ErrnoError(2);if(1==(2097155&b.flags))throw new A.ErrnoError(2);if(!b.stream_ops.mmap)throw new A.ErrnoError(43);return b.stream_ops.mmap(b,k,V,it,ht,xt)},msync:function(b,k,V,it,ht){return b&&b.stream_ops.msync?b.stream_ops.msync(b,k,V,it,ht):0},munmap:function(b){return 0},ioctl:function(b,k,V){if(!b.stream_ops.ioctl)throw new A.ErrnoError(59);return b.stream_ops.ioctl(b,k,V)},readFile:function(b,k){if((k=k||{}).flags=k.flags||0,k.encoding=k.encoding||"binary","utf8"!==k.encoding&&"binary"!==k.encoding)throw new Error('Invalid encoding type "'+k.encoding+'"');var V,it=A.open(b,k.flags),xt=A.stat(b).size,Ot=new Uint8Array(xt);return A.read(it,Ot,0,xt,0),"utf8"===k.encoding?V=Zt(Ot,0):"binary"===k.encoding&&(V=Ot),A.close(it),V},writeFile:function(b,k,V){(V=V||{}).flags=V.flags||577;var it=A.open(b,V.flags,V.mode);if("string"==typeof k){var ht=new Uint8Array(Le(k)+1),xt=xe(k,ht,0,ht.length);A.write(it,ht,0,xt,void 0,V.canOwn)}else{if(!ArrayBuffer.isView(k))throw new Error("Unsupported data type");A.write(it,k,0,k.byteLength,void 0,V.canOwn)}A.close(it)},cwd:function(){return A.currentPath},chdir:function(b){var k=A.lookupPath(b,{follow:!0});if(null===k.node)throw new A.ErrnoError(44);if(!A.isDir(k.node.mode))throw new A.ErrnoError(54);var V=A.nodePermissions(k.node,"x");if(V)throw new A.ErrnoError(V);A.currentPath=k.path},createDefaultDirectories:function(){A.mkdir("/tmp"),A.mkdir("/home"),A.mkdir("/home/web_user")},createDefaultDevices:function(){A.mkdir("/dev"),A.registerDevice(A.makedev(1,3),{read:function(){return 0},write:function(k,V,it,ht,xt){return ht}}),A.mkdev("/dev/null",A.makedev(1,3)),dn.register(A.makedev(5,0),dn.default_tty_ops),dn.register(A.makedev(6,0),dn.default_tty1_ops),A.mkdev("/dev/tty",A.makedev(5,0)),A.mkdev("/dev/tty1",A.makedev(6,0));var b=function Zi(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var b=new Uint8Array(1);return function(){return crypto.getRandomValues(b),b[0]}}return function(){_i("randomDevice")}}();A.createDevice("/dev","random",b),A.createDevice("/dev","urandom",b),A.mkdir("/dev/shm"),A.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){A.mkdir("/proc");var b=A.mkdir("/proc/self");A.mkdir("/proc/self/fd"),A.mount({mount:function(){var k=A.createNode(b,"fd",16895,73);return k.node_ops={lookup:function(V,it){var xt=A.getStream(+it);if(!xt)throw new A.ErrnoError(8);var Ot={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return xt.path}}};return Ot.parent=Ot,Ot}},k}},{},"/proc/self/fd")},createStandardStreams:function(){E.stdin?A.createDevice("/dev","stdin",E.stdin):A.symlink("/dev/tty","/dev/stdin"),E.stdout?A.createDevice("/dev","stdout",null,E.stdout):A.symlink("/dev/tty","/dev/stdout"),E.stderr?A.createDevice("/dev","stderr",null,E.stderr):A.symlink("/dev/tty1","/dev/stderr"),A.open("/dev/stdin",0),A.open("/dev/stdout",1),A.open("/dev/stderr",1)},ensureErrnoError:function(){A.ErrnoError||(A.ErrnoError=function(k,V){this.node=V,this.setErrno=function(it){this.errno=it},this.setErrno(k),this.message="FS error"},A.ErrnoError.prototype=new Error,A.ErrnoError.prototype.constructor=A.ErrnoError,[44].forEach(function(b){A.genericErrors[b]=new A.ErrnoError(b),A.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){A.ensureErrnoError(),A.nameTable=new Array(4096),A.mount(X,{},"/"),A.createDefaultDirectories(),A.createDefaultDevices(),A.createSpecialDirectories(),A.filesystems={MEMFS:X}},init:function(b,k,V){A.init.initialized=!0,A.ensureErrnoError(),E.stdin=b||E.stdin,E.stdout=k||E.stdout,E.stderr=V||E.stderr,A.createStandardStreams()},quit:function(){A.init.initialized=!1;var b=E._fflush;b&&b(0);for(var k=0;k<A.streams.length;k++){var V=A.streams[k];!V||A.close(V)}},getMode:function(b,k){var V=0;return b&&(V|=365),k&&(V|=146),V},findObject:function(b,k){var V=A.analyzePath(b,k);return V.exists?V.object:null},analyzePath:function(b,k){try{b=(V=A.lookupPath(b,{follow:!k})).path}catch{}var it={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var V=A.lookupPath(b,{parent:!0});it.parentExists=!0,it.parentPath=V.path,it.parentObject=V.node,it.name=we.basename(b),V=A.lookupPath(b,{follow:!k}),it.exists=!0,it.path=V.path,it.object=V.node,it.name=V.node.name,it.isRoot="/"===V.path}catch(ht){it.error=ht.errno}return it},createPath:function(b,k,V,it){b="string"==typeof b?b:A.getPath(b);for(var ht=k.split("/").reverse();ht.length;){var xt=ht.pop();if(xt){var Ot=we.join2(b,xt);try{A.mkdir(Ot)}catch{}b=Ot}}return Ot},createFile:function(b,k,V,it,ht){var xt=we.join2("string"==typeof b?b:A.getPath(b),k),Ot=A.getMode(it,ht);return A.create(xt,Ot)},createDataFile:function(b,k,V,it,ht,xt){var Ot=k?we.join2("string"==typeof b?b:A.getPath(b),k):b,Rt=A.getMode(it,ht),oe=A.create(Ot,Rt);if(V){if("string"==typeof V){for(var Ae=new Array(V.length),$e=0,rn=V.length;$e<rn;++$e)Ae[$e]=V.charCodeAt($e);V=Ae}A.chmod(oe,146|Rt);var ke=A.open(oe,577);A.write(ke,V,0,V.length,0,xt),A.close(ke),A.chmod(oe,Rt)}return oe},createDevice:function(b,k,V,it){var ht=we.join2("string"==typeof b?b:A.getPath(b),k),xt=A.getMode(!!V,!!it);A.createDevice.major||(A.createDevice.major=64);var Ot=A.makedev(A.createDevice.major++,0);return A.registerDevice(Ot,{open:function(Rt){Rt.seekable=!1},close:function(Rt){it&&it.buffer&&it.buffer.length&&it(10)},read:function(Rt,oe,Ae,$e,rn){for(var ke=0,Me=0;Me<$e;Me++){var _n;try{_n=V()}catch{throw new A.ErrnoError(29)}if(void 0===_n&&0===ke)throw new A.ErrnoError(6);if(null==_n)break;ke++,oe[Ae+Me]=_n}return ke&&(Rt.node.timestamp=Date.now()),ke},write:function(Rt,oe,Ae,$e,rn){for(var ke=0;ke<$e;ke++)try{it(oe[Ae+ke])}catch{throw new A.ErrnoError(29)}return $e&&(Rt.node.timestamp=Date.now()),ke}}),A.mkdev(ht,xt,Ot)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Nt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{b.contents=me(Nt(b.url),!0),b.usedBytes=b.contents.length}catch{throw new A.ErrnoError(29)}},createLazyFile:function(b,k,V,it,ht){function xt(){this.lengthKnown=!1,this.chunks=[]}if(xt.prototype.get=function(ke){if(!(ke>this.length-1||ke<0)){var Me=ke%this.chunkSize;return this.getter(ke/this.chunkSize|0)[Me]}},xt.prototype.setDataGetter=function(ke){this.getter=ke},xt.prototype.cacheLength=function(){var ke=new XMLHttpRequest;if(ke.open("HEAD",V,!1),ke.send(null),!(ke.status>=200&&ke.status<300||304===ke.status))throw new Error("Couldn't load "+V+". Status: "+ke.status);var _n,Me=Number(ke.getResponseHeader("Content-length")),Kn=(_n=ke.getResponseHeader("Accept-Ranges"))&&"bytes"===_n,er=(_n=ke.getResponseHeader("Content-Encoding"))&&"gzip"===_n,di=1048576;Kn||(di=Me);var Gn=this;Gn.setDataGetter(function(xi){var nr=xi*di,Pn=(xi+1)*di-1;if(Pn=Math.min(Pn,Me-1),typeof Gn.chunks[xi]>"u"&&(Gn.chunks[xi]=function(xi,nr){if(xi>nr)throw new Error("invalid range ("+xi+", "+nr+") or no bytes requested!");if(nr>Me-1)throw new Error("only "+Me+" bytes available! programmer error!");var Pn=new XMLHttpRequest;if(Pn.open("GET",V,!1),Me!==di&&Pn.setRequestHeader("Range","bytes="+xi+"-"+nr),typeof Uint8Array<"u"&&(Pn.responseType="arraybuffer"),Pn.overrideMimeType&&Pn.overrideMimeType("text/plain; charset=x-user-defined"),Pn.send(null),!(Pn.status>=200&&Pn.status<300||304===Pn.status))throw new Error("Couldn't load "+V+". Status: "+Pn.status);return void 0!==Pn.response?new Uint8Array(Pn.response||[]):me(Pn.responseText||"",!0)}(nr,Pn)),typeof Gn.chunks[xi]>"u")throw new Error("doXHR failed!");return Gn.chunks[xi]}),(er||!Me)&&(di=Me=1,Me=this.getter(0).length,di=Me,ie("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Me,this._chunkSize=di,this.lengthKnown=!0},typeof XMLHttpRequest<"u")throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Rt,oe=A.createFile(b,k,Rt={isDevice:!1,url:V},it,ht);Rt.contents?oe.contents=Rt.contents:Rt.url&&(oe.contents=null,oe.url=Rt.url),Object.defineProperties(oe,{usedBytes:{get:function(){return this.contents.length}}});var Ae={};return Object.keys(oe.stream_ops).forEach(function(rn){var ke=oe.stream_ops[rn];Ae[rn]=function(){return A.forceLoadFile(oe),ke.apply(null,arguments)}}),Ae.read=function(ke,Me,_n,Kn,er){A.forceLoadFile(oe);var di=ke.node.contents;if(er>=di.length)return 0;var Nn=Math.min(di.length-er,Kn);if(di.slice)for(var Gn=0;Gn<Nn;Gn++)Me[_n+Gn]=di[er+Gn];else for(Gn=0;Gn<Nn;Gn++)Me[_n+Gn]=di.get(er+Gn);return Nn},oe.stream_ops=Ae,oe},createPreloadedFile:function(b,k,V,it,ht,xt,Ot,Rt,oe,Ae){Browser.init();var $e=k?Fn.resolve(we.join2(b,k)):b;function rn(ke){function Me(Kn){Ae&&Ae(),Rt||A.createDataFile(b,k,Kn,it,ht,oe),xt&&xt(),Ni()}var _n=!1;E.preloadPlugins.forEach(function(Kn){_n||Kn.canHandle($e)&&(Kn.handle(ke,$e,Me,function(){Ot&&Ot(),Ni()}),_n=!0)}),_n||Me(ke)}Ri(),"string"==typeof V?function lt(b,k,V,it){var ht=it?"":"al "+b;zt(b,function(xt){At(xt,'Loading data file "'+b+'" failed (no arrayBuffer).'),k(new Uint8Array(xt)),ht&&Ni()},function(xt){if(!V)throw'Loading data file "'+b+'" failed.';V()}),ht&&Ri()}(V,function(ke){rn(ke)},Ot):rn(V)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,k,V){k=k||function(){},V=V||function(){};var it=A.indexedDB();try{var ht=it.open(A.DB_NAME(),A.DB_VERSION)}catch(xt){return V(xt)}ht.onupgradeneeded=function(){ie("creating db"),ht.result.createObjectStore(A.DB_STORE_NAME)},ht.onsuccess=function(){var Rt=ht.result.transaction([A.DB_STORE_NAME],"readwrite"),oe=Rt.objectStore(A.DB_STORE_NAME),Ae=0,$e=0,rn=b.length;function ke(){0==$e?k():V()}b.forEach(function(Me){var _n=oe.put(A.analyzePath(Me).object.contents,Me);_n.onsuccess=function(){++Ae+$e==rn&&ke()},_n.onerror=function(){$e++,Ae+$e==rn&&ke()}}),Rt.onerror=V},ht.onerror=V},loadFilesFromDB:function(b,k,V){k=k||function(){},V=V||function(){};var it=A.indexedDB();try{var ht=it.open(A.DB_NAME(),A.DB_VERSION)}catch(xt){return V(xt)}ht.onupgradeneeded=V,ht.onsuccess=function(){var Ot=ht.result;try{var Rt=Ot.transaction([A.DB_STORE_NAME],"readonly")}catch(Me){return void V(Me)}var oe=Rt.objectStore(A.DB_STORE_NAME),Ae=0,$e=0,rn=b.length;function ke(){0==$e?k():V()}b.forEach(function(Me){var _n=oe.get(Me);_n.onsuccess=function(){A.analyzePath(Me).exists&&A.unlink(Me),A.createDataFile(we.dirname(Me),we.basename(Me),_n.result,!0,!0,!0),++Ae+$e==rn&&ke()},_n.onerror=function(){$e++,Ae+$e==rn&&ke()}}),Rt.onerror=V},ht.onerror=V}},bt={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(b,k,V){if("/"===k[0])return k;var it;if(-100===b)it=A.cwd();else{var ht=A.getStream(b);if(!ht)throw new A.ErrnoError(8);it=ht.path}if(0==k.length){if(!V)throw new A.ErrnoError(44);return it}return we.join2(it,k)},doStat:function(b,k,V){try{var it=b(k)}catch(ht){if(ht&&ht.node&&we.normalize(k)!==we.normalize(A.getPath(ht.node)))return-54;throw ht}return be[V>>2]=it.dev,be[V+4>>2]=0,be[V+8>>2]=it.ino,be[V+12>>2]=it.mode,be[V+16>>2]=it.nlink,be[V+20>>2]=it.uid,be[V+24>>2]=it.gid,be[V+28>>2]=it.rdev,be[V+32>>2]=0,nn=[it.size>>>0,(mn=it.size,+Math.abs(mn)>=1?mn>0?(0|Math.min(+Math.floor(mn/4294967296),4294967295))>>>0:~~+Math.ceil((mn-+(~~mn>>>0))/4294967296)>>>0:0)],be[V+40>>2]=nn[0],be[V+44>>2]=nn[1],be[V+48>>2]=4096,be[V+52>>2]=it.blocks,be[V+56>>2]=it.atime.getTime()/1e3|0,be[V+60>>2]=0,be[V+64>>2]=it.mtime.getTime()/1e3|0,be[V+68>>2]=0,be[V+72>>2]=it.ctime.getTime()/1e3|0,be[V+76>>2]=0,nn=[it.ino>>>0,(mn=it.ino,+Math.abs(mn)>=1?mn>0?(0|Math.min(+Math.floor(mn/4294967296),4294967295))>>>0:~~+Math.ceil((mn-+(~~mn>>>0))/4294967296)>>>0:0)],be[V+80>>2]=nn[0],be[V+84>>2]=nn[1],0},doMsync:function(b,k,V,it,ht){var xt=en.slice(b,b+V);A.msync(k,xt,ht,V,it)},doMkdir:function(b,k){return"/"===(b=we.normalize(b))[b.length-1]&&(b=b.substr(0,b.length-1)),A.mkdir(b,k,0),0},doMknod:function(b,k,V){switch(61440&k){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return A.mknod(b,k,V),0},doReadlink:function(b,k,V){if(V<=0)return-28;var it=A.readlink(b),ht=Math.min(V,Le(it)),xt=Ve[k+ht];return function Te(b,k,V){return xe(b,en,k,V)}(it,k,V+1),Ve[k+ht]=xt,ht},doAccess:function(b,k){if(-8&k)return-28;var it=A.lookupPath(b,{follow:!0}).node;if(!it)return-44;var ht="";return 4&k&&(ht+="r"),2&k&&(ht+="w"),1&k&&(ht+="x"),ht&&A.nodePermissions(it,ht)?-2:0},doDup:function(b,k,V){var it=A.getStream(V);return it&&A.close(it),A.open(b,k,0,V,V).fd},doReadv:function(b,k,V,it){for(var ht=0,xt=0;xt<V;xt++){var Rt=be[k+(8*xt+4)>>2],oe=A.read(b,Ve,be[k+8*xt>>2],Rt,it);if(oe<0)return-1;if(ht+=oe,oe<Rt)break}return ht},doWritev:function(b,k,V,it){for(var ht=0,xt=0;xt<V;xt++){var oe=A.write(b,Ve,be[k+8*xt>>2],be[k+(8*xt+4)>>2],it);if(oe<0)return-1;ht+=oe}return ht},varargs:void 0,get:function(){return bt.varargs+=4,be[bt.varargs-4>>2]},getStr:function(b){return Kt(b)},getStreamFromFD:function(b){var k=A.getStream(b);if(!k)throw new A.ErrnoError(8);return k},get64:function(b,k){return b}};var Gt=[];function pt(b){try{return jt.grow(b-Ue.byteLength+65535>>>16),Tt(jt.buffer),1}catch{}}var gt={};function Xt(){if(!Xt.strings){var k={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Qt||"./this.program"};for(var V in gt)void 0===gt[V]?delete k[V]:k[V]=gt[V];var it=[];for(var V in k)it.push(V+"="+k[V]);Xt.strings=it}return Xt.strings}var Pe=function(b,k,V,it){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=A.nextInode++,this.name=k,this.mode=V,this.node_ops={},this.stream_ops={},this.rdev=it};function me(b,k,V){var it=V>0?V:Le(b)+1,ht=new Array(it),xt=xe(b,ht,0,ht.length);return k&&(ht.length=xt),ht}Object.defineProperties(Pe.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(b){b?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(b){b?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return A.isDir(this.mode)}},isDevice:{get:function(){return A.isChrdev(this.mode)}}}),A.FSNode=Pe,A.staticInit();var Fe={h:function Lt(b,k,V){bt.varargs=V;try{var it=bt.getStr(b),ht=V?bt.get():0;return A.open(it,k,ht).fd}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return-Ot.errno}},b:function Pt(){_i("")},a:function Yt(b,k,V){var it=function Jt(b,k){var V;for(Gt.length=0,k>>=2;V=en[b++];){var it=V<105;it&&1&k&&k++,Gt.push(it?sn[k++>>1]:be[k]),++k}return Gt}(k,V);return Wn[b].apply(null,it)},k:function Q(b,k,V){en.copyWithin(b,k,k+V)},e:function mt(b){var k=en.length,V=2147483648;if((b>>>=0)>V)return!1;for(var it=1;it<=4;it*=2){var ht=k*(1+.2/it);if(ht=Math.min(ht,b+100663296),pt(Math.min(V,Ee(Math.max(b,ht),65536))))return!0}return!1},f:function kt(b,k){var V=0;return Xt().forEach(function(it,ht){var xt=k+V;be[b+4*ht>>2]=xt,function Oe(b,k,V){for(var it=0;it<b.length;++it)Ve[k++>>0]=b.charCodeAt(it);V||(Ve[k>>0]=0)}(it,xt),V+=it.length+1}),0},g:function le(b,k){var V=Xt();be[b>>2]=V.length;var it=0;return V.forEach(function(ht){it+=ht.length+1}),be[k>>2]=it,0},d:function O(b){try{var k=bt.getStreamFromFD(b);return A.close(k),0}catch(V){if(typeof A>"u"||!(V instanceof A.ErrnoError))throw V;return V.errno}},i:function se(b,k,V,it){try{var ht=bt.getStreamFromFD(b),xt=bt.doReadv(ht,k,V);return be[it>>2]=xt,0}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},j:function Se(b,k,V,it,ht){try{var xt=bt.getStreamFromFD(b),Rt=4294967296*V+(k>>>0),oe=9007199254740992;return Rt<=-oe||Rt>=oe?-61:(A.llseek(xt,Rt,it),nn=[xt.position>>>0,(mn=xt.position,+Math.abs(mn)>=1?mn>0?(0|Math.min(+Math.floor(mn/4294967296),4294967295))>>>0:~~+Math.ceil((mn-+(~~mn>>>0))/4294967296)>>>0:0)],be[ht>>2]=nn[0],be[ht+4>>2]=nn[1],xt.getdents&&0===Rt&&0===it&&(xt.getdents=null),0)}catch(Ae){if(typeof A>"u"||!(Ae instanceof A.ErrnoError))throw Ae;return Ae.errno}},c:function Ce(b,k,V,it){try{var ht=bt.getStreamFromFD(b),xt=bt.doWritev(ht,k,V);return be[it>>2]=xt,0}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},l:function je(b){var k=Date.now();return be[b>>2]=k/1e3|0,be[b+4>>2]=k%1e3*1e3|0,0}};(function Mn(){var b={a:Fe};function k(Ot,Rt){E.asm=Ot.exports,Tt((jt=E.asm.m).buffer),Wt=E.asm.G,function Mi(b){_e.unshift(b)}(E.asm.n),Ni()}function V(Ot){k(Ot.instance)}function it(Ot){return function ji(){return te||"function"!=typeof fetch?Promise.resolve().then(function(){return En(fe)}):fetch(fe,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+fe+"'";return b.arrayBuffer()}).catch(function(){return En(fe)})}().then(function(Rt){return WebAssembly.instantiate(Rt,b)}).then(function(Rt){return Rt}).then(Ot,function(Rt){Mt("failed to asynchronously prepare wasm: "+Rt),_i(Rt)})}if(Ri(),E.instantiateWasm)try{return E.instantiateWasm(b,k)}catch(Ot){return Mt("Module.instantiateWasm callback failed with error: "+Ot),!1}return function ht(){return te||"function"!=typeof WebAssembly.instantiateStreaming||Bi(fe)||"function"!=typeof fetch?it(V):fetch(fe,{credentials:"same-origin"}).then(function(Ot){return WebAssembly.instantiateStreaming(Ot,b).then(V,function(oe){return Mt("wasm streaming compile failed: "+oe),Mt("falling back to ArrayBuffer instantiation"),it(V)})})}().catch(ft),{}})(),E.___wasm_call_ctors=function(){return(E.___wasm_call_ctors=E.asm.n).apply(null,arguments)};var Jn,pn=E._emscripten_bind_CExpat_CExpat_0=function(){return(pn=E._emscripten_bind_CExpat_CExpat_0=E.asm.o).apply(null,arguments)},ln=E._emscripten_bind_CExpat_version_0=function(){return(ln=E._emscripten_bind_CExpat_version_0=E.asm.p).apply(null,arguments)},Ye=E._emscripten_bind_CExpat_create_0=function(){return(Ye=E._emscripten_bind_CExpat_create_0=E.asm.q).apply(null,arguments)},We=E._emscripten_bind_CExpat_destroy_0=function(){return(We=E._emscripten_bind_CExpat_destroy_0=E.asm.r).apply(null,arguments)},An=E._emscripten_bind_CExpat_parse_1=function(){return(An=E._emscripten_bind_CExpat_parse_1=E.asm.s).apply(null,arguments)},Zn=E._emscripten_bind_CExpat_tag_0=function(){return(Zn=E._emscripten_bind_CExpat_tag_0=E.asm.t).apply(null,arguments)},Vn=E._emscripten_bind_CExpat_attrs_0=function(){return(Vn=E._emscripten_bind_CExpat_attrs_0=E.asm.u).apply(null,arguments)},Xn=E._emscripten_bind_CExpat_content_0=function(){return(Xn=E._emscripten_bind_CExpat_content_0=E.asm.v).apply(null,arguments)},Pi=E._emscripten_bind_CExpat_startElement_0=function(){return(Pi=E._emscripten_bind_CExpat_startElement_0=E.asm.w).apply(null,arguments)},he=E._emscripten_bind_CExpat_endElement_0=function(){return(he=E._emscripten_bind_CExpat_endElement_0=E.asm.x).apply(null,arguments)},Xe=E._emscripten_bind_CExpat_characterData_0=function(){return(Xe=E._emscripten_bind_CExpat_characterData_0=E.asm.y).apply(null,arguments)},vn=E._emscripten_bind_CExpat___destroy___0=function(){return(vn=E._emscripten_bind_CExpat___destroy___0=E.asm.z).apply(null,arguments)},wn=E._emscripten_bind_VoidPtr___destroy___0=function(){return(wn=E._emscripten_bind_VoidPtr___destroy___0=E.asm.A).apply(null,arguments)},Qn=E._emscripten_bind_CExpatJS_CExpatJS_0=function(){return(Qn=E._emscripten_bind_CExpatJS_CExpatJS_0=E.asm.B).apply(null,arguments)},ci=E._emscripten_bind_CExpatJS_startElement_0=function(){return(ci=E._emscripten_bind_CExpatJS_startElement_0=E.asm.C).apply(null,arguments)},vi=E._emscripten_bind_CExpatJS_endElement_0=function(){return(vi=E._emscripten_bind_CExpatJS_endElement_0=E.asm.D).apply(null,arguments)},jn=E._emscripten_bind_CExpatJS_characterData_0=function(){return(jn=E._emscripten_bind_CExpatJS_characterData_0=E.asm.E).apply(null,arguments)},Vi=E._emscripten_bind_CExpatJS___destroy___0=function(){return(Vi=E._emscripten_bind_CExpatJS___destroy___0=E.asm.F).apply(null,arguments)};function bi(b){function k(){Jn||(Jn=!0,E.calledRun=!0,!ae&&(function ze(){!E.noFSInit&&!A.init.initialized&&A.init(),A.ignorePermissions=!1,li(_e)}(),ut(E),E.onRuntimeInitialized&&E.onRuntimeInitialized(),function Cn(){if(E.postRun)for("function"==typeof E.postRun&&(E.postRun=[E.postRun]);E.postRun.length;)b=E.postRun.shift(),ee.unshift(b);var b;li(ee)}()))}gi>0||(function Ze(){if(E.preRun)for("function"==typeof E.preRun&&(E.preRun=[E.preRun]);E.preRun.length;)b=E.preRun.shift(),ce.unshift(b);var b;li(ce)}(),gi>0)||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),k()},1)):k())}if(E._malloc=function(){return(E._malloc=E.asm.H).apply(null,arguments)},Si=function b(){Jn||bi(),Jn||(Si=b)},E.run=bi,E.preInit)for("function"==typeof E.preInit&&(E.preInit=[E.preInit]);E.preInit.length>0;)E.preInit.pop()();function fn(){}function cn(b){return(b||fn).__cache__}function ui(b,k){var V=cn(k),it=V[b];return it||((it=Object.create((k||fn).prototype)).ptr=b,V[b]=it)}bi(),(fn.prototype=Object.create(fn.prototype)).constructor=fn,fn.prototype.__class__=fn,fn.__cache__={},E.WrapperObject=fn,E.getCache=cn,E.wrapPointer=ui,E.castObject=function Ji(b,k){return ui(b.ptr,k)},E.NULL=ui(0),E.destroy=function hi(b){if(!b.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";b.__destroy__(),delete cn(b.__class__)[b.ptr]},E.compare=function Fi(b,k){return b.ptr===k.ptr},E.getPointer=function gn(b){return b.ptr},E.getClass=function In(b){return b.__class__};var on={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(on.needed){for(var b=0;b<on.temps.length;b++)E._free(on.temps[b]);on.temps.length=0,E._free(on.buffer),on.buffer=0,on.size+=on.needed,on.needed=0}on.buffer||(on.size+=128,on.buffer=E._malloc(on.size),At(on.buffer)),on.pos=0},alloc:function(b,k){At(on.buffer);var ht,it=b.length*k.BYTES_PER_ELEMENT;return on.pos+(it=it+7&-8)>=on.size?(At(it>0),on.needed+=it,ht=E._malloc(it),on.temps.push(ht)):(ht=on.buffer+on.pos,on.pos+=it),ht},copy:function(b,k,V){switch(V>>>=0,k.BYTES_PER_ELEMENT){case 2:V>>>=1;break;case 4:V>>>=2;break;case 8:V>>>=3}for(var ht=0;ht<b.length;ht++)k[V+ht]=b[ht]}};function qe(){this.ptr=pn(),cn(qe)[this.ptr]=this}function Ti(){throw"cannot construct a VoidPtr, no constructor in IDL"}function On(){this.ptr=Qn(),cn(On)[this.ptr]=this}return(qe.prototype=Object.create(fn.prototype)).constructor=qe,qe.prototype.__class__=qe,qe.__cache__={},E.CExpat=qe,qe.prototype.version=qe.prototype.version=function(){return Kt(ln(this.ptr))},qe.prototype.create=qe.prototype.create=function(){return!!Ye(this.ptr)},qe.prototype.destroy=qe.prototype.destroy=function(){We(this.ptr)},qe.prototype.parse=qe.prototype.parse=function(b){var k=this.ptr;return on.prepare(),b=b&&"object"==typeof b?b.ptr:function Hi(b){if("string"==typeof b){var k=me(b),V=on.alloc(k,Ve);return on.copy(k,Ve,V),V}return b}(b),!!An(k,b)},qe.prototype.tag=qe.prototype.tag=function(){return Kt(Zn(this.ptr))},qe.prototype.attrs=qe.prototype.attrs=function(){return Kt(Vn(this.ptr))},qe.prototype.content=qe.prototype.content=function(){return Kt(Xn(this.ptr))},qe.prototype.startElement=qe.prototype.startElement=function(){Pi(this.ptr)},qe.prototype.endElement=qe.prototype.endElement=function(){he(this.ptr)},qe.prototype.characterData=qe.prototype.characterData=function(){Xe(this.ptr)},qe.prototype.__destroy__=qe.prototype.__destroy__=function(){vn(this.ptr)},(Ti.prototype=Object.create(fn.prototype)).constructor=Ti,Ti.prototype.__class__=Ti,Ti.__cache__={},E.VoidPtr=Ti,Ti.prototype.__destroy__=Ti.prototype.__destroy__=function(){wn(this.ptr)},(On.prototype=Object.create(qe.prototype)).constructor=On,On.prototype.__class__=On,On.__cache__={},E.CExpatJS=On,On.prototype.startElement=On.prototype.startElement=function(){ci(this.ptr)},On.prototype.endElement=On.prototype.endElement=function(){vi(this.ptr)},On.prototype.characterData=On.prototype.characterData=function(){jn(this.ptr)},On.prototype.__destroy__=On.prototype.__destroy__=function(){Vi(this.ptr)},F.ready},x.exports=rt;var m=Object.freeze(c({__proto__:null,default:x.exports},[x.exports]));var d=function p(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}().__hpcc_wasmFolder||void 0;function l(Y){if(!arguments.length)return d;var nt=d;return d=Y,nt}function u(Y,nt,rt){var q=Y.default||Y;return q.__hpcc_promise||(q.__hpcc_promise=q({wasmBinary:rt,locateFile:function(F,E){return"".concat(function h(Y,nt){for(;Y.charAt(Y.length-1)===nt;)Y=Y.substring(0,Y.length-1);return Y}(nt||l()||E||".","/"),"/").concat(function f(Y,nt){for(;Y.charAt(0)===nt;)Y=Y.substring(1);return Y}(F,"/"))}})),q.__hpcc_promise}var g=function(){function Y(nt,rt){this.tag=nt,this.attrs=rt,this._content=""}return Object.defineProperty(Y.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Y.prototype.appendContent=function(nt){this._content+=nt},Y}(),C=function(){function Y(){this._stack=[]}return Y.prototype.parse=function(nt,rt,q){return B(nt,this,rt,q)},Y.prototype.top=function(){return this._stack[this._stack.length-1]},Y.prototype.startElement=function(nt,rt){var q=new g(nt,rt);return this._stack.push(q),q},Y.prototype.endElement=function(nt){return this._stack.pop()},Y.prototype.characterData=function(nt){this.top().appendContent(nt)},Y}();function B(Y,nt,rt,q){return u(m,rt,q).then(function(F){var E=new F.CExpatJS;E.startElement=function(){nt.startElement(this.tag(),function L(Y){var nt={},rt=Y,q="".concat(String.fromCharCode(1)),F="".concat(q).concat(q);return rt.split(F).filter(function(E){return!!E}).forEach(function(E){var ut=E.split(q);nt[ut[0]]=ut[1]}),nt}(this.attrs()))},E.endElement=function(){nt.endElement(this.tag())},E.characterData=function(){nt.characterData(this.content())},E.create();var ut=E.parse(Y);return E.destroy(),F.destroy(E),ut})}var M={exports:{}};!function(Y,nt){var rt=function(){var q=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(F){var ut,ft,E=typeof(F=F||{})<"u"?F:{};E.ready=new Promise(function(y,S){ut=y,ft=S});var St,Dt={};for(St in E)E.hasOwnProperty(St)&&(Dt[St]=E[St]);var zt,de,Qt="./this.program",pe=function(y,S){throw S},yt="";typeof document<"u"&&document.currentScript&&(yt=document.currentScript.src),q&&(yt=q),yt=0!==yt.indexOf("blob:")?yt.substr(0,yt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",zt=function(y){var S=new XMLHttpRequest;return S.open("GET",y,!1),S.send(null),S.responseText},de=function(y,S,P){var $=new XMLHttpRequest;$.open("GET",y,!0),$.responseType="arraybuffer",$.onload=function(){200==$.status||0==$.status&&$.response?S($.response):P()},$.onerror=P,$.send(null)};var Mt=E.print||console.log.bind(console),te=E.printErr||console.warn.bind(console);for(St in Dt)Dt.hasOwnProperty(St)&&(E[St]=Dt[St]);Dt=null,E.thisProgram&&(Qt=E.thisProgram),E.quit&&(pe=E.quit);var Ht,jt=0;E.wasmBinary&&(Ht=E.wasmBinary);var Zt=E.noExitRuntime||!0;"object"!=typeof WebAssembly&&nn("no native wasm support detected");var Kt,xe=!1;function Te(y,S){y||nn("Assertion failed: "+S)}var Tt,Wt,ce,_e,ee,Ze,Le=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Oe(y,S,P){for(var $=S+P,dt=S;y[dt]&&!(dt>=$);)++dt;if(dt-S>16&&y.subarray&&Le)return Le.decode(y.subarray(S,dt));for(var vt="";S<dt;){var Et=y[S++];if(128&Et){var Bt=63&y[S++];if(192!=(224&Et)){var ne=63&y[S++];if((Et=224==(240&Et)?(15&Et)<<12|Bt<<6|ne:(7&Et)<<18|Bt<<12|ne<<6|63&y[S++])<65536)vt+=String.fromCharCode(Et);else{var Ie=Et-65536;vt+=String.fromCharCode(55296|Ie>>10,56320|1023&Ie)}}else vt+=String.fromCharCode((31&Et)<<6|Bt)}else vt+=String.fromCharCode(Et)}return vt}function Ee(y,S){return y?Oe(ce,y,S):""}function Ue(y,S,P,$){if(!($>0))return 0;for(var dt=P,vt=P+$-1,Et=0;Et<y.length;++Et){var Bt=y.charCodeAt(Et);if(Bt>=55296&&Bt<=57343&&(Bt=65536+((1023&Bt)<<10)|1023&y.charCodeAt(++Et)),Bt<=127){if(P>=vt)break;S[P++]=Bt}else if(Bt<=2047){if(P+1>=vt)break;S[P++]=192|Bt>>6,S[P++]=128|63&Bt}else if(Bt<=65535){if(P+2>=vt)break;S[P++]=224|Bt>>12,S[P++]=128|Bt>>6&63,S[P++]=128|63&Bt}else{if(P+3>=vt)break;S[P++]=240|Bt>>18,S[P++]=128|Bt>>12&63,S[P++]=128|Bt>>6&63,S[P++]=128|63&Bt}}return S[P]=0,P-dt}function en(y){for(var S=0,P=0;P<y.length;++P){var $=y.charCodeAt(P);$>=55296&&$<=57343&&($=65536+((1023&$)<<10)|1023&y.charCodeAt(++P)),$<=127?++S:S+=$<=2047?2:$<=65535?3:4}return S}function sn(y,S){return y%S>0&&(y+=S-y%S),y}function ze(y){Tt=y,E.HEAP8=Wt=new Int8Array(y),E.HEAP16=_e=new Int16Array(y),E.HEAP32=ee=new Int32Array(y),E.HEAPU8=ce=new Uint8Array(y),E.HEAPU16=new Uint16Array(y),E.HEAPU32=new Uint32Array(y),E.HEAPF32=new Float32Array(y),E.HEAPF64=Ze=new Float64Array(y)}var Cn,oi=[],Mi=[],mi=[];var fe=0,En=null;function Mn(y){fe++,E.monitorRunDependencies&&E.monitorRunDependencies(fe)}function mn(y){if(fe--,E.monitorRunDependencies&&E.monitorRunDependencies(fe),0==fe&&En){var S=En;En=null,S()}}function nn(y){E.onAbort&&E.onAbort(y),te(y="Aborted("+y+")"),xe=!0,y+=". Build with -s ASSERTIONS=1 for more info.";var S=new WebAssembly.RuntimeError(y);throw ft(S),S}E.preloadedImages={},E.preloadedAudios={};var kn;function li(y){return y.startsWith("data:application/octet-stream;base64,")}function we(y){try{if(y==kn&&Ht)return new Uint8Array(Ht);throw"both async and sync fetching of the wasm failed"}catch(S){nn(S)}}li(kn="graphvizlib.wasm")||(kn=function Nt(y){return E.locateFile?E.locateFile(y,yt):yt+y}(kn));var dn,z,bt,X={161580:function(y,S){var P=Ee(y),$=Ee(S);O.createPath("/",Yt.dirname(P)),O.writeFile(Yt.join("/",P),$)}};function lt(y){for(;y.length>0;){var S=y.shift();if("function"!=typeof S){var P=S.func;"number"==typeof P?void 0===S.arg?A(P)():A(P)(S.arg):P(void 0===S.arg?null:S.arg)}else S(E)}}function A(y){return Cn.get(y)}bt=function(){return performance.now()};function Pt(y){return ee[Ot()>>2]=y,y}var Yt={splitPath:function(y){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(y).slice(1)},normalizeArray:function(y,S){for(var P=0,$=y.length-1;$>=0;$--){var dt=y[$];"."===dt?y.splice($,1):".."===dt?(y.splice($,1),P++):P&&(y.splice($,1),P--)}if(S)for(;P;P--)y.unshift("..");return y},normalize:function(y){var S="/"===y.charAt(0),P="/"===y.substr(-1);return!(y=Yt.normalizeArray(y.split("/").filter(function($){return!!$}),!S).join("/"))&&!S&&(y="."),y&&P&&(y+="/"),(S?"/":"")+y},dirname:function(y){var S=Yt.splitPath(y),P=S[0],$=S[1];return P||$?($&&($=$.substr(0,$.length-1)),P+$):"."},basename:function(y){if("/"===y)return"/";var S=(y=(y=Yt.normalize(y)).replace(/\/$/,"")).lastIndexOf("/");return-1===S?y:y.substr(S+1)},extname:function(y){return Yt.splitPath(y)[3]},join:function(){var y=Array.prototype.slice.call(arguments,0);return Yt.normalize(y.join("/"))},join2:function(y,S){return Yt.normalize(y+"/"+S)}};var pt={resolve:function(){for(var y="",S=!1,P=arguments.length-1;P>=-1&&!S;P--){var $=P>=0?arguments[P]:O.cwd();if("string"!=typeof $)throw new TypeError("Arguments to path.resolve must be strings");if(!$)return"";y=$+"/"+y,S="/"===$.charAt(0)}return(S?"/":"")+(y=Yt.normalizeArray(y.split("/").filter(function(dt){return!!dt}),!S).join("/"))||"."},relative:function(y,S){function P(Ie){for(var Je=0;Je<Ie.length&&""===Ie[Je];Je++);for(var un=Ie.length-1;un>=0&&""===Ie[un];un--);return Je>un?[]:Ie.slice(Je,un-Je+1)}y=pt.resolve(y).substr(1),S=pt.resolve(S).substr(1);for(var $=P(y.split("/")),dt=P(S.split("/")),vt=Math.min($.length,dt.length),Et=vt,Bt=0;Bt<vt;Bt++)if($[Bt]!==dt[Bt]){Et=Bt;break}var ne=[];for(Bt=Et;Bt<$.length;Bt++)ne.push("..");return(ne=ne.concat(dt.slice(Et))).join("/")}},mt={ttys:[],init:function(){},shutdown:function(){},register:function(y,S){mt.ttys[y]={input:[],output:[],ops:S},O.registerDevice(y,mt.stream_ops)},stream_ops:{open:function(y){var S=mt.ttys[y.node.rdev];if(!S)throw new O.ErrnoError(43);y.tty=S,y.seekable=!1},close:function(y){y.tty.ops.flush(y.tty)},flush:function(y){y.tty.ops.flush(y.tty)},read:function(y,S,P,$,dt){if(!y.tty||!y.tty.ops.get_char)throw new O.ErrnoError(60);for(var vt=0,Et=0;Et<$;Et++){var Bt;try{Bt=y.tty.ops.get_char(y.tty)}catch{throw new O.ErrnoError(29)}if(void 0===Bt&&0===vt)throw new O.ErrnoError(6);if(null==Bt)break;vt++,S[P+Et]=Bt}return vt&&(y.node.timestamp=Date.now()),vt},write:function(y,S,P,$,dt){if(!y.tty||!y.tty.ops.put_char)throw new O.ErrnoError(60);try{for(var vt=0;vt<$;vt++)y.tty.ops.put_char(y.tty,S[P+vt])}catch{throw new O.ErrnoError(29)}return $&&(y.node.timestamp=Date.now()),vt}},default_tty_ops:{get_char:function(y){if(!y.input.length){var S=null;if(typeof window<"u"&&"function"==typeof window.prompt?null!==(S=window.prompt("Input: "))&&(S+="\n"):"function"==typeof readline&&null!==(S=readline())&&(S+="\n"),!S)return null;y.input=Hi(S,!0)}return y.input.shift()},put_char:function(y,S){null===S||10===S?(Mt(Oe(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(Mt(Oe(y.output,0)),y.output=[])}},default_tty1_ops:{put_char:function(y,S){null===S||10===S?(te(Oe(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(te(Oe(y.output,0)),y.output=[])}}};function Xt(y){y=function Ut(y,S){return Math.ceil(y/S)*S}(y,65536);var S=$e(65536,y);return S?(function gt(y,S){ce.fill(0,y,y+S)}(S,y),S):0}var kt={ops_table:null,mount:function(y){return kt.createNode(null,"/",16895,0)},createNode:function(y,S,P,$){if(O.isBlkdev(P)||O.isFIFO(P))throw new O.ErrnoError(63);kt.ops_table||(kt.ops_table={dir:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr,lookup:kt.node_ops.lookup,mknod:kt.node_ops.mknod,rename:kt.node_ops.rename,unlink:kt.node_ops.unlink,rmdir:kt.node_ops.rmdir,readdir:kt.node_ops.readdir,symlink:kt.node_ops.symlink},stream:{llseek:kt.stream_ops.llseek}},file:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr},stream:{llseek:kt.stream_ops.llseek,read:kt.stream_ops.read,write:kt.stream_ops.write,allocate:kt.stream_ops.allocate,mmap:kt.stream_ops.mmap,msync:kt.stream_ops.msync}},link:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr,readlink:kt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr},stream:O.chrdev_stream_ops}});var dt=O.createNode(y,S,P,$);return O.isDir(dt.mode)?(dt.node_ops=kt.ops_table.dir.node,dt.stream_ops=kt.ops_table.dir.stream,dt.contents={}):O.isFile(dt.mode)?(dt.node_ops=kt.ops_table.file.node,dt.stream_ops=kt.ops_table.file.stream,dt.usedBytes=0,dt.contents=null):O.isLink(dt.mode)?(dt.node_ops=kt.ops_table.link.node,dt.stream_ops=kt.ops_table.link.stream):O.isChrdev(dt.mode)&&(dt.node_ops=kt.ops_table.chrdev.node,dt.stream_ops=kt.ops_table.chrdev.stream),dt.timestamp=Date.now(),y&&(y.contents[S]=dt,y.timestamp=dt.timestamp),dt},getFileDataAsTypedArray:function(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage:function(y,S){var P=y.contents?y.contents.length:0;if(!(P>=S)){S=Math.max(S,P*(P<1048576?2:1.125)>>>0),0!=P&&(S=Math.max(S,256));var dt=y.contents;y.contents=new Uint8Array(S),y.usedBytes>0&&y.contents.set(dt.subarray(0,y.usedBytes),0)}},resizeFileStorage:function(y,S){if(y.usedBytes!=S)if(0==S)y.contents=null,y.usedBytes=0;else{var P=y.contents;y.contents=new Uint8Array(S),P&&y.contents.set(P.subarray(0,Math.min(S,y.usedBytes))),y.usedBytes=S}},node_ops:{getattr:function(y){var S={};return S.dev=O.isChrdev(y.mode)?y.id:1,S.ino=y.id,S.mode=y.mode,S.nlink=1,S.uid=0,S.gid=0,S.rdev=y.rdev,S.size=O.isDir(y.mode)?4096:O.isFile(y.mode)?y.usedBytes:O.isLink(y.mode)?y.link.length:0,S.atime=new Date(y.timestamp),S.mtime=new Date(y.timestamp),S.ctime=new Date(y.timestamp),S.blksize=4096,S.blocks=Math.ceil(S.size/S.blksize),S},setattr:function(y,S){void 0!==S.mode&&(y.mode=S.mode),void 0!==S.timestamp&&(y.timestamp=S.timestamp),void 0!==S.size&&kt.resizeFileStorage(y,S.size)},lookup:function(y,S){throw O.genericErrors[44]},mknod:function(y,S,P,$){return kt.createNode(y,S,P,$)},rename:function(y,S,P){if(O.isDir(y.mode)){var $;try{$=O.lookupNode(S,P)}catch{}if($)for(var dt in $.contents)throw new O.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=P,S.contents[P]=y,S.timestamp=y.parent.timestamp,y.parent=S},unlink:function(y,S){delete y.contents[S],y.timestamp=Date.now()},rmdir:function(y,S){var P=O.lookupNode(y,S);for(var $ in P.contents)throw new O.ErrnoError(55);delete y.contents[S],y.timestamp=Date.now()},readdir:function(y){var S=[".",".."];for(var P in y.contents)!y.contents.hasOwnProperty(P)||S.push(P);return S},symlink:function(y,S,P){var $=kt.createNode(y,S,41471,0);return $.link=P,$},readlink:function(y){if(!O.isLink(y.mode))throw new O.ErrnoError(28);return y.link}},stream_ops:{read:function(y,S,P,$,dt){var vt=y.node.contents;if(dt>=y.node.usedBytes)return 0;var Et=Math.min(y.node.usedBytes-dt,$);if(Et>8&&vt.subarray)S.set(vt.subarray(dt,dt+Et),P);else for(var Bt=0;Bt<Et;Bt++)S[P+Bt]=vt[dt+Bt];return Et},write:function(y,S,P,$,dt,vt){if(S.buffer===Wt.buffer&&(vt=!1),!$)return 0;var Et=y.node;if(Et.timestamp=Date.now(),S.subarray&&(!Et.contents||Et.contents.subarray)){if(vt)return Et.contents=S.subarray(P,P+$),Et.usedBytes=$,$;if(0===Et.usedBytes&&0===dt)return Et.contents=S.slice(P,P+$),Et.usedBytes=$,$;if(dt+$<=Et.usedBytes)return Et.contents.set(S.subarray(P,P+$),dt),$}if(kt.expandFileStorage(Et,dt+$),Et.contents.subarray&&S.subarray)Et.contents.set(S.subarray(P,P+$),dt);else for(var Bt=0;Bt<$;Bt++)Et.contents[dt+Bt]=S[P+Bt];return Et.usedBytes=Math.max(Et.usedBytes,dt+$),$},llseek:function(y,S,P){var $=S;if(1===P?$+=y.position:2===P&&O.isFile(y.node.mode)&&($+=y.node.usedBytes),$<0)throw new O.ErrnoError(28);return $},allocate:function(y,S,P){kt.expandFileStorage(y.node,S+P),y.node.usedBytes=Math.max(y.node.usedBytes,S+P)},mmap:function(y,S,P,$,dt,vt){if(0!==S)throw new O.ErrnoError(28);if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);var Et,Bt,ne=y.node.contents;if(2&vt||ne.buffer!==Tt){if(($>0||$+P<ne.length)&&(ne=ne.subarray?ne.subarray($,$+P):Array.prototype.slice.call(ne,$,$+P)),Bt=!0,!(Et=Xt(P)))throw new O.ErrnoError(48);Wt.set(ne,Et)}else Bt=!1,Et=ne.byteOffset;return{ptr:Et,allocated:Bt}},msync:function(y,S,P,$,dt){if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);return 2&dt||kt.stream_ops.write(y,S,0,$,P,!1),0}}};var O={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(y,S){if(S=S||{},!(y=pt.resolve(O.cwd(),y)))return{path:"",node:null};var P={follow_mount:!0,recurse_count:0};for(var $ in P)void 0===S[$]&&(S[$]=P[$]);if(S.recurse_count>8)throw new O.ErrnoError(32);for(var dt=Yt.normalizeArray(y.split("/").filter(function(Ne){return!!Ne}),!1),vt=O.root,Et="/",Bt=0;Bt<dt.length;Bt++){var ne=Bt===dt.length-1;if(ne&&S.parent)break;if(vt=O.lookupNode(vt,dt[Bt]),Et=Yt.join2(Et,dt[Bt]),O.isMountpoint(vt)&&(!ne||ne&&S.follow_mount)&&(vt=vt.mounted.root),!ne||S.follow)for(var Ie=0;O.isLink(vt.mode);){var Je=O.readlink(Et);if(Et=pt.resolve(Yt.dirname(Et),Je),vt=O.lookupPath(Et,{recurse_count:S.recurse_count}).node,Ie++>40)throw new O.ErrnoError(32)}}return{path:Et,node:vt}},getPath:function(y){for(var S;;){if(O.isRoot(y)){var P=y.mount.mountpoint;return S?"/"!==P[P.length-1]?P+"/"+S:P+S:P}S=S?y.name+"/"+S:y.name,y=y.parent}},hashName:function(y,S){for(var P=0,$=0;$<S.length;$++)P=(P<<5)-P+S.charCodeAt($)|0;return(y+P>>>0)%O.nameTable.length},hashAddNode:function(y){var S=O.hashName(y.parent.id,y.name);y.name_next=O.nameTable[S],O.nameTable[S]=y},hashRemoveNode:function(y){var S=O.hashName(y.parent.id,y.name);if(O.nameTable[S]===y)O.nameTable[S]=y.name_next;else for(var P=O.nameTable[S];P;){if(P.name_next===y){P.name_next=y.name_next;break}P=P.name_next}},lookupNode:function(y,S){var P=O.mayLookup(y);if(P)throw new O.ErrnoError(P,y);for(var $=O.hashName(y.id,S),dt=O.nameTable[$];dt;dt=dt.name_next)if(dt.parent.id===y.id&&dt.name===S)return dt;return O.lookup(y,S)},createNode:function(y,S,P,$){var dt=new O.FSNode(y,S,P,$);return O.hashAddNode(dt),dt},destroyNode:function(y){O.hashRemoveNode(y)},isRoot:function(y){return y===y.parent},isMountpoint:function(y){return!!y.mounted},isFile:function(y){return 32768==(61440&y)},isDir:function(y){return 16384==(61440&y)},isLink:function(y){return 40960==(61440&y)},isChrdev:function(y){return 8192==(61440&y)},isBlkdev:function(y){return 24576==(61440&y)},isFIFO:function(y){return 4096==(61440&y)},isSocket:function(y){return 49152==(49152&y)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(y){var S=O.flagModes[y];if(typeof S>"u")throw new Error("Unknown file open mode: "+y);return S},flagsToPermissionString:function(y){var S=["r","w","rw"][3&y];return 512&y&&(S+="w"),S},nodePermissions:function(y,S){return O.ignorePermissions?0:S.includes("r")&&!(292&y.mode)||S.includes("w")&&!(146&y.mode)||S.includes("x")&&!(73&y.mode)?2:0},mayLookup:function(y){return O.nodePermissions(y,"x")||(y.node_ops.lookup?0:2)},mayCreate:function(y,S){try{return O.lookupNode(y,S),20}catch{}return O.nodePermissions(y,"wx")},mayDelete:function(y,S,P){var $;try{$=O.lookupNode(y,S)}catch(vt){return vt.errno}var dt=O.nodePermissions(y,"wx");if(dt)return dt;if(P){if(!O.isDir($.mode))return 54;if(O.isRoot($)||O.getPath($)===O.cwd())return 10}else if(O.isDir($.mode))return 31;return 0},mayOpen:function(y,S){return y?O.isLink(y.mode)?32:O.isDir(y.mode)&&("r"!==O.flagsToPermissionString(S)||512&S)?31:O.nodePermissions(y,O.flagsToPermissionString(S)):44},MAX_OPEN_FDS:4096,nextfd:function(y,S){S=S||O.MAX_OPEN_FDS;for(var P=y=y||0;P<=S;P++)if(!O.streams[P])return P;throw new O.ErrnoError(33)},getStream:function(y){return O.streams[y]},createStream:function(y,S,P){O.FSStream||(O.FSStream=function(){},O.FSStream.prototype={object:{get:function(){return this.node},set:function(Et){this.node=Et}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var $=new O.FSStream;for(var dt in y)$[dt]=y[dt];y=$;var vt=O.nextfd(S,P);return y.fd=vt,O.streams[vt]=y,y},closeStream:function(y){O.streams[y]=null},chrdev_stream_ops:{open:function(y){var S=O.getDevice(y.node.rdev);y.stream_ops=S.stream_ops,y.stream_ops.open&&y.stream_ops.open(y)},llseek:function(){throw new O.ErrnoError(70)}},major:function(y){return y>>8},minor:function(y){return 255&y},makedev:function(y,S){return y<<8|S},registerDevice:function(y,S){O.devices[y]={stream_ops:S}},getDevice:function(y){return O.devices[y]},getMounts:function(y){for(var S=[],P=[y];P.length;){var $=P.pop();S.push($),P.push.apply(P,$.mounts)}return S},syncfs:function(y,S){"function"==typeof y&&(S=y,y=!1),O.syncFSRequests++,O.syncFSRequests>1&&te("warning: "+O.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var P=O.getMounts(O.root.mount),$=0;function dt(Et){return O.syncFSRequests--,S(Et)}function vt(Et){if(Et)return vt.errored?void 0:(vt.errored=!0,dt(Et));++$>=P.length&&dt(null)}P.forEach(function(Et){if(!Et.type.syncfs)return vt(null);Et.type.syncfs(Et,y,vt)})},mount:function(y,S,P){var vt,$="/"===P,dt=!P;if($&&O.root)throw new O.ErrnoError(10);if(!$&&!dt){var Et=O.lookupPath(P,{follow_mount:!1});if(P=Et.path,O.isMountpoint(vt=Et.node))throw new O.ErrnoError(10);if(!O.isDir(vt.mode))throw new O.ErrnoError(54)}var Bt={type:y,opts:S,mountpoint:P,mounts:[]},ne=y.mount(Bt);return ne.mount=Bt,Bt.root=ne,$?O.root=ne:vt&&(vt.mounted=Bt,vt.mount&&vt.mount.mounts.push(Bt)),ne},unmount:function(y){var S=O.lookupPath(y,{follow_mount:!1});if(!O.isMountpoint(S.node))throw new O.ErrnoError(28);var P=S.node,$=P.mounted,dt=O.getMounts($);Object.keys(O.nameTable).forEach(function(Et){for(var Bt=O.nameTable[Et];Bt;){var ne=Bt.name_next;dt.includes(Bt.mount)&&O.destroyNode(Bt),Bt=ne}}),P.mounted=null;var vt=P.mount.mounts.indexOf($);P.mount.mounts.splice(vt,1)},lookup:function(y,S){return y.node_ops.lookup(y,S)},mknod:function(y,S,P){var dt=O.lookupPath(y,{parent:!0}).node,vt=Yt.basename(y);if(!vt||"."===vt||".."===vt)throw new O.ErrnoError(28);var Et=O.mayCreate(dt,vt);if(Et)throw new O.ErrnoError(Et);if(!dt.node_ops.mknod)throw new O.ErrnoError(63);return dt.node_ops.mknod(dt,vt,S,P)},create:function(y,S){return S=void 0!==S?S:438,S&=4095,O.mknod(y,S|=32768,0)},mkdir:function(y,S){return S=void 0!==S?S:511,S&=1023,O.mknod(y,S|=16384,0)},mkdirTree:function(y,S){for(var P=y.split("/"),$="",dt=0;dt<P.length;++dt)if(P[dt]){$+="/"+P[dt];try{O.mkdir($,S)}catch(vt){if(20!=vt.errno)throw vt}}},mkdev:function(y,S,P){return typeof P>"u"&&(P=S,S=438),O.mknod(y,S|=8192,P)},symlink:function(y,S){if(!pt.resolve(y))throw new O.ErrnoError(44);var $=O.lookupPath(S,{parent:!0}).node;if(!$)throw new O.ErrnoError(44);var dt=Yt.basename(S),vt=O.mayCreate($,dt);if(vt)throw new O.ErrnoError(vt);if(!$.node_ops.symlink)throw new O.ErrnoError(63);return $.node_ops.symlink($,dt,y)},rename:function(y,S){var Bt,ne,P=Yt.dirname(y),$=Yt.dirname(S),dt=Yt.basename(y),vt=Yt.basename(S);if(Bt=O.lookupPath(y,{parent:!0}).node,ne=O.lookupPath(S,{parent:!0}).node,!Bt||!ne)throw new O.ErrnoError(44);if(Bt.mount!==ne.mount)throw new O.ErrnoError(75);var un,Ie=O.lookupNode(Bt,dt),Je=pt.relative(y,$);if("."!==Je.charAt(0))throw new O.ErrnoError(28);if("."!==(Je=pt.relative(S,P)).charAt(0))throw new O.ErrnoError(55);try{un=O.lookupNode(ne,vt)}catch{}if(Ie!==un){var Ne=O.isDir(Ie.mode),Ge=O.mayDelete(Bt,dt,Ne);if(Ge)throw new O.ErrnoError(Ge);if(Ge=un?O.mayDelete(ne,vt,Ne):O.mayCreate(ne,vt))throw new O.ErrnoError(Ge);if(!Bt.node_ops.rename)throw new O.ErrnoError(63);if(O.isMountpoint(Ie)||un&&O.isMountpoint(un))throw new O.ErrnoError(10);if(ne!==Bt&&(Ge=O.nodePermissions(Bt,"w")))throw new O.ErrnoError(Ge);O.hashRemoveNode(Ie);try{Bt.node_ops.rename(Ie,ne,vt)}catch(Tn){throw Tn}finally{O.hashAddNode(Ie)}}},rmdir:function(y){var P=O.lookupPath(y,{parent:!0}).node,$=Yt.basename(y),dt=O.lookupNode(P,$),vt=O.mayDelete(P,$,!0);if(vt)throw new O.ErrnoError(vt);if(!P.node_ops.rmdir)throw new O.ErrnoError(63);if(O.isMountpoint(dt))throw new O.ErrnoError(10);P.node_ops.rmdir(P,$),O.destroyNode(dt)},readdir:function(y){var P=O.lookupPath(y,{follow:!0}).node;if(!P.node_ops.readdir)throw new O.ErrnoError(54);return P.node_ops.readdir(P)},unlink:function(y){var P=O.lookupPath(y,{parent:!0}).node,$=Yt.basename(y),dt=O.lookupNode(P,$),vt=O.mayDelete(P,$,!1);if(vt)throw new O.ErrnoError(vt);if(!P.node_ops.unlink)throw new O.ErrnoError(63);if(O.isMountpoint(dt))throw new O.ErrnoError(10);P.node_ops.unlink(P,$),O.destroyNode(dt)},readlink:function(y){var P=O.lookupPath(y).node;if(!P)throw new O.ErrnoError(44);if(!P.node_ops.readlink)throw new O.ErrnoError(28);return pt.resolve(O.getPath(P.parent),P.node_ops.readlink(P))},stat:function(y,S){var $=O.lookupPath(y,{follow:!S}).node;if(!$)throw new O.ErrnoError(44);if(!$.node_ops.getattr)throw new O.ErrnoError(63);return $.node_ops.getattr($)},lstat:function(y){return O.stat(y,!0)},chmod:function(y,S,P){var $;if(!($="string"==typeof y?O.lookupPath(y,{follow:!P}).node:y).node_ops.setattr)throw new O.ErrnoError(63);$.node_ops.setattr($,{mode:4095&S|-4096&$.mode,timestamp:Date.now()})},lchmod:function(y,S){O.chmod(y,S,!0)},fchmod:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);O.chmod(P.node,S)},chown:function(y,S,P,$){var dt;if(!(dt="string"==typeof y?O.lookupPath(y,{follow:!$}).node:y).node_ops.setattr)throw new O.ErrnoError(63);dt.node_ops.setattr(dt,{timestamp:Date.now()})},lchown:function(y,S,P){O.chown(y,S,P,!0)},fchown:function(y,S,P){var $=O.getStream(y);if(!$)throw new O.ErrnoError(8);O.chown($.node,S,P)},truncate:function(y,S){if(S<0)throw new O.ErrnoError(28);var P;if(!(P="string"==typeof y?O.lookupPath(y,{follow:!0}).node:y).node_ops.setattr)throw new O.ErrnoError(63);if(O.isDir(P.mode))throw new O.ErrnoError(31);if(!O.isFile(P.mode))throw new O.ErrnoError(28);var dt=O.nodePermissions(P,"w");if(dt)throw new O.ErrnoError(dt);P.node_ops.setattr(P,{size:S,timestamp:Date.now()})},ftruncate:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);if(0==(2097155&P.flags))throw new O.ErrnoError(28);O.truncate(P.node,S)},utime:function(y,S,P){var dt=O.lookupPath(y,{follow:!0}).node;dt.node_ops.setattr(dt,{timestamp:Math.max(S,P)})},open:function(y,S,P,$,dt){if(""===y)throw new O.ErrnoError(44);var vt;if(P=typeof P>"u"?438:P,P=64&(S="string"==typeof S?O.modeStringToFlags(S):S)?4095&P|32768:0,"object"==typeof y)vt=y;else{y=Yt.normalize(y);try{vt=O.lookupPath(y,{follow:!(131072&S)}).node}catch{}}var Bt=!1;if(64&S)if(vt){if(128&S)throw new O.ErrnoError(20)}else vt=O.mknod(y,P,0),Bt=!0;if(!vt)throw new O.ErrnoError(44);if(O.isChrdev(vt.mode)&&(S&=-513),65536&S&&!O.isDir(vt.mode))throw new O.ErrnoError(54);if(!Bt){var ne=O.mayOpen(vt,S);if(ne)throw new O.ErrnoError(ne)}512&S&&O.truncate(vt,0),S&=-131713;var Ie=O.createStream({node:vt,path:O.getPath(vt),id:vt.id,flags:S,mode:vt.mode,seekable:!0,position:0,stream_ops:vt.stream_ops,node_ops:vt.node_ops,ungotten:[],error:!1},$,dt);return Ie.stream_ops.open&&Ie.stream_ops.open(Ie),E.logReadFiles&&!(1&S)&&(O.readFiles||(O.readFiles={}),y in O.readFiles||(O.readFiles[y]=1)),Ie},close:function(y){if(O.isClosed(y))throw new O.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(S){throw S}finally{O.closeStream(y.fd)}y.fd=null},isClosed:function(y){return null===y.fd},llseek:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new O.ErrnoError(70);if(0!=P&&1!=P&&2!=P)throw new O.ErrnoError(28);return y.position=y.stream_ops.llseek(y,S,P),y.ungotten=[],y.position},read:function(y,S,P,$,dt){if($<0||dt<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(1==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.read)throw new O.ErrnoError(28);var vt=typeof dt<"u";if(vt){if(!y.seekable)throw new O.ErrnoError(70)}else dt=y.position;var Et=y.stream_ops.read(y,S,P,$,dt);return vt||(y.position+=Et),Et},write:function(y,S,P,$,dt,vt){if($<0||dt<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.write)throw new O.ErrnoError(28);y.seekable&&1024&y.flags&&O.llseek(y,0,2);var Et=typeof dt<"u";if(Et){if(!y.seekable)throw new O.ErrnoError(70)}else dt=y.position;var Bt=y.stream_ops.write(y,S,P,$,dt,vt);return Et||(y.position+=Bt),Bt},allocate:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(S<0||P<=0)throw new O.ErrnoError(28);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(!O.isFile(y.node.mode)&&!O.isDir(y.node.mode))throw new O.ErrnoError(43);if(!y.stream_ops.allocate)throw new O.ErrnoError(138);y.stream_ops.allocate(y,S,P)},mmap:function(y,S,P,$,dt,vt){if(0!=(2&dt)&&0==(2&vt)&&2!=(2097155&y.flags))throw new O.ErrnoError(2);if(1==(2097155&y.flags))throw new O.ErrnoError(2);if(!y.stream_ops.mmap)throw new O.ErrnoError(43);return y.stream_ops.mmap(y,S,P,$,dt,vt)},msync:function(y,S,P,$,dt){return y&&y.stream_ops.msync?y.stream_ops.msync(y,S,P,$,dt):0},munmap:function(y){return 0},ioctl:function(y,S,P){if(!y.stream_ops.ioctl)throw new O.ErrnoError(59);return y.stream_ops.ioctl(y,S,P)},readFile:function(y,S){if((S=S||{}).flags=S.flags||0,S.encoding=S.encoding||"binary","utf8"!==S.encoding&&"binary"!==S.encoding)throw new Error('Invalid encoding type "'+S.encoding+'"');var P,$=O.open(y,S.flags),vt=O.stat(y).size,Et=new Uint8Array(vt);return O.read($,Et,0,vt,0),"utf8"===S.encoding?P=Oe(Et,0):"binary"===S.encoding&&(P=Et),O.close($),P},writeFile:function(y,S,P){(P=P||{}).flags=P.flags||577;var $=O.open(y,P.flags,P.mode);if("string"==typeof S){var dt=new Uint8Array(en(S)+1),vt=Ue(S,dt,0,dt.length);O.write($,dt,0,vt,void 0,P.canOwn)}else{if(!ArrayBuffer.isView(S))throw new Error("Unsupported data type");O.write($,S,0,S.byteLength,void 0,P.canOwn)}O.close($)},cwd:function(){return O.currentPath},chdir:function(y){var S=O.lookupPath(y,{follow:!0});if(null===S.node)throw new O.ErrnoError(44);if(!O.isDir(S.node.mode))throw new O.ErrnoError(54);var P=O.nodePermissions(S.node,"x");if(P)throw new O.ErrnoError(P);O.currentPath=S.path},createDefaultDirectories:function(){O.mkdir("/tmp"),O.mkdir("/home"),O.mkdir("/home/web_user")},createDefaultDevices:function(){O.mkdir("/dev"),O.registerDevice(O.makedev(1,3),{read:function(){return 0},write:function(S,P,$,dt,vt){return dt}}),O.mkdev("/dev/null",O.makedev(1,3)),mt.register(O.makedev(5,0),mt.default_tty_ops),mt.register(O.makedev(6,0),mt.default_tty1_ops),O.mkdev("/dev/tty",O.makedev(5,0)),O.mkdev("/dev/tty1",O.makedev(6,0));var y=function Q(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var y=new Uint8Array(1);return function(){return crypto.getRandomValues(y),y[0]}}return function(){nn("randomDevice")}}();O.createDevice("/dev","random",y),O.createDevice("/dev","urandom",y),O.mkdir("/dev/shm"),O.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){O.mkdir("/proc");var y=O.mkdir("/proc/self");O.mkdir("/proc/self/fd"),O.mount({mount:function(){var S=O.createNode(y,"fd",16895,73);return S.node_ops={lookup:function(P,$){var vt=O.getStream(+$);if(!vt)throw new O.ErrnoError(8);var Et={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return vt.path}}};return Et.parent=Et,Et}},S}},{},"/proc/self/fd")},createStandardStreams:function(){E.stdin?O.createDevice("/dev","stdin",E.stdin):O.symlink("/dev/tty","/dev/stdin"),E.stdout?O.createDevice("/dev","stdout",null,E.stdout):O.symlink("/dev/tty","/dev/stdout"),E.stderr?O.createDevice("/dev","stderr",null,E.stderr):O.symlink("/dev/tty1","/dev/stderr"),O.open("/dev/stdin",0),O.open("/dev/stdout",1),O.open("/dev/stderr",1)},ensureErrnoError:function(){O.ErrnoError||(O.ErrnoError=function(S,P){this.node=P,this.setErrno=function($){this.errno=$},this.setErrno(S),this.message="FS error"},O.ErrnoError.prototype=new Error,O.ErrnoError.prototype.constructor=O.ErrnoError,[44].forEach(function(y){O.genericErrors[y]=new O.ErrnoError(y),O.genericErrors[y].stack="<generic error, no stack>"}))},staticInit:function(){O.ensureErrnoError(),O.nameTable=new Array(4096),O.mount(kt,{},"/"),O.createDefaultDirectories(),O.createDefaultDevices(),O.createSpecialDirectories(),O.filesystems={MEMFS:kt}},init:function(y,S,P){O.init.initialized=!0,O.ensureErrnoError(),E.stdin=y||E.stdin,E.stdout=S||E.stdout,E.stderr=P||E.stderr,O.createStandardStreams()},quit:function(){O.init.initialized=!1;var y=E._fflush;y&&y(0);for(var S=0;S<O.streams.length;S++){var P=O.streams[S];!P||O.close(P)}},getMode:function(y,S){var P=0;return y&&(P|=365),S&&(P|=146),P},findObject:function(y,S){var P=O.analyzePath(y,S);return P.exists?P.object:null},analyzePath:function(y,S){try{y=(P=O.lookupPath(y,{follow:!S})).path}catch{}var $={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var P=O.lookupPath(y,{parent:!0});$.parentExists=!0,$.parentPath=P.path,$.parentObject=P.node,$.name=Yt.basename(y),P=O.lookupPath(y,{follow:!S}),$.exists=!0,$.path=P.path,$.object=P.node,$.name=P.node.name,$.isRoot="/"===P.path}catch(dt){$.error=dt.errno}return $},createPath:function(y,S,P,$){y="string"==typeof y?y:O.getPath(y);for(var dt=S.split("/").reverse();dt.length;){var vt=dt.pop();if(vt){var Et=Yt.join2(y,vt);try{O.mkdir(Et)}catch{}y=Et}}return Et},createFile:function(y,S,P,$,dt){var vt=Yt.join2("string"==typeof y?y:O.getPath(y),S),Et=O.getMode($,dt);return O.create(vt,Et)},createDataFile:function(y,S,P,$,dt,vt){var Et=S?Yt.join2("string"==typeof y?y:O.getPath(y),S):y,Bt=O.getMode($,dt),ne=O.create(Et,Bt);if(P){if("string"==typeof P){for(var Ie=new Array(P.length),Je=0,un=P.length;Je<un;++Je)Ie[Je]=P.charCodeAt(Je);P=Ie}O.chmod(ne,146|Bt);var Ne=O.open(ne,577);O.write(Ne,P,0,P.length,0,vt),O.close(Ne),O.chmod(ne,Bt)}return ne},createDevice:function(y,S,P,$){var dt=Yt.join2("string"==typeof y?y:O.getPath(y),S),vt=O.getMode(!!P,!!$);O.createDevice.major||(O.createDevice.major=64);var Et=O.makedev(O.createDevice.major++,0);return O.registerDevice(Et,{open:function(Bt){Bt.seekable=!1},close:function(Bt){$&&$.buffer&&$.buffer.length&&$(10)},read:function(Bt,ne,Ie,Je,un){for(var Ne=0,Ge=0;Ge<Je;Ge++){var Tn;try{Tn=P()}catch{throw new O.ErrnoError(29)}if(void 0===Tn&&0===Ne)throw new O.ErrnoError(6);if(null==Tn)break;Ne++,ne[Ie+Ge]=Tn}return Ne&&(Bt.node.timestamp=Date.now()),Ne},write:function(Bt,ne,Ie,Je,un){for(var Ne=0;Ne<Je;Ne++)try{$(ne[Ie+Ne])}catch{throw new O.ErrnoError(29)}return Je&&(Bt.node.timestamp=Date.now()),Ne}}),O.mkdev(dt,vt,Et)},forceLoadFile:function(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!zt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{y.contents=Hi(zt(y.url),!0),y.usedBytes=y.contents.length}catch{throw new O.ErrnoError(29)}},createLazyFile:function(y,S,P,$,dt){function vt(){this.lengthKnown=!1,this.chunks=[]}if(vt.prototype.get=function(Ne){if(!(Ne>this.length-1||Ne<0)){var Ge=Ne%this.chunkSize;return this.getter(Ne/this.chunkSize|0)[Ge]}},vt.prototype.setDataGetter=function(Ne){this.getter=Ne},vt.prototype.cacheLength=function(){var Ne=new XMLHttpRequest;if(Ne.open("HEAD",P,!1),Ne.send(null),!(Ne.status>=200&&Ne.status<300||304===Ne.status))throw new Error("Couldn't load "+P+". Status: "+Ne.status);var Tn,Ge=Number(Ne.getResponseHeader("Content-length")),Ei=(Tn=Ne.getResponseHeader("Accept-Ranges"))&&"bytes"===Tn,gr=(Tn=Ne.getResponseHeader("Content-Encoding"))&&"gzip"===Tn,Di=1048576;Ei||(Di=Ge);var yi=this;yi.setDataGetter(function(Yi){var _r=Yi*Di,qn=(Yi+1)*Di-1;if(qn=Math.min(qn,Ge-1),typeof yi.chunks[Yi]>"u"&&(yi.chunks[Yi]=function(Yi,_r){if(Yi>_r)throw new Error("invalid range ("+Yi+", "+_r+") or no bytes requested!");if(_r>Ge-1)throw new Error("only "+Ge+" bytes available! programmer error!");var qn=new XMLHttpRequest;if(qn.open("GET",P,!1),Ge!==Di&&qn.setRequestHeader("Range","bytes="+Yi+"-"+_r),typeof Uint8Array<"u"&&(qn.responseType="arraybuffer"),qn.overrideMimeType&&qn.overrideMimeType("text/plain; charset=x-user-defined"),qn.send(null),!(qn.status>=200&&qn.status<300||304===qn.status))throw new Error("Couldn't load "+P+". Status: "+qn.status);return void 0!==qn.response?new Uint8Array(qn.response||[]):Hi(qn.responseText||"",!0)}(_r,qn)),typeof yi.chunks[Yi]>"u")throw new Error("doXHR failed!");return yi.chunks[Yi]}),(gr||!Ge)&&(Di=Ge=1,Ge=this.getter(0).length,Di=Ge,Mt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Ge,this._chunkSize=Di,this.lengthKnown=!0},typeof XMLHttpRequest<"u")throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Bt,ne=O.createFile(y,S,Bt={isDevice:!1,url:P},$,dt);Bt.contents?ne.contents=Bt.contents:Bt.url&&(ne.contents=null,ne.url=Bt.url),Object.defineProperties(ne,{usedBytes:{get:function(){return this.contents.length}}});var Ie={};return Object.keys(ne.stream_ops).forEach(function(un){var Ne=ne.stream_ops[un];Ie[un]=function(){return O.forceLoadFile(ne),Ne.apply(null,arguments)}}),Ie.read=function(Ne,Ge,Tn,Ei,gr){O.forceLoadFile(ne);var Di=Ne.node.contents;if(gr>=Di.length)return 0;var Ar=Math.min(Di.length-gr,Ei);if(Di.slice)for(var yi=0;yi<Ar;yi++)Ge[Tn+yi]=Di[gr+yi];else for(yi=0;yi<Ar;yi++)Ge[Tn+yi]=Di.get(gr+yi);return Ar},ne.stream_ops=Ie,ne},createPreloadedFile:function(y,S,P,$,dt,vt,Et,Bt,ne,Ie){Browser.init();var Je=S?pt.resolve(Yt.join2(y,S)):y;function un(Ne){function Ge(Ei){Ie&&Ie(),Bt||O.createDataFile(y,S,Ei,$,dt,ne),vt&&vt(),mn()}var Tn=!1;E.preloadPlugins.forEach(function(Ei){Tn||Ei.canHandle(Je)&&(Ei.handle(Ne,Je,Ge,function(){Et&&Et(),mn()}),Tn=!0)}),Tn||Ge(Ne)}Mn(),"string"==typeof P?function le(y,S,P,$){var dt=$?"":"al "+y;de(y,function(vt){Te(vt,'Loading data file "'+y+'" failed (no arrayBuffer).'),S(new Uint8Array(vt)),dt&&mn()},function(vt){if(!P)throw'Loading data file "'+y+'" failed.';P()}),dt&&Mn()}(P,function(Ne){un(Ne)},Et):un(P)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(y,S,P){S=S||function(){},P=P||function(){};var $=O.indexedDB();try{var dt=$.open(O.DB_NAME(),O.DB_VERSION)}catch(vt){return P(vt)}dt.onupgradeneeded=function(){Mt("creating db"),dt.result.createObjectStore(O.DB_STORE_NAME)},dt.onsuccess=function(){var Bt=dt.result.transaction([O.DB_STORE_NAME],"readwrite"),ne=Bt.objectStore(O.DB_STORE_NAME),Ie=0,Je=0,un=y.length;function Ne(){0==Je?S():P()}y.forEach(function(Ge){var Tn=ne.put(O.analyzePath(Ge).object.contents,Ge);Tn.onsuccess=function(){++Ie+Je==un&&Ne()},Tn.onerror=function(){Je++,Ie+Je==un&&Ne()}}),Bt.onerror=P},dt.onerror=P},loadFilesFromDB:function(y,S,P){S=S||function(){},P=P||function(){};var $=O.indexedDB();try{var dt=$.open(O.DB_NAME(),O.DB_VERSION)}catch(vt){return P(vt)}dt.onupgradeneeded=P,dt.onsuccess=function(){var Et=dt.result;try{var Bt=Et.transaction([O.DB_STORE_NAME],"readonly")}catch(Ge){return void P(Ge)}var ne=Bt.objectStore(O.DB_STORE_NAME),Ie=0,Je=0,un=y.length;function Ne(){0==Je?S():P()}y.forEach(function(Ge){var Tn=ne.get(Ge);Tn.onsuccess=function(){O.analyzePath(Ge).exists&&O.unlink(Ge),O.createDataFile(Yt.dirname(Ge),Yt.basename(Ge),Tn.result,!0,!0,!0),++Ie+Je==un&&Ne()},Tn.onerror=function(){Je++,Ie+Je==un&&Ne()}}),Bt.onerror=P},dt.onerror=P}},se={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(y,S,P){if("/"===S[0])return S;var $;if(-100===y)$=O.cwd();else{var dt=O.getStream(y);if(!dt)throw new O.ErrnoError(8);$=dt.path}if(0==S.length){if(!P)throw new O.ErrnoError(44);return $}return Yt.join2($,S)},doStat:function(y,S,P){try{var $=y(S)}catch(dt){if(dt&&dt.node&&Yt.normalize(S)!==Yt.normalize(O.getPath(dt.node)))return-54;throw dt}return ee[P>>2]=$.dev,ee[P+4>>2]=0,ee[P+8>>2]=$.ino,ee[P+12>>2]=$.mode,ee[P+16>>2]=$.nlink,ee[P+20>>2]=$.uid,ee[P+24>>2]=$.gid,ee[P+28>>2]=$.rdev,ee[P+32>>2]=0,z=[$.size>>>0,(dn=$.size,+Math.abs(dn)>=1?dn>0?(0|Math.min(+Math.floor(dn/4294967296),4294967295))>>>0:~~+Math.ceil((dn-+(~~dn>>>0))/4294967296)>>>0:0)],ee[P+40>>2]=z[0],ee[P+44>>2]=z[1],ee[P+48>>2]=4096,ee[P+52>>2]=$.blocks,ee[P+56>>2]=$.atime.getTime()/1e3|0,ee[P+60>>2]=0,ee[P+64>>2]=$.mtime.getTime()/1e3|0,ee[P+68>>2]=0,ee[P+72>>2]=$.ctime.getTime()/1e3|0,ee[P+76>>2]=0,z=[$.ino>>>0,(dn=$.ino,+Math.abs(dn)>=1?dn>0?(0|Math.min(+Math.floor(dn/4294967296),4294967295))>>>0:~~+Math.ceil((dn-+(~~dn>>>0))/4294967296)>>>0:0)],ee[P+80>>2]=z[0],ee[P+84>>2]=z[1],0},doMsync:function(y,S,P,$,dt){var vt=ce.slice(y,y+P);O.msync(S,vt,dt,P,$)},doMkdir:function(y,S){return"/"===(y=Yt.normalize(y))[y.length-1]&&(y=y.substr(0,y.length-1)),O.mkdir(y,S,0),0},doMknod:function(y,S,P){switch(61440&S){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return O.mknod(y,S,P),0},doReadlink:function(y,S,P){if(P<=0)return-28;var $=O.readlink(y),dt=Math.min(P,en($)),vt=Wt[S+dt];return function Ve(y,S,P){return Ue(y,ce,S,P)}($,S,P+1),Wt[S+dt]=vt,dt},doAccess:function(y,S){if(-8&S)return-28;var $=O.lookupPath(y,{follow:!0}).node;if(!$)return-44;var dt="";return 4&S&&(dt+="r"),2&S&&(dt+="w"),1&S&&(dt+="x"),dt&&O.nodePermissions($,dt)?-2:0},doDup:function(y,S,P){var $=O.getStream(P);return $&&O.close($),O.open(y,S,0,P,P).fd},doReadv:function(y,S,P,$){for(var dt=0,vt=0;vt<P;vt++){var Bt=ee[S+(8*vt+4)>>2],ne=O.read(y,Wt,ee[S+8*vt>>2],Bt,$);if(ne<0)return-1;if(dt+=ne,ne<Bt)break}return dt},doWritev:function(y,S,P,$){for(var dt=0,vt=0;vt<P;vt++){var ne=O.write(y,Wt,ee[S+8*vt>>2],ee[S+(8*vt+4)>>2],$);if(ne<0)return-1;dt+=ne}return dt},varargs:void 0,get:function(){return se.varargs+=4,ee[se.varargs-4>>2]},getStr:function(y){return Ee(y)},getStreamFromFD:function(y){var S=O.getStream(y);if(!S)throw new O.ErrnoError(8);return S},get64:function(y,S){return y}};var Vn=[];function Xe(y){try{return Kt.grow(y-Tt.byteLength+65535>>>16),ze(Kt.buffer),1}catch{}}var wn={};function ci(){if(!ci.strings){var S={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Qt||"./this.program"};for(var P in wn)void 0===wn[P]?delete S[P]:S[P]=wn[P];var $=[];for(var P in S)$.push(P+"="+S[P]);ci.strings=$}return ci.strings}var gn=function(y,S,P,$){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=O.nextInode++,this.name=S,this.mode=P,this.node_ops={},this.stream_ops={},this.rdev=$};function Hi(y,S,P){var $=P>0?P:en(y)+1,dt=new Array($),vt=Ue(y,dt,0,dt.length);return S&&(dt.length=vt),dt}Object.defineProperties(gn.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(y){y?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(y){y?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return O.isDir(this.mode)}},isDevice:{get:function(){return O.isChrdev(this.mode)}}}),O.FSNode=gn,O.staticInit();var qe={A:function Jt(y,S){return function Gt(y,S){var P;if(0===y)P=Date.now();else{if(1!==y&&4!==y)return Pt(28),-1;P=bt()}return ee[S>>2]=P/1e3|0,ee[S+4>>2]=P%1e3*1e3*1e3|0,0}(y,S)},B:function Se(y,S){try{return y=se.getStr(y),se.doAccess(y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},h:function Ce(y,S,P){se.varargs=P;try{var $=se.getStreamFromFD(y);switch(S){case 0:return(dt=se.get())<0?-28:O.open($.path,$.flags,0,dt).fd;case 1:case 2:case 6:case 7:return 0;case 3:return $.flags;case 4:var dt=se.get();return $.flags|=dt,0;case 5:return dt=se.get(),_e[dt+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Pt(28),-1}}catch(Bt){if(typeof O>"u"||!(Bt instanceof O.ErrnoError))throw Bt;return-Bt.errno}},x:function je(y,S){try{var P=se.getStreamFromFD(y);return se.doStat(O.stat,P.path,S)}catch($){if(typeof O>"u"||!($ instanceof O.ErrnoError))throw $;return-$.errno}},u:function Pe(y,S,P,$){try{S=se.getStr(S);var dt=256&$,vt=4096&$;return $&=-4353,S=se.calculateAt(y,S,vt),se.doStat(dt?O.lstat:O.stat,S,P)}catch(Et){if(typeof O>"u"||!(Et instanceof O.ErrnoError))throw Et;return-Et.errno}},y:function Be(y,S,P){se.varargs=P;try{var $=se.getStreamFromFD(y);switch(S){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return $.tty?0:-59;case 21519:if(!$.tty)return-59;var dt=se.get();return ee[dt>>2]=0,0;case 21520:return $.tty?-28:-59;case 21531:return dt=se.get(),O.ioctl($,S,dt);default:nn("bad ioctl syscall "+S)}}catch(vt){if(typeof O>"u"||!(vt instanceof O.ErrnoError))throw vt;return-vt.errno}},k:function me(y,S,P,$,dt,vt){try{return function ue(y,S,P,$,dt,vt){vt<<=12;var Et,Bt=!1;if(0!=(16&$)&&y%65536!=0)return-28;if(0!=(32&$)){if(!(Et=Xt(S)))return-48;Bt=!0}else{var ne=O.getStream(dt);if(!ne)return-8;var Ie=O.mmap(ne,y,S,vt,P,$);Et=Ie.ptr,Bt=Ie.allocated}return se.mappings[Et]={malloc:Et,len:S,allocated:Bt,fd:dt,prot:P,flags:$,offset:vt},Et}(y,S,P,$,dt,vt)}catch(Et){if(typeof O>"u"||!(Et instanceof O.ErrnoError))throw Et;return-Et.errno}},j:function pn(y,S){try{return function Fe(y,S){var P=se.mappings[y];if(0===S||!P)return-28;if(S===P.len){var $=O.getStream(P.fd);$&&2&P.prot&&se.doMsync(y,$,S,P.flags,P.offset),se.mappings[y]=null,P.allocated&&xt(P.malloc)}return 0}(y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},e:function ln(y,S,P){se.varargs=P;try{var $=se.getStr(y),dt=P?se.get():0;return O.open($,S,dt).fd}catch(Et){if(typeof O>"u"||!(Et instanceof O.ErrnoError))throw Et;return-Et.errno}},v:function Ye(y,S){try{return y=se.getStr(y),se.doStat(O.stat,y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},z:function We(y){try{return y=se.getStr(y),O.unlink(y),0}catch(S){if(typeof O>"u"||!(S instanceof O.ErrnoError))throw S;return-S.errno}},r:function An(){throw"longjmp"},q:function Zn(){nn("")},C:function Pi(y,S,P){var $=function Xn(y,S){var P;for(Vn.length=0,S>>=2;P=ce[y++];){var $=P<105;$&&1&S&&S++,Vn.push($?Ze[S++>>1]:ee[S]),++S}return Vn}(S,P);return X[y].apply(null,$)},o:function he(y,S,P){ce.copyWithin(y,S,S+P)},p:function vn(y){var S=ce.length,P=2147483648;if((y>>>=0)>P)return!1;for(var $=1;$<=4;$*=2){var dt=S*(1+.2/$);if(dt=Math.min(dt,y+100663296),Xe(Math.min(P,sn(Math.max(y,dt),65536))))return!0}return!1},s:function vi(y,S){var P=0;return ci().forEach(function($,dt){var vt=S+P;ee[y+4*dt>>2]=vt,function be(y,S,P){for(var $=0;$<y.length;++$)Wt[S++>>0]=y.charCodeAt($);P||(Wt[S>>0]=0)}($,vt),P+=$.length+1}),0},t:function jn(y,S){var P=ci();ee[y>>2]=P.length;var $=0;return P.forEach(function(dt){$+=dt.length+1}),ee[S>>2]=$,0},a:function Vi(y){!function er(y,S){!function di(y){(function Si(){return Zt||!1})()||(E.onExit&&E.onExit(y),xe=!0),pe(y,new _n(y))}(y)}(y)},d:function Jn(y){try{var S=se.getStreamFromFD(y);return O.close(S),0}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return P.errno}},i:function bi(y,S,P,$){try{var dt=se.getStreamFromFD(y),vt=se.doReadv(dt,S,P);return ee[$>>2]=vt,0}catch(Et){if(typeof O>"u"||!(Et instanceof O.ErrnoError))throw Et;return Et.errno}},n:function fn(y,S,P,$,dt){try{var vt=se.getStreamFromFD(y),Bt=4294967296*P+(S>>>0),ne=9007199254740992;return Bt<=-ne||Bt>=ne?-61:(O.llseek(vt,Bt,$),z=[vt.position>>>0,(dn=vt.position,+Math.abs(dn)>=1?dn>0?(0|Math.min(+Math.floor(dn/4294967296),4294967295))>>>0:~~+Math.ceil((dn-+(~~dn>>>0))/4294967296)>>>0:0)],ee[dt>>2]=z[0],ee[dt+4>>2]=z[1],vt.getdents&&0===Bt&&0===$&&(vt.getdents=null),0)}catch(Ie){if(typeof O>"u"||!(Ie instanceof O.ErrnoError))throw Ie;return Ie.errno}},g:function cn(y,S,P,$){try{var dt=se.getStreamFromFD(y),vt=se.doWritev(dt,S,P);return ee[$>>2]=vt,0}catch(Et){if(typeof O>"u"||!(Et instanceof O.ErrnoError))throw Et;return Et.errno}},c:function ui(){return jt},w:function Ji(y){var S=Date.now();return ee[y>>2]=S/1e3|0,ee[y+4>>2]=S%1e3*1e3|0,0},l:function ke(y,S,P,$,dt,vt,Et){var Bt=Rt();try{return A(y)(S,P,$,dt,vt,Et)}catch(ne){if(oe(Bt),ne!==ne+0&&"longjmp"!==ne)throw ne;Ae(1,0)}},m:function rn(y,S){var P=Rt();try{A(y)(S)}catch($){if(oe(P),$!==$+0&&"longjmp"!==$)throw $;Ae(1,0)}},b:function hi(y){!function(y){jt=y}(y)},f:function Fi(y){var S=Date.now()/1e3|0;return y&&(ee[y>>2]=S),S}};(function Fn(){var y={a:qe};function S(Et,Bt){E.asm=Et.exports,ze((Kt=E.asm.D).buffer),Cn=E.asm.M,function Qi(y){Mi.unshift(y)}(E.asm.E),mn()}function P(Et){S(Et.instance)}function $(Et){return function Zi(){return Ht||"function"!=typeof fetch?Promise.resolve().then(function(){return we(kn)}):fetch(kn,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+kn+"'";return y.arrayBuffer()}).catch(function(){return we(kn)})}().then(function(Bt){return WebAssembly.instantiate(Bt,y)}).then(function(Bt){return Bt}).then(Et,function(Bt){te("failed to asynchronously prepare wasm: "+Bt),nn(Bt)})}if(Mn(),E.instantiateWasm)try{return E.instantiateWasm(y,S)}catch(Et){return te("Module.instantiateWasm callback failed with error: "+Et),!1}return function dt(){return Ht||"function"!=typeof WebAssembly.instantiateStreaming||li(kn)||"function"!=typeof fetch?$(P):fetch(kn,{credentials:"same-origin"}).then(function(Et){return WebAssembly.instantiateStreaming(Et,y).then(P,function(ne){return te("wasm streaming compile failed: "+ne),te("falling back to ArrayBuffer instantiation"),$(P)})})}().catch(ft),{}})(),E.___wasm_call_ctors=function(){return(E.___wasm_call_ctors=E.asm.E).apply(null,arguments)};var Ti=E._emscripten_bind_VoidPtr___destroy___0=function(){return(Ti=E._emscripten_bind_VoidPtr___destroy___0=E.asm.F).apply(null,arguments)},On=E._emscripten_bind_Graphviz_Graphviz_2=function(){return(On=E._emscripten_bind_Graphviz_Graphviz_2=E.asm.G).apply(null,arguments)},b=E._emscripten_bind_Graphviz_version_0=function(){return(b=E._emscripten_bind_Graphviz_version_0=E.asm.H).apply(null,arguments)},k=E._emscripten_bind_Graphviz_lastError_0=function(){return(k=E._emscripten_bind_Graphviz_lastError_0=E.asm.I).apply(null,arguments)},V=E._emscripten_bind_Graphviz_layout_3=function(){return(V=E._emscripten_bind_Graphviz_layout_3=E.asm.J).apply(null,arguments)},it=E._emscripten_bind_Graphviz_createFile_2=function(){return(it=E._emscripten_bind_Graphviz_createFile_2=E.asm.K).apply(null,arguments)},ht=E._emscripten_bind_Graphviz___destroy___0=function(){return(ht=E._emscripten_bind_Graphviz___destroy___0=E.asm.L).apply(null,arguments)};E._malloc=function(){return(E._malloc=E.asm.N).apply(null,arguments)};var Me,xt=E._free=function(){return(xt=E._free=E.asm.O).apply(null,arguments)},Ot=E.___errno_location=function(){return(Ot=E.___errno_location=E.asm.P).apply(null,arguments)},Rt=E.stackSave=function(){return(Rt=E.stackSave=E.asm.Q).apply(null,arguments)},oe=E.stackRestore=function(){return(oe=E.stackRestore=E.asm.R).apply(null,arguments)},Ae=E._setThrew=function(){return(Ae=E._setThrew=E.asm.S).apply(null,arguments)},$e=E._memalign=function(){return($e=E._memalign=E.asm.T).apply(null,arguments)};function _n(y){this.name="ExitStatus",this.message="Program terminated with exit("+y+")",this.status=y}function Kn(y){function S(){Me||(Me=!0,E.calledRun=!0,!xe&&(function Ri(){!E.noFSInit&&!O.init.initialized&&O.init(),O.ignorePermissions=!1,lt(Mi)}(),ut(E),E.onRuntimeInitialized&&E.onRuntimeInitialized(),function Ni(){if(E.postRun)for("function"==typeof E.postRun&&(E.postRun=[E.postRun]);E.postRun.length;)y=E.postRun.shift(),mi.unshift(y);var y;lt(mi)}()))}fe>0||(function tr(){if(E.preRun)for("function"==typeof E.preRun&&(E.preRun=[E.preRun]);E.preRun.length;)y=E.preRun.shift(),oi.unshift(y);var y;lt(oi)}(),fe>0)||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),S()},1)):S())}if(En=function y(){Me||Kn(),Me||(En=y)},E.run=Kn,E.preInit)for("function"==typeof E.preInit&&(E.preInit=[E.preInit]);E.preInit.length>0;)E.preInit.pop()();function Nn(){}function Gn(y){return(y||Nn).__cache__}function xi(y,S){var P=Gn(S),$=P[y];return $||(($=Object.create((S||Nn).prototype)).ptr=y,P[y]=$)}Kn(),(Nn.prototype=Object.create(Nn.prototype)).constructor=Nn,Nn.prototype.__class__=Nn,Nn.__cache__={},E.WrapperObject=Nn,E.getCache=Gn,E.wrapPointer=xi,E.castObject=function nr(y,S){return xi(y.ptr,S)},E.NULL=xi(0),E.destroy=function Pn(y){if(!y.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";y.__destroy__(),delete Gn(y.__class__)[y.ptr]},E.compare=function xa(y,S){return y.ptr===S.ptr},E.getPointer=function Un(y){return y.ptr},E.getClass=function Ya(y){return y.__class__};var bn={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(bn.needed){for(var y=0;y<bn.temps.length;y++)E._free(bn.temps[y]);bn.temps.length=0,E._free(bn.buffer),bn.buffer=0,bn.size+=bn.needed,bn.needed=0}bn.buffer||(bn.size+=128,bn.buffer=E._malloc(bn.size),Te(bn.buffer)),bn.pos=0},alloc:function(y,S){Te(bn.buffer);var dt,$=y.length*S.BYTES_PER_ELEMENT;return bn.pos+($=$+7&-8)>=bn.size?(Te($>0),bn.needed+=$,dt=E._malloc($),bn.temps.push(dt)):(dt=bn.buffer+bn.pos,bn.pos+=$),dt},copy:function(y,S,P){switch(P>>>=0,S.BYTES_PER_ELEMENT){case 2:P>>>=1;break;case 4:P>>>=2;break;case 8:P>>>=3}for(var dt=0;dt<y.length;dt++)S[P+dt]=y[dt]}};function wr(y){if("string"==typeof y){var S=Hi(y),P=bn.alloc(S,Wt);return bn.copy(S,Wt,P),P}return y}function Ki(){throw"cannot construct a VoidPtr, no constructor in IDL"}function zn(y,S){y&&"object"==typeof y&&(y=y.ptr),S&&"object"==typeof S&&(S=S.ptr),this.ptr=On(y,S),Gn(zn)[this.ptr]=this}return(Ki.prototype=Object.create(Nn.prototype)).constructor=Ki,Ki.prototype.__class__=Ki,Ki.__cache__={},E.VoidPtr=Ki,Ki.prototype.__destroy__=Ki.prototype.__destroy__=function(){Ti(this.ptr)},(zn.prototype=Object.create(Nn.prototype)).constructor=zn,zn.prototype.__class__=zn,zn.__cache__={},E.Graphviz=zn,zn.prototype.version=zn.prototype.version=function(){return Ee(b(this.ptr))},zn.prototype.lastError=zn.prototype.lastError=function(){return Ee(k(this.ptr))},zn.prototype.layout=zn.prototype.layout=function(y,S,P){var $=this.ptr;return bn.prepare(),y=y&&"object"==typeof y?y.ptr:wr(y),S=S&&"object"==typeof S?S.ptr:wr(S),P=P&&"object"==typeof P?P.ptr:wr(P),Ee(V($,y,S,P))},zn.prototype.createFile=zn.prototype.createFile=function(y,S){var P=this.ptr;bn.prepare(),y=y&&"object"==typeof y?y.ptr:wr(y),S=S&&"object"==typeof S?S.ptr:wr(S),it(P,y,S)},zn.prototype.__destroy__=zn.prototype.__destroy__=function(){ht(this.ptr)},F.ready}}();Y.exports=rt}(M);var Z=Object.freeze(c({__proto__:null,default:M.exports},[M.exports])),H=function(){return H=Object.assign||function(Y){for(var nt,rt=1,q=arguments.length;rt<q;rt++)for(var F in nt=arguments[rt])Object.prototype.hasOwnProperty.call(nt,F)&&(Y[F]=nt[F]);return Y},H.apply(this,arguments)},G=function(Y,nt,rt){if(rt||2===arguments.length)for(var E,q=0,F=nt.length;q<F;q++)(E||!(q in nt))&&(E||(E=Array.prototype.slice.call(nt,0,q)),E[q]=nt[q]);return Y.concat(E||Array.prototype.slice.call(nt))};function tt(Y){return{path:Y.path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'.concat(Y.width,'" height="').concat(Y.height,'"></svg>')}}function st(Y,nt){var rt=H({images:[],files:[]},nt);G(G([],rt.files,!0),function K(Y){return Y.map(tt)}(rt.images),!0).forEach(function(q){return Y.createFile(q.path,q.data)})}var W={layout:function(Y,nt,rt,q){return void 0===nt&&(nt="svg"),void 0===rt&&(rt="dot"),Y?u(Z,q?.wasmFolder,q?.wasmBinary).then(function(F){var E=new F.Graphviz(void 0!==q?.yInvert&&q?.yInvert,void 0!==q?.nop?q?.nop:0);st(E,q);var ut=E.layout(Y,nt,rt);if(F.destroy(E),!ut)throw new Error(F.Graphviz.prototype.lastError());return ut}):Promise.resolve("")},circo:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"circo",rt)},dot:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"dot",rt)},fdp:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"fdp",rt)},sfdp:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"sfdp",rt)},neato:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"neato",rt)},osage:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"osage",rt)},patchwork:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"patchwork",rt)},twopi:function(Y,nt,rt){return void 0===nt&&(nt="svg"),this.layout(Y,nt,"twopi",rt)}},et=function(){function Y(nt){this._wasm=nt}return Y.prototype.layout=function(nt,rt,q,F){if(void 0===rt&&(rt="svg"),void 0===q&&(q="dot"),!nt)return"";var E=new this._wasm.Graphviz(F?.yInvert?1:0,F?.nop?F?.nop:0);st(E,F);var ut=E.layout(nt,rt,q);if(this._wasm.destroy(E),!ut)throw new Error(this._wasm.Graphviz.prototype.lastError());return ut},Y.prototype.circo=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"circo",q)},Y.prototype.dot=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"dot",q)},Y.prototype.fdp=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"fdp",q)},Y.prototype.sfdp=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"sfdp",q)},Y.prototype.neato=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"neato",q)},Y.prototype.osage=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"osage",q)},Y.prototype.patchwork=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"patchwork",q)},Y.prototype.twopi=function(nt,rt,q){return void 0===rt&&(rt="svg"),this.layout(nt,rt,"twopi",q)},Y}();s.GraphvizSync=et,s.StackElement=g,s.StackParser=C,s.expatVersion=function I(Y,nt){return u(m,Y,nt).then(function(rt){return rt.CExpat.prototype.version()})},s.graphviz=W,s.graphvizSync=function at(Y,nt){return u(Z,Y,nt).then(function(rt){return new et(rt)})},s.graphvizVersion=function j(Y,nt){return u(Z,Y,nt).then(function(rt){return rt.Graphviz.prototype.version()})},s.parse=B,s.wasmFolder=l,Object.defineProperty(s,"__esModule",{value:!0})}(D)},82745:(w,D,s)=>{"use strict";s.r(D),s.d(D,{AdminModule:()=>Vy});var c={};s.r(c),s.d(c,{forceCenter:()=>xd,forceCollide:()=>Ho,forceLink:()=>Qo,forceManyBody:()=>Jo,forceRadial:()=>Wd,forceSimulation:()=>jo,forceX:()=>Xd,forceY:()=>$d});var x={};s.r(x),s.d(x,{dispatch:()=>Ca.Z});var _={};s.r(_),s.d(_,{interval:()=>jd,now:()=>lr.zO,timeout:()=>Ja.Z,timer:()=>lr.HT,timerFlush:()=>lr.R8});var m=s(36895),p=s(94364),t=s(94650),d=s(77968),l=s(97392),h=s(61283),f=s(4235),u=s(89383);const g=function(){return{color:"black"}};let C=(()=>{class n{constructor(e){this.sideMenuService=e}ngOnInit(){this.sideMenuService.setAdminItems([])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-page"]],decls:7,vars:5,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","admin-theme"],[1,"page-title","d-flex"],["svgIcon","perun-perun-admin",1,"perun-icon","icon-scale",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.TgZ(2,"h1",1),t._UZ(3,"mat-icon",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(4,g)),t.xp6(1),t.hij(" ",t.lcZ(5,2,"ADMIN.TITLE")," "))},dependencies:[m.PC,l.Hw,h.A,f.W,u.X$]}),n})();var L=s(71135);let I=(()=>{class n{constructor(){this.navItems=[{cssIcon:"perun-attributes",url:"/admin/attributes",label:"MENU_ITEMS.ADMIN.ATTRIBUTES",style:"admin-btn"},{cssIcon:"perun-user",url:"/admin/users",label:"MENU_ITEMS.ADMIN.USERS",style:"admin-btn"},{cssIcon:"perun-owner-grey",url:"/admin/owners",label:"MENU_ITEMS.ADMIN.OWNERS",style:"admin-btn"},{cssIcon:"perun-service",url:"/admin/services",label:"MENU_ITEMS.ADMIN.SERVICES",style:"admin-btn"},{cssIcon:"perun-preview",url:"/admin/visualizer",label:"MENU_ITEMS.ADMIN.VISUALIZER",style:"admin-btn"},{cssIcon:"perun-external-sources",url:"/admin/ext_sources",label:"MENU_ITEMS.ADMIN.EXT_SOURCES",style:"admin-btn"},{cssIcon:"perun-audit-log",url:"/admin/audit_log",label:"MENU_ITEMS.ADMIN.AUDIT_LOG",style:"admin-btn"},{cssIcon:"perun-consent-hubs",url:"/admin/consent_hubs",label:"MENU_ITEMS.ADMIN.CONSENT_HUBS",style:"admin-btn"},{cssIcon:"perun-searcher",url:"/admin/searcher",label:"MENU_ITEMS.ADMIN.SEARCHER",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.navItems)("size","small"))},dependencies:[L.L]}),n})();var B=s(95017),M=s(65412),R=s(30671),Z=s(69723),H=s(32105),G=s(4859),tt=s(51572),K=s(98380);function st(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function j(n,r){1&n&&t._UZ(0,"th",16)}function W(n,r){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function et(n,r){1&n&&t._UZ(0,"tr",18)}function at(n,r){1&n&&t._UZ(0,"tr",19)}function Y(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,j,1,0,"th",11),t.YNc(10,W,2,1,"td",12),t.BQk(),t.YNc(11,et,1,0,"tr",13),t.YNc(12,at,1,0,"tr",14),t.qZA(),t.TgZ(13,"perun-web-apps-alert",15),t._uU(14),t.ALo(15,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE2")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.hij(" ",t.lcZ(15,10,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.WARNING")," ")}}let nt=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.attributesManager=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.dataSource=new R.by(this.data.attributes)}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0;const e=[];for(const i of this.data.attributes)e.push(i.id);this.attributesManager.deleteAttributeDefinitions(e).subscribe(()=>{this.translate.get("DIALOGS.DELETE_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-attribute-definition-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","","data-cy","confirm-delete-attr-definition-button",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",1,"mt-3"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,st,1,0,"mat-spinner",1),t.YNc(5,Y,16,12,"div",2),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onSubmit()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},dependencies:[m.O5,G.lW,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,M.uh,M.xY,M.H8,tt.Ou,K.w,u.X$]}),n})();var rt=s(24006),q=s(78372),F=s(63900),E=s(61135),ut=s(69751),ft=s(38421),Dt=s(75797),St=s(60515),Qt=s(25403),pe=s(63269);function wt(...n){const r=(0,pe.jO)(n),e=(0,Dt.k)(n);return e.length?new ut.y(i=>{let a=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{a=o=null});for(let v=0;!i.closed&&v<e.length;v++)(0,ft.Xf)(e[v]).subscribe((0,Qt.x)(i,T=>{if(a[v].push(T),a.every(N=>N.length)){const N=a.map(U=>U.shift());i.next(r?r(...N):N),a.some((U,J)=>!U.length&&o[J])&&i.complete()}},()=>{o[v]=!0,!a[v].length&&i.complete()}));return()=>{a=o=null}}):St.E}var yt=s(39646),Nt=s(19516),zt=s(3238),de=s(39349),ie=s(59549),Mt=s(284),te=s(84385),jt=s(3848),ae=s(23123);function At(n,r){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.ALo(2,"displayedRole"),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.roleName),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function Ht(n,r){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}let Zt=(()=>{class n{constructor(e){this.attrRightsService=e,this.policyRemoved=new t.vpe,this.roles=this.attrRightsService.getRoles()}ngOnInit(){this.selectedRole=new E.X(this.policy.role),this.objects=this.selectedRole.pipe((0,F.w)(e=>this.attrRightsService.getObjects(e)))}changeRole(e){this.selectedRole.next(e.value),this.policy.object="None"}remove(){this.policyRemoved.emit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-item"]],inputs:{policy:"policy"},outputs:{policyRemoved:"policyRemoved"},decls:14,vars:14,consts:[[1,"flex-row"],[1,"grow-item"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","",1,"close-button",3,"click"],["inline","true"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),t.NdJ("ngModelChange",function(o){return i.policy.role=o})("selectionChange",function(o){return i.changeRole(o)}),t.ALo(3,"translate"),t.YNc(4,At,3,4,"mat-option",3),t.ALo(5,"async"),t.qZA()(),t.TgZ(6,"mat-form-field")(7,"mat-select",4),t.NdJ("ngModelChange",function(o){return i.policy.object=o}),t.ALo(8,"translate"),t.YNc(9,Ht,2,2,"mat-option",3),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"button",5),t.NdJ("click",function(){return i.remove()}),t.TgZ(12,"mat-icon",6),t._uU(13,"remove_circle"),t.qZA()()()),2&e&&(t.xp6(2),t.s9C("placeholder",t.lcZ(3,6,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ROLE")),t.Q6J("ngModel",i.policy.role),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,8,i.roles)),t.xp6(3),t.s9C("placeholder",t.lcZ(8,10,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ENTITY")),t.Q6J("ngModel",i.policy.object),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,12,i.objects)))},dependencies:[m.sg,rt.JJ,rt.On,l.Hw,G.lW,ie.KE,zt.ey,te.gD,m.Ov,u.X$,ae.i],styles:[".flex-row[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;background:white;border-radius:1em;padding:1em 1em 0}.grow-item[_ngcontent-%COMP%]{flex-grow:2;margin:0 1em}.close-button[_ngcontent-%COMP%]{position:absolute;font-size:1.3em;top:-15px;right:-15px;z-index:100}"]}),n})();function Kt(n,r){1&n&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.AND")," "))}function xe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"perun-web-apps-attribute-rights-item",7),t.NdJ("policyRemoved",function(){const o=t.CHM(e).index,v=t.oxw(2);return t.KtG(v.removePolicy(o))}),t.qZA(),t.YNc(2,Kt,3,3,"div",8),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw(2);t.xp6(1),t.Q6J("policy",e),t.xp6(1),t.Q6J("ngIf",i!==a.collection.policies.length-1)}}function Te(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,xe,3,2,"div",3),t.qZA(),t.TgZ(3,"div",4)(4,"button",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeCollection())}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addPolicy())}),t.TgZ(8,"mat-icon"),t._uU(9,"add_circle"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.collection.policies)}}let Le=(()=>{class n{constructor(){this.collectionRemoved=new t.vpe}addPolicy(){this.collection.policies.push({id:-1,role:null,object:null,policyCollectionId:this.collection.id})}removePolicy(e){this.collection.policies.splice(e,1),0===this.collection.policies.length&&this.removeCollection()}removeCollection(){this.collectionRemoved.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-collection"]],inputs:{collection:"collection"},outputs:{collectionRemoved:"collectionRemoved"},decls:1,vars:1,consts:[["class","collection",4,"ngIf"],[1,"collection"],[1,"column","role-selection"],[4,"ngFor","ngForOf"],[1,"column","controls"],["mat-icon-button","",3,"click"],["color","accent","mat-icon-button","",3,"click"],[3,"policy","policyRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,i){1&e&&t.YNc(0,Te,10,1,"div",0),2&e&&t.Q6J("ngIf",i.collection)},dependencies:[m.sg,m.O5,l.Hw,G.lW,Zt,u.X$],styles:[".collection[_ngcontent-%COMP%]{background-color:#0000001a;padding:1em;border-radius:1em;margin-top:1em;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1em}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}.role-selection[_ngcontent-%COMP%]{flex-grow:2}.controls[_ngcontent-%COMP%]{align-items:flex-end;justify-content:center}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em}"]}),n})();function Oe(n,r){1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.OR")," "))}function Ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"perun-web-apps-attribute-rights-collection",5),t.NdJ("collectionRemoved",function(){const o=t.CHM(e).index,v=t.oxw();return t.KtG(v.removeCollection(o))}),t.qZA(),t.YNc(2,Oe,3,3,"div",6),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw();t.xp6(1),t.Q6J("collection",e.action===a.action?e:null),t.xp6(1),t.Q6J("ngIf",i!==a.lastIndex&&e.action===a.action)}}let Ue=(()=>{class n{ngOnChanges(){this.lastIndex=this.findLastIndex()}addCollection(){this.collections.push({id:-1,attributeId:this.attributeId,action:this.action,policies:[{id:-1,role:null,object:null,policyCollectionId:-1}]}),this.lastIndex=this.findLastIndex()}removeCollection(e){this.collections.splice(e,1),this.lastIndex=this.findLastIndex()}findLastIndex(){let e=0;for(let i=0;i<this.collections.length;i++)this.collections[i].action===this.action&&(e=i);return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-tab"]],inputs:{attributeId:"attributeId",collections:"collections",action:"action"},features:[t.TTD],decls:8,vars:4,consts:[["alert_type","info"],[4,"ngFor","ngForOf"],[1,"button-container"],["color","accent","mat-icon-button","",1,"add-button",3,"click"],["inline","true"],[3,"collection","collectionRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,i){1&e&&(t.TgZ(0,"perun-web-apps-alert",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Ee,3,2,"div",1),t.TgZ(4,"div",2)(5,"button",3),t.NdJ("click",function(){return i.addCollection()}),t.TgZ(6,"mat-icon",4),t._uU(7,"add_circle"),t.qZA()()()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.INFO"),"\n"),t.xp6(2),t.Q6J("ngForOf",i.collections))},dependencies:[m.sg,m.O5,K.w,l.Hw,G.lW,Le,u.X$],styles:[".add-button[_ngcontent-%COMP%]{font-size:2em}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em;font-weight:700}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1em}"]}),n})();function Ve(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate")),2&n){const e=t.oxw().$implicit;t.hij(" ",t.lcZ(1,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS."+e)," ")}}function en(n,r){if(1&n&&(t.TgZ(0,"mat-tab"),t.YNc(1,Ve,2,3,"ng-template",1),t._UZ(2,"perun-web-apps-attribute-rights-tab",2),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Q6J("attributeId",null==i.attDef?null:i.attDef.id)("collections",i.collections)("action",e)}}let be=(()=>{class n{constructor(){this.collections=[],this.actionTabs=["READ","WRITE"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-tab-group"]],inputs:{attDef:"attDef",collections:"collections"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matTabLabel",""],[3,"attributeId","collections","action"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group"),t.YNc(1,en,3,3,"mat-tab",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.actionTabs))},dependencies:[m.sg,jt.SP,jt.uD,jt.uX,Ue,u.X$]}),n})();var sn=s(10266),Tt=s(90455),Wt=s(4765);function ce(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.ALo(1,"translate"),t.TgZ(2,"mat-slide-toggle",2),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.attDef.unique=a)}),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&n){const e=r.ngIf,i=t.oxw();t.s9C("matTooltip",t.lcZ(1,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.TOOLTIP")),t.Q6J("matTooltipDisabled",!e.disable),t.xp6(2),t.Q6J("ngModel",i.attDef.unique)("disabled",e.disable),t.xp6(1),t.hij(" ",t.lcZ(4,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.UNIQUE")," ")}}const _e=function(n){return{disable:n}};let ee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-unique-toggle"]],inputs:{attDef:"attDef"},decls:2,vars:5,consts:[["class","unique-toggle-container","matTooltipPosition","above",3,"matTooltipDisabled","matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"unique-toggle-container",3,"matTooltipDisabled","matTooltip"],["color","accent","labelPosition","before",3,"ngModel","disabled","ngModelChange"]],template:function(e,i){1&e&&(t.YNc(0,ce,5,9,"div",0),t.ALo(1,"disableUniqueAttribute")),2&e&&t.Q6J("ngIf",t.VKq(3,_e,t.lcZ(1,1,i.attDef)))},dependencies:[m.O5,rt.JJ,rt.On,sn.gM,Tt.Rr,u.X$,Wt.b],styles:[".unique-toggle-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:1em 0;width:-moz-fit-content;width:fit-content;font-size:1.125rem}"]}),n})(),Ze=(()=>{class n{constructor(){this.readOperation=!1,this.writeOperation=!1,this.readOperationChanged=new t.vpe,this.writeOperationChanged=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-critical-operations-toggles"]],inputs:{readOperation:"readOperation",writeOperation:"writeOperation"},outputs:{readOperationChanged:"readOperationChanged",writeOperationChanged:"writeOperationChanged"},decls:10,vars:11,consts:[["color","accent","labelPosition","before",1,"toggle-font",3,"ngModel","ngModelChange","toggleChange"],["alert_type","info"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-slide-toggle",0),t.NdJ("ngModelChange",function(o){return i.readOperation=o})("toggleChange",function(){return i.readOperationChanged.emit(!i.readOperation)}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"mat-slide-toggle",0),t.NdJ("ngModelChange",function(o){return i.writeOperation=o})("toggleChange",function(){return i.writeOperationChanged.emit(!i.writeOperation)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"perun-web-apps-alert",1),t._uU(8),t.ALo(9,"translate"),t.qZA()),2&e&&(t.Q6J("ngModel",i.readOperation),t.xp6(1),t.hij(" ",t.lcZ(2,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.READ"),"\n"),t.xp6(3),t.Q6J("ngModel",i.writeOperation),t.xp6(1),t.hij(" ",t.lcZ(6,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.WRITE"),"\n"),t.xp6(3),t.hij(" ",t.lcZ(9,9,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.INFO"),"\n"))},dependencies:[rt.JJ,rt.On,K.w,Tt.Rr,u.X$],styles:[".toggle-font[_ngcontent-%COMP%]{font-size:1.125rem}"]}),n})(),ze=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(".")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"attributeTypeClean",type:n,pure:!0}),n})();function Cn(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function oi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Mi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function mi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function gi(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Si(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function tr(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function Ri(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Ni(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function _i(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Qi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"form",9)(2,"mat-form-field"),t._UZ(3,"input",10),t.ALo(4,"translate"),t.YNc(5,oi,3,3,"mat-error",11),t.qZA(),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",12),t.ALo(8,"translate"),t.YNc(9,Mi,3,3,"mat-error",11),t.qZA(),t.TgZ(10,"mat-form-field")(11,"textarea",13),t.ALo(12,"translate"),t._uU(13,"        "),t.qZA(),t.YNc(14,mi,3,3,"mat-error",11),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-select",14),t.ALo(17,"translate"),t.YNc(18,gi,2,2,"mat-option",15),t.qZA(),t.YNc(19,Si,3,3,"mat-error",11),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-select",16),t.ALo(22,"translate"),t.YNc(23,tr,2,2,"mat-option",15),t.qZA(),t.YNc(24,Ri,3,3,"mat-error",11),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-select",17),t.ALo(27,"translate"),t.YNc(28,Ni,3,4,"mat-option",15),t.qZA(),t.YNc(29,_i,3,3,"mat-error",11),t.qZA()(),t._UZ(30,"perun-web-apps-attribute-unique-toggle",18),t.ALo(31,"async"),t.TgZ(32,"perun-web-apps-attribute-critical-operations-toggles",19),t.NdJ("readOperationChanged",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.finalReadOperations=a)})("writeOperationChanged",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.finalWriteOperations=a)}),t.qZA(),t._UZ(33,"perun-web-apps-attribute-rights-tab-group",20),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,18,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FRIENDLY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","friendlyName")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,20,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","displayName")),t.xp6(2),t.s9C("placeholder",t.lcZ(12,22,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(2),t.s9C("placeholder",t.lcZ(17,24,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ENTITY")),t.xp6(2),t.Q6J("ngForOf",e.entities),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","entity")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,26,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DEFINITION")),t.xp6(2),t.Q6J("ngForOf",e.definitionTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","definitionType")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,28,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VALUE_TYPE")),t.xp6(2),t.Q6J("ngForOf",e.valueTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","valueType")),t.xp6(1),t.Q6J("attDef",t.lcZ(31,30,e.attDef)),t.xp6(3),t.Q6J("collections",e.collections)}}let Bi=(()=>{class n{constructor(e,i,a,o,v,T,N){this.dialogRef=e,this.formBuilder=i,this.attributeService=a,this.attributeRightsService=o,this.notificator=v,this.translate=T,this.uniqueAttPipe=N,this.loading=!1,this.attributeControl=this.formBuilder.group({friendlyName:["",rt.kI.required],displayName:["",rt.kI.required],description:["",rt.kI.required],entity:["",rt.kI.required],definitionType:["",rt.kI.required],valueType:["",rt.kI.required]}),this.entities=["facility","resource","group","group_resource","host","member","member_group","member_resource","user","ues","user_facility","vo","entityless"],this.definitionTypes=["def","opt","virt","core"],this.valueTypes=["java.lang.String","java.lang.Integer","java.lang.Boolean","java.util.ArrayList","java.util.LinkedHashMap"],this.attDef=new E.X({id:0,beanName:"",namespace:"",unique:!1}),this.collections=[],this.attributeControl.valueChanges.pipe((0,q.b)(200)).subscribe(U=>{this.setAttribute(U)})}submit(){this.loading=!0,this.attributeService.createAttributeDefinition({attribute:this.attDef.getValue()}).pipe((0,F.w)(e=>(this.attDefCreated=e,wt((0,yt.of)(e.id),(0,yt.of)(this.collections)))),this.attributeRightsService.addAttributeId(),this.attributeRightsService.filterNullInPolicy(),(0,F.w)(e=>this.attributeService.setAttributePolicyCollections({policyCollections:e})),(0,F.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalReadOperations,!1,this.attDefCreated.id,H.oW.READ)),(0,F.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalWriteOperations,!0,this.attDefCreated.id,H.oW.WRITE))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}cancel(){this.dialogRef.close(!1)}setAttribute(e){const i={id:0,beanName:"",friendlyName:e.friendlyName,displayName:e.displayName,description:e.description,type:e.valueType,namespace:this.createNamespace(e.entity,e.definitionType)};i.unique=this.attDef.getValue().unique&&!this.uniqueAttPipe.transform(i),this.attDef.next(i)}createNamespace(e,i){return"urn:perun:"+e+":attribute-def:"+i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(rt.QS),t.Y36(H.H8),t.Y36(Z.eE),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Nt.bY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-attribute-definition-dialog"]],features:[t._Bn([Nt.bY])],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","create-attr-definition-button","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"dialog-container",3,"formGroup"],["matInput","","formControlName","friendlyName","data-cy","attribute-friendly-name-input","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","displayName","data-cy","attribute-display-name-input","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","data-cy","attribute-description-input","required","",3,"placeholder"],["formControlName","entity","data-cy","attribute-entity-input","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","definitionType","data-cy","attribute-definition-type-input","required","",3,"placeholder"],["formControlName","valueType","data-cy","attribute-value-type-input","required","",3,"placeholder"],[3,"attDef"],[3,"readOperationChanged","writeOperationChanged"],[3,"collections"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Cn,1,0,"mat-spinner",2),t.YNc(5,Qi,34,32,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.cancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.submit()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading||i.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},dependencies:[m.sg,m.O5,zt.ey,de.IC,ie.TO,ie.KE,Mt.Nt,rt._Y,rt.Fj,rt.JJ,rt.JL,rt.Q7,rt.sg,rt.u,G.lW,M.uh,M.xY,M.H8,te.gD,tt.Ou,be,ee,Ze,m.Ov,u.X$,ze]}),n})();var fe=s(9244),En=s(10036);function ji(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function Mn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"perun-web-apps-alert",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",10)(5,"input",11),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.value=a)}),t.ALo(6,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.IMPORT_ATTRIBUTE.INFO")," "),t.xp6(3),t.Q6J("ngModel",e.value)("placeholder",t.lcZ(6,5,"DIALOGS.IMPORT_ATTRIBUTE.HINT"))}}let mn=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.notificator=i,this.translate=a,this.attributesManager=o,this.attributesRightsService=v,this.value="",this.loading=!1}create(){this.loading=!0,this.attributeData=JSON.parse(this.value),this.attributesManager.createAttributeDefinition({attribute:this.attributeData.attributeDefinition}).pipe((0,F.w)(e=>wt((0,yt.of)(e.id),(0,yt.of)(this.attributeData.attributeRights))),this.attributesRightsService.addAttributeId(),(0,F.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e}))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.IMPORT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.H8),t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attribute-import-dialog"]],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","info"],[1,"w-100"],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,ji,1,0,"mat-spinner",2),t.YNc(5,Mn,7,7,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.dialogRef.close()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.create()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.IMPORT_ATTRIBUTE.TITLE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.IMPORT_ATTRIBUTE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===i.value.trim().length||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.IMPORT_ATTRIBUTE.CREATE")," "))},dependencies:[m.O5,ie.KE,Mt.Nt,rt.Fj,rt.JJ,rt.Q7,rt.On,G.lW,M.uh,M.xY,M.H8,tt.Ou,K.w,u.X$]}),n})();var nn=s(96308),Wn=s(36769),li=s(68675),kn=s(64425),we=s(37084),Zi=s(85147),Fn=s(56709),dn=s(43532),z=s(18750),X=s(9185),lt=s(8231),A=s(14849);function bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",23)(1,"mat-checkbox",24),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(3);return t.KtG(a?o.masterToggle():null)}),t.ALo(2,"translate"),t.ALo(3,"masterCheckboxLabel"),t.qZA()()}if(2&n){const e=t.oxw().ngIf,i=t.oxw(2);t.xp6(1),t.Q6J("aria-label",t.lcZ(2,3,t.lcZ(3,5,e.all)))("checked",i.selection.hasValue()&&e.all)("indeterminate",i.selection.hasValue()&&!e.all)}}const Lt=function(n){return{name:n}};function Pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",25)(1,"mat-checkbox",26),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(3);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.ALo(2,"translate"),t.ALo(3,"checkboxLabel"),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("aria-label",t.xi3(2,2,t.lcZ(3,5,i.selection.isSelected(e)),t.VKq(7,Lt,e[0])))("checked",i.selection.isSelected(e))}}function Gt(n,r){1&n&&(t.ynx(0,20),t.YNc(1,bt,4,7,"th",21),t.YNc(2,Pt,4,9,"td",22),t.BQk())}function Jt(n,r){1&n&&(t.TgZ(0,"th",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.KEY")," "))}function Yt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",28)(1,"label")(2,"input",29),t.NdJ("ngModelChange",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onValueChange(o))})("ngModelChange",function(a){const v=t.CHM(e).$implicit;return t.KtG(v[0]=a)}),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngModel",e[0])}}function Q(n,r){1&n&&(t.TgZ(0,"th",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.VALUE")," "))}function pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",28)(1,"perun-web-apps-attribute-value",30),t.NdJ("sendEventToParent2",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onValueChange(o))}),t.qZA()()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("attribute",e[1])}}function mt(n,r){1&n&&t._UZ(0,"tr",31)}function gt(n,r){1&n&&t._UZ(0,"tr",32)}const Ut=function(n){return{all:n}};function Xt(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"perun-web-apps-table-wrapper",11)(2,"table",12),t.YNc(3,Gt,3,0,"ng-container",13),t.ALo(4,"isAllSelected"),t.ynx(5,14),t.YNc(6,Jt,3,3,"th",15),t.YNc(7,Yt,3,1,"td",16),t.BQk(),t.ynx(8,17),t.YNc(9,Q,3,3,"th",15),t.YNc(10,pt,2,1,"td",16),t.BQk(),t.YNc(11,mt,1,0,"tr",18),t.YNc(12,gt,1,0,"tr",19),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("dataLength",e.dataSource.filteredData.length)("hideExport",!0)("tableId",e.tableId),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(11,Ut,t.xi3(4,8,e.dataSource,e.selection.selected.length))),t.xp6(8),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function kt(n,r){1&n&&t._UZ(0,"mat-spinner",33)}function le(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.NO_KEYS_WARNING")," "))}let O=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.attributesManager=v,this.switchView=new t.vpe,this.records=[],this.displayedColumns=["select","key","value"],this.dataSource=new R.by,this.selection=new B.Ov(!0,[]),this.isAddButtonDisabled=!1,this.pageSizeOptions=fe.f7}set matSort(e){this.sort=e}ngOnChanges(){this.ngOnInit()}ngOnInit(){this.loading=!0,this.attDef=this.data.attDef,this.attributesManager.getEntitylessKeys(this.attDef.id).subscribe(e=>{this.attributesManager.getEntitylessAttributesByName(`${this.attDef.namespace}:${this.attDef.friendlyName}`).subscribe(i=>{let a=0;this.records=[];for(const o of e)this.records.push([o,i[a]]),a++;this.dataSource=new R.by(this.records),this.setDataSource(),this.loading=!1})})}setDataSource(){!this.child||!this.child.paginator||this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator)}onSave(){this.updateMapAttributes();for(const e of this.selection.selected)this.attributesManager.setEntitylessAttribute({key:e[0],attribute:e[1]}).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.selection.clear(),this.isAddButtonDisabled=!1}onRemove(){for(const e of this.selection.selected)this.attributesManager.removeEntitylessAttribute(e[0],e[1].id).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.ngOnInit(),this.selection.clear(),this.isAddButtonDisabled=!1}onAdd(){const e=["",this.attDef];e[1].value=void 0,this.records.unshift(e),this.dataSource.data=this.records,this.setDataSource(),this.selection.clear(),this.selection.select(e),this.isAddButtonDisabled=!0}onCancel(){this.dialogRef.close(!1)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}onValueChange(e){this.selection.select(e)}updateMapAttributes(){for(const e of this.items.toArray())"java.util.LinkedHashMap"===e.attribute.type&&e.updateMapAttribute()}ngAfterViewInit(){this.children.changes.subscribe(e=>{this.child=e.first,this.dataSource.paginator=this.child.paginator})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-entityless-attribute-keys-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(nn.YE,7),t.Gf(Zi.Mw,5),t.Gf(fe.l9,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.matSort=a.first),t.iGM(a=t.CRH())&&(i.items=a),t.iGM(a=t.CRH())&&(i.children=a)}},inputs:{attDef:"attDef",tableId:"tableId"},outputs:{switchView:"switchView"},features:[t.TTD],decls:19,vars:19,consts:[["mat-dialog-title",""],["mat-dialog-actions","",1,"mt-3"],["mat-stroked-button","",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"click"],["color","accent","matTooltip","save or remove new attribute first","mat-flat-button","","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltipDisabled","click"],["color","warn","mat-flat-button","",1,"ml-2",3,"click"],["mat-dialog-content","",1,"mt-3",3,"hidden"],["class","card mt-3",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn","class","mt-3",4,"ngIf"],[1,"card","mt-3"],[3,"pageSizeOptions","dataLength","hideExport","tableId"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","New key",1,"mt-2",3,"ngModel","ngModelChange"],[3,"attribute","sendEventToParent2"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],[1,"ml-auto","mr-auto"],["alert_type","warn",1,"mt-3"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return i.switchView.emit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"div",6),t.YNc(16,Xt,13,13,"div",7),t.YNc(17,kt,1,0,"mat-spinner",8),t.YNc(18,le,3,3,"perun-web-apps-alert",9),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.attDef.namespace+":"+i.attDef.friendlyName),t.xp6(3),t.hij(" ",t.lcZ(5,11,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(8,13,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE")," "),t.xp6(2),t.Q6J("disabled",i.isAddButtonDisabled)("matTooltipDisabled",!i.isAddButtonDisabled),t.xp6(1),t.hij(" ",t.lcZ(11,15,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.ADD")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE")," "),t.xp6(2),t.Q6J("hidden",i.loading),t.xp6(1),t.Q6J("ngIf",i.records&&i.records.length),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",0===i.records.length))},dependencies:[m.O5,Mt.Nt,rt.Fj,rt.JJ,rt.On,G.lW,nn.YE,nn.nU,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,Fn.oG,M.uh,M.xY,M.H8,tt.Ou,sn.gM,K.w,dn.M,z.l,u.X$,X.I,lt.G,A.r],styles:[".mat-cell[_ngcontent-%COMP%]{padding:8px 8px 8px 0}"]}),n})();var se=s(60205);function Se(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function Ce(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function je(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}const Pe=function(){return["id","name","enabled","script"]};function Be(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"form",12)(2,"mat-form-field"),t._UZ(3,"input",13),t.ALo(4,"translate"),t.YNc(5,Ce,3,3,"mat-error",1),t.qZA(),t.TgZ(6,"mat-form-field")(7,"textarea",14),t.ALo(8,"translate"),t._uU(9,"          "),t.qZA(),t.YNc(10,je,3,3,"mat-error",1),t.qZA()(),t.TgZ(11,"label",15),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",16),t._uU(15),t.TgZ(16,"mat-icon",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.copyUrn())}),t.ALo(17,"translate"),t._uU(18,"content_copy"),t.qZA()(),t._UZ(19,"perun-web-apps-attribute-unique-toggle",18),t.TgZ(20,"perun-web-apps-attribute-critical-operations-toggles",19),t.NdJ("readOperationChanged",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.finalReadOperations=a)})("writeOperationChanged",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.finalWriteOperations=a)}),t.qZA(),t._UZ(21,"perun-web-apps-attribute-rights-tab-group",20),t.ALo(22,"async"),t.TgZ(23,"mat-accordion")(24,"mat-expansion-panel",21)(25,"mat-expansion-panel-header")(26,"mat-panel-title"),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t._UZ(29,"app-services-list",22),t.ALo(30,"async"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,17,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","name")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,19,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(2),t.hij(" ",t.lcZ(13,21,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.URN")," "),t.xp6(3),t.hij(" ",e.urn," "),t.xp6(1),t.s9C("matTooltip",t.lcZ(17,23,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.URN_TOOLTIP")),t.xp6(3),t.Q6J("attDef",e.attDef),t.xp6(1),t.Q6J("readOperation",e.initReadOperations)("writeOperation",e.initWriteOperations),t.xp6(1),t.Q6J("attDef",e.attDef)("collections",t.lcZ(22,25,e.collections$)),t.xp6(6),t.hij(" ",t.lcZ(28,27,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SERVICES")," "),t.xp6(2),t.Q6J("disableRouting",!0)("displayedColumns",t.DdM(31,Pe))("services",t.lcZ(30,29,e.services$))}}function ue(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.switchShowKeys())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SHOW_KEYS")," "))}function me(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"h1",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Se,1,0,"mat-spinner",3),t.YNc(5,Be,31,32,"div",4),t.TgZ(6,"div",5),t.YNc(7,ue,3,3,"button",6),t.TgZ(8,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCopy())}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(2),t.Q6J("ngIf","entityless"===(null==e.attDef?null:e.attDef.entity)),t.xp6(2),t.hij(" ",t.lcZ(10,10,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FOR_IMPORT")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading||e.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(16,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CONFIRM")," ")}}function Fe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-entityless-attribute-keys-list",24),t.NdJ("switchView",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.switchShowKeys())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("attDef",e.attDef)("tableId",e.tableId)}}let pn=(()=>{class n{constructor(e,i,a,o,v,T,N,U,J){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.clipboard=v,this.attributesManager=T,this.serviceService=N,this.formBuilder=U,this.attributeRightsService=J,this.tableId=En.Wv,this.loading=!1,this.showKeys=!1,this.attDef=this.data.attDef,this.attributeControl=this.formBuilder.group({name:[this.attDef.displayName,rt.kI.required],description:[this.attDef.description,rt.kI.required]}),this.urn=`${this.attDef.namespace}:${this.attDef.friendlyName}`,this.collections$=new E.X([]),this.services$=this.serviceService.getServicesByAttributeDefinition(this.attDef.id).pipe((0,li.O)([]))}ngOnInit(){this.dialogRef.addPanelClass("mat-dialog-height-transition"),this.attributesManager.getAttributeRules(this.attDef.id).subscribe(e=>{this.collections$=new E.X(e.attributePolicyCollections),this.initReadOperations=e.criticalActions.includes("READ"),this.initWriteOperations=e.criticalActions.includes("WRITE")})}onSubmit(){this.loading=!0,this.updateAttribute(),this.attributesManager.updateAttributeDefinition({attributeDefinition:this.attDef}).pipe((0,F.w)(()=>(0,yt.of)(this.collections$.getValue())),this.attributeRightsService.filterNullInPolicy(),(0,F.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e})),(0,F.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalReadOperations,this.initReadOperations,this.attDef.id,H.oW.READ)),(0,F.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalWriteOperations,this.initWriteOperations,this.attDef.id,H.oW.WRITE))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}switchShowKeys(){this.showKeys=!this.showKeys,this.dialogRef.updateSize(this.showKeys?"800px":"700px")}copyUrn(){this.clipboard.copy(this.urn)?this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPIED")):this.notificator.showError(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FAILED"))}onCopy(){this.updateAttribute();const e={attributeDefinition:this.attDef,attributeRights:this.collections$.getValue()};this.clipboard.copy(JSON.stringify(e))?this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPIED")):this.notificator.showError(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FAILED"))}updateAttribute(){this.attDef.displayName=this.attributeControl.get("name").value,this.attDef.description=this.attributeControl.get("description").value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(kn.TU),t.Y36(H.H8),t.Y36(H.KK),t.Y36(rt.QS),t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-attribute-definition-dialog"]],decls:3,vars:2,consts:[[1,"admin-theme"],[4,"ngIf"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","",1,"ml-2",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"fields-container",3,"formGroup"],["matInput","","data-cy","display-name-input","formControlName","name","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","required","",3,"placeholder"],[1,"urn-name"],[1,"urn-row"],["matSuffix","",1,"copy-urn",3,"matTooltip","click"],[3,"attDef"],[3,"readOperation","writeOperation","readOperationChanged","writeOperationChanged"],[3,"attDef","collections"],[1,"mt-4","mb-4"],[3,"disableRouting","displayedColumns","services"],["mat-flat-button","",3,"click"],[3,"attDef","tableId","switchView"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,me,17,16,"div",1),t.YNc(2,Fe,2,2,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!i.showKeys),t.xp6(1),t.Q6J("ngIf",i.showKeys))},dependencies:[m.O5,de.IC,ie.TO,ie.KE,ie.R9,Mt.Nt,rt._Y,rt.Fj,rt.JJ,rt.JL,rt.Q7,rt.sg,rt.u,l.Hw,we.pp,we.ib,we.yz,we.yK,G.lW,M.uh,M.xY,M.H8,tt.Ou,sn.gM,be,ee,Ze,O,se.Q,m.Ov,u.X$],styles:[".fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.urn-name[_ngcontent-%COMP%]{color:#0000008a;margin-bottom:0;font-size:small}.urn-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.copy-urn[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[Wn.SG,Wn.GH,Wn.Ls]}}),n})();var ln=s(70844),Ye=s(64597);let We=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(":")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"nameSpaceToDef",type:n,pure:!0}),n})();function An(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",20)(1,"mat-checkbox",21),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(a?o.masterToggle():null)}),t.ALo(2,"translate"),t.ALo(3,"masterCheckboxLabel"),t.qZA()()}if(2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("aria-label",t.lcZ(2,3,t.lcZ(3,5,e.all)))("checked",i.selection.hasValue()&&e.all)("indeterminate",i.selection.hasValue()&&!e.all)}}const Zn=function(n){return{name:n}};function Vn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",22)(1,"mat-checkbox",23),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.ALo(2,"multiWordDataCy"),t.ALo(3,"translate"),t.ALo(4,"checkboxLabel"),t.ALo(5,"consentRelatedAttribute"),t.ALo(6,"translate"),t.ALo(7,"consentRelatedAttribute"),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q2q("data-cy","",t.lcZ(2,6,e.displayName),"-checkbox"),t.Q6J("aria-label",t.xi3(3,8,t.lcZ(4,11,i.selection.isSelected(e)),t.VKq(23,Zn,e.displayName)))("checked",i.selection.isSelected(e))("disabled",t.Dn7(5,13,e.namespace,i.serviceEnabled,i.consentRequired))("matTooltip",t.lcZ(6,17,"ADMIN.ATTRIBUTES.CONSENT_RELATED_DISABLED"))("matTooltipDisabled",!t.Dn7(7,19,e.namespace,i.serviceEnabled,i.consentRequired))}}function Xn(n,r){1&n&&(t.ynx(0,17),t.YNc(1,An,4,7,"th",18),t.YNc(2,Vn,8,25,"td",19),t.BQk())}function Pi(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ID")," "))}function he(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function Xe(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_FRIENDLY_NAME")," "))}function vn(n,r){if(1&n&&(t.TgZ(0,"td",26),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&n){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.friendlyName),"-friendly-name"),t.xp6(2),t.hij(" ",e.friendlyName," ")}}function wn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ENTITY")," "))}function Qn(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.entity)}}function ci(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_DEF")," "))}function vi(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"nameSpaceToDef"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.namespace))}}function jn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_TYPE")," "))}function Vi(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.type))}}function Jn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_UNIQUE")," "))}function bi(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.unique)}}function fn(n,r){1&n&&t._UZ(0,"tr",27)}function cn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.onRowClick(o))}),t.qZA()}if(2&n){const e=t.oxw();t.ekj("cursor-pointer",!e.disableRouting)}}function ui(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.NO_ATTRIBUTES"),"\n"))}function Ji(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}const hi=function(n){return{all:n}};let Fi=(()=>{class n{constructor(e,i,a,o){this.dialog=e,this.authResolver=i,this.tableCheckbox=a,this.consentRelatedPipe=o,this.selection=new B.Ov(!0,[]),this.displayedColumns=["select","id","friendlyName","entity","namespace","type","unique"],this.disableRouting=!1,this.consentRequired=!1,this.serviceEnabled=!1,this.refreshEvent=new t.vpe,this.pageSizeOptions=fe.f7,this.canBeSelected=v=>!this.consentRelatedPipe.transform(v.namespace,this.serviceEnabled,this.consentRequired)}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"friendlyName":return e.friendlyName;case"entity":return e.entity;case"namespace":if(e.namespace){const a=e.namespace;return a.substring(a.lastIndexOf(":")+1,a.length)}return"";case"type":if(e.type){const a=e.type;return a.substring(a.lastIndexOf(".")+1,a.length)}return"";case"unique":return e.unique?"true":"false";default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(e=>"id"!==e)),this.dataSource=new R.by(this.definitions),this.setDataSource()}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}exportAllData(e){(0,fe.O6)((0,fe.Xn)(this.dataSource.filteredData,this.displayedColumns,n.getDataForColumn),e)}exportDisplayedData(e){const i=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=i+this.dataSource.paginator.pageSize;(0,fe.O6)((0,fe.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(i,a),this.displayedColumns,n.getDataForColumn),e)}setDataSource(){this.dataSource&&(this.dataSource.filter=this.filterValue,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,i)=>(0,fe.Sd)(e,i,this.displayedColumns,n.getDataForColumn),this.dataSource.sortData=(e,i)=>(0,fe.pR)(e,i,n.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource,this.canBeSelected)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!0,this.canBeSelected)}onRowClick(e){if(!this.disableRouting){const i=(0,fe.kZ)();i.width="700px",i.data={attDef:e},this.dialog.open(pn,i).afterClosed().subscribe(o=>{o&&(this.selection.clear(),this.refreshEvent.emit())})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.UA),t.Y36(ln.u))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attr-def-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(fe.l9,7),t.Gf(nn.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{definitions:"definitions",selection:"selection",displayedColumns:"displayedColumns",filterValue:"filterValue",tableId:"tableId",disableRouting:"disableRouting",consentRequired:"consentRequired",serviceEnabled:"serviceEnabled"},outputs:{refreshEvent:"refreshEvent"},features:[t.TTD],decls:28,vars:16,consts:[[1,"card","mt-2",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportDisplayedData","exportAllData"],[1,"overflow-auto"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","friendlyName"],["mat-cell","",4,"matCellDef"],["matColumnDef","entity"],["matColumnDef","namespace"],["matColumnDef","type"],["matColumnDef","unique"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","click",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["matTooltipPosition","left","color","primary",3,"aria-label","checked","disabled","matTooltip","matTooltipDisabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"click"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return i.exportDisplayedData(o)})("exportAllData",function(o){return i.exportAllData(o)}),t.TgZ(2,"div",2)(3,"table",3),t.YNc(4,Xn,3,0,"ng-container",4),t.ALo(5,"isAllSelected"),t.ynx(6,5),t.YNc(7,Pi,3,3,"th",6),t.YNc(8,he,2,1,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,Xe,3,3,"th",6),t.YNc(11,vn,3,4,"td",9),t.BQk(),t.ynx(12,10),t.YNc(13,wn,3,3,"th",6),t.YNc(14,Qn,2,1,"td",9),t.BQk(),t.ynx(15,11),t.YNc(16,ci,3,3,"th",6),t.YNc(17,vi,3,3,"td",9),t.BQk(),t.ynx(18,12),t.YNc(19,jn,3,3,"th",6),t.YNc(20,Vi,3,3,"td",9),t.BQk(),t.ynx(21,13),t.YNc(22,Jn,3,3,"th",6),t.YNc(23,bi,2,1,"td",9),t.BQk(),t.YNc(24,fn,1,0,"tr",14),t.YNc(25,cn,1,2,"tr",15),t.qZA()()()(),t.YNc(26,ui,3,3,"perun-web-apps-alert",16),t.YNc(27,Ji,3,3,"perun-web-apps-alert",16)),2&e&&(t.Q6J("hidden",0===i.dataSource.filteredData.length||0===i.definitions.length),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("dataLength",i.dataSource.filteredData.length)("tableId",i.tableId),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(14,hi,t.Dn7(5,10,i.dataSource,i.selection.selected.length,i.canBeSelected))),t.xp6(20),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.definitions.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.definitions.length))},dependencies:[m.O5,nn.YE,nn.nU,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,Fn.oG,sn.gM,K.w,z.l,u.X$,Ye.R,X.I,lt.G,A.r,ze,We,ln.u],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var gn=s(96214),In=s(7434);function on(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCreate())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.CREATE")," "))}function Hi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onImport())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.IMPORT")," "))}function qe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onDelete())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.ATTRIBUTES.DELETE")," ")}}function Ti(n,r){1&n&&t._UZ(0,"mat-spinner",11)}function On(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",12),t.NdJ("refreshEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshTable())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("disableRouting",!e.authResolver.isPerunAdminOrObserver())("filterValue",e.filterValue)("selection",e.selected)("tableId",e.tableId)}}let b=(()=>{class n{constructor(e,i,a){this.dialog=e,this.attributesManager=i,this.authResolver=a,this.attrDefinitions=[],this.selected=new B.Ov(!0,[]),this.filterValue="",this.tableId=En.uM}ngOnInit(){this.refreshTable()}onCreate(){const e=(0,fe.kZ)();e.width="650px",this.dialog.open(Bi,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onDelete(){const e=(0,fe.kZ)();e.width="450px",e.data={attributes:this.selected.selected,theme:"admin-theme"},this.dialog.open(nt,e).afterClosed().subscribe(a=>{a&&(this.refreshTable(),this.selected.clear())})}refreshTable(){this.loading=!0,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}applyFilter(e){this.filterValue=e}onImport(){const e=(0,fe.kZ)();e.width="700px",this.dialog.open(mn,e).afterClosed().subscribe(a=>{!0===a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(H.H8),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-attributes"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","data-cy","new-attr-definition-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","mr-2","data-cy","delete-attr-definition-button","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent",4,"ngIf"],["color","accent","data-cy","new-attr-definition-button","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","data-cy","delete-attr-definition-button","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,on,3,3,"button",2),t.YNc(6,Hi,3,3,"button",3),t.YNc(7,qe,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(9,Ti,1,0,"mat-spinner",6),t.YNc(10,On,1,5,"app-attr-def-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"ADMIN.ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.ATTRIBUTES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,Fi,gn.t,In.L,u.X$]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-visualizer"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"app-animated-router-outlet")},dependencies:[h.A]}),n})();var V=s(9921);let it=(()=>{class n{constructor(e){this.attributesManager=e}ngOnInit(){this.attributesManager.getAttributeModulesDependenciesGraphText("DOT").subscribe(e=>{const i=e.graph.replace("\\t","").replace("\\n","").replace("\\","");(0,V.graphviz)("#dependenciesGraph",{zoom:!1}).renderDot(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-attr-modules"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:4,vars:3,consts:[[1,"page-subtitle"],["id","dependenciesGraph",1,"card"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"div",1)),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.VISUALIZER.ATTR_DEPENDENCIES.TITLE"),"\n"))},dependencies:[u.X$],styles:["#dependenciesGraph[_ngcontent-%COMP%]{overflow-y:scroll}"]}),n})(),ht=(()=>{class n{constructor(){this.items=[{cssIcon:"perun-module-dependencies",url:"attrDependencies",label:"MENU_ITEMS.VISUALIZER.ATTR_DEPENDENCIES",style:"admin-btn"},{cssIcon:"perun-user-destination-relationship",url:"userDestinationRelationship",label:"MENU_ITEMS.VISUALIZER.USER_DESTINATION",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.items)("size","small"))},dependencies:[L.L]}),n})();var xt=s(71884),Ot=s(18505),Rt=s(47957),oe=s(71948),Ae=s(86257);function $e(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_USER"))}function rn(n,r){1&n&&t._UZ(0,"mat-spinner",17),2&n&&t.Q6J("diameter",20)("strokeWidth",2)}function ke(n,r){if(1&n&&(t.TgZ(0,"mat-option",18)(1,"span",19),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.firstName+" "+e.lastName),t.xp6(2),t.hij("#",e.id,""),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function Me(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_DESTINATION"))}function _n(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_SERVICE"))}function Kn(n,r){if(1&n&&(t.TgZ(0,"mat-radio-button",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let er=(()=>{class n{constructor(e,i,a,o,v,T){this.usersService=e,this.translate=i,this.facilityManager=a,this.serviceService=o,this.router=v,this.notificator=T,this.searchField=new rt.p4,this.chosenService="",this.availableServices=[],this.loading=!1,this.destination=""}ngOnInit(){this.searchField.setValue(""),this.users=this.searchField.valueChanges.pipe((0,q.b)(400),(0,xt.x)(),(0,Ot.b)(()=>this.loading=!0),(0,F.w)(e=>this.usersService.findUsers(e)),(0,Ot.b)(()=>this.loading=!1)),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SELECT_NO_SERVICE").subscribe(e=>{this.noServiceText=e,this.availableServices.push(this.noServiceText)})}validateName(e){""!==this.searchField.value?this.usersService.findUsers(this.searchField.value).subscribe(i=>{for(const a of i){if((a.firstName+" "+a.lastName).toLowerCase()===this.searchField.value.toLowerCase()){this.selectedUser=a,e.selected.completed=!0,e.next();break}this.selectedUser=null}this.selectedUser||this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_NAME").subscribe(a=>{this.notificator.showError(a)})}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_NAME").subscribe(i=>{this.notificator.showError(i)})}validateDestination(e){""!==this.destination?(this.availableServices=[],this.availableServices.push(this.noServiceText),this.chosenService="",this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(i=>{if(0!==i.length){e.selected.completed=!0,e.next();for(const a of i)this.serviceService.getAllRichDestinationsForFacility(a.id).subscribe(o=>{for(const v of o)v.destination===this.destination&&(this.availableServices.includes(v.service.name)||this.availableServices.push(v.service.name))})}else this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_DESTINATION").subscribe(a=>{this.notificator.showError(a)})})):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_DESTINATION").subscribe(i=>{this.notificator.showError(i)})}getGraph(){""!==this.chosenService?this.router.navigate(["admin/visualizer/userDestinationRelationship/graph"],this.chosenService===this.noServiceText?{queryParams:{user:this.selectedUser.id,destination:this.destination,service:"noService"},queryParamsHandling:"merge"}:{queryParams:{user:this.selectedUser.id,destination:this.destination,service:this.chosenService},queryParamsHandling:"merge"}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NOT_CHOSEN_SERVICE").subscribe(e=>{this.notificator.showError(e)})}notCompleted(e){e.selected.completed=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(u.sK),t.Y36(H.IQ),t.Y36(H.KK),t.Y36(p.F0),t.Y36(Z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-relationship"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:46,vars:36,consts:[[1,"p-3","card","settings-card","col-12","col-xl-5"],[1,"page-subtitle"],["linear",""],["stepper",""],["completed","false"],["matStepLabel",""],[1,"w-100"],["matInput","","type","text",3,"placeholder","formControl","matAutocomplete","keydown.enter","ngModelChange"],["matSuffix","",3,"diameter","strokeWidth",4,"ngIf"],["align","start"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"mt-2",3,"click"],["matInput","","type","text",3,"placeholder","ngModel","keydown.enter","ngModelChange"],["mat-stroked-button","","matStepperPrevious","",1,"mt-2"],[1,"mb-2",3,"ngModel","ngModelChange"],["class","flex-column d-flex","color","primary",3,"value",4,"ngFor","ngForOf"],["matSuffix","",3,"diameter","strokeWidth"],[3,"value"],[1,"text-muted"],["color","primary",1,"flex-column","d-flex",3,"value"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-vertical-stepper",2,3)(6,"mat-step",4),t.YNc(7,$e,2,3,"ng-template",5),t.TgZ(8,"mat-form-field",6)(9,"input",7),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateName(v))})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.notCompleted(v))}),t.ALo(10,"translate"),t.qZA(),t.YNc(11,rn,1,2,"mat-spinner",8),t.TgZ(12,"mat-hint",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-autocomplete",null,10),t.YNc(17,ke,4,4,"mat-option",11),t.ALo(18,"async"),t.qZA()(),t.TgZ(19,"div")(20,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateName(v))}),t._uU(21),t.ALo(22,"translate"),t.qZA()()(),t.TgZ(23,"mat-step",4),t.YNc(24,Me,2,3,"ng-template",5),t.TgZ(25,"mat-form-field",6)(26,"input",13),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateDestination(v))})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.notCompleted(v))})("ngModelChange",function(v){return i.destination=v}),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"div")(29,"button",14),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateDestination(v))}),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.TgZ(35,"mat-step"),t.YNc(36,_n,2,3,"ng-template",5),t.TgZ(37,"mat-radio-group",15),t.NdJ("ngModelChange",function(v){return i.chosenService=v}),t.YNc(38,Kn,2,2,"mat-radio-button",16),t.qZA(),t.TgZ(39,"div")(40,"button",14),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"button",12),t.NdJ("click",function(){return i.getGraph()}),t._uU(44),t.ALo(45,"translate"),t.qZA()()()()()}if(2&e){const a=t.MAs(16);t.xp6(2),t.hij(" ",t.lcZ(3,16,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(10,18,"ADMIN.VISUALIZER.USER_DESTINATION.USER_EXAMPLE")),t.Q6J("formControl",i.searchField)("matAutocomplete",a),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(2),t.Oqu(t.lcZ(14,20,"ADMIN.VISUALIZER.USER_DESTINATION.USER_HINT")),t.xp6(4),t.Q6J("ngForOf",t.lcZ(18,22,i.users)),t.xp6(4),t.hij(" ",t.lcZ(22,24,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(27,26,"ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION_EXAMPLE")),t.Q6J("ngModel",i.destination),t.xp6(4),t.hij(" ",t.lcZ(31,28,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(4),t.Q6J("ngModel",i.chosenService),t.xp6(1),t.Q6J("ngForOf",i.availableServices),t.xp6(3),t.hij(" ",t.lcZ(42,32,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(45,34,"ADMIN.VISUALIZER.USER_DESTINATION.SUBMIT_BUTTON")," ")}},dependencies:[m.sg,m.O5,Rt.XC,Rt.ZL,zt.ey,ie.KE,ie.bx,ie.R9,Mt.Nt,rt.Fj,rt.JJ,rt.oH,rt.On,G.lW,tt.Ou,oe.VQ,oe.U0,Ae.C0,Ae.VY,Ae.Vq,Ae.fd,m.Ov,u.X$]}),n})();function di(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function Nn(n){this._context=n}function xi(n,r){this._basis=new Nn(n),this._beta=r}Nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:di(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:di(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},xi.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var N,i=n[0],a=r[0],o=n[e]-i,v=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*n[T]+(1-this._beta)*(i+(N=T/e)*o),this._beta*r[T]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const nr=function n(r){function e(i){return 1===r?new Nn(i):new xi(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var Pn=s(77579),xa=s(70655),Un=s(37340);function Ya(){}function bn(n){return null==n?Ya:function(){return this.querySelector(n)}}function Ki(){return[]}function zn(n){return null==n?Ki:function(){return this.querySelectorAll(n)}}function S(n){return function(){return this.matches(n)}}function $(n){return new Array(n.length)}function vt(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}function ne(n,r,e,i,a,o){for(var T,v=0,N=r.length,U=o.length;v<U;++v)(T=r[v])?(T.__data__=o[v],i[v]=T):e[v]=new vt(n,o[v]);for(;v<N;++v)(T=r[v])&&(a[v]=T)}function Ie(n,r,e,i,a,o,v){var T,N,Ct,U={},J=r.length,ct=o.length,ot=new Array(J);for(T=0;T<J;++T)(N=r[T])&&(ot[T]=Ct="$"+v.call(N,N.__data__,T,r),Ct in U?a[T]=N:U[Ct]=N);for(T=0;T<ct;++T)(N=U[Ct="$"+v.call(n,o[T],T,o)])?(i[T]=N,N.__data__=o[T],U[Ct]=null):e[T]=new vt(n,o[T]);for(T=0;T<J;++T)(N=r[T])&&U[ot[T]]===N&&(a[T]=N)}function gr(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}vt.prototype={constructor:vt,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Wa="http://www.w3.org/1999/xhtml";const Hs={svg:"http://www.w3.org/2000/svg",xhtml:Wa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ya(n){var r=n+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=n.slice(0,e))&&(n=n.slice(e+1)),Hs.hasOwnProperty(r)?{space:Hs[r],local:n}:n}function Sc(n){return function(){this.removeAttribute(n)}}function Ec(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Dc(n,r){return function(){this.setAttribute(n,r)}}function Lc(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function kc(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function Ic(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Ys(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Mc(n){return function(){this.style.removeProperty(n)}}function Nc(n,r,e){return function(){this.style.setProperty(n,r,e)}}function Pc(n,r,e){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function Nr(n,r){return n.style.getPropertyValue(r)||Ys(n).getComputedStyle(n,null).getPropertyValue(r)}function Rc(n){return function(){delete this[n]}}function Bc(n,r){return function(){this[n]=r}}function Zc(n,r){return function(){var e=r.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Ws(n){return n.trim().split(/^|\s+/)}function Xa(n){return n.classList||new Xs(n)}function Xs(n){this._node=n,this._names=Ws(n.getAttribute("class")||"")}function $s(n,r){for(var e=Xa(n),i=-1,a=r.length;++i<a;)e.add(r[i])}function Qs(n,r){for(var e=Xa(n),i=-1,a=r.length;++i<a;)e.remove(r[i])}function Gc(n){return function(){$s(this,n)}}function Uc(n){return function(){Qs(this,n)}}function zc(n,r){return function(){(r.apply(this,arguments)?$s:Qs)(this,n)}}function Yc(){this.textContent=""}function Wc(n){return function(){this.textContent=n}}function Xc(n){return function(){var r=n.apply(this,arguments);this.textContent=r??""}}function Qc(){this.innerHTML=""}function jc(n){return function(){this.innerHTML=n}}function Jc(n){return function(){var r=n.apply(this,arguments);this.innerHTML=r??""}}function qc(){this.nextSibling&&this.parentNode.appendChild(this)}function eu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iu(n){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===Wa&&r.documentElement.namespaceURI===Wa?r.createElement(n):r.createElementNS(e,n)}}function ru(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function js(n){var r=ya(n);return(r.local?ru:iu)(r)}function su(){return null}function lu(){var n=this.parentNode;n&&n.removeChild(this)}function uu(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function hu(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}Xs.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Js={},Sr=null;function mu(n,r,e){return n=Ks(n,r,e),function(i){var a=i.relatedTarget;(!a||a!==this&&!(8&a.compareDocumentPosition(this)))&&n.call(this,i)}}function Ks(n,r,e){return function(i){var a=Sr;Sr=i;try{n.call(this,this.__data__,r,e)}finally{Sr=a}}}function gu(n){return n.trim().split(/^|\s+/).map(function(r){var e="",i=r.indexOf(".");return i>=0&&(e=r.slice(i+1),r=r.slice(0,i)),{type:r,name:e}})}function _u(n){return function(){var r=this.__on;if(r){for(var o,e=0,i=-1,a=r.length;e<a;++e)o=r[e],n.type&&o.type!==n.type||o.name!==n.name?r[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?r.length=i:delete this.__on}}}function vu(n,r,e){var i=Js.hasOwnProperty(n.type)?mu:Ks;return function(a,o,v){var N,T=this.__on,U=i(r,o,v);if(T)for(var J=0,ct=T.length;J<ct;++J)if((N=T[J]).type===n.type&&N.name===n.name)return this.removeEventListener(N.type,N.listener,N.capture),this.addEventListener(N.type,N.listener=U,N.capture=e),void(N.value=r);this.addEventListener(n.type,U,e),N={type:n.type,name:n.name,value:r,listener:U,capture:e},T?T.push(N):this.__on=[N]}}function qs(n,r,e){var i=Ys(n),a=i.CustomEvent;"function"==typeof a?a=new a(r,e):(a=i.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),n.dispatchEvent(a)}function yu(n,r){return function(){return qs(this,n,r)}}function bu(n,r){return function(){return qs(this,n,r.apply(this,arguments))}}typeof document<"u"&&("onmouseenter"in document.documentElement||(Js={mouseenter:"mouseover",mouseleave:"mouseout"}));var to=[null];function Gi(n,r){this._groups=n,this._parents=r}function eo(){return new Gi([[document.documentElement]],to)}Gi.prototype=eo.prototype={constructor:Gi,select:function wr(n){"function"!=typeof n&&(n=bn(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,U,o=r[a],v=o.length,T=i[a]=new Array(v),J=0;J<v;++J)(N=o[J])&&(U=n.call(N,N.__data__,J,o))&&("__data__"in N&&(U.__data__=N.__data__),T[J]=U);return new Gi(i,this._parents)},selectAll:function y(n){"function"!=typeof n&&(n=zn(n));for(var r=this._groups,e=r.length,i=[],a=[],o=0;o<e;++o)for(var N,v=r[o],T=v.length,U=0;U<T;++U)(N=v[U])&&(i.push(n.call(N,N.__data__,U,v)),a.push(N));return new Gi(i,a)},filter:function P(n){"function"!=typeof n&&(n=S(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,T=i[a]=[],U=0;U<v;++U)(N=o[U])&&n.call(N,N.__data__,U,o)&&T.push(N);return new Gi(i,this._parents)},data:function Je(n,r){if(!n)return Ct=new Array(this.size()),U=-1,this.each(function(ge){Ct[++U]=ge}),Ct;var e=r?Ie:ne,i=this._parents,a=this._groups;"function"!=typeof n&&(n=function Et(n){return function(){return n}}(n));for(var o=a.length,v=new Array(o),T=new Array(o),N=new Array(o),U=0;U<o;++U){var J=i[U],ct=a[U],ot=ct.length,Ct=n.call(J,J&&J.__data__,U,i),It=Ct.length,Ft=T[U]=new Array(It),_t=v[U]=new Array(It);e(J,ct,Ft,_t,N[U]=new Array(ot),Ct,r);for(var ye,De,qt=0,$t=0;qt<It;++qt)if(ye=Ft[qt]){for(qt>=$t&&($t=qt+1);!(De=_t[$t])&&++$t<It;);ye._next=De||null}}return(v=new Gi(v,i))._enter=T,v._exit=N,v},enter:function dt(){return new Gi(this._enter||this._groups.map($),this._parents)},exit:function un(){return new Gi(this._exit||this._groups.map($),this._parents)},join:function Ne(n,r,e){var i=this.enter(),a=this,o=this.exit();return i="function"==typeof n?n(i):i.append(n+""),null!=r&&(a=r(a)),null==e?o.remove():e(o),i&&a?i.merge(a).order():a},merge:function Ge(n){for(var r=this._groups,e=n._groups,i=r.length,o=Math.min(i,e.length),v=new Array(i),T=0;T<o;++T)for(var ot,N=r[T],U=e[T],J=N.length,ct=v[T]=new Array(J),Ct=0;Ct<J;++Ct)(ot=N[Ct]||U[Ct])&&(ct[Ct]=ot);for(;T<i;++T)v[T]=r[T];return new Gi(v,this._parents)},order:function Tn(){for(var n=this._groups,r=-1,e=n.length;++r<e;)for(var v,i=n[r],a=i.length-1,o=i[a];--a>=0;)(v=i[a])&&(o&&4^v.compareDocumentPosition(o)&&o.parentNode.insertBefore(v,o),o=v);return this},sort:function Ei(n){function r(ct,ot){return ct&&ot?n(ct.__data__,ot.__data__):!ct-!ot}n||(n=gr);for(var e=this._groups,i=e.length,a=new Array(i),o=0;o<i;++o){for(var U,v=e[o],T=v.length,N=a[o]=new Array(T),J=0;J<T;++J)(U=v[J])&&(N[J]=U);N.sort(r)}return new Gi(a,this._parents).order()},call:function Di(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function Ar(){var n=new Array(this.size()),r=-1;return this.each(function(){n[++r]=this}),n},node:function yi(){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var i=n[r],a=0,o=i.length;a<o;++a){var v=i[a];if(v)return v}return null},size:function Yi(){var n=0;return this.each(function(){++n}),n},empty:function _r(){return!this.node()},each:function qn(n){for(var r=this._groups,e=0,i=r.length;e<i;++e)for(var T,a=r[e],o=0,v=a.length;o<v;++o)(T=a[o])&&n.call(T,T.__data__,o,a);return this},attr:function Oc(n,r){var e=ya(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==r?e.local?Ec:Sc:"function"==typeof r?e.local?Ic:kc:e.local?Lc:Dc)(e,r))},style:function Fc(n,r,e){return arguments.length>1?this.each((null==r?Mc:"function"==typeof r?Pc:Nc)(n,r,e??"")):Nr(this.node(),n)},property:function Vc(n,r){return arguments.length>1?this.each((null==r?Rc:"function"==typeof r?Zc:Bc)(n,r)):this.node()[n]},classed:function Hc(n,r){var e=Ws(n+"");if(arguments.length<2){for(var i=Xa(this.node()),a=-1,o=e.length;++a<o;)if(!i.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?zc:r?Gc:Uc)(e,r))},text:function $c(n){return arguments.length?this.each(null==n?Yc:("function"==typeof n?Xc:Wc)(n)):this.node().textContent},html:function Kc(n){return arguments.length?this.each(null==n?Qc:("function"==typeof n?Jc:jc)(n)):this.node().innerHTML},raise:function tu(){return this.each(qc)},lower:function nu(){return this.each(eu)},append:function au(n){var r="function"==typeof n?n:js(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function ou(n,r){var e="function"==typeof n?n:js(n),i=null==r?su:"function"==typeof r?r:bn(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function cu(){return this.each(lu)},clone:function du(n){return this.select(n?hu:uu)},datum:function pu(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function xu(n,r,e){var a,v,i=gu(n+""),o=i.length;if(!(arguments.length<2)){for(T=r?vu:_u,null==e&&(e=!1),a=0;a<o;++a)this.each(T(i[a],r,e));return this}var T=this.node().__on;if(T)for(var J,N=0,U=T.length;N<U;++N)for(a=0,J=T[N];a<o;++a)if((v=i[a]).type===J.type&&v.name===J.name)return J.value},dispatch:function Tu(n,r){return this.each(("function"==typeof r?bu:yu)(n,r))}};const na=eo;function no(n){return"string"==typeof n?new Gi([[document.querySelector(n)]],[document.documentElement]):new Gi([[n]],to)}function io(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function ba(n){this._context=n}function ro(n,r){this._basis=new ba(n),this._beta=r}ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:io(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:io(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},ro.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var N,i=n[0],a=r[0],o=n[e]-i,v=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*n[T]+(1-this._beta)*(i+(N=T/e)*o),this._beta*r[T]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const Cu=function n(r){function e(i){return 1===r?new ba(i):new ro(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var $a=Math.PI,Qa=2*$a,Er=1e-6,wu=Qa-Er;function ja(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ao(){return new ja}ja.prototype=ao.prototype={constructor:ja,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,e,i){this._+="Q"+ +n+","+ +r+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(n,r,e,i,a,o){this._+="C"+ +n+","+ +r+","+ +e+","+ +i+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(n,r,e,i,a){var o=this._x1,v=this._y1,T=(e=+e)-(n=+n),N=(i=+i)-(r=+r),U=o-n,J=v-r,ct=U*U+J*J;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(ct>Er)if(Math.abs(J*T-N*U)>Er&&a){var ot=e-o,Ct=i-v,It=T*T+N*N,Ft=ot*ot+Ct*Ct,_t=Math.sqrt(It),Vt=Math.sqrt(ct),qt=a*Math.tan(($a-Math.acos((It+ct-Ft)/(2*_t*Vt)))/2),$t=qt/Vt,ye=qt/_t;Math.abs($t-1)>Er&&(this._+="L"+(n+$t*U)+","+(r+$t*J)),this._+="A"+a+","+a+",0,0,"+ +(J*ot>U*Ct)+","+(this._x1=n+ye*T)+","+(this._y1=r+ye*N)}else this._+="L"+(this._x1=n)+","+(this._y1=r)},arc:function(n,r,e,i,a,o){n=+n,r=+r,o=!!o;var v=(e=+e)*Math.cos(i),T=e*Math.sin(i),N=n+v,U=r+T,J=1^o,ct=o?i-a:a-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+N+","+U:(Math.abs(this._x1-N)>Er||Math.abs(this._y1-U)>Er)&&(this._+="L"+N+","+U),e&&(ct<0&&(ct=ct%Qa+Qa),ct>wu?this._+="A"+e+","+e+",0,1,"+J+","+(n-v)+","+(r-T)+"A"+e+","+e+",0,1,"+J+","+(this._x1=N)+","+(this._y1=U):ct>Er&&(this._+="A"+e+","+e+",0,"+ +(ct>=$a)+","+J+","+(this._x1=n+e*Math.cos(a))+","+(this._y1=r+e*Math.sin(a))))},rect:function(n,r,e,i){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};const Au=ao;function Ta(n){return function(){return n}}function so(n){this._context=n}function Su(n){return new so(n)}function Eu(n){return n[0]}function Du(n){return n[1]}so.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;default:this._context.lineTo(n,r)}}};var oo=Math.PI;function co(n){return(1-Math.cos(oo*n))/2}var Ca=s(25922),lr=s(49194),Ja=s(73339),ku=(0,Ca.Z)("start","end","cancel","interrupt"),Iu=[];function Sa(n,r,e,i,a,o){var v=n.__transition;if(v){if(e in v)return}else n.__transition={};!function Ou(n,r,e){var a,i=n.__transition;function v(U){var J,ct,ot,Ct;if(1!==e.state)return N();for(J in i)if((Ct=i[J]).name===e.name){if(3===Ct.state)return(0,Ja.Z)(v);4===Ct.state?(Ct.state=6,Ct.timer.stop(),Ct.on.call("interrupt",n,n.__data__,Ct.index,Ct.group),delete i[J]):+J<r&&(Ct.state=6,Ct.timer.stop(),Ct.on.call("cancel",n,n.__data__,Ct.index,Ct.group),delete i[J])}if((0,Ja.Z)(function(){3===e.state&&(e.state=4,e.timer.restart(T,e.delay,e.time),T(U))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(ot=e.tween.length),J=0,ct=-1;J<ot;++J)(Ct=e.tween[J].value.call(n,n.__data__,e.index,e.group))&&(a[++ct]=Ct);a.length=ct+1}}function T(U){for(var J=U<e.duration?e.ease.call(null,U/e.duration):(e.timer.restart(N),e.state=5,1),ct=-1,ot=a.length;++ct<ot;)a[ct].call(n,J);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),N())}function N(){for(var U in e.state=6,e.timer.stop(),delete i[r],i)return;delete n.__transition}i[r]=e,e.timer=(0,lr.HT)(function o(U){e.state=1,e.timer.restart(v,e.delay,e.time),e.delay<=U&&v(U-e.delay)},0,e.time)}(n,e,{name:r,index:i,group:a,on:ku,tween:Iu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function ts(n,r){var e=qi(n,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function cr(n,r){var e=qi(n,r);if(e.state>3)throw new Error("too late; already running");return e}function qi(n,r){var e=n.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function vr(n,r){return n=+n,r=+r,function(e){return n*(1-e)+r*e}}var ia,ns,go,Ea,fo=180/Math.PI,es={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mo(n,r,e,i,a,o){var v,T,N;return(v=Math.sqrt(n*n+r*r))&&(n/=v,r/=v),(N=n*e+r*i)&&(e-=n*N,i-=r*N),(T=Math.sqrt(e*e+i*i))&&(e/=T,i/=T,N/=T),n*i<r*e&&(n=-n,r=-r,N=-N,v=-v),{translateX:a,translateY:o,rotate:Math.atan2(r,n)*fo,skewX:Math.atan(N)*fo,scaleX:v,scaleY:T}}function _o(n,r,e,i){function a(U){return U.length?U.pop()+" ":""}return function(U,J){var ct=[],ot=[];return U=n(U),J=n(J),function o(U,J,ct,ot,Ct,It){if(U!==ct||J!==ot){var Ft=Ct.push("translate(",null,r,null,e);It.push({i:Ft-4,x:vr(U,ct)},{i:Ft-2,x:vr(J,ot)})}else(ct||ot)&&Ct.push("translate("+ct+r+ot+e)}(U.translateX,U.translateY,J.translateX,J.translateY,ct,ot),function v(U,J,ct,ot){U!==J?(U-J>180?J+=360:J-U>180&&(U+=360),ot.push({i:ct.push(a(ct)+"rotate(",null,i)-2,x:vr(U,J)})):J&&ct.push(a(ct)+"rotate("+J+i)}(U.rotate,J.rotate,ct,ot),function T(U,J,ct,ot){U!==J?ot.push({i:ct.push(a(ct)+"skewX(",null,i)-2,x:vr(U,J)}):J&&ct.push(a(ct)+"skewX("+J+i)}(U.skewX,J.skewX,ct,ot),function N(U,J,ct,ot,Ct,It){if(U!==ct||J!==ot){var Ft=Ct.push(a(Ct)+"scale(",null,",",null,")");It.push({i:Ft-4,x:vr(U,ct)},{i:Ft-2,x:vr(J,ot)})}else(1!==ct||1!==ot)&&Ct.push(a(Ct)+"scale("+ct+","+ot+")")}(U.scaleX,U.scaleY,J.scaleX,J.scaleY,ct,ot),U=J=null,function(Ct){for(var _t,It=-1,Ft=ot.length;++It<Ft;)ct[(_t=ot[It]).i]=_t.x(Ct);return ct.join("")}}}var Ru=_o(function Pu(n){return"none"===n?es:(ia||(ia=document.createElement("DIV"),ns=document.documentElement,go=document.defaultView),ia.style.transform=n,n=go.getComputedStyle(ns.appendChild(ia),null).getPropertyValue("transform"),ns.removeChild(ia),mo(+(n=n.slice(7,-1).split(","))[0],+n[1],+n[2],+n[3],+n[4],+n[5]))},"px, ","px)","deg)"),Bu=_o(function Fu(n){return null!=n&&(Ea||(Ea=document.createElementNS("http://www.w3.org/2000/svg","g")),Ea.setAttribute("transform",n),n=Ea.transform.baseVal.consolidate())?mo((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):es},", ",")",")");function Zu(n,r){var e,i;return function(){var a=cr(this,n),o=a.tween;if(o!==e)for(var v=0,T=(i=e=o).length;v<T;++v)if(i[v].name===r){(i=i.slice()).splice(v,1);break}a.tween=i}}function Vu(n,r,e){var i,a;if("function"!=typeof e)throw new Error;return function(){var o=cr(this,n),v=o.tween;if(v!==i){a=(i=v).slice();for(var T={name:r,value:e},N=0,U=a.length;N<U;++N)if(a[N].name===r){a[N]=T;break}N===U&&a.push(T)}o.tween=a}}function is(n,r,e){var i=n._id;return n.each(function(){var a=cr(this,i);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return qi(a,i).value[r]}}function rs(n,r,e){n.prototype=r.prototype=e,e.constructor=n}function vo(n,r){var e=Object.create(n.prototype);for(var i in r)e[i]=r[i];return e}function ra(){}var Da=1/.7,Pr="\\s*([+-]?\\d+)\\s*",sa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Uu=/^#([0-9a-f]{3,8})$/,zu=new RegExp("^rgb\\("+[Pr,Pr,Pr]+"\\)$"),Hu=new RegExp("^rgb\\("+[ir,ir,ir]+"\\)$"),Yu=new RegExp("^rgba\\("+[Pr,Pr,Pr,sa]+"\\)$"),Wu=new RegExp("^rgba\\("+[ir,ir,ir,sa]+"\\)$"),Xu=new RegExp("^hsl\\("+[sa,ir,ir]+"\\)$"),$u=new RegExp("^hsla\\("+[sa,ir,ir,sa]+"\\)$"),xo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function yo(){return this.rgb().formatHex()}function bo(){return this.rgb().formatRgb()}function oa(n){var r,e;return n=(n+"").trim().toLowerCase(),(r=Uu.exec(n))?(e=r[1].length,r=parseInt(r[1],16),6===e?To(r):3===e?new Ui(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?La(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?La(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=zu.exec(n))?new Ui(r[1],r[2],r[3],1):(r=Hu.exec(n))?new Ui(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=Yu.exec(n))?La(r[1],r[2],r[3],r[4]):(r=Wu.exec(n))?La(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Xu.exec(n))?Ao(r[1],r[2]/100,r[3]/100,1):(r=$u.exec(n))?Ao(r[1],r[2]/100,r[3]/100,r[4]):xo.hasOwnProperty(n)?To(xo[n]):"transparent"===n?new Ui(NaN,NaN,NaN,0):null}function To(n){return new Ui(n>>16&255,n>>8&255,255&n,1)}function La(n,r,e,i){return i<=0&&(n=r=e=NaN),new Ui(n,r,e,i)}function ju(n){return n instanceof ra||(n=oa(n)),n?new Ui((n=n.rgb()).r,n.g,n.b,n.opacity):new Ui}function ka(n,r,e,i){return 1===arguments.length?ju(n):new Ui(n,r,e,i??1)}function Ui(n,r,e,i){this.r=+n,this.g=+r,this.b=+e,this.opacity=+i}function Co(){return"#"+as(this.r)+as(this.g)+as(this.b)}function wo(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function as(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Ao(n,r,e,i){return i<=0?n=r=e=NaN:e<=0||e>=1?n=r=NaN:r<=0&&(n=NaN),new rr(n,r,e,i)}function So(n){if(n instanceof rr)return new rr(n.h,n.s,n.l,n.opacity);if(n instanceof ra||(n=oa(n)),!n)return new rr;if(n instanceof rr)return n;var r=(n=n.rgb()).r/255,e=n.g/255,i=n.b/255,a=Math.min(r,e,i),o=Math.max(r,e,i),v=NaN,T=o-a,N=(o+a)/2;return T?(v=r===o?(e-i)/T+6*(e<i):e===o?(i-r)/T+2:(r-e)/T+4,T/=N<.5?o+a:2-o-a,v*=60):T=N>0&&N<1?0:v,new rr(v,T,N,n.opacity)}function rr(n,r,e,i){this.h=+n,this.s=+r,this.l=+e,this.opacity=+i}function ss(n,r,e){return 255*(n<60?r+(e-r)*n/60:n<180?e:n<240?r+(e-r)*(240-n)/60:r)}function Eo(n,r,e,i,a){var o=n*n,v=o*n;return((1-3*n+3*o-v)*r+(4-6*o+3*v)*e+(1+3*n+3*o-3*v)*i+v*a)/6}function Do(n){return function(){return n}}function ko(n,r){var e=r-n;return e?function Lo(n,r){return function(e){return n+e*r}}(n,e):Do(isNaN(n)?r:n)}rs(ra,oa,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:yo,formatHex:yo,formatHsl:function Qu(){return So(this).formatHsl()},formatRgb:bo,toString:bo}),rs(Ui,ka,vo(ra,{brighter:function(n){return n=null==n?Da:Math.pow(Da,n),new Ui(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Ui(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Co,formatHex:Co,formatRgb:wo,toString:wo})),rs(rr,function Ju(n,r,e,i){return 1===arguments.length?So(n):new rr(n,r,e,i??1)},vo(ra,{brighter:function(n){return n=null==n?Da:Math.pow(Da,n),new rr(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new rr(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),r=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*r,a=2*e-i;return new Ui(ss(n>=240?n-240:n+120,a,i),ss(n,a,i),ss(n<120?n+240:n-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));const Io=function n(r){var e=function eh(n){return 1==(n=+n)?ko:function(r,e){return e-r?function th(n,r,e){return n=Math.pow(n,e),r=Math.pow(r,e)-n,e=1/e,function(i){return Math.pow(n+i*r,e)}}(r,e,n):Do(isNaN(r)?e:r)}}(r);function i(a,o){var v=e((a=ka(a)).r,(o=ka(o)).r),T=e(a.g,o.g),N=e(a.b,o.b),U=ko(a.opacity,o.opacity);return function(J){return a.r=v(J),a.g=T(J),a.b=N(J),a.opacity=U(J),a+""}}return i.gamma=n,i}(1);function Oo(n){return function(r){var v,T,e=r.length,i=new Array(e),a=new Array(e),o=new Array(e);for(v=0;v<e;++v)T=ka(r[v]),i[v]=T.r||0,a[v]=T.g||0,o[v]=T.b||0;return i=n(i),a=n(a),o=n(o),T.opacity=1,function(N){return T.r=i(N),T.g=a(N),T.b=o(N),T+""}}}Oo(function Ku(n){var r=n.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),a=n[i],o=n[i+1];return Eo((e-i/r)*r,i>0?n[i-1]:2*a-o,a,o,i<r-1?n[i+2]:2*o-a)}}),Oo(function qu(n){var r=n.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*r);return Eo((e-i/r)*r,n[(i+r-1)%r],n[i%r],n[(i+1)%r],n[(i+2)%r])}});var os=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ls=new RegExp(os.source,"g");function rh(n,r){var i,a,o,e=os.lastIndex=ls.lastIndex=0,v=-1,T=[],N=[];for(n+="",r+="";(i=os.exec(n))&&(a=ls.exec(r));)(o=a.index)>e&&(o=r.slice(e,o),T[v]?T[v]+=o:T[++v]=o),(i=i[0])===(a=a[0])?T[v]?T[v]+=a:T[++v]=a:(T[++v]=null,N.push({i:v,x:vr(i,a)})),e=ls.lastIndex;return e<r.length&&(o=r.slice(e),T[v]?T[v]+=o:T[++v]=o),T.length<2?N[0]?function ih(n){return function(r){return n(r)+""}}(N[0].x):function nh(n){return function(){return n}}(r):(r=N.length,function(U){for(var ct,J=0;J<r;++J)T[(ct=N[J]).i]=ct.x(U);return T.join("")})}function Mo(n,r){var e;return("number"==typeof r?vr:r instanceof oa?Io:(e=oa(r))?(r=e,Io):rh)(n,r)}function ah(n){return function(){this.removeAttribute(n)}}function sh(n){return function(){this.removeAttributeNS(n.space,n.local)}}function oh(n,r,e){var i,o,a=e+"";return function(){var v=this.getAttribute(n);return v===a?null:v===i?o:o=r(i=v,e)}}function lh(n,r,e){var i,o,a=e+"";return function(){var v=this.getAttributeNS(n.space,n.local);return v===a?null:v===i?o:o=r(i=v,e)}}function ch(n,r,e){var i,a,o;return function(){var v,N,T=e(this);return null==T?void this.removeAttribute(n):(v=this.getAttribute(n))===(N=T+"")?null:v===i&&N===a?o:(a=N,o=r(i=v,T))}}function uh(n,r,e){var i,a,o;return function(){var v,N,T=e(this);return null==T?void this.removeAttributeNS(n.space,n.local):(v=this.getAttributeNS(n.space,n.local))===(N=T+"")?null:v===i&&N===a?o:(a=N,o=r(i=v,T))}}function dh(n,r){return function(e){this.setAttribute(n,r.call(this,e))}}function ph(n,r){return function(e){this.setAttributeNS(n.space,n.local,r.call(this,e))}}function fh(n,r){var e,i;function a(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&ph(n,o)),e}return a._value=r,a}function mh(n,r){var e,i;function a(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&dh(n,o)),e}return a._value=r,a}function _h(n,r){return function(){ts(this,n).delay=+r.apply(this,arguments)}}function vh(n,r){return r=+r,function(){ts(this,n).delay=r}}function yh(n,r){return function(){cr(this,n).duration=+r.apply(this,arguments)}}function bh(n,r){return r=+r,function(){cr(this,n).duration=r}}function Ch(n,r){if("function"!=typeof r)throw new Error;return function(){cr(this,n).ease=r}}function Dh(n,r,e){var i,a,o=function Eh(n){return(n+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?ts:cr;return function(){var v=o(this,n),T=v.on;T!==i&&(a=(i=T).copy()).on(r,e),v.on=a}}var Nh=na.prototype.constructor;function No(n){return function(){this.style.removeProperty(n)}}function Gh(n,r,e){return function(i){this.style.setProperty(n,r.call(this,i),e)}}function Uh(n,r,e){var i,a;function o(){var v=r.apply(this,arguments);return v!==a&&(i=(a=v)&&Gh(n,v,e)),i}return o._value=r,o}function Xh(n){return function(r){this.textContent=n.call(this,r)}}function $h(n){var r,e;function i(){var a=n.apply(this,arguments);return a!==e&&(r=(e=a)&&Xh(a)),r}return i._value=n,i}var Kh=0;function ur(n,r,e,i){this._groups=n,this._parents=r,this._name=e,this._id=i}function Po(){return++Kh}var Fr=na.prototype;ur.prototype=function qh(n){return na().transition(n)}.prototype={constructor:ur,select:function Oh(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=bn(n));for(var i=this._groups,a=i.length,o=new Array(a),v=0;v<a;++v)for(var J,ct,T=i[v],N=T.length,U=o[v]=new Array(N),ot=0;ot<N;++ot)(J=T[ot])&&(ct=n.call(J,J.__data__,ot,T))&&("__data__"in J&&(ct.__data__=J.__data__),U[ot]=ct,Sa(U[ot],r,e,ot,U,qi(J,e)));return new ur(o,this._parents,r,e)},selectAll:function Mh(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=zn(n));for(var i=this._groups,a=i.length,o=[],v=[],T=0;T<a;++T)for(var J,N=i[T],U=N.length,ct=0;ct<U;++ct)if(J=N[ct]){for(var Ct,ot=n.call(J,J.__data__,ct,N),It=qi(J,e),Ft=0,_t=ot.length;Ft<_t;++Ft)(Ct=ot[Ft])&&Sa(Ct,r,e,Ft,ot,It);o.push(ot),v.push(J)}return new ur(o,v,r,e)},filter:function Ah(n){"function"!=typeof n&&(n=S(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,T=i[a]=[],U=0;U<v;++U)(N=o[U])&&n.call(N,N.__data__,U,o)&&T.push(N);return new ur(i,this._parents,this._name,this._id)},merge:function Sh(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,e=n._groups,i=r.length,o=Math.min(i,e.length),v=new Array(i),T=0;T<o;++T)for(var ot,N=r[T],U=e[T],J=N.length,ct=v[T]=new Array(J),Ct=0;Ct<J;++Ct)(ot=N[Ct]||U[Ct])&&(ct[Ct]=ot);for(;T<i;++T)v[T]=r[T];return new ur(v,this._parents,this._name,this._id)},selection:function Ph(){return new Nh(this._groups,this._parents)},transition:function jh(){for(var n=this._name,r=this._id,e=Po(),i=this._groups,a=i.length,o=0;o<a;++o)for(var N,v=i[o],T=v.length,U=0;U<T;++U)if(N=v[U]){var J=qi(N,r);Sa(N,n,e,U,v,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new ur(i,this._parents,n,e)},call:Fr.call,nodes:Fr.nodes,node:Fr.node,size:Fr.size,empty:Fr.empty,each:Fr.each,on:function Lh(n,r){var e=this._id;return arguments.length<2?qi(this.node(),e).on.on(n):this.each(Dh(e,n,r))},attr:function hh(n,r){var e=ya(n),i="transform"===e?Bu:Mo;return this.attrTween(n,"function"==typeof r?(e.local?uh:ch)(e,i,is(this,"attr."+n,r)):null==r?(e.local?sh:ah)(e):(e.local?lh:oh)(e,i,r))},attrTween:function gh(n,r){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var i=ya(n);return this.tween(e,(i.local?fh:mh)(i,r))},style:function Vh(n,r,e){var i="transform"==(n+="")?Ru:Mo;return null==r?this.styleTween(n,function Fh(n,r){var e,i,a;return function(){var o=Nr(this,n),v=(this.style.removeProperty(n),Nr(this,n));return o===v?null:o===e&&v===i?a:a=r(e=o,i=v)}}(n,i)).on("end.style."+n,No(n)):"function"==typeof r?this.styleTween(n,function Bh(n,r,e){var i,a,o;return function(){var v=Nr(this,n),T=e(this),N=T+"";return null==T&&(this.style.removeProperty(n),N=T=Nr(this,n)),v===N?null:v===i&&N===a?o:(a=N,o=r(i=v,T))}}(n,i,is(this,"style."+n,r))).each(function Zh(n,r){var e,i,a,T,o="style."+r,v="end."+o;return function(){var N=cr(this,n),U=N.on,J=null==N.value[o]?T||(T=No(r)):void 0;(U!==e||a!==J)&&(i=(e=U).copy()).on(v,a=J),N.on=i}}(this._id,n)):this.styleTween(n,function Rh(n,r,e){var i,o,a=e+"";return function(){var v=Nr(this,n);return v===a?null:v===i?o:o=r(i=v,e)}}(n,i,r),e).on("end.style."+n,null)},styleTween:function zh(n,r,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,Uh(n,r,e??""))},text:function Wh(n){return this.tween("text","function"==typeof n?function Yh(n){return function(){var r=n(this);this.textContent=r??""}}(is(this,"text",n)):function Hh(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function Qh(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,$h(n))},remove:function Ih(){return this.on("end.remove",function kh(n){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==n)return;r&&r.removeChild(this)}}(this._id))},tween:function Gu(n,r){var e=this._id;if(n+="",arguments.length<2){for(var v,i=qi(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((v=i[a]).name===n)return v.value;return null}return this.each((null==r?Zu:Vu)(e,n,r))},delay:function xh(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?_h:vh)(r,n)):qi(this.node(),r).delay},duration:function Th(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?yh:bh)(r,n)):qi(this.node(),r).duration},ease:function wh(n){var r=this._id;return arguments.length?this.each(Ch(r,n)):qi(this.node(),r).ease},end:function Jh(){var n,r,e=this,i=e._id,a=e.size();return new Promise(function(o,v){var T={value:v},N={value:function(){0==--a&&o()}};e.each(function(){var U=cr(this,i),J=U.on;J!==n&&((r=(n=J).copy())._.cancel.push(T),r._.interrupt.push(T),r._.end.push(N)),U.on=r})})}};var cs={time:null,delay:0,duration:250,ease:s(27065).tw};function ed(n,r){for(var e;!(e=n.__transition)||!(e=e[r]);)if(!(n=n.parentNode))return cs.time=(0,lr.zO)(),cs;return e}na.prototype.interrupt=function Nu(n){return this.each(function(){!function Mu(n,r){var i,a,v,e=n.__transition,o=!0;if(e){for(v in r=null==r?null:r+"",e)(i=e[v]).name===r?(a=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[v]):o=!1;o&&delete n.__transition}}(this,n)})},na.prototype.transition=function nd(n){var r,e;n instanceof ur?(r=n._id,n=n._name):(r=Po(),(e=cs).time=(0,lr.zO)(),n=null==n?null:n+"");for(var i=this._groups,a=i.length,o=0;o<a;++o)for(var N,v=i[o],T=v.length,U=0;U<T;++U)(N=v[U])&&Sa(N,n,r,U,v,e||ed(N,r));return new ur(i,this._parents,n,r)};var Fo=s(50727),Ro=s(54968),rd=s(50590);function dd(n){return typeof n>"u"}function gd(n){if(Array.isArray(n)){for(var r=0,e=Array(n.length);r<n.length;r++)e[r]=n[r];return e}return Array.from(n)}function _d(n){return Array.isArray(n)?n:Array.from(n)}function la(){for(var n=arguments.length,r=Array(n),e=0;e<n;e++)r[e]=arguments[e];var i=function(ct,ot){return{a:ct.a*ot.a+ct.c*ot.b,c:ct.a*ot.c+ct.c*ot.d,e:ct.a*ot.e+ct.c*ot.f+ct.e,b:ct.b*ot.a+ct.d*ot.b,d:ct.b*ot.c+ct.d*ot.d,f:ct.b*ot.e+ct.d*ot.f+ct.f}};switch((r=Array.isArray(r[0])?r[0]:r).length){case 0:throw new Error("no matrices provided");case 1:return r[0];case 2:return i(r[0],r[1]);default:var a=r,o=_d(a),v=o[0],T=o[1],N=o.slice(2),U=i(v,T);return la.apply(void 0,[U].concat(gd(N)))}}function Vo(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:n,b:0,d:1,f:r}}function Ia(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n)}return this}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;const Go=Symbol("implicit");function us(){var n=new Map,r=[],e=[],i=Go;function a(o){var v=o+"",T=n.get(v);if(!T){if(i!==Go)return i;n.set(v,T=r.push(o))}return e[(T-1)%e.length]}return a.domain=function(o){if(!arguments.length)return r.slice();r=[],n=new Map;for(const v of o){const T=v+"";n.has(T)||n.set(T,r.push(v))}return a},a.range=function(o){return arguments.length?(e=Array.from(o),a):e.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.copy=function(){return us(r,e).unknown(i)},Ia.apply(a,arguments),a}var Br=s(59695);function xd(n,r){var e;function i(){var a,v,o=e.length,T=0,N=0;for(a=0;a<o;++a)T+=(v=e[a]).x,N+=v.y;for(T=T/o-n,N=N/o-r,a=0;a<o;++a)(v=e[a]).x-=T,v.y-=N}return null==n&&(n=0),null==r&&(r=0),i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(r=+a,i):r},i}function ti(n){return function(){return n}}function xr(){return 1e-6*(Math.random()-.5)}function Uo(n,r,e,i){if(isNaN(r)||isNaN(e))return n;var a,ct,ot,Ct,It,Ft,_t,Vt,qt,o=n._root,v={data:i},T=n._x0,N=n._y0,U=n._x1,J=n._y1;if(!o)return n._root=v,n;for(;o.length;)if((Ft=r>=(ct=(T+U)/2))?T=ct:U=ct,(_t=e>=(ot=(N+J)/2))?N=ot:J=ot,a=o,!(o=o[Vt=_t<<1|Ft]))return a[Vt]=v,n;if(Ct=+n._x.call(null,o.data),It=+n._y.call(null,o.data),r===Ct&&e===It)return v.next=o,a?a[Vt]=v:n._root=v,n;do{a=a?a[Vt]=new Array(4):n._root=new Array(4),(Ft=r>=(ct=(T+U)/2))?T=ct:U=ct,(_t=e>=(ot=(N+J)/2))?N=ot:J=ot}while((Vt=_t<<1|Ft)==(qt=(It>=ot)<<1|Ct>=ct));return a[qt]=o,a[Vt]=v,n}function Li(n,r,e,i,a){this.node=n,this.x0=r,this.y0=e,this.x1=i,this.y1=a}function Od(n){return n[0]}function Nd(n){return n[1]}function hs(n,r,e){var i=new ds(r??Od,e??Nd,NaN,NaN,NaN,NaN);return null==n?i:i.addAll(n)}function ds(n,r,e,i,a,o){this._x=n,this._y=r,this._x0=e,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function zo(n){for(var r={data:n.data},e=r;n=n.next;)e=e.next={data:n.data};return r}var ki=hs.prototype=ds.prototype;function Fd(n){return n.x+n.vx}function Rd(n){return n.y+n.vy}function Ho(n){var r,e,i=1,a=1;function o(){for(var N,J,ct,ot,Ct,It,Ft,U=r.length,_t=0;_t<a;++_t)for(J=hs(r,Fd,Rd).visitAfter(v),N=0;N<U;++N)Ft=(It=e[(ct=r[N]).index])*It,ot=ct.x+ct.vx,Ct=ct.y+ct.vy,J.visit(Vt);function Vt(qt,$t,ye,De,ge){var Ke=qt.data,an=qt.r,yn=It+an;if(!Ke)return $t>ot+yn||De<ot-yn||ye>Ct+yn||ge<Ct-yn;if(Ke.index>ct.index){var Dn=ot-Ke.x-Ke.vx,Ln=Ct-Ke.y-Ke.vy,$n=Dn*Dn+Ln*Ln;$n<yn*yn&&(0===Dn&&($n+=(Dn=xr())*Dn),0===Ln&&($n+=(Ln=xr())*Ln),$n=(yn-($n=Math.sqrt($n)))/$n*i,ct.vx+=(Dn*=$n)*(yn=(an*=an)/(Ft+an)),ct.vy+=(Ln*=$n)*yn,Ke.vx-=Dn*(yn=1-yn),Ke.vy-=Ln*yn)}}}function v(N){if(N.data)return N.r=e[N.data.index];for(var U=N.r=0;U<4;++U)N[U]&&N[U].r>N.r&&(N.r=N[U].r)}function T(){if(r){var N,J,U=r.length;for(e=new Array(U),N=0;N<U;++N)e[(J=r[N]).index]=+n(J,N,r)}}return"function"!=typeof n&&(n=ti(null==n?1:+n)),o.initialize=function(N){r=N,T()},o.iterations=function(N){return arguments.length?(a=+N,o):a},o.strength=function(N){return arguments.length?(i=+N,o):i},o.radius=function(N){return arguments.length?(n="function"==typeof N?N:ti(+N),T(),o):n},o}ki.copy=function(){var e,i,n=new ds(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=zo(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(i=r.source[a])&&(i.length?e.push({source:i,target:r.target[a]=new Array(4)}):r.target[a]=zo(i));return n},ki.add=function yd(n){var r=+this._x.call(null,n),e=+this._y.call(null,n);return Uo(this.cover(r,e),r,e,n)},ki.addAll=function bd(n){var r,e,a,o,i=n.length,v=new Array(i),T=new Array(i),N=1/0,U=1/0,J=-1/0,ct=-1/0;for(e=0;e<i;++e)isNaN(a=+this._x.call(null,r=n[e]))||isNaN(o=+this._y.call(null,r))||(v[e]=a,T[e]=o,a<N&&(N=a),a>J&&(J=a),o<U&&(U=o),o>ct&&(ct=o));if(N>J||U>ct)return this;for(this.cover(N,U).cover(J,ct),e=0;e<i;++e)Uo(this,v[e],T[e],n[e]);return this},ki.cover=function Td(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var e=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(e))a=(e=Math.floor(n))+1,o=(i=Math.floor(r))+1;else{for(var N,U,v=a-e,T=this._root;e>n||n>=a||i>r||r>=o;)switch(U=(r<i)<<1|n<e,N=new Array(4),N[U]=T,T=N,v*=2,U){case 0:a=e+v,o=i+v;break;case 1:e=a-v,o=i+v;break;case 2:a=e+v,i=o-v;break;case 3:e=a-v,i=o-v}this._root&&this._root.length&&(this._root=T)}return this._x0=e,this._y0=i,this._x1=a,this._y1=o,this},ki.data=function Cd(){var n=[];return this.visit(function(r){if(!r.length)do{n.push(r.data)}while(r=r.next)}),n},ki.extent=function wd(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ki.find=function Ad(n,r,e){var i,v,T,N,U,It,Ft,a=this._x0,o=this._y0,J=this._x1,ct=this._y1,ot=[],Ct=this._root;for(Ct&&ot.push(new Li(Ct,a,o,J,ct)),null==e?e=1/0:(a=n-e,o=r-e,J=n+e,ct=r+e,e*=e);It=ot.pop();)if(!(!(Ct=It.node)||(v=It.x0)>J||(T=It.y0)>ct||(N=It.x1)<a||(U=It.y1)<o))if(Ct.length){var _t=(v+N)/2,Vt=(T+U)/2;ot.push(new Li(Ct[3],_t,Vt,N,U),new Li(Ct[2],v,Vt,_t,U),new Li(Ct[1],_t,T,N,Vt),new Li(Ct[0],v,T,_t,Vt)),(Ft=(r>=Vt)<<1|n>=_t)&&(It=ot[ot.length-1],ot[ot.length-1]=ot[ot.length-1-Ft],ot[ot.length-1-Ft]=It)}else{var qt=n-+this._x.call(null,Ct.data),$t=r-+this._y.call(null,Ct.data),ye=qt*qt+$t*$t;if(ye<e){var De=Math.sqrt(e=ye);a=n-De,o=r-De,J=n+De,ct=r+De,i=Ct.data}}return i},ki.remove=function Sd(n){if(isNaN(J=+this._x.call(null,n))||isNaN(ct=+this._y.call(null,n)))return this;var r,i,a,o,J,ct,ot,Ct,It,Ft,_t,Vt,e=this._root,v=this._x0,T=this._y0,N=this._x1,U=this._y1;if(!e)return this;if(e.length)for(;;){if((It=J>=(ot=(v+N)/2))?v=ot:N=ot,(Ft=ct>=(Ct=(T+U)/2))?T=Ct:U=Ct,r=e,!(e=e[_t=Ft<<1|It]))return this;if(!e.length)break;(r[_t+1&3]||r[_t+2&3]||r[_t+3&3])&&(i=r,Vt=_t)}for(;e.data!==n;)if(a=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,a?(o?a.next=o:delete a.next,this):r?(o?r[_t]=o:delete r[_t],(e=r[0]||r[1]||r[2]||r[3])&&e===(r[3]||r[2]||r[1]||r[0])&&!e.length&&(i?i[Vt]=e:this._root=e),this):(this._root=o,this)},ki.removeAll=function Ed(n){for(var r=0,e=n.length;r<e;++r)this.remove(n[r]);return this},ki.root=function Dd(){return this._root},ki.size=function Ld(){var n=0;return this.visit(function(r){if(!r.length)do{++n}while(r=r.next)}),n},ki.visit=function kd(n){var e,a,o,v,T,N,r=[],i=this._root;for(i&&r.push(new Li(i,this._x0,this._y0,this._x1,this._y1));e=r.pop();)if(!n(i=e.node,o=e.x0,v=e.y0,T=e.x1,N=e.y1)&&i.length){var U=(o+T)/2,J=(v+N)/2;(a=i[3])&&r.push(new Li(a,U,J,T,N)),(a=i[2])&&r.push(new Li(a,o,J,U,N)),(a=i[1])&&r.push(new Li(a,U,v,T,J)),(a=i[0])&&r.push(new Li(a,o,v,U,J))}return this},ki.visitAfter=function Id(n){var i,r=[],e=[];for(this._root&&r.push(new Li(this._root,this._x0,this._y0,this._x1,this._y1));i=r.pop();){var a=i.node;if(a.length){var o,v=i.x0,T=i.y0,N=i.x1,U=i.y1,J=(v+N)/2,ct=(T+U)/2;(o=a[0])&&r.push(new Li(o,v,T,J,ct)),(o=a[1])&&r.push(new Li(o,J,T,N,ct)),(o=a[2])&&r.push(new Li(o,v,ct,J,U)),(o=a[3])&&r.push(new Li(o,J,ct,N,U))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this},ki.x=function Md(n){return arguments.length?(this._x=n,this):this._x},ki.y=function Pd(n){return arguments.length?(this._y=n,this):this._y};var Wi="$";function Oa(){}function Yo(n,r){var e=new Oa;if(n instanceof Oa)n.each(function(T,N){e.set(N,T)});else if(Array.isArray(n)){var o,i=-1,a=n.length;if(null==r)for(;++i<a;)e.set(i,n[i]);else for(;++i<a;)e.set(r(o=n[i],i,n),o)}else if(n)for(var v in n)e.set(v,n[v]);return e}Oa.prototype=Yo.prototype={constructor:Oa,has:function(n){return Wi+n in this},get:function(n){return this[Wi+n]},set:function(n,r){return this[Wi+n]=r,this},remove:function(n){var r=Wi+n;return r in this&&delete this[r]},clear:function(){for(var n in this)n[0]===Wi&&delete this[n]},keys:function(){var n=[];for(var r in this)r[0]===Wi&&n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)r[0]===Wi&&n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)r[0]===Wi&&n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)r[0]===Wi&&++n;return n},empty:function(){for(var n in this)if(n[0]===Wi)return!1;return!0},each:function(n){for(var r in this)r[0]===Wi&&n(this[r],r.slice(1),this)}};const ps=Yo;function Ma(){}var Dr=ps.prototype;function Gd(n){return n.index}function $o(n,r){var e=n.get(r);if(!e)throw new Error("missing: "+r);return e}function Qo(n){var i,o,v,T,N,r=Gd,e=function J(Ft){return 1/Math.min(T[Ft.source.index],T[Ft.target.index])},a=ti(30),U=1;function ct(Ft){for(var _t=0,Vt=n.length;_t<U;++_t)for(var $t,ye,De,ge,Ke,an,yn,qt=0;qt<Vt;++qt)ge=(De=($t=n[qt]).target).x+De.vx-(ye=$t.source).x-ye.vx||xr(),Ke=De.y+De.vy-ye.y-ye.vy||xr(),Ke*=an=((an=Math.sqrt(ge*ge+Ke*Ke))-o[qt])/an*Ft*i[qt],De.vx-=(ge*=an)*(yn=N[qt]),De.vy-=Ke*yn,ye.vx+=ge*(yn=1-yn),ye.vy+=Ke*yn}function ot(){if(v){var Ft,$t,_t=v.length,Vt=n.length,qt=ps(v,r);for(Ft=0,T=new Array(_t);Ft<Vt;++Ft)($t=n[Ft]).index=Ft,"object"!=typeof $t.source&&($t.source=$o(qt,$t.source)),"object"!=typeof $t.target&&($t.target=$o(qt,$t.target)),T[$t.source.index]=(T[$t.source.index]||0)+1,T[$t.target.index]=(T[$t.target.index]||0)+1;for(Ft=0,N=new Array(Vt);Ft<Vt;++Ft)N[Ft]=T[($t=n[Ft]).source.index]/(T[$t.source.index]+T[$t.target.index]);i=new Array(Vt),Ct(),o=new Array(Vt),It()}}function Ct(){if(v)for(var Ft=0,_t=n.length;Ft<_t;++Ft)i[Ft]=+e(n[Ft],Ft,n)}function It(){if(v)for(var Ft=0,_t=n.length;Ft<_t;++Ft)o[Ft]=+a(n[Ft],Ft,n)}return null==n&&(n=[]),ct.initialize=function(Ft){v=Ft,ot()},ct.links=function(Ft){return arguments.length?(n=Ft,ot(),ct):n},ct.id=function(Ft){return arguments.length?(r=Ft,ct):r},ct.iterations=function(Ft){return arguments.length?(U=+Ft,ct):U},ct.strength=function(Ft){return arguments.length?(e="function"==typeof Ft?Ft:ti(+Ft),Ct(),ct):e},ct.distance=function(Ft){return arguments.length?(a="function"==typeof Ft?Ft:ti(+Ft),It(),ct):a},ct}function Ud(n){return n.x}function zd(n){return n.y}Ma.prototype=function Vd(n,r){var e=new Ma;if(n instanceof Ma)n.each(function(o){e.add(o)});else if(n){var i=-1,a=n.length;if(null==r)for(;++i<a;)e.add(n[i]);else for(;++i<a;)e.add(r(n[i],i,n))}return e}.prototype={constructor:Ma,has:Dr.has,add:function(n){return this[Wi+(n+="")]=n,this},remove:Dr.remove,clear:Dr.clear,values:Dr.keys,size:Dr.size,empty:Dr.empty,each:Dr.each};var Yd=Math.PI*(3-Math.sqrt(5));function jo(n){var r,e=1,i=.001,a=1-Math.pow(i,1/300),o=0,v=.6,T=ps(),N=(0,lr.HT)(J),U=(0,Ca.Z)("tick","end");function J(){ct(),U.call("tick",r),e<i&&(N.stop(),U.call("end",r))}function ct(It){var Ft,Vt,_t=n.length;void 0===It&&(It=1);for(var qt=0;qt<It;++qt)for(e+=(o-e)*a,T.each(function($t){$t(e)}),Ft=0;Ft<_t;++Ft)null==(Vt=n[Ft]).fx?Vt.x+=Vt.vx*=v:(Vt.x=Vt.fx,Vt.vx=0),null==Vt.fy?Vt.y+=Vt.vy*=v:(Vt.y=Vt.fy,Vt.vy=0);return r}function ot(){for(var _t,It=0,Ft=n.length;It<Ft;++It){if((_t=n[It]).index=It,null!=_t.fx&&(_t.x=_t.fx),null!=_t.fy&&(_t.y=_t.fy),isNaN(_t.x)||isNaN(_t.y)){var Vt=10*Math.sqrt(It),qt=It*Yd;_t.x=Vt*Math.cos(qt),_t.y=Vt*Math.sin(qt)}(isNaN(_t.vx)||isNaN(_t.vy))&&(_t.vx=_t.vy=0)}}function Ct(It){return It.initialize&&It.initialize(n),It}return null==n&&(n=[]),ot(),r={tick:ct,restart:function(){return N.restart(J),r},stop:function(){return N.stop(),r},nodes:function(It){return arguments.length?(n=It,ot(),T.each(Ct),r):n},alpha:function(It){return arguments.length?(e=+It,r):e},alphaMin:function(It){return arguments.length?(i=+It,r):i},alphaDecay:function(It){return arguments.length?(a=+It,r):+a},alphaTarget:function(It){return arguments.length?(o=+It,r):o},velocityDecay:function(It){return arguments.length?(v=1-It,r):1-v},force:function(It,Ft){return arguments.length>1?(null==Ft?T.remove(It):T.set(It,Ct(Ft)),r):T.get(It)},find:function(It,Ft,_t){var $t,ye,De,ge,Ke,Vt=0,qt=n.length;for(null==_t?_t=1/0:_t*=_t,Vt=0;Vt<qt;++Vt)(De=($t=It-(ge=n[Vt]).x)*$t+(ye=Ft-ge.y)*ye)<_t&&(Ke=ge,_t=De);return Ke},on:function(It,Ft){return arguments.length>1?(U.on(It,Ft),r):U.on(It)}}}function Jo(){var n,r,e,a,i=ti(-30),o=1,v=1/0,T=.81;function N(ot){var Ct,It=n.length,Ft=hs(n,Ud,zd).visitAfter(J);for(e=ot,Ct=0;Ct<It;++Ct)r=n[Ct],Ft.visit(ct)}function U(){if(n){var ot,It,Ct=n.length;for(a=new Array(Ct),ot=0;ot<Ct;++ot)a[(It=n[ot]).index]=+i(It,ot,n)}}function J(ot){var It,Ft,Vt,qt,$t,Ct=0,_t=0;if(ot.length){for(Vt=qt=$t=0;$t<4;++$t)(It=ot[$t])&&(Ft=Math.abs(It.value))&&(Ct+=It.value,_t+=Ft,Vt+=Ft*It.x,qt+=Ft*It.y);ot.x=Vt/_t,ot.y=qt/_t}else{(It=ot).x=It.data.x,It.y=It.data.y;do{Ct+=a[It.data.index]}while(It=It.next)}ot.value=Ct}function ct(ot,Ct,It,Ft){if(!ot.value)return!0;var _t=ot.x-r.x,Vt=ot.y-r.y,qt=Ft-Ct,$t=_t*_t+Vt*Vt;if(qt*qt/T<$t)return $t<v&&(0===_t&&($t+=(_t=xr())*_t),0===Vt&&($t+=(Vt=xr())*Vt),$t<o&&($t=Math.sqrt(o*$t)),r.vx+=_t*ot.value*e/$t,r.vy+=Vt*ot.value*e/$t),!0;if(!(ot.length||$t>=v)){(ot.data!==r||ot.next)&&(0===_t&&($t+=(_t=xr())*_t),0===Vt&&($t+=(Vt=xr())*Vt),$t<o&&($t=Math.sqrt(o*$t)));do{ot.data!==r&&(r.vx+=_t*(qt=a[ot.data.index]*e/$t),r.vy+=Vt*qt)}while(ot=ot.next)}}return N.initialize=function(ot){n=ot,U()},N.strength=function(ot){return arguments.length?(i="function"==typeof ot?ot:ti(+ot),U(),N):i},N.distanceMin=function(ot){return arguments.length?(o=ot*ot,N):Math.sqrt(o)},N.distanceMax=function(ot){return arguments.length?(v=ot*ot,N):Math.sqrt(v)},N.theta=function(ot){return arguments.length?(T=ot*ot,N):Math.sqrt(T)},N}function Wd(n,r,e){var i,o,v,a=ti(.1);function T(U){for(var J=0,ct=i.length;J<ct;++J){var ot=i[J],Ct=ot.x-r||1e-6,It=ot.y-e||1e-6,Ft=Math.sqrt(Ct*Ct+It*It),_t=(v[J]-Ft)*o[J]*U/Ft;ot.vx+=Ct*_t,ot.vy+=It*_t}}function N(){if(i){var U,J=i.length;for(o=new Array(J),v=new Array(J),U=0;U<J;++U)v[U]=+n(i[U],U,i),o[U]=isNaN(v[U])?0:+a(i[U],U,i)}}return"function"!=typeof n&&(n=ti(+n)),null==r&&(r=0),null==e&&(e=0),T.initialize=function(U){i=U,N()},T.strength=function(U){return arguments.length?(a="function"==typeof U?U:ti(+U),N(),T):a},T.radius=function(U){return arguments.length?(n="function"==typeof U?U:ti(+U),N(),T):n},T.x=function(U){return arguments.length?(r=+U,T):r},T.y=function(U){return arguments.length?(e=+U,T):e},T}function Xd(n){var e,i,a,r=ti(.1);function o(T){for(var J,N=0,U=e.length;N<U;++N)(J=e[N]).vx+=(a[N]-J.x)*i[N]*T}function v(){if(e){var T,N=e.length;for(i=new Array(N),a=new Array(N),T=0;T<N;++T)i[T]=isNaN(a[T]=+n(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof n&&(n=ti(null==n?0:+n)),o.initialize=function(T){e=T,v()},o.strength=function(T){return arguments.length?(r="function"==typeof T?T:ti(+T),v(),o):r},o.x=function(T){return arguments.length?(n="function"==typeof T?T:ti(+T),v(),o):n},o}function $d(n){var e,i,a,r=ti(.1);function o(T){for(var J,N=0,U=e.length;N<U;++N)(J=e[N]).vy+=(a[N]-J.y)*i[N]*T}function v(){if(e){var T,N=e.length;for(i=new Array(N),a=new Array(N),T=0;T<N;++T)i[T]=isNaN(a[T]=+n(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof n&&(n=ti(null==n?0:+n)),o.initialize=function(T){e=T,v()},o.strength=function(T){return arguments.length?(r="function"==typeof T?T:ti(+T),v(),o):r},o.y=function(T){return arguments.length?(n="function"==typeof T?T:ti(+T),v(),o):n},o}var Qd=s(67824);function jd(n,r,e){var i=new lr.B7,a=r;return null==r?(i.restart(n,r,e),i):(r=+r,e=null==e?(0,lr.zO)():+e,i.restart(function o(v){v+=a,i.restart(o,a+=r,e),n(v)},r,e),i)}const Jd=["linkTemplate"],Kd=["nodeTemplate"],qd=["clusterTemplate"],tp=["defsTemplate"],ep=["miniMapNodeTemplate"],np=["nodeElement"],ip=["linkElement"];function rp(n,r){if(1&n&&(t.O4$(),t.GkF(0,14)),2&n){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.defsTemplate)}}function ap(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",15)),2&n){const e=r.$implicit;t.uIk("d",e.textPath)("id",e.id)}}const ca=function(n){return{$implicit:n}};function sp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function op(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function lp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onClick(o))}),t.YNc(2,sp,1,4,"ng-container",18),t.YNc(3,op,4,6,"g",19),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldClusters.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!i.clusterTemplate)}}function cp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.linkTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function up(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",26)),2&n){const e=t.oxw().$implicit;t.uIk("d",e.line)}}function hp(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,cp,1,4,"ng-container",18),t.YNc(3,up,1,1,"path",25),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.Q6J("id",e.id),t.xp6(2),t.Q6J("ngIf",i.linkTemplate),t.xp6(1),t.Q6J("ngIf",!i.linkTemplate)}}function dp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function pp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit;t.uIk("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function fp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onClick(o))})("mousedown",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(T.onNodeMouseDown(a,v))}),t.YNc(2,dp,1,4,"ng-container",18),t.YNc(3,pp,1,3,"circle",29),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate)}}function mp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onTouchStart(a))})("touchend",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onTouchEnd(a))}),t.TgZ(1,"defs"),t.YNc(2,rp,1,1,"ng-container",5),t.YNc(3,ap,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isPanning=!0)}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,lp,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,hp,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,fp,4,6,"g",13),t.qZA()()}if(2&n){const e=t.oxw();t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",e.defsTemplate),t.xp6(1),t.Q6J("ngForOf",e.graph.edges),t.xp6(1),t.uIk("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function gp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function _p(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function vp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.uIk("cx",e.dimension.width/2/i.minimapScaleCoefficient)("cy",e.dimension.height/2/i.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function xp(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,gp,1,4,"ng-container",18),t.YNc(3,_p,1,4,"ng-container",18),t.YNc(4,vp,1,3,"circle",29),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.miniMapNodeTemplate&&i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate&&!i.miniMapNodeTemplate)}}function yp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",31)(1,"rect",32),t.NdJ("mousedown",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onMinimapPanTo(a))}),t.qZA(),t.TgZ(2,"g")(3,"g",33),t.YNc(4,xp,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onMinimapDragMouseDown())}),t.qZA()()()}if(2&n){const e=t.oxw();t.uIk("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),t.xp6(1),t.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/e.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),t.xp6(1),t.ekj("panning",e.isMinimapPanning),t.uIk("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const bp=["*"],Ko={};function hr(){let n=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return n=`a${n}`,Ko[n]?hr():(Ko[n]=!0,n)}var Zr=(()=>{return(n=Zr||(Zr={})).Both="both",n.Horizontal="horizontal",n.Vertical="vertical",Zr;var n})(),Vr=(()=>{return(n=Vr||(Vr={})).UpperLeft="UpperLeft",n.UpperRight="UpperRight",Vr;var n})();function Tp(n,r,e){e=e||{};let i,a,o,v=null,T=0;function N(){T=!1===e.leading?0:+new Date,v=null,o=n.apply(i,a)}return function(...U){const J=+new Date;!T&&!1===e.leading&&(T=J);const ct=r-(J-T);return i=this,a=U,ct<=0?(clearTimeout(v),v=null,T=J,o=n.apply(i,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,ct)),o}}function Cp(n,r){return function(i,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:Tp(o.value,n,r)}),this[a]}}}}const qo=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class wp{constructor(r,e,i){"string"==typeof r&&(r=qo.find(a=>a.name===r)),this.colorDomain=r.domain,this.domain=e,this.customColors=i,this.scale=this.generateColorScheme(r,this.domain)}generateColorScheme(r,e){return"string"==typeof r&&(r=qo.find(i=>i.name===r)),us().range(r.domain).domain(e)}getColor(r){if(null==r)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(r);const e=r.toString();let i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),i?i.value:this.scale(r)}}let Sp=(()=>{class n{constructor(e,i){this.element=e,this.zone=i,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:i,offsetWidth:a}=this.element.nativeElement;i&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),n})();var Gr=(()=>{return(n=Gr||(Gr={})).LEFT_TO_RIGHT="LR",n.RIGHT_TO_LEFT="RL",n.TOP_TO_BOTTOM="TB",n.BOTTOM_TO_TOM="BT",Gr;var n})();function Ur(n){return"string"==typeof n?{id:n,x:0,y:0}:n}function el(n,r){return"number"==typeof r?n[r]:r}const nl={dagre:class Ep{constructor(){this.defaultSettings={orientation:Gr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Br.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}return r}updateEdge(r,e){const i=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Br.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=hr()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreCluster:class Dp{constructor(){this.defaultSettings={orientation:Gr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Br.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;const e=i=>{const a=this.dagreGraph._nodes[i.id];return{...i,position:{x:a.x,y:a.y},dimension:{width:a.width,height:a.height}}};return r.clusters=(r.clusters||[]).map(e),r.nodes=r.nodes.map(e),r}updateEdge(r,e){const i=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Br.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreClusters=r.clusters||[],this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=hr()),a});for(const i of this.dagreNodes)this.dagreGraph.setNode(i.id,i);for(const i of this.dagreClusters)this.dagreGraph.setNode(i.id,i),i.childNodeIds.forEach(a=>{this.dagreGraph.setParent(a,i.id)});for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreNodesOnly:class kp{constructor(){this.defaultSettings={orientation:Gr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Br.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}for(const e of r.edges)this.updateEdge(r,e);return r}updateEdge(r,e){const i=r.nodes.find(It=>It.id===e.source),a=r.nodes.find(It=>It.id===e.target),o="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",v="y"===o?"x":"y",T="y"===o?"height":"width",N=i.position[o]<=a.position[o]?-1:1,U={[v]:i.position[v],[o]:i.position[o]-N*(i.dimension[T]/2)},J={[v]:a.position[v],[o]:a.position[o]+N*(a.dimension[T]/2)},ct=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[U,{[v]:U[v],[o]:U[o]-N*ct},{[v]:J[v],[o]:J[o]+N*ct},J];const Ct=r.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return Ct&&(Ct.points=e.points),r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Br.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=hr()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},d3ForceDirected:class Ip{constructor(){this.defaultSettings={force:jo().force("charge",Jo().strength(-150)).force("collide",Ho(5)),forceLink:Qo().id(r=>r.id).distance(()=>100)},this.settings={},this.outputGraph$=new Pn.x}run(r){return this.inputGraph=r,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>({...e}))],edges:[...this.inputGraph.edges.map(e=>({...e}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.nodes(this.d3Graph.nodes).force("link",i.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(r){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>({...e,id:e.id||hr(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>({...e,source:Ur(e.source).id,target:Ur(e.target).id,points:[{x:Ur(e.source).x,y:Ur(e.source).y},{x:Ur(e.target).x,y:Ur(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){this.settings.force.alphaTarget(.3).restart();const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.draggingStart={x:e.x-i.x,y:e.y-i.y},i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDrag(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDragEnd(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.settings.force.alphaTarget(0),i.fx=void 0,i.fy=void 0)}},colaForceDirected:class Op{constructor(){this.defaultSettings={force:(0,Qd.d3adaptor)({...x,...c,..._}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new Pn.x}run(r){return this.inputGraph=r,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>({...e,width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(i=>this.inputGraph.clusters.findIndex(a=>a.id===i)).filter(i=>i>=0),leaves:e.childNodeIds.map(i=>this.inputGraph.nodes.findIndex(a=>a.id===i)).filter(i=>i>=0)}))],links:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(-1!==i&&-1!==a)return{...e,source:i,target:a}}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(!(i>=0&&a>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(r){return this.outputGraph.nodes=r.nodes.map(e=>({...e,id:e.id||hr(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=r.links.map(e=>{const i=el(r.nodes,e.source),a=el(r.nodes,e.target);return{...e,source:i.id,target:a.id,points:[i.bounds.rayIntersection(a.bounds.cx(),a.bounds.cy()),a.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy())]}}).concat(r.groupLinks.map(e=>{const i=r.nodes.find(T=>T.id===e.source),a=r.nodes.find(T=>T.id===e.target),o=i||r.groups.find(T=>T.id===e.source),v=a||r.groups.find(T=>T.id===e.target);return{...e,source:o.id,target:v.id,points:[o.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(o.bounds.cx(),o.bounds.cy())]}})),this.outputGraph.clusters=r.groups.map((e,i)=>({...this.inputGraph.clusters[i],dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(this.draggingStart={x:a.x-e.x,y:a.y-e.y},a.fixed=1,this.settings.force.start())}onDrag(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(a.x=this.draggingStart.x+e.x,a.y=this.draggingStart.y+e.y)}onDragEnd(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(a.fixed=0)}}};let il=(()=>{class n{getLayout(e){if(nl[e])return new nl[e];throw new Error(`Unknown layout type '${e}'`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Mp=(()=>{class n{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),o=e.wheelDelta?i<0:i>0;(e.wheelDelta?i>0:i<0)?this.mouseWheelUp.emit(e):o&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","mouseWheel",""]],hostBindings:function(e,i){1&e&&t.NdJ("mousewheel",function(o){return i.onMouseWheelChrome(o)})("DOMMouseScroll",function(o){return i.onMouseWheelFirefox(o)})("wheel",function(o){return i.onWheel(o)})("onmousewheel",function(o){return i.onMouseWheelIE(o)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),n})(),Np=(()=>{class n{constructor(e,i,a,o){this.el=e,this.zone=i,this.cd=a,this.layoutService=o,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Zr.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=Vr.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new Fo.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=v=>v.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${hr()}`}ngOnChanges(e){this.basicUpdate();const{layoutSettings:a}=e;this.setLayout(this.layout),a&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Sp(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=Cu.beta(1)),this.zone.run(()=>{this.dims=function Ap({width:n,height:r}){let e=n,i=r;return e=Math.max(0,e),i=Math.max(0,i),{width:Math.floor(e),height:Math.floor(i)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Fo.w0;const e=i=>(i.meta||(i.meta={}),i.id||(i.id=hr()),i.dimension?i.meta.forceDimensions=void 0===i.meta.forceDimensions||i.meta.forceDimensions:(i.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},i.meta.forceDimensions=!1),i.position={x:0,y:0},i.data=i.data?i.data:{},i);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(i=>(i.id||(i.id=hr()),i)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),i=e instanceof ut.y?e:(0,yt.of)(e);this.graphSubscription.add(i.subscribe(a=>{this.graph=a,this.tick()})),0!==this.graph.nodes.length&&i.pipe((0,rd.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),e.add(o.id)});const i=new Set;(this.graph.clusters||[]).map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),i.add(o.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=i},500);const a=[];for(const o in this.graph.edgeLabels){const v=this.graph.edgeLabels[o],T=o.replace(/[^\w-]*/g,""),N=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let U=this._oldLinks.find(N?Ft=>`${Ft.source}${Ft.target}${Ft.id}`===T:Ft=>`${Ft.source}${Ft.target}`===T);const J=this.graph.edges.find(N?Ft=>`${Ft.source}${Ft.target}${Ft.id}`===T:Ft=>`${Ft.source}${Ft.target}`===T);U?U.data&&J&&J.data&&JSON.stringify(U.data)!==JSON.stringify(J.data)&&(U.data=J.data):U=J||v,U.oldLine=U.line;const ct=v.points,ot=this.generateLine(ct),Ct=Object.assign({},U);Ct.line=ot,Ct.points=ct,this.updateMidpointOnEdge(Ct,ct);const It=ct[Math.floor(ct.length/2)];It&&(Ct.textTransform=`translate(${It.x||0},${It.y||0})`),Ct.textAngle=0,Ct.oldLine||(Ct.oldLine=Ct.line),this.calcDominantBaseline(Ct),a.push(Ct)}this.graph.edges=a,this.graph.edges&&(this._oldLinks=this.graph.edges.map(o=>{const v=Object.assign({},o);return v.oldLine=o.line,v})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case Vr.UpperLeft:return"";case Vr.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,i=-1/0,a=1/0,o=-1/0;for(let v=0;v<this.graph.nodes.length;v++){const T=this.graph.nodes[v];e=T.position.x<e?T.position.x:e,a=T.position.y<a?T.position.y:a,i=T.position.x+T.dimension.width>i?T.position.x+T.dimension.width:i,o=T.position.y+T.dimension.height>o?T.position.y+T.dimension.height:o}e-=100,a-=100,i+=100,o+=100,this.graphDims.width=i-e,this.graphDims.height=o-a,this.minimapOffsetX=e,this.minimapOffsetY=a}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const i=e.nativeElement,a=this.graph.nodes.find(v=>v.id===i.id);if(!a)return;let o;try{if(o=i.getBBox(),!o.width||!o.height)return}catch{return}if(a.dimension.height=this.nodeHeight?a.dimension.height&&a.meta.forceDimensions?a.dimension.height:this.nodeHeight:a.dimension.height&&a.meta.forceDimensions?a.dimension.height:o.height,this.nodeMaxHeight&&(a.dimension.height=Math.max(a.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(a.dimension.height=Math.min(a.dimension.height,this.nodeMinHeight)),this.nodeWidth)a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:this.nodeWidth;else if(i.getElementsByTagName("text").length){let v;try{for(const T of i.getElementsByTagName("text")){const N=T.getBBox();v?(N.width>v.width&&(v.width=N.width),N.height>v.height&&(v.height=N.height)):v=N}}catch{return}a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:v.width+20}else a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:o.width;this.nodeMaxWidth&&(a.dimension.width=Math.max(a.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(a.dimension.width=Math.min(a.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(i=>{const a=this.graph.edges.find(o=>o.id===i.nativeElement.id);a&&(no(i.nativeElement).select(".line").attr("d",a.oldLine).transition().ease(co).duration(e?500:0).attr("d",a.line),no(this.el.nativeElement).select(`#${a.id}`).attr("d",a.oldTextPath).transition().ease(co).duration(e?500:0).attr("d",a.textPath),this.updateMidpointOnEdge(a,a.points))})}calcDominantBaseline(e){const i=e.points[0],a=e.points[e.points.length-1];e.oldTextPath=e.textPath,a.x<i.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return function Lu(){var n=Eu,r=Du,e=Ta(!0),i=null,a=Su,o=null;function v(T){var N,J,ot,U=T.length,ct=!1;for(null==i&&(o=a(ot=Au())),N=0;N<=U;++N)!(N<U&&e(J=T[N],N,T))===ct&&((ct=!ct)?o.lineStart():o.lineEnd()),ct&&o.point(+n(J,N,T),+r(J,N,T));if(ot)return o=null,ot+""||null}return v.x=function(T){return arguments.length?(n="function"==typeof T?T:Ta(+T),v):n},v.y=function(T){return arguments.length?(r="function"==typeof T?T:Ta(+T),v):r},v.defined=function(T){return arguments.length?(e="function"==typeof T?T:Ta(!!T),v):e},v.curve=function(T){return arguments.length?(a=T,null!=i&&(o=a(i)),v):a},v.context=function(T){return arguments.length?(null==T?i=o=null:o=a(i=T),v):i},v}().x(a=>a.x).y(a=>a.y).curve(this.curve)(e)}onZoom(e,i){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const a=1+("in"===i?this.zoomSpeed:-this.zoomSpeed),o=this.zoomLevel*a;if(!(o<=this.minZoomLevel||o>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const v=e.clientX,T=e.clientY,N=this.el.nativeElement.querySelector("svg"),U=N.querySelector("g.chart"),J=N.createSVGPoint();J.x=v,J.y=T;const ct=J.matrixTransform(U.getScreenCTM().inverse());this.pan(ct.x,ct.y,!0),this.zoom(a),this.pan(-ct.x,-ct.y,!0)}else this.zoom(a)}pan(e,i,a=!1){const o=a?1:this.zoomLevel;this.transformationMatrix=la(this.transformationMatrix,Vo(e/o,i/o)),this.updateTransform()}panTo(e,i){null==e||isNaN(e)||null==i||isNaN(i)||(this.transformationMatrix=la(this.transformationMatrix,Vo((-this.panOffsetX-e*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-i*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(e){this.transformationMatrix=la(this.transformationMatrix,function pd(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return dd(r)&&(r=n),{a:n,c:0,e:0,b:0,d:r,f:0}}(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const i=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(i,e),i.position.x+=e.movementX/this.zoomLevel,i.position.y+=e.movementY/this.zoomLevel,i.transform=`translate(${i.position.x-i.dimension.width/2}, ${i.position.y-i.dimension.height/2})`;for(const v of this.graph.edges)if((v.target===i.id||v.source===i.id||v.target.id===i.id||v.source.id===i.id)&&this.layout&&"string"!=typeof this.layout){const T=this.layout.updateEdge(this.graph,v),N=T instanceof ut.y?T:(0,yt.of)(T);this.graphSubscription.add(N.subscribe(U=>{this.graph=U,this.redrawEdge(v)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const i=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=i}updateTransform(){this.transform=function md(n){return function Zo(n){return"matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")"}(n)}(function vd(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(n.a*r)/r,b:Math.round(n.b*r)/r,c:Math.round(n.c*r)/r,d:Math.round(n.d*r)/r,e:Math.round(n.e*r)/r,f:Math.round(n.f*r)/r}}(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const i=this.activeEntries.indexOf(e);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,i)=>-1!==e.indexOf(i)?e:e.concat([i]),[]).sort()}trackLinkBy(e,i){return i.id}trackNodeBy(e,i){return i.id}setColors(){this.colors=new wp(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const i=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,o=i-this._touchLastX,v=a-this._touchLastY;this._touchLastX=i,this._touchLastY=a,this.pan(o,v)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,i){!this.draggingEnabled||(this.isDragging=!0,this.draggingNode=i,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(i,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){this.panTo((e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let a=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);a<this.minZoomLevel&&(a=this.minZoomLevel),a>this.maxZoomLevel&&(a=this.maxZoomLevel),a!==this.zoomLevel&&(this.zoomLevel=a,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const i=this.graph.nodes.find(a=>a.id===e);!i||this.panTo(i.position.x,i.position.y)}panWithConstraints(e,i){let a=i.movementX,o=i.movementY;switch(this.isMinimapPanning&&(a=-this.minimapScaleCoefficient*a*this.zoomLevel,o=-this.minimapScaleCoefficient*o*this.zoomLevel),e){case Zr.Horizontal:this.pan(a,0);break;case Zr.Vertical:this.pan(0,o);break;default:this.pan(a,o)}}updateMidpointOnEdge(e,i){if(e&&i)if(i.length%2==1)e.midPoint=i[Math.floor(i.length/2)];else{const a=i[i.length/2],o=i[i.length/2-1];e.midPoint={x:(a.x+o.x)/2,y:(a.y+o.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,i;const a=this.el.nativeElement;if(null!==a.parentNode){const o=a.parentNode.getBoundingClientRect();e=o.width,i=o.height}return e&&i?{width:e,height:i}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const i=(0,Ro.R)(window,"resize").pipe((0,q.b)(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(il))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-graph"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,Jd,5),t.Suo(a,Kd,5),t.Suo(a,qd,5),t.Suo(a,tp,5),t.Suo(a,ep,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.linkTemplate=o.first),t.iGM(o=t.CRH())&&(i.nodeTemplate=o.first),t.iGM(o=t.CRH())&&(i.clusterTemplate=o.first),t.iGM(o=t.CRH())&&(i.defsTemplate=o.first),t.iGM(o=t.CRH())&&(i.miniMapNodeTemplate=o.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(np,5),t.Gf(ip,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.nodeElements=a),t.iGM(a=t.CRH())&&(i.linkElements=a)}},hostBindings:function(e,i){1&e&&t.NdJ("mousemove",function(o){return i.onMouseMove(o)},!1,t.evT)("mousedown",function(o){return i.onMouseDown(o)},!1,t.evT)("click",function(o){return i.graphClick(o)},!1,t.evT)("touchmove",function(o){return i.onTouchMove(o)},!1,t.evT)("mouseup",function(o){return i.onMouseUp(o)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:bp,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(o){return i.onZoom(o,"in")})("mouseWheelDown",function(o){return i.onZoom(o,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,mp,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,yp,6,15,"g",3),t.qZA()()),2&e&&(t.Udp("width",i.width,"px"),t.Q6J("@animationState","active")("@.disabled",!i.animations),t.xp6(1),t.uIk("width",i.width)("height",i.height),t.xp6(1),t.Q6J("ngIf",i.initialized&&i.graph),t.xp6(1),t.uIk("id",i.minimapClipPathId),t.xp6(1),t.uIk("width",i.graphDims.width/i.minimapScaleCoefficient)("height",i.graphDims.height/i.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",i.showMiniMap))},dependencies:[Mp,m.O5,m.tP,m.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,Un.X$)("animationState",[(0,Un.eR)(":enter",[(0,Un.oB)({opacity:0}),(0,Un.jt)("500ms 100ms",(0,Un.oB)({opacity:1}))])])]},changeDetection:0}),(0,xa.gn)([Cp(500)],n.prototype,"updateMinimap",null),n})(),Pp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[il],imports:[[m.ez]]}),n})(),Fp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez],Pp]}),n})();var rl=s(84080);s(52016),s(56758),s(37656),s(29132),s(18429);Math;function ua(n){return{type:n}}function fl(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function ys(n){let r=n,e=n;function i(v,T,N,U){for(null==N&&(N=0),null==U&&(U=v.length);N<U;){const J=N+U>>>1;e(v[J],T)<0?N=J+1:U=J}return N}return 1===n.length&&(r=(v,T)=>n(v)-T,e=function Xp(n){return(r,e)=>fl(n(r),e)}(n)),{left:i,center:function o(v,T,N,U){null==N&&(N=0),null==U&&(U=v.length);const J=i(v,T,N,U-1);return J>N&&r(v[J-1],T)>-r(v[J],T)?J-1:J},right:function a(v,T,N,U){for(null==N&&(N=0),null==U&&(U=v.length);N<U;){const J=N+U>>>1;e(v[J],T)>0?U=J:N=J+1}return N}}}["w","e"].map(ua),["n","s"].map(ua),["n","w","e","s","nw","ne","sw","se"].map(ua);var bs=Math.sqrt(50),Ts=Math.sqrt(10),Cs=Math.sqrt(2);function ws(n,r,e){var i=Math.abs(r-n)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/a;return o>=bs?a*=10:o>=Ts?a*=5:o>=Cs&&(a*=2),r<n?-a:a}const fr=1e3,Xi=6e4,mr=60*Xi,Lr=24*mr,As=7*Lr,gl=30*Lr,Ss=365*Lr;var Es=new Date,Ds=new Date;function pi(n,r,e,i){function a(o){return n(o=0===arguments.length?new Date:new Date(+o)),o}return a.floor=function(o){return n(o=new Date(+o)),o},a.ceil=function(o){return n(o=new Date(o-1)),r(o,1),n(o),o},a.round=function(o){var v=a(o),T=a.ceil(o);return o-v<T-o?v:T},a.offset=function(o,v){return r(o=new Date(+o),null==v?1:Math.floor(v)),o},a.range=function(o,v,T){var U,N=[];if(o=a.ceil(o),T=null==T?1:Math.floor(T),!(o<v&&T>0))return N;do{N.push(U=new Date(+o)),r(o,T),n(o)}while(U<o&&o<v);return N},a.filter=function(o){return pi(function(v){if(v>=v)for(;n(v),!o(v);)v.setTime(v-1)},function(v,T){if(v>=v)if(T<0)for(;++T<=0;)for(;r(v,-1),!o(v););else for(;--T>=0;)for(;r(v,1),!o(v););})},e&&(a.count=function(o,v){return Es.setTime(+o),Ds.setTime(+v),n(Es),n(Ds),Math.floor(e(Es,Ds))},a.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?a.filter(i?function(v){return i(v)%o==0}:function(v){return a.count(0,v)%o==0}):a:null}),a}var Fa=pi(function(){},function(n,r){n.setTime(+n+r)},function(n,r){return r-n});Fa.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?pi(function(r){r.setTime(Math.floor(r/n)*n)},function(r,e){r.setTime(+r+e*n)},function(r,e){return(e-r)/n}):Fa:null};const Qp=Fa;const ha=pi(function(n){n.setTime(n-n.getMilliseconds())},function(n,r){n.setTime(+n+r*fr)},function(n,r){return(r-n)/fr},function(n){return n.getUTCSeconds()});const xl=pi(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*fr)},function(n,r){n.setTime(+n+r*Xi)},function(n,r){return(r-n)/Xi},function(n){return n.getMinutes()});const bl=pi(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*fr-n.getMinutes()*Xi)},function(n,r){n.setTime(+n+r*mr)},function(n,r){return(r-n)/mr},function(n){return n.getHours()});const Ra=pi(n=>n.setHours(0,0,0,0),(n,r)=>n.setDate(n.getDate()+r),(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Xi)/Lr,n=>n.getDate()-1);function kr(n){return pi(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Xi)/As})}var Ba=kr(0),Za=kr(1),Yr=(kr(2),kr(3),kr(4));const wl=(kr(5),kr(6),pi(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,r){n.setMonth(n.getMonth()+r)},function(n,r){return r.getMonth()-n.getMonth()+12*(r.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}));var Ls=pi(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,r){n.setFullYear(n.getFullYear()+r)},function(n,r){return r.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});Ls.every=function(n){return isFinite(n=Math.floor(n))&&n>0?pi(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*n)}):null};const Ir=Ls;const tf=pi(function(n){n.setUTCSeconds(0,0)},function(n,r){n.setTime(+n+r*Xi)},function(n,r){return(r-n)/Xi},function(n){return n.getUTCMinutes()});const ef=pi(function(n){n.setUTCMinutes(0,0,0)},function(n,r){n.setTime(+n+r*mr)},function(n,r){return(r-n)/mr},function(n){return n.getUTCHours()});const ks=pi(function(n){n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCDate(n.getUTCDate()+r)},function(n,r){return(r-n)/Lr},function(n){return n.getUTCDate()-1});function Or(n){return pi(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-n)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/As})}var Is=Or(0),Va=Or(1),Wr=(Or(2),Or(3),Or(4));const of=(Or(5),Or(6),pi(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCMonth(n.getUTCMonth()+r)},function(n,r){return r.getUTCMonth()-n.getUTCMonth()+12*(r.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}));var Os=pi(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r)},function(n,r){return r.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Os.every=function(n){return isFinite(n=Math.floor(n))&&n>0?pi(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/n)*n),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*n)}):null};const Xr=Os;function Ll(n,r,e,i,a,o){const v=[[ha,1,fr],[ha,5,5e3],[ha,15,15e3],[ha,30,3e4],[o,1,Xi],[o,5,5*Xi],[o,15,15*Xi],[o,30,30*Xi],[a,1,mr],[a,3,3*mr],[a,6,6*mr],[a,12,12*mr],[i,1,Lr],[i,2,2*Lr],[e,1,As],[r,1,gl],[r,3,3*gl],[n,1,Ss]];function N(U,J,ct){const ot=Math.abs(J-U)/ct,Ct=ys(([,,_t])=>_t).right(v,ot);if(Ct===v.length)return n.every(ws(U/Ss,J/Ss,ct));if(0===Ct)return Qp.every(Math.max(ws(U,J,ct),1));const[It,Ft]=v[ot/v[Ct-1][2]<v[Ct][2]/ot?Ct-1:Ct];return It.every(Ft)}return[function T(U,J,ct){const ot=J<U;ot&&([U,J]=[J,U]);const Ct=ct&&"function"==typeof ct.range?ct:N(U,J,ct),It=Ct?Ct.range(U,+J+1):[];return ot?It.reverse():It},N]}const[N1,P1]=Ll(Xr,of,Is,ks,ef,tf),[lf,cf]=Ll(Ir,wl,Ba,Ra,bl,xl);function Ms(n){if(0<=n.y&&n.y<100){var r=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return r.setFullYear(n.y),r}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Ns(n){if(0<=n.y&&n.y<100){var r=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return r.setUTCFullYear(n.y),r}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function da(n,r,e){return{y:n,m:r,d:e,H:0,M:0,S:0,L:0}}var kl={"-":"",_:" ",0:"0"},fi=/^\s*\d+/,hf=/^%/,df=/[\\^$*+?|[\]().{}]/g;function xn(n,r,e){var i=n<0?"-":"",a=(i?-n:n)+"",o=a.length;return i+(o<e?new Array(e-o+1).join(r)+a:a)}function pf(n){return n.replace(df,"\\$&")}function pa(n){return new RegExp("^(?:"+n.map(pf).join("|")+")","i")}function fa(n){return new Map(n.map((r,e)=>[r.toLowerCase(),e]))}function ff(n,r,e){var i=fi.exec(r.slice(e,e+1));return i?(n.w=+i[0],e+i[0].length):-1}function mf(n,r,e){var i=fi.exec(r.slice(e,e+1));return i?(n.u=+i[0],e+i[0].length):-1}function gf(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.U=+i[0],e+i[0].length):-1}function _f(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.V=+i[0],e+i[0].length):-1}function vf(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.W=+i[0],e+i[0].length):-1}function Il(n,r,e){var i=fi.exec(r.slice(e,e+4));return i?(n.y=+i[0],e+i[0].length):-1}function Ol(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function xf(n,r,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function yf(n,r,e){var i=fi.exec(r.slice(e,e+1));return i?(n.q=3*i[0]-3,e+i[0].length):-1}function bf(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.m=i[0]-1,e+i[0].length):-1}function Ml(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.d=+i[0],e+i[0].length):-1}function Tf(n,r,e){var i=fi.exec(r.slice(e,e+3));return i?(n.m=0,n.d=+i[0],e+i[0].length):-1}function Nl(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.H=+i[0],e+i[0].length):-1}function Cf(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.M=+i[0],e+i[0].length):-1}function wf(n,r,e){var i=fi.exec(r.slice(e,e+2));return i?(n.S=+i[0],e+i[0].length):-1}function Af(n,r,e){var i=fi.exec(r.slice(e,e+3));return i?(n.L=+i[0],e+i[0].length):-1}function Sf(n,r,e){var i=fi.exec(r.slice(e,e+6));return i?(n.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function Ef(n,r,e){var i=hf.exec(r.slice(e,e+1));return i?e+i[0].length:-1}function Df(n,r,e){var i=fi.exec(r.slice(e));return i?(n.Q=+i[0],e+i[0].length):-1}function Lf(n,r,e){var i=fi.exec(r.slice(e));return i?(n.s=+i[0],e+i[0].length):-1}function Pl(n,r){return xn(n.getDate(),r,2)}function kf(n,r){return xn(n.getHours(),r,2)}function If(n,r){return xn(n.getHours()%12||12,r,2)}function Of(n,r){return xn(1+Ra.count(Ir(n),n),r,3)}function Fl(n,r){return xn(n.getMilliseconds(),r,3)}function Mf(n,r){return Fl(n,r)+"000"}function Nf(n,r){return xn(n.getMonth()+1,r,2)}function Pf(n,r){return xn(n.getMinutes(),r,2)}function Ff(n,r){return xn(n.getSeconds(),r,2)}function Rf(n){var r=n.getDay();return 0===r?7:r}function Bf(n,r){return xn(Ba.count(Ir(n)-1,n),r,2)}function Rl(n){var r=n.getDay();return r>=4||0===r?Yr(n):Yr.ceil(n)}function Zf(n,r){return n=Rl(n),xn(Yr.count(Ir(n),n)+(4===Ir(n).getDay()),r,2)}function Vf(n){return n.getDay()}function Gf(n,r){return xn(Za.count(Ir(n)-1,n),r,2)}function Uf(n,r){return xn(n.getFullYear()%100,r,2)}function zf(n,r){return xn((n=Rl(n)).getFullYear()%100,r,2)}function Hf(n,r){return xn(n.getFullYear()%1e4,r,4)}function Yf(n,r){var e=n.getDay();return xn((n=e>=4||0===e?Yr(n):Yr.ceil(n)).getFullYear()%1e4,r,4)}function Wf(n){var r=n.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+xn(r/60|0,"0",2)+xn(r%60,"0",2)}function Bl(n,r){return xn(n.getUTCDate(),r,2)}function Xf(n,r){return xn(n.getUTCHours(),r,2)}function $f(n,r){return xn(n.getUTCHours()%12||12,r,2)}function Qf(n,r){return xn(1+ks.count(Xr(n),n),r,3)}function Zl(n,r){return xn(n.getUTCMilliseconds(),r,3)}function jf(n,r){return Zl(n,r)+"000"}function Jf(n,r){return xn(n.getUTCMonth()+1,r,2)}function Kf(n,r){return xn(n.getUTCMinutes(),r,2)}function qf(n,r){return xn(n.getUTCSeconds(),r,2)}function tm(n){var r=n.getUTCDay();return 0===r?7:r}function em(n,r){return xn(Is.count(Xr(n)-1,n),r,2)}function Vl(n){var r=n.getUTCDay();return r>=4||0===r?Wr(n):Wr.ceil(n)}function nm(n,r){return n=Vl(n),xn(Wr.count(Xr(n),n)+(4===Xr(n).getUTCDay()),r,2)}function im(n){return n.getUTCDay()}function rm(n,r){return xn(Va.count(Xr(n)-1,n),r,2)}function am(n,r){return xn(n.getUTCFullYear()%100,r,2)}function sm(n,r){return xn((n=Vl(n)).getUTCFullYear()%100,r,2)}function om(n,r){return xn(n.getUTCFullYear()%1e4,r,4)}function lm(n,r){var e=n.getUTCDay();return xn((n=e>=4||0===e?Wr(n):Wr.ceil(n)).getUTCFullYear()%1e4,r,4)}function cm(){return"+0000"}function Gl(){return"%"}function Ul(n){return+n}function zl(n){return Math.floor(+n/1e3)}!function pm(n){(function uf(n){var r=n.dateTime,e=n.date,i=n.time,a=n.periods,o=n.days,v=n.shortDays,T=n.months,N=n.shortMonths,U=pa(a),J=fa(a),ct=pa(o),ot=fa(o),Ct=pa(v),It=fa(v),Ft=pa(T),_t=fa(T),Vt=pa(N),qt=fa(N),$t={a:function ri(ve){return v[ve.getDay()]},A:function or(ve){return o[ve.getDay()]},b:function ai(ve){return N[ve.getMonth()]},B:function si(ve){return T[ve.getMonth()]},c:null,d:Pl,e:Pl,f:Mf,g:zf,G:Yf,H:kf,I:If,j:Of,L:Fl,m:Nf,M:Pf,p:function Hn(ve){return a[+(ve.getHours()>=12)]},q:function Yn(ve){return 1+~~(ve.getMonth()/3)},Q:Ul,s:zl,S:Ff,u:Rf,U:Bf,V:Zf,w:Vf,W:Gf,x:null,X:null,y:Uf,Y:Hf,Z:Wf,"%":Gl},ye={a:function _a(ve){return v[ve.getUTCDay()]},A:function qr(ve){return o[ve.getUTCDay()]},b:function ta(ve){return N[ve.getUTCMonth()]},B:function ea(ve){return T[ve.getUTCMonth()]},c:null,d:Bl,e:Bl,f:jf,g:sm,G:lm,H:Xf,I:$f,j:Qf,L:Zl,m:Jf,M:Kf,p:function Ai(ve){return a[+(ve.getUTCHours()>=12)]},q:function Ha(ve){return 1+~~(ve.getUTCMonth()/3)},Q:Ul,s:zl,S:qf,u:tm,U:em,V:nm,w:im,W:rm,x:null,X:null,y:am,Y:om,Z:cm,"%":Gl},De={a:function Dn(ve,Qe,hn){var re=Ct.exec(Qe.slice(hn));return re?(ve.w=It.get(re[0].toLowerCase()),hn+re[0].length):-1},A:function Ln(ve,Qe,hn){var re=ct.exec(Qe.slice(hn));return re?(ve.w=ot.get(re[0].toLowerCase()),hn+re[0].length):-1},b:function $n(ve,Qe,hn){var re=Vt.exec(Qe.slice(hn));return re?(ve.m=qt.get(re[0].toLowerCase()),hn+re[0].length):-1},B:function ei(ve,Qe,hn){var re=Ft.exec(Qe.slice(hn));return re?(ve.m=_t.get(re[0].toLowerCase()),hn+re[0].length):-1},c:function ni(ve,Qe,hn){return an(ve,r,Qe,hn)},d:Ml,e:Ml,f:Sf,g:Ol,G:Il,H:Nl,I:Nl,j:Tf,L:Af,m:bf,M:Cf,p:function yn(ve,Qe,hn){var re=U.exec(Qe.slice(hn));return re?(ve.p=J.get(re[0].toLowerCase()),hn+re[0].length):-1},q:yf,Q:Df,s:Lf,S:wf,u:mf,U:gf,V:_f,w:ff,W:vf,x:function sr(ve,Qe,hn){return an(ve,e,Qe,hn)},X:function ii(ve,Qe,hn){return an(ve,i,Qe,hn)},y:Ol,Y:Il,Z:xf,"%":Ef};function ge(ve,Qe){return function(hn){var Oi,He,Bn,re=[],Rn=-1,Sn=0,Ii=ve.length;for(hn instanceof Date||(hn=new Date(+hn));++Rn<Ii;)37===ve.charCodeAt(Rn)&&(re.push(ve.slice(Sn,Rn)),null!=(He=kl[Oi=ve.charAt(++Rn)])?Oi=ve.charAt(++Rn):He="e"===Oi?" ":"0",(Bn=Qe[Oi])&&(Oi=Bn(hn,He)),re.push(Oi),Sn=Rn+1);return re.push(ve.slice(Sn,Rn)),re.join("")}}function Ke(ve,Qe){return function(hn){var Sn,Ii,re=da(1900,void 0,1);if(an(re,ve,hn+="",0)!=hn.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(1e3*re.s+("L"in re?re.L:0));if(Qe&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+12*re.p),void 0===re.m&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Ii=(Sn=Ns(da(re.y,0,1))).getUTCDay(),Sn=Ii>4||0===Ii?Va.ceil(Sn):Va(Sn),Sn=ks.offset(Sn,7*(re.V-1)),re.y=Sn.getUTCFullYear(),re.m=Sn.getUTCMonth(),re.d=Sn.getUTCDate()+(re.w+6)%7):(Ii=(Sn=Ms(da(re.y,0,1))).getDay(),Sn=Ii>4||0===Ii?Za.ceil(Sn):Za(Sn),Sn=Ra.offset(Sn,7*(re.V-1)),re.y=Sn.getFullYear(),re.m=Sn.getMonth(),re.d=Sn.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ii="Z"in re?Ns(da(re.y,0,1)).getUTCDay():Ms(da(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+7*re.W-(Ii+5)%7:re.w+7*re.U-(Ii+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,Ns(re)):Ms(re)}}function an(ve,Qe,hn,re){for(var Oi,He,Rn=0,Sn=Qe.length,Ii=hn.length;Rn<Sn;){if(re>=Ii)return-1;if(37===(Oi=Qe.charCodeAt(Rn++))){if(Oi=Qe.charAt(Rn++),!(He=De[Oi in kl?Qe.charAt(Rn++):Oi])||(re=He(ve,hn,re))<0)return-1}else if(Oi!=hn.charCodeAt(re++))return-1}return re}return $t.x=ge(e,$t),$t.X=ge(i,$t),$t.c=ge(r,$t),ye.x=ge(e,ye),ye.X=ge(i,ye),ye.c=ge(r,ye),{format:function(ve){var Qe=ge(ve+="",$t);return Qe.toString=function(){return ve},Qe},parse:function(ve){var Qe=Ke(ve+="",!1);return Qe.toString=function(){return ve},Qe},utcFormat:function(ve){var Qe=ge(ve+="",ye);return Qe.toString=function(){return ve},Qe},utcParse:function(ve){var Qe=Ke(ve+="",!0);return Qe.toString=function(){return ve},Qe}}})(n)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ys(fl),ys(function fm(n){return null===n?NaN:+n}),s(6738),s(84067),s(32517),s(38914),s(22910),s(65142),s(78986),s(16087);const Rm=["caretElm"];function Bm(n,r){}const Zm=function(n){return{model:n}};function Vm(n,r){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Bm,0,0,"ng-template",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(2,Zm,e.context))}}function Gm(n,r){if(1&n&&t._UZ(0,"span",6),2&n){const e=t.oxw();t.Q6J("innerHTML",e.title,t.oJD)}}function m_(n,r,e){e=e||{};let i,a,o,v=null,T=0;function N(){T=!1===e.leading?0:+new Date,v=null,o=n.apply(i,a)}return function(){const U=+new Date;!T&&!1===e.leading&&(T=U);const J=r-(U-T);return i=this,a=arguments,J<=0?(clearTimeout(v),v=null,T=U,o=n.apply(i,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,J)),o}}function g_(n,r){return function(i,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:m_(o.value,n,r)}),this[a]}}}}var tn=(()=>{return(n=tn||(tn={})).Top="top",n.Bottom="bottom",n.Left="left",n.Right="right",n.Center="center",tn;var n})();function ec(n,r,e){return e===tn.Top?n.top-7:e===tn.Bottom?n.top+n.height-r.height+7:e===tn.Center?n.top+n.height/2-r.height/2:void 0}function nc(n,r,e){return e===tn.Left?n.left-7:e===tn.Right?n.left+n.width-r.width+7:e===tn.Center?n.left+n.width/2-r.width/2:void 0}class zi{static calculateVerticalAlignment(r,e,i){let a=ec(r,e,i);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(r,e,i,a){let o;a===tn.Top&&(o=r.height/2-i.height/2+7),a===tn.Bottom&&(o=e.height-r.height/2-i.height/2-7),a===tn.Center&&(o=e.height/2-i.height/2);const v=ec(r,e,a);return v+e.height>window.innerHeight&&(o+=v+e.height-window.innerHeight),o}static calculateHorizontalAlignment(r,e,i){let a=nc(r,e,i);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(r,e,i,a){let o;a===tn.Left&&(o=r.width/2-i.width/2+7),a===tn.Right&&(o=e.width-r.width/2-i.width/2-7),a===tn.Center&&(o=e.width/2-i.width/2);const v=nc(r,e,a);return v+e.width>window.innerWidth&&(o+=v+e.width-window.innerWidth),o}static shouldFlip(r,e,i,a){let o=!1;return i===tn.Right&&r.left+r.width+e.width+a>window.innerWidth&&(o=!0),i===tn.Left&&r.left-e.width-a<0&&(o=!0),i===tn.Top&&r.top-e.height-a<0&&(o=!0),i===tn.Bottom&&r.top+r.height+e.height+a>window.innerHeight&&(o=!0),o}static positionCaret(r,e,i,a,o){let v=0,T=0;return r===tn.Right?(T=-7,v=zi.calculateVerticalCaret(i,e,a,o)):r===tn.Left?(T=e.width,v=zi.calculateVerticalCaret(i,e,a,o)):r===tn.Top?(v=e.height,T=zi.calculateHorizontalCaret(i,e,a,o)):r===tn.Bottom&&(v=-7,T=zi.calculateHorizontalCaret(i,e,a,o)),{top:v,left:T}}static positionContent(r,e,i,a,o){let v=0,T=0;return r===tn.Right?(T=i.left+i.width+a,v=zi.calculateVerticalAlignment(i,e,o)):r===tn.Left?(T=i.left-e.width-a,v=zi.calculateVerticalAlignment(i,e,o)):r===tn.Top?(v=i.top-e.height-a,T=zi.calculateHorizontalAlignment(i,e,o)):r===tn.Bottom&&(v=i.top+i.height+a,T=zi.calculateHorizontalAlignment(i,e,o)),{top:v,left:T}}static determinePlacement(r,e,i,a){if(zi.shouldFlip(i,e,r,a)){if(r===tn.Right)return tn.Left;if(r===tn.Left)return tn.Right;if(r===tn.Top)return tn.Bottom;if(r===tn.Bottom)return tn.Top}return r}}let __=(()=>{class n{constructor(e,i,a){this.element=e,this.renderer=i,this.platformId=a}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,m.NF)(this.platformId))return;const e=this.element.nativeElement,i=this.host.nativeElement.getBoundingClientRect();if(!i.height&&!i.width)return;const a=e.getBoundingClientRect();this.checkFlip(i,a),this.positionContent(e,i,a),this.showCaret&&this.positionCaret(i,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,i,a){const{top:o,left:v}=zi.positionContent(this.placement,a,i,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${o}px`),this.renderer.setStyle(e,"left",`${v}px`)}positionCaret(e,i){const a=this.caretElm.nativeElement,o=a.getBoundingClientRect(),{top:v,left:T}=zi.positionCaret(this.placement,i,e,o,this.alignment);this.renderer.setStyle(a,"top",`${v}px`),this.renderer.setStyle(a,"left",`${T}px`)}checkFlip(e,i){this.placement=zi.determinePlacement(this.placement,i,e,this.spacing)}onWindowResize(){this.position()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.Lbi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,i){if(1&e&&t.Gf(Rm,5),2&e){let a;t.iGM(a=t.CRH())&&(i.caretElm=a.first)}},hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onWindowResize()},!1,t.Jf7),2&e&&t.Tol(i.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",0,1),t.TgZ(3,"div",2),t.YNc(4,Vm,2,4,"span",3),t.YNc(5,Gm,1,1,"span",4),t.qZA()()),2&e&&(t.xp6(1),t.Gre("tooltip-caret position-",i.placement,""),t.Q6J("hidden",!i.showCaret),t.xp6(3),t.Q6J("ngIf",!i.title),t.xp6(1),t.Q6J("ngIf",i.title))},dependencies:[m.O5,m.tP],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,xa.gn)([g_(100)],n.prototype,"onWindowResize",null),n})(),ic=(()=>{class n{constructor(e,i,a){this.applicationRef=e,this.componentFactoryResolver=i,this.injector=a}static setGlobalRootViewContainer(e){n.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(n.globalRootViewContainer)return n.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function x_(n){return n.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,i){if(i){if(void 0!==i.inputs){const a=Object.getOwnPropertyNames(i.inputs);for(const o of a)e.instance[o]=i.inputs[o]}if(void 0!==i.outputs){const a=Object.getOwnPropertyNames(i.outputs);for(const o of a)e.instance[o]=i.outputs[o]}}return e}appendComponent(e,i={},a){a||(a=this.getRootViewContainer());const o=this.getComponentRootNode(a),v=new rl.u0(o,this.componentFactoryResolver,this.applicationRef,this.injector),T=new rl.C5(e),N=v.attach(T);return this.projectComponentBindings(N,i),N}}return n.globalRootViewContainer=null,n.\u0275fac=function(e){return new(e||n)(t.LFG(t.z2F),t.LFG(t._Vd),t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Fs=(()=>{class n extends class v_{constructor(r){this.injectionService=r,this.defaults={},this.components=new Map}getByType(r=this.type){return this.components.get(r)}create(r){return this.createByType(this.type,r)}createByType(r,e){e=this.assignDefaults(e);const i=this.injectComponent(r,e);return this.register(r,i),i}destroy(r){const e=this.components.get(r.componentType);if(e&&e.length){const i=e.indexOf(r);i>-1&&(e[i].destroy(),e.splice(i,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(r){const e=this.components.get(r);if(e&&e.length){let i=e.length-1;for(;i>=0;)this.destroy(e[i--])}}injectComponent(r,e){return this.injectionService.appendComponent(r,e)}assignDefaults(r){const e={...this.defaults.inputs},i={...this.defaults.outputs};return!r.inputs&&!r.outputs&&(r={inputs:r}),e&&(r.inputs={...e,...r.inputs}),i&&(r.outputs={...i,...r.outputs}),r}register(r,e){this.components.has(r)||this.components.set(r,[]),this.components.get(r).push(e)}}{constructor(e){super(e),this.type=__}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ic))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),cc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez]]}),n})();var jr=(()=>{return(n=jr||(jr={})).popover="popover",n.tooltip="tooltip",jr;var n})(),Tr=(()=>{return(n=Tr||(Tr={}))[n.all="all"]="all",n[n.focus="focus"]="focus",n[n.mouseover="mouseover"]="mouseover",Tr;var n})();let Vs,Bs=(()=>{class n{constructor(e,i,a){this.tooltipService=e,this.viewContainerRef=i,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=tn.Top,this.tooltipAlignment=tn.Center,this.tooltipType=jr.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Tr.all,this.tooltipImmediateExit=!1,this.show=new t.vpe,this.hide=new t.vpe}get listensForFocus(){return this.tooltipShowEvent===Tr.all||this.tooltipShowEvent===Tr.focus}get listensForHover(){return this.tooltipShowEvent===Tr.all||this.tooltipShowEvent===Tr.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const i=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?300:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},i)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",i=>{e.contains(i.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const i=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?i():this.timeout=setTimeout(i,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fs),t.Y36(t.s_b),t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,i){1&e&&t.NdJ("focusin",function(){return i.onFocus()})("blur",function(){return i.onBlur()})("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(o){return i.onMouseLeave(o.target)})("click",function(){return i.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),n})(),uc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ic,Fs],imports:[[m.ez]]}),n})();typeof window<"u"?Vs=window:typeof global<"u"&&(Vs=global);let $i=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,cc,uc],m.ez,cc,uc]}),n})(),I_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),vc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),O_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),M_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),N_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),xc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})();Math;let Us=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),R_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i,Us,xc]]}),n})(),Z_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),V_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),G_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i,Us,vc]]}),n})(),z_=(()=>{class n{constructor(){!function U_(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[$i,I_,vc,O_,M_,N_,xc,R_,Z_,Us,V_,G_]}),n})();function H_(n,r){1&n&&(t.TgZ(0,"div"),t._UZ(1,"mat-spinner",3),t.qZA())}function Y_(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function W_(n,r){1&n&&(t.O4$(),t.TgZ(0,"marker",10),t._UZ(1,"path",11),t.qZA())}function X_(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",12),t._UZ(1,"rect"),t.TgZ(2,"text",13),t._uU(3),t.qZA()()),2&n){const e=r.$implicit;t.Q6J("tooltipTitle",e.tooltip)("tooltipPlacement","top")("tooltipType","tooltip"),t.xp6(1),t.uIk("fill",e.color)("height",e.dimension.height)("width",e.dimension.width),t.xp6(1),t.uIk("y",e.dimension.height/2)("x",10),t.xp6(1),t.hij(" ",e.label," ")}}function $_(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16)(3,"textPath",17),t._uU(4),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(3),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.label," ")}}const Q_=function(n,r){return[n,r]};function j_(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.YNc(9,Y_,5,4,"span",4),t.TgZ(10,"div",5)(11,"ngx-graph",6),t.YNc(12,W_,2,0,"ng-template",null,7,t.W1O),t.YNc(14,X_,4,9,"ng-template",null,8,t.W1O),t.YNc(16,$_,5,2,"ng-template",null,9,t.W1O),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,12,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(6,14,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(2),t.Q6J("links",e.hierarchialGraph.links)("nodes",e.hierarchialGraph.nodes)("view",t.WLB(16,Q_,e.innerWidth,e.innerHeight))("curve",e.curve)("draggingEnabled",!1)("zoomToFit$",e.zoomToFit$)}}function J_(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function K_(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.YNc(8,J_,5,4,"span",4),t._uU(9),t.ALo(10,"translate")),2&n){const e=t.oxw(2);t.hij(" ",t.lcZ(1,7,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(5,9,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(1),t.hij(" ",t.lcZ(10,11,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_4")," ")}}function q_(n,r){if(1&n&&(t.YNc(0,j_,18,19,"div",1),t.YNc(1,K_,11,13,"ng-template",null,2,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.isConnected)("ngIfElse",e)}}let tv=(()=>{class n{constructor(e,i,a,o,v,T,N,U,J){this.route=e,this.facilityManager=i,this.userService=a,this.membersService=o,this.serviceService=v,this.resourceManager=T,this.groupService=N,this.voService=U,this.translate=J,this.isConnected=!1,this.loading=!0,this.hierarchialGraph={nodes:[],links:[]},this.curve=nr,this.zoomToFit$=new Pn.x,this.idCounter=0}static findConnectedGroups(e,i){const a=[];for(const o of e)for(const v of i)o.id===v.id&&a.push(o);return a}static findConnectedResources(e,i){const a=[];for(const o of e)for(const v of i)o.id===v.id&&a.push(o);return a}onResize(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight}ngOnInit(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight,this.getLocalizedNames(),this.route.queryParams.subscribe(e=>{this.destination=String(e.destination),this.service=String(e.service),this.userService.getUserById(Number(e.user)).subscribe(i=>{this.user=i,this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(a=>{this.facilities=a,this.membersService.getMembersByUser(this.user.id).subscribe(o=>{if(this.membership=o,0===this.membership.length||0===this.facilities.length)return this.loading=!1,void(this.isConnected=!1);this.showGraph()})})})})}showGraph(){const e=""+this.id().toString(),i=this.user.firstName??" "+this.user.lastName??"",a=this.localUser,o="user: "+this.user.id.toString();this.hierarchialGraph.nodes.push({id:e,label:i,tooltip:a,color:"#FFFFCC",tip:o});const T=""+this.id().toString(),N="destination no id";this.hierarchialGraph.nodes.push("noService"===this.service?{id:T,label:this.destination,tooltip:this.localDestination+": "+this.destination,color:"#E0E0E0",tip:N}:{id:T,label:this.service+": "+this.destination,tooltip:this.localService+": "+this.service+", "+this.localDestination+": "+this.destination,color:"#E0E0E0",tip:N});for(const U of this.facilities)this.serviceService.getAllRichDestinationsForFacility(U.id).subscribe(J=>{this.connectToService(U,J),setTimeout(()=>{this.zoomToFit$.next(!0),this.loading=!1},2e3)})}connectToService(e,i){this.isConnectedToService(i)&&this.facilityManager.getAssignedResourcesForFacility(e.id).subscribe(a=>{for(const o of this.membership)this.connectToGroups(e,o,a)})}connectToGroups(e,i,a){this.facilityManager.getAllowedGroups(e.id,i.voId).subscribe(o=>{0!==o.length&&this.groupService.getMemberGroups(i.id).subscribe(v=>{const T=n.findConnectedGroups(o,v);if(0!==T.length)for(const N of T)this.connectToResource(e,N,a)})})}haveService(e){if("noService"===this.service)return!0;for(const i of e)if(this.service===i.name)return!0;return!1}connectToResource(e,i,a){this.resourceManager.getAssignedResourcesWithGroup(i.id).subscribe(o=>{const v=n.findConnectedResources(o,a);for(const T of v)this.resourceManager.getAssignedServicesToResource(T.id).subscribe(N=>{this.haveService(N)&&(this.isConnected=!0,this.addNodesToGraph(i.voId,i,T,e))})})}addNodesToGraph(e,i,a,o){if(-1===this.findEntityInGraph("Facility: "+o.id.toString())){const v=""+this.id().toString(),T=this.localFacility+": "+o.name,N=o.description,U="Facility: "+o.id.toString();this.hierarchialGraph.nodes.push({id:v,label:T,tooltip:N,color:"#FFCCFF",tip:U});const ct={source:v,target:this.hierarchialGraph.nodes[this.findEntityInGraph("destination no id")].id};this.hierarchialGraph.links.push(ct)}this.voService.getVoById(e).subscribe(v=>{if(-1===this.findEntityInGraph("Vo: "+v.id.toString())){const N=this.id().toString(),U=this.localVo+": "+v.shortName,J=v.name,ct="Vo: "+v.id.toString();this.hierarchialGraph.nodes.push({id:N,label:U,tooltip:J,color:"#E5FFCC",tip:ct});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("user: "+this.user.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct)}if(-1===this.findEntityInGraph("Group: "+i.id.toString())){const N=this.id().toString(),U=this.localGroup+": "+i.name,J=i.description,ct="Group: "+i.id.toString();this.hierarchialGraph.nodes.push({id:N,label:U,tooltip:J,color:"#CCE5FF",tip:ct});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Vo: "+v.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct)}const T=this.findEntityInGraph("Resource: "+a.id.toString());if(-1!==T){const N={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id.toString())].id,target:this.hierarchialGraph.nodes[T].id};this.hierarchialGraph.links.push(N)}else{const N=this.id().toString(),U=this.localResource+": "+a.name,J=a.description,ct="Resource: "+a.id.toString();this.hierarchialGraph.nodes.push({id:N,label:U,tooltip:J,color:"#FFCCCC",tip:ct});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct);const It={source:N,target:this.hierarchialGraph.nodes[this.findEntityInGraph("Facility: "+o.id.toString())].id};this.hierarchialGraph.links.push(It)}})}findEntityInGraph(e){for(let i=0;i<this.hierarchialGraph.nodes.length;i++)if(this.hierarchialGraph.nodes[i].tip===e)return i;return-1}isConnectedToService(e){for(const i of e)if(i.destination===this.destination&&(i.service.name===this.service||"noService"===this.service))return!0;return!1}id(){return this.idCounter++,this.idCounter}getLocalizedNames(){this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.USER").subscribe(e=>{this.localUser=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.VO").subscribe(e=>{this.localVo=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.GROUP").subscribe(e=>{this.localGroup=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.RESOURCE").subscribe(e=>{this.localResource=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.FACILITY").subscribe(e=>{this.localFacility=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SERVICE").subscribe(e=>{this.localService=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION").subscribe(e=>{this.localDestination=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(H.IQ),t.Y36(H.Fv),t.Y36(H.uq),t.Y36(H.KK),t.Y36(H.xk),t.Y36(H.ff),t.Y36(H.YF),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-graph"]],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(o){return i.onResize(o)},!1,t.Jf7),2&e&&t.ekj("router-component",i.true)},decls:6,vars:5,consts:[[1,"page-subtitle"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"ml-auto","mr-auto"],[4,"ngIf"],[1,"card","w-100","h-100"],[1,"chart-container",3,"links","nodes","view","curve","draggingEnabled","zoomToFit$"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","markerHeight","4","refX","8","refY","0","markerWidth","4","orient","auto","viewBox","0 -5 10 10"],["d","M0,-5L10,0L0,5",1,"arrow-head"],["ngx-tooltip","",1,"node",3,"tooltipTitle","tooltipPlacement","tooltipType"],["alignment-baseline","central"],[1,"edge"],["marker-end","url(#arrow)","stroke-width","2",1,"line"],["text-anchor","end",1,"edge-label"],["startOffset","60%",2,"fill","#000"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,H_,2,0,"div",1),t.YNc(4,q_,3,2,"ng-template",null,2,t.W1O)),2&e){const a=t.MAs(5);t.xp6(1),t.hij(" ",t.lcZ(2,3,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE"),"\n"),t.xp6(2),t.Q6J("ngIf",i.loading)("ngIfElse",a)}},dependencies:[Np,m.O5,Bs,tt.Ou,u.X$]}),n})();var ev=s(25828),yc=s(69024),nv=s(29862),ma=s(21029),ga=s(94391),iv=s(31359);function rv(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function av(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.editUser())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function sv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.anonymizeUser())}),t.TgZ(1,"mat-icon"),t._uU(2,"no_accounts"),t.qZA()()}}function ov(n,r){1&n&&(t.TgZ(0,"mat-icon",17),t.ALo(1,"translate"),t._uU(2," blur_off "),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"USER_DETAIL.DASHBOARD.ANONYMIZED"))}function lv(n,r){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,av,3,0,"button",12),t.YNc(2,sv,3,0,"button",13),t.YNc(3,ov,3,3,"mat-icon",14),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.anonymized),t.xp6(1),t.Q6J("ngIf",!e.anonymized),t.xp6(1),t.Q6J("ngIf",e.anonymized)}}const cv=function(){return{color:"black"}},uv=function(n){return["/admin/users",n]};function hv(n,r){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6)(4,"div",7)(5,"a",8),t._uU(6),t.ALo(7,"userFullName"),t.qZA(),t.TgZ(8,"span",9),t._uU(9),t.qZA(),t.YNc(10,lv,4,3,"span",10),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",11),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,12,"ADMIN_USER.ENTITY")),t.Q6J("ngStyle",t.DdM(22,cv))("svgIcon",e.svgIcon),t.xp6(4),t.Q6J("routerLink",t.VKq(23,uv,e.user.id)),t.xp6(1),t.hij(" ",t.lcZ(7,14,e.user)," "),t.xp6(3),t.hij(" \xa0#",e.user.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE("",t.lcZ(13,16,"ADMIN_USER.UUID"),": ",e.user.uuid,""),t.xp6(3),t.lnq(" ",t.lcZ(16,18,"ADMIN_USER.ENTITY"),", ",t.lcZ(17,20,"ADMIN_USER.USER_TYPE"),": ",e.getUserType()," ")}}let dv=(()=>{class n{constructor(e,i,a,o,v,T,N,U,J){this.route=e,this.attributesService=i,this.usersService=a,this.sideMenuService=o,this.sideMenuItemService=v,this.dialog=T,this.authResolver=N,this.entityStorageService=U,this.router=J,this.loading=!1,this.svgIcon="perun-user-dark"}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{const i=Number(e.userId);this.entityStorageService.setEntity({id:Number(i),beanName:"User"}),this.path=`/admin/users/${i}`,this.regex="/admin/users/\\d+",this.usersService.getUserById(i).subscribe(o=>{this.user=o,this.user.serviceUser&&(this.svgIcon="perun-service-identity");const v=this.sideMenuItemService.parseUser(o,this.path,this.regex);this.sideMenuService.setAdminItems([v]),this.loading=!1},()=>this.loading=!1),this.attributesService.getAttribute("urn:perun:user:attribute-def:virt:anonymized",void 0,void 0,i).subscribe(o=>{this.anonymized=Boolean(o.value)})})}editUser(){const e=(0,fe.kZ)();e.width="450px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(nv.x,e).afterClosed().subscribe(a=>{a&&this.usersService.getUserById(this.user.id).subscribe(o=>{this.user=o})})}getUserType(){return this.user.serviceUser?"Service":"Person"}anonymizeUser(){const e=(0,fe.kZ)();e.width="550px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(ma.GI,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin","users"],{queryParamsHandling:"merge"})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(H.H8),t.Y36(H.Fv),t.Y36(d.D),t.Y36(yc.V),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-user-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],[1,"perun-icon","perun-icon-detail",3,"ngStyle","svgIcon","matTooltip"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["data-cy","user-name-link",1,"user-link",3,"routerLink"],[1,"text-muted"],[4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","","data-cy","edit-user-button",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["class","mat-icon-war ml-2",3,"matTooltip",4,"ngIf"],["mat-icon-button","","data-cy","edit-user-button",3,"click"],["mat-icon-button","",3,"click"],[1,"mat-icon-war","ml-2",3,"matTooltip"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,rv,1,0,"mat-spinner",1),t.YNc(3,hv,18,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading&&void 0!==i.user))},dependencies:[m.O5,m.PC,p.yS,l.Hw,G.lW,tt.Ou,sn.gM,h.A,f.W,ga.QG,u.X$,iv.d]}),n})();var pv=s(17755),fv=s(74837),mv=s(85985),gv=s(98973),_v=s(15935);function vv(n,r){1&n&&t._UZ(0,"mat-spinner",5)}const xv=function(){return["id","name","type"]};function yv(n,r){if(1&n&&t._UZ(0,"app-ext-sources-list",6),2&n){const e=t.oxw();t.Q6J("extSources",e.extSources)("filterValue",e.filterValue)("displayedColumns",t.DdM(4,xv))("tableId",e.tableId)}}let bv=(()=>{class n{constructor(e,i,a,o){this.extSourceService=e,this.notificator=i,this.translate=a,this.authResolver=o,this.extSources=[],this.filterValue="",this.loading=!1,this.tableId=En.qy,this.translate.get("ADMIN.EXT_SOURCES.LOAD_SUCCESS").subscribe(v=>this.loadSuccess=v)}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}onLoad(){this.extSourceService.loadExtSourcesDefinitions().subscribe(()=>{this.notificator.showSuccess(this.loadSuccess),this.refreshTable()})}refreshTable(){this.loading=!0,this.extSourceService.getExtSources().subscribe(e=>{this.extSources=e,this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KG),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-ext-sources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"extSources","filterValue","displayedColumns","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"extSources","filterValue","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("click",function(){return i.onLoad()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(6,vv,1,0,"mat-spinner",3),t.YNc(7,yv,1,5,"app-ext-sources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"ADMIN.EXT_SOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","ADMIN.EXT_SOURCES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,tt.Ou,_v.D,gn.t,In.L,u.X$]}),n})();var Tv=s(6097),Cv=s(97453),za=s(54004);function wv(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function Av(n,r){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function Sv(n,r){if(1&n&&(t.TgZ(0,"div")(1,"mat-form-field",8),t._UZ(2,"input",9),t.ALo(3,"translate"),t.TgZ(4,"mat-error"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"mat-form-field",8),t._UZ(8,"input",10),t.ALo(9,"translate"),t.TgZ(10,"mat-error"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-autocomplete",11,12),t.YNc(15,Av,2,2,"mat-option",13),t.ALo(16,"async"),t.qZA()()()),2&n){const e=t.MAs(14),i=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(3,9,"DIALOGS.ADD_USER_EXT_SOURCE.LOGIN")),t.Q6J("formControl",i.loginControl),t.xp6(3),t.hij(" ",t.lcZ(6,11,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_LOGIN")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,13,"DIALOGS.ADD_USER_EXT_SOURCE.EXT_SOURCE")),t.Q6J("formControl",i.extSourcesControl)("matAutocomplete",e),t.xp6(3),t.hij(" ",t.lcZ(12,15,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_EXT_SOURCE")," "),t.xp6(2),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(16,17,i.filteredExtSources))}}let Ev=(()=>{class n{constructor(e,i,a,o,v,T){this.dialogRef=e,this.data=i,this.extSourcesManagerService=a,this.usersManagerService=o,this.translate=v,this.notificator=T,this.extSources=[],v.get("DIALOGS.ADD_USER_EXT_SOURCE.SUCCESS").subscribe(N=>this.successMessage=N)}ngOnInit(){this.loading=!0,this.loginControl=new rt.p4("",[rt.kI.required,rt.kI.pattern(".*[\\S]+.*")]),this.extSourcesControl=new rt.p4("",[rt.kI.required]),this.loginControl.markAllAsTouched(),this.extSourcesControl.markAllAsTouched(),this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,li.O)(""),(0,za.U)(e=>this._filter(e))),this.extSourcesManagerService.getExtSources().subscribe(e=>{this.extSources=e,this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,li.O)(""),(0,za.U)(i=>this._filter(i))),this.loading=!1},()=>this.loading=!1)}displayFn(e){return e?e.name:null}onCancel(){this.dialogRef.close(!1)}onAdd(){this.loading=!0,this.usersManagerService.addUserExtSource({user:this.data.userId,userExtSource:{beanName:"",extSource:this.extSourcesControl.value,id:0,login:this.loginControl.value,userId:this.data.userId}}).subscribe(()=>{this.loading=!1,this.notificator.showSuccess(this.successMessage),this.dialogRef.close(!0)},()=>this.loading=!1)}_filter(e){const i="string"==typeof e?e.toLowerCase():e.name.toLowerCase();return this.extSources.filter(a=>a.name.toLowerCase().includes(i))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(H.KG),t.Y36(H.Fv),t.Y36(u.sK),t.Y36(Z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-user-ext-source-dialog"]],decls:13,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container","user-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[1,"center-self","w-100"],["matInput","","required","",3,"formControl","placeholder"],["matInput","","required","","type","text",3,"formControl","matAutocomplete","placeholder"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,wv,1,0,"mat-spinner",2),t.YNc(5,Sv,17,19,"div",3),t.qZA(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onAdd()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"DIALOGS.ADD_USER_EXT_SOURCE.TITLE")),t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.ADD_USER_EXT_SOURCE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loginControl.invalid||i.extSourcesControl.invalid||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.ADD_USER_EXT_SOURCE.ADD")," "))},dependencies:[m.sg,m.O5,Rt.XC,Rt.ZL,zt.ey,ie.TO,ie.KE,Mt.Nt,rt.Fj,rt.JJ,rt.Q7,rt.oH,G.lW,M.uh,M.xY,M.H8,tt.Ou,m.Ov,u.X$],styles:[".column-size[_ngcontent-%COMP%]{width:10rem!important;font-weight:700}.center-self[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.auto-width[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}.auto-width[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{max-width:100%;width:auto}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),n})();var Dv=s(80275);function Lv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addIdentity())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.IDENTITIES.ADD"),"\n"))}function kv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeIdentity())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.IDENTITIES.REMOVE"),"\n")}}function Iv(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function Ov(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-user-ext-sources-list",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("selection",e.selection)("tableId",e.tableId)("userExtSources",e.userExtSources)}}let Mv=(()=>{class n{constructor(e,i,a,o,v,T){this.usersManagerService=e,this.storage=i,this.registrarManagerService=a,this.dialog=o,this.route=v,this.authResolver=T,this.userExtSources=[],this.selection=new B.Ov(!1,[]),this.displayedColumns=["select","id","extSourceName","login","lastAccess"],this.tableId=En.gG,this.filterValue=""}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId)}),this.refreshTable()}refreshTable(){this.loading=!0,this.selection.clear(),this.usersManagerService.getRichUserExtSources(this.userId).subscribe(e=>{this.userExtSources=e,this.loading=!1},()=>this.loading=!1)}addIdentity(){const e=(0,fe.kZ)();e.width="1000px",e.data={userId:this.userId},this.dialog.open(Ev,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeIdentity(){const e=(0,fe.kZ)();e.width="450px",e.data={showSuccess:!0,theme:"user-theme",userId:this.userId,extSources:this.selection.selected},this.dialog.open(ma.Lc,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(Z.d6),t.Y36(H.tk),t.Y36(M.uw),t.Y36(p.gz),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-identities"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],[1,"admin-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","selection","tableId","userExtSources"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(4,Lv,3,3,"button",2),t.YNc(5,kv,3,4,"button",3),t.TgZ(6,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Iv,1,0,"mat-spinner",6),t.qZA(),t.YNc(9,Ov,2,5,"div",7)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"USER_DETAIL.IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","USER_DETAIL.IDENTITIES.FILTER_PLACEHOLDER"),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,gn.t,In.L,Dv.j,u.X$]}),n})();var Nv=s(80774),Pv=s(62109);function Fv(n,r){1&n&&t._UZ(0,"mat-spinner",5)}const Rv=function(){return["id","name","vo","facility","description"]};function Bv(n,r){if(1&n&&t._UZ(0,"perun-web-apps-resources-list",6),2&n){const e=t.oxw();t.Q6J("displayedColumns",t.DdM(4,Rv))("resources",e.resources)("filterValue",e.filterValue)("tableId",e.tableId)}}let Zv=(()=>{class n{constructor(e,i){this.userManager=e,this.route=i,this.resources=[],this.tableId=En.kO,this.filterValue=""}ngOnInit(){this.refreshTable()}refreshTable(){this.loading=!0,this.route.parent.params.subscribe(e=>{const i=Number(e.userId);this.userManager.getAssignedRichResourcesForUser(i).subscribe(a=>{this.resources=a,this.loading=!1})})}resourceFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-resources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","resources","filterValue","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","resources","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.resourceFilter(o)}),t.qZA(),t.YNc(6,Fv,1,0,"mat-spinner",3),t.YNc(7,Bv,1,5,"perun-web-apps-resources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.RESOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.RESOURCES_LIST.TABLE_SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,tt.Ou,gn.t,In.L,Pv.C,u.X$]}),n})();var Vv=s(61365),Gv=s(71103),Uv=s(53984);const zv=["list"];function Hv(n,r){1&n&&t._UZ(0,"mat-spinner",8)}function Yv(n,r){if(1&n&&t._UZ(0,"perun-web-apps-attributes-list",9,10),2&n){const e=t.oxw();t.Q6J("selection",e.selection)("attributes",e.attributes)("tableId",e.tableId)}}let Wv=(()=>{class n{constructor(e,i,a,o){this.dialog=e,this.attributesManager=i,this.userService=a,this.route=o,this.loading=!1,this.selection=new B.Ov(!0,[]),this.tableId=En.rF,this.attributes=[]}ngOnInit(){this.route.params.subscribe(e=>{const i=Number(e.identityId);this.userService.getUserExtSourceById(i).subscribe(a=>{this.userExtSource=a,this.refreshTable()})})}refreshTable(){this.loading=!0,this.attributesManager.getUserExtSourceAttributes(this.userExtSource.id).subscribe(e=>{this.attributes=(0,fe.MX)(e),this.selection.clear(),this.loading=!1})}onAdd(){const e=(0,fe.kZ)();e.width="1050px",e.data={entityId:this.userExtSource.id,entity:"ues",notEmptyAttributes:this.attributes,style:"user-theme"},this.dialog.open(Gv.n,e).afterClosed().subscribe(a=>{"saved"===a&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const e=(0,fe.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(ma.wA,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,fe.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(Vv.k,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(H.H8),t.Y36(H.Fv),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-identity-detail"]],viewQuery:function(e,i){if(1&e&&t.Gf(zv,5),2&e){let a;t.iGM(a=t.CRH())&&(i.list=a.first)}},decls:26,vars:32,consts:[[1,"page-subtitle"],[1,"mb-2"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","attributes","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"selection","attributes","tableId"],["list",""]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(15,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,Hv,1,0,"mat-spinner",6),t.YNc(25,Yv,2,3,"perun-web-apps-attributes-list",7),t.qZA()),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,15,"SHARED.IDENTITY_DETAIL.TITLE")," - ",i.userExtSource?i.userExtSource.extSource.name:""," "),t.xp6(3),t.AsE(" ",t.lcZ(6,17,"SHARED.IDENTITY_DETAIL.TYPE"),": ",i.userExtSource?i.userExtSource.extSource.type:""," "),t.xp6(3),t.AsE(" ",t.lcZ(9,19,"SHARED.IDENTITY_DETAIL.LOGIN"),": ",i.userExtSource?i.userExtSource.login:""," "),t.xp6(3),t.AsE(" ",t.lcZ(12,21,"SHARED.IDENTITY_DETAIL.LAST_ACCESS"),": ",i.userExtSource?t.xi3(13,23,i.userExtSource.lastAccess,"d.M.y H:mm:ss"):""," "),t.xp6(4),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(17,26,"SHARED.IDENTITY_DETAIL.SAVE")," "),t.xp6(3),t.hij(" ",t.lcZ(20,28,"SHARED.IDENTITY_DETAIL.ADD")," "),t.xp6(2),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(23,30,"SHARED.IDENTITY_DETAIL.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,gn.t,Uv.p,m.uU,u.X$]}),n})();var Xv=s(40009),$v=s(90719);function Qv(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function jv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.editService())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Jv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.removeService())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA()()}}function Kv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.evaluateConsents())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.EVALUATE_CONSENTS")," "))}const qv=function(){return{color:"black"}},bc=function(n){return["/admin/services",n]};function t0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"a",10),t.NdJ("auxclick",function(a){return a.preventDefault()}),t._uU(8),t.qZA(),t.TgZ(9,"span",11),t._uU(10),t.qZA(),t.YNc(11,jv,3,0,"button",12),t.YNc(12,Jv,3,0,"button",13),t.qZA(),t.TgZ(13,"span",14),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"div",15)(17,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeServiceStatus())}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.propagationChange())}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.YNc(23,Kv,3,3,"button",17),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,15,"SERVICE_DETAIL.ENTITY")),t.Q6J("ngStyle",t.DdM(23,qv)),t.xp6(6),t.Q6J("perunWebAppsMiddleClickRouterLink",t.VKq(24,bc,e.service.id.toString()))("routerLink",t.VKq(26,bc,e.service.id)),t.xp6(1),t.hij(" ",e.service.name," "),t.xp6(2),t.hij(" \xa0 #",e.service.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE(" ",t.lcZ(15,17,"SERVICE_DETAIL.DESCRIPTION"),": ",e.service.description," "),t.xp6(3),t.Q6J("checked",e.service.enabled),t.xp6(1),t.hij(" ",t.lcZ(19,19,"SERVICE_DETAIL.ENABLE")," "),t.xp6(2),t.Q6J("checked",e.service.useExpiredMembers),t.xp6(1),t.hij(" ",t.lcZ(22,21,"SERVICE_DETAIL.PROPAGATE")," "),t.xp6(2),t.Q6J("ngIf",e.authResolver.isPerunAdmin())}}let e0=(()=>{class n{constructor(e,i,a,o,v,T,N,U,J,ct,ot){this.route=e,this.router=i,this.consentsManager=a,this.serviceManager=o,this.sideMenuService=v,this.sideMenuItemService=T,this.dialog=N,this.authResolver=U,this.translate=J,this.notificator=ct,this.entityStorageService=ot,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{this.serviceId=Number(e.serviceId),this.entityStorageService.setEntity({id:this.serviceId,beanName:"Service"}),this.refresh()})}editService(){const e=(0,fe.kZ)();e.width="600px",e.data={theme:"service-theme",service:this.service},this.dialog.open(Xv.R,e).afterClosed().subscribe(a=>{a&&this.refresh()})}removeService(){const e=(0,fe.kZ)();e.width="600px",e.data={theme:"service-theme",services:[this.service]},this.dialog.open($v.m,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin/services"],{queryParamsHandling:"preserve"})})}changeServiceStatus(){this.service.enabled=!this.service.enabled,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.STATUS_CHANGE_SUCCESS"))},()=>this.service.enabled=!this.service.enabled)}propagationChange(){this.service.useExpiredMembers=!this.service.useExpiredMembers,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.PROPAGATION_CHANGE_SUCCESS"))},()=>this.service.useExpiredMembers=!this.service.useExpiredMembers)}evaluateConsents(){const e=(0,fe.kZ)();e.width="500px",e.data={title:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_TITLE"),theme:"service-theme",description:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_DESCRIPTION"),items:[this.service.name],type:"confirmation",showAsk:!1},this.dialog.open(ma.Ts,e).afterClosed().subscribe(a=>{a&&this.consentsManager.evaluateConsentsForService(this.service.id).subscribe(()=>this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.EVALUATION_FINISH")))})}refresh(){this.serviceManager.getServiceById(this.serviceId).subscribe(e=>{this.service=e;const i=this.sideMenuItemService.parseService(this.service);this.sideMenuService.setAdminItems([i]),this.loading=!1},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(H.WY),t.Y36(H.KK),t.Y36(d.D),t.Y36(yc.V),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(u.sK),t.Y36(Z.V6),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","service-theme"],["class","ml-auto mr-auto",4,"ngIf"],["class","page-title-headtitle detail-layout",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"page-title-headtitle","detail-layout"],["svgIcon","perun-service",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"wrap-container"],[1,"detail-info"],[1,"flex-column"],[1,"page-title-headline","d-flex","align-items-center"],["data-cy","service-name-link",1,"service-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[1,"text-muted"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click",4,"ngIf"],["aria-label","Remove service","mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"detail-actions"],["labelPosition","before",3,"checked","toggleChange"],["class","action-button evaluate-button","mat-stroked-button","",3,"click",4,"ngIf"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click"],["aria-label","Remove service","mat-icon-button","",3,"click"],["mat-stroked-button","",1,"action-button","evaluate-button",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Qv,1,0,"mat-spinner",1),t.YNc(3,t0,24,28,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,m.PC,p.yS,l.Hw,G.lW,tt.Ou,sn.gM,Tt.Rr,h.A,f.W,ga.YH,ga.QG,u.X$],styles:[".detail-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1.2em}.detail-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-right:1.2em}.wrap-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.3em}.detail-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid rgba(0,0,0,.2);padding-left:.5em}.evaluate-button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"],data:{animation:[Wn.Ji]}}),n})(),n0=(()=>{class n{constructor(e){this.entityStorageService=e,this.navItems=[]}ngOnInit(){this.service=this.entityStorageService.getEntity(),this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-attributes",url:`/admin/services/${this.service.id}/required-attributes`,label:"MENU_ITEMS.SERVICE.REQUIRED_ATTRIBUTES",style:"service-btn"},{cssIcon:"perun-service_destination",url:`/admin/services/${this.service.id}/destinations`,label:"MENU_ITEMS.SERVICE.DESTINATIONS",style:"service-btn"}]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&t._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&t.Q6J("items",i.navItems)("size","small")},dependencies:[L.L]}),n})();var r0=s(32076),a0=s(24351),Tc=s(54482),s0=s(25032),l0=s(86099),c0=s(57359);function h0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function d0(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.Q6J("alert_type","warn"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ACTIVE_WARN")))}function p0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,d0,3,4,"perun-web-apps-alert",6),t.ALo(2,"async"),t.TgZ(3,"perun-web-apps-immediate-filter",7),t.NdJ("filter",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.applyFilter(a))}),t.qZA(),t._UZ(4,"app-attr-def-list",8),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,8,e.serviceEnabled$)),t.xp6(2),t.Q6J("placeholder","DIALOGS.ADD_REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("selection",e.selection)("definitions",e.attrDefinitions)("disableRouting",!0)("filterValue",e.filterValue)("serviceEnabled",t.lcZ(5,10,e.serviceEnabled$))("consentRequired",t.lcZ(6,12,e.consentRequired$))}}function f0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAdd())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ADD")," ")}}let m0=(()=>{class n{constructor(e,i,a,o,v,T,N,U){this.dialogRef=e,this.data=i,this.serviceManager=a,this.attributesManager=o,this.facilitiesService=v,this.consentHubService=T,this.notificator=N,this.translate=U,this.consentRequired$=this.facilitiesService.getAssignedFacilitiesByService(this.data.serviceId).pipe((0,a0.b)(r0.D),(0,za.U)(J=>J.id),function o0(n,r){return(0,Tc.e)((e,i)=>{const a=new Set;e.subscribe((0,Qt.x)(i,o=>{const v=n?n(o):o;a.has(v)||(a.add(v),i.next(o))})),r?.subscribe((0,Qt.x)(i,()=>a.clear(),s0.Z))})}(),(0,l0.z)(J=>this.consentHubService.getConsentHubByFacility(J)),function u0(n,r){return(0,Tc.e)((0,c0.U)(n,r,arguments.length>=2,!1,!0))}((J,ct)=>J||ct.enforceConsents,!1),(0,li.O)(!0)),this.serviceEnabled$=this.serviceManager.getServiceById(this.data.serviceId).pipe((0,za.U)(J=>J.enabled),(0,li.O)(!0)),this.attrDefinitions=[],this.selection=new B.Ov(!0,[]),this.filterValue="",this.loading=!1}ngOnInit(){this.loading=!0,this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}onAdd(){this.loading=!0;const e=this.selection.selected.map(i=>i.id);this.serviceManager.addRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.ADD_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(H.KK),t.Y36(H.H8),t.Y36(H.IQ),t.Y36(H.WY),t.Y36(Z.V6),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-required-attributes"]],decls:7,vars:9,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],[3,"alert_type",4,"ngIf"],[3,"placeholder","filter"],[3,"selection","definitions","disableRouting","filterValue","serviceEnabled","consentRequired"],[3,"alert_type"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,h0,1,0,"mat-spinner",1),t.YNc(5,p0,7,14,"div",2),t.YNc(6,f0,7,7,"div",3),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,7,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,M.uh,M.xY,M.H8,tt.Ou,K.w,In.L,Fi,m.Ov,u.X$]}),n})();function g0(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function _0(n,r){1&n&&t._UZ(0,"th",15)}function v0(n,r){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function x0(n,r){1&n&&t._UZ(0,"tr",17)}function y0(n,r){1&n&&t._UZ(0,"tr",18)}function b0(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,_0,1,0,"th",11),t.YNc(10,v0,2,1,"td",12),t.BQk(),t.YNc(11,x0,1,0,"tr",13),t.YNc(12,y0,1,0,"tr",14),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.DESCRIPTION")),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let T0=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.serviceManager=a,this.notificator=o,this.translate=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.dataSource=new R.by(this.data.attrDefinitions)}onConfirm(){this.loading=!0;const e=this.dataSource.data.map(i=>i.id);this.serviceManager.removeRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(H.KK),t.Y36(Z.V6),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-remove-required-attributes"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div"),t.YNc(4,g0,1,0,"mat-spinner",1),t.YNc(5,b0,13,9,"div",2),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onConfirm()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,9,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Tol(i.theme),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.REMOVE")," "))},dependencies:[m.O5,G.lW,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,M.uh,M.xY,M.H8,tt.Ou,u.X$]}),n})();function C0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.ADD")," "))}function w0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.REMOVE")," ")}}function A0(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function S0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",10),t.NdJ("refreshEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshTable())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("filterValue",e.filterValue)("selection",e.selection)("disableRouting",!e.authResolver.isPerunAdmin())("tableId",e.tableId)}}let E0=(()=>{class n{constructor(e,i,a,o){this.attributeManager=e,this.dialog=i,this.authResolver=a,this.entityStorageService=o,this.loading=!1,this.filterValue="",this.selection=new B.Ov(!0,[]),this.attrDefinitions=[],this.tableId=En.JO}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.attributeManager.getRequiredAttributesDefinition(this.service.id).subscribe(e=>{this.selection.clear(),this.attrDefinitions=e,this.loading=!1})}onAdd(){const e=(0,fe.kZ)();e.width="950px",e.data={serviceId:this.service.id,theme:"service-theme"},this.dialog.open(m0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,fe.kZ)();e.width="650px",e.data={serviceId:this.service.id,attrDefinitions:this.selection.selected,theme:"service-theme"},this.dialog.open(T0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.H8),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-required-attributes"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,C0,3,3,"button",2),t.YNc(6,w0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(8,A0,1,0,"mat-spinner",5),t.YNc(9,S0,1,5,"app-attr-def-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,Fi,gn.t,In.L,u.X$]}),n})();var D0=s(46597),L0=s(89466),k0=s(70242);function I0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.REMOVE")," ")}}function O0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAllow())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.ALLOW")," ")}}function M0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onBlock())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.BLOCK")," ")}}function N0(n,r){1&n&&t._UZ(0,"mat-spinner",10)}const P0=function(){return["select","destinationId","facility","destination","type","status","propagationType"]};function F0(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-destination-list",11),2&n){const e=t.oxw();t.Q6J("destinations",e.destinations)("filterValue",e.filterValue)("selection",e.selection)("displayedColumns",t.DdM(5,P0))("tableId",e.tableId)}}let R0=(()=>{class n{constructor(e,i,a,o,v,T){this.serviceManager=e,this.notificator=i,this.translate=a,this.dialog=o,this.authResolver=v,this.entityStorageService=T,this.loading=!1,this.filterValue="",this.destinations=[],this.selection=new B.Ov(!0,[]),this.tableId=En.Cf}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.serviceManager.getAllRichDestinationsForService(this.service.id).subscribe(e=>{this.selection.clear(),this.filterValue="",this.destinations=e,this.loading=!1})}onBlock(){this.loading=!0,this.blockServiceOnDestinations(this.selection.selected)}onAllow(){this.loading=!0,this.allowServiceOnDestinations(this.selection.selected)}onRemove(){const e=(0,fe.kZ)();e.width="500px",e.data={destinations:this.selection.selected,theme:"admin-theme"},this.dialog.open(L0.u,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}blockServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.BLOCK_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.blockServiceOnDestination(this.service.id,i.id).subscribe(()=>{this.blockServiceOnDestinations(e)},()=>this.loading=!1)}allowServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.ALLOW_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.unblockServiceOnDestinationById(this.service.id,i.id).subscribe(()=>{this.allowServiceOnDestinations(e)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KK),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-destinations"]],decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["color","warn","class","mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","accent","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"destinations","filterValue","selection","displayedColumns","tableId",4,"ngIf"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"destinations","filterValue","selection","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,I0,3,4,"button",2),t.YNc(6,O0,3,4,"button",3),t.YNc(7,M0,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(9,N0,1,0,"mat-spinner",6),t.YNc(10,F0,1,6,"app-perun-web-apps-destination-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"SERVICE_DETAIL.DESTINATIONS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.DESTINATIONS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,k0.q,gn.t,In.L,u.X$]}),n})();function B0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function Z0(n,r){1&n&&t._UZ(0,"th",13)}function V0(n,r){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function G0(n,r){1&n&&t._UZ(0,"tr",15)}function U0(n,r){1&n&&t._UZ(0,"tr",16)}function z0(n,r){if(1&n&&(t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",7),t.ynx(8,8),t.YNc(9,Z0,1,0,"th",9),t.YNc(10,V0,2,1,"td",10),t.BQk(),t.YNc(11,G0,1,0,"tr",11),t.YNc(12,U0,1,0,"tr",12),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"DIALOGS.DELETE_OWNER.DESCRIPTION")," "),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.DELETE_OWNER.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function H0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.DELETE_OWNER.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.DELETE_OWNER.DELETE")," ")}}let Y0=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.ownersManagerService=v,this.displayedColumns=["name"],this.owners=[]}ngOnInit(){this.dataSource=new R.by(this.data),this.owners=this.data}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.owners.length?this.ownersManagerService.deleteOwner(this.owners.pop().id).subscribe(()=>{this.onSubmit()},()=>this.loading=!1):this.translate.get("DIALOGS.DELETE_OWNER.SUCCESS").subscribe(e=>{this.loading=!1,this.notificator.showSuccess(e),this.dialogRef.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.aC))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-owner-dialog"]],decls:6,vars:6,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,B0,1,0,"mat-spinner",1),t.YNc(4,z0,13,9,"div",2),t.YNc(5,H0,7,7,"div",3)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"DIALOGS.DELETE_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,M.uh,M.xY,M.H8,tt.Ou,u.X$]}),n})();function W0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function X0(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.FILL_CONTACT")," "))}function $0(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.CONTACT_FORMAT")," "))}function Q0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",5)(2,"mat-form-field"),t._UZ(3,"input",6),t.ALo(4,"translate"),t.TgZ(5,"mat-error"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.ALo(10,"translate"),t.YNc(11,X0,3,3,"mat-error",3),t.YNc(12,$0,3,3,"mat-error",3),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-select",7),t.NdJ("valueChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.type=a)}),t.TgZ(15,"mat-option",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19),t.ALo(20,"translate"),t.qZA()()()(),t.TgZ(21,"div",10)(22,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t.ALo(26,"translate"),t.TgZ(27,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.s9C("placeholder",t.lcZ(4,15,"DIALOGS.ADD_OWNER.NAME")),t.Q6J("formControl",e.nameCtrl),t.xp6(3),t.hij(" ",t.lcZ(7,17,"DIALOGS.ADD_OWNER.FILL_NAME")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(10,19,"DIALOGS.ADD_OWNER.CONTACT")),t.Q6J("formControl",e.contactCtrl),t.xp6(2),t.Q6J("ngIf",e.contactCtrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.contactCtrl.invalid&&!e.contactCtrl.hasError("required")),t.xp6(2),t.Q6J("value",e.type),t.xp6(2),t.Oqu(t.lcZ(17,21,"DIALOGS.ADD_OWNER.TYPE1")),t.xp6(3),t.Oqu(t.lcZ(20,23,"DIALOGS.ADD_OWNER.TYPE2")),t.xp6(4),t.hij(" ",t.lcZ(24,25,"DIALOGS.ADD_OWNER.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(26,27,"DIALOGS.ADD_OWNER.TOOLTIP")),t.Q6J("matTooltipDisabled",e.nameCtrl.valid&&e.contactCtrl.valid),t.xp6(2),t.Q6J("disabled",e.nameCtrl.invalid||e.contactCtrl.invalid),t.xp6(1),t.hij(" ",t.lcZ(29,29,"DIALOGS.ADD_OWNER.CREATE")," ")}}let j0=(()=>{class n{constructor(e,i,a,o){this.dialogRef=e,this.notificator=i,this.ownersManagerService=a,this.translate=o,this.type="1",o.get("DIALOGS.ADD_OWNER.SUCCESS").subscribe(v=>this.successMessage=v)}ngOnInit(){this.nameCtrl=new rt.p4(null,[rt.kI.required,rt.kI.pattern("^[\\w.-]+( [\\w.-]+)*$")]),this.contactCtrl=new rt.p4(null,[rt.kI.required,rt.kI.pattern(fe.B2)])}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.ownersManagerService.createOwner({name:this.nameCtrl.value,contact:this.contactCtrl.value,ownerType:Number(this.type)}).subscribe(()=>{this.notificator.showSuccess(this.successMessage),this.loading=!1,this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(Z.V6),t.Y36(H.aC),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-owner-dialog"]],decls:6,vars:5,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"formControl","placeholder"],[3,"value","valueChange"],["value","1"],["value","0"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["matTooltipPosition","above",3,"matTooltip","matTooltipDisabled"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,W0,1,0,"mat-spinner",2),t.YNc(5,Q0,30,31,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"DIALOGS.ADD_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,zt.ey,ie.TO,ie.KE,Mt.Nt,rt.Fj,rt.JJ,rt.Q7,rt.oH,G.lW,M.uh,M.xY,M.H8,te.gD,tt.Ou,sn.gM,u.X$]}),n})();var J0=s(23256);function K0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addOwner())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.OWNERS.ADD")," "))}function q0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeOwner())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.OWNERS.DELETE")," ")}}function tx(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function ex(n,r){if(1&n&&t._UZ(0,"perun-web-apps-owners-list",10),2&n){const e=t.oxw();t.Q6J("selection",e.selected)("filterValue",e.filterValue)("owners",e.owners)("tableId",e.tableId)}}let nx=(()=>{class n{constructor(e,i,a){this.ownersManagerService=e,this.dialog=i,this.guiAuthResolver=a,this.owners=[],this.selected=new B.Ov(!0,[]),this.filterValue="",this.tableId=En.v1}ngOnInit(){this.setAuth(),this.refreshTable()}setAuth(){this.removeAuth=this.guiAuthResolver.isAuthorized("deleteOwner_Owner_policy",[]),this.addAuth=this.guiAuthResolver.isAuthorized("createOwner_Owner_policy",[])}refreshTable(){this.loading=!0,this.ownersManagerService.getAllOwners().subscribe(e=>{this.owners=e,this.selected.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}addOwner(){const e=(0,fe.kZ)();e.width="400px",e.data={},this.dialog.open(j0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeOwner(){const e=(0,fe.kZ)();e.width="400px",e.data=this.selected.selected,this.dialog.open(Y0,e).afterClosed().subscribe(a=>{a&&(this.selected.clear(),this.refreshTable())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.aC),t.Y36(M.uw),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-owners"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","filterValue","owners","tableId",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"selection","filterValue","owners","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,K0,3,3,"button",2),t.YNc(6,q0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(8,tx,1,0,"mat-spinner",5),t.YNc(9,ex,1,4,"perun-web-apps-owners-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"ADMIN.OWNERS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.addAuth),t.xp6(1),t.Q6J("ngIf",i.removeAuth),t.xp6(1),t.Q6J("placeholder","ADMIN.OWNERS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,gn.t,In.L,J0.Q,u.X$]}),n})();var ix=s(74010);function rx(n,r){1&n&&t._UZ(0,"mat-spinner",5)}function ax(n,r){if(1&n&&t._UZ(0,"perun-web-apps-facilities-list",6),2&n){const e=t.oxw();t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("facilities",e.facilities)("tableId",e.tableId)}}let sx=(()=>{class n{constructor(e,i){this.facilityManager=e,this.route=i,this.facilities=[],this.filterValue="",this.tableId=En.zW,this.displayedColumns=["id","name","description"]}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.refreshTable()})}refreshTable(){this.loading=!0,this.facilityManager.getAssignedFacilitiesByUser(this.userId).subscribe(e=>{this.facilities=e.map(i=>({facility:i})),this.loading=!1})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.IQ),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-facilities"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","filterValue","facilities","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","facilities","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(6,rx,1,0,"mat-spinner",3),t.YNc(7,ax,1,4,"perun-web-apps-facilities-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.FACILITIES.TITLE")),t.xp6(3),t.Q6J("placeholder","USER_DETAIL.FACILITIES.FILTER_PLACEHOLDER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,tt.Ou,gn.t,In.L,ix.X,u.X$]}),n})();var Cc=s(64080),ox=s(25788),lx=s(62707),cx=s(48323),ux=s(12651),hx=s(60526);function dx(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function px(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-vo-search-select",7),t.NdJ("voSelected",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMember(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("vos",e.vos)}}function fx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.STATUS")," ")}function mx(n,r){1&n&&t._UZ(0,"mat-spinner",6)}const gx=function(){return["id","recent","name","description","expiration","groupStatus"]};function _x(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-groups-list",16),t.NdJ("refreshTable",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.loadMember(a.selectedVo))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("groups",e.groups)("memberId",e.member.id)("memberGroupStatus",e.member.groupStatus)("displayedColumns",t.DdM(4,gx))}}const wc=function(n,r){return["/organizations",n,"members",r]};function vx(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",10)(2,"span",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",12),t.NdJ("auxclick",function(i){return i.preventDefault()}),t._uU(6),t.qZA()(),t._UZ(7,"app-member-overview-membership",13),t.TgZ(8,"p",14),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,_x,1,5,"perun-web-apps-groups-list",15),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,8,"USER_DETAIL.ACCOUNTS.MEMBER"),":"),t.xp6(2),t.Q6J("perunWebAppsMiddleClickRouterLink",t.WLB(12,wc,e.selectedVo.id.toString(),e.member.id.toString()))("routerLink",t.WLB(15,wc,e.selectedVo.id,e.member.id)),t.xp6(1),t.hij("",e.member.id," "),t.xp6(1),t.Q6J("member",e.member)("vo",e.selectedVo),t.xp6(2),t.Oqu(t.lcZ(10,10,"USER_DETAIL.ACCOUNTS.GROUPS")),t.xp6(2),t.Q6J("ngIf",!e.loading)}}function xx(n,r){if(1&n&&(t.YNc(0,mx,1,0,"mat-spinner",1),t.YNc(1,vx,12,18,"div",4)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function yx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_ATT")," ")}function bx(n,r){1&n&&t._UZ(0,"mat-spinner")}function Tx(n,r){if(1&n&&t._UZ(0,"app-one-entity-attribute-page",18),2&n){const e=t.oxw(3);t.Q6J("entity","member")("entityId",e.member.id)}}function Cx(n,r){if(1&n&&(t.YNc(0,bx,1,0,"mat-spinner",4),t.YNc(1,Tx,1,2,"app-one-entity-attribute-page",17)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function wx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_GROUP_ATT")," ")}function Ax(n,r){1&n&&t._UZ(0,"mat-spinner")}function Sx(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","group")}}function Ex(n,r){if(1&n&&(t.YNc(0,Ax,1,0,"mat-spinner",4),t.YNc(1,Sx,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function Dx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_RESOURCE_ATT")," ")}function Lx(n,r){1&n&&t._UZ(0,"mat-spinner")}function kx(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","resource")}}function Ix(n,r){if(1&n&&(t.YNc(0,Lx,1,0,"mat-spinner",4),t.YNc(1,kx,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function Ox(n,r){1&n&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab"),t.YNc(2,fx,2,3,"ng-template",8),t.YNc(3,xx,2,2,"ng-template",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,yx,2,3,"ng-template",8),t.YNc(6,Cx,2,2,"ng-template",9),t.qZA(),t.TgZ(7,"mat-tab"),t.YNc(8,wx,2,3,"ng-template",8),t.YNc(9,Ex,2,2,"ng-template",9),t.qZA(),t.TgZ(10,"mat-tab"),t.YNc(11,Dx,2,3,"ng-template",8),t.YNc(12,Ix,2,2,"ng-template",9),t.qZA()())}function Mx(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USER_DETAIL.ACCOUNTS.NO_VOS")))}let Nx=(()=>{class n{constructor(e,i,a,o){this.route=e,this.usersService=i,this.membersService=a,this.groupService=o,this.initLoading=!1,this.loading=!1,this.vos=[],this.selectedVo=null,this.member=null,this.groups=[]}ngOnInit(){this.initLoading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.usersService.getVosWhereUserIsMember(this.userId).subscribe(i=>{this.vos=i,this.initLoading=!1},()=>this.initLoading=!1)})}loadMember(e){this.loading=!0,this.selectedVo=e,this.membersService.getMemberByUser(this.selectedVo.id,this.userId).subscribe(i=>{this.membersService.getRichMemberWithAttributes(i.id).subscribe(a=>{this.member=a,this.groupService.getMemberRichGroupsWithAttributesByNames(this.member.id,[Cc.r.MEMBER_DEF_GROUP_EXPIRATION,Cc.r.MEMBER_GROUP_STATUS]).subscribe(o=>{this.groups=o,this.loading=!1},()=>this.loading=!1)},()=>this.loading=!1)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(H.Fv),t.Y36(H.uq),t.Y36(H.ff))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-accounts"]],decls:8,vars:7,consts:[[1,"page-title"],["class","ml-auto mr-auto",4,"ngIf"],[1,"d-flex"],["class","w-50",3,"vos","voSelected",4,"ngIf"],[4,"ngIf"],["alert_type","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"w-50",3,"vos","voSelected"],["matTabLabel",""],["matTabContent",""],[1,"mt-4","mb-4"],[1,"subtitle","mr-2"],[1,"member-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[3,"member","vo"],[1,"mt-4","subtitle"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable",4,"ngIf"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable"],[3,"entity","entityId",4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,dx,1,0,"mat-spinner",1),t.TgZ(4,"div",2),t.YNc(5,px,1,1,"perun-web-apps-vo-search-select",3),t.qZA(),t.YNc(6,Ox,13,0,"mat-tab-group",4),t.YNc(7,Mx,3,3,"perun-web-apps-alert",5)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.ACCOUNTS.TITLE")),t.xp6(2),t.Q6J("ngIf",i.initLoading),t.xp6(2),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!i.initLoading&&0===i.vos.length))},dependencies:[m.O5,p.yS,jt.SP,jt.uD,jt.uX,jt.Vc,tt.Ou,K.w,ox.W,lx.M,ga.YH,ga.QG,cx.Y,ux.t,hx.b,u.X$],styles:[".subtitle[_ngcontent-%COMP%]{font-size:1.2rem}"]}),n})(),Ac=(()=>{class n{transform(e){if(e)return e.split(".").pop()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"parseEventName",type:n,pure:!0}),n})();function Px(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.OBJECTS")," ")}function Fx(n,r){if(1&n&&t._UZ(0,"pre",9),2&n){const e=t.oxw();t.Q6J("innerHTML",e.syntaxHighlight(e.eventData),t.oJD)}}function Rx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.MESSAGE")," ")}function Bx(n,r){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.message)}}let Zx=(()=>{class n{constructor(e,i,a){this.dialogRef=e,this.data=i,this.clipboard=a,this.tabIndex=0,this.eventData={}}ngOnInit(){const e=this.data.message.event;this.actor=this.data.message.actor,this.createdAt=this.data.message.createdAt,e.message&&(this.message=e.message,delete e.message),e.name&&(this.title=e.name,delete e.name),this.eventData=e}tabChanged(e){this.tabIndex=e.index}copyObjects(){this.clipboard.copy(JSON.stringify(this.eventData,null,2))}copyMessage(){this.clipboard.copy(this.message)}syntaxHighlight(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(i){let a="number";return i.startsWith('"')?a=i.endsWith(":")?"key":"string":/true|false/.test(i)?a="boolean":i.includes("null")&&(a="null"),'<span class="'+a+'">'+i+"</span>"})}onClose(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(kn.TU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-message-detail-dialog"]],decls:26,vars:19,consts:[[1,"admin-theme"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-button","",3,"click"],[3,"innerHTML"],["data-cy","audit-message-text"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"parseEventName"),t.qZA(),t.TgZ(5,"div",2)(6,"div"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"mat-tab-group",3),t.NdJ("selectedTabChange",function(o){return i.tabChanged(o)}),t.TgZ(11,"mat-tab"),t.YNc(12,Px,2,3,"ng-template",4),t.YNc(13,Fx,1,1,"ng-template",5),t.qZA(),t.TgZ(14,"mat-tab"),t.YNc(15,Rx,2,3,"ng-template",4),t.YNc(16,Bx,2,1,"ng-template",5),t.qZA()()(),t.TgZ(17,"div",6)(18,"button",7),t.NdJ("click",function(){return i.onClose()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){return 0===i.tabIndex?i.copyObjects():i.copyMessage()}),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"mat-icon"),t._uU(25,"content_copy"),t.qZA()()()()),2&e){let a;t.xp6(2),t.hij(" ",t.lcZ(3,7,null!==(a=t.lcZ(4,9,i.title))&&void 0!==a?a:"DIALOGS.AUDIT_MESSAGE_DETAIL.TITLE")," "),t.xp6(5),t.HOy(" ",t.lcZ(8,11,"DIALOGS.AUDIT_MESSAGE_DETAIL.ACTOR"),": ",i.actor,", ",t.lcZ(9,13,"DIALOGS.AUDIT_MESSAGE_DETAIL.CREATED_AT"),": ",i.createdAt," "),t.xp6(12),t.hij(" ",t.lcZ(20,15,"DIALOGS.AUDIT_MESSAGE_DETAIL.CLOSE")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"DIALOGS.AUDIT_MESSAGE_DETAIL.COPY")," ")}},dependencies:[l.Hw,G.lW,jt.SP,jt.uD,jt.uX,jt.Vc,M.uh,M.xY,M.H8,u.X$,Ac],styles:[".key{color:brown}.string{color:green}.number{color:#ff8c00}.boolean{color:#00f}.null{color:#f0f}\n"],encapsulation:2}),n})();var Vx=s(98739),Gx=s(56451),Ux=s(62383);function zx(n,r){1&n&&(t.TgZ(0,"div",16),t._UZ(1,"mat-spinner",17),t.qZA())}function Hx(n,r){1&n&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ID")," "))}function Yx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Wx(n,r){1&n&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.TIMESTAMP")," "))}function Xx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseDate"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,!0)," ")}}function $x(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.EVENT_NAME")))}function Qx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseEventName"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.event.name)," ")}}function jx(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ACTOR")))}function Jx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.actor," ")}}function Kx(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.MESSAGE")))}function qx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.event.message," ")}}function ty(n,r){1&n&&t._UZ(0,"th",20)}function ey(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",19)(1,"button",21),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.viewDetails(o))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AUDIT_MESSAGES_LIST.VIEW_DETAIL")," "))}function ny(n,r){1&n&&t._UZ(0,"tr",22)}function iy(n,r){1&n&&t._UZ(0,"tr",23)}function ry(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_AUDIT_MESSAGES"),"\n"))}let ay=(()=>{class n{constructor(e,i,a){this.dialog=e,this.dynamicPaginatingService=i,this.tableConfigService=a,this.displayedColumns=["id","timestamp","name","actor","event.message","detail"],this.pageSizeOptions=fe.f7}static getExportDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"timestamp":return(0,m.p6)(e.createdAt,"d.M.y H.mm.ss","en");case"name":return e.event.name.split(".").pop();case"actor":return e.actor;case"event.message":return e.event.message;default:return""}}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.child.paginator.pageIndex=0),(0,Gx.T)(this.sort.sortChange,this.child.paginator.page).pipe((0,Ot.b)(()=>this.loadAuditMessagesPage())).subscribe()}ngOnInit(){this.dataSource=new Z.Hy(this.dynamicPaginatingService,null),this.dataSource.loadAuditMessages(this.tableConfigService.getTablePageSize(this.tableId),0,"DESCENDING")}ngOnChanges(){this.dataSource&&(this.child.paginator.pageIndex=0,this.loadAuditMessagesPage())}loadAuditMessagesPage(){this.dataSource.loadAuditMessages(this.child.paginator.pageSize,this.child.paginator.pageIndex,"asc"===this.sort.direction?"ASCENDING":"DESCENDING")}viewDetails(e){const i=(0,fe.kZ)(),a=JSON.parse(JSON.stringify(e));i.minWidth="700px",i.maxWidth="1000px",i.data={message:a},this.dialog.open(Zx,i)}exportDisplayedData(e){(0,fe.O6)((0,fe.Xn)(this.dataSource.getData(),this.displayedColumns.filter(i=>"detail"!==i),n.getExportDataForColumn),e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Z.ly),t.Y36(En.dB))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-messages-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(fe.l9,7),t.Gf(nn.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},inputs:{tableId:"tableId",refresh:"refresh",displayedColumns:"displayedColumns",searchString:"searchString"},features:[t._Bn([{provide:Vx.ye,useClass:Z.Be}]),t.TTD],decls:28,vars:16,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","pageSizeOptions","tableId","allowExportAll","exportDisplayedData"],["class","spinner-container",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","timestamp"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actor"],["matColumnDef","event.message"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],[1,"spinner-container"],[1,"ml-auto","mr-auto"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["data-cy","audit-message-detail-button","color","accent","mat-flat-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return i.exportDisplayedData(o)}),t.YNc(3,zx,2,0,"div",2),t.ALo(4,"async"),t.TgZ(5,"table",3),t.ynx(6,4),t.YNc(7,Hx,3,3,"th",5),t.YNc(8,Yx,2,1,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,Wx,3,3,"th",5),t.YNc(11,Xx,3,4,"td",6),t.BQk(),t.ynx(12,8),t.YNc(13,$x,3,3,"th",9),t.YNc(14,Qx,3,3,"td",6),t.BQk(),t.ynx(15,10),t.YNc(16,jx,3,3,"th",9),t.YNc(17,Jx,2,1,"td",6),t.BQk(),t.ynx(18,11),t.YNc(19,Kx,3,3,"th",9),t.YNc(20,qx,2,1,"td",6),t.BQk(),t.ynx(21,12),t.YNc(22,ty,1,0,"th",9),t.YNc(23,ey,4,3,"td",6),t.BQk(),t.YNc(24,ny,1,0,"tr",13),t.YNc(25,iy,1,0,"tr",14),t.qZA()()(),t.YNc(26,ry,3,3,"perun-web-apps-alert",15),t.ALo(27,"async")),2&e&&(t.Q6J("hidden",0===i.dataSource.allObjectCount&&!1===t.lcZ(1,10,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataLength",i.dataSource.allObjectCount)("pageSizeOptions",i.pageSizeOptions)("tableId",i.tableId)("allowExportAll",!1),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,12,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.allObjectCount&&!1===t.lcZ(27,14,i.dataSource.loading$)))},dependencies:[m.O5,G.lW,nn.YE,nn.nU,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,tt.Ou,K.w,z.l,m.Ov,u.X$,Ux.M,Ac]}),n})(),sy=(()=>{class n{constructor(){this.tableId=En.yW,this.refresh=!1}refreshTable(){this.refresh=!this.refresh}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-audit-log"]],decls:5,vars:5,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"refresh","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t._UZ(4,"app-audit-messages-list",2)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,3,"ADMIN.AUDIT_LOG.TITLE")),t.xp6(3),t.Q6J("refresh",i.refresh)("tableId",i.tableId))},dependencies:[ay,gn.t,u.X$]}),n})();var oy=s(44850);let ly=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-edit-enforce-consents-dialog"]],decls:26,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-2","mb-2"],["alert_type","warn"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",1)(6,"p"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"mat-divider"),t.TgZ(11,"p",2),t._uU(12),t.qZA(),t._UZ(13,"mat-divider"),t.TgZ(14,"perun-web-apps-alert",3),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",6),t.NdJ("click",function(){return i.onSubmit()}),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA()()()),2&e&&(t.Tol(i.data.theme),t.xp6(2),t.hij(" ",i.data.enforceConsents?t.lcZ(3,9,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_TITLE"):t.lcZ(4,11,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_TITLE")," "),t.xp6(5),t.hij(" ",i.data.enforceConsents?t.lcZ(8,13,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_DESCRIPTION"):t.lcZ(9,15,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_DESCRIPTION")," "),t.xp6(5),t.Oqu(i.data.consentHubName),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(16,17,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BOLD_DESCRIPTION"):t.lcZ(17,19,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BOLD_DESCRIPTION")," "),t.xp6(5),t.hij(" ",t.lcZ(21,21,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.CANCEL_BUTTON")," "),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(24,23,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BUTTON"):t.lcZ(25,25,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BUTTON")," "))},dependencies:[G.lW,M.uh,M.xY,M.H8,oy.d,K.w,u.X$]}),n})();function cy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",17)(1,"mat-checkbox",18),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(a?o.masterToggle():null)}),t.ALo(2,"translate"),t.ALo(3,"masterCheckboxLabel"),t.qZA()()}if(2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("aria-label",t.lcZ(2,3,t.lcZ(3,5,e.all)))("checked",i.selection.hasValue()&&e.all)("indeterminate",i.selection.hasValue()&&!e.all)}}const uy=function(n){return{name:n}};function hy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",19)(1,"mat-checkbox",20),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.ALo(2,"translate"),t.ALo(3,"checkboxLabel"),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("aria-label",t.xi3(2,2,t.lcZ(3,5,i.selection.isSelected(e)),t.VKq(7,uy,e.name)))("checked",i.selection.isSelected(e))}}function dy(n,r){1&n&&(t.ynx(0,14),t.YNc(1,cy,4,7,"th",15),t.YNc(2,hy,4,9,"td",16),t.BQk())}function py(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ID")," "))}function fy(n,r){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function my(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NAME")," "))}function gy(n,r){if(1&n&&(t.TgZ(0,"td",23),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&n){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.name),"-name-td"),t.xp6(2),t.hij(" ",e.name," ")}}function _y(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ENFORCE_CONSENTS")," "))}function vy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"mat-slide-toggle",24),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.changeEnforceFlag(v,a))}),t.qZA()()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("checked",e.enforceConsents)}}function xy(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.FACILITIES")," "))}function yy(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",26),t._uU(3),t.qZA(),t._UZ(4,"br"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" #",e.id,"")}}function by(n,r){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,yy,5,2,"span",25),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.facilities)}}function Ty(n,r){1&n&&t._UZ(0,"tr",27)}function Cy(n,r){1&n&&t._UZ(0,"tr",28)}function wy(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_CONSENT_HUBS"),"\n"))}function Ay(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_FILTER_RESULTS"),"\n"))}const Sy=function(n){return{all:n}};let Ey=(()=>{class n{constructor(e,i,a,o,v){this.tableCheckbox=e,this.dialog=i,this.notificator=a,this.translate=o,this.consentsManager=v,this.filterValue="",this.displayedColumns=["select","id","name","enforceConsents","facilities"],this.selection=new B.Ov(!0,[]),this.exporting=!1,this.pageSizeOptions=fe.f7}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"name":return e.name;case"enforceConsents":return e.enforceConsents?"true":"false";case"facilities":{let a="";return e.facilities.forEach(o=>a+=o.name+" #"+String(o.id)+";"),a.slice(0,-1)}default:return""}}ngOnChanges(){this.dataSource=new R.by(this.consentHubs),this.setDataSource()}exportAllData(e){(0,fe.O6)((0,fe.Xn)(this.dataSource.filteredData,this.displayedColumns,n.getDataForColumn),e)}exportDisplayedData(e){const i=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=i+this.dataSource.paginator.pageSize;(0,fe.O6)((0,fe.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(i,a),this.displayedColumns,n.getDataForColumn),e)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(e,i)=>(0,fe.Sd)(e,i,this.displayedColumns,n.getDataForColumn),this.dataSource.sortData=(e,i)=>(0,fe.pR)(e,i,n.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}changeEnforceFlag(e,i){i.source.checked=e.enforceConsents;const a=(0,fe.kZ)();a.width="550px",a.data={theme:"admin-theme",enforceConsents:e.enforceConsents,consentHubName:e.name},this.dialog.open(ly,a).afterClosed().subscribe(v=>{v&&(e.enforceConsents=!e.enforceConsents,this.consentsManager.updateConsentHub({consentHub:e}).subscribe(T=>{i.source.checked=T.enforceConsents,e.enforceConsents=T.enforceConsents,this.translate.get("SHARED.COMPONENTS.CONSENT_HUBS_LIST.CHANGE_ENFORCE_CONSENTS_SUCCESS").subscribe(N=>{this.notificator.showSuccess(N)})},()=>e.enforceConsents=!e.enforceConsents))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.UA),t.Y36(M.uw),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.WY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-consent-hubs-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(fe.l9,7),t.Gf(nn.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{consentHubs:"consentHubs",filterValue:"filterValue",displayedColumns:"displayedColumns",tableId:"tableId",selection:"selection"},features:[t.TTD],decls:21,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enforceConsents"],["matColumnDef","facilities"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],[3,"checked","change"],[4,"ngFor","ngForOf"],[1,"text-muted"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return i.exportDisplayedData(o)})("exportAllData",function(o){return i.exportAllData(o)}),t.TgZ(2,"table",2),t.YNc(3,dy,3,0,"ng-container",3),t.ALo(4,"isAllSelected"),t.ynx(5,4),t.YNc(6,py,3,3,"th",5),t.YNc(7,fy,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,my,3,3,"th",5),t.YNc(10,gy,3,4,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,_y,3,3,"th",5),t.YNc(13,vy,2,1,"td",8),t.BQk(),t.ynx(14,10),t.YNc(15,xy,3,3,"th",5),t.YNc(16,by,2,1,"td",8),t.BQk(),t.YNc(17,Ty,1,0,"tr",11),t.YNc(18,Cy,1,0,"tr",12),t.qZA()()(),t.YNc(19,wy,3,3,"perun-web-apps-alert",13),t.YNc(20,Ay,3,3,"perun-web-apps-alert",13)),2&e&&(t.Q6J("hidden",0===i.consentHubs.length||0===i.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",i.tableId)("dataLength",i.dataSource.filteredData.length)("pageSizeOptions",i.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(13,Sy,t.xi3(4,10,i.dataSource,i.selection.selected.length))),t.xp6(14),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.consentHubs.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.consentHubs.length))},dependencies:[m.sg,m.O5,nn.YE,nn.nU,R.BZ,R.fO,R.as,R.w1,R.Dz,R.nj,R.ge,R.ev,R.XQ,R.Gk,Fn.oG,Tt.Rr,K.w,z.l,u.X$,Ye.R,X.I,lt.G,A.r]}),n})();function Dy(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.CONSENT_HUBS.GLOBAL_DISABLED")," "))}function Ly(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.evaluateConsents())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.globalForceConsents||0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.CONSENT_HUBS.EVALUATE_CONSENTS")," ")}}function ky(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function Iy(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-consent-hubs-list",11),2&n){const e=t.oxw();t.Q6J("consentHubs",e.consentHubs)("selection",e.selection)("filterValue",e.filterValue)("tableId",e.tableId)}}let Oy=(()=>{class n{constructor(e,i,a,o,v,T){this.consentsManager=e,this.authResolver=i,this.notificator=a,this.translate=o,this.store=v,this.dialog=T,this.loading=!1,this.tableId=En.HE,this.selection=new B.Ov(!0,[]),this.filterValue="",this.consentHubs=[]}ngOnInit(){this.globalForceConsents=this.store.getProperty("enforce_consents"),this.refreshTable()}applyFilter(e){this.filterValue=e}refreshTable(){this.loading=!0,this.consentsManager.getAllConsentHubs().subscribe(e=>{this.consentHubs=e,this.loading=!1})}evaluateConsents(){const e=(0,fe.kZ)();e.width="500px",e.data={title:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_TITLE"),theme:"admin-theme",description:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_DESCRIPTION"),items:this.selection.selected.map(a=>a.name),type:"confirmation",showAsk:!1},this.dialog.open(ma.Ts,e).afterClosed().subscribe(a=>{a&&this.evaluateConsentsForConsentHub(0)})}evaluateConsentsForConsentHub(e){if(e===this.selection.selected.length)return this.notificator.showSuccess(this.translate.instant("ADMIN.CONSENT_HUBS.EVALUATION_FINISH")),void this.selection.clear();this.consentsManager.evaluateConsentsForConsentHub(this.selection.selected[e].id).subscribe(()=>{this.evaluateConsentsForConsentHub(++e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.WY),t.Y36(Z.x4),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Z.d6),t.Y36(M.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-admin-consent-hubs"]],decls:12,vars:12,consts:[[1,"page-subtitle"],["alert_type","warn",4,"ngIf"],[3,"refresh"],[3,"matTooltipDisabled","matTooltip"],["color","accent","class","action-button mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"consentHubs","selection","filterValue","tableId",4,"ngIf"],["alert_type","warn"],["color","accent","mat-flat-button","",1,"action-button","mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"consentHubs","selection","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Dy,3,3,"perun-web-apps-alert",1),t.TgZ(5,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(6,"span",3),t.ALo(7,"translate"),t.YNc(8,Ly,3,4,"button",4),t.qZA(),t.TgZ(9,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(10,ky,1,0,"mat-spinner",6),t.YNc(11,Iy,1,4,"app-perun-web-apps-consent-hubs-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,8,"ADMIN.CONSENT_HUBS.TITLE")),t.xp6(2),t.Q6J("ngIf",!i.globalForceConsents),t.xp6(2),t.s9C("matTooltip",t.lcZ(7,10,"ADMIN.CONSENT_HUBS.TOOLTIP")),t.Q6J("matTooltipDisabled",i.globalForceConsents),t.xp6(2),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.CONSENT_HUBS.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,tt.Ou,sn.gM,Ey,K.w,gn.t,In.L,u.X$]}),n})();var My=s(57788),zs=s(71992),Ny=s(51403);const Py=[{path:"",component:C,canActivateChild:[zs.a],children:[{path:"",component:I,data:{animation:"AdminOverviewPage"}},{path:"attributes",component:b,data:{animation:"AdminAttributesPage"}},{path:"users",component:ev.t,data:{animation:"AdminUsersPage"}},{path:"owners",component:nx,data:{animation:"AdminOwnersPage"}},{path:"services",component:Nv.F,data:{animation:"AdminServicesPage"}},{path:"audit_log",component:sy,data:{animation:"AdminAuditLogPage"}},{path:"visualizer",component:k,children:[{path:"",component:ht,data:{animation:"VisualizerOverviewPage"}},{path:"attrDependencies",component:it,data:{animation:"VisualizerAttrModulesPage"}},{path:"userDestinationRelationship",component:er,data:{animation:"UserDestinationRelationshipPage"}},{path:"userDestinationRelationship/graph",component:tv,data:{animation:"UserDestinationGraphPage"}}]},{path:"ext_sources",component:bv,data:{animation:"AdminExtSourcesPage"}},{path:"consent_hubs",component:Oy,data:{animation:"AdminConsentHubsPage"}},{path:"searcher",component:My.g,data:{animation:"AdminSearcherPage"}}]},{path:"users/:userId",component:dv,canActivateChild:[zs.a],children:[{path:"",component:pv.Z,data:{animation:"UserOverviewPage"}},{path:"accounts",component:Nx,data:{animation:"UserAccountsPage"}},{path:"attributes",component:gv.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:fv.j,data:{animation:"UserOrganizationsPage",showPrincipal:!1}},{path:"groups",component:mv.u,data:{animation:"UserGroupsPage",showPrincipal:!1}},{path:"identities",component:Mv,data:{animation:"UserIdentitiesPage"}},{path:"facilities",component:sx,data:{animation:"UserFacilitiesPage"}},{path:"resources",component:Zv,data:{animation:"UserRoles"}},{path:"identities/:identityId",component:Wv,data:{animation:"UserIdentityDetailPage"}},{path:"roles",component:Tv.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:Cv.R,data:{animation:"UserServiceIdentities"}},{path:"associated-users",component:D0.d,data:{animation:"AssociatedUsersPage"}},{path:"bans",component:Ny.Q,data:{animation:"UserBansPage"}}]},{path:"services/:serviceId",component:e0,canActivateChild:[zs.a],children:[{path:"",component:n0,data:{animation:"ServiceOverviewPage"}},{path:"required-attributes",component:E0,data:{animation:"ServiceRequiredAttributesPage"}},{path:"destinations",component:R0,data:{animation:"ServiceDestinationsPage"}}]}];let Fy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(Py),p.Bz]}),n})();var Ry=s(14264),By=s(63189),Zy=s(38338);let Vy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Fp,z_,m.ez,Fy,Ry.m,By.r,Zi.ez,Nt.d4,Zy.UsersModule]}),n})()},70242:(w,D,s)=>{"use strict";s.d(D,{q:()=>ie});var c=s(96308),x=s(95017),_=s(30671),m=s(9244),p=s(69723),t=s(94650),d=s(36895),l=s(97392),h=s(56709),f=s(10266),u=s(98380),g=s(18750),C=s(89383),L=s(64597),I=s(9185),B=s(8231),M=s(14849);function R(Mt,te){if(1&Mt){const jt=t.EpF();t.TgZ(0,"th",22)(1,"mat-checkbox",23),t.NdJ("change",function(At){t.CHM(jt);const Ht=t.oxw(2);return t.KtG(At?Ht.masterToggle():null)}),t.ALo(2,"translate"),t.ALo(3,"masterCheckboxLabel"),t.qZA()()}if(2&Mt){const jt=t.oxw().ngIf,ae=t.oxw();t.xp6(1),t.Q6J("aria-label",t.lcZ(2,3,t.lcZ(3,5,jt.all)))("checked",ae.selection.hasValue()&&jt.all)("indeterminate",ae.selection.hasValue()&&!jt.all)}}const Z=function(Mt){return{name:Mt}};function H(Mt,te){if(1&Mt){const jt=t.EpF();t.TgZ(0,"td",24)(1,"mat-checkbox",25),t.NdJ("change",function(At){const Zt=t.CHM(jt).$implicit,Kt=t.oxw(2);return t.KtG(At?Kt.selection.toggle(Zt):null)})("click",function(At){return At.stopPropagation()}),t.ALo(2,"translate"),t.ALo(3,"checkboxLabel"),t.qZA()()}if(2&Mt){const jt=te.$implicit,ae=t.oxw(2);t.xp6(1),t.Q6J("aria-label",t.xi3(2,2,t.lcZ(3,5,ae.selection.isSelected(jt)),t.VKq(7,Z,jt.destination)))("checked",ae.selection.isSelected(jt))}}function G(Mt,te){1&Mt&&(t.ynx(0,19),t.YNc(1,R,4,7,"th",20),t.YNc(2,H,4,9,"td",21),t.BQk())}function tt(Mt,te){1&Mt&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION_ID")," "))}function K(Mt,te){if(1&Mt&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&Mt){const jt=te.$implicit;t.xp6(1),t.hij(" ",jt.id," ")}}function st(Mt,te){1&Mt&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.SERVICE")," "))}function j(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&Mt){const jt=te.$implicit;t.xp6(1),t.Oqu(jt.service.name)}}function W(Mt,te){1&Mt&&t._UZ(0,"th",29)}function et(Mt,te){1&Mt&&(t.TgZ(0,"mat-icon",31),t.ALo(1,"translate"),t._uU(2," warning "),t.qZA()),2&Mt&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.WARN"))}function at(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t.YNc(1,et,3,3,"mat-icon",30),t.qZA()),2&Mt){const jt=te.$implicit,ae=t.oxw();t.xp6(1),t.Q6J("ngIf",!ae.services.has(jt.service.id))}}function Y(Mt,te){1&Mt&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.FACILITY")," "))}function nt(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&Mt){const jt=te.$implicit;t.xp6(1),t.Oqu(jt.facility.name)}}function rt(Mt,te){1&Mt&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION")," "))}function q(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&Mt){const jt=te.$implicit;t.uIk("data-cy",t.lcZ(1,2,jt.destination)),t.xp6(2),t.hij(" ",jt.destination," ")}}function F(Mt,te){1&Mt&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.TYPE")," "))}function E(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&Mt){const jt=te.$implicit;t.xp6(1),t.Oqu(jt.type.toUpperCase())}}function ut(Mt,te){1&Mt&&t._UZ(0,"th",29)}function ft(Mt,te){1&Mt&&(t.TgZ(0,"mat-icon",33),t.ALo(1,"translate"),t._uU(2," check_circle_outline "),t.qZA()),2&Mt&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.ALLOWED"))}function Dt(Mt,te){1&Mt&&(t.TgZ(0,"mat-icon",33),t.ALo(1,"translate"),t._uU(2," block "),t.qZA()),2&Mt&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.BLOCKED"))}function St(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t.YNc(1,ft,3,3,"mat-icon",32),t.YNc(2,Dt,3,3,"mat-icon",32),t.qZA()),2&Mt){const jt=te.$implicit;t.xp6(1),t.Q6J("ngIf",!jt.blocked),t.xp6(1),t.Q6J("ngIf",jt.blocked)}}function Qt(Mt,te){1&Mt&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.PROPAGATION_TYPE")," "))}function pe(Mt,te){if(1&Mt&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&Mt){const jt=te.$implicit;t.xp6(1),t.Oqu(jt.propagationType)}}function wt(Mt,te){1&Mt&&t._UZ(0,"tr",34)}function yt(Mt,te){1&Mt&&t._UZ(0,"tr",35)}function Nt(Mt,te){1&Mt&&(t.TgZ(0,"perun-web-apps-alert",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}function zt(Mt,te){1&Mt&&(t.TgZ(0,"perun-web-apps-alert",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Mt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.NO_DESTINATIONS"),"\n"))}const de=function(Mt){return{all:Mt}};let ie=(()=>{class Mt{constructor(jt,ae){this.authResolver=jt,this.tableCheckbox=ae,this.destinations=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.pageSizeOptions=m.f7}set matSort(jt){this.sort=jt,this.setDataSource()}static getDataForColumn(jt,ae){switch(ae){case"destinationId":return jt.id.toString();case"service":return jt.service.name;case"facility":return jt.facility.name;case"destination":return jt.destination;case"type":return jt.type;case"status":return jt.blocked?"blocked":"allowed";case"propagationType":return jt.propagationType;default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(jt=>"destinationId"!==jt)),this.dataSource=new _.by(this.destinations),this.setDataSource(),this.dataSource.filter=this.filterValue.toLowerCase()}exportAllData(jt){(0,m.O6)((0,m.Xn)(this.dataSource.filteredData,this.displayedColumns,Mt.getDataForColumn),jt)}exportDisplayedData(jt){const ae=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,At=ae+this.dataSource.paginator.pageSize;(0,m.O6)((0,m.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(ae,At),this.displayedColumns,Mt.getDataForColumn),jt)}setDataSource(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(jt,ae)=>(0,m.Sd)(jt,ae,this.displayedColumns,Mt.getDataForColumn),this.dataSource.sortData=(jt,ae)=>(0,m.pR)(jt,ae,Mt.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}}return Mt.\u0275fac=function(jt){return new(jt||Mt)(t.Y36(p.x4),t.Y36(p.UA))},Mt.\u0275cmp=t.Xpm({type:Mt,selectors:[["app-perun-web-apps-destination-list"]],viewQuery:function(jt,ae){if(1&jt&&(t.Gf(m.l9,7),t.Gf(c.YE,7)),2&jt){let At;t.iGM(At=t.CRH())&&(ae.child=At.first),t.iGM(At=t.CRH())&&(ae.matSort=At.first)}},inputs:{destinations:"destinations",selection:"selection",filterValue:"filterValue",tableId:"tableId",displayedColumns:"displayedColumns",services:"services"},features:[t.TTD],decls:33,vars:15,consts:[[1,"card","mt-3",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","destinationId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","service"],["mat-cell","",4,"matCellDef"],["matColumnDef","warn"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","facility"],["matColumnDef","destination"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","propagationType"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],["class","warn","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"warn",3,"matTooltip"],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(jt,ae){1&jt&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(Ht){return ae.exportDisplayedData(Ht)})("exportAllData",function(Ht){return ae.exportAllData(Ht)}),t.TgZ(2,"table",2),t.YNc(3,G,3,0,"ng-container",3),t.ALo(4,"isAllSelected"),t.ynx(5,4),t.YNc(6,tt,3,3,"th",5),t.YNc(7,K,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,st,3,3,"th",5),t.YNc(10,j,2,1,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,W,1,0,"th",10),t.YNc(13,at,2,1,"td",8),t.BQk(),t.ynx(14,11),t.YNc(15,Y,3,3,"th",5),t.YNc(16,nt,2,1,"td",8),t.BQk(),t.ynx(17,12),t.YNc(18,rt,3,3,"th",5),t.YNc(19,q,3,4,"td",8),t.BQk(),t.ynx(20,13),t.YNc(21,F,3,3,"th",5),t.YNc(22,E,2,1,"td",8),t.BQk(),t.ynx(23,14),t.YNc(24,ut,1,0,"th",10),t.YNc(25,St,3,2,"td",8),t.BQk(),t.ynx(26,15),t.YNc(27,Qt,3,3,"th",5),t.YNc(28,pe,2,1,"td",8),t.BQk(),t.YNc(29,wt,1,0,"tr",16),t.YNc(30,yt,1,0,"tr",17),t.qZA()()(),t.YNc(31,Nt,3,3,"perun-web-apps-alert",18),t.YNc(32,zt,3,3,"perun-web-apps-alert",18)),2&jt&&(t.Q6J("hidden",0===ae.dataSource.filteredData.length||0===ae.destinations.length),t.xp6(1),t.Q6J("pageSizeOptions",ae.pageSizeOptions)("dataLength",ae.dataSource.filteredData.length)("tableId",ae.tableId),t.xp6(1),t.Q6J("dataSource",ae.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(13,de,t.xi3(4,10,ae.dataSource,ae.selection.selected.length))),t.xp6(26),t.Q6J("matHeaderRowDef",ae.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",ae.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===ae.dataSource.filteredData.length&&0!==ae.destinations.length),t.xp6(1),t.Q6J("ngIf",0===ae.destinations.length))},dependencies:[d.O5,l.Hw,c.YE,c.nU,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,h.oG,f.gM,u.w,g.l,C.X$,L.R,I.I,B.G,M.r],styles:[".warn[_ngcontent-%COMP%]{color:#ebe134}"]}),Mt})()},89466:(w,D,s)=>{"use strict";s.d(D,{u:()=>I});var c=s(32105),x=s(65412),_=s(30671),m=s(69723),p=s(94650),t=s(89383),d=s(36895),l=s(4859),h=s(51572),f=s(98380),u=s(70242);function g(B,M){1&B&&p._UZ(0,"mat-spinner",6)}function C(B,M){if(1&B&&p._UZ(0,"app-perun-web-apps-destination-list",11),2&B){const R=p.oxw(2);p.Q6J("destinations",R.destinations)("displayedColumns",R.displayedColumns)}}function L(B,M){if(1&B&&(p.TgZ(0,"div",7)(1,"perun-web-apps-alert",8),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"div",9),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.YNc(10,C,1,2,"app-perun-web-apps-destination-list",10),p.qZA()),2&B){const R=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,4,"DIALOGS.REMOVE_DESTINATIONS.WARNING")),p.xp6(3),p.Oqu(p.lcZ(6,6,"DIALOGS.REMOVE_DESTINATIONS.DESCRIPTION")),p.xp6(3),p.hij(" ",p.lcZ(9,8,"DIALOGS.REMOVE_DESTINATIONS.ASK")," "),p.xp6(2),p.Q6J("ngIf",!R.loading)}}let I=(()=>{class B{constructor(R,Z,H,G,tt){this.dialogRef=R,this.data=Z,this.notificator=H,this.translate=G,this.serviceManager=tt,this.displayedColumns=[],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.destinations=this.data.destinations,this.displayedColumns="admin-theme"===this.theme?["destinationId","facility","destination","type","propagationType"]:["destinationId","service","destination","type","propagationType"],this.dataSource=new _.by(this.data.destinations)}onCancel(){this.dialogRef.close(!1)}deleteDestinations(){if(0===this.destinations.length)return this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_DESTINATIONS.SUCCESS")),void this.dialogRef.close(!0);const R=this.destinations.pop();this.serviceManager.removeDestination(R.service.id,R.facility.id,R.destination,R.type).subscribe(()=>{this.deleteDestinations()},()=>this.loading=!1)}onConfirm(){this.loading=!0,this.deleteDestinations()}}return B.\u0275fac=function(R){return new(R||B)(p.Y36(x.so),p.Y36(x.WI),p.Y36(m.V6),p.Y36(t.sK),p.Y36(c.KK))},B.\u0275cmp=p.Xpm({type:B,selectors:[["app-perun-web-apps-remove-destination-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","warn"],[1,"font-weight-bold"],[3,"destinations","displayedColumns",4,"ngIf"],[3,"destinations","displayedColumns"]],template:function(R,Z){1&R&&(p.TgZ(0,"h1",0),p._uU(1),p.ALo(2,"translate"),p.qZA(),p.TgZ(3,"div"),p.YNc(4,g,1,0,"mat-spinner",1),p.YNc(5,L,11,10,"div",2),p.TgZ(6,"div",3)(7,"button",4),p.NdJ("click",function(){return Z.onCancel()}),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"button",5),p.NdJ("click",function(){return Z.onConfirm()}),p._uU(11),p.ALo(12,"translate"),p.qZA()()()),2&R&&(p.xp6(1),p.Oqu(p.lcZ(2,9,"DIALOGS.REMOVE_DESTINATIONS.TITLE")),p.xp6(2),p.Tol(Z.theme),p.xp6(1),p.Q6J("ngIf",Z.loading),p.xp6(1),p.Q6J("ngIf",!Z.loading),p.xp6(3),p.hij(" ",p.lcZ(9,11,"DIALOGS.REMOVE_DESTINATIONS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",Z.loading),p.xp6(1),p.hij(" ",p.lcZ(12,13,"DIALOGS.REMOVE_DESTINATIONS.CONFIRM")," "))},dependencies:[d.O5,l.lW,x.uh,x.xY,x.H8,h.Ou,f.w,u.q,t.X$]}),B})()},23256:(w,D,s)=>{"use strict";s.d(D,{Q:()=>q});var c=s(96308),x=s(95017),_=s(30671),m=s(9244),p=s(69723),t=s(94650),d=s(36895),l=s(56709),h=s(98380),f=s(18750),u=s(89383),g=s(9185),C=s(8231),L=s(14849);function I(F,E){if(1&F){const ut=t.EpF();t.TgZ(0,"th",17)(1,"mat-checkbox",18),t.NdJ("change",function(Dt){t.CHM(ut);const St=t.oxw(2);return t.KtG(Dt?St.masterToggle():null)}),t.ALo(2,"translate"),t.ALo(3,"masterCheckboxLabel"),t.qZA()()}if(2&F){const ut=t.oxw().ngIf,ft=t.oxw();t.xp6(1),t.Q6J("aria-label",t.lcZ(2,3,t.lcZ(3,5,ut.all)))("checked",ft.selection.hasValue()&&ut.all)("indeterminate",ft.selection.hasValue()&&!ut.all)}}const B=function(F){return{name:F}};function M(F,E){if(1&F){const ut=t.EpF();t.TgZ(0,"td",19)(1,"mat-checkbox",20),t.NdJ("change",function(Dt){const Qt=t.CHM(ut).$implicit,pe=t.oxw(2);return t.KtG(Dt?pe.selection.toggle(Qt):null)})("click",function(Dt){return Dt.stopPropagation()}),t.ALo(2,"translate"),t.ALo(3,"checkboxLabel"),t.qZA()()}if(2&F){const ut=E.$implicit,ft=t.oxw(2);t.xp6(1),t.Q6J("aria-label",t.xi3(2,2,t.lcZ(3,5,ft.selection.isSelected(ut)),t.VKq(7,B,ut.name)))("checked",ft.selection.isSelected(ut))}}function R(F,E){1&F&&(t.ynx(0,14),t.YNc(1,I,4,7,"th",15),t.YNc(2,M,4,9,"td",16),t.BQk())}function Z(F,E){1&F&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&F&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.ID")," "))}function H(F,E){if(1&F&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&F){const ut=E.$implicit;t.xp6(1),t.hij(" ",ut.id," ")}}function G(F,E){1&F&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&F&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NAME")," "))}function tt(F,E){if(1&F&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&F){const ut=E.$implicit;t.uIk("data-cy",ut.name),t.xp6(1),t.Oqu(ut.name)}}function K(F,E){1&F&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&F&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.CONTACT")," "))}function st(F,E){if(1&F&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&F){const ut=E.$implicit;t.xp6(1),t.Oqu(ut.contact)}}function j(F,E){1&F&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&F&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.TYPE")," "))}function W(F,E){if(1&F&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&F){const ut=E.$implicit;t.xp6(1),t.Oqu(ut.type)}}function et(F,E){1&F&&t._UZ(0,"tr",24)}function at(F,E){1&F&&t._UZ(0,"tr",25)}function Y(F,E){1&F&&(t.TgZ(0,"perun-web-apps-alert",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&F&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_OWNERS"),"\n"))}function nt(F,E){1&F&&(t.TgZ(0,"perun-web-apps-alert",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&F&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_FILTER_OWNERS"),"\n"))}const rt=function(F){return{all:F}};let q=(()=>{class F{constructor(ut,ft){this.authResolver=ut,this.tableCheckbox=ft,this.owners=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.displayedColumns=["select","id","name","contact","type"],this.pageSizeOptions=m.f7}set matSort(ut){this.sort=ut,this.setDataSource()}static getDataForColumn(ut,ft){switch(ft){case"id":return ut.id.toString();case"name":return ut.name;case"contact":return ut.contact;case"type":return ut.type;default:return""}}ngAfterViewInit(){this.setDataSource()}exportAllData(ut){(0,m.O6)((0,m.Xn)(this.dataSource.filteredData,this.displayedColumns,F.getDataForColumn),ut)}exportDisplayedData(ut){const ft=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,Dt=ft+this.dataSource.paginator.pageSize;(0,m.O6)((0,m.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(ft,Dt),this.displayedColumns,F.getDataForColumn),ut)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(ut,ft)=>(0,m.Sd)(ut,ft,this.displayedColumns,F.getDataForColumn),this.dataSource.sortData=(ut,ft)=>(0,m.pR)(ut,ft,F.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(ut=>"id"!==ut)),this.dataSource=new _.by(this.owners),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}}return F.\u0275fac=function(ut){return new(ut||F)(t.Y36(p.x4),t.Y36(p.UA))},F.\u0275cmp=t.Xpm({type:F,selectors:[["perun-web-apps-owners-list"]],viewQuery:function(ut,ft){if(1&ut&&(t.Gf(m.l9,7),t.Gf(c.YE,7)),2&ut){let Dt;t.iGM(Dt=t.CRH())&&(ft.child=Dt.first),t.iGM(Dt=t.CRH())&&(ft.matSort=Dt.first)}},inputs:{owners:"owners",selection:"selection",tableId:"tableId",filterValue:"filterValue",displayedColumns:"displayedColumns"},features:[t.TTD],decls:21,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","contact"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(ut,ft){1&ut&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(St){return ft.exportDisplayedData(St)})("exportAllData",function(St){return ft.exportAllData(St)}),t.TgZ(2,"table",2),t.YNc(3,R,3,0,"ng-container",3),t.ALo(4,"isAllSelected"),t.ynx(5,4),t.YNc(6,Z,3,3,"th",5),t.YNc(7,H,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,G,3,3,"th",5),t.YNc(10,tt,2,2,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,K,3,3,"th",5),t.YNc(13,st,2,1,"td",8),t.BQk(),t.ynx(14,10),t.YNc(15,j,3,3,"th",5),t.YNc(16,W,2,1,"td",8),t.BQk(),t.YNc(17,et,1,0,"tr",11),t.YNc(18,at,1,0,"tr",12),t.qZA()()(),t.YNc(19,Y,3,3,"perun-web-apps-alert",13),t.YNc(20,nt,3,3,"perun-web-apps-alert",13)),2&ut&&(t.Q6J("hidden",0===ft.owners.length||0===ft.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",ft.tableId)("dataLength",ft.dataSource.filteredData.length)("pageSizeOptions",ft.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",ft.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(13,rt,t.xi3(4,10,ft.dataSource,ft.selection.selected.length))),t.xp6(14),t.Q6J("matHeaderRowDef",ft.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",ft.displayedColumns),t.xp6(1),t.Q6J("ngIf",!ft.owners.length),t.xp6(1),t.Q6J("ngIf",!ft.dataSource.filteredData.length&&ft.owners.length))},dependencies:[d.O5,l.oG,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,c.YE,c.nU,h.w,f.l,u.X$,g.I,C.G,L.r]}),F})()},16087:(w,D,s)=>{"use strict";const c=s(34315),x=s(52872),_=s(60929);w.exports=function m(d,l){switch(x(d)){case"object":return function p(d,l){if("function"==typeof l)return l(d);if(l||_(d)){const h=new d.constructor;for(let f in d)h[f]=m(d[f],l);return h}return d}(d,l);case"array":return function t(d,l){const h=new d.constructor(d.length);for(let f=0;f<d.length;f++)h[f]=m(d[f],l);return h}(d,l);default:return c(d)}}},60929:(w,D,s)=>{"use strict";var c=s(50623);function x(_){return!0===c(_)&&"[object Object]"===Object.prototype.toString.call(_)}w.exports=function(m){var p,t;return!(!1===x(m)||(p=m.constructor,"function"!=typeof p)||(t=p.prototype,!1===x(t))||!1===t.hasOwnProperty("isPrototypeOf"))}},52786:(w,D,s)=>{"use strict";s.d(D,{B8:()=>K,Il:()=>x,J5:()=>m,SU:()=>tt,Ss:()=>st,Ym:()=>nt,ZP:()=>Z,xV:()=>_});var c=s(68884);function x(){}var _=.7,m=1/_,p="\\s*([+-]?\\d+)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),f=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),u=new RegExp("^rgba\\("+[p,p,p,t]+"\\)$"),g=new RegExp("^rgba\\("+[d,d,d,t]+"\\)$"),C=new RegExp("^hsl\\("+[t,d,d]+"\\)$"),L=new RegExp("^hsla\\("+[t,d,d,t]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function B(){return this.rgb().formatHex()}function R(){return this.rgb().formatRgb()}function Z(F){var E,ut;return F=(F+"").trim().toLowerCase(),(E=l.exec(F))?(ut=E[1].length,E=parseInt(E[1],16),6===ut?H(E):3===ut?new st(E>>8&15|E>>4&240,E>>4&15|240&E,(15&E)<<4|15&E,1):8===ut?G(E>>24&255,E>>16&255,E>>8&255,(255&E)/255):4===ut?G(E>>12&15|E>>8&240,E>>8&15|E>>4&240,E>>4&15|240&E,((15&E)<<4|15&E)/255):null):(E=h.exec(F))?new st(E[1],E[2],E[3],1):(E=f.exec(F))?new st(255*E[1]/100,255*E[2]/100,255*E[3]/100,1):(E=u.exec(F))?G(E[1],E[2],E[3],E[4]):(E=g.exec(F))?G(255*E[1]/100,255*E[2]/100,255*E[3]/100,E[4]):(E=C.exec(F))?at(E[1],E[2]/100,E[3]/100,1):(E=L.exec(F))?at(E[1],E[2]/100,E[3]/100,E[4]):I.hasOwnProperty(F)?H(I[F]):"transparent"===F?new st(NaN,NaN,NaN,0):null}function H(F){return new st(F>>16&255,F>>8&255,255&F,1)}function G(F,E,ut,ft){return ft<=0&&(F=E=ut=NaN),new st(F,E,ut,ft)}function tt(F){return F instanceof x||(F=Z(F)),F?new st((F=F.rgb()).r,F.g,F.b,F.opacity):new st}function K(F,E,ut,ft){return 1===arguments.length?tt(F):new st(F,E,ut,ft??1)}function st(F,E,ut,ft){this.r=+F,this.g=+E,this.b=+ut,this.opacity=+ft}function j(){return"#"+et(this.r)+et(this.g)+et(this.b)}function W(){var F=this.opacity;return(1===(F=isNaN(F)?1:Math.max(0,Math.min(1,F)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===F?")":", "+F+")")}function et(F){return((F=Math.max(0,Math.min(255,Math.round(F)||0)))<16?"0":"")+F.toString(16)}function at(F,E,ut,ft){return ft<=0?F=E=ut=NaN:ut<=0||ut>=1?F=E=NaN:E<=0&&(F=NaN),new rt(F,E,ut,ft)}function Y(F){if(F instanceof rt)return new rt(F.h,F.s,F.l,F.opacity);if(F instanceof x||(F=Z(F)),!F)return new rt;if(F instanceof rt)return F;var E=(F=F.rgb()).r/255,ut=F.g/255,ft=F.b/255,Dt=Math.min(E,ut,ft),St=Math.max(E,ut,ft),Qt=NaN,pe=St-Dt,wt=(St+Dt)/2;return pe?(Qt=E===St?(ut-ft)/pe+6*(ut<ft):ut===St?(ft-E)/pe+2:(E-ut)/pe+4,pe/=wt<.5?St+Dt:2-St-Dt,Qt*=60):pe=wt>0&&wt<1?0:Qt,new rt(Qt,pe,wt,F.opacity)}function nt(F,E,ut,ft){return 1===arguments.length?Y(F):new rt(F,E,ut,ft??1)}function rt(F,E,ut,ft){this.h=+F,this.s=+E,this.l=+ut,this.opacity=+ft}function q(F,E,ut){return 255*(F<60?E+(ut-E)*F/60:F<180?ut:F<240?E+(ut-E)*(240-F)/60:E)}(0,c.Z)(x,Z,{copy:function(F){return Object.assign(new this.constructor,this,F)},displayable:function(){return this.rgb().displayable()},hex:B,formatHex:B,formatHsl:function M(){return Y(this).formatHsl()},formatRgb:R,toString:R}),(0,c.Z)(st,K,(0,c.l)(x,{brighter:function(F){return F=null==F?m:Math.pow(m,F),new st(this.r*F,this.g*F,this.b*F,this.opacity)},darker:function(F){return F=null==F?_:Math.pow(_,F),new st(this.r*F,this.g*F,this.b*F,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:W,toString:W})),(0,c.Z)(rt,nt,(0,c.l)(x,{brighter:function(F){return F=null==F?m:Math.pow(m,F),new rt(this.h,this.s,this.l*F,this.opacity)},darker:function(F){return F=null==F?_:Math.pow(_,F),new rt(this.h,this.s,this.l*F,this.opacity)},rgb:function(){var F=this.h%360+360*(this.h<0),E=isNaN(F)||isNaN(this.s)?0:this.s,ut=this.l,ft=ut+(ut<.5?ut:1-ut)*E,Dt=2*ut-ft;return new st(q(F>=240?F-240:F+120,Dt,ft),q(F,Dt,ft),q(F<120?F+240:F-120,Dt,ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var F=this.opacity;return(1===(F=isNaN(F)?1:Math.max(0,Math.min(1,F)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===F?")":", "+F+")")}}))},68884:(w,D,s)=>{"use strict";function c(_,m,p){_.prototype=m.prototype=p,p.constructor=_}function x(_,m){var p=Object.create(_.prototype);for(var t in m)p[t]=m[t];return p}s.d(D,{Z:()=>c,l:()=>x})},25922:(w,D,s)=>{"use strict";s.d(D,{Z:()=>d});var c={value:function(){}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function m(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",g=f.indexOf(".");if(g>=0&&(u=f.slice(g+1),f=f.slice(0,g)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var g,f=0,u=l.length;f<u;++f)if((g=l[f]).name===h)return g.value}function t(l,h,f){for(var u=0,g=l.length;u<g;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var g,f=this._,u=m(l+"",f),C=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<L;)if(g=(l=u[C]).type)f[g]=t(f[g],l.name,h);else if(null==h)for(g in f)f[g]=t(f[g],l.name,null);return this}for(;++C<L;)if((g=(l=u[C]).type)&&(g=p(f[g],l.name)))return g},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((g=arguments.length-2)>0)for(var g,C,f=new Array(g),u=0;u<g;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,g=(C=this._[l]).length;u<g;++u)C[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],g=0,C=u.length;g<C;++g)u[g].value.apply(h,f)}};const d=x},56758:(w,D,s)=>{"use strict";s.d(D,{Z:()=>m,D:()=>p});var c=s(52016);function _(t){t.preventDefault(),t.stopImmediatePropagation()}function m(t){var d=t.document.documentElement,l=(0,c.Z)(t).on("dragstart.drag",_,!0);"onselectstart"in d?l.on("selectstart.drag",_,!0):(d.__noselect=d.style.MozUserSelect,d.style.MozUserSelect="none")}function p(t,d){var l=t.document.documentElement,h=(0,c.Z)(t).on("dragstart.drag",null);d&&(h.on("click.drag",_,!0),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in l?h.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}},27065:(w,D,s)=>{"use strict";function _(m){return((m*=2)<=1?m*m*m:(m-=2)*m*m+2)/2}s.d(D,{tw:()=>_})},22910:(w,D,s)=>{"use strict";s.d(D,{WU:()=>_,ZP:()=>p,jH:()=>m});var x,_,m,c=s(4753);function p(t){return x=(0,c.Z)(t),_=x.format,m=x.formatPrefix,x}p({thousands:",",grouping:[3],currency:["$",""]})},68520:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(5326);function x(_){return(_=(0,c.V)(Math.abs(_)))?_[1]:NaN}},5326:(w,D,s)=>{"use strict";function c(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function x(_,m){if((p=(_=m?_.toExponential(m-1):_.toExponential()).indexOf("e"))<0)return null;var p,t=_.slice(0,p);return[t.length>1?t[0]+t.slice(2):t,+_.slice(p+1)]}s.d(D,{V:()=>x,Z:()=>c})},32517:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x,v:()=>_});var c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x(m){if(!(p=c.exec(m)))throw new Error("invalid format: "+m);var p;return new _({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function _(m){this.fill=void 0===m.fill?" ":m.fill+"",this.align=void 0===m.align?">":m.align+"",this.sign=void 0===m.sign?"-":m.sign+"",this.symbol=void 0===m.symbol?"":m.symbol+"",this.zero=!!m.zero,this.width=void 0===m.width?void 0:+m.width,this.comma=!!m.comma,this.precision=void 0===m.precision?void 0:+m.precision,this.trim=!!m.trim,this.type=void 0===m.type?"":m.type+""}x.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},41129:(w,D,s)=>{"use strict";s.r(D),s.d(D,{FormatSpecifier:()=>_.v,format:()=>c.WU,formatDefaultLocale:()=>c.ZP,formatLocale:()=>x.Z,formatPrefix:()=>c.jH,formatSpecifier:()=>_.Z,precisionFixed:()=>m.Z,precisionPrefix:()=>p.Z,precisionRound:()=>t.Z});var c=s(22910),x=s(4753),_=s(32517),m=s(78986),p=s(38914),t=s(65142)},4753:(w,D,s)=>{"use strict";s.d(D,{Z:()=>L});var d,c=s(68520),m=s(32517),t=s(5326);function h(I,B){var M=(0,t.V)(I,B);if(!M)return I+"";var R=M[0],Z=M[1];return Z<0?"0."+new Array(-Z).join("0")+R:R.length>Z+1?R.slice(0,Z+1)+"."+R.slice(Z+1):R+new Array(Z-R.length+2).join("0")}const f={"%":(I,B)=>(100*I).toFixed(B),b:I=>Math.round(I).toString(2),c:I=>I+"",d:t.Z,e:(I,B)=>I.toExponential(B),f:(I,B)=>I.toFixed(B),g:(I,B)=>I.toPrecision(B),o:I=>Math.round(I).toString(8),p:(I,B)=>h(100*I,B),r:h,s:function l(I,B){var M=(0,t.V)(I,B);if(!M)return I+"";var R=M[0],Z=M[1],H=Z-(d=3*Math.max(-8,Math.min(8,Math.floor(Z/3))))+1,G=R.length;return H===G?R:H>G?R+new Array(H-G+1).join("0"):H>0?R.slice(0,H)+"."+R.slice(H):"0."+new Array(1-H).join("0")+(0,t.V)(I,Math.max(0,B+H-1))[0]},X:I=>Math.round(I).toString(16).toUpperCase(),x:I=>Math.round(I).toString(16)};function u(I){return I}var g=Array.prototype.map,C=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function L(I){var B=void 0===I.grouping||void 0===I.thousands?u:function x(I,B){return function(M,R){for(var Z=M.length,H=[],G=0,tt=I[0],K=0;Z>0&&tt>0&&(K+tt+1>R&&(tt=Math.max(1,R-K)),H.push(M.substring(Z-=tt,Z+tt)),!((K+=tt+1)>R));)tt=I[G=(G+1)%I.length];return H.reverse().join(B)}}(g.call(I.grouping,Number),I.thousands+""),M=void 0===I.currency?"":I.currency[0]+"",R=void 0===I.currency?"":I.currency[1]+"",Z=void 0===I.decimal?".":I.decimal+"",H=void 0===I.numerals?u:function _(I){return function(B){return B.replace(/[0-9]/g,function(M){return I[+M]})}}(g.call(I.numerals,String)),G=void 0===I.percent?"%":I.percent+"",tt=void 0===I.minus?"\u2212":I.minus+"",K=void 0===I.nan?"NaN":I.nan+"";function st(W){var et=(W=(0,m.Z)(W)).fill,at=W.align,Y=W.sign,nt=W.symbol,rt=W.zero,q=W.width,F=W.comma,E=W.precision,ut=W.trim,ft=W.type;"n"===ft?(F=!0,ft="g"):f[ft]||(void 0===E&&(E=12),ut=!0,ft="g"),(rt||"0"===et&&"="===at)&&(rt=!0,et="0",at="=");var Dt="$"===nt?M:"#"===nt&&/[boxX]/.test(ft)?"0"+ft.toLowerCase():"",St="$"===nt?R:/[%p]/.test(ft)?G:"",Qt=f[ft],pe=/[defgprs%]/.test(ft);function wt(yt){var de,ie,Mt,Nt=Dt,zt=St;if("c"===ft)zt=Qt(yt)+zt,yt="";else{var te=(yt=+yt)<0||1/yt<0;if(yt=isNaN(yt)?K:Qt(Math.abs(yt),E),ut&&(yt=function p(I){t:for(var Z,B=I.length,M=1,R=-1;M<B;++M)switch(I[M]){case".":R=Z=M;break;case"0":0===R&&(R=M),Z=M;break;default:if(!+I[M])break t;R>0&&(R=0)}return R>0?I.slice(0,R)+I.slice(Z+1):I}(yt)),te&&0==+yt&&"+"!==Y&&(te=!1),Nt=(te?"("===Y?Y:tt:"-"===Y||"("===Y?"":Y)+Nt,zt=("s"===ft?C[8+d/3]:"")+zt+(te&&"("===Y?")":""),pe)for(de=-1,ie=yt.length;++de<ie;)if(48>(Mt=yt.charCodeAt(de))||Mt>57){zt=(46===Mt?Z+yt.slice(de+1):yt.slice(de))+zt,yt=yt.slice(0,de);break}}F&&!rt&&(yt=B(yt,1/0));var jt=Nt.length+yt.length+zt.length,ae=jt<q?new Array(q-jt+1).join(et):"";switch(F&&rt&&(yt=B(ae+yt,ae.length?q-zt.length:1/0),ae=""),at){case"<":yt=Nt+yt+zt+ae;break;case"=":yt=Nt+ae+yt+zt;break;case"^":yt=ae.slice(0,jt=ae.length>>1)+Nt+yt+zt+ae.slice(jt);break;default:yt=ae+Nt+yt+zt}return H(yt)}return E=void 0===E?6:/[gprs]/.test(ft)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E)),wt.toString=function(){return W+""},wt}return{format:st,formatPrefix:function j(W,et){var at=st(((W=(0,m.Z)(W)).type="f",W)),Y=3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(et)/3))),nt=Math.pow(10,-Y),rt=C[8+Y/3];return function(q){return at(nt*q)+rt}}}}},78986:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(68520);function x(_){return Math.max(0,-(0,c.Z)(Math.abs(_)))}},38914:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(68520);function x(_,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(m)/3)))-(0,c.Z)(Math.abs(_)))}},65142:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(68520);function x(_,m){return _=Math.abs(_),m=Math.abs(m)-_,Math.max(0,(0,c.Z)(m)-(0,c.Z)(_))+1}},9921:function(w,D,s){!function(c,x,_,m,p,t,d,l,h,f){"use strict";function u(Q){if(Q&&Q.__esModule)return Q;var pt=Object.create(null);return Q&&Object.keys(Q).forEach(function(mt){if("default"!==mt){var gt=Object.getOwnPropertyDescriptor(Q,mt);Object.defineProperty(pt,mt,gt.get?gt:{enumerable:!0,get:function(){return Q[mt]}})}}),pt.default=Q,Object.freeze(pt)}var Lt,g=u(x);function C(Q,pt,mt){return pt in Q?Object.defineProperty(Q,pt,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Q[pt]=mt,Q}function L(Q){return function I(Q){if(Array.isArray(Q))return R(Q)}(Q)||function B(Q){if(typeof Symbol<"u"&&null!=Q[Symbol.iterator]||null!=Q["@@iterator"])return Array.from(Q)}(Q)||function M(Q,pt){if(Q){if("string"==typeof Q)return R(Q,pt);var mt=Object.prototype.toString.call(Q).slice(8,-1);if("Object"===mt&&Q.constructor&&(mt=Q.constructor.name),"Map"===mt||"Set"===mt)return Array.from(Q);if("Arguments"===mt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return R(Q,pt)}}(Q)||function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(Q,pt){(null==pt||pt>Q.length)&&(pt=Q.length);for(var mt=0,gt=new Array(pt);mt<pt;mt++)gt[mt]=Q[mt];return gt}function H(Q){var pt={},mt=Q.node().nodeName;pt.tag=mt,"#text"==mt?pt.text=Q.text():"#comment"==mt&&(pt.comment=Q.text()),pt.attributes={};var gt=Q.node().attributes;if(gt)for(var Ut=0;Ut<gt.length;Ut++){var Xt=gt[Ut];pt.attributes[Xt.name]=Xt.value}var Se,O=Q.node().transform;if(O&&0!=O.baseVal.numberOfItems){var se=O.baseVal.consolidate().matrix;pt.translation={x:se.e,y:se.f},pt.scale=se.a}if("ellipse"==mt&&(pt.center={x:pt.attributes.cx,y:pt.attributes.cy}),"polygon"==mt){var Ce=(Se=Q.attr("points").split(" ")).map(function(ln){return ln.split(",")[0]}),je=Se.map(function(ln){return ln.split(",")[1]}),Pe=Math.min.apply(null,Ce),Be=Math.max.apply(null,Ce),ue=Math.min.apply(null,je),me=Math.max.apply(null,je);pt.bbox={x:Pe,y:ue,width:Be-Pe,height:me-ue},pt.center={x:(Pe+Be)/2,y:(ue+me)/2}}return"path"==mt&&((Se=Q.attr("d").split(/[A-Z ]/)).shift(),Ce=Se.map(function(he){return+he.split(",")[0]}),je=Se.map(function(he){return+he.split(",")[1]}),Pe=Math.min.apply(null,Ce),Be=Math.max.apply(null,Ce),ue=Math.min.apply(null,je),me=Math.max.apply(null,je),pt.bbox={x:Pe,y:ue,width:Be-Pe,height:me-ue},pt.center={x:(Pe+Be)/2,y:(ue+me)/2},pt.totalLength=Q.node().getTotalLength()),"text"==mt&&(pt.center={x:Q.attr("x"),y:Q.attr("y")}),"#text"==mt?pt.text=Q.text():"#comment"==mt&&(pt.comment=Q.text()),pt}function G(Q){var pt=H(Q);return pt.children=[],g.selectAll(Q.node().childNodes).each(function(){var gt=G(g.select(this));gt.parent=pt,pt.children.push(gt)}),pt}function tt(Q){return"#text"==Q.tag?document.createTextNode(""):"#comment"==Q.tag?document.createComment(Q.comment):document.createElementNS("http://www.w3.org/2000/svg",Q.tag)}function K(Q){for(var pt=tt(Q),mt=g.select(pt),gt=Q.attributes,Ut=0,Xt=Object.keys(gt);Ut<Xt.length;Ut++){var kt=Xt[Ut];mt.attr(kt,gt[kt])}return pt}function st(Q,pt){var mt=g.select(Q.node().parentNode),gt=K(pt),Ut=mt.insert(function(){return gt},function(){return Q.node()});return Q.remove(),Ut}function W(Q,pt){(function j(Q,pt){Q.datum(pt),Q.data([pt],function(mt){return mt.key})})(Q,pt),g.selectAll(Q.node().childNodes).each(function(gt,Ut){W(g.select(this),pt.children[Ut])})}function et(Q,pt){var mt=Q.selectAll(function(){return Q.node().childNodes}),gt=(mt=mt.data(function(kt){return kt.children},function(kt){return kt.tag+"-"+pt})).enter().append(function(kt){return tt(kt)}),Ut=mt.exit();Ut=Ut.remove(),mt=gt.merge(mt);var Xt={};mt.each(function(kt){var le=kt.tag;null==Xt[le]&&(Xt[le]=0);var O=Xt[le]++;at.call(this,kt,O)})}function at(Q){var pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,mt=g.select(this),gt=Q.attributes,Ut=mt.node().attributes;if(Ut)for(var Xt=0;Xt<Ut.length;Xt++){var kt=Ut[Xt],le=kt.name;if("xmlns"!=le.split(":")[0]&&kt.namespaceURI){var O=kt.namespaceURI.split("/");le=O[O.length-1]+":"+le}le in gt||(gt[le]=null)}for(var Se=0,Ce=Object.keys(gt);Se<Ce.length;Se++){var je=Ce[Se];mt.attr(je,gt[je])}Q.text&&mt.text(Q.text),et(mt,pt)}function Y(Q){return Object.assign({},Q)}function nt(Q){return Math.round(100*Q)/100}function q(){var Q=this;var gt=g.select(this._selection.node().querySelector("svg"));if(0==gt.size())return this;this._zoomSelection=gt;var Ut=d.zoom().scaleExtent(this._options.zoomScaleExtent).translateExtent(this._options.zoomTranslateExtent).interpolate(t.interpolate).on("zoom",function pt(kt){g.select(gt.node().querySelector("g")).attr("transform",kt.transform),Q._dispatch.call("zoom",Q)});this._zoomBehavior=Ut;var Xt=g.select(gt.node().querySelector("g"));return gt.call(Ut),this._active||E.call(this,Xt),this._originalTransform=d.zoomTransform(gt.node()),this}function F(Q){var pt=this._translation,mt=this._scale,gt=Q.datum().translation,Ut=Q.datum().scale,Xt=d.zoomTransform(this._zoomSelection.node());return pt&&(Xt=(Xt=Xt.scale(1/mt)).translate(-pt.x,-pt.y)),(Xt=Xt.translate(gt.x,gt.y)).scale(Ut)}function E(Q){this._zoomBehavior.transform(this._zoomSelection,F.call(this,Q)),this._translation=Q.datum().translation,this._scale=Q.datum().scale,this._originalTransform=d.zoomIdentity.translate(Q.datum().translation.x,Q.datum().translation.y).scale(Q.datum().scale)}function pe(Q,pt){return function(){var mt=Q.map(function(gt){return t.interpolate([gt[0][0],gt[0][1]],[gt[1][0],gt[1][1]])});return function(gt){return gt<1?"M"+mt.map(function(Ut){return Ut(gt)}).join("L"):pt}}}function Nt(Q){return"edge"==Q.attributes.class||"a"==Q.tag&&"g"==Q.parent.tag&&"edge"==Q.parent.parent.attributes.class}function zt(Q){return Q.parent&&Nt(Q.parent)}function te(Q){var pt=this._transition,mt=this._options.fade&&null!=pt,gt=this._options.tweenPaths,Ut=this._options.tweenShapes,Xt=this._options.convertEqualSidedPolygons,kt=this._options.growEnteringEdges&&null!=pt,le=this._attributer,O=this;function Se(ue){var me=g.select(this);if("svg"==ue.tag){var Fe=O._options;if(null!=Fe.width||null!=Fe.height){var pn=Fe.width,ln=Fe.height;null==pn?pn=4*ue.attributes.width.replace("pt","")/3:(me.attr("width",pn),ue.attributes.width=pn),null==ln?ln=4*ue.attributes.height.replace("pt","")/3:(me.attr("height",ln),ue.attributes.height=ln),Fe.fit||(me.attr("viewBox","0 0 ".concat(3*pn/4/Fe.scale," ").concat(3*ln/4/Fe.scale)),ue.attributes.viewBox="0 0 ".concat(3*pn/4/Fe.scale," ").concat(3*ln/4/Fe.scale))}1!=Fe.scale&&(Fe.fit||null==Fe.width&&null==Fe.height)&&(pn=ue.attributes.viewBox.split(" ")[2],ln=ue.attributes.viewBox.split(" ")[3],me.attr("viewBox","0 0 ".concat(pn/Fe.scale," ").concat(ln/Fe.scale)),ue.attributes.viewBox="0 0 ".concat(pn/Fe.scale," ").concat(ln/Fe.scale))}le&&me.each(le);var Ye=ue.tag,We=ue.attributes,An=me.node().attributes;if(An)for(var Zn=0;Zn<An.length;Zn++){var Vn=An[Zn],Xn=Vn.name;if("xmlns"!=Xn.split(":")[0]&&Vn.namespaceURI){var Pi=Vn.namespaceURI.split("/");Xn=Pi[Pi.length-1]+":"+Xn}Xn in We||(We[Xn]=null)}var Xe=!1,vn=!1;if(Ut&&pt){if(("polygon"==this.nodeName||"ellipse"==this.nodeName)&&ue.alternativeOld&&(vn=!0),("polygon"==Ye||"ellipse"==Ye)&&ue.alternativeNew&&(Xe=!0),"polygon"==this.nodeName&&"polygon"==Ye&&ue.alternativeOld){var wn=H(me);if(!Xt){var ci=wn.attributes.points.split(" ").length;(vi=ue.attributes.points).split(" ").length==ci&&(Xe=!1,vn=!1)}}if(vn){var Jn=st(me,ue.alternativeOld);Jn.data([ue],function(){return ue.key}),me=Jn}Xe&&(Ye="path",We=ue.alternativeNew.attributes)}var fn=me;if(pt&&(fn=fn.transition(pt),mt&&fn.filter(function(ht){return"#"==ht.tag[0]?null:this}).style("opacity",1),fn.filter(function(ht){return"#"==ht.tag[0]?null:this}).on("end",function(ht){g.select(this).attr("style",ht&&ht.attributes&&ht.attributes.style||null)})),kt&&"path"==Ye&&ue.offset){var ui=ue.totalLength;me.attr("stroke-dasharray",ui+" "+ui).attr("stroke-dashoffset",ui).attr("transform","translate("+ue.offset.x+","+ue.offset.y+")"),We["stroke-dashoffset"]=0,We.transform="translate(0,0)",fn.attr("stroke-dashoffset",We["stroke-dashoffset"]).attr("transform",We.transform).on("start",function(){g.select(this).style("opacity",null)}).on("end",function(){g.select(this).attr("stroke-dashoffset",null).attr("stroke-dasharray",null).attr("transform",null)})}if(kt&&"polygon"==Ye&&zt(ue)&&ue.offset&&"path"==ue.parent.children[3].tag){var hi=g.select(me.node().parentNode.querySelector("path")),Fi=hi.node().getPointAtLength(0),gn=hi.node().getPointAtLength(ue.totalLength),In=hi.node().getPointAtLength(ue.totalLength-1),on=180*Math.atan2(gn.y-In.y,gn.x-In.x)/Math.PI,Hi=Fi.x-gn.x+ue.offset.x,qe=Fi.y-gn.y+ue.offset.y;me.attr("transform","translate("+Hi+","+qe+")"),fn.attrTween("transform",function(){return function(ht){var xt=hi.node().getPointAtLength(ue.totalLength*ht),Ot=hi.node().getPointAtLength(ue.totalLength*ht+1),Rt=180*Math.atan2(Ot.y-xt.y,Ot.x-xt.x)/Math.PI-on;return"translate("+(Hi=xt.x-gn.x+ue.offset.x*(1-ht))+","+(qe=xt.y-gn.y+ue.offset.y*(1-ht))+") rotate("+Rt+" "+gn.x+" "+gn.y+")"}}).on("start",function(){g.select(this).style("opacity",null)}).on("end",function(){g.select(this).attr("transform",null)})}for(var Ti=gt&&pt&&"path"==Ye&&null!=me.attr("d"),On=0,b=Object.keys(We);On<b.length;On++){var k=b[On],V=We[k];if(Ti&&"d"==k){var vi;(vi=(ue.alternativeOld||ue).points)&&fn.attrTween("d",pe(vi,V))}else{if("transform"==k&&ue.translation)if(pt){var it=fn.on("end");fn.on("start",function(){O._zoomBehavior&&fn.tween("attr.transform",function(){var ht=this;return function(xt){ht.setAttribute("transform",t.interpolateTransformSvg(d.zoomTransform(O._zoomSelection.node()).toString(),F.call(O,me).toString())(xt))}})}).on("end",function(){it.call(this),O._zoomBehavior&&E.call(O,me)})}else O._zoomBehavior&&(E.call(O,me),V=F.call(O,me).toString());fn.attr(k,V)}}Xe&&fn.on("end",function(ht,xt,Ot){st(Jn=g.select(this),ht).data([ht],function(){return ht.key})}),ue.text&&fn.text(ue.text),function se(ue){var me=ue.selectAll(function(){return ue.node().childNodes}),Fe=(me=me.data(function(Ye){return Ye.children},function(Ye){return Ye.key})).enter().append(function(Ye){var We=tt(Ye);return"#text"==Ye.tag&&mt&&(We.nodeValue=Ye.text),We});(mt||kt&&Nt(ue.datum()))&&Fe.filter(function(Ye){return"#"==Ye.tag[0]?null:this}).each(function(Ye){for(var We=g.select(this),An=0,Zn=Object.keys(Ye.attributes);An<Zn.length;An++){var Vn=Zn[An];We.attr(Vn,Ye.attributes[Vn])}}).filter(function(Ye){return"svg"==Ye.tag||"g"==Ye.tag?null:this}).style("opacity",0);var ln=me.exit();le&&ln.each(le),pt&&(ln=ln.transition(pt),mt&&ln.filter(function(Ye){return"#"==Ye.tag[0]?null:this}).style("opacity",0)),ln=ln.remove(),(me=Fe.merge(me)).each(Se)}(me)}var Ce=this._selection;if(null!=pt){var je=this._jobs;if(O._active)return je.push(null),this;Ce.transition(pt).transition().duration(0).on("end",function(){O._active=!1,0!=je.length&&(je.shift(),O.render())}),this._active=!0}null!=pt&&Ce.transition(pt).on("start",function(){O._dispatch.call("transitionStart",O)}).on("end",function(){O._dispatch.call("transitionEnd",O)}).transition().duration(0).on("start",function(){O._dispatch.call("restoreEnd",O),O._dispatch.call("end",O),Q&&Q.call(O)});var Pe=this._data,Be=Ce.selectAll("svg").data([Pe],function(ue){return ue.key});return Be=Be.enter().append("svg").merge(Be),Se.call(Be.node(),Pe),this._options.zoom&&!this._zoomBehavior&&q.call(this),O._dispatch.call("renderEnd",O),null==pt&&(this._dispatch.call("end",this),Q&&Q.call(this)),this}function ae(Q,pt){if("polygon"==Q.tag){(mt=Y(Q)).tag="path";var Ut=Y(gt=Q.attributes),Xt=gt.points;if("polygon"==pt.tag){(kt=Q.bbox).cx=kt.x+kt.width/2,kt.cy=kt.y+kt.height/2;for(var O=gt.points.split(" "),se=O.map(function(wn){var Qn=wn.split(",");return[Qn[0]-kt.cx,Qn[1]-kt.cy]}),Se=se[se.length-1][0],Ce=se[se.length-1][1],je=0;je<se.length;je++,Se=Pe,Ce=Be){var ue=(Pe=se[je][0])-Se;if(0!=(me=(Be=se[je][1])-Ce)&&0<=(Fe=Se-Ce*ue/me)&&Fe<1/0&&(Se<=Fe&&Fe<=Pe||Pe<=Fe&&Fe<=Se))break}var pn=[[kt.cx+Fe,kt.cy+0].join(",")];Xt=(pn=(pn=pn.concat(O.slice(je))).concat(O.slice(0,je))).join(" ")}Ut.d="M"+Xt+"z",delete Ut.points,mt.attributes=Ut}else{var mt;(mt=Y(Q)).tag="path",Ut=Y(gt=Q.attributes);var gt,Pe,Be,Fe,ln=gt.cx,Ye=gt.cy,We=gt.rx,An=gt.ry;if("polygon"==pt.tag){var kt;(kt=pt.bbox).cx=kt.x+kt.width/2,kt.cy=kt.y+kt.height/2;var Zn=pt.attributes.points.split(" ")[0].split(","),me=(ue=Zn[0]-kt.cx,Zn[1]-kt.cy),Pi=Math.sqrt(Math.pow(ue,2)+Math.pow(me,2)),he=ue/Pi,Xe=-me/Pi}else he=1,Xe=0;Ut.d="M "+ln+" "+Ye+" m "+(Pe=We*he)+","+(Be=-An*Xe)+" a "+We+","+An+" 0 1,0 "+(ue=(Fe=We*-he)-Pe)+","+(me=-An*-Xe-Be)+" a "+We+","+An+" 0 1,0 "+-ue+","+-me+"z",delete Ut.cx,delete Ut.cy,delete Ut.rx,delete Ut.ry,mt.attributes=Ut}return mt}function Zt(){var Q=this;try{l.graphviz.layout("","svg","dot").then(function(){l.graphvizSync().then(function(gt){Q.layoutSync=gt.layout.bind(gt),null==Q._worker&&Q._dispatch.call("initEnd",Q),Q._afterInit&&Q._afterInit()})})}catch{}if(null!=this._worker){var pt=this._vizURL,mt=this;this._workerPort.onmessage=function(gt){mt._workerCallbacks.shift().call(mt,gt)},pt.match(/^https?:\/\/|^\/\//i)||(pt=new window.URL(pt,document.location.href).href),Kt.call(this,{type:"layout",dot:"",engine:"dot",vizURL:pt},function(gt){}),Kt.call(this,{type:"version"},function(gt){"version"===gt.data.type&&(mt._graphvizVersion=gt.data.version,mt._dispatch.call("initEnd",this))})}}function Kt(Q,pt){this._workerCallbacks.push(pt),this._workerPort.postMessage(Q)}function Le(Q,pt){var mt=this._options.keyMode,gt=this._options.tweenPaths,Ut=this._options.tweenShapes;if("string"==typeof this._options.tweenPrecision&&this._options.tweenPrecision.includes("%"))var Xt=+this._options.tweenPrecision.split("%")[0]/100,kt=this._options.tweenPrecision.includes("%");else Xt=this._options.tweenPrecision,kt=!1;var le=this._options.growEnteringEdges,O={},se=this._dictionary||{},Se={},Ce=this._nodeDictionary||{};function je(he,Xe){var vn=he.tag;if("index"==mt)he.key=Xe;else if("#"!=vn[0])if("id"==mt)he.key=he.attributes.id;else if("title"==mt){var wn=he.children.find(function(Qn){return"title"==Qn.tag});wn&&(he.key=wn.children.length>0?wn.children[0].text:"")}null==he.key&&(Ut&&("ellipse"==vn||"polygon"==vn)&&(vn="path"),he.key=vn+"-"+Xe)}function Pe(he,Xe){he.id=(Xe?Xe.id+".":"")+he.key}function Be(he){O[he.id]=he}function ue(he,Xe){Ut&&he.id in se&&("polygon"==Xe.tag||"ellipse"==Xe.tag||"path"==Xe.tag)&&(Xe.tag!=he.tag||"polygon"==he.tag)&&("path"!=Xe.tag&&(he.alternativeOld=ae(Xe,he)),"path"!=he.tag&&(he.alternativeNew=ae(he,Xe)))}function me(he,Xe){if(gt&&Xe&&("path"==Xe.tag||he.alternativeOld&&"path"==he.alternativeOld.tag)){var vn=(he.alternativeNew||he).attributes.d;if(he.alternativeOld)var wn=K(he.alternativeOld);else wn=K(Xe);(he.alternativeOld||(he.alternativeOld={})).points=function wt(Q,pt,mt,gt){for(var Ut=Q,Xt=Ut.cloneNode(),kt=Ut.getTotalLength(),le=(Xt.setAttribute("d",pt),Xt).getTotalLength(),O=[0],se=0,Se=gt?mt:mt/Math.max(kt,le);(se+=Se)<1;)O.push(se);return O.push(1),O.map(function(je){var Pe=Ut.getPointAtLength(je*kt),Be=Xt.getPointAtLength(je*le);return[[Pe.x,Pe.y],[Be.x,Be.y]]})}(wn,vn,Xt,kt)}}function Fe(he){var vn=arguments.length>2?arguments[2]:void 0;je(he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),Pe(he,vn);var Qn=se[he.id];Be(he),ue(he,Qn),me(he,Qn);var ci={};he.children.forEach(function(vi){var jn=vi.tag;("ellipse"==jn||"polygon"==jn)&&(jn="path"),null==ci[jn]&&(ci[jn]=0),Fe(vi,ci[jn]++,he)})}function Ye(he){(function pn(he){if(le&&he.parent&&"node"==he.parent.attributes.class&&"title"==he.tag){if(he.children.length>0)var wn=he.children[0].text;else wn="";Se[wn]=he.parent}})(he),function ln(he){var vn=he.tag;if(le&&!se[he.id]&&he.parent&&zt(he)&&("path"==vn||"polygon"==vn)){if("polygon"==vn){var Qn=he.parent.children.find(function(gn){return"path"==gn.tag});Qn&&(he.totalLength=Qn.totalLength)}var vi=function ie(Q){return function de(Q){return"edge"==Q.parent.attributes.class?Q.parent:Q.parent.parent.parent}(Q).children.find(function(pt){return"title"==pt.tag})}(he).children[0],jn=vi.text.split("->");2!=jn.length&&(jn=vi.text.split("--"));var Vi=jn[0],Jn=Se[Vi],bi=Ce[Vi];if(bi){if((cn=Jn.children.findIndex(function(gn,In){return"g"==gn.tag}))>=0){var fn=Jn.children[cn].children.findIndex(function(gn,In){return"a"==gn.tag});Jn=Jn.children[cn].children[fn]}(cn=bi.children.findIndex(function(gn,In){return"g"==gn.tag}))>=0&&(fn=bi.children[cn].children.findIndex(function(In,on){return"a"==In.tag}),bi=bi.children[cn].children[fn]);for(var ui=Jn.children,cn=0;cn<ui.length;cn++)if("polygon"==ui[cn].tag||"ellipse"==ui[cn].tag||"path"==ui[cn].tag||"text"==ui[cn].tag){var Ji=ui[cn];break}var hi=bi.children;for(cn=0;cn<hi.length;cn++)if("polygon"==hi[cn].tag||"ellipse"==hi[cn].tag||"path"==hi[cn].tag||"text"==hi[cn].tag){var Fi=hi[cn];break}he.offset=Fi&&Ji?{x:Fi.center.x-Ji.center.x,y:Fi.center.y-Ji.center.y}:{x:0,y:0}}}}(he),he.children.forEach(function(Xe){Ye(Xe)})}this._dispatch.call("layoutEnd",this);var We=g.select(document.createDocumentFragment()).append("div"),Zn=(new window.DOMParser).parseFromString(Q,"image/svg+xml");We.append(function(){return Zn.documentElement});var Xn=G(We.select("svg"));this._dispatch.call("dataExtractEnd",this),Fe(Xn),this._dispatch.call("dataProcessPass1End",this),Ye(Xn),this._dispatch.call("dataProcessPass2End",this),this._data=Xn,this._dictionary=O,this._nodeDictionary=Se,this._extractData=function(he,Xe,vn){var wn=G(he);return Fe(wn,Xe,vn),Ye(wn),wn},this._busy=!1,this._dispatch.call("dataProcessEnd",this),pt&&pt.call(this),this._queue.length>0&&this._queue.shift().call(this)}function Ni(Q,pt,mt,gt){var Ut=[Q*mt-(pt=-pt)*(gt=-gt),Q*gt+pt*mt];return[Q=Ut[0],pt=-(pt=Ut[1])]}function Bi(Q,pt,mt,gt,Ut,Xt,kt){var O=G(nn.call(this,Xt));Q.data([O]),at.call(Q.node(),O),fe(Q,pt,mt,gt,Ut,Xt,kt)}function fe(Q,pt,mt,gt,Ut,Xt,kt){var le=kt.shortening||0,Ce=[[0,-3.5],[10,0],[0,3.5],[0,-3.5]],je=gt-pt,Pe=Ut-mt,Be=Math.sqrt(je*je+Pe*Pe);if(0==Be)var ue=1,me=0;else ue=je/Be,me=Pe/Be;if(gt=pt+(Be-le-10-.1)*ue,Ut=mt+(Be-le-10-.1)*me,Xt.URL||Xt.tooltip)var Fe=Q.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a"),pn=Fe.selectWithoutDataPropagation("path"),ln=Fe.selectWithoutDataPropagation("polygon");else pn=Q.selectWithoutDataPropagation("path"),ln=Q.selectWithoutDataPropagation("polygon");var Ye=f.path();Ye.moveTo(pt,mt),Ye.lineTo(gt,Ut),pn.attr("d",Ye),gt=pt+(Be-le-10)*ue,Ut=mt+(Be-le-10)*me;for(var We=0;We<Ce.length;We++)Ce[We]=Ni((An=Ce[We])[0],An[1],ue,me);for(We=0;We<Ce.length;We++)Ce[We]=[gt+(An=Ce[We])[0],Ut+An[1]];var Zn=[];for(We=0;We<Ce.length;We++){var An;Zn.push((An=Ce[We]).join(","))}var Vn=Zn.join(" ");return ln.attr("points",Vn),this}function ji(){return this._drawnEdge?(this._drawnEdge.g.remove(),this._drawnEdge=null,this):this}function mn(){return this._drawnEdge?this._drawnEdge.g:g.select(null)}function nn(Q){for(var pt="",mt=0,gt=Object.keys(Q);mt<gt.length;mt++){var Ut=gt[mt];null!=Q[Ut]&&(pt+=' "'+Ut+'"="'+Q[Ut]+'"')}var kt=this.layoutSync("digraph {a -> b ["+pt+"]}","svg","dot"),O=(new window.DOMParser).parseFromString(kt,"image/svg+xml");return g.select(document.createDocumentFragment()).append(function(){return O.documentElement}).select(".edge")}function kn(Q,pt,mt,gt,Ut,Xt){var le=G(X.call(this,gt,Ut));return Q.data([le]),at.call(Q.node(),le),we(Q,pt,mt,Ut),this}function we(Q,pt,mt,gt,Ut){if(gt.URL||gt.tooltip)var Xt=Q.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");else Xt=Q;var kt=Xt.selectAll("ellipse,polygon,path,polyline"),le=Q.selectWithoutDataPropagation("text");if(0!=kt.size()){var O=kt.node().getBBox();O.cx=O.x+O.width/2,O.cy=O.y+O.height/2}else 0!=le.size()&&(O={x:+le.attr("x"),y:+le.attr("y"),width:0,height:0,cx:+le.attr("x"),cy:+le.attr("y")});return kt.each(function(se,Se){var Ce=g.select(this);if(Ce.attr("cx"))Ce.attr("cx",nt(pt)).attr("cy",nt(mt));else if(Ce.attr("points")){var je=Ce.attr("points").trim();Ce.attr("points",function At(Xt,pt,mt){var Ut,gt=(Ut=Xt.split(" ")).map(function(kt){return kt.split(",")});return gt=Ut.map(function(kt){return[nt(+pt+ +kt.split(",")[0]),nt(+mt+ +kt.split(",")[1])]}),(Ut=gt.map(function(kt){return kt.join(",")})).join(" ")}(je,pt-O.cx,mt-O.cy))}else{var Pe=Ce.attr("d");Ce.attr("d",function Ht(Q,pt,mt){(Xt=Q.split(/[A-Z ]/)).shift();var gt=Q.split(/[^[A-Z ]+/),Xt=(Xt.map(function(kt){return kt.split(",")}),Xt.map(function(kt){return[nt(+pt+ +kt.split(",")[0]),nt(+mt+ +kt.split(",")[1])]}).map(function(kt){return kt.join(",")}));return gt.reduce(function(kt,le,O){return kt.concat(le,Xt[O])},[]).join("")}(Pe,pt-O.cx,mt-O.cy))}}),0!=le.size()&&le.attr("x",nt(+le.attr("x")+pt-O.cx)).attr("y",nt(+le.attr("y")+mt-O.cy)),this}function Fn(){if(!this._drawnNode)return this;var Q=this._drawnNode.g;return Q.empty()||Q.remove(),this._drawnNode=null,this}function z(){return this._drawnNode?this._drawnNode.g:g.select(null)}function X(Q,pt){for(var mt="",gt=0,Ut=Object.keys(pt);gt<Ut.length;gt++){var Xt=Ut[gt];null!=pt[Xt]&&(mt+=' "'+Xt+'"="'+pt[Xt]+'"')}var le=this.layoutSync('graph {"'+Q+'" ['+mt+"]}","svg","dot"),se=(new window.DOMParser).parseFromString(le,"image/svg+xml");return g.select(document.createDocumentFragment()).append(function(){return se.documentElement}).select(".node")}function lt(Q){self.document={},Q.addEventListener("message",function(pt){var mt=self["@hpcc-js/wasm"];null==mt&&pt.data.vizURL&&(importScripts(pt.data.vizURL),(mt=self["@hpcc-js/wasm"]).wasmFolder(pt.data.vizURL.match(/.*\//)[0])),"version"!=pt.data.type?mt.graphviz.layout(pt.data.dot,"svg",pt.data.engine,pt.data.options).then(function(gt){Q.postMessage(gt?{type:"done",svg:gt}:pt.data.vizURL?{type:"init"}:{type:"skip"})}).catch(function(gt){Q.postMessage({type:"error",error:gt.message})}):mt.graphvizVersion().then(function(gt){Q.postMessage({type:"version",version:gt})})})}function A(){lt(self)}function bt(){self.onconnect=function(Q){var pt=Q.ports[0];lt(pt),pt.start()}}function Pt(Q,pt){var mt=this;if(this._options={useWorker:!0,useSharedWorker:!1,engine:"dot",keyMode:"title",fade:!0,tweenPaths:!0,tweenShapes:!0,convertEqualSidedPolygons:!0,tweenPrecision:1,growEnteringEdges:!0,zoom:!0,zoomScaleExtent:[.1,10],zoomTranslateExtent:[[-1/0,-1/0],[1/0,1/0]],width:null,height:null,scale:1,fit:!1},pt instanceof Object)for(var gt=0,Ut=Object.keys(pt);gt<Ut.length;gt++){var Xt=Ut[gt];this._options[Xt]=pt[Xt]}else"boolean"==typeof pt&&(this._options.useWorker=pt);var kt=this._options.useWorker,le=this._options.useSharedWorker;if(typeof Worker>"u"&&(kt=!1),typeof SharedWorker>"u"&&(le=!1),kt||le){var se=g.selectAll("script").filter(function(){return"javascript/worker"==g.select(this).attr("type")||g.select(this).attr("src")&&g.select(this).attr("src").match(/.*\/@hpcc-js\/wasm/)});0==se.size()?(console.warn('No script tag of type "javascript/worker" was found and "useWorker" is true. Not using web worker.'),kt=!1,le=!1):(this._vizURL=se.attr("src"),this._vizURL||(console.warn('No "src" attribute of was found on the "javascript/worker" script tag and "useWorker" is true. Not using web worker.'),kt=!1,le=!1))}if(le){var Se="data:application/javascript;base64,"+btoa(lt.toString()+"("+bt.toString()+")()");this._worker=this._worker=new SharedWorker(Se),this._workerPort=this._worker.port,this._workerPortClose=this._worker.port.close.bind(this._workerPort),this._worker.port.start(),this._workerCallbacks=[]}else if(kt){var Ce=new Blob([lt.toString()+"("+A.toString()+")()"]),je=window.URL.createObjectURL(Ce);this._worker=new Worker(je),this._workerPort=this._worker,this._workerPortClose=this._worker.terminate.bind(this._worker),this._workerCallbacks=[]}else l.graphvizVersion().then(function(Pe){mt._graphvizVersion=Pe}.bind(this));this._selection=Q,this._active=!1,this._busy=!1,this._jobs=[],this._queue=[],this._keyModes=new Set(["title","id","tag-index","index"]),this._images=[],this._translation=void 0,this._scale=void 0,this._eventTypes=["initEnd","start","layoutStart","layoutEnd","dataExtractEnd","dataProcessPass1End","dataProcessPass2End","dataProcessEnd","renderStart","renderEnd","transitionStart","transitionEnd","restoreEnd","end","zoom"],this._dispatch=_.dispatch.apply(void 0,L(this._eventTypes)),Zt.call(this),Q.node().__graphviz__=this}function Gt(Q,pt){return g.select(Q).graphviz(pt)}Pt.prototype=Gt.prototype=(C(Lt={constructor:Pt,engine:function ce(Q){return this._options.engine=Q,this},addImage:function _e(Q,pt,mt){return this._images.push({path:Q,width:pt,height:mt}),this},keyMode:function ee(Q){if(!this._keyModes.has(Q))throw Error("Illegal keyMode: "+Q);if(Q!=this._options.keyMode&&null!=this._data)throw Error("Too late to change keyMode");return this._options.keyMode=Q,this},fade:function Ze(Q){return this._options.fade=Q,this},tweenPaths:function ze(Q){return this._options.tweenPaths=Q,this},tweenShapes:function Cn(Q){return this._options.tweenShapes=Q,Q&&(this._options.tweenPaths=!0),this},convertEqualSidedPolygons:function oi(Q){return this._options.convertEqualSidedPolygons=Q,this},tweenPrecision:function Mi(Q){return this._options.tweenPrecision=Q,this},growEnteringEdges:function mi(Q){return this._options.growEnteringEdges=Q,this},zoom:function rt(Q){return this._options.zoom=Q,this._options.zoom&&!this._zoomBehavior?q.call(this):!this._options.zoom&&this._zoomBehavior&&(this._zoomSelection.on(".zoom",null),this._zoomBehavior=null),this},resetZoom:function ut(Q){var pt=this._zoomSelection;return Q&&(pt=pt.transition(Q)),pt.call(this._zoomBehavior.transform,this._originalTransform),this},zoomBehavior:function St(){return this._zoomBehavior||null},zoomSelection:function Qt(){return this._zoomSelection||null},zoomScaleExtent:function ft(Q){return this._options.zoomScaleExtent=Q,this},zoomTranslateExtent:function Dt(Q){return this._options.zoomTranslateExtent=Q,this},render:function Mt(Q){return this._busy?(this._queue.push(this.render.bind(this,Q)),this):(this._dispatch.call("renderStart",this),this._transitionFactory?p.timeout(function(){this._transition=m.transition(this._transitionFactory()),te.call(this,Q)}.bind(this),0):te.call(this,Q),this)},layout:function xe(Q,pt,mt,gt){if(this._worker)Kt.call(this,{type:"layout",dot:Q,engine:pt,options:mt},function(Xt){gt.call(this,Xt.data)});else try{var Ut=this.layoutSync(Q,"svg",pt,mt);gt.call(this,{type:"done",svg:Ut})}catch(Xt){gt.call(this,{type:"error",error:Xt.message})}},dot:function Te(Q,pt){var mt=this,gt=this._options.engine,Ut=this._images;return this._dispatch.call("start",this),this._busy=!0,this._dispatch.call("layoutStart",this),this._worker||null!=this.layoutSync?(this.layout(Q,gt,{images:Ut},function(kt){switch(kt.type){case"error":if(!mt._onerror)throw kt.error.message;mt._onerror(kt.error);break;case"done":Le.call(this,kt.svg,pt)}}),this):(this._afterInit=this.dot.bind(this,Q,pt),this)},data:function yt(){return this._data||null},renderDot:function Oe(Q,pt){var mt=this;return this.dot(Q,function gt(){mt.render(pt)}),this},transition:function Ee(Q){return Q instanceof Function?this._transitionFactory=Q:this._transition=m.transition(Q),this},active:function Ue(Q){var mt=this._selection.selectWithoutDataPropagation("svg");return 0!=mt.size()?m.active(mt.node(),Q):null},options:function Ve(Q){if(typeof Q>"u")return Object.assign({},this._options);for(var pt=0,mt=Object.keys(Q);pt<mt.length;pt++){var gt=mt[pt];this._options[gt]=Q[gt]}return this},width:function en(Q){return this._options.width=Q,this},height:function be(Q){return this._options.height=Q,this},scale:function sn(Q){return this._options.scale=Q,this},fit:function Tt(Q){return this._options.fit=Q,this},attributer:function Wt(Q){return this._attributer=Q,this},on:function gi(Q,pt){return this._dispatch.on(Q,pt),this},onerror:function Si(Q){return this._onerror=Q,this},logEvents:function tr(Q){for(var pt=this,mt=Date.now(),gt={},Ut=this._eventTypes,Xt=Math.max.apply(Math,L(Ut.map(function(Ce){return Ce.length}))),kt=function(je){var Pe=Ut[je];gt[Pe]=[],O=pt,pt.on(Pe+".log",Q?function(){var Be=Date.now(),ue=gt[Pe].length;gt[Pe].push(Be);var me="";if(me+="Event ",me+=h.format(" >2")(je)+" ",me+=Pe+" ".repeat(Xt-Pe.length),me+=h.format(" >5")(Be-mt)+" ","initEnd"!=Pe&&(me+=h.format(" >5")(Be-gt.start[ue])),"dataProcessEnd"==Pe&&(me+=" prepare                 "+h.format(" >5")(Be-gt.layoutEnd[ue])),"renderEnd"==Pe&&O._transition&&(me+=" transition start margin "+h.format(" >5")(O._transition.delay()-(Be-gt.renderStart[ue])),se=O._transition.delay(),Se=O._transition.duration()),"transitionStart"==Pe){var Fe=Be-gt.renderStart[ue];me+=" transition delay        "+h.format(" >5")(Be-gt.renderStart[ue]),me+=" expected "+h.format(" >5")(se),me+=" diff "+h.format(" >5")(Fe-se)}if("transitionEnd"==Pe){var pn=Be-gt.transitionStart[ue];me+=" transition duration     "+h.format(" >5")(pn),me+=" expected "+h.format(" >5")(Se),me+=" diff "+h.format(" >5")(pn-Se)}console.log(me),mt=Be}:null)},le=0;le<Ut.length;le++){var O,se,Se;kt(le)}return this},destroy:function Ri(){return delete this._selection.node().__graphviz__,this._worker&&this._workerPortClose(),this},drawEdge:function _i(Q,pt,mt,gt,Ut){var Xt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if((Ut=Object.assign({},Ut)).style&&Ut.style.includes("invis"))var kt=g.select(null);else{var se=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Ce=G(nn.call(this,Ut));kt=se.append("g").data([Ce]),at.call(kt.node(),Ce),Bi.call(this,kt,Q,pt,mt,gt,Ut,Xt)}return this._drawnEdge={g:kt,x1:Q,y1:pt,x2:mt,y2:gt,attributes:Ut},this},updateDrawnEdge:function Qi(Q,pt,mt,gt){var Ut=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},Xt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var kt=this._drawnEdge.g;return Ut=Object.assign(this._drawnEdge.attributes,Ut),this._drawnEdge.x1=Q,this._drawnEdge.y1=pt,this._drawnEdge.x2=mt,this._drawnEdge.y2=gt,!kt.empty()||Ut.style&&Ut.style.includes("invis")||(kt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnEdge.g=kt),kt.empty()||Bi.call(this,kt,Q,pt,mt,gt,Ut,Xt),this},moveDrawnEdgeEndPoint:function En(Q,pt){var mt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var gt=this._drawnEdge.g,Ut=this._drawnEdge.x1,Xt=this._drawnEdge.y1,kt=this._drawnEdge.attributes;return this._drawnEdge.x2=Q,this._drawnEdge.y2=pt,fe(gt,Ut,Xt,Q,pt,kt,mt),this},insertDrawnEdge:function Mn(Q){if(!this._drawnEdge)throw Error("No edge has been drawn");var pt=this._drawnEdge.g;if(pt.empty())return this;pt.selectWithoutDataPropagation("title").text(Q);var Xt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),kt=Xt.datum(),le=this._extractData(pt,kt.children.length,Xt.datum());return kt.children.push(le),W(pt,le),this._drawnEdge=null,this},removeDrawnEdge:ji},"removeDrawnEdge",ji),C(Lt,"drawnEdgeSelection",mn),C(Lt,"drawnEdgeSelection",mn),C(Lt,"drawNode",function Wn(Q,pt,mt){var gt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Ut=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((gt=Object.assign({},gt)).style&&gt.style.includes("invis"))var Xt=g.select(null);else{var O=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Se=G(X.call(this,mt,gt));Xt=O.append("g").data([Se]),at.call(Xt.node(),Se),kn.call(this,Xt,Q,pt,mt,gt,Ut)}return this._drawnNode={g:Xt,nodeId:mt,x:Q,y:pt,attributes:gt},this}),C(Lt,"updateDrawnNode",function li(Q,pt,mt){var gt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Ut=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._drawnNode)throw Error("No node has been drawn");var Xt=this._drawnNode.g;return null==mt&&(mt=this._drawnNode.nodeId),gt=Object.assign(this._drawnNode.attributes,gt),this._drawnNode.nodeId=mt,this._drawnNode.x=Q,this._drawnNode.y=pt,!Xt.empty()||gt.style&&gt.style.includes("invis")||(Xt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnNode.g=Xt),Xt.empty()||kn.call(this,Xt,Q,pt,mt,gt,Ut),this}),C(Lt,"moveDrawnNode",function Zi(Q,pt){if(!this._drawnNode)throw Error("No node has been drawn");var mt=this._drawnNode.g,gt=this._drawnNode.attributes;return this._drawnNode.x=Q,this._drawnNode.y=pt,mt.empty()||we(mt,Q,pt,gt),this}),C(Lt,"insertDrawnNode",function dn(Q){if(!this._drawnNode)throw Error("No node has been drawn");null==Q&&(Q=this._drawnNode.nodeId);var pt=this._drawnNode.g;if(pt.empty())return this;var mt=this._drawnNode.attributes;if(pt.selectWithoutDataPropagation("title").text(Q),mt.URL||mt.tooltip){var Xt=pt.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");Xt.selectWithoutDataPropagation("ellipse,polygon,path,polyline");var kt=Xt.selectWithoutDataPropagation("text")}else pt.selectWithoutDataPropagation("ellipse,polygon,path,polyline"),kt=pt.selectWithoutDataPropagation("text");kt.text(mt.label||Q);var se=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Se=se.datum(),Ce=this._extractData(pt,Se.children.length,se.datum());return Se.children.push(Ce),W(pt,Ce),this._drawnNode=null,this}),C(Lt,"removeDrawnNode",Fn),C(Lt,"removeDrawnNode",Fn),C(Lt,"drawnNodeSelection",z),C(Lt,"drawnNodeSelection",z),C(Lt,"graphvizVersion",function jt(){return this._graphvizVersion}),Lt),x.selection.prototype.graphviz=function Jt(Q){var pt=this.node().__graphviz__;return pt?(pt.options(Q),p.timeout(function(){pt._dispatch.call("initEnd",this)}.bind(this),0)):pt=new Pt(this,Q),pt},x.selection.prototype.selectWithoutDataPropagation=function Yt(Q){return g.select(this.size()>0?this.node().querySelector(Q):null)},c.graphviz=Gt,Object.defineProperty(c,"__esModule",{value:!0})}(D,s(68557),s(75143),s(18429),s(65894),s(46176),s(46041),s(89397),s(41129),s(38184))},75143:(w,D,s)=>{"use strict";s.r(D),s.d(D,{dispatch:()=>d});var c={value:()=>{}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function m(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",g=f.indexOf(".");if(g>=0&&(u=f.slice(g+1),f=f.slice(0,g)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var g,f=0,u=l.length;f<u;++f)if((g=l[f]).name===h)return g.value}function t(l,h,f){for(var u=0,g=l.length;u<g;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var g,f=this._,u=m(l+"",f),C=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<L;)if(g=(l=u[C]).type)f[g]=t(f[g],l.name,h);else if(null==h)for(g in f)f[g]=t(f[g],l.name,null);return this}for(;++C<L;)if((g=(l=u[C]).type)&&(g=p(f[g],l.name)))return g},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((g=arguments.length-2)>0)for(var g,C,f=new Array(g),u=0;u<g;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,g=(C=this._[l]).length;u<g;++u)C[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],g=0,C=u.length;g<C;++g)u[g].value.apply(h,f)}};const d=x},65894:(w,D,s)=>{"use strict";s.r(D),s.d(D,{interval:()=>tt,now:()=>g,timeout:()=>G,timer:()=>I,timerFlush:()=>B});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(K){setTimeout(K,17)};function g(){return l||(u(C),l=f.now()+h)}function C(){l=0}function L(){this._call=this._time=this._next=null}function I(K,st,j){var W=new L;return W.restart(K,st,j),W}function B(){g(),++c;for(var st,K=p;K;)(st=l-K._time)>=0&&K._call.call(null,st),K=K._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{B()}finally{c=0,function Z(){for(var K,j,st=p,W=1/0;st;)st._call?(W>st._time&&(W=st._time),K=st,st=st._next):(j=st._next,st._next=null,st=K?K._next=j:p=j);t=K,H(W)}(),l=0}}function R(){var K=f.now(),st=K-d;st>1e3&&(h-=st,d=K)}function H(K){c||(x&&(x=clearTimeout(x)),K-l>24?(K<1/0&&(x=setTimeout(M,K-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(R,1e3)),c=1,u(M)))}function G(K,st,j){var W=new L;return W.restart(et=>{W.stop(),K(et+st)},st=null==st?0:+st,j),W}function tt(K,st,j){var W=new L,et=st;return null==st?(W.restart(K,st,j),W):(W._restart=W.restart,W.restart=function(at,Y,nt){Y=+Y,nt=null==nt?g():+nt,W._restart(function rt(q){q+=et,W._restart(rt,et+=Y,nt),at(q)},Y,nt)},W.restart(K,st,j),W)}L.prototype=I.prototype={constructor:L,restart:function(K,st,j){if("function"!=typeof K)throw new TypeError("callback is not a function");j=(null==j?g():+j)+(null==st?0:+st),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=K,this._time=j,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}}},90268:(w,D,s)=>{"use strict";s.d(D,{M:()=>m,Z:()=>_});var c=s(37656),x=s(62681);function _(p,t){return((0,x.v)(t)?x.Z:m)(p,t)}function m(p,t){var u,d=t?t.length:0,l=p?Math.min(d,p.length):0,h=new Array(l),f=new Array(d);for(u=0;u<l;++u)h[u]=(0,c.Z)(p[u],t[u]);for(;u<d;++u)f[u]=t[u];return function(g){for(u=0;u<l;++u)f[u]=h[u](g);return f}}},16712:(w,D,s)=>{"use strict";function c(_,m,p,t,d){var l=_*_,h=l*_;return((1-3*_+3*l-h)*m+(4-6*l+3*h)*p+(1+3*_+3*l-3*h)*t+h*d)/6}function x(_){var m=_.length-1;return function(p){var t=p<=0?p=0:p>=1?(p=1,m-1):Math.floor(p*m),d=_[t],l=_[t+1];return c((p-t/m)*m,t>0?_[t-1]:2*d-l,d,l,t<m-1?_[t+2]:2*l-d)}}s.d(D,{Z:()=>x,t:()=>c})},68523:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(16712);function x(_){var m=_.length;return function(p){var t=Math.floor(((p%=1)<0?++p:p)*m);return(0,c.t)((p-t/m)*m,_[(t+m-1)%m],_[t%m],_[(t+1)%m],_[(t+2)%m])}}},35147:(w,D,s)=>{"use strict";s.d(D,{ZP:()=>t,wx:()=>m,yi:()=>p});var c=s(47927);function x(d,l){return function(h){return d+h*l}}function m(d,l){var h=l-d;return h?x(d,h>180||h<-180?h-360*Math.round(h/360):h):(0,c.Z)(isNaN(d)?l:d)}function p(d){return 1==(d=+d)?t:function(l,h){return h-l?function _(d,l,h){return d=Math.pow(d,h),l=Math.pow(l,h)-d,h=1/h,function(f){return Math.pow(d+f*l,h)}}(l,h,d):(0,c.Z)(isNaN(l)?h:l)}}function t(d,l){var h=l-d;return h?x(d,h):(0,c.Z)(isNaN(d)?l:d)}},47927:(w,D,s)=>{"use strict";s.d(D,{Z:()=>c});const c=x=>()=>x},15629:(w,D,s)=>{"use strict";function c(x,_){var m=new Date;return x=+x,_=+_,function(p){return m.setTime(x*(1-p)+_*p),m}}s.d(D,{Z:()=>c})},46176:(w,D,s)=>{"use strict";s.r(D),s.d(D,{interpolate:()=>c.Z,interpolateArray:()=>x.Z,interpolateBasis:()=>_.Z,interpolateBasisClosed:()=>m.Z,interpolateCubehelix:()=>Ve,interpolateCubehelixLong:()=>en,interpolateDate:()=>p.Z,interpolateDiscrete:()=>t,interpolateHcl:()=>Mt,interpolateHclLong:()=>te,interpolateHsl:()=>Z,interpolateHslLong:()=>H,interpolateHue:()=>l,interpolateLab:()=>de,interpolateNumber:()=>h.Z,interpolateNumberArray:()=>f.Z,interpolateObject:()=>u.Z,interpolateRgb:()=>B.ZP,interpolateRgbBasis:()=>B.hD,interpolateRgbBasisClosed:()=>B.YD,interpolateRound:()=>g.Z,interpolateString:()=>C.Z,interpolateTransformCss:()=>L.Y,interpolateTransformSvg:()=>L.w,interpolateZoom:()=>I.Z,piecewise:()=>be,quantize:()=>sn});var c=s(37656),x=s(90268),_=s(16712),m=s(68523),p=s(15629);function t(Tt){var Wt=Tt.length;return function(ce){return Tt[Math.max(0,Math.min(Wt-1,Math.floor(ce*Wt)))]}}var d=s(35147);function l(Tt,Wt){var ce=(0,d.wx)(+Tt,+Wt);return function(_e){var ee=ce(_e);return ee-360*Math.floor(ee/360)}}var h=s(6738),f=s(62681),u=s(84858),g=s(84067),C=s(23096),L=s(75349),I=s(76257),B=s(86811),M=s(52786);function R(Tt){return function(Wt,ce){var _e=Tt((Wt=(0,M.Ym)(Wt)).h,(ce=(0,M.Ym)(ce)).h),ee=(0,d.ZP)(Wt.s,ce.s),Ze=(0,d.ZP)(Wt.l,ce.l),ze=(0,d.ZP)(Wt.opacity,ce.opacity);return function(Cn){return Wt.h=_e(Cn),Wt.s=ee(Cn),Wt.l=Ze(Cn),Wt.opacity=ze(Cn),Wt+""}}}const Z=R(d.wx);var H=R(d.ZP),G=s(68884);const tt=Math.PI/180,K=180/Math.PI,j=.96422,at=4/29,Y=6/29,nt=3*Y*Y;function q(Tt){if(Tt instanceof ut)return new ut(Tt.l,Tt.a,Tt.b,Tt.opacity);if(Tt instanceof Nt)return zt(Tt);Tt instanceof M.Ss||(Tt=(0,M.SU)(Tt));var Ze,ze,Wt=Qt(Tt.r),ce=Qt(Tt.g),_e=Qt(Tt.b),ee=ft((.2225045*Wt+.7168786*ce+.0606169*_e)/1);return Wt===ce&&ce===_e?Ze=ze=ee:(Ze=ft((.4360747*Wt+.3850649*ce+.1430804*_e)/j),ze=ft((.0139322*Wt+.0971045*ce+.7141733*_e)/.82521)),new ut(116*ee-16,500*(Ze-ee),200*(ee-ze),Tt.opacity)}function E(Tt,Wt,ce,_e){return 1===arguments.length?q(Tt):new ut(Tt,Wt,ce,_e??1)}function ut(Tt,Wt,ce,_e){this.l=+Tt,this.a=+Wt,this.b=+ce,this.opacity=+_e}function ft(Tt){return Tt>.008856451679035631?Math.pow(Tt,1/3):Tt/nt+at}function Dt(Tt){return Tt>Y?Tt*Tt*Tt:nt*(Tt-at)}function St(Tt){return 255*(Tt<=.0031308?12.92*Tt:1.055*Math.pow(Tt,1/2.4)-.055)}function Qt(Tt){return(Tt/=255)<=.04045?Tt/12.92:Math.pow((Tt+.055)/1.055,2.4)}function pe(Tt){if(Tt instanceof Nt)return new Nt(Tt.h,Tt.c,Tt.l,Tt.opacity);if(Tt instanceof ut||(Tt=q(Tt)),0===Tt.a&&0===Tt.b)return new Nt(NaN,0<Tt.l&&Tt.l<100?0:NaN,Tt.l,Tt.opacity);var Wt=Math.atan2(Tt.b,Tt.a)*K;return new Nt(Wt<0?Wt+360:Wt,Math.sqrt(Tt.a*Tt.a+Tt.b*Tt.b),Tt.l,Tt.opacity)}function yt(Tt,Wt,ce,_e){return 1===arguments.length?pe(Tt):new Nt(Tt,Wt,ce,_e??1)}function Nt(Tt,Wt,ce,_e){this.h=+Tt,this.c=+Wt,this.l=+ce,this.opacity=+_e}function zt(Tt){if(isNaN(Tt.h))return new ut(Tt.l,0,0,Tt.opacity);var Wt=Tt.h*tt;return new ut(Tt.l,Math.cos(Wt)*Tt.c,Math.sin(Wt)*Tt.c,Tt.opacity)}function de(Tt,Wt){var ce=(0,d.ZP)((Tt=E(Tt)).l,(Wt=E(Wt)).l),_e=(0,d.ZP)(Tt.a,Wt.a),ee=(0,d.ZP)(Tt.b,Wt.b),Ze=(0,d.ZP)(Tt.opacity,Wt.opacity);return function(ze){return Tt.l=ce(ze),Tt.a=_e(ze),Tt.b=ee(ze),Tt.opacity=Ze(ze),Tt+""}}function ie(Tt){return function(Wt,ce){var _e=Tt((Wt=yt(Wt)).h,(ce=yt(ce)).h),ee=(0,d.ZP)(Wt.c,ce.c),Ze=(0,d.ZP)(Wt.l,ce.l),ze=(0,d.ZP)(Wt.opacity,ce.opacity);return function(Cn){return Wt.h=_e(Cn),Wt.c=ee(Cn),Wt.l=Ze(Cn),Wt.opacity=ze(Cn),Wt+""}}}(0,G.Z)(ut,E,(0,G.l)(M.Il,{brighter:function(Tt){return new ut(this.l+18*(Tt??1),this.a,this.b,this.opacity)},darker:function(Tt){return new ut(this.l-18*(Tt??1),this.a,this.b,this.opacity)},rgb:function(){var Tt=(this.l+16)/116,Wt=isNaN(this.a)?Tt:Tt+this.a/500,ce=isNaN(this.b)?Tt:Tt-this.b/200;return Wt=j*Dt(Wt),Tt=1*Dt(Tt),ce=.82521*Dt(ce),new M.Ss(St(3.1338561*Wt-1.6168667*Tt-.4906146*ce),St(-.9787684*Wt+1.9161415*Tt+.033454*ce),St(.0719453*Wt-.2289914*Tt+1.4052427*ce),this.opacity)}})),(0,G.Z)(Nt,yt,(0,G.l)(M.Il,{brighter:function(Tt){return new Nt(this.h,this.c,this.l+18*(Tt??1),this.opacity)},darker:function(Tt){return new Nt(this.h,this.c,this.l-18*(Tt??1),this.opacity)},rgb:function(){return zt(this).rgb()}}));const Mt=ie(d.wx);var te=ie(d.ZP),ae=1.78277,At=-.29227,Ht=-.90649,Zt=1.97294,Kt=Zt*Ht,xe=Zt*ae,Te=ae*At- -.14861*Ht;function Le(Tt){if(Tt instanceof Ee)return new Ee(Tt.h,Tt.s,Tt.l,Tt.opacity);Tt instanceof M.Ss||(Tt=(0,M.SU)(Tt));var ce=Tt.g/255,_e=Tt.b/255,ee=(Te*_e+Kt*(Tt.r/255)-xe*ce)/(Te+Kt-xe),Ze=_e-ee,ze=(Zt*(ce-ee)-At*Ze)/Ht,Cn=Math.sqrt(ze*ze+Ze*Ze)/(Zt*ee*(1-ee)),oi=Cn?Math.atan2(ze,Ze)*K-120:NaN;return new Ee(oi<0?oi+360:oi,Cn,ee,Tt.opacity)}function Oe(Tt,Wt,ce,_e){return 1===arguments.length?Le(Tt):new Ee(Tt,Wt,ce,_e??1)}function Ee(Tt,Wt,ce,_e){this.h=+Tt,this.s=+Wt,this.l=+ce,this.opacity=+_e}function Ue(Tt){return function Wt(ce){function _e(ee,Ze){var ze=Tt((ee=Oe(ee)).h,(Ze=Oe(Ze)).h),Cn=(0,d.ZP)(ee.s,Ze.s),oi=(0,d.ZP)(ee.l,Ze.l),Mi=(0,d.ZP)(ee.opacity,Ze.opacity);return function(mi){return ee.h=ze(mi),ee.s=Cn(mi),ee.l=oi(Math.pow(mi,ce)),ee.opacity=Mi(mi),ee+""}}return ce=+ce,_e.gamma=Wt,_e}(1)}(0,G.Z)(Ee,Oe,(0,G.l)(M.Il,{brighter:function(Tt){return Tt=null==Tt?M.J5:Math.pow(M.J5,Tt),new Ee(this.h,this.s,this.l*Tt,this.opacity)},darker:function(Tt){return Tt=null==Tt?M.xV:Math.pow(M.xV,Tt),new Ee(this.h,this.s,this.l*Tt,this.opacity)},rgb:function(){var Tt=isNaN(this.h)?0:(this.h+120)*tt,Wt=+this.l,ce=isNaN(this.s)?0:this.s*Wt*(1-Wt),_e=Math.cos(Tt),ee=Math.sin(Tt);return new M.Ss(255*(Wt+ce*(-.14861*_e+ae*ee)),255*(Wt+ce*(At*_e+Ht*ee)),255*(Wt+ce*(Zt*_e)),this.opacity)}}));const Ve=Ue(d.wx);var en=Ue(d.ZP);function be(Tt,Wt){void 0===Wt&&(Wt=Tt,Tt=c.Z);for(var ce=0,_e=Wt.length-1,ee=Wt[0],Ze=new Array(_e<0?0:_e);ce<_e;)Ze[ce]=Tt(ee,ee=Wt[++ce]);return function(ze){var Cn=Math.max(0,Math.min(_e-1,Math.floor(ze*=_e)));return Ze[Cn](ze-Cn)}}function sn(Tt,Wt){for(var ce=new Array(Wt),_e=0;_e<Wt;++_e)ce[_e]=Tt(_e/(Wt-1));return ce}},6738:(w,D,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(m){return x*(1-m)+_*m}}s.d(D,{Z:()=>c})},62681:(w,D,s)=>{"use strict";function c(_,m){m||(m=[]);var d,p=_?Math.min(m.length,_.length):0,t=m.slice();return function(l){for(d=0;d<p;++d)t[d]=_[d]*(1-l)+m[d]*l;return t}}function x(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}s.d(D,{Z:()=>c,v:()=>x})},84858:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(37656);function x(_,m){var d,p={},t={};for(d in(null===_||"object"!=typeof _)&&(_={}),(null===m||"object"!=typeof m)&&(m={}),m)d in _?p[d]=(0,c.Z)(_[d],m[d]):t[d]=m[d];return function(l){for(d in p)t[d]=p[d](l);return t}}},86811:(w,D,s)=>{"use strict";s.d(D,{YD:()=>l,ZP:()=>p,hD:()=>d});var c=s(52786),x=s(16712),_=s(68523),m=s(35147);const p=function h(f){var u=(0,m.yi)(f);function g(C,L){var I=u((C=(0,c.B8)(C)).r,(L=(0,c.B8)(L)).r),B=u(C.g,L.g),M=u(C.b,L.b),R=(0,m.ZP)(C.opacity,L.opacity);return function(Z){return C.r=I(Z),C.g=B(Z),C.b=M(Z),C.opacity=R(Z),C+""}}return g.gamma=h,g}(1);function t(h){return function(f){var I,B,u=f.length,g=new Array(u),C=new Array(u),L=new Array(u);for(I=0;I<u;++I)B=(0,c.B8)(f[I]),g[I]=B.r||0,C[I]=B.g||0,L[I]=B.b||0;return g=h(g),C=h(C),L=h(L),B.opacity=1,function(M){return B.r=g(M),B.g=C(M),B.b=L(M),B+""}}}var d=t(x.Z),l=t(_.Z)},84067:(w,D,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(m){return Math.round(x*(1-m)+_*m)}}s.d(D,{Z:()=>c})},23096:(w,D,s)=>{"use strict";s.d(D,{Z:()=>t});var c=s(6738),x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(x.source,"g");function t(d,l){var f,u,g,h=x.lastIndex=_.lastIndex=0,C=-1,L=[],I=[];for(d+="",l+="";(f=x.exec(d))&&(u=_.exec(l));)(g=u.index)>h&&(g=l.slice(h,g),L[C]?L[C]+=g:L[++C]=g),(f=f[0])===(u=u[0])?L[C]?L[C]+=u:L[++C]=u:(L[++C]=null,I.push({i:C,x:(0,c.Z)(f,u)})),h=_.lastIndex;return h<l.length&&(g=l.slice(h),L[C]?L[C]+=g:L[++C]=g),L.length<2?I[0]?function p(d){return function(l){return d(l)+""}}(I[0].x):function m(d){return function(){return d}}(l):(l=I.length,function(B){for(var R,M=0;M<l;++M)L[(R=I[M]).i]=R.x(B);return L.join("")})}},75349:(w,D,s)=>{"use strict";s.d(D,{Y:()=>h,w:()=>f});var p,c=s(6738),x=180/Math.PI,_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function m(u,g,C,L,I,B){var M,R,Z;return(M=Math.sqrt(u*u+g*g))&&(u/=M,g/=M),(Z=u*C+g*L)&&(C-=u*Z,L-=g*Z),(R=Math.sqrt(C*C+L*L))&&(C/=R,L/=R,Z/=R),u*L<g*C&&(u=-u,g=-g,Z=-Z,M=-M),{translateX:I,translateY:B,rotate:Math.atan2(g,u)*x,skewX:Math.atan(Z)*x,scaleX:M,scaleY:R}}function l(u,g,C,L){function I(H){return H.length?H.pop()+" ":""}return function(H,G){var tt=[],K=[];return H=u(H),G=u(G),function B(H,G,tt,K,st,j){if(H!==tt||G!==K){var W=st.push("translate(",null,g,null,C);j.push({i:W-4,x:(0,c.Z)(H,tt)},{i:W-2,x:(0,c.Z)(G,K)})}else(tt||K)&&st.push("translate("+tt+g+K+C)}(H.translateX,H.translateY,G.translateX,G.translateY,tt,K),function M(H,G,tt,K){H!==G?(H-G>180?G+=360:G-H>180&&(H+=360),K.push({i:tt.push(I(tt)+"rotate(",null,L)-2,x:(0,c.Z)(H,G)})):G&&tt.push(I(tt)+"rotate("+G+L)}(H.rotate,G.rotate,tt,K),function R(H,G,tt,K){H!==G?K.push({i:tt.push(I(tt)+"skewX(",null,L)-2,x:(0,c.Z)(H,G)}):G&&tt.push(I(tt)+"skewX("+G+L)}(H.skewX,G.skewX,tt,K),function Z(H,G,tt,K,st,j){if(H!==tt||G!==K){var W=st.push(I(st)+"scale(",null,",",null,")");j.push({i:W-4,x:(0,c.Z)(H,tt)},{i:W-2,x:(0,c.Z)(G,K)})}else(1!==tt||1!==K)&&st.push(I(st)+"scale("+tt+","+K+")")}(H.scaleX,H.scaleY,G.scaleX,G.scaleY,tt,K),H=G=null,function(st){for(var et,j=-1,W=K.length;++j<W;)tt[(et=K[j]).i]=et.x(st);return tt.join("")}}}var h=l(function t(u){const g=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(u+"");return g.isIdentity?_:m(g.a,g.b,g.c,g.d,g.e,g.f)},"px, ","px)","deg)"),f=l(function d(u){return null!=u&&(p||(p=document.createElementNS("http://www.w3.org/2000/svg","g")),p.setAttribute("transform",u),u=p.transform.baseVal.consolidate())?m((u=u.matrix).a,u.b,u.c,u.d,u.e,u.f):_},", ",")",")")},37656:(w,D,s)=>{"use strict";s.d(D,{Z:()=>f});var c=s(52786),x=s(86811),_=s(90268),m=s(15629),p=s(6738),t=s(84858),d=s(23096),l=s(47927),h=s(62681);function f(u,g){var L,C=typeof g;return null==g||"boolean"===C?(0,l.Z)(g):("number"===C?p.Z:"string"===C?(L=(0,c.ZP)(g))?(g=L,x.ZP):d.Z:g instanceof c.ZP?x.ZP:g instanceof Date?m.Z:(0,h.v)(g)?h.Z:Array.isArray(g)?_.M:"function"!=typeof g.valueOf&&"function"!=typeof g.toString||isNaN(g)?t.Z:p.Z)(u,g)}},76257:(w,D,s)=>{"use strict";function x(t){return((t=Math.exp(t))+1/t)/2}s.d(D,{Z:()=>p});const p=function t(d,l,h){function f(u,g){var tt,K,C=u[0],L=u[1],I=u[2],R=g[2],Z=g[0]-C,H=g[1]-L,G=Z*Z+H*H;if(G<1e-12)K=Math.log(R/I)/d,tt=function(Y){return[C+Y*Z,L+Y*H,I*Math.exp(d*Y*K)]};else{var st=Math.sqrt(G),j=(R*R-I*I+h*G)/(2*I*l*st),W=(R*R-I*I-h*G)/(2*R*l*st),et=Math.log(Math.sqrt(j*j+1)-j),at=Math.log(Math.sqrt(W*W+1)-W);K=(at-et)/d,tt=function(Y){var nt=Y*K,rt=x(et),q=I/(l*st)*(rt*function m(t){return((t=Math.exp(2*t))-1)/(t+1)}(d*nt+et)-function _(t){return((t=Math.exp(t))-1/t)/2}(et));return[C+q*Z,L+q*H,I*rt/x(d*nt+et)]}}return tt.duration=1e3*K*d/Math.SQRT2,tt}return f.rho=function(u){var g=Math.max(.001,+u),C=g*g;return t(g,C,C*C)},f}(Math.SQRT2,2,4)},38184:(w,D,s)=>{"use strict";s.r(D),s.d(D,{path:()=>d});const c=Math.PI,x=2*c,_=1e-6,m=x-_;function p(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function t(){return new p}p.prototype=t.prototype={constructor:p,moveTo:function(l,h){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(l,h){this._+="L"+(this._x1=+l)+","+(this._y1=+h)},quadraticCurveTo:function(l,h,f,u){this._+="Q"+ +l+","+ +h+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(l,h,f,u,g,C){this._+="C"+ +l+","+ +h+","+ +f+","+ +u+","+(this._x1=+g)+","+(this._y1=+C)},arcTo:function(l,h,f,u,g){var C=this._x1,L=this._y1,I=(f=+f)-(l=+l),B=(u=+u)-(h=+h),M=C-l,R=L-h,Z=M*M+R*R;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=l)+","+(this._y1=h);else if(Z>_)if(Math.abs(R*I-B*M)>_&&g){var H=f-C,G=u-L,tt=I*I+B*B,K=H*H+G*G,st=Math.sqrt(tt),j=Math.sqrt(Z),W=g*Math.tan((c-Math.acos((tt+Z-K)/(2*st*j)))/2),et=W/j,at=W/st;Math.abs(et-1)>_&&(this._+="L"+(l+et*M)+","+(h+et*R)),this._+="A"+g+","+g+",0,0,"+ +(R*H>M*G)+","+(this._x1=l+at*I)+","+(this._y1=h+at*B)}else this._+="L"+(this._x1=l)+","+(this._y1=h)},arc:function(l,h,f,u,g,C){l=+l,h=+h,C=!!C;var L=(f=+f)*Math.cos(u),I=f*Math.sin(u),B=l+L,M=h+I,R=1^C,Z=C?u-g:g-u;if(f<0)throw new Error("negative radius: "+f);null===this._x1?this._+="M"+B+","+M:(Math.abs(this._x1-B)>_||Math.abs(this._y1-M)>_)&&(this._+="L"+B+","+M),f&&(Z<0&&(Z=Z%x+x),Z>m?this._+="A"+f+","+f+",0,1,"+R+","+(l-L)+","+(h-I)+"A"+f+","+f+",0,1,"+R+","+(this._x1=B)+","+(this._y1=M):Z>_&&(this._+="A"+f+","+f+",0,"+ +(Z>=c)+","+R+","+(this._x1=l+f*Math.cos(g))+","+(this._y1=h+f*Math.sin(g))))},rect:function(l,h,f,u){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}};const d=t},34638:(w,D,s)=>{"use strict";function c(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}s.d(D,{Z:()=>c})},7500:(w,D,s)=>{"use strict";s.d(D,{Z:()=>p});var c=s(36175),x=s(53517);function _(t){return function(){var d=this.ownerDocument,l=this.namespaceURI;return l===x.P&&d.documentElement.namespaceURI===x.P?d.createElement(t):d.createElementNS(l,t)}}function m(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function p(t){var d=(0,c.Z)(t);return(d.local?m:_)(d)}},68557:(w,D,s)=>{"use strict";s.r(D),s.d(D,{create:()=>_,creator:()=>c.Z,local:()=>p,matcher:()=>d.Z,namespace:()=>l.Z,namespaces:()=>h.Z,pointer:()=>f.Z,pointers:()=>g,select:()=>x.Z,selectAll:()=>I,selection:()=>L.ZP,selector:()=>B.Z,selectorAll:()=>M.Z,style:()=>R.S,window:()=>Z.Z});var c=s(7500),x=s(52016);function _(H){return(0,x.Z)((0,c.Z)(H).call(document.documentElement))}var m=0;function p(){return new t}function t(){this._="@"+(++m).toString(36)}t.prototype=p.prototype={constructor:t,get:function(H){for(var G=this._;!(G in H);)if(!(H=H.parentNode))return;return H[G]},set:function(H,G){return H[this._]=G},remove:function(H){return this._ in H&&delete H[this._]},toString:function(){return this._}};var d=s(97905),l=s(36175),h=s(53517),f=s(29132),u=s(75819);function g(H,G){return H.target&&(H=(0,u.Z)(H),void 0===G&&(G=H.currentTarget),H=H.touches||[H]),Array.from(H,tt=>(0,f.Z)(tt,G))}var C=s(34638),L=s(37853);function I(H){return"string"==typeof H?new L.Y1([document.querySelectorAll(H)],[document.documentElement]):new L.Y1([null==H?[]:(0,C.Z)(H)],L.Jz)}var B=s(29742),M=s(32037),R=s(24476),Z=s(2442)},97905:(w,D,s)=>{"use strict";function c(_){return function(){return this.matches(_)}}function x(_){return function(m){return m.matches(_)}}s.d(D,{P:()=>x,Z:()=>c})},36175:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(53517);function x(_){var m=_+="",p=m.indexOf(":");return p>=0&&"xmlns"!==(m=_.slice(0,p))&&(_=_.slice(p+1)),c.Z.hasOwnProperty(m)?{space:c.Z[m],local:_}:_}},53517:(w,D,s)=>{"use strict";s.d(D,{P:()=>c,Z:()=>x});var c="http://www.w3.org/1999/xhtml";const x={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},29132:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(75819);function x(_,m){if(_=(0,c.Z)(_),void 0===m&&(m=_.currentTarget),m){var p=m.ownerSVGElement||m;if(p.createSVGPoint){var t=p.createSVGPoint();return t.x=_.clientX,t.y=_.clientY,[(t=t.matrixTransform(m.getScreenCTM().inverse())).x,t.y]}if(m.getBoundingClientRect){var d=m.getBoundingClientRect();return[_.clientX-d.left-m.clientLeft,_.clientY-d.top-m.clientTop]}}return[_.pageX,_.pageY]}},52016:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(37853);function x(_){return"string"==typeof _?new c.Y1([[document.querySelector(_)]],[document.documentElement]):new c.Y1([[_]],c.Jz)}},37853:(w,D,s)=>{"use strict";s.d(D,{Y1:()=>we,ZP:()=>dn,Jz:()=>kn});var c=s(29742),_=s(34638),m=s(32037),d=s(97905),l=Array.prototype.find;function f(){return this.firstElementChild}var g=Array.prototype.filter;function C(){return this.children}function M(z){return new Array(z.length)}function Z(z,X){this.ownerDocument=z.ownerDocument,this.namespaceURI=z.namespaceURI,this._next=null,this._parent=z,this.__data__=X}function H(z){return function(){return z}}function G(z,X,lt,A,bt,Lt){for(var Gt,Pt=0,Jt=X.length,Yt=Lt.length;Pt<Yt;++Pt)(Gt=X[Pt])?(Gt.__data__=Lt[Pt],A[Pt]=Gt):lt[Pt]=new Z(z,Lt[Pt]);for(;Pt<Jt;++Pt)(Gt=X[Pt])&&(bt[Pt]=Gt)}function tt(z,X,lt,A,bt,Lt,Pt){var Gt,Jt,gt,Yt=new Map,Q=X.length,pt=Lt.length,mt=new Array(Q);for(Gt=0;Gt<Q;++Gt)(Jt=X[Gt])&&(mt[Gt]=gt=Pt.call(Jt,Jt.__data__,Gt,X)+"",Yt.has(gt)?bt[Gt]=Jt:Yt.set(gt,Jt));for(Gt=0;Gt<pt;++Gt)gt=Pt.call(z,Lt[Gt],Gt,Lt)+"",(Jt=Yt.get(gt))?(A[Gt]=Jt,Jt.__data__=Lt[Gt],Yt.delete(gt)):lt[Gt]=new Z(z,Lt[Gt]);for(Gt=0;Gt<Q;++Gt)(Jt=X[Gt])&&Yt.get(mt[Gt])===Jt&&(bt[Gt]=Jt)}function K(z){return z.__data__}function nt(z,X){return z<X?-1:z>X?1:z>=X?0:NaN}Z.prototype={constructor:Z,appendChild:function(z){return this._parent.insertBefore(z,this._next)},insertBefore:function(z,X){return this._parent.insertBefore(z,X)},querySelector:function(z){return this._parent.querySelector(z)},querySelectorAll:function(z){return this._parent.querySelectorAll(z)}};var Dt=s(36175);function St(z){return function(){this.removeAttribute(z)}}function Qt(z){return function(){this.removeAttributeNS(z.space,z.local)}}function pe(z,X){return function(){this.setAttribute(z,X)}}function wt(z,X){return function(){this.setAttributeNS(z.space,z.local,X)}}function yt(z,X){return function(){var lt=X.apply(this,arguments);null==lt?this.removeAttribute(z):this.setAttribute(z,lt)}}function Nt(z,X){return function(){var lt=X.apply(this,arguments);null==lt?this.removeAttributeNS(z.space,z.local):this.setAttributeNS(z.space,z.local,lt)}}var de=s(24476);function ie(z){return function(){delete this[z]}}function Mt(z,X){return function(){this[z]=X}}function te(z,X){return function(){var lt=X.apply(this,arguments);null==lt?delete this[z]:this[z]=lt}}function ae(z){return z.trim().split(/^|\s+/)}function At(z){return z.classList||new Ht(z)}function Ht(z){this._node=z,this._names=ae(z.getAttribute("class")||"")}function Zt(z,X){for(var lt=At(z),A=-1,bt=X.length;++A<bt;)lt.add(X[A])}function Kt(z,X){for(var lt=At(z),A=-1,bt=X.length;++A<bt;)lt.remove(X[A])}function xe(z){return function(){Zt(this,z)}}function Te(z){return function(){Kt(this,z)}}function Le(z,X){return function(){(X.apply(this,arguments)?Zt:Kt)(this,z)}}function Ee(){this.textContent=""}function Ue(z){return function(){this.textContent=z}}function Ve(z){return function(){var X=z.apply(this,arguments);this.textContent=X??""}}function be(){this.innerHTML=""}function sn(z){return function(){this.innerHTML=z}}function Tt(z){return function(){var X=z.apply(this,arguments);this.innerHTML=X??""}}function ce(){this.nextSibling&&this.parentNode.appendChild(this)}function ee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Ht.prototype={add:function(z){this._names.indexOf(z)<0&&(this._names.push(z),this._node.setAttribute("class",this._names.join(" ")))},remove:function(z){var X=this._names.indexOf(z);X>=0&&(this._names.splice(X,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(z){return this._names.indexOf(z)>=0}};var ze=s(7500);function oi(){return null}function mi(){var z=this.parentNode;z&&z.removeChild(this)}function Si(){var z=this.cloneNode(!1),X=this.parentNode;return X?X.insertBefore(z,this.nextSibling):z}function tr(){var z=this.cloneNode(!0),X=this.parentNode;return X?X.insertBefore(z,this.nextSibling):z}function Qi(z){return z.trim().split(/^|\s+/).map(function(X){var lt="",A=X.indexOf(".");return A>=0&&(lt=X.slice(A+1),X=X.slice(0,A)),{type:X,name:lt}})}function Bi(z){return function(){var X=this.__on;if(X){for(var Lt,lt=0,A=-1,bt=X.length;lt<bt;++lt)Lt=X[lt],z.type&&Lt.type!==z.type||Lt.name!==z.name?X[++A]=Lt:this.removeEventListener(Lt.type,Lt.listener,Lt.options);++A?X.length=A:delete this.__on}}}function fe(z,X,lt){return function(){var bt,A=this.__on,Lt=function _i(z){return function(X){z.call(this,X,this.__data__)}}(X);if(A)for(var Pt=0,Gt=A.length;Pt<Gt;++Pt)if((bt=A[Pt]).type===z.type&&bt.name===z.name)return this.removeEventListener(bt.type,bt.listener,bt.options),this.addEventListener(bt.type,bt.listener=Lt,bt.options=lt),void(bt.value=X);this.addEventListener(z.type,Lt,lt),bt={type:z.type,name:z.name,value:X,listener:Lt,options:lt},A?A.push(bt):this.__on=[bt]}}var ji=s(2442);function Mn(z,X,lt){var A=(0,ji.Z)(z),bt=A.CustomEvent;"function"==typeof bt?bt=new bt(X,lt):(bt=A.document.createEvent("Event"),lt?(bt.initEvent(X,lt.bubbles,lt.cancelable),bt.detail=lt.detail):bt.initEvent(X,!1,!1)),z.dispatchEvent(bt)}function mn(z,X){return function(){return Mn(this,z,X)}}function nn(z,X){return function(){return Mn(this,z,X.apply(this,arguments))}}var kn=[null];function we(z,X){this._groups=z,this._parents=X}function Zi(){return new we([[document.documentElement]],kn)}we.prototype=Zi.prototype={constructor:we,select:function x(z){"function"!=typeof z&&(z=(0,c.Z)(z));for(var X=this._groups,lt=X.length,A=new Array(lt),bt=0;bt<lt;++bt)for(var Jt,Yt,Lt=X[bt],Pt=Lt.length,Gt=A[bt]=new Array(Pt),Q=0;Q<Pt;++Q)(Jt=Lt[Q])&&(Yt=z.call(Jt,Jt.__data__,Q,Lt))&&("__data__"in Jt&&(Yt.__data__=Jt.__data__),Gt[Q]=Yt);return new we(A,this._parents)},selectAll:function t(z){z="function"==typeof z?function p(z){return function(){var X=z.apply(this,arguments);return null==X?[]:(0,_.Z)(X)}}(z):(0,m.Z)(z);for(var X=this._groups,lt=X.length,A=[],bt=[],Lt=0;Lt<lt;++Lt)for(var Jt,Pt=X[Lt],Gt=Pt.length,Yt=0;Yt<Gt;++Yt)(Jt=Pt[Yt])&&(A.push(z.call(Jt,Jt.__data__,Yt,Pt)),bt.push(Jt));return new we(A,bt)},selectChild:function u(z){return this.select(null==z?f:function h(z){return function(){return l.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},selectChildren:function I(z){return this.selectAll(null==z?C:function L(z){return function(){return g.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},filter:function B(z){"function"!=typeof z&&(z=(0,d.Z)(z));for(var X=this._groups,lt=X.length,A=new Array(lt),bt=0;bt<lt;++bt)for(var Jt,Lt=X[bt],Pt=Lt.length,Gt=A[bt]=[],Yt=0;Yt<Pt;++Yt)(Jt=Lt[Yt])&&z.call(Jt,Jt.__data__,Yt,Lt)&&Gt.push(Jt);return new we(A,this._parents)},data:function st(z,X){if(!arguments.length)return Array.from(this,K);var lt=X?tt:G,A=this._parents,bt=this._groups;"function"!=typeof z&&(z=H(z));for(var Lt=bt.length,Pt=new Array(Lt),Gt=new Array(Lt),Jt=new Array(Lt),Yt=0;Yt<Lt;++Yt){var Q=A[Yt],pt=bt[Yt],mt=pt.length,gt=(0,_.Z)(z.call(Q,Q&&Q.__data__,Yt,A)),Ut=gt.length,Xt=Gt[Yt]=new Array(Ut),kt=Pt[Yt]=new Array(Ut),le=Jt[Yt]=new Array(mt);lt(Q,pt,Xt,kt,le,gt,X);for(var Se,Ce,O=0,se=0;O<Ut;++O)if(Se=Xt[O]){for(O>=se&&(se=O+1);!(Ce=kt[se])&&++se<Ut;);Se._next=Ce||null}}return(Pt=new we(Pt,A))._enter=Gt,Pt._exit=Jt,Pt},enter:function R(){return new we(this._enter||this._groups.map(M),this._parents)},exit:function j(){return new we(this._exit||this._groups.map(M),this._parents)},join:function W(z,X,lt){var A=this.enter(),bt=this,Lt=this.exit();return A="function"==typeof z?z(A):A.append(z+""),null!=X&&(bt=X(bt)),null==lt?Lt.remove():lt(Lt),A&&bt?A.merge(bt).order():bt},merge:function et(z){if(!(z instanceof we))throw new Error("invalid merge");for(var X=this._groups,lt=z._groups,A=X.length,Lt=Math.min(A,lt.length),Pt=new Array(A),Gt=0;Gt<Lt;++Gt)for(var mt,Jt=X[Gt],Yt=lt[Gt],Q=Jt.length,pt=Pt[Gt]=new Array(Q),gt=0;gt<Q;++gt)(mt=Jt[gt]||Yt[gt])&&(pt[gt]=mt);for(;Gt<A;++Gt)Pt[Gt]=X[Gt];return new we(Pt,this._parents)},selection:function Fn(){return this},order:function at(){for(var z=this._groups,X=-1,lt=z.length;++X<lt;)for(var Pt,A=z[X],bt=A.length-1,Lt=A[bt];--bt>=0;)(Pt=A[bt])&&(Lt&&4^Pt.compareDocumentPosition(Lt)&&Lt.parentNode.insertBefore(Pt,Lt),Lt=Pt);return this},sort:function Y(z){function X(pt,mt){return pt&&mt?z(pt.__data__,mt.__data__):!pt-!mt}z||(z=nt);for(var lt=this._groups,A=lt.length,bt=new Array(A),Lt=0;Lt<A;++Lt){for(var Yt,Pt=lt[Lt],Gt=Pt.length,Jt=bt[Lt]=new Array(Gt),Q=0;Q<Gt;++Q)(Yt=Pt[Q])&&(Jt[Q]=Yt);Jt.sort(X)}return new we(bt,this._parents).order()},call:function rt(){var z=arguments[0];return arguments[0]=this,z.apply(null,arguments),this},nodes:function q(){return Array.from(this)},node:function F(){for(var z=this._groups,X=0,lt=z.length;X<lt;++X)for(var A=z[X],bt=0,Lt=A.length;bt<Lt;++bt){var Pt=A[bt];if(Pt)return Pt}return null},size:function E(){let z=0;for(const X of this)++z;return z},empty:function ut(){return!this.node()},each:function ft(z){for(var X=this._groups,lt=0,A=X.length;lt<A;++lt)for(var Gt,bt=X[lt],Lt=0,Pt=bt.length;Lt<Pt;++Lt)(Gt=bt[Lt])&&z.call(Gt,Gt.__data__,Lt,bt);return this},attr:function zt(z,X){var lt=(0,Dt.Z)(z);if(arguments.length<2){var A=this.node();return lt.local?A.getAttributeNS(lt.space,lt.local):A.getAttribute(lt)}return this.each((null==X?lt.local?Qt:St:"function"==typeof X?lt.local?Nt:yt:lt.local?wt:pe)(lt,X))},style:de.Z,property:function jt(z,X){return arguments.length>1?this.each((null==X?ie:"function"==typeof X?te:Mt)(z,X)):this.node()[z]},classed:function Oe(z,X){var lt=ae(z+"");if(arguments.length<2){for(var A=At(this.node()),bt=-1,Lt=lt.length;++bt<Lt;)if(!A.contains(lt[bt]))return!1;return!0}return this.each(("function"==typeof X?Le:X?xe:Te)(lt,X))},text:function en(z){return arguments.length?this.each(null==z?Ee:("function"==typeof z?Ve:Ue)(z)):this.node().textContent},html:function Wt(z){return arguments.length?this.each(null==z?be:("function"==typeof z?Tt:sn)(z)):this.node().innerHTML},raise:function _e(){return this.each(ce)},lower:function Ze(){return this.each(ee)},append:function Cn(z){var X="function"==typeof z?z:(0,ze.Z)(z);return this.select(function(){return this.appendChild(X.apply(this,arguments))})},insert:function Mi(z,X){var lt="function"==typeof z?z:(0,ze.Z)(z),A=null==X?oi:"function"==typeof X?X:(0,c.Z)(X);return this.select(function(){return this.insertBefore(lt.apply(this,arguments),A.apply(this,arguments)||null)})},remove:function gi(){return this.each(mi)},clone:function Ri(z){return this.select(z?tr:Si)},datum:function Ni(z){return arguments.length?this.property("__data__",z):this.node().__data__},on:function En(z,X,lt){var bt,Pt,A=Qi(z+""),Lt=A.length;if(!(arguments.length<2)){for(Gt=X?fe:Bi,bt=0;bt<Lt;++bt)this.each(Gt(A[bt],X,lt));return this}var Gt=this.node().__on;if(Gt)for(var Q,Jt=0,Yt=Gt.length;Jt<Yt;++Jt)for(bt=0,Q=Gt[Jt];bt<Lt;++bt)if((Pt=A[bt]).type===Q.type&&Pt.name===Q.name)return Q.value},dispatch:function Wn(z,X){return this.each(("function"==typeof X?nn:mn)(z,X))},[Symbol.iterator]:function*li(){for(var z=this._groups,X=0,lt=z.length;X<lt;++X)for(var Pt,A=z[X],bt=0,Lt=A.length;bt<Lt;++bt)(Pt=A[bt])&&(yield Pt)}};const dn=Zi},24476:(w,D,s)=>{"use strict";s.d(D,{S:()=>t,Z:()=>p});var c=s(2442);function x(d){return function(){this.style.removeProperty(d)}}function _(d,l,h){return function(){this.style.setProperty(d,l,h)}}function m(d,l,h){return function(){var f=l.apply(this,arguments);null==f?this.style.removeProperty(d):this.style.setProperty(d,f,h)}}function p(d,l,h){return arguments.length>1?this.each((null==l?x:"function"==typeof l?m:_)(d,l,h??"")):t(this.node(),d)}function t(d,l){return d.style.getPropertyValue(l)||(0,c.Z)(d).getComputedStyle(d,null).getPropertyValue(l)}},29742:(w,D,s)=>{"use strict";function c(){}function x(_){return null==_?c:function(){return this.querySelector(_)}}s.d(D,{Z:()=>x})},32037:(w,D,s)=>{"use strict";function c(){return[]}function x(_){return null==_?c:function(){return this.querySelectorAll(_)}}s.d(D,{Z:()=>x})},75819:(w,D,s)=>{"use strict";function c(x){let _;for(;_=x.sourceEvent;)x=_;return x}s.d(D,{Z:()=>c})},2442:(w,D,s)=>{"use strict";function c(x){return x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView}s.d(D,{Z:()=>c})},73339:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(49194);function x(_,m,p){var t=new c.B7;return t.restart(function(d){t.stop(),_(d+m)},m=null==m?0:+m,p),t}},49194:(w,D,s)=>{"use strict";s.d(D,{B7:()=>L,HT:()=>I,R8:()=>B,zO:()=>g});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(G){setTimeout(G,17)};function g(){return l||(u(C),l=f.now()+h)}function C(){l=0}function L(){this._call=this._time=this._next=null}function I(G,tt,K){var st=new L;return st.restart(G,tt,K),st}function B(){g(),++c;for(var tt,G=p;G;)(tt=l-G._time)>=0&&G._call.call(null,tt),G=G._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{B()}finally{c=0,function Z(){for(var G,K,tt=p,st=1/0;tt;)tt._call?(st>tt._time&&(st=tt._time),G=tt,tt=tt._next):(K=tt._next,tt._next=null,tt=G?G._next=K:p=K);t=G,H(st)}(),l=0}}function R(){var G=f.now(),tt=G-d;tt>1e3&&(h-=tt,d=G)}function H(G){c||(x&&(x=clearTimeout(x)),G-l>24?(G<1/0&&(x=setTimeout(M,G-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(R,1e3)),c=1,u(M)))}L.prototype=I.prototype={constructor:L,restart:function(G,tt,K){if("function"!=typeof G)throw new TypeError("callback is not a function");K=(null==K?g():+K)+(null==tt?0:+tt),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=G,this._time=K,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}}},18429:(w,D,s)=>{"use strict";s.r(D),s.d(D,{active:()=>dn,interrupt:()=>Z,transition:()=>mn});var c=s(37853),x=s(25922),_=s(49194),m=s(73339),p=(0,x.Z)("start","end","cancel","interrupt"),t=[];function L(z,X,lt,A,bt,Lt){var Pt=z.__transition;if(Pt){if(lt in Pt)return}else z.__transition={};!function R(z,X,lt){var bt,A=z.__transition;function Pt(Yt){var Q,pt,mt,gt;if(1!==lt.state)return Jt();for(Q in A)if((gt=A[Q]).name===lt.name){if(3===gt.state)return(0,m.Z)(Pt);4===gt.state?(gt.state=6,gt.timer.stop(),gt.on.call("interrupt",z,z.__data__,gt.index,gt.group),delete A[Q]):+Q<X&&(gt.state=6,gt.timer.stop(),gt.on.call("cancel",z,z.__data__,gt.index,gt.group),delete A[Q])}if((0,m.Z)(function(){3===lt.state&&(lt.state=4,lt.timer.restart(Gt,lt.delay,lt.time),Gt(Yt))}),lt.state=2,lt.on.call("start",z,z.__data__,lt.index,lt.group),2===lt.state){for(lt.state=3,bt=new Array(mt=lt.tween.length),Q=0,pt=-1;Q<mt;++Q)(gt=lt.tween[Q].value.call(z,z.__data__,lt.index,lt.group))&&(bt[++pt]=gt);bt.length=pt+1}}function Gt(Yt){for(var Q=Yt<lt.duration?lt.ease.call(null,Yt/lt.duration):(lt.timer.restart(Jt),lt.state=5,1),pt=-1,mt=bt.length;++pt<mt;)bt[pt].call(z,Q);5===lt.state&&(lt.on.call("end",z,z.__data__,lt.index,lt.group),Jt())}function Jt(){for(var Yt in lt.state=6,lt.timer.stop(),delete A[X],A)return;delete z.__transition}A[X]=lt,lt.timer=(0,_.HT)(function Lt(Yt){lt.state=1,lt.timer.restart(Pt,lt.delay,lt.time),lt.delay<=Yt&&Pt(Yt-lt.delay)},0,lt.time)}(z,lt,{name:X,index:A,group:bt,on:p,tween:t,time:Lt.time,delay:Lt.delay,duration:Lt.duration,ease:Lt.ease,timer:null,state:0})}function I(z,X){var lt=M(z,X);if(lt.state>0)throw new Error("too late; already scheduled");return lt}function B(z,X){var lt=M(z,X);if(lt.state>3)throw new Error("too late; already running");return lt}function M(z,X){var lt=z.__transition;if(!lt||!(lt=lt[X]))throw new Error("transition not found");return lt}function Z(z,X){var A,bt,Pt,lt=z.__transition,Lt=!0;if(lt){for(Pt in X=null==X?null:X+"",lt)(A=lt[Pt]).name===X?(bt=A.state>2&&A.state<5,A.state=6,A.timer.stop(),A.on.call(bt?"interrupt":"cancel",z,z.__data__,A.index,A.group),delete lt[Pt]):Lt=!1;Lt&&delete z.__transition}}var G=s(75349),tt=s(36175);function K(z,X){var lt,A;return function(){var bt=B(this,z),Lt=bt.tween;if(Lt!==lt)for(var Pt=0,Gt=(A=lt=Lt).length;Pt<Gt;++Pt)if(A[Pt].name===X){(A=A.slice()).splice(Pt,1);break}bt.tween=A}}function st(z,X,lt){var A,bt;if("function"!=typeof lt)throw new Error;return function(){var Lt=B(this,z),Pt=Lt.tween;if(Pt!==A){bt=(A=Pt).slice();for(var Gt={name:X,value:lt},Jt=0,Yt=bt.length;Jt<Yt;++Jt)if(bt[Jt].name===X){bt[Jt]=Gt;break}Jt===Yt&&bt.push(Gt)}Lt.tween=bt}}function W(z,X,lt){var A=z._id;return z.each(function(){var bt=B(this,A);(bt.value||(bt.value={}))[X]=lt.apply(this,arguments)}),function(bt){return M(bt,A).value[X]}}var et=s(52786),at=s(6738),Y=s(86811),nt=s(23096);function rt(z,X){var lt;return("number"==typeof X?at.Z:X instanceof et.ZP?Y.ZP:(lt=(0,et.ZP)(X))?(X=lt,Y.ZP):nt.Z)(z,X)}function q(z){return function(){this.removeAttribute(z)}}function F(z){return function(){this.removeAttributeNS(z.space,z.local)}}function E(z,X,lt){var A,Lt,bt=lt+"";return function(){var Pt=this.getAttribute(z);return Pt===bt?null:Pt===A?Lt:Lt=X(A=Pt,lt)}}function ut(z,X,lt){var A,Lt,bt=lt+"";return function(){var Pt=this.getAttributeNS(z.space,z.local);return Pt===bt?null:Pt===A?Lt:Lt=X(A=Pt,lt)}}function ft(z,X,lt){var A,bt,Lt;return function(){var Pt,Jt,Gt=lt(this);return null==Gt?void this.removeAttribute(z):(Pt=this.getAttribute(z))===(Jt=Gt+"")?null:Pt===A&&Jt===bt?Lt:(bt=Jt,Lt=X(A=Pt,Gt))}}function Dt(z,X,lt){var A,bt,Lt;return function(){var Pt,Jt,Gt=lt(this);return null==Gt?void this.removeAttributeNS(z.space,z.local):(Pt=this.getAttributeNS(z.space,z.local))===(Jt=Gt+"")?null:Pt===A&&Jt===bt?Lt:(bt=Jt,Lt=X(A=Pt,Gt))}}function Qt(z,X){return function(lt){this.setAttribute(z,X.call(this,lt))}}function pe(z,X){return function(lt){this.setAttributeNS(z.space,z.local,X.call(this,lt))}}function wt(z,X){var lt,A;function bt(){var Lt=X.apply(this,arguments);return Lt!==A&&(lt=(A=Lt)&&pe(z,Lt)),lt}return bt._value=X,bt}function yt(z,X){var lt,A;function bt(){var Lt=X.apply(this,arguments);return Lt!==A&&(lt=(A=Lt)&&Qt(z,Lt)),lt}return bt._value=X,bt}function zt(z,X){return function(){I(this,z).delay=+X.apply(this,arguments)}}function de(z,X){return X=+X,function(){I(this,z).delay=X}}function Mt(z,X){return function(){B(this,z).duration=+X.apply(this,arguments)}}function te(z,X){return X=+X,function(){B(this,z).duration=X}}function ae(z,X){if("function"!=typeof X)throw new Error;return function(){B(this,z).ease=X}}var Kt=s(97905);function Oe(z,X,lt){var A,bt,Lt=function Le(z){return(z+"").trim().split(/^|\s+/).every(function(X){var lt=X.indexOf(".");return lt>=0&&(X=X.slice(0,lt)),!X||"start"===X})}(X)?I:B;return function(){var Pt=Lt(this,z),Gt=Pt.on;Gt!==A&&(bt=(A=Gt).copy()).on(X,lt),Pt.on=bt}}var en=s(29742),sn=s(32037),Wt=c.ZP.prototype.constructor,_e=s(24476);function Ze(z){return function(){this.style.removeProperty(z)}}function mi(z,X,lt){return function(A){this.style.setProperty(z,X.call(this,A),lt)}}function gi(z,X,lt){var A,bt;function Lt(){var Pt=X.apply(this,arguments);return Pt!==bt&&(A=(bt=Pt)&&mi(z,Pt,lt)),A}return Lt._value=X,Lt}function _i(z){return function(X){this.textContent=z.call(this,X)}}function Qi(z){var X,lt;function A(){var bt=z.apply(this,arguments);return bt!==lt&&(X=(lt=bt)&&_i(bt)),X}return A._value=z,A}var ji=0;function Mn(z,X,lt,A){this._groups=z,this._parents=X,this._name=lt,this._id=A}function mn(z){return(0,c.ZP)().transition(z)}function nn(){return++ji}var Wn=c.ZP.prototype;Mn.prototype=mn.prototype={constructor:Mn,select:function be(z){var X=this._name,lt=this._id;"function"!=typeof z&&(z=(0,en.Z)(z));for(var A=this._groups,bt=A.length,Lt=new Array(bt),Pt=0;Pt<bt;++Pt)for(var Q,pt,Gt=A[Pt],Jt=Gt.length,Yt=Lt[Pt]=new Array(Jt),mt=0;mt<Jt;++mt)(Q=Gt[mt])&&(pt=z.call(Q,Q.__data__,mt,Gt))&&("__data__"in Q&&(pt.__data__=Q.__data__),Yt[mt]=pt,L(Yt[mt],X,lt,mt,Yt,M(Q,lt)));return new Mn(Lt,this._parents,X,lt)},selectAll:function Tt(z){var X=this._name,lt=this._id;"function"!=typeof z&&(z=(0,sn.Z)(z));for(var A=this._groups,bt=A.length,Lt=[],Pt=[],Gt=0;Gt<bt;++Gt)for(var Q,Jt=A[Gt],Yt=Jt.length,pt=0;pt<Yt;++pt)if(Q=Jt[pt]){for(var gt,mt=z.call(Q,Q.__data__,pt,Jt),Ut=M(Q,lt),Xt=0,kt=mt.length;Xt<kt;++Xt)(gt=mt[Xt])&&L(gt,X,lt,Xt,mt,Ut);Lt.push(mt),Pt.push(Q)}return new Mn(Lt,Pt,X,lt)},filter:function xe(z){"function"!=typeof z&&(z=(0,Kt.Z)(z));for(var X=this._groups,lt=X.length,A=new Array(lt),bt=0;bt<lt;++bt)for(var Jt,Lt=X[bt],Pt=Lt.length,Gt=A[bt]=[],Yt=0;Yt<Pt;++Yt)(Jt=Lt[Yt])&&z.call(Jt,Jt.__data__,Yt,Lt)&&Gt.push(Jt);return new Mn(A,this._parents,this._name,this._id)},merge:function Te(z){if(z._id!==this._id)throw new Error;for(var X=this._groups,lt=z._groups,A=X.length,Lt=Math.min(A,lt.length),Pt=new Array(A),Gt=0;Gt<Lt;++Gt)for(var mt,Jt=X[Gt],Yt=lt[Gt],Q=Jt.length,pt=Pt[Gt]=new Array(Q),gt=0;gt<Q;++gt)(mt=Jt[gt]||Yt[gt])&&(pt[gt]=mt);for(;Gt<A;++Gt)Pt[Gt]=X[Gt];return new Mn(Pt,this._parents,this._name,this._id)},selection:function ce(){return new Wt(this._groups,this._parents)},transition:function fe(){for(var z=this._name,X=this._id,lt=nn(),A=this._groups,bt=A.length,Lt=0;Lt<bt;++Lt)for(var Jt,Pt=A[Lt],Gt=Pt.length,Yt=0;Yt<Gt;++Yt)if(Jt=Pt[Yt]){var Q=M(Jt,X);L(Jt,z,lt,Yt,Pt,{time:Q.time+Q.delay+Q.duration,delay:0,duration:Q.duration,ease:Q.ease})}return new Mn(A,this._parents,z,lt)},call:Wn.call,nodes:Wn.nodes,node:Wn.node,size:Wn.size,empty:Wn.empty,each:Wn.each,on:function Ee(z,X){var lt=this._id;return arguments.length<2?M(this.node(),lt).on.on(z):this.each(Oe(lt,z,X))},attr:function St(z,X){var lt=(0,tt.Z)(z),A="transform"===lt?G.w:rt;return this.attrTween(z,"function"==typeof X?(lt.local?Dt:ft)(lt,A,W(this,"attr."+z,X)):null==X?(lt.local?F:q)(lt):(lt.local?ut:E)(lt,A,X))},attrTween:function Nt(z,X){var lt="attr."+z;if(arguments.length<2)return(lt=this.tween(lt))&&lt._value;if(null==X)return this.tween(lt,null);if("function"!=typeof X)throw new Error;var A=(0,tt.Z)(z);return this.tween(lt,(A.local?wt:yt)(A,X))},style:function Mi(z,X,lt){var A="transform"==(z+="")?G.Y:rt;return null==X?this.styleTween(z,function ee(z,X){var lt,A,bt;return function(){var Lt=(0,_e.S)(this,z),Pt=(this.style.removeProperty(z),(0,_e.S)(this,z));return Lt===Pt?null:Lt===lt&&Pt===A?bt:bt=X(lt=Lt,A=Pt)}}(z,A)).on("end.style."+z,Ze(z)):"function"==typeof X?this.styleTween(z,function Cn(z,X,lt){var A,bt,Lt;return function(){var Pt=(0,_e.S)(this,z),Gt=lt(this),Jt=Gt+"";return null==Gt&&(this.style.removeProperty(z),Jt=Gt=(0,_e.S)(this,z)),Pt===Jt?null:Pt===A&&Jt===bt?Lt:(bt=Jt,Lt=X(A=Pt,Gt))}}(z,A,W(this,"style."+z,X))).each(function oi(z,X){var lt,A,bt,Gt,Lt="style."+X,Pt="end."+Lt;return function(){var Jt=B(this,z),Yt=Jt.on,Q=null==Jt.value[Lt]?Gt||(Gt=Ze(X)):void 0;(Yt!==lt||bt!==Q)&&(A=(lt=Yt).copy()).on(Pt,bt=Q),Jt.on=A}}(this._id,z)):this.styleTween(z,function ze(z,X,lt){var A,Lt,bt=lt+"";return function(){var Pt=(0,_e.S)(this,z);return Pt===bt?null:Pt===A?Lt:Lt=X(A=Pt,lt)}}(z,A,X),lt).on("end.style."+z,null)},styleTween:function Si(z,X,lt){var A="style."+(z+="");if(arguments.length<2)return(A=this.tween(A))&&A._value;if(null==X)return this.tween(A,null);if("function"!=typeof X)throw new Error;return this.tween(A,gi(z,X,lt??""))},text:function Ni(z){return this.tween("text","function"==typeof z?function Ri(z){return function(){var X=z(this);this.textContent=X??""}}(W(this,"text",z)):function tr(z){return function(){this.textContent=z}}(null==z?"":z+""))},textTween:function Bi(z){var X="text";if(arguments.length<1)return(X=this.tween(X))&&X._value;if(null==z)return this.tween(X,null);if("function"!=typeof z)throw new Error;return this.tween(X,Qi(z))},remove:function Ve(){return this.on("end.remove",function Ue(z){return function(){var X=this.parentNode;for(var lt in this.__transition)if(+lt!==z)return;X&&X.removeChild(this)}}(this._id))},tween:function j(z,X){var lt=this._id;if(z+="",arguments.length<2){for(var Pt,A=M(this.node(),lt).tween,bt=0,Lt=A.length;bt<Lt;++bt)if((Pt=A[bt]).name===z)return Pt.value;return null}return this.each((null==X?K:st)(lt,z,X))},delay:function ie(z){var X=this._id;return arguments.length?this.each(("function"==typeof z?zt:de)(X,z)):M(this.node(),X).delay},duration:function jt(z){var X=this._id;return arguments.length?this.each(("function"==typeof z?Mt:te)(X,z)):M(this.node(),X).duration},ease:function At(z){var X=this._id;return arguments.length?this.each(ae(X,z)):M(this.node(),X).ease},easeVarying:function Zt(z){if("function"!=typeof z)throw new Error;return this.each(function Ht(z,X){return function(){var lt=X.apply(this,arguments);if("function"!=typeof lt)throw new Error;B(this,z).ease=lt}}(this._id,z))},end:function En(){var z,X,lt=this,A=lt._id,bt=lt.size();return new Promise(function(Lt,Pt){var Gt={value:Pt},Jt={value:function(){0==--bt&&Lt()}};lt.each(function(){var Yt=B(this,A),Q=Yt.on;Q!==z&&((X=(z=Q).copy())._.cancel.push(Gt),X._.interrupt.push(Gt),X._.end.push(Jt)),Yt.on=X}),0===bt&&Lt()})},[Symbol.iterator]:Wn[Symbol.iterator]};var kn={time:null,delay:0,duration:250,ease:s(27065).tw};function we(z,X){for(var lt;!(lt=z.__transition)||!(lt=lt[X]);)if(!(z=z.parentNode))throw new Error(`transition ${X} not found`);return lt}c.ZP.prototype.interrupt=function H(z){return this.each(function(){Z(this,z)})},c.ZP.prototype.transition=function Zi(z){var X,lt;z instanceof Mn?(X=z._id,z=z._name):(X=nn(),(lt=kn).time=(0,_.zO)(),z=null==z?null:z+"");for(var A=this._groups,bt=A.length,Lt=0;Lt<bt;++Lt)for(var Jt,Pt=A[Lt],Gt=Pt.length,Yt=0;Yt<Gt;++Yt)(Jt=Pt[Yt])&&L(Jt,z,X,Yt,Pt,lt||we(Jt,X));return new Mn(A,this._parents,z,X)};var Fn=[null];function dn(z,X){var A,bt,lt=z.__transition;if(lt)for(bt in X=null==X?null:X+"",lt)if((A=lt[bt]).state>1&&A.name===X)return new Mn([[z]],Fn,X,+bt);return null}},46041:(w,D,s)=>{"use strict";s.r(D),s.d(D,{zoom:()=>H,zoomIdentity:()=>f,zoomTransform:()=>u});var c=s(25922),x=s(56758),_=s(76257),m=s(52016),p=s(29132),t=s(18429);const d=G=>()=>G;function l(G,{sourceEvent:tt,target:K,transform:st,dispatch:j}){Object.defineProperties(this,{type:{value:G,enumerable:!0,configurable:!0},sourceEvent:{value:tt,enumerable:!0,configurable:!0},target:{value:K,enumerable:!0,configurable:!0},transform:{value:st,enumerable:!0,configurable:!0},_:{value:j}})}function h(G,tt,K){this.k=G,this.x=tt,this.y=K}h.prototype={constructor:h,scale:function(G){return 1===G?this:new h(this.k*G,this.x,this.y)},translate:function(G,tt){return 0===G&0===tt?this:new h(this.k,this.x+this.k*G,this.y+this.k*tt)},apply:function(G){return[G[0]*this.k+this.x,G[1]*this.k+this.y]},applyX:function(G){return G*this.k+this.x},applyY:function(G){return G*this.k+this.y},invert:function(G){return[(G[0]-this.x)/this.k,(G[1]-this.y)/this.k]},invertX:function(G){return(G-this.x)/this.k},invertY:function(G){return(G-this.y)/this.k},rescaleX:function(G){return G.copy().domain(G.range().map(this.invertX,this).map(G.invert,G))},rescaleY:function(G){return G.copy().domain(G.range().map(this.invertY,this).map(G.invert,G))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var f=new h(1,0,0);function u(G){for(;!G.__zoom;)if(!(G=G.parentNode))return f;return G.__zoom}function g(G){G.stopImmediatePropagation()}function C(G){G.preventDefault(),G.stopImmediatePropagation()}function L(G){return!(G.ctrlKey&&"wheel"!==G.type||G.button)}function I(){var G=this;return G instanceof SVGElement?(G=G.ownerSVGElement||G).hasAttribute("viewBox")?[[(G=G.viewBox.baseVal).x,G.y],[G.x+G.width,G.y+G.height]]:[[0,0],[G.width.baseVal.value,G.height.baseVal.value]]:[[0,0],[G.clientWidth,G.clientHeight]]}function B(){return this.__zoom||f}function M(G){return-G.deltaY*(1===G.deltaMode?.05:G.deltaMode?1:.002)*(G.ctrlKey?10:1)}function R(){return navigator.maxTouchPoints||"ontouchstart"in this}function Z(G,tt,K){var st=G.invertX(tt[0][0])-K[0][0],j=G.invertX(tt[1][0])-K[1][0],W=G.invertY(tt[0][1])-K[0][1],et=G.invertY(tt[1][1])-K[1][1];return G.translate(j>st?(st+j)/2:Math.min(0,st)||Math.max(0,j),et>W?(W+et)/2:Math.min(0,W)||Math.max(0,et))}function H(){var rt,q,F,G=L,tt=I,K=Z,st=M,j=R,W=[0,1/0],et=[[-1/0,-1/0],[1/0,1/0]],at=250,Y=_.Z,nt=(0,c.Z)("start","zoom","end"),E=500,ft=0,Dt=10;function St(At){At.property("__zoom",B).on("wheel.zoom",de).on("mousedown.zoom",ie).on("dblclick.zoom",Mt).filter(j).on("touchstart.zoom",te).on("touchmove.zoom",jt).on("touchend.zoom touchcancel.zoom",ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Qt(At,Ht){return(Ht=Math.max(W[0],Math.min(W[1],Ht)))===At.k?At:new h(Ht,At.x,At.y)}function pe(At,Ht,Zt){var Kt=Ht[0]-Zt[0]*At.k,xe=Ht[1]-Zt[1]*At.k;return Kt===At.x&&xe===At.y?At:new h(At.k,Kt,xe)}function wt(At){return[(+At[0][0]+ +At[1][0])/2,(+At[0][1]+ +At[1][1])/2]}function yt(At,Ht,Zt,Kt){At.on("start.zoom",function(){Nt(this,arguments).event(Kt).start()}).on("interrupt.zoom end.zoom",function(){Nt(this,arguments).event(Kt).end()}).tween("zoom",function(){var xe=this,Te=arguments,Le=Nt(xe,Te).event(Kt),Oe=tt.apply(xe,Te),Ee=null==Zt?wt(Oe):"function"==typeof Zt?Zt.apply(xe,Te):Zt,Ue=Math.max(Oe[1][0]-Oe[0][0],Oe[1][1]-Oe[0][1]),Ve=xe.__zoom,en="function"==typeof Ht?Ht.apply(xe,Te):Ht,be=Y(Ve.invert(Ee).concat(Ue/Ve.k),en.invert(Ee).concat(Ue/en.k));return function(sn){if(1===sn)sn=en;else{var Tt=be(sn),Wt=Ue/Tt[2];sn=new h(Wt,Ee[0]-Tt[0]*Wt,Ee[1]-Tt[1]*Wt)}Le.zoom(null,sn)}})}function Nt(At,Ht,Zt){return!Zt&&At.__zooming||new zt(At,Ht)}function zt(At,Ht){this.that=At,this.args=Ht,this.active=0,this.sourceEvent=null,this.extent=tt.apply(At,Ht),this.taps=0}function de(At,...Ht){if(G.apply(this,arguments)){var Zt=Nt(this,Ht).event(At),Kt=this.__zoom,xe=Math.max(W[0],Math.min(W[1],Kt.k*Math.pow(2,st.apply(this,arguments)))),Te=(0,p.Z)(At);if(Zt.wheel)(Zt.mouse[0][0]!==Te[0]||Zt.mouse[0][1]!==Te[1])&&(Zt.mouse[1]=Kt.invert(Zt.mouse[0]=Te)),clearTimeout(Zt.wheel);else{if(Kt.k===xe)return;Zt.mouse=[Te,Kt.invert(Te)],(0,t.interrupt)(this),Zt.start()}C(At),Zt.wheel=setTimeout(Le,150),Zt.zoom("mouse",K(pe(Qt(Kt,xe),Zt.mouse[0],Zt.mouse[1]),Zt.extent,et))}function Le(){Zt.wheel=null,Zt.end()}}function ie(At,...Ht){if(!F&&G.apply(this,arguments)){var Zt=Nt(this,Ht,!0).event(At),Kt=(0,m.Z)(At.view).on("mousemove.zoom",Ee,!0).on("mouseup.zoom",Ue,!0),xe=(0,p.Z)(At,Te),Te=At.currentTarget,Le=At.clientX,Oe=At.clientY;(0,x.Z)(At.view),g(At),Zt.mouse=[xe,this.__zoom.invert(xe)],(0,t.interrupt)(this),Zt.start()}function Ee(Ve){if(C(Ve),!Zt.moved){var en=Ve.clientX-Le,be=Ve.clientY-Oe;Zt.moved=en*en+be*be>ft}Zt.event(Ve).zoom("mouse",K(pe(Zt.that.__zoom,Zt.mouse[0]=(0,p.Z)(Ve,Te),Zt.mouse[1]),Zt.extent,et))}function Ue(Ve){Kt.on("mousemove.zoom mouseup.zoom",null),(0,x.D)(Ve.view,Zt.moved),C(Ve),Zt.event(Ve).end()}}function Mt(At,...Ht){if(G.apply(this,arguments)){var Zt=this.__zoom,Kt=(0,p.Z)(At.changedTouches?At.changedTouches[0]:At,this),xe=Zt.invert(Kt),Te=Zt.k*(At.shiftKey?.5:2),Le=K(pe(Qt(Zt,Te),Kt,xe),tt.apply(this,Ht),et);C(At),at>0?(0,m.Z)(this).transition().duration(at).call(yt,Le,Kt,At):(0,m.Z)(this).call(St.transform,Le,Kt,At)}}function te(At,...Ht){if(G.apply(this,arguments)){var Te,Le,Oe,Ee,Zt=At.touches,Kt=Zt.length,xe=Nt(this,Ht,At.changedTouches.length===Kt).event(At);for(g(At),Le=0;Le<Kt;++Le)Ee=[Ee=(0,p.Z)(Oe=Zt[Le],this),this.__zoom.invert(Ee),Oe.identifier],xe.touch0?!xe.touch1&&xe.touch0[2]!==Ee[2]&&(xe.touch1=Ee,xe.taps=0):(xe.touch0=Ee,Te=!0,xe.taps=1+!!rt);rt&&(rt=clearTimeout(rt)),Te&&(xe.taps<2&&(q=Ee[0],rt=setTimeout(function(){rt=null},E)),(0,t.interrupt)(this),xe.start())}}function jt(At,...Ht){if(this.__zooming){var Te,Le,Oe,Ee,Zt=Nt(this,Ht).event(At),Kt=At.changedTouches,xe=Kt.length;for(C(At),Te=0;Te<xe;++Te)Oe=(0,p.Z)(Le=Kt[Te],this),Zt.touch0&&Zt.touch0[2]===Le.identifier?Zt.touch0[0]=Oe:Zt.touch1&&Zt.touch1[2]===Le.identifier&&(Zt.touch1[0]=Oe);if(Le=Zt.that.__zoom,Zt.touch1){var Ue=Zt.touch0[0],Ve=Zt.touch0[1],en=Zt.touch1[0],be=Zt.touch1[1],sn=(sn=en[0]-Ue[0])*sn+(sn=en[1]-Ue[1])*sn,Tt=(Tt=be[0]-Ve[0])*Tt+(Tt=be[1]-Ve[1])*Tt;Le=Qt(Le,Math.sqrt(sn/Tt)),Oe=[(Ue[0]+en[0])/2,(Ue[1]+en[1])/2],Ee=[(Ve[0]+be[0])/2,(Ve[1]+be[1])/2]}else{if(!Zt.touch0)return;Oe=Zt.touch0[0],Ee=Zt.touch0[1]}Zt.zoom("touch",K(pe(Le,Oe,Ee),Zt.extent,et))}}function ae(At,...Ht){if(this.__zooming){var Te,Le,Zt=Nt(this,Ht).event(At),Kt=At.changedTouches,xe=Kt.length;for(g(At),F&&clearTimeout(F),F=setTimeout(function(){F=null},E),Te=0;Te<xe;++Te)Le=Kt[Te],Zt.touch0&&Zt.touch0[2]===Le.identifier?delete Zt.touch0:Zt.touch1&&Zt.touch1[2]===Le.identifier&&delete Zt.touch1;if(Zt.touch1&&!Zt.touch0&&(Zt.touch0=Zt.touch1,delete Zt.touch1),Zt.touch0)Zt.touch0[1]=this.__zoom.invert(Zt.touch0[0]);else if(Zt.end(),2===Zt.taps&&(Le=(0,p.Z)(Le,this),Math.hypot(q[0]-Le[0],q[1]-Le[1])<Dt)){var Oe=(0,m.Z)(this).on("dblclick.zoom");Oe&&Oe.apply(this,arguments)}}}return St.transform=function(At,Ht,Zt,Kt){var xe=At.selection?At.selection():At;xe.property("__zoom",B),At!==xe?yt(At,Ht,Zt,Kt):xe.interrupt().each(function(){Nt(this,arguments).event(Kt).start().zoom(null,"function"==typeof Ht?Ht.apply(this,arguments):Ht).end()})},St.scaleBy=function(At,Ht,Zt,Kt){St.scaleTo(At,function(){var xe=this.__zoom.k,Te="function"==typeof Ht?Ht.apply(this,arguments):Ht;return xe*Te},Zt,Kt)},St.scaleTo=function(At,Ht,Zt,Kt){St.transform(At,function(){var xe=tt.apply(this,arguments),Te=this.__zoom,Le=null==Zt?wt(xe):"function"==typeof Zt?Zt.apply(this,arguments):Zt,Oe=Te.invert(Le),Ee="function"==typeof Ht?Ht.apply(this,arguments):Ht;return K(pe(Qt(Te,Ee),Le,Oe),xe,et)},Zt,Kt)},St.translateBy=function(At,Ht,Zt,Kt){St.transform(At,function(){return K(this.__zoom.translate("function"==typeof Ht?Ht.apply(this,arguments):Ht,"function"==typeof Zt?Zt.apply(this,arguments):Zt),tt.apply(this,arguments),et)},null,Kt)},St.translateTo=function(At,Ht,Zt,Kt,xe){St.transform(At,function(){var Te=tt.apply(this,arguments),Le=this.__zoom,Oe=null==Kt?wt(Te):"function"==typeof Kt?Kt.apply(this,arguments):Kt;return K(f.translate(Oe[0],Oe[1]).scale(Le.k).translate("function"==typeof Ht?-Ht.apply(this,arguments):-Ht,"function"==typeof Zt?-Zt.apply(this,arguments):-Zt),Te,et)},Kt,xe)},zt.prototype={event:function(At){return At&&(this.sourceEvent=At),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(At,Ht){return this.mouse&&"mouse"!==At&&(this.mouse[1]=Ht.invert(this.mouse[0])),this.touch0&&"touch"!==At&&(this.touch0[1]=Ht.invert(this.touch0[0])),this.touch1&&"touch"!==At&&(this.touch1[1]=Ht.invert(this.touch1[0])),this.that.__zoom=Ht,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(At){var Ht=(0,m.Z)(this.that).datum();nt.call(At,this.that,new l(At,{sourceEvent:this.sourceEvent,target:St,type:At,transform:this.that.__zoom,dispatch:nt}),Ht)}},St.wheelDelta=function(At){return arguments.length?(st="function"==typeof At?At:d(+At),St):st},St.filter=function(At){return arguments.length?(G="function"==typeof At?At:d(!!At),St):G},St.touchable=function(At){return arguments.length?(j="function"==typeof At?At:d(!!At),St):j},St.extent=function(At){return arguments.length?(tt="function"==typeof At?At:d([[+At[0][0],+At[0][1]],[+At[1][0],+At[1][1]]]),St):tt},St.scaleExtent=function(At){return arguments.length?(W[0]=+At[0],W[1]=+At[1],St):[W[0],W[1]]},St.translateExtent=function(At){return arguments.length?(et[0][0]=+At[0][0],et[1][0]=+At[1][0],et[0][1]=+At[0][1],et[1][1]=+At[1][1],St):[[et[0][0],et[0][1]],[et[1][0],et[1][1]]]},St.constrain=function(At){return arguments.length?(K=At,St):K},St.duration=function(At){return arguments.length?(at=+At,St):at},St.interpolate=function(At){return arguments.length?(Y=At,St):Y},St.on=function(){var At=nt.on.apply(nt,arguments);return At===nt?St:At},St.clickDistance=function(At){return arguments.length?(ft=(At=+At)*At,St):Math.sqrt(ft)},St.tapDistance=function(At){return arguments.length?(Dt=+At,St):Dt},St}u.prototype=h.prototype},59695:(w,D,s)=>{w.exports={graphlib:s(36456),layout:s(14850),debug:s(71914),util:{time:s(11510).time,notime:s(11510).notime},version:s(28126)}},12234:(w,D,s)=>{"use strict";var c=s(45760),x=s(67365);w.exports={run:function _(t){var d="greedy"===t.graph().acyclicer?x(t,function l(h){return function(f){return h.edge(f).weight}}(t)):function m(t){var d=[],l={},h={};return c.forEach(t.nodes(),function f(u){c.has(h,u)||(h[u]=!0,l[u]=!0,c.forEach(t.outEdges(u),function(g){c.has(l,g.w)?d.push(g):f(g.w)}),delete l[u])}),d}(t);c.forEach(d,function(h){var f=t.edge(h);t.removeEdge(h),f.forwardName=h.name,f.reversed=!0,t.setEdge(h.w,h.v,f,c.uniqueId("rev"))})},undo:function p(t){c.forEach(t.edges(),function(d){var l=t.edge(d);if(l.reversed){t.removeEdge(d);var h=l.forwardName;delete l.reversed,delete l.forwardName,t.setEdge(d.w,d.v,l,h)}})}}},79999:(w,D,s)=>{var c=s(45760),x=s(11510);function m(p,t,d,l,h,f){var g=h[t][f-1],C=x.addDummyNode(p,"border",{width:0,height:0,rank:f,borderType:t},d);h[t][f]=C,p.setParent(C,l),g&&p.setEdge(g,C,{weight:1})}w.exports=function _(p){c.forEach(p.children(),function t(d){var l=p.children(d),h=p.node(d);if(l.length&&c.forEach(l,t),c.has(h,"minRank")){h.borderLeft=[],h.borderRight=[];for(var f=h.minRank,u=h.maxRank+1;f<u;++f)m(p,"borderLeft","_bl",d,h,f),m(p,"borderRight","_br",d,h,f)}})}},83870:(w,D,s)=>{"use strict";var c=s(45760);function m(f){c.forEach(f.nodes(),function(u){p(f.node(u))}),c.forEach(f.edges(),function(u){p(f.edge(u))})}function p(f){var u=f.width;f.width=f.height,f.height=u}function d(f){f.y=-f.y}function h(f){var u=f.x;f.x=f.y,f.y=u}w.exports={adjust:function x(f){var u=f.graph().rankdir.toLowerCase();("lr"===u||"rl"===u)&&m(f)},undo:function _(f){var u=f.graph().rankdir.toLowerCase();("bt"===u||"rl"===u)&&function t(f){c.forEach(f.nodes(),function(u){d(f.node(u))}),c.forEach(f.edges(),function(u){var g=f.edge(u);c.forEach(g.points,d),c.has(g,"y")&&d(g)})}(f),("lr"===u||"rl"===u)&&(function l(f){c.forEach(f.nodes(),function(u){h(f.node(u))}),c.forEach(f.edges(),function(u){var g=f.edge(u);c.forEach(g.points,h),c.has(g,"x")&&h(g)})}(f),m(f))}}},3226:w=>{function D(){var x={};x._next=x._prev=x,this._sentinel=x}function s(x){x._prev._next=x._next,x._next._prev=x._prev,delete x._next,delete x._prev}function c(x,_){if("_next"!==x&&"_prev"!==x)return _}w.exports=D,D.prototype.dequeue=function(){var x=this._sentinel,_=x._prev;if(_!==x)return s(_),_},D.prototype.enqueue=function(x){var _=this._sentinel;x._prev&&x._next&&s(x),x._next=_._next,_._next._prev=x,_._next=x,x._prev=_},D.prototype.toString=function(){for(var x=[],_=this._sentinel,m=_._prev;m!==_;)x.push(JSON.stringify(m,c)),m=m._prev;return"["+x.join(", ")+"]"}},71914:(w,D,s)=>{var c=s(45760),x=s(11510),_=s(36456).Graph;w.exports={debugOrdering:function m(p){var t=x.buildLayerMatrix(p),d=new _({compound:!0,multigraph:!0}).setGraph({});return c.forEach(p.nodes(),function(l){d.setNode(l,{label:l}),d.setParent(l,"layer"+p.node(l).rank)}),c.forEach(p.edges(),function(l){d.setEdge(l.v,l.w,{},l.name)}),c.forEach(t,function(l,h){d.setNode("layer"+h,{rank:"same"}),c.reduce(l,function(u,g){return d.setEdge(u,g,{style:"invis"}),g})}),d}}},36456:(w,D,s)=>{var c;try{c=s(85510)}catch{}c||(c=window.graphlib),w.exports=c},67365:(w,D,s)=>{var c=s(45760),x=s(36456).Graph,_=s(3226);w.exports=function p(f,u){if(f.nodeCount()<=1)return[];var g=function l(f,u){var g=new x,C=0,L=0;c.forEach(f.nodes(),function(M){g.setNode(M,{v:M,in:0,out:0})}),c.forEach(f.edges(),function(M){var R=g.edge(M.v,M.w)||0,Z=u(M);g.setEdge(M.v,M.w,R+Z),L=Math.max(L,g.node(M.v).out+=Z),C=Math.max(C,g.node(M.w).in+=Z)});var I=c.range(L+C+3).map(function(){return new _}),B=C+1;return c.forEach(g.nodes(),function(M){h(I,B,g.node(M))}),{graph:g,buckets:I,zeroIdx:B}}(f,u||m),C=function t(f,u,g){for(var B,C=[],L=u[u.length-1],I=u[0];f.nodeCount();){for(;B=I.dequeue();)d(f,u,g,B);for(;B=L.dequeue();)d(f,u,g,B);if(f.nodeCount())for(var M=u.length-2;M>0;--M)if(B=u[M].dequeue()){C=C.concat(d(f,u,g,B,!0));break}}return C}(g.graph,g.buckets,g.zeroIdx);return c.flatten(c.map(C,function(L){return f.outEdges(L.v,L.w)}),!0)};var m=c.constant(1);function d(f,u,g,C,L){var I=L?[]:void 0;return c.forEach(f.inEdges(C.v),function(B){var M=f.edge(B),R=f.node(B.v);L&&I.push({v:B.v,w:B.w}),R.out-=M,h(u,g,R)}),c.forEach(f.outEdges(C.v),function(B){var M=f.edge(B),Z=f.node(B.w);Z.in-=M,h(u,g,Z)}),f.removeNode(C.v),I}function h(f,u,g){g.out?g.in?f[g.out-g.in+u].enqueue(g):f[f.length-1].enqueue(g):f[0].enqueue(g)}},14850:(w,D,s)=>{"use strict";var c=s(45760),x=s(12234),_=s(91496),m=s(94124),p=s(11510).normalizeRanks,t=s(60162),d=s(11510).removeEmptyRanks,l=s(1230),h=s(79999),f=s(83870),u=s(32974),g=s(78226),C=s(11510),L=s(36456).Graph;w.exports=function I(wt,yt){var Nt=yt&&yt.debugTiming?C.time:C.notime;Nt("layout",function(){var zt=Nt("  buildLayoutGraph",function(){return function W(wt){var yt=new L({multigraph:!0,compound:!0}),Nt=pe(wt.graph());return yt.setGraph(c.merge({},Z,Qt(Nt,R),c.pick(Nt,H))),c.forEach(wt.nodes(),function(zt){var de=pe(wt.node(zt));yt.setNode(zt,c.defaults(Qt(de,G),tt)),yt.setParent(zt,wt.parent(zt))}),c.forEach(wt.edges(),function(zt){var de=pe(wt.edge(zt));yt.setEdge(zt,c.merge({},st,Qt(de,K),c.pick(de,j)))}),yt}(wt)});Nt("  runLayout",function(){!function B(wt,yt){yt("    makeSpaceForEdgeLabels",function(){!function et(wt){var yt=wt.graph();yt.ranksep/=2,c.forEach(wt.edges(),function(Nt){var zt=wt.edge(Nt);zt.minlen*=2,"c"!==zt.labelpos.toLowerCase()&&("TB"===yt.rankdir||"BT"===yt.rankdir?zt.width+=zt.labeloffset:zt.height+=zt.labeloffset)})}(wt)}),yt("    removeSelfEdges",function(){!function ft(wt){c.forEach(wt.edges(),function(yt){if(yt.v===yt.w){var Nt=wt.node(yt.v);Nt.selfEdges||(Nt.selfEdges=[]),Nt.selfEdges.push({e:yt,label:wt.edge(yt)}),wt.removeEdge(yt)}})}(wt)}),yt("    acyclic",function(){x.run(wt)}),yt("    nestingGraph.run",function(){l.run(wt)}),yt("    rank",function(){m(C.asNonCompoundGraph(wt))}),yt("    injectEdgeLabelProxies",function(){!function at(wt){c.forEach(wt.edges(),function(yt){var Nt=wt.edge(yt);if(Nt.width&&Nt.height){var zt=wt.node(yt.v),de=wt.node(yt.w);C.addDummyNode(wt,"edge-proxy",{rank:(de.rank-zt.rank)/2+zt.rank,e:yt},"_ep")}})}(wt)}),yt("    removeEmptyRanks",function(){d(wt)}),yt("    nestingGraph.cleanup",function(){l.cleanup(wt)}),yt("    normalizeRanks",function(){p(wt)}),yt("    assignRankMinMax",function(){!function Y(wt){var yt=0;c.forEach(wt.nodes(),function(Nt){var zt=wt.node(Nt);zt.borderTop&&(zt.minRank=wt.node(zt.borderTop).rank,zt.maxRank=wt.node(zt.borderBottom).rank,yt=c.max(yt,zt.maxRank))}),wt.graph().maxRank=yt}(wt)}),yt("    removeEdgeLabelProxies",function(){!function nt(wt){c.forEach(wt.nodes(),function(yt){var Nt=wt.node(yt);"edge-proxy"===Nt.dummy&&(wt.edge(Nt.e).labelRank=Nt.rank,wt.removeNode(yt))})}(wt)}),yt("    normalize.run",function(){_.run(wt)}),yt("    parentDummyChains",function(){t(wt)}),yt("    addBorderSegments",function(){h(wt)}),yt("    order",function(){u(wt)}),yt("    insertSelfEdges",function(){!function Dt(wt){var yt=C.buildLayerMatrix(wt);c.forEach(yt,function(Nt){var zt=0;c.forEach(Nt,function(de,ie){var Mt=wt.node(de);Mt.order=ie+zt,c.forEach(Mt.selfEdges,function(te){C.addDummyNode(wt,"selfedge",{width:te.label.width,height:te.label.height,rank:Mt.rank,order:ie+ ++zt,e:te.e,label:te.label},"_se")}),delete Mt.selfEdges})})}(wt)}),yt("    adjustCoordinateSystem",function(){f.adjust(wt)}),yt("    position",function(){g(wt)}),yt("    positionSelfEdges",function(){!function St(wt){c.forEach(wt.nodes(),function(yt){var Nt=wt.node(yt);if("selfedge"===Nt.dummy){var zt=wt.node(Nt.e.v),de=zt.x+zt.width/2,ie=zt.y,Mt=Nt.x-de,te=zt.height/2;wt.setEdge(Nt.e,Nt.label),wt.removeNode(yt),Nt.label.points=[{x:de+2*Mt/3,y:ie-te},{x:de+5*Mt/6,y:ie-te},{x:de+Mt,y:ie},{x:de+5*Mt/6,y:ie+te},{x:de+2*Mt/3,y:ie+te}],Nt.label.x=Nt.x,Nt.label.y=Nt.y}})}(wt)}),yt("    removeBorderNodes",function(){!function ut(wt){c.forEach(wt.nodes(),function(yt){if(wt.children(yt).length){var Nt=wt.node(yt),zt=wt.node(Nt.borderTop),de=wt.node(Nt.borderBottom),ie=wt.node(c.last(Nt.borderLeft)),Mt=wt.node(c.last(Nt.borderRight));Nt.width=Math.abs(Mt.x-ie.x),Nt.height=Math.abs(de.y-zt.y),Nt.x=ie.x+Nt.width/2,Nt.y=zt.y+Nt.height/2}}),c.forEach(wt.nodes(),function(yt){"border"===wt.node(yt).dummy&&wt.removeNode(yt)})}(wt)}),yt("    normalize.undo",function(){_.undo(wt)}),yt("    fixupEdgeLabelCoords",function(){!function F(wt){c.forEach(wt.edges(),function(yt){var Nt=wt.edge(yt);if(c.has(Nt,"x"))switch(("l"===Nt.labelpos||"r"===Nt.labelpos)&&(Nt.width-=Nt.labeloffset),Nt.labelpos){case"l":Nt.x-=Nt.width/2+Nt.labeloffset;break;case"r":Nt.x+=Nt.width/2+Nt.labeloffset}})}(wt)}),yt("    undoCoordinateSystem",function(){f.undo(wt)}),yt("    translateGraph",function(){!function rt(wt){var yt=Number.POSITIVE_INFINITY,Nt=0,zt=Number.POSITIVE_INFINITY,de=0,ie=wt.graph(),Mt=ie.marginx||0,te=ie.marginy||0;function jt(ae){var At=ae.x,Ht=ae.y,Zt=ae.width,Kt=ae.height;yt=Math.min(yt,At-Zt/2),Nt=Math.max(Nt,At+Zt/2),zt=Math.min(zt,Ht-Kt/2),de=Math.max(de,Ht+Kt/2)}c.forEach(wt.nodes(),function(ae){jt(wt.node(ae))}),c.forEach(wt.edges(),function(ae){var At=wt.edge(ae);c.has(At,"x")&&jt(At)}),yt-=Mt,zt-=te,c.forEach(wt.nodes(),function(ae){var At=wt.node(ae);At.x-=yt,At.y-=zt}),c.forEach(wt.edges(),function(ae){var At=wt.edge(ae);c.forEach(At.points,function(Ht){Ht.x-=yt,Ht.y-=zt}),c.has(At,"x")&&(At.x-=yt),c.has(At,"y")&&(At.y-=zt)}),ie.width=Nt-yt+Mt,ie.height=de-zt+te}(wt)}),yt("    assignNodeIntersects",function(){!function q(wt){c.forEach(wt.edges(),function(yt){var ie,Mt,Nt=wt.edge(yt),zt=wt.node(yt.v),de=wt.node(yt.w);Nt.points?(ie=Nt.points[0],Mt=Nt.points[Nt.points.length-1]):(Nt.points=[],ie=de,Mt=zt),Nt.points.unshift(C.intersectRect(zt,ie)),Nt.points.push(C.intersectRect(de,Mt))})}(wt)}),yt("    reversePoints",function(){!function E(wt){c.forEach(wt.edges(),function(yt){var Nt=wt.edge(yt);Nt.reversed&&Nt.points.reverse()})}(wt)}),yt("    acyclic.undo",function(){x.undo(wt)})}(zt,Nt)}),Nt("  updateInputGraph",function(){!function M(wt,yt){c.forEach(wt.nodes(),function(Nt){var zt=wt.node(Nt),de=yt.node(Nt);zt&&(zt.x=de.x,zt.y=de.y,yt.children(Nt).length&&(zt.width=de.width,zt.height=de.height))}),c.forEach(wt.edges(),function(Nt){var zt=wt.edge(Nt),de=yt.edge(Nt);zt.points=de.points,c.has(de,"x")&&(zt.x=de.x,zt.y=de.y)}),wt.graph().width=yt.graph().width,wt.graph().height=yt.graph().height}(wt,zt)})})};var R=["nodesep","edgesep","ranksep","marginx","marginy"],Z={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},H=["acyclicer","ranker","rankdir","align"],G=["width","height"],tt={width:0,height:0},K=["minlen","weight","width","height","labeloffset"],st={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},j=["labelpos"];function Qt(wt,yt){return c.mapValues(c.pick(wt,yt),Number)}function pe(wt){var yt={};return c.forEach(wt,function(Nt,zt){yt[zt.toLowerCase()]=Nt}),yt}},45760:(w,D,s)=>{var c;try{c={cloneDeep:s(90733),constant:s(76684),defaults:s(28800),each:s(35474),filter:s(35281),find:s(62516),flatten:s(22274),forEach:s(89851),forIn:s(41176),has:s(54842),isUndefined:s(34235),last:s(25809),map:s(19984),mapValues:s(10203),max:s(18176),merge:s(80567),min:s(29439),minBy:s(29525),now:s(31710),pick:s(16372),range:s(90361),reduce:s(81337),sortBy:s(12906),uniqueId:s(51541),values:s(90377),zipObject:s(21617)}}catch{}c||(c=window._),w.exports=c},1230:(w,D,s)=>{var c=s(45760),x=s(11510);function m(l,h,f,u,g,C,L){var I=l.children(L);if(I.length){var B=x.addBorderNode(l,"_bt"),M=x.addBorderNode(l,"_bb"),R=l.node(L);l.setParent(B,L),R.borderTop=B,l.setParent(M,L),R.borderBottom=M,c.forEach(I,function(Z){m(l,h,f,u,g,C,Z);var H=l.node(Z),G=H.borderTop?H.borderTop:Z,tt=H.borderBottom?H.borderBottom:Z,K=H.borderTop?u:2*u,st=G!==tt?1:g-C[L]+1;l.setEdge(B,G,{weight:K,minlen:st,nestingEdge:!0}),l.setEdge(tt,M,{weight:K,minlen:st,nestingEdge:!0})}),l.parent(L)||l.setEdge(h,B,{weight:0,minlen:g+C[L]})}else L!==h&&l.setEdge(h,L,{weight:0,minlen:f})}w.exports={run:function _(l){var h=x.addDummyNode(l,"root",{},"_root"),f=function p(l){var h={};function f(u,g){var C=l.children(u);C&&C.length&&c.forEach(C,function(L){f(L,g+1)}),h[u]=g}return c.forEach(l.children(),function(u){f(u,1)}),h}(l),u=c.max(c.values(f))-1,g=2*u+1;l.graph().nestingRoot=h,c.forEach(l.edges(),function(L){l.edge(L).minlen*=g});var C=function t(l){return c.reduce(l.edges(),function(h,f){return h+l.edge(f).weight},0)}(l)+1;c.forEach(l.children(),function(L){m(l,h,g,C,u,f,L)}),l.graph().nodeRankFactor=g},cleanup:function d(l){var h=l.graph();l.removeNode(h.nestingRoot),delete h.nestingRoot,c.forEach(l.edges(),function(f){l.edge(f).nestingEdge&&l.removeEdge(f)})}}},91496:(w,D,s)=>{"use strict";var c=s(45760),x=s(11510);w.exports={run:function _(t){t.graph().dummyChains=[],c.forEach(t.edges(),function(d){!function m(t,d){var l=d.v,h=t.node(l).rank,f=d.w,u=t.node(f).rank,g=d.name,C=t.edge(d),L=C.labelRank;if(u!==h+1){var I,B,M;for(t.removeEdge(d),M=0,++h;h<u;++M,++h)C.points=[],I=x.addDummyNode(t,"edge",B={width:0,height:0,edgeLabel:C,edgeObj:d,rank:h},"_d"),h===L&&(B.width=C.width,B.height=C.height,B.dummy="edge-label",B.labelpos=C.labelpos),t.setEdge(l,I,{weight:C.weight},g),0===M&&t.graph().dummyChains.push(I),l=I;t.setEdge(l,f,{weight:C.weight},g)}}(t,d)})},undo:function p(t){c.forEach(t.graph().dummyChains,function(d){var f,l=t.node(d),h=l.edgeLabel;for(t.setEdge(l.edgeObj,h);l.dummy;)f=t.successors(d)[0],t.removeNode(d),h.points.push({x:l.x,y:l.y}),"edge-label"===l.dummy&&(h.x=l.x,h.y=l.y,h.width=l.width,h.height=l.height),l=t.node(d=f)})}}},33034:(w,D,s)=>{var c=s(45760);w.exports=function x(_,m,p){var d,t={};c.forEach(p,function(l){for(var f,u,h=_.parent(l);h;){if((f=_.parent(h))?(u=t[f],t[f]=h):(u=d,d=h),u&&u!==h)return void m.setEdge(u,h);h=f}})}},81323:(w,D,s)=>{var c=s(45760);w.exports=function x(_,m){return c.map(m,function(p){var t=_.inEdges(p);if(t.length){var d=c.reduce(t,function(l,h){var f=_.edge(h),u=_.node(h.v);return{sum:l.sum+f.weight*u.order,weight:l.weight+f.weight}},{sum:0,weight:0});return{v:p,barycenter:d.sum/d.weight,weight:d.weight}}return{v:p}})}},1686:(w,D,s)=>{var c=s(45760),x=s(36456).Graph;w.exports=function _(p,t,d){var l=function m(p){for(var t;p.hasNode(t=c.uniqueId("_root")););return t}(p),h=new x({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(f){return p.node(f)});return c.forEach(p.nodes(),function(f){var u=p.node(f),g=p.parent(f);(u.rank===t||u.minRank<=t&&t<=u.maxRank)&&(h.setNode(f),h.setParent(f,g||l),c.forEach(p[d](f),function(C){var L=C.v===f?C.w:C.v,I=h.edge(L,f),B=c.isUndefined(I)?0:I.weight;h.setEdge(L,f,{weight:p.edge(C).weight+B})}),c.has(u,"minRank")&&h.setNode(f,{borderLeft:u.borderLeft[t],borderRight:u.borderRight[t]}))}),h}},18796:(w,D,s)=>{"use strict";var c=s(45760);function _(m,p,t){for(var d=c.zipObject(t,c.map(t,function(C,L){return L})),l=c.flatten(c.map(p,function(C){return c.sortBy(c.map(m.outEdges(C),function(L){return{pos:d[L.w],weight:m.edge(L).weight}}),"pos")}),!0),h=1;h<t.length;)h<<=1;var f=2*h-1;h-=1;var u=c.map(new Array(f),function(){return 0}),g=0;return c.forEach(l.forEach(function(C){var L=C.pos+h;u[L]+=C.weight;for(var I=0;L>0;)L%2&&(I+=u[L+1]),u[L=L-1>>1]+=C.weight;g+=C.weight*I})),g}w.exports=function x(m,p){for(var t=0,d=1;d<p.length;++d)t+=_(m,p[d-1],p[d]);return t}},32974:(w,D,s)=>{"use strict";var c=s(45760),x=s(49402),_=s(18796),m=s(61057),p=s(1686),t=s(33034),d=s(36456).Graph,l=s(11510);function f(C,L,I){return c.map(L,function(B){return p(C,B,I)})}function u(C,L){var I=new d;c.forEach(C,function(B){var M=B.graph().root,R=m(B,M,I,L);c.forEach(R.vs,function(Z,H){B.node(Z).order=H}),t(B,I,R.vs)})}function g(C,L){c.forEach(L,function(I){c.forEach(I,function(B,M){C.node(B).order=M})})}w.exports=function h(C){var L=l.maxRank(C),I=f(C,c.range(1,L+1),"inEdges"),B=f(C,c.range(L-1,-1,-1),"outEdges"),M=x(C);g(C,M);for(var Z,R=Number.POSITIVE_INFINITY,H=0,G=0;G<4;++H,++G){u(H%2?I:B,H%4>=2),M=l.buildLayerMatrix(C);var tt=_(C,M);tt<R&&(G=0,Z=c.cloneDeep(M),R=tt)}g(C,Z)}},49402:(w,D,s)=>{"use strict";var c=s(45760);w.exports=function x(_){var m={},p=c.filter(_.nodes(),function(f){return!_.children(f).length}),t=c.max(c.map(p,function(f){return _.node(f).rank})),d=c.map(c.range(t+1),function(){return[]}),h=c.sortBy(p,function(f){return _.node(f).rank});return c.forEach(h,function l(f){if(!c.has(m,f)){m[f]=!0;var u=_.node(f);d[u.rank].push(f),c.forEach(_.successors(f),l)}}),d}},83826:(w,D,s)=>{"use strict";var c=s(45760);w.exports=function x(p,t){var d={};return c.forEach(p,function(h,f){var u=d[h.v]={indegree:0,in:[],out:[],vs:[h.v],i:f};c.isUndefined(h.barycenter)||(u.barycenter=h.barycenter,u.weight=h.weight)}),c.forEach(t.edges(),function(h){var f=d[h.v],u=d[h.w];!c.isUndefined(f)&&!c.isUndefined(u)&&(u.indegree++,f.out.push(d[h.w]))}),function _(p){var t=[];function d(f){return function(u){u.merged||(c.isUndefined(u.barycenter)||c.isUndefined(f.barycenter)||u.barycenter>=f.barycenter)&&function m(p,t){var d=0,l=0;p.weight&&(d+=p.barycenter*p.weight,l+=p.weight),t.weight&&(d+=t.barycenter*t.weight,l+=t.weight),p.vs=t.vs.concat(p.vs),p.barycenter=d/l,p.weight=l,p.i=Math.min(t.i,p.i),t.merged=!0}(f,u)}}function l(f){return function(u){u.in.push(f),0==--u.indegree&&p.push(u)}}for(;p.length;){var h=p.pop();t.push(h),c.forEach(h.in.reverse(),d(h)),c.forEach(h.out,l(h))}return c.map(c.filter(t,function(f){return!f.merged}),function(f){return c.pick(f,["vs","i","barycenter","weight"])})}(c.filter(d,function(h){return!h.indegree}))}},61057:(w,D,s)=>{var c=s(45760),x=s(81323),_=s(83826),m=s(93803);w.exports=function p(l,h,f,u){var g=l.children(h),C=l.node(h),L=C?C.borderLeft:void 0,I=C?C.borderRight:void 0,B={};L&&(g=c.filter(g,function(tt){return tt!==L&&tt!==I}));var M=x(l,g);c.forEach(M,function(tt){if(l.children(tt.v).length){var K=p(l,tt.v,f,u);B[tt.v]=K,c.has(K,"barycenter")&&function d(l,h){c.isUndefined(l.barycenter)?(l.barycenter=h.barycenter,l.weight=h.weight):(l.barycenter=(l.barycenter*l.weight+h.barycenter*h.weight)/(l.weight+h.weight),l.weight+=h.weight)}(tt,K)}});var R=_(M,f);!function t(l,h){c.forEach(l,function(f){f.vs=c.flatten(f.vs.map(function(u){return h[u]?h[u].vs:u}),!0)})}(R,B);var Z=m(R,u);if(L&&(Z.vs=c.flatten([L,Z.vs,I],!0),l.predecessors(L).length)){var H=l.node(l.predecessors(L)[0]),G=l.node(l.predecessors(I)[0]);c.has(Z,"barycenter")||(Z.barycenter=0,Z.weight=0),Z.barycenter=(Z.barycenter*Z.weight+H.order+G.order)/(Z.weight+2),Z.weight+=2}return Z}},93803:(w,D,s)=>{var c=s(45760),x=s(11510);function m(t,d,l){for(var h;d.length&&(h=c.last(d)).i<=l;)d.pop(),t.push(h.vs),l++;return l}w.exports=function _(t,d){var l=x.partition(t,function(B){return c.has(B,"barycenter")}),h=l.lhs,f=c.sortBy(l.rhs,function(B){return-B.i}),u=[],g=0,C=0,L=0;h.sort(function p(t){return function(d,l){return d.barycenter<l.barycenter?-1:d.barycenter>l.barycenter?1:t?l.i-d.i:d.i-l.i}}(!!d)),L=m(u,f,L),c.forEach(h,function(B){L+=B.vs.length,u.push(B.vs),g+=B.barycenter*B.weight,C+=B.weight,L=m(u,f,L)});var I={vs:c.flatten(u,!0)};return C&&(I.barycenter=g/C,I.weight=C),I}},60162:(w,D,s)=>{var c=s(45760);w.exports=function x(p){var t=function m(p){var t={},d=0;return c.forEach(p.children(),function l(h){var f=d;c.forEach(p.children(h),l),t[h]={low:f,lim:d++}}),t}(p);c.forEach(p.graph().dummyChains,function(d){for(var l=p.node(d),h=l.edgeObj,f=function _(p,t,d,l){var C,L,h=[],f=[],u=Math.min(t[d].low,t[l].low),g=Math.max(t[d].lim,t[l].lim);C=d;do{C=p.parent(C),h.push(C)}while(C&&(t[C].low>u||g>t[C].lim));for(L=C,C=l;(C=p.parent(C))!==L;)f.push(C);return{path:h.concat(f.reverse()),lca:L}}(p,t,h.v,h.w),u=f.path,g=f.lca,C=0,L=u[C],I=!0;d!==h.w;){if(l=p.node(d),I){for(;(L=u[C])!==g&&p.node(L).maxRank<l.rank;)C++;L===g&&(I=!1)}if(!I){for(;C<u.length-1&&p.node(L=u[C+1]).minRank<=l.rank;)C++;L=u[C]}p.setParent(d,L),d=p.successors(d)[0]}})}},54058:(w,D,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(11510);function m(R,Z){var H={};return c.reduce(Z,function G(tt,K){var st=0,j=0,W=tt.length,et=c.last(K);return c.forEach(K,function(at,Y){var nt=function t(R,Z){if(R.node(Z).dummy)return c.find(R.predecessors(Z),function(H){return R.node(H).dummy})}(R,at),rt=nt?R.node(nt).order:W;(nt||at===et)&&(c.forEach(K.slice(j,Y+1),function(q){c.forEach(R.predecessors(q),function(F){var E=R.node(F),ut=E.order;(ut<st||rt<ut)&&(!E.dummy||!R.node(q).dummy)&&d(H,F,q)})}),j=Y+1,st=rt)}),K}),H}function p(R,Z){var H={};function G(K,st,j,W,et){var at;c.forEach(c.range(st,j),function(Y){R.node(at=K[Y]).dummy&&c.forEach(R.predecessors(at),function(nt){var rt=R.node(nt);rt.dummy&&(rt.order<W||rt.order>et)&&d(H,nt,at)})})}return c.reduce(Z,function tt(K,st){var W,j=-1,et=0;return c.forEach(st,function(at,Y){if("border"===R.node(at).dummy){var nt=R.predecessors(at);nt.length&&(W=R.node(nt[0]).order,G(st,et,Y,j,W),et=Y,j=W)}G(st,et,st.length,W,K.length)}),st}),H}function d(R,Z,H){if(Z>H){var G=Z;Z=H,H=G}var tt=R[Z];tt||(R[Z]=tt={}),tt[H]=!0}function l(R,Z,H){if(Z>H){var G=Z;Z=H,H=G}return c.has(R[Z],H)}function h(R,Z,H,G){var tt={},K={},st={};return c.forEach(Z,function(j){c.forEach(j,function(W,et){tt[W]=W,K[W]=W,st[W]=et})}),c.forEach(Z,function(j){var W=-1;c.forEach(j,function(et){var at=G(et);if(at.length)for(var Y=((at=c.sortBy(at,function(F){return st[F]})).length-1)/2,nt=Math.floor(Y),rt=Math.ceil(Y);nt<=rt;++nt){var q=at[nt];K[et]===et&&W<st[q]&&!l(H,et,q)&&(K[q]=et,K[et]=tt[et]=tt[q],W=st[q])}})}),{root:tt,align:K}}function f(R,Z,H,G,tt){var K={},st=function u(R,Z,H,G){var tt=new x,K=R.graph(),st=function B(R,Z,H){return function(G,tt,K){var et,st=G.node(tt),j=G.node(K),W=0;if(W+=st.width/2,c.has(st,"labelpos"))switch(st.labelpos.toLowerCase()){case"l":et=-st.width/2;break;case"r":et=st.width/2}if(et&&(W+=H?et:-et),et=0,W+=(st.dummy?Z:R)/2,W+=(j.dummy?Z:R)/2,W+=j.width/2,c.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":et=j.width/2;break;case"r":et=-j.width/2}return et&&(W+=H?et:-et),et=0,W}}(K.nodesep,K.edgesep,G);return c.forEach(Z,function(j){var W;c.forEach(j,function(et){var at=H[et];if(tt.setNode(at),W){var Y=H[W],nt=tt.edge(Y,at);tt.setEdge(Y,at,Math.max(st(R,et,W),nt||0))}W=et})}),tt}(R,Z,H,tt),j=tt?"borderLeft":"borderRight";function W(Y,nt){for(var rt=st.nodes(),q=rt.pop(),F={};q;)F[q]?Y(q):(F[q]=!0,rt.push(q),rt=rt.concat(nt(q))),q=rt.pop()}return W(function et(Y){K[Y]=st.inEdges(Y).reduce(function(nt,rt){return Math.max(nt,K[rt.v]+st.edge(rt))},0)},st.predecessors.bind(st)),W(function at(Y){var nt=st.outEdges(Y).reduce(function(q,F){return Math.min(q,K[F.w]-st.edge(F))},Number.POSITIVE_INFINITY),rt=R.node(Y);nt!==Number.POSITIVE_INFINITY&&rt.borderType!==j&&(K[Y]=Math.max(K[Y],nt))},st.successors.bind(st)),c.forEach(G,function(Y){K[Y]=K[H[Y]]}),K}function g(R,Z){return c.minBy(c.values(Z),function(H){var G=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;return c.forIn(H,function(K,st){var j=function M(R,Z){return R.node(Z).width}(R,st)/2;G=Math.max(K+j,G),tt=Math.min(K-j,tt)}),G-tt})}function C(R,Z){var H=c.values(Z),G=c.min(H),tt=c.max(H);c.forEach(["u","d"],function(K){c.forEach(["l","r"],function(st){var et,j=K+st,W=R[j];if(W!==Z){var at=c.values(W);(et="l"===st?G-c.min(at):tt-c.max(at))&&(R[j]=c.mapValues(W,function(Y){return Y+et}))}})})}function L(R,Z){return c.mapValues(R.ul,function(H,G){if(Z)return R[Z.toLowerCase()][G];var tt=c.sortBy(c.map(R,G));return(tt[1]+tt[2])/2})}w.exports={positionX:function I(R){var tt,Z=_.buildLayerMatrix(R),H=c.merge(m(R,Z),p(R,Z)),G={};c.forEach(["u","d"],function(st){tt="u"===st?Z:c.values(Z).reverse(),c.forEach(["l","r"],function(j){"r"===j&&(tt=c.map(tt,function(Y){return c.values(Y).reverse()}));var W=("u"===st?R.predecessors:R.successors).bind(R),et=h(0,tt,H,W),at=f(R,tt,et.root,et.align,"r"===j);"r"===j&&(at=c.mapValues(at,function(Y){return-Y})),G[st+j]=at})});var K=g(R,G);return C(G,K),L(G,R.graph().align)},findType1Conflicts:m,findType2Conflicts:p,addConflict:d,hasConflict:l,verticalAlignment:h,horizontalCompaction:f,alignCoordinates:C,findSmallestWidthAlignment:g,balance:L}},78226:(w,D,s)=>{"use strict";var c=s(45760),x=s(11510),_=s(54058).positionX;w.exports=function m(t){(function p(t){var d=x.buildLayerMatrix(t),l=t.graph().ranksep,h=0;c.forEach(d,function(f){var u=c.max(c.map(f,function(g){return t.node(g).height}));c.forEach(f,function(g){t.node(g).y=h+u/2}),h+=u+l})})(t=x.asNonCompoundGraph(t)),c.forEach(_(t),function(d,l){t.node(l).x=d})}},96632:(w,D,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(1916).slack;function p(l,h){return c.forEach(l.nodes(),function f(u){c.forEach(h.nodeEdges(u),function(g){var C=g.v,L=u===C?g.w:C;!l.hasNode(L)&&!_(h,g)&&(l.setNode(L,{}),l.setEdge(u,L,{}),f(L))})}),l.nodeCount()}function t(l,h){return c.minBy(h.edges(),function(f){if(l.hasNode(f.v)!==l.hasNode(f.w))return _(h,f)})}function d(l,h,f){c.forEach(l.nodes(),function(u){h.node(u).rank+=f})}w.exports=function m(l){var g,C,h=new x({directed:!1}),f=l.nodes()[0],u=l.nodeCount();for(h.setNode(f,{});p(h,l)<u;)g=t(h,l),C=h.hasNode(g.v)?_(l,g):-_(l,g),d(h,l,C);return h}},94124:(w,D,s)=>{"use strict";var x=s(1916).longestPath,_=s(96632),m=s(63804);w.exports=function p(h){switch(h.graph().ranker){case"network-simplex":default:!function l(h){m(h)}(h);break;case"tight-tree":!function d(h){x(h),_(h)}(h);break;case"longest-path":t(h)}};var t=x},63804:(w,D,s)=>{"use strict";var c=s(45760),x=s(96632),_=s(1916).slack,m=s(1916).longestPath,p=s(36456).alg.preorder,t=s(36456).alg.postorder,d=s(11510).simplify;function l(H){H=d(H),m(H);var tt,G=x(H);for(g(G),h(G,H);tt=L(G);)B(G,H,tt,I(G,H,tt))}function h(H,G){var tt=t(H,H.nodes());tt=tt.slice(0,tt.length-1),c.forEach(tt,function(K){!function f(H,G,tt){var K=H.node(tt);H.edge(tt,K.parent).cutvalue=u(H,G,tt)}(H,G,K)})}function u(H,G,tt){var st=H.node(tt).parent,j=!0,W=G.edge(tt,st),et=0;return W||(j=!1,W=G.edge(st,tt)),et=W.weight,c.forEach(G.nodeEdges(tt),function(at){var Y=at.v===tt,nt=Y?at.w:at.v;if(nt!==st){var rt=Y===j,q=G.edge(at).weight;if(et+=rt?q:-q,function R(H,G,tt){return H.hasEdge(G,tt)}(H,tt,nt)){var F=H.edge(tt,nt).cutvalue;et+=rt?-F:F}}}),et}function g(H,G){arguments.length<2&&(G=H.nodes()[0]),C(H,{},1,G)}function C(H,G,tt,K,st){var j=tt,W=H.node(K);return G[K]=!0,c.forEach(H.neighbors(K),function(et){c.has(G,et)||(tt=C(H,G,tt,et,K))}),W.low=j,W.lim=tt++,st?W.parent=st:delete W.parent,tt}function L(H){return c.find(H.edges(),function(G){return H.edge(G).cutvalue<0})}function I(H,G,tt){var K=tt.v,st=tt.w;G.hasEdge(K,st)||(K=tt.w,st=tt.v);var j=H.node(K),W=H.node(st),et=j,at=!1;j.lim>W.lim&&(et=W,at=!0);var Y=c.filter(G.edges(),function(nt){return at===Z(0,H.node(nt.v),et)&&at!==Z(0,H.node(nt.w),et)});return c.minBy(Y,function(nt){return _(G,nt)})}function B(H,G,tt,K){H.removeEdge(tt.v,tt.w),H.setEdge(K.v,K.w,{}),g(H),h(H,G),function M(H,G){var tt=c.find(H.nodes(),function(st){return!G.node(st).parent}),K=p(H,tt);K=K.slice(1),c.forEach(K,function(st){var j=H.node(st).parent,W=G.edge(st,j),et=!1;W||(W=G.edge(j,st),et=!0),G.node(st).rank=G.node(j).rank+(et?W.minlen:-W.minlen)})}(H,G)}function Z(H,G,tt){return tt.low<=G.lim&&G.lim<=tt.lim}w.exports=l,l.initLowLimValues=g,l.initCutValues=h,l.calcCutValue=u,l.leaveEdge=L,l.enterEdge=I,l.exchangeEdges=B},1916:(w,D,s)=>{"use strict";var c=s(45760);w.exports={longestPath:function x(m){var p={};c.forEach(m.sources(),function t(d){var l=m.node(d);if(c.has(p,d))return l.rank;p[d]=!0;var h=c.min(c.map(m.outEdges(d),function(f){return t(f.w)-m.edge(f).minlen}));return(h===Number.POSITIVE_INFINITY||null==h)&&(h=0),l.rank=h})},slack:function _(m,p){return m.node(p.w).rank-m.node(p.v).rank-m.edge(p).minlen}}},11510:(w,D,s)=>{"use strict";var c=s(45760),x=s(36456).Graph;function _(M,R,Z,H){var G;do{G=c.uniqueId(H)}while(M.hasNode(G));return Z.dummy=R,M.setNode(G,Z),G}function C(M){return c.max(c.map(M.nodes(),function(R){var Z=M.node(R).rank;if(!c.isUndefined(Z))return Z}))}w.exports={addDummyNode:_,simplify:function m(M){var R=(new x).setGraph(M.graph());return c.forEach(M.nodes(),function(Z){R.setNode(Z,M.node(Z))}),c.forEach(M.edges(),function(Z){var H=R.edge(Z.v,Z.w)||{weight:0,minlen:1},G=M.edge(Z);R.setEdge(Z.v,Z.w,{weight:H.weight+G.weight,minlen:Math.max(H.minlen,G.minlen)})}),R},asNonCompoundGraph:function p(M){var R=new x({multigraph:M.isMultigraph()}).setGraph(M.graph());return c.forEach(M.nodes(),function(Z){M.children(Z).length||R.setNode(Z,M.node(Z))}),c.forEach(M.edges(),function(Z){R.setEdge(Z,M.edge(Z))}),R},successorWeights:function t(M){var R=c.map(M.nodes(),function(Z){var H={};return c.forEach(M.outEdges(Z),function(G){H[G.w]=(H[G.w]||0)+M.edge(G).weight}),H});return c.zipObject(M.nodes(),R)},predecessorWeights:function d(M){var R=c.map(M.nodes(),function(Z){var H={};return c.forEach(M.inEdges(Z),function(G){H[G.v]=(H[G.v]||0)+M.edge(G).weight}),H});return c.zipObject(M.nodes(),R)},intersectRect:function l(M,R){var j,W,Z=M.x,H=M.y,G=R.x-Z,tt=R.y-H,K=M.width/2,st=M.height/2;if(!G&&!tt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(tt)*K>Math.abs(G)*st?(tt<0&&(st=-st),j=st*G/tt,W=st):(G<0&&(K=-K),j=K,W=K*tt/G),{x:Z+j,y:H+W}},buildLayerMatrix:function h(M){var R=c.map(c.range(C(M)+1),function(){return[]});return c.forEach(M.nodes(),function(Z){var H=M.node(Z),G=H.rank;c.isUndefined(G)||(R[G][H.order]=Z)}),R},normalizeRanks:function f(M){var R=c.min(c.map(M.nodes(),function(Z){return M.node(Z).rank}));c.forEach(M.nodes(),function(Z){var H=M.node(Z);c.has(H,"rank")&&(H.rank-=R)})},removeEmptyRanks:function u(M){var R=c.min(c.map(M.nodes(),function(tt){return M.node(tt).rank})),Z=[];c.forEach(M.nodes(),function(tt){var K=M.node(tt).rank-R;Z[K]||(Z[K]=[]),Z[K].push(tt)});var H=0,G=M.graph().nodeRankFactor;c.forEach(Z,function(tt,K){c.isUndefined(tt)&&K%G!=0?--H:H&&c.forEach(tt,function(st){M.node(st).rank+=H})})},addBorderNode:function g(M,R,Z,H){var G={width:0,height:0};return arguments.length>=4&&(G.rank=Z,G.order=H),_(M,"border",G,R)},maxRank:C,partition:function L(M,R){var Z={lhs:[],rhs:[]};return c.forEach(M,function(H){R(H)?Z.lhs.push(H):Z.rhs.push(H)}),Z},time:function I(M,R){var Z=c.now();try{return R()}finally{console.log(M+" time: "+(c.now()-Z)+"ms")}},notime:function B(M,R){return R()}}},28126:w=>{w.exports="0.8.5"},85510:(w,D,s)=>{var c=s(51838);w.exports={Graph:c.Graph,json:s(21088),alg:s(83430),version:c.version}},86730:(w,D,s)=>{var c=s(79138);w.exports=function x(_){var t,m={},p=[];function d(l){c.has(m,l)||(m[l]=!0,t.push(l),c.each(_.successors(l),d),c.each(_.predecessors(l),d))}return c.each(_.nodes(),function(l){t=[],d(l),t.length&&p.push(t)}),p}},22163:(w,D,s)=>{var c=s(79138);function _(m,p,t,d,l,h){c.has(d,p)||(d[p]=!0,t||h.push(p),c.each(l(p),function(f){_(m,f,t,d,l,h)}),t&&h.push(p))}w.exports=function x(m,p,t){c.isArray(p)||(p=[p]);var d=(m.isDirected()?m.successors:m.neighbors).bind(m),l=[],h={};return c.each(p,function(f){if(!m.hasNode(f))throw new Error("Graph does not have node: "+f);_(m,f,"post"===t,h,d,l)}),l}},25668:(w,D,s)=>{var c=s(61718),x=s(79138);w.exports=function _(m,p,t){return x.transform(m.nodes(),function(d,l){d[l]=c(m,l,p,t)},{})}},61718:(w,D,s)=>{var c=s(79138),x=s(31919);w.exports=function m(t,d,l,h){return function p(t,d,l,h){var g,C,f={},u=new x,L=function(I){var B=I.v!==g?I.v:I.w,M=f[B],R=l(I),Z=C.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+I+" Weight: "+R);Z<M.distance&&(M.distance=Z,M.predecessor=g,u.decrease(B,Z))};for(t.nodes().forEach(function(I){var B=I===d?0:Number.POSITIVE_INFINITY;f[I]={distance:B},u.add(I,B)});u.size()>0&&(g=u.removeMin(),(C=f[g]).distance!==Number.POSITIVE_INFINITY);)h(g).forEach(L);return f}(t,String(d),l||_,h||function(f){return t.outEdges(f)})};var _=c.constant(1)},9611:(w,D,s)=>{var c=s(79138),x=s(73585);w.exports=function _(m){return c.filter(x(m),function(p){return p.length>1||1===p.length&&m.hasEdge(p[0],p[0])})}},22881:(w,D,s)=>{var c=s(79138);w.exports=function _(p,t,d){return function m(p,t,d){var l={},h=p.nodes();return h.forEach(function(f){l[f]={},l[f][f]={distance:0},h.forEach(function(u){f!==u&&(l[f][u]={distance:Number.POSITIVE_INFINITY})}),d(f).forEach(function(u){var g=u.v===f?u.w:u.v,C=t(u);l[f][g]={distance:C,predecessor:f}})}),h.forEach(function(f){var u=l[f];h.forEach(function(g){var C=l[g];h.forEach(function(L){var B=u[L],M=C[L],R=C[f].distance+B.distance;R<M.distance&&(M.distance=R,M.predecessor=B.predecessor)})})}),l}(p,t||x,d||function(l){return p.outEdges(l)})};var x=c.constant(1)},83430:(w,D,s)=>{w.exports={components:s(86730),dijkstra:s(61718),dijkstraAll:s(25668),findCycles:s(9611),floydWarshall:s(22881),isAcyclic:s(46693),postorder:s(46694),preorder:s(5330),prim:s(46823),tarjan:s(73585),topsort:s(52180)}},46693:(w,D,s)=>{var c=s(52180);w.exports=function x(_){try{c(_)}catch(m){if(m instanceof c.CycleException)return!1;throw m}return!0}},46694:(w,D,s)=>{var c=s(22163);w.exports=function x(_,m){return c(_,m,"post")}},5330:(w,D,s)=>{var c=s(22163);w.exports=function x(_,m){return c(_,m,"pre")}},46823:(w,D,s)=>{var c=s(79138),x=s(66568),_=s(31919);w.exports=function m(p,t){var f,d=new x,l={},h=new _;function u(C){var L=C.v===f?C.w:C.v,I=h.priority(L);if(void 0!==I){var B=t(C);B<I&&(l[L]=f,h.decrease(L,B))}}if(0===p.nodeCount())return d;c.each(p.nodes(),function(C){h.add(C,Number.POSITIVE_INFINITY),d.setNode(C)}),h.decrease(p.nodes()[0],0);for(var g=!1;h.size()>0;){if(f=h.removeMin(),c.has(l,f))d.setEdge(f,l[f]);else{if(g)throw new Error("Input graph is not connected: "+p);g=!0}p.nodeEdges(f).forEach(u)}return d}},73585:(w,D,s)=>{var c=s(79138);w.exports=function x(_){var m=0,p=[],t={},d=[];function l(h){var f=t[h]={onStack:!0,lowlink:m,index:m++};if(p.push(h),_.successors(h).forEach(function(C){c.has(t,C)?t[C].onStack&&(f.lowlink=Math.min(f.lowlink,t[C].index)):(l(C),f.lowlink=Math.min(f.lowlink,t[C].lowlink))}),f.lowlink===f.index){var g,u=[];do{g=p.pop(),t[g].onStack=!1,u.push(g)}while(h!==g);d.push(u)}}return _.nodes().forEach(function(h){c.has(t,h)||l(h)}),d}},52180:(w,D,s)=>{var c=s(79138);function x(m){var p={},t={},d=[];if(c.each(m.sinks(),function l(h){if(c.has(t,h))throw new _;c.has(p,h)||(t[h]=!0,p[h]=!0,c.each(m.predecessors(h),l),delete t[h],d.push(h))}),c.size(p)!==m.nodeCount())throw new _;return d}function _(){}w.exports=x,x.CycleException=_,_.prototype=new Error},31919:(w,D,s)=>{var c=s(79138);function x(){this._arr=[],this._keyIndices={}}w.exports=x,x.prototype.size=function(){return this._arr.length},x.prototype.keys=function(){return this._arr.map(function(_){return _.key})},x.prototype.has=function(_){return c.has(this._keyIndices,_)},x.prototype.priority=function(_){var m=this._keyIndices[_];if(void 0!==m)return this._arr[m].priority},x.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},x.prototype.add=function(_,m){var p=this._keyIndices;if(_=String(_),!c.has(p,_)){var t=this._arr,d=t.length;return p[_]=d,t.push({key:_,priority:m}),this._decrease(d),!0}return!1},x.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var _=this._arr.pop();return delete this._keyIndices[_.key],this._heapify(0),_.key},x.prototype.decrease=function(_,m){var p=this._keyIndices[_];if(m>this._arr[p].priority)throw new Error("New priority is greater than current priority. Key: "+_+" Old: "+this._arr[p].priority+" New: "+m);this._arr[p].priority=m,this._decrease(p)},x.prototype._heapify=function(_){var m=this._arr,p=2*_,t=p+1,d=_;p<m.length&&(d=m[p].priority<m[d].priority?p:d,t<m.length&&(d=m[t].priority<m[d].priority?t:d),d!==_&&(this._swap(_,d),this._heapify(d)))},x.prototype._decrease=function(_){for(var t,m=this._arr,p=m[_].priority;0!==_&&!(m[t=_>>1].priority<p);)this._swap(_,t),_=t},x.prototype._swap=function(_,m){var p=this._arr,t=this._keyIndices,d=p[_],l=p[m];p[_]=l,p[m]=d,t[l.key]=_,t[d.key]=m}},66568:(w,D,s)=>{"use strict";var c=s(79138);w.exports=p;var _="\0";function p(u){this._isDirected=!c.has(u,"directed")||u.directed,this._isMultigraph=!!c.has(u,"multigraph")&&u.multigraph,this._isCompound=!!c.has(u,"compound")&&u.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function t(u,g){u[g]?u[g]++:u[g]=1}function d(u,g){--u[g]||delete u[g]}function l(u,g,C,L){var I=""+g,B=""+C;if(!u&&I>B){var M=I;I=B,B=M}return I+"\x01"+B+"\x01"+(c.isUndefined(L)?"\0":L)}function h(u,g,C,L){var I=""+g,B=""+C;if(!u&&I>B){var M=I;I=B,B=M}var R={v:I,w:B};return L&&(R.name=L),R}function f(u,g){return l(u,g.v,g.w,g.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0,p.prototype.isDirected=function(){return this._isDirected},p.prototype.isMultigraph=function(){return this._isMultigraph},p.prototype.isCompound=function(){return this._isCompound},p.prototype.setGraph=function(u){return this._label=u,this},p.prototype.graph=function(){return this._label},p.prototype.setDefaultNodeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultNodeLabelFn=u,this},p.prototype.nodeCount=function(){return this._nodeCount},p.prototype.nodes=function(){return c.keys(this._nodes)},p.prototype.sources=function(){var u=this;return c.filter(this.nodes(),function(g){return c.isEmpty(u._in[g])})},p.prototype.sinks=function(){var u=this;return c.filter(this.nodes(),function(g){return c.isEmpty(u._out[g])})},p.prototype.setNodes=function(u,g){var C=arguments,L=this;return c.each(u,function(I){C.length>1?L.setNode(I,g):L.setNode(I)}),this},p.prototype.setNode=function(u,g){return c.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=g),this):(this._nodes[u]=arguments.length>1?g:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=_,this._children[u]={},this._children[_][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},p.prototype.node=function(u){return this._nodes[u]},p.prototype.hasNode=function(u){return c.has(this._nodes,u)},p.prototype.removeNode=function(u){var g=this;if(c.has(this._nodes,u)){var C=function(L){g.removeEdge(g._edgeObjs[L])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],c.each(this.children(u),function(L){g.setParent(L)}),delete this._children[u]),c.each(c.keys(this._in[u]),C),delete this._in[u],delete this._preds[u],c.each(c.keys(this._out[u]),C),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},p.prototype.setParent=function(u,g){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(g))g=_;else{for(var C=g+="";!c.isUndefined(C);C=this.parent(C))if(C===u)throw new Error("Setting "+g+" as parent of "+u+" would create a cycle");this.setNode(g)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=g,this._children[g][u]=!0,this},p.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},p.prototype.parent=function(u){if(this._isCompound){var g=this._parent[u];if(g!==_)return g}},p.prototype.children=function(u){if(c.isUndefined(u)&&(u=_),this._isCompound){var g=this._children[u];if(g)return c.keys(g)}else{if(u===_)return this.nodes();if(this.hasNode(u))return[]}},p.prototype.predecessors=function(u){var g=this._preds[u];if(g)return c.keys(g)},p.prototype.successors=function(u){var g=this._sucs[u];if(g)return c.keys(g)},p.prototype.neighbors=function(u){var g=this.predecessors(u);if(g)return c.union(g,this.successors(u))},p.prototype.isLeaf=function(u){return 0===(this.isDirected()?this.successors(u):this.neighbors(u)).length},p.prototype.filterNodes=function(u){var g=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});g.setGraph(this.graph());var C=this;c.each(this._nodes,function(B,M){u(M)&&g.setNode(M,B)}),c.each(this._edgeObjs,function(B){g.hasNode(B.v)&&g.hasNode(B.w)&&g.setEdge(B,C.edge(B))});var L={};function I(B){var M=C.parent(B);return void 0===M||g.hasNode(M)?(L[B]=M,M):M in L?L[M]:I(M)}return this._isCompound&&c.each(g.nodes(),function(B){g.setParent(B,I(B))}),g},p.prototype.setDefaultEdgeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultEdgeLabelFn=u,this},p.prototype.edgeCount=function(){return this._edgeCount},p.prototype.edges=function(){return c.values(this._edgeObjs)},p.prototype.setPath=function(u,g){var C=this,L=arguments;return c.reduce(u,function(I,B){return L.length>1?C.setEdge(I,B,g):C.setEdge(I,B),B}),this},p.prototype.setEdge=function(){var u,g,C,L,I=!1,B=arguments[0];"object"==typeof B&&null!==B&&"v"in B?(u=B.v,g=B.w,C=B.name,2===arguments.length&&(L=arguments[1],I=!0)):(u=B,g=arguments[1],C=arguments[3],arguments.length>2&&(L=arguments[2],I=!0)),u=""+u,g=""+g,c.isUndefined(C)||(C=""+C);var M=l(this._isDirected,u,g,C);if(c.has(this._edgeLabels,M))return I&&(this._edgeLabels[M]=L),this;if(!c.isUndefined(C)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(g),this._edgeLabels[M]=I?L:this._defaultEdgeLabelFn(u,g,C);var R=h(this._isDirected,u,g,C);return u=R.v,g=R.w,Object.freeze(R),this._edgeObjs[M]=R,t(this._preds[g],u),t(this._sucs[u],g),this._in[g][M]=R,this._out[u][M]=R,this._edgeCount++,this},p.prototype.edge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C);return this._edgeLabels[L]},p.prototype.hasEdge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C);return c.has(this._edgeLabels,L)},p.prototype.removeEdge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C),I=this._edgeObjs[L];return I&&(u=I.v,g=I.w,delete this._edgeLabels[L],delete this._edgeObjs[L],d(this._preds[g],u),d(this._sucs[u],g),delete this._in[g][L],delete this._out[u][L],this._edgeCount--),this},p.prototype.inEdges=function(u,g){var C=this._in[u];if(C){var L=c.values(C);return g?c.filter(L,function(I){return I.v===g}):L}},p.prototype.outEdges=function(u,g){var C=this._out[u];if(C){var L=c.values(C);return g?c.filter(L,function(I){return I.w===g}):L}},p.prototype.nodeEdges=function(u,g){var C=this.inEdges(u,g);if(C)return C.concat(this.outEdges(u,g))}},51838:(w,D,s)=>{w.exports={Graph:s(66568),version:s(75089)}},21088:(w,D,s)=>{var c=s(79138),x=s(66568);function m(d){return c.map(d.nodes(),function(l){var h=d.node(l),f=d.parent(l),u={v:l};return c.isUndefined(h)||(u.value=h),c.isUndefined(f)||(u.parent=f),u})}function p(d){return c.map(d.edges(),function(l){var h=d.edge(l),f={v:l.v,w:l.w};return c.isUndefined(l.name)||(f.name=l.name),c.isUndefined(h)||(f.value=h),f})}w.exports={write:function _(d){var l={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:m(d),edges:p(d)};return c.isUndefined(d.graph())||(l.value=c.clone(d.graph())),l},read:function t(d){var l=new x(d.options).setGraph(d.value);return c.each(d.nodes,function(h){l.setNode(h.v,h.value),h.parent&&l.setParent(h.v,h.parent)}),c.each(d.edges,function(h){l.setEdge({v:h.v,w:h.w,name:h.name},h.value)}),l}}},79138:(w,D,s)=>{var c;try{c={clone:s(11094),constant:s(76684),each:s(35474),filter:s(35281),has:s(54842),isArray:s(21503),isEmpty:s(71973),isFunction:s(75946),isUndefined:s(34235),keys:s(118),map:s(19984),reduce:s(81337),size:s(55637),transform:s(89416),union:s(68921),values:s(90377)}}catch{}c||(c=window._),w.exports=c},75089:w=>{w.exports="2.1.8"},50623:w=>{"use strict";w.exports=function(s){return null!=s&&"object"==typeof s&&!1===Array.isArray(s)}},52872:w=>{var D=Object.prototype.toString;function s(h){return"function"==typeof h.constructor?h.constructor.name:null}w.exports=function(f){if(void 0===f)return"undefined";if(null===f)return"null";var u=typeof f;if("boolean"===u)return"boolean";if("string"===u)return"string";if("number"===u)return"number";if("symbol"===u)return"symbol";if("function"===u)return function p(h,f){return"GeneratorFunction"===s(h)}(f)?"generatorfunction":"function";if(function c(h){return Array.isArray?Array.isArray(h):h instanceof Array}(f))return"array";if(function l(h){return!(!h.constructor||"function"!=typeof h.constructor.isBuffer)&&h.constructor.isBuffer(h)}(f))return"buffer";if(function d(h){try{if("number"==typeof h.length&&"function"==typeof h.callee)return!0}catch(f){if(-1!==f.message.indexOf("callee"))return!0}return!1}(f))return"arguments";if(function _(h){return h instanceof Date||"function"==typeof h.toDateString&&"function"==typeof h.getDate&&"function"==typeof h.setDate}(f))return"date";if(function x(h){return h instanceof Error||"string"==typeof h.message&&h.constructor&&"number"==typeof h.constructor.stackTraceLimit}(f))return"error";if(function m(h){return h instanceof RegExp||"string"==typeof h.flags&&"boolean"==typeof h.ignoreCase&&"boolean"==typeof h.multiline&&"boolean"==typeof h.global}(f))return"regexp";switch(s(f)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function t(h){return"function"==typeof h.throw&&"function"==typeof h.return&&"function"==typeof h.next}(f))return"generator";switch(u=D.call(f)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return u.slice(8,-1).toLowerCase().replace(/\s/g,"")}},37244:(w,D,s)=>{var _=s(53436)(s(12119),"DataView");w.exports=_},54994:(w,D,s)=>{var c=s(64312),x=s(46421),_=s(15764),m=s(18685),p=s(26676);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},9215:(w,D,s)=>{var c=s(41840),x=s(34378),_=s(54981),m=s(67343),p=s(98895);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},51501:(w,D,s)=>{var _=s(53436)(s(12119),"Map");w.exports=_},99850:(w,D,s)=>{var c=s(10638),x=s(11184),_=s(70866),m=s(43771),p=s(51772);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},44267:(w,D,s)=>{var _=s(53436)(s(12119),"Promise");w.exports=_},46323:(w,D,s)=>{var _=s(53436)(s(12119),"Set");w.exports=_},58849:(w,D,s)=>{var c=s(99850),x=s(4600),_=s(31387);function m(p){var t=-1,d=null==p?0:p.length;for(this.__data__=new c;++t<d;)this.add(p[t])}m.prototype.add=m.prototype.push=x,m.prototype.has=_,w.exports=m},2858:(w,D,s)=>{var c=s(9215),x=s(13720),_=s(64410),m=s(45576),p=s(22247),t=s(41585);function d(l){var h=this.__data__=new c(l);this.size=h.size}d.prototype.clear=x,d.prototype.delete=_,d.prototype.get=m,d.prototype.has=p,d.prototype.set=t,w.exports=d},60443:(w,D,s)=>{var c=s(12119);w.exports=c.Symbol},73457:(w,D,s)=>{var c=s(12119);w.exports=c.Uint8Array},24243:(w,D,s)=>{var _=s(53436)(s(12119),"WeakMap");w.exports=_},26999:w=>{w.exports=function D(s,c,x){switch(x.length){case 0:return s.call(c);case 1:return s.call(c,x[0]);case 2:return s.call(c,x[0],x[1]);case 3:return s.call(c,x[0],x[1],x[2])}return s.apply(c,x)}},96837:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length;++x<_&&!1!==c(s[x],x,s););return s}},69779:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length,m=0,p=[];++x<_;){var t=s[x];c(t,x,s)&&(p[m++]=t)}return p}},61253:(w,D,s)=>{var c=s(14164);w.exports=function x(_,m){return!(null==_||!_.length)&&c(_,m,0)>-1}},37609:w=>{w.exports=function D(s,c,x){for(var _=-1,m=null==s?0:s.length;++_<m;)if(x(c,s[_]))return!0;return!1}},72271:(w,D,s)=>{var c=s(85334),x=s(77151),_=s(21503),m=s(80891),p=s(58442),t=s(48159),l=Object.prototype.hasOwnProperty;w.exports=function h(f,u){var g=_(f),C=!g&&x(f),L=!g&&!C&&m(f),I=!g&&!C&&!L&&t(f),B=g||C||L||I,M=B?c(f.length,String):[],R=M.length;for(var Z in f)(u||l.call(f,Z))&&(!B||!("length"==Z||L&&("offset"==Z||"parent"==Z)||I&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||p(Z,R)))&&M.push(Z);return M}},84633:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length,m=Array(_);++x<_;)m[x]=c(s[x],x,s);return m}},85059:w=>{w.exports=function D(s,c){for(var x=-1,_=c.length,m=s.length;++x<_;)s[m+x]=c[x];return s}},8745:w=>{w.exports=function D(s,c,x,_){var m=-1,p=null==s?0:s.length;for(_&&p&&(x=s[++m]);++m<p;)x=c(x,s[m],m,s);return x}},79503:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length;++x<_;)if(c(s[x],x,s))return!0;return!1}},75481:(w,D,s)=>{var x=s(11847)("length");w.exports=x},49276:(w,D,s)=>{var c=s(85683),x=s(20217);w.exports=function _(m,p,t){(void 0!==t&&!x(m[p],t)||void 0===t&&!(p in m))&&c(m,p,t)}},89719:(w,D,s)=>{var c=s(85683),x=s(20217),m=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l){var h=t[d];(!m.call(t,d)||!x(h,l)||void 0===l&&!(d in t))&&c(t,d,l)}},43503:(w,D,s)=>{var c=s(20217);w.exports=function x(_,m){for(var p=_.length;p--;)if(c(_[p][0],m))return p;return-1}},94121:(w,D,s)=>{var c=s(31989),x=s(118);w.exports=function _(m,p){return m&&c(p,x(p),m)}},99287:(w,D,s)=>{var c=s(31989),x=s(16555);w.exports=function _(m,p){return m&&c(p,x(p),m)}},85683:(w,D,s)=>{var c=s(56713);w.exports=function x(_,m,p){"__proto__"==m&&c?c(_,m,{configurable:!0,enumerable:!0,value:p,writable:!0}):_[m]=p}},44462:(w,D,s)=>{var c=s(2858),x=s(96837),_=s(89719),m=s(94121),p=s(99287),t=s(19292),d=s(99454),l=s(84444),h=s(59905),f=s(47597),u=s(6967),g=s(28794),C=s(76782),L=s(37878),I=s(4264),B=s(21503),M=s(80891),R=s(13222),Z=s(25940),H=s(90799),G=s(118),tt=s(16555),W="[object Arguments]",rt="[object Function]",ut="[object Object]",Ht={};Ht[W]=Ht["[object Array]"]=Ht["[object ArrayBuffer]"]=Ht["[object DataView]"]=Ht["[object Boolean]"]=Ht["[object Date]"]=Ht["[object Float32Array]"]=Ht["[object Float64Array]"]=Ht["[object Int8Array]"]=Ht["[object Int16Array]"]=Ht["[object Int32Array]"]=Ht["[object Map]"]=Ht["[object Number]"]=Ht[ut]=Ht["[object RegExp]"]=Ht["[object Set]"]=Ht["[object String]"]=Ht["[object Symbol]"]=Ht["[object Uint8Array]"]=Ht["[object Uint8ClampedArray]"]=Ht["[object Uint16Array]"]=Ht["[object Uint32Array]"]=!0,Ht["[object Error]"]=Ht[rt]=Ht["[object WeakMap]"]=!1,w.exports=function Zt(Kt,xe,Te,Le,Oe,Ee){var Ue,Ve=1&xe,en=2&xe,be=4&xe;if(Te&&(Ue=Oe?Te(Kt,Le,Oe,Ee):Te(Kt)),void 0!==Ue)return Ue;if(!Z(Kt))return Kt;var sn=B(Kt);if(sn){if(Ue=C(Kt),!Ve)return d(Kt,Ue)}else{var Tt=g(Kt),Wt=Tt==rt||"[object GeneratorFunction]"==Tt;if(M(Kt))return t(Kt,Ve);if(Tt==ut||Tt==W||Wt&&!Oe){if(Ue=en||Wt?{}:I(Kt),!Ve)return en?h(Kt,p(Ue,Kt)):l(Kt,m(Ue,Kt))}else{if(!Ht[Tt])return Oe?Kt:{};Ue=L(Kt,Tt,Ve)}}Ee||(Ee=new c);var ce=Ee.get(Kt);if(ce)return ce;Ee.set(Kt,Ue),H(Kt)?Kt.forEach(function(Ze){Ue.add(Zt(Ze,xe,Te,Ze,Kt,Ee))}):R(Kt)&&Kt.forEach(function(Ze,ze){Ue.set(ze,Zt(Ze,xe,Te,ze,Kt,Ee))});var ee=sn?void 0:(be?en?u:f:en?tt:G)(Kt);return x(ee||Kt,function(Ze,ze){ee&&(Ze=Kt[ze=Ze]),_(Ue,ze,Zt(Ze,xe,Te,ze,Kt,Ee))}),Ue}},78858:(w,D,s)=>{var c=s(25940),x=Object.create,_=function(){function m(){}return function(p){if(!c(p))return{};if(x)return x(p);m.prototype=p;var t=new m;return m.prototype=void 0,t}}();w.exports=_},43132:(w,D,s)=>{var c=s(45184),_=s(16539)(c);w.exports=_},67308:(w,D,s)=>{var c=s(44129);w.exports=function x(_,m,p){for(var t=-1,d=_.length;++t<d;){var l=_[t],h=m(l);if(null!=h&&(void 0===f?h==h&&!c(h):p(h,f)))var f=h,u=l}return u}},33609:(w,D,s)=>{var c=s(43132);w.exports=function x(_,m){var p=[];return c(_,function(t,d,l){m(t,d,l)&&p.push(t)}),p}},65317:w=>{w.exports=function D(s,c,x,_){for(var m=s.length,p=x+(_?1:-1);_?p--:++p<m;)if(c(s[p],p,s))return p;return-1}},50686:(w,D,s)=>{var c=s(85059),x=s(75039);w.exports=function _(m,p,t,d,l){var h=-1,f=m.length;for(t||(t=x),l||(l=[]);++h<f;){var u=m[h];p>0&&t(u)?p>1?_(u,p-1,t,d,l):c(l,u):d||(l[l.length]=u)}return l}},30755:(w,D,s)=>{var x=s(40456)();w.exports=x},45184:(w,D,s)=>{var c=s(30755),x=s(118);w.exports=function _(m,p){return m&&c(m,p,x)}},15456:(w,D,s)=>{var c=s(65456),x=s(68533);w.exports=function _(m,p){for(var t=0,d=(p=c(p,m)).length;null!=m&&t<d;)m=m[x(p[t++])];return t&&t==d?m:void 0}},38247:(w,D,s)=>{var c=s(85059),x=s(21503);w.exports=function _(m,p,t){var d=p(m);return x(m)?d:c(d,t(m))}},93337:(w,D,s)=>{var c=s(60443),x=s(21318),_=s(92902),t=c?c.toStringTag:void 0;w.exports=function d(l){return null==l?void 0===l?"[object Undefined]":"[object Null]":t&&t in Object(l)?x(l):_(l)}},31100:w=>{w.exports=function D(s,c){return s>c}},84781:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x,_){return null!=x&&s.call(x,_)}},69989:w=>{w.exports=function D(s,c){return null!=s&&c in Object(s)}},14164:(w,D,s)=>{var c=s(65317),x=s(70968),_=s(24977);w.exports=function m(p,t,d){return t==t?_(p,t,d):c(p,x,d)}},60186:(w,D,s)=>{var c=s(93337),x=s(72671);w.exports=function m(p){return x(p)&&"[object Arguments]"==c(p)}},85740:(w,D,s)=>{var c=s(58325),x=s(72671);w.exports=function _(m,p,t,d,l){return m===p||(null==m||null==p||!x(m)&&!x(p)?m!=m&&p!=p:c(m,p,t,d,_,l))}},58325:(w,D,s)=>{var c=s(2858),x=s(63914),_=s(78583),m=s(32286),p=s(28794),t=s(21503),d=s(80891),l=s(48159),f="[object Arguments]",u="[object Array]",g="[object Object]",L=Object.prototype.hasOwnProperty;w.exports=function I(B,M,R,Z,H,G){var tt=t(B),K=t(M),st=tt?u:p(B),j=K?u:p(M),W=(st=st==f?g:st)==g,et=(j=j==f?g:j)==g,at=st==j;if(at&&d(B)){if(!d(M))return!1;tt=!0,W=!1}if(at&&!W)return G||(G=new c),tt||l(B)?x(B,M,R,Z,H,G):_(B,M,st,R,Z,H,G);if(!(1&R)){var Y=W&&L.call(B,"__wrapped__"),nt=et&&L.call(M,"__wrapped__");if(Y||nt){var rt=Y?B.value():B,q=nt?M.value():M;return G||(G=new c),H(rt,q,R,Z,G)}}return!!at&&(G||(G=new c),m(B,M,R,Z,H,G))}},97021:(w,D,s)=>{var c=s(28794),x=s(72671);w.exports=function m(p){return x(p)&&"[object Map]"==c(p)}},40431:(w,D,s)=>{var c=s(2858),x=s(85740);w.exports=function p(t,d,l,h){var f=l.length,u=f,g=!h;if(null==t)return!u;for(t=Object(t);f--;){var C=l[f];if(g&&C[2]?C[1]!==t[C[0]]:!(C[0]in t))return!1}for(;++f<u;){var L=(C=l[f])[0],I=t[L],B=C[1];if(g&&C[2]){if(void 0===I&&!(L in t))return!1}else{var M=new c;if(h)var R=h(I,B,L,t,d,M);if(!(void 0===R?x(B,I,3,h,M):R))return!1}}return!0}},70968:w=>{w.exports=function D(s){return s!=s}},37304:(w,D,s)=>{var c=s(75946),x=s(91943),_=s(25940),m=s(52827),t=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");w.exports=function g(C){return!(!_(C)||x(C))&&(c(C)?u:t).test(m(C))}},771:(w,D,s)=>{var c=s(28794),x=s(72671);w.exports=function m(p){return x(p)&&"[object Set]"==c(p)}},1083:(w,D,s)=>{var c=s(93337),x=s(96231),_=s(72671),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1,w.exports=function Y(nt){return _(nt)&&x(nt.length)&&!!at[c(nt)]}},96517:(w,D,s)=>{var c=s(98133),x=s(9458),_=s(32608),m=s(21503),p=s(87495);w.exports=function t(d){return"function"==typeof d?d:null==d?_:"object"==typeof d?m(d)?x(d[0],d[1]):c(d):p(d)}},81172:(w,D,s)=>{var c=s(45488),x=s(85491),m=Object.prototype.hasOwnProperty;w.exports=function p(t){if(!c(t))return x(t);var d=[];for(var l in Object(t))m.call(t,l)&&"constructor"!=l&&d.push(l);return d}},92809:(w,D,s)=>{var c=s(25940),x=s(45488),_=s(32158),p=Object.prototype.hasOwnProperty;w.exports=function t(d){if(!c(d))return _(d);var l=x(d),h=[];for(var f in d)"constructor"==f&&(l||!p.call(d,f))||h.push(f);return h}},99069:w=>{w.exports=function D(s,c){return s<c}},92046:(w,D,s)=>{var c=s(43132),x=s(56507);w.exports=function _(m,p){var t=-1,d=x(m)?Array(m.length):[];return c(m,function(l,h,f){d[++t]=p(l,h,f)}),d}},98133:(w,D,s)=>{var c=s(40431),x=s(22379),_=s(642);w.exports=function m(p){var t=x(p);return 1==t.length&&t[0][2]?_(t[0][0],t[0][1]):function(d){return d===p||c(d,p,t)}}},9458:(w,D,s)=>{var c=s(85740),x=s(8817),_=s(11172),m=s(45352),p=s(22442),t=s(642),d=s(68533);w.exports=function f(u,g){return m(u)&&p(g)?t(d(u),g):function(C){var L=x(C,u);return void 0===L&&L===g?_(C,u):c(g,L,3)}}},73842:(w,D,s)=>{var c=s(2858),x=s(49276),_=s(30755),m=s(33675),p=s(25940),t=s(16555),d=s(99351);w.exports=function l(h,f,u,g,C){h!==f&&_(f,function(L,I){if(C||(C=new c),p(L))m(h,f,I,u,l,g,C);else{var B=g?g(d(h,I),L,I+"",h,f,C):void 0;void 0===B&&(B=L),x(h,I,B)}},t)}},33675:(w,D,s)=>{var c=s(49276),x=s(19292),_=s(65208),m=s(99454),p=s(4264),t=s(77151),d=s(21503),l=s(92377),h=s(80891),f=s(75946),u=s(25940),g=s(97614),C=s(48159),L=s(99351),I=s(8067);w.exports=function B(M,R,Z,H,G,tt,K){var st=L(M,Z),j=L(R,Z),W=K.get(j);if(W)c(M,Z,W);else{var et=tt?tt(st,j,Z+"",M,R,K):void 0,at=void 0===et;if(at){var Y=d(j),nt=!Y&&h(j),rt=!Y&&!nt&&C(j);et=j,Y||nt||rt?d(st)?et=st:l(st)?et=m(st):nt?(at=!1,et=x(j,!0)):rt?(at=!1,et=_(j,!0)):et=[]:g(j)||t(j)?(et=st,t(st)?et=I(st):(!u(st)||f(st))&&(et=p(j))):at=!1}at&&(K.set(j,et),G(et,j,H,tt,K),K.delete(j)),c(M,Z,et)}}},6119:(w,D,s)=>{var c=s(84633),x=s(15456),_=s(96517),m=s(92046),p=s(42061),t=s(85647),d=s(41215),l=s(32608),h=s(21503);w.exports=function f(u,g,C){g=g.length?c(g,function(B){return h(B)?function(M){return x(M,1===B.length?B[0]:B)}:B}):[l];var L=-1;g=c(g,t(_));var I=m(u,function(B,M,R){return{criteria:c(g,function(H){return H(B)}),index:++L,value:B}});return p(I,function(B,M){return d(B,M,C)})}},83021:(w,D,s)=>{var c=s(95495),x=s(11172);w.exports=function _(m,p){return c(m,p,function(t,d){return x(m,d)})}},95495:(w,D,s)=>{var c=s(15456),x=s(55963),_=s(65456);w.exports=function m(p,t,d){for(var l=-1,h=t.length,f={};++l<h;){var u=t[l],g=c(p,u);d(g,u)&&x(f,_(u,p),g)}return f}},11847:w=>{w.exports=function D(s){return function(c){return c?.[s]}}},39222:(w,D,s)=>{var c=s(15456);w.exports=function x(_){return function(m){return c(m,_)}}},16307:w=>{var D=Math.ceil,s=Math.max;w.exports=function c(x,_,m,p){for(var t=-1,d=s(D((_-x)/(m||1)),0),l=Array(d);d--;)l[p?d:++t]=x,x+=m;return l}},13570:w=>{w.exports=function D(s,c,x,_,m){return m(s,function(p,t,d){x=_?(_=!1,p):c(x,p,t,d)}),x}},23269:(w,D,s)=>{var c=s(32608),x=s(53983),_=s(72185);w.exports=function m(p,t){return _(x(p,t,c),p+"")}},55963:(w,D,s)=>{var c=s(89719),x=s(65456),_=s(58442),m=s(25940),p=s(68533);w.exports=function t(d,l,h,f){if(!m(d))return d;for(var u=-1,g=(l=x(l,d)).length,C=g-1,L=d;null!=L&&++u<g;){var I=p(l[u]),B=h;if("__proto__"===I||"constructor"===I||"prototype"===I)return d;if(u!=C){var M=L[I];void 0===(B=f?f(M,I,L):void 0)&&(B=m(M)?M:_(l[u+1])?[]:{})}c(L,I,B),L=L[I]}return d}},69510:(w,D,s)=>{var c=s(76684),x=s(56713),_=s(32608);w.exports=x?function(p,t){return x(p,"toString",{configurable:!0,enumerable:!1,value:c(t),writable:!0})}:_},42061:w=>{w.exports=function D(s,c){var x=s.length;for(s.sort(c);x--;)s[x]=s[x].value;return s}},85334:w=>{w.exports=function D(s,c){for(var x=-1,_=Array(s);++x<s;)_[x]=c(x);return _}},93935:(w,D,s)=>{var c=s(60443),x=s(84633),_=s(21503),m=s(44129),t=c?c.prototype:void 0,d=t?t.toString:void 0;w.exports=function l(h){if("string"==typeof h)return h;if(_(h))return x(h,l)+"";if(m(h))return d?d.call(h):"";var f=h+"";return"0"==f&&1/h==-1/0?"-0":f}},83348:(w,D,s)=>{var c=s(42760),x=/^\s+/;w.exports=function _(m){return m&&m.slice(0,c(m)+1).replace(x,"")}},85647:w=>{w.exports=function D(s){return function(c){return s(c)}}},80707:(w,D,s)=>{var c=s(58849),x=s(61253),_=s(37609),m=s(25972),p=s(14575),t=s(24174);w.exports=function l(h,f,u){var g=-1,C=x,L=h.length,I=!0,B=[],M=B;if(u)I=!1,C=_;else if(L>=200){var R=f?null:p(h);if(R)return t(R);I=!1,C=m,M=new c}else M=f?[]:B;t:for(;++g<L;){var Z=h[g],H=f?f(Z):Z;if(Z=u||0!==Z?Z:0,I&&H==H){for(var G=M.length;G--;)if(M[G]===H)continue t;f&&M.push(H),B.push(Z)}else C(M,H,u)||(M!==B&&M.push(H),B.push(Z))}return B}},19179:(w,D,s)=>{var c=s(84633);w.exports=function x(_,m){return c(m,function(p){return _[p]})}},38645:w=>{w.exports=function D(s,c,x){for(var _=-1,m=s.length,p=c.length,t={};++_<m;)x(t,s[_],_<p?c[_]:void 0);return t}},25972:w=>{w.exports=function D(s,c){return s.has(c)}},21481:(w,D,s)=>{var c=s(32608);w.exports=function x(_){return"function"==typeof _?_:c}},65456:(w,D,s)=>{var c=s(21503),x=s(45352),_=s(32855),m=s(73943);w.exports=function p(t,d){return c(t)?t:x(t,d)?[t]:_(m(t))}},43362:(w,D,s)=>{var c=s(73457);w.exports=function x(_){var m=new _.constructor(_.byteLength);return new c(m).set(new c(_)),m}},19292:(w,D,s)=>{w=s.nmd(w);var c=s(12119),x=D&&!D.nodeType&&D,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x?c.Buffer:void 0,t=p?p.allocUnsafe:void 0;w.exports=function d(l,h){if(h)return l.slice();var f=l.length,u=t?t(f):new l.constructor(f);return l.copy(u),u}},17e3:(w,D,s)=>{var c=s(43362);w.exports=function x(_,m){var p=m?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.byteLength)}},74098:w=>{var D=/\w*$/;w.exports=function s(c){var x=new c.constructor(c.source,D.exec(c));return x.lastIndex=c.lastIndex,x}},62533:(w,D,s)=>{var c=s(60443),x=c?c.prototype:void 0,_=x?x.valueOf:void 0;w.exports=function m(p){return _?Object(_.call(p)):{}}},65208:(w,D,s)=>{var c=s(43362);w.exports=function x(_,m){var p=m?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.length)}},13443:(w,D,s)=>{var c=s(44129);w.exports=function x(_,m){if(_!==m){var p=void 0!==_,t=null===_,d=_==_,l=c(_),h=void 0!==m,f=null===m,u=m==m,g=c(m);if(!f&&!g&&!l&&_>m||l&&h&&u&&!f&&!g||t&&h&&u||!p&&u||!d)return 1;if(!t&&!l&&!g&&_<m||g&&p&&d&&!t&&!l||f&&p&&d||!h&&d||!u)return-1}return 0}},41215:(w,D,s)=>{var c=s(13443);w.exports=function x(_,m,p){for(var t=-1,d=_.criteria,l=m.criteria,h=d.length,f=p.length;++t<h;){var u=c(d[t],l[t]);if(u)return t>=f?u:u*("desc"==p[t]?-1:1)}return _.index-m.index}},99454:w=>{w.exports=function D(s,c){var x=-1,_=s.length;for(c||(c=Array(_));++x<_;)c[x]=s[x];return c}},31989:(w,D,s)=>{var c=s(89719),x=s(85683);w.exports=function _(m,p,t,d){var l=!t;t||(t={});for(var h=-1,f=p.length;++h<f;){var u=p[h],g=d?d(t[u],m[u],u,t,m):void 0;void 0===g&&(g=m[u]),l?x(t,u,g):c(t,u,g)}return t}},84444:(w,D,s)=>{var c=s(31989),x=s(39383);w.exports=function _(m,p){return c(m,x(m),p)}},59905:(w,D,s)=>{var c=s(31989),x=s(53051);w.exports=function _(m,p){return c(m,x(m),p)}},24610:(w,D,s)=>{var c=s(12119);w.exports=c["__core-js_shared__"]},84944:(w,D,s)=>{var c=s(23269),x=s(93342);w.exports=function _(m){return c(function(p,t){var d=-1,l=t.length,h=l>1?t[l-1]:void 0,f=l>2?t[2]:void 0;for(h=m.length>3&&"function"==typeof h?(l--,h):void 0,f&&x(t[0],t[1],f)&&(h=l<3?void 0:h,l=1),p=Object(p);++d<l;){var u=t[d];u&&m(p,u,d,h)}return p})}},16539:(w,D,s)=>{var c=s(56507);w.exports=function x(_,m){return function(p,t){if(null==p)return p;if(!c(p))return _(p,t);for(var d=p.length,l=m?d:-1,h=Object(p);(m?l--:++l<d)&&!1!==t(h[l],l,h););return p}}},40456:w=>{w.exports=function D(s){return function(c,x,_){for(var m=-1,p=Object(c),t=_(c),d=t.length;d--;){var l=t[s?d:++m];if(!1===x(p[l],l,p))break}return c}}},24653:(w,D,s)=>{var c=s(96517),x=s(56507),_=s(118);w.exports=function m(p){return function(t,d,l){var h=Object(t);if(!x(t)){var f=c(d,3);t=_(t),d=function(g){return f(h[g],g,h)}}var u=p(t,d,l);return u>-1?h[f?t[u]:u]:void 0}}},97509:(w,D,s)=>{var c=s(16307),x=s(93342),_=s(12232);w.exports=function m(p){return function(t,d,l){return l&&"number"!=typeof l&&x(t,d,l)&&(d=l=void 0),t=_(t),void 0===d?(d=t,t=0):d=_(d),l=void 0===l?t<d?1:-1:_(l),c(t,d,l,p)}}},14575:(w,D,s)=>{var c=s(46323),x=s(12552),_=s(24174),p=c&&1/_(new c([,-0]))[1]==1/0?function(t){return new c(t)}:x;w.exports=p},56713:(w,D,s)=>{var c=s(53436),x=function(){try{var _=c(Object,"defineProperty");return _({},"",{}),_}catch{}}();w.exports=x},63914:(w,D,s)=>{var c=s(58849),x=s(79503),_=s(25972);w.exports=function t(d,l,h,f,u,g){var C=1&h,L=d.length,I=l.length;if(L!=I&&!(C&&I>L))return!1;var B=g.get(d),M=g.get(l);if(B&&M)return B==l&&M==d;var R=-1,Z=!0,H=2&h?new c:void 0;for(g.set(d,l),g.set(l,d);++R<L;){var G=d[R],tt=l[R];if(f)var K=C?f(tt,G,R,l,d,g):f(G,tt,R,d,l,g);if(void 0!==K){if(K)continue;Z=!1;break}if(H){if(!x(l,function(st,j){if(!_(H,j)&&(G===st||u(G,st,h,f,g)))return H.push(j)})){Z=!1;break}}else if(G!==tt&&!u(G,tt,h,f,g)){Z=!1;break}}return g.delete(d),g.delete(l),Z}},78583:(w,D,s)=>{var c=s(60443),x=s(73457),_=s(20217),m=s(63914),p=s(83205),t=s(24174),H=c?c.prototype:void 0,G=H?H.valueOf:void 0;w.exports=function tt(K,st,j,W,et,at,Y){switch(j){case"[object DataView]":if(K.byteLength!=st.byteLength||K.byteOffset!=st.byteOffset)return!1;K=K.buffer,st=st.buffer;case"[object ArrayBuffer]":return!(K.byteLength!=st.byteLength||!at(new x(K),new x(st)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+K,+st);case"[object Error]":return K.name==st.name&&K.message==st.message;case"[object RegExp]":case"[object String]":return K==st+"";case"[object Map]":var nt=p;case"[object Set]":if(nt||(nt=t),K.size!=st.size&&!(1&W))return!1;var q=Y.get(K);if(q)return q==st;W|=2,Y.set(K,st);var F=m(nt(K),nt(st),W,et,at,Y);return Y.delete(K),F;case"[object Symbol]":if(G)return G.call(K)==G.call(st)}return!1}},32286:(w,D,s)=>{var c=s(47597),m=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l,h,f,u){var g=1&l,C=c(t),L=C.length;if(L!=c(d).length&&!g)return!1;for(var M=L;M--;){var R=C[M];if(!(g?R in d:m.call(d,R)))return!1}var Z=u.get(t),H=u.get(d);if(Z&&H)return Z==d&&H==t;var G=!0;u.set(t,d),u.set(d,t);for(var tt=g;++M<L;){var K=t[R=C[M]],st=d[R];if(h)var j=g?h(st,K,R,d,t,u):h(K,st,R,t,d,u);if(!(void 0===j?K===st||f(K,st,l,h,u):j)){G=!1;break}tt||(tt="constructor"==R)}if(G&&!tt){var W=t.constructor,et=d.constructor;W!=et&&"constructor"in t&&"constructor"in d&&!("function"==typeof W&&W instanceof W&&"function"==typeof et&&et instanceof et)&&(G=!1)}return u.delete(t),u.delete(d),G}},3975:(w,D,s)=>{var c=s(22274),x=s(53983),_=s(72185);w.exports=function m(p){return _(x(p,void 0,c),p+"")}},79122:w=>{var D="object"==typeof global&&global&&global.Object===Object&&global;w.exports=D},47597:(w,D,s)=>{var c=s(38247),x=s(39383),_=s(118);w.exports=function m(p){return c(p,_,x)}},6967:(w,D,s)=>{var c=s(38247),x=s(53051),_=s(16555);w.exports=function m(p){return c(p,_,x)}},54537:(w,D,s)=>{var c=s(23819);w.exports=function x(_,m){var p=_.__data__;return c(m)?p["string"==typeof m?"string":"hash"]:p.map}},22379:(w,D,s)=>{var c=s(22442),x=s(118);w.exports=function _(m){for(var p=x(m),t=p.length;t--;){var d=p[t],l=m[d];p[t]=[d,l,c(l)]}return p}},53436:(w,D,s)=>{var c=s(37304),x=s(51990);w.exports=function _(m,p){var t=x(m,p);return c(t)?t:void 0}},29519:(w,D,s)=>{var x=s(69385)(Object.getPrototypeOf,Object);w.exports=x},21318:(w,D,s)=>{var c=s(60443),x=Object.prototype,_=x.hasOwnProperty,m=x.toString,p=c?c.toStringTag:void 0;w.exports=function t(d){var l=_.call(d,p),h=d[p];try{d[p]=void 0;var f=!0}catch{}var u=m.call(d);return f&&(l?d[p]=h:delete d[p]),u}},39383:(w,D,s)=>{var c=s(69779),x=s(49975),m=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols;w.exports=p?function(d){return null==d?[]:(d=Object(d),c(p(d),function(l){return m.call(d,l)}))}:x},53051:(w,D,s)=>{var c=s(85059),x=s(29519),_=s(39383),m=s(49975);w.exports=Object.getOwnPropertySymbols?function(d){for(var l=[];d;)c(l,_(d)),d=x(d);return l}:m},28794:(w,D,s)=>{var c=s(37244),x=s(51501),_=s(44267),m=s(46323),p=s(24243),t=s(93337),d=s(52827),l="[object Map]",f="[object Promise]",u="[object Set]",g="[object WeakMap]",C="[object DataView]",L=d(c),I=d(x),B=d(_),M=d(m),R=d(p),Z=t;(c&&Z(new c(new ArrayBuffer(1)))!=C||x&&Z(new x)!=l||_&&Z(_.resolve())!=f||m&&Z(new m)!=u||p&&Z(new p)!=g)&&(Z=function(H){var G=t(H),tt="[object Object]"==G?H.constructor:void 0,K=tt?d(tt):"";if(K)switch(K){case L:return C;case I:return l;case B:return f;case M:return u;case R:return g}return G}),w.exports=Z},51990:w=>{w.exports=function D(s,c){return s?.[c]}},47283:(w,D,s)=>{var c=s(65456),x=s(77151),_=s(21503),m=s(58442),p=s(96231),t=s(68533);w.exports=function d(l,h,f){for(var u=-1,g=(h=c(h,l)).length,C=!1;++u<g;){var L=t(h[u]);if(!(C=null!=l&&f(l,L)))break;l=l[L]}return C||++u!=g?C:!!(g=null==l?0:l.length)&&p(g)&&m(L,g)&&(_(l)||x(l))}},77609:w=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");w.exports=function d(l){return t.test(l)}},64312:(w,D,s)=>{var c=s(60862);w.exports=function x(){this.__data__=c?c(null):{},this.size=0}},46421:w=>{w.exports=function D(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}},15764:(w,D,s)=>{var c=s(60862),m=Object.prototype.hasOwnProperty;w.exports=function p(t){var d=this.__data__;if(c){var l=d[t];return"__lodash_hash_undefined__"===l?void 0:l}return m.call(d,t)?d[t]:void 0}},18685:(w,D,s)=>{var c=s(60862),_=Object.prototype.hasOwnProperty;w.exports=function m(p){var t=this.__data__;return c?void 0!==t[p]:_.call(t,p)}},26676:(w,D,s)=>{var c=s(60862);w.exports=function _(m,p){var t=this.__data__;return this.size+=this.has(m)?0:1,t[m]=c&&void 0===p?"__lodash_hash_undefined__":p,this}},76782:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x){var _=x.length,m=new x.constructor(_);return _&&"string"==typeof x[0]&&s.call(x,"index")&&(m.index=x.index,m.input=x.input),m}},37878:(w,D,s)=>{var c=s(43362),x=s(17e3),_=s(74098),m=s(62533),p=s(65208);w.exports=function j(W,et,at){var Y=W.constructor;switch(et){case"[object ArrayBuffer]":return c(W);case"[object Boolean]":case"[object Date]":return new Y(+W);case"[object DataView]":return x(W,at);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return p(W,at);case"[object Map]":case"[object Set]":return new Y;case"[object Number]":case"[object String]":return new Y(W);case"[object RegExp]":return _(W);case"[object Symbol]":return m(W)}}},4264:(w,D,s)=>{var c=s(78858),x=s(29519),_=s(45488);w.exports=function m(p){return"function"!=typeof p.constructor||_(p)?{}:c(x(p))}},75039:(w,D,s)=>{var c=s(60443),x=s(77151),_=s(21503),m=c?c.isConcatSpreadable:void 0;w.exports=function p(t){return _(t)||x(t)||!!(m&&t&&t[m])}},58442:w=>{var s=/^(?:0|[1-9]\d*)$/;w.exports=function c(x,_){var m=typeof x;return!!(_=_??9007199254740991)&&("number"==m||"symbol"!=m&&s.test(x))&&x>-1&&x%1==0&&x<_}},93342:(w,D,s)=>{var c=s(20217),x=s(56507),_=s(58442),m=s(25940);w.exports=function p(t,d,l){if(!m(l))return!1;var h=typeof d;return!!("number"==h?x(l)&&_(d,l.length):"string"==h&&d in l)&&c(l[d],t)}},45352:(w,D,s)=>{var c=s(21503),x=s(44129),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;w.exports=function p(t,d){if(c(t))return!1;var l=typeof t;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=t&&!x(t))||m.test(t)||!_.test(t)||null!=d&&t in Object(d)}},23819:w=>{w.exports=function D(s){var c=typeof s;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==s:null===s}},91943:(w,D,s)=>{var m,c=s(24610),x=(m=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";w.exports=function _(m){return!!x&&x in m}},45488:w=>{var D=Object.prototype;w.exports=function s(c){var x=c&&c.constructor;return c===("function"==typeof x&&x.prototype||D)}},22442:(w,D,s)=>{var c=s(25940);w.exports=function x(_){return _==_&&!c(_)}},41840:w=>{w.exports=function D(){this.__data__=[],this.size=0}},34378:(w,D,s)=>{var c=s(43503),_=Array.prototype.splice;w.exports=function m(p){var t=this.__data__,d=c(t,p);return!(d<0||(d==t.length-1?t.pop():_.call(t,d,1),--this.size,0))}},54981:(w,D,s)=>{var c=s(43503);w.exports=function x(_){var m=this.__data__,p=c(m,_);return p<0?void 0:m[p][1]}},67343:(w,D,s)=>{var c=s(43503);w.exports=function x(_){return c(this.__data__,_)>-1}},98895:(w,D,s)=>{var c=s(43503);w.exports=function x(_,m){var p=this.__data__,t=c(p,_);return t<0?(++this.size,p.push([_,m])):p[t][1]=m,this}},10638:(w,D,s)=>{var c=s(54994),x=s(9215),_=s(51501);w.exports=function m(){this.size=0,this.__data__={hash:new c,map:new(_||x),string:new c}}},11184:(w,D,s)=>{var c=s(54537);w.exports=function x(_){var m=c(this,_).delete(_);return this.size-=m?1:0,m}},70866:(w,D,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).get(_)}},43771:(w,D,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).has(_)}},51772:(w,D,s)=>{var c=s(54537);w.exports=function x(_,m){var p=c(this,_),t=p.size;return p.set(_,m),this.size+=p.size==t?0:1,this}},83205:w=>{w.exports=function D(s){var c=-1,x=Array(s.size);return s.forEach(function(_,m){x[++c]=[m,_]}),x}},642:w=>{w.exports=function D(s,c){return function(x){return null!=x&&x[s]===c&&(void 0!==c||s in Object(x))}}},15144:(w,D,s)=>{var c=s(30535);w.exports=function _(m){var p=c(m,function(d){return 500===t.size&&t.clear(),d}),t=p.cache;return p}},60862:(w,D,s)=>{var x=s(53436)(Object,"create");w.exports=x},85491:(w,D,s)=>{var x=s(69385)(Object.keys,Object);w.exports=x},32158:w=>{w.exports=function D(s){var c=[];if(null!=s)for(var x in Object(s))c.push(x);return c}},73597:(w,D,s)=>{w=s.nmd(w);var c=s(79122),x=D&&!D.nodeType&&D,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x&&c.process,t=function(){try{return _&&_.require&&_.require("util").types||p&&p.binding&&p.binding("util")}catch{}}();w.exports=t},92902:w=>{var s=Object.prototype.toString;w.exports=function c(x){return s.call(x)}},69385:w=>{w.exports=function D(s,c){return function(x){return s(c(x))}}},53983:(w,D,s)=>{var c=s(26999),x=Math.max;w.exports=function _(m,p,t){return p=x(void 0===p?m.length-1:p,0),function(){for(var d=arguments,l=-1,h=x(d.length-p,0),f=Array(h);++l<h;)f[l]=d[p+l];l=-1;for(var u=Array(p+1);++l<p;)u[l]=d[l];return u[p]=t(f),c(m,this,u)}}},12119:(w,D,s)=>{var c=s(79122),x="object"==typeof self&&self&&self.Object===Object&&self,_=c||x||Function("return this")();w.exports=_},99351:w=>{w.exports=function D(s,c){if(("constructor"!==c||"function"!=typeof s[c])&&"__proto__"!=c)return s[c]}},4600:w=>{w.exports=function s(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this}},31387:w=>{w.exports=function D(s){return this.__data__.has(s)}},24174:w=>{w.exports=function D(s){var c=-1,x=Array(s.size);return s.forEach(function(_){x[++c]=_}),x}},72185:(w,D,s)=>{var c=s(69510),_=s(10029)(c);w.exports=_},10029:w=>{var c=Date.now;w.exports=function x(_){var m=0,p=0;return function(){var t=c(),d=16-(t-p);if(p=t,d>0){if(++m>=800)return arguments[0]}else m=0;return _.apply(void 0,arguments)}}},13720:(w,D,s)=>{var c=s(9215);w.exports=function x(){this.__data__=new c,this.size=0}},64410:w=>{w.exports=function D(s){var c=this.__data__,x=c.delete(s);return this.size=c.size,x}},45576:w=>{w.exports=function D(s){return this.__data__.get(s)}},22247:w=>{w.exports=function D(s){return this.__data__.has(s)}},41585:(w,D,s)=>{var c=s(9215),x=s(51501),_=s(99850);w.exports=function p(t,d){var l=this.__data__;if(l instanceof c){var h=l.__data__;if(!x||h.length<199)return h.push([t,d]),this.size=++l.size,this;l=this.__data__=new _(h)}return l.set(t,d),this.size=l.size,this}},24977:w=>{w.exports=function D(s,c,x){for(var _=x-1,m=s.length;++_<m;)if(s[_]===c)return _;return-1}},52315:(w,D,s)=>{var c=s(75481),x=s(77609),_=s(81149);w.exports=function m(p){return x(p)?_(p):c(p)}},32855:(w,D,s)=>{var c=s(15144),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,m=c(function(p){var t=[];return 46===p.charCodeAt(0)&&t.push(""),p.replace(x,function(d,l,h,f){t.push(h?f.replace(_,"$1"):l||d)}),t});w.exports=m},68533:(w,D,s)=>{var c=s(44129);w.exports=function _(m){if("string"==typeof m||c(m))return m;var p=m+"";return"0"==p&&1/m==-1/0?"-0":p}},52827:w=>{var s=Function.prototype.toString;w.exports=function c(x){if(null!=x){try{return s.call(x)}catch{}try{return x+""}catch{}}return""}},42760:w=>{var D=/\s/;w.exports=function s(c){for(var x=c.length;x--&&D.test(c.charAt(x)););return x}},81149:w=>{var D="\\ud800-\\udfff",p="["+D+"]",t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",d="\\ud83c[\\udffb-\\udfff]",h="[^"+D+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",C="(?:"+t+"|"+d+")?",L="[\\ufe0e\\ufe0f]?",B=L+C+"(?:\\u200d(?:"+[h,f,u].join("|")+")"+L+C+")*",M="(?:"+[h+t+"?",t,f,u,p].join("|")+")",R=RegExp(d+"(?="+d+")|"+M+B,"g");w.exports=function Z(H){for(var G=R.lastIndex=0;R.test(H);)++G;return G}},11094:(w,D,s)=>{var c=s(44462);w.exports=function _(m){return c(m,4)}},90733:(w,D,s)=>{var c=s(44462);w.exports=function m(p){return c(p,5)}},76684:w=>{w.exports=function D(s){return function(){return s}}},28800:(w,D,s)=>{var c=s(23269),x=s(20217),_=s(93342),m=s(16555),p=Object.prototype,t=p.hasOwnProperty,d=c(function(l,h){l=Object(l);var f=-1,u=h.length,g=u>2?h[2]:void 0;for(g&&_(h[0],h[1],g)&&(u=1);++f<u;)for(var C=h[f],L=m(C),I=-1,B=L.length;++I<B;){var M=L[I],R=l[M];(void 0===R||x(R,p[M])&&!t.call(l,M))&&(l[M]=C[M])}return l});w.exports=d},35474:(w,D,s)=>{w.exports=s(89851)},20217:w=>{w.exports=function D(s,c){return s===c||s!=s&&c!=c}},35281:(w,D,s)=>{var c=s(69779),x=s(33609),_=s(96517),m=s(21503);w.exports=function p(t,d){return(m(t)?c:x)(t,_(d,3))}},62516:(w,D,s)=>{var _=s(24653)(s(36397));w.exports=_},36397:(w,D,s)=>{var c=s(65317),x=s(96517),_=s(44401),m=Math.max;w.exports=function p(t,d,l){var h=null==t?0:t.length;if(!h)return-1;var f=null==l?0:_(l);return f<0&&(f=m(h+f,0)),c(t,x(d,3),f)}},22274:(w,D,s)=>{var c=s(50686);w.exports=function x(_){return null!=_&&_.length?c(_,1):[]}},89851:(w,D,s)=>{var c=s(96837),x=s(43132),_=s(21481),m=s(21503);w.exports=function p(t,d){return(m(t)?c:x)(t,_(d))}},41176:(w,D,s)=>{var c=s(30755),x=s(21481),_=s(16555);w.exports=function m(p,t){return null==p?p:c(p,x(t),_)}},8817:(w,D,s)=>{var c=s(15456);w.exports=function x(_,m,p){var t=null==_?void 0:c(_,m);return void 0===t?p:t}},54842:(w,D,s)=>{var c=s(84781),x=s(47283);w.exports=function _(m,p){return null!=m&&x(m,p,c)}},11172:(w,D,s)=>{var c=s(69989),x=s(47283);w.exports=function _(m,p){return null!=m&&x(m,p,c)}},32608:w=>{w.exports=function D(s){return s}},77151:(w,D,s)=>{var c=s(60186),x=s(72671),_=Object.prototype,m=_.hasOwnProperty,p=_.propertyIsEnumerable,t=c(function(){return arguments}())?c:function(d){return x(d)&&m.call(d,"callee")&&!p.call(d,"callee")};w.exports=t},21503:w=>{w.exports=Array.isArray},56507:(w,D,s)=>{var c=s(75946),x=s(96231);w.exports=function _(m){return null!=m&&x(m.length)&&!c(m)}},92377:(w,D,s)=>{var c=s(56507),x=s(72671);w.exports=function _(m){return x(m)&&c(m)}},80891:(w,D,s)=>{w=s.nmd(w);var c=s(12119),x=s(63580),_=D&&!D.nodeType&&D,m=_&&w&&!w.nodeType&&w,t=m&&m.exports===_?c.Buffer:void 0;w.exports=(t?t.isBuffer:void 0)||x},71973:(w,D,s)=>{var c=s(81172),x=s(28794),_=s(77151),m=s(21503),p=s(56507),t=s(80891),d=s(45488),l=s(48159),g=Object.prototype.hasOwnProperty;w.exports=function C(L){if(null==L)return!0;if(p(L)&&(m(L)||"string"==typeof L||"function"==typeof L.splice||t(L)||l(L)||_(L)))return!L.length;var I=x(L);if("[object Map]"==I||"[object Set]"==I)return!L.size;if(d(L))return!c(L).length;for(var B in L)if(g.call(L,B))return!1;return!0}},75946:(w,D,s)=>{var c=s(93337),x=s(25940);w.exports=function d(l){if(!x(l))return!1;var h=c(l);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h}},96231:w=>{w.exports=function s(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991}},13222:(w,D,s)=>{var c=s(97021),x=s(85647),_=s(73597),m=_&&_.isMap,p=m?x(m):c;w.exports=p},25940:w=>{w.exports=function D(s){var c=typeof s;return null!=s&&("object"==c||"function"==c)}},72671:w=>{w.exports=function D(s){return null!=s&&"object"==typeof s}},97614:(w,D,s)=>{var c=s(93337),x=s(29519),_=s(72671),d=Function.prototype.toString,l=Object.prototype.hasOwnProperty,h=d.call(Object);w.exports=function f(u){if(!_(u)||"[object Object]"!=c(u))return!1;var g=x(u);if(null===g)return!0;var C=l.call(g,"constructor")&&g.constructor;return"function"==typeof C&&C instanceof C&&d.call(C)==h}},90799:(w,D,s)=>{var c=s(771),x=s(85647),_=s(73597),m=_&&_.isSet,p=m?x(m):c;w.exports=p},30248:(w,D,s)=>{var c=s(93337),x=s(21503),_=s(72671);w.exports=function p(t){return"string"==typeof t||!x(t)&&_(t)&&"[object String]"==c(t)}},44129:(w,D,s)=>{var c=s(93337),x=s(72671);w.exports=function m(p){return"symbol"==typeof p||x(p)&&"[object Symbol]"==c(p)}},48159:(w,D,s)=>{var c=s(1083),x=s(85647),_=s(73597),m=_&&_.isTypedArray,p=m?x(m):c;w.exports=p},34235:w=>{w.exports=function D(s){return void 0===s}},118:(w,D,s)=>{var c=s(72271),x=s(81172),_=s(56507);w.exports=function m(p){return _(p)?c(p):x(p)}},16555:(w,D,s)=>{var c=s(72271),x=s(92809),_=s(56507);w.exports=function m(p){return _(p)?c(p,!0):x(p)}},25809:w=>{w.exports=function D(s){var c=null==s?0:s.length;return c?s[c-1]:void 0}},19984:(w,D,s)=>{var c=s(84633),x=s(96517),_=s(92046),m=s(21503);w.exports=function p(t,d){return(m(t)?c:_)(t,x(d,3))}},10203:(w,D,s)=>{var c=s(85683),x=s(45184),_=s(96517);w.exports=function m(p,t){var d={};return t=_(t,3),x(p,function(l,h,f){c(d,h,t(l,h,f))}),d}},18176:(w,D,s)=>{var c=s(67308),x=s(31100),_=s(32608);w.exports=function m(p){return p&&p.length?c(p,_,x):void 0}},30535:(w,D,s)=>{var c=s(99850);function _(m,p){if("function"!=typeof m||null!=p&&"function"!=typeof p)throw new TypeError("Expected a function");var t=function(){var d=arguments,l=p?p.apply(this,d):d[0],h=t.cache;if(h.has(l))return h.get(l);var f=m.apply(this,d);return t.cache=h.set(l,f)||h,f};return t.cache=new(_.Cache||c),t}_.Cache=c,w.exports=_},80567:(w,D,s)=>{var c=s(73842),_=s(84944)(function(m,p,t){c(m,p,t)});w.exports=_},29439:(w,D,s)=>{var c=s(67308),x=s(99069),_=s(32608);w.exports=function m(p){return p&&p.length?c(p,_,x):void 0}},29525:(w,D,s)=>{var c=s(67308),x=s(96517),_=s(99069);w.exports=function m(p,t){return p&&p.length?c(p,x(t,2),_):void 0}},12552:w=>{w.exports=function D(){}},31710:(w,D,s)=>{var c=s(12119);w.exports=function(){return c.Date.now()}},16372:(w,D,s)=>{var c=s(83021),_=s(3975)(function(m,p){return null==m?{}:c(m,p)});w.exports=_},87495:(w,D,s)=>{var c=s(11847),x=s(39222),_=s(45352),m=s(68533);w.exports=function p(t){return _(t)?c(m(t)):x(t)}},90361:(w,D,s)=>{var x=s(97509)();w.exports=x},81337:(w,D,s)=>{var c=s(8745),x=s(43132),_=s(96517),m=s(13570),p=s(21503);w.exports=function t(d,l,h){var f=p(d)?c:m,u=arguments.length<3;return f(d,_(l,4),h,u,x)}},55637:(w,D,s)=>{var c=s(81172),x=s(28794),_=s(56507),m=s(30248),p=s(52315);w.exports=function l(h){if(null==h)return 0;if(_(h))return m(h)?p(h):h.length;var f=x(h);return"[object Map]"==f||"[object Set]"==f?h.size:c(h).length}},12906:(w,D,s)=>{var c=s(50686),x=s(6119),_=s(23269),m=s(93342),p=_(function(t,d){if(null==t)return[];var l=d.length;return l>1&&m(t,d[0],d[1])?d=[]:l>2&&m(d[0],d[1],d[2])&&(d=[d[0]]),x(t,c(d,1),[])});w.exports=p},49975:w=>{w.exports=function D(){return[]}},63580:w=>{w.exports=function D(){return!1}},12232:(w,D,s)=>{var c=s(51467),x=1/0;w.exports=function m(p){return p?(p=c(p))===x||p===-x?17976931348623157e292*(p<0?-1:1):p==p?p:0:0===p?p:0}},44401:(w,D,s)=>{var c=s(12232);w.exports=function x(_){var m=c(_),p=m%1;return m==m?p?m-p:m:0}},51467:(w,D,s)=>{var c=s(83348),x=s(25940),_=s(44129),p=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;w.exports=function h(f){if("number"==typeof f)return f;if(_(f))return NaN;if(x(f)){var u="function"==typeof f.valueOf?f.valueOf():f;f=x(u)?u+"":u}if("string"!=typeof f)return 0===f?f:+f;f=c(f);var g=t.test(f);return g||d.test(f)?l(f.slice(2),g?2:8):p.test(f)?NaN:+f}},8067:(w,D,s)=>{var c=s(31989),x=s(16555);w.exports=function _(m){return c(m,x(m))}},73943:(w,D,s)=>{var c=s(93935);w.exports=function x(_){return null==_?"":c(_)}},89416:(w,D,s)=>{var c=s(96837),x=s(78858),_=s(45184),m=s(96517),p=s(29519),t=s(21503),d=s(80891),l=s(75946),h=s(25940),f=s(48159);w.exports=function u(g,C,L){var I=t(g),B=I||d(g)||f(g);if(C=m(C,4),null==L){var M=g&&g.constructor;L=B?I?new M:[]:h(g)&&l(M)?x(p(g)):{}}return(B?c:_)(g,function(R,Z,H){return C(L,R,Z,H)}),L}},68921:(w,D,s)=>{var c=s(50686),x=s(23269),_=s(80707),m=s(92377),p=x(function(t){return _(c(t,1,m,!0))});w.exports=p},51541:(w,D,s)=>{var c=s(73943),x=0;w.exports=function _(m){var p=++x;return c(m)+p}},90377:(w,D,s)=>{var c=s(19179),x=s(118);w.exports=function _(m){return null==m?[]:c(m,x(m))}},21617:(w,D,s)=>{var c=s(89719),x=s(38645);w.exports=function _(m,p){return x(m||[],p||[],c)}},34315:(w,D,s)=>{"use strict";const c=Symbol.prototype.valueOf,x=s(52872);w.exports=function _(h,f){switch(x(h)){case"array":return h.slice();case"object":return Object.assign({},h);case"date":return new h.constructor(Number(h));case"map":return new Map(h);case"set":return new Set(h);case"buffer":return function d(h){const f=h.length,u=Buffer.allocUnsafe?Buffer.allocUnsafe(f):Buffer.from(f);return h.copy(u),u}(h);case"symbol":return function l(h){return c?Object(c.call(h)):{}}(h);case"arraybuffer":return function p(h){const f=new h.constructor(h.byteLength);return new Uint8Array(f).set(new Uint8Array(h)),f}(h);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function t(h,f){return new h.constructor(h.buffer,h.byteOffset,h.length)}(h);case"regexp":return function m(h){const f=void 0!==h.flags?h.flags:/\w+$/.exec(h)||void 0,u=new h.constructor(h.source,f);return u.lastIndex=h.lastIndex,u}(h);case"error":return Object.create(h);default:return h}}},67824:(w,D,s)=>{"use strict";function c(x){for(var _ in x)D.hasOwnProperty(_)||(D[_]=x[_])}Object.defineProperty(D,"__esModule",{value:!0}),c(s(95085)),c(s(26243)),c(s(91786)),c(s(30225)),c(s(76767)),c(s(30345)),c(s(15675)),c(s(86461)),c(s(58802)),c(s(33900)),c(s(88866)),c(s(94655)),c(s(4068)),c(s(33858)),c(s(98237)),c(s(83292))},95085:function(w,D,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(d){var l=p.call(this)||this,f=d;return f.trigger&&(l.trigger=f.trigger),f.kick&&(l.kick=f.kick),f.drag&&(l.drag=f.drag),f.on&&(l.on=f.on),l.dragstart=l.dragStart=x.Layout.dragStart,l.dragend=l.dragEnd=x.Layout.dragEnd,l}return c(t,p),t.prototype.trigger=function(d){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(d,l){return this},t}(x.Layout);D.LayoutAdaptor=_,D.adaptor=function m(p){return new _(p)}},83292:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(15675),x=s(76767);D.gridify=function _(t,d,l,h){t.cola.start(0,0,0,10,!1);var f=function m(t,d,l,h){t.forEach(function(u){u.routerNode={name:u.name,bounds:u.bounds.inflate(-l)}}),d.forEach(function(u){u.routerNode={bounds:u.bounds.inflate(-h),children:(typeof u.groups<"u"?u.groups.map(function(g){return t.length+g.id}):[]).concat(typeof u.leaves<"u"?u.leaves.map(function(g){return g.index}):[])}});var f=t.concat(d).map(function(u,g){return u.routerNode.id=g,u.routerNode});return new x.GridRouter(f,{getChildren:function(u){return u.children},getBounds:function(u){return u.bounds}},l-h)}(t.cola.nodes(),t.cola.groups(),l,h);return f.routeEdges(t.powerGraph.powerEdges,d,function(u){return u.source.routerNode.id},function(u){return u.target.routerNode.id})},D.powerGraphGridLayout=function p(t,d,l){var h;t.nodes.forEach(function(C,L){return C.index=L}),(new c.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(C){(h=C).groups.forEach(function(L){return L.padding=l})});var f=t.nodes.length,u=[],g=t.nodes.slice(0);return g.forEach(function(C,L){return C.index=L}),h.groups.forEach(function(C){var L=C.index=C.id+f;g.push(C),typeof C.leaves<"u"&&C.leaves.forEach(function(I){return u.push({source:L,target:I.index})}),typeof C.groups<"u"&&C.groups.forEach(function(I){return u.push({source:L,target:I.id+f})})}),h.powerEdges.forEach(function(C){u.push({source:C.source.index,target:C.target.index})}),(new c.Layout).size(d).nodes(g).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new c.Layout).convergenceThreshold(.001).size(d).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(C){(h=C).groups.forEach(function(L){L.padding=l})}).start(50,0,100,0,!1),powerGraph:h}}},26243:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(49346),x=s(22487);D.d3adaptor=function _(p){return!p||function m(p){return p.version&&null!==p.version.match(/^3\./)}(p)?new c.D3StyleLayoutAdaptor:new x.D3StyleLayoutAdaptor(p)}},49346:function(w,D,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(){var d=p.call(this)||this;d.event=d3.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=d3.behavior.drag().origin(x.Layout.dragOrigin).on("dragstart.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,d3.event),l.resume()}).on("dragend.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;this.call(f)},d}return c(t,p),t.prototype.trigger=function(d){var l={type:x.EventType[d.type],alpha:d.alpha,stress:d.stress};this.event[l.type](l)},t.prototype.kick=function(){var d=this;d3.timer(function(){return p.prototype.tick.call(d)})},t.prototype.on=function(d,l){return this.event.on("string"==typeof d?d:x.EventType[d],l),this},t}(x.Layout);D.D3StyleLayoutAdaptor=_,D.d3adaptor=function m(){return new _}},22487:function(w,D,s){"use strict";var m,c=this&&this.__extends||(m=function(p,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var h in l)l.hasOwnProperty(h)&&(d[h]=l[h])})(p,t)},function(p,t){function d(){this.constructor=p}m(p,t),p.prototype=null===t?Object.create(t):(d.prototype=t.prototype,new d)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(15675),_=function(m){function p(t){var d=m.call(this)||this;d.d3Context=t,d.event=t.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=t.drag().subject(x.Layout.dragOrigin).on("start.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,t.event),l.resume()}).on("end.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;arguments[0].call(f)},d}return c(p,m),p.prototype.trigger=function(t){var d={type:x.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(d.type,d)},p.prototype.kick=function(){var t=this,d=this.d3Context.timer(function(){return m.prototype.tick.call(t)&&d.stop()})},p.prototype.on=function(t,d){return this.event.on("string"==typeof t?t:x.EventType[t],d),this},p}(x.Layout);D.D3StyleLayoutAdaptor=_},91786:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function(){function _(){this.locks={}}return _.prototype.add=function(m,p){this.locks[m]=p},_.prototype.clear=function(){this.locks={}},_.prototype.isEmpty=function(){for(var m in this.locks)return!1;return!0},_.prototype.apply=function(m){for(var p in this.locks)m(Number(p),this.locks[p])},_}();D.Locks=s;var c=function(){function _(m,p,t){void 0===t&&(t=null),this.D=p,this.G=t,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new x,this.project=null,this.x=m,this.k=m.length;var d=this.n=m[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new s,this.minD=Number.MAX_VALUE;for(var h,l=d;l--;)for(h=d;--h>l;){var f=p[l][h];f>0&&f<this.minD&&(this.minD=f)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),l=this.k;l--;){for(this.g[l]=new Array(d),this.H[l]=new Array(d),h=d;h--;)this.H[l][h]=new Array(d);this.Hd[l]=new Array(d),this.a[l]=new Array(d),this.b[l]=new Array(d),this.c[l]=new Array(d),this.d[l]=new Array(d),this.e[l]=new Array(d),this.ia[l]=new Array(d),this.ib[l]=new Array(d),this.xtmp[l]=new Array(d)}}return _.createSquareMatrix=function(m,p){for(var t=new Array(m),d=0;d<m;++d){t[d]=new Array(m);for(var l=0;l<m;++l)t[d][l]=p(d,l)}return t},_.prototype.offsetDir=function(){for(var m=this,p=new Array(this.k),t=0,d=0;d<this.k;++d){var l=p[d]=this.random.getNextBetween(.01,1)-.5;t+=l*l}return t=Math.sqrt(t),p.map(function(h){return h*(m.minD/t)})},_.prototype.computeDerivatives=function(m){var p=this,t=this.n;if(!(t<1)){for(var d,l=new Array(this.k),h=new Array(this.k),f=new Array(this.k),u=0,g=0;g<t;++g){for(d=0;d<this.k;++d)f[d]=this.g[d][g]=0;for(var C=0;C<t;++C)if(g!==C){for(var L=t;L--;){var I=0;for(d=0;d<this.k;++d){var B=l[d]=m[d][g]-m[d][C];I+=h[d]=B*B}if(I>1e-9)break;var M=this.offsetDir();for(d=0;d<this.k;++d)m[d][C]+=M[d]}var R=Math.sqrt(I),Z=this.D[g][C],H=null!=this.G?this.G[g][C]:1;if(H>1&&R>Z||!isFinite(Z)){for(d=0;d<this.k;++d)this.H[d][g][C]=0;continue}H>1&&(H=1);var G=Z*Z,tt=2*H*(R-Z)/(G*R),K=R*R*R,st=2*-H/(G*K);for(isFinite(tt)||console.log(tt),d=0;d<this.k;++d)this.g[d][g]+=l[d]*tt,f[d]-=this.H[d][g][C]=st*(K+Z*(h[d]-I)+R*I)}for(d=0;d<this.k;++d)u=Math.max(u,this.H[d][g][g]=f[d])}var j=this.snapGridSize/2,W=this.snapGridSize,at=this.snapStrength/(j*j),Y=this.numGridSnapNodes;for(g=0;g<Y;++g)for(d=0;d<this.k;++d){var nt=this.x[d][g],rt=nt/W,q=rt%1,F=rt-q;-j<(B=Math.abs(q)<=.5?nt-F*W:nt>0?nt-(F+1)*W:nt-(F-1)*W)&&B<=j&&(this.scaleSnapByMaxH?(this.g[d][g]+=u*at*B,this.H[d][g][g]+=u*at):(this.g[d][g]+=at*B,this.H[d][g][g]+=at))}this.locks.isEmpty()||this.locks.apply(function(ut,ft){for(d=0;d<p.k;++d)p.H[d][ut][ut]+=u,p.g[d][ut]-=u*(ft[d]-m[d][ut])})}},_.dotProd=function(m,p){for(var t=0,d=m.length;d--;)t+=m[d]*p[d];return t},_.rightMultiply=function(m,p,t){for(var d=m.length;d--;)t[d]=_.dotProd(m[d],p)},_.prototype.computeStepSize=function(m){for(var p=0,t=0,d=0;d<this.k;++d)p+=_.dotProd(this.g[d],m[d]),_.rightMultiply(this.H[d],m[d],this.Hd[d]),t+=_.dotProd(m[d],this.Hd[d]);return 0!==t&&isFinite(t)?1*p/t:0},_.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var m=this.computeStepSize(this.g),p=0;p<this.k;++p)this.takeDescentStep(this.x[p],this.g[p],m);return this.computeStress()},_.copy=function(m,p){for(var t=m.length,d=p[0].length,l=0;l<t;++l)for(var h=0;h<d;++h)p[l][h]=m[l][h]},_.prototype.stepAndProject=function(m,p,t,d){_.copy(m,p),this.takeDescentStep(p[0],t[0],d),this.project&&this.project[0](m[0],m[1],p[0]),this.takeDescentStep(p[1],t[1],d),this.project&&this.project[1](p[0],m[1],p[1]);for(var l=2;l<this.k;l++)this.takeDescentStep(p[l],t[l],d)},_.mApply=function(m,p,t){for(var d=m;d-- >0;)for(var l=p;l-- >0;)t(d,l)},_.prototype.matrixApply=function(m){_.mApply(this.k,this.n,m)},_.prototype.computeNextPosition=function(m,p){var t=this;this.computeDerivatives(m);var d=this.computeStepSize(this.g);if(this.stepAndProject(m,p,this.g,d),this.project){this.matrixApply(function(h,f){return t.e[h][f]=m[h][f]-p[h][f]});var l=this.computeStepSize(this.e);l=Math.max(.2,Math.min(l,1)),this.stepAndProject(m,p,this.e,l)}},_.prototype.run=function(m){for(var p=Number.MAX_VALUE,t=!1;!t&&m-- >0;){var d=this.rungeKutta();t=Math.abs(p/d-1)<this.threshold,p=d}return p},_.prototype.rungeKutta=function(){var m=this;this.computeNextPosition(this.x,this.a),_.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),_.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var p=0;return this.matrixApply(function(t,d){var l=(m.a[t][d]+2*m.b[t][d]+2*m.c[t][d]+m.d[t][d])/6,h=m.x[t][d]-l;p+=h*h,m.x[t][d]=l}),p},_.mid=function(m,p,t){_.mApply(m.length,m[0].length,function(d,l){return t[d][l]=m[d][l]+(p[d][l]-m[d][l])/2})},_.prototype.takeDescentStep=function(m,p,t){for(var d=0;d<this.n;++d)m[d]=m[d]-t*p[d]},_.prototype.computeStress=function(){for(var m=0,p=0,t=this.n-1;p<t;++p)for(var d=p+1,l=this.n;d<l;++d){for(var h=0,f=0;f<this.k;++f){var u=this.x[f][p]-this.x[f][d];h+=u*u}h=Math.sqrt(h);var g=this.D[p][d];if(isFinite(g)){var C=g-h;m+=C*C/(g*g)}}return m},_.zeroDistance=1e-10,_}();D.Descent=c;var x=function(){function _(m){void 0===m&&(m=1),this.seed=m,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return _.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},_.prototype.getNextBetween=function(m,p){return m+this.getNext()*(p-m)},_}();D.PseudoRandom=x},30225:function(w,D,s){"use strict";var q,c=this&&this.__extends||(q=function(F,E){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,ft){ut.__proto__=ft}||function(ut,ft){for(var Dt in ft)ft.hasOwnProperty(Dt)&&(ut[Dt]=ft[Dt])})(F,E)},function(F,E){function ut(){this.constructor=F}q(F,E),F.prototype=null===E?Object.create(E):(ut.prototype=E.prototype,new ut)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(4068),_=function q(){};D.Point=_;var m=function q(F,E,ut,ft){this.x1=F,this.y1=E,this.x2=ut,this.y2=ft};D.LineSegment=m;var p=function(q){function F(){return null!==q&&q.apply(this,arguments)||this}return c(F,q),F}(_);function t(q,F,E){return(F.x-q.x)*(E.y-q.y)-(E.x-q.x)*(F.y-q.y)}function d(q,F,E){return t(q,F,E)>0}function l(q,F,E){return t(q,F,E)<0}function C(q,F){var E=F.slice(0);return E.push(F[0]),{rtan:L(q,E),ltan:I(q,E)}}function L(q,F){var ut,ft,Dt,Qt,E=F.length-1;if(l(q,F[1],F[0])&&!d(q,F[E-1],F[0]))return 0;for(ut=0,ft=E;;){if(ft-ut==1)return d(q,F[ut],F[ft])?ut:ft;if((Qt=l(q,F[(Dt=Math.floor((ut+ft)/2))+1],F[Dt]))&&!d(q,F[Dt-1],F[Dt]))return Dt;d(q,F[ut+1],F[ut])?Qt||d(q,F[ut],F[Dt])?ft=Dt:ut=Dt:Qt&&l(q,F[ut],F[Dt])?ft=Dt:ut=Dt}}function I(q,F){var ut,ft,Dt,Qt,E=F.length-1;if(d(q,F[E-1],F[0])&&!l(q,F[1],F[0]))return 0;for(ut=0,ft=E;;){if(ft-ut==1)return l(q,F[ut],F[ft])?ut:ft;if(Qt=l(q,F[(Dt=Math.floor((ut+ft)/2))+1],F[Dt]),d(q,F[Dt-1],F[Dt])&&!Qt)return Dt;l(q,F[ut+1],F[ut])?Qt?l(q,F[ut],F[Dt])?ft=Dt:ut=Dt:ft=Dt:Qt?ut=Dt:d(q,F[ut],F[Dt])?ft=Dt:ut=Dt}}function B(q,F,E,ut,ft,Dt){var St,Qt;Qt=ut(q[St=E(F[0],q)],F);for(var pe=!1;!pe;){for(pe=!0;St===q.length-1&&(St=0),!ft(F[Qt],q[St],q[St+1]);)++St;for(;0===Qt&&(Qt=F.length-1),!Dt(q[St],F[Qt],F[Qt-1]);)--Qt,pe=!1}return{t1:St,t2:Qt}}function R(q,F){return B(q,F,L,I,d,l)}D.PolyPoint=p,D.isLeft=t,D.ConvexHull=function h(q){var ut,F=q.slice(0).sort(function(zt,de){return zt.x!==de.x?de.x-zt.x:de.y-zt.y}),E=q.length,Dt=F[0].x;for(ut=1;ut<E&&F[ut].x===Dt;++ut);var St=ut-1,Qt=[];if(Qt.push(F[0]),St===E-1)F[St].y!==F[0].y&&Qt.push(F[St]);else{var pe,wt=E-1,yt=F[E-1].x;for(ut=E-2;ut>=0&&F[ut].x===yt;ut--);for(pe=ut+1,ut=St;++ut<=pe;)if(!(t(F[0],F[pe],F[ut])>=0&&ut<pe)){for(;Qt.length>1&&!(t(Qt[Qt.length-2],Qt[Qt.length-1],F[ut])>0);)Qt.length-=1;0!=ut&&Qt.push(F[ut])}wt!=pe&&Qt.push(F[wt]);var Nt=Qt.length;for(ut=pe;--ut>=St;)if(!(t(F[wt],F[St],F[ut])>=0&&ut>St)){for(;Qt.length>Nt&&!(t(Qt[Qt.length-2],Qt[Qt.length-1],F[ut])>0);)Qt.length-=1;0!=ut&&Qt.push(F[ut])}}return Qt},D.clockwiseRadialSweep=function f(q,F,E){F.slice(0).sort(function(ut,ft){return Math.atan2(ut.y-q.y,ut.x-q.x)-Math.atan2(ft.y-q.y,ft.x-q.x)}).forEach(E)},D.tangent_PolyPolyC=B,D.LRtangent_PolyPolyC=function M(q,F){var E=R(F,q);return{t1:E.t2,t2:E.t1}},D.RLtangent_PolyPolyC=R,D.LLtangent_PolyPolyC=function Z(q,F){return B(q,F,I,I,l,l)},D.RRtangent_PolyPolyC=function H(q,F){return B(q,F,L,L,d,d)};var G=function q(F,E){this.t1=F,this.t2=E};D.BiTangent=G;var tt=function q(){};D.BiTangents=tt;var K=function(q){function F(){return null!==q&&q.apply(this,arguments)||this}return c(F,q),F}(_);D.TVGPoint=K;var st=function q(F,E,ut,ft){this.id=F,this.polyid=E,this.polyvertid=ut,this.p=ft,ft.vv=this};D.VisibilityVertex=st;var j=function(){function q(F,E){this.source=F,this.target=E}return q.prototype.length=function(){var F=this.source.p.x-this.target.p.x,E=this.source.p.y-this.target.p.y;return Math.sqrt(F*F+E*E)},q}();D.VisibilityEdge=j;var W=function(){function q(F,E){if(this.P=F,this.V=[],this.E=[],E)this.V=E.V.slice(0),this.E=E.E.slice(0);else{for(var ut=F.length,ft=0;ft<ut;ft++){for(var Dt=F[ft],St=0;St<Dt.length;++St){var pe=new st(this.V.length,ft,St,Dt[St]);this.V.push(pe),St>0&&this.E.push(new j(Dt[St-1].vv,pe))}Dt.length>1&&this.E.push(new j(Dt[0].vv,Dt[Dt.length-1].vv))}for(ft=0;ft<ut-1;ft++){var wt=F[ft];for(St=ft+1;St<ut;St++){var yt=F[St],Nt=at(wt,yt);for(var zt in Nt){var de=Nt[zt];this.addEdgeIfVisible(wt[de.t1],yt[de.t2],ft,St)}}}}}return q.prototype.addEdgeIfVisible=function(F,E,ut,ft){this.intersectsPolys(new m(F.x,F.y,E.x,E.y),ut,ft)||this.E.push(new j(F.vv,E.vv))},q.prototype.addPoint=function(F,E){var ut=this.P.length;this.V.push(new st(this.V.length,ut,0,F));for(var ft=0;ft<ut;++ft)if(ft!==E){var Dt=this.P[ft],St=C(F,Dt);this.addEdgeIfVisible(F,Dt[St.ltan],E,ft),this.addEdgeIfVisible(F,Dt[St.rtan],E,ft)}return F.vv},q.prototype.intersectsPolys=function(F,E,ut){for(var ft=0,Dt=this.P.length;ft<Dt;++ft)if(ft!=E&&ft!=ut&&et(F,this.P[ft]).length>0)return!0;return!1},q}();function et(q,F){for(var E=[],ut=1,ft=F.length;ut<ft;++ut){var Dt=x.Rectangle.lineIntersection(q.x1,q.y1,q.x2,q.y2,F[ut-1].x,F[ut-1].y,F[ut].x,F[ut].y);Dt&&E.push(Dt)}return E}function at(q,F){for(var E=q.length-1,ut=F.length-1,ft=new tt,Dt=0;Dt<E;++Dt)for(var St=0;St<ut;++St){var Qt=q[0==Dt?E-1:Dt-1],pe=q[Dt],wt=q[Dt+1],yt=F[0==St?ut-1:St-1],Nt=F[St],zt=F[St+1],de=t(Qt,pe,Nt),ie=t(pe,yt,Nt),Mt=t(pe,Nt,zt),te=t(yt,Nt,pe),jt=t(Nt,Qt,pe),ae=t(Nt,pe,wt);de>=0&&ie>=0&&Mt<0&&te>=0&&jt>=0&&ae<0?ft.ll=new G(Dt,St):de<=0&&ie<=0&&Mt>0&&te<=0&&jt<=0&&ae>0?ft.rr=new G(Dt,St):de<=0&&ie>0&&Mt<=0&&te>=0&&jt<0&&ae>=0?ft.rl=new G(Dt,St):de>=0&&ie<0&&Mt>=0&&te<=0&&jt>0&&ae<=0&&(ft.lr=new G(Dt,St))}return ft}function nt(q,F){return!q.every(function(E){return!function Y(q,F){for(var E=1,ut=F.length;E<ut;++E)if(l(F[E-1],F[E],q))return!1;return!0}(E,F)})}D.TangentVisibilityGraph=W,D.tangents=at,D.polysOverlap=function rt(q,F){if(nt(q,F)||nt(F,q))return!0;for(var E=1,ut=q.length;E<ut;++E){var ft=q[E],Dt=q[E-1];if(et(new m(Dt.x,Dt.y,ft.x,ft.y),F).length>0)return!0}return!1}},76767:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(4068),x=s(98237),_=s(33858),m=function l(h,f,u){this.id=h,this.rect=f,this.children=u,this.leaf=typeof u>"u"||0===u.length};D.NodeWrapper=m;var p=function l(h,f,u,g,C){void 0===g&&(g=null),void 0===C&&(C=null),this.id=h,this.x=f,this.y=u,this.node=g,this.line=C};D.Vert=p;var t=function(){function l(h,f){this.s=h,this.t=f;var u=l.findMatch(h,f),g=f.slice(0).reverse(),C=l.findMatch(h,g);u.length>=C.length?(this.length=u.length,this.si=u.si,this.ti=u.ti,this.reversed=!1):(this.length=C.length,this.si=C.si,this.ti=f.length-C.ti-C.length,this.reversed=!0)}return l.findMatch=function(h,f){for(var u=h.length,g=f.length,C={length:0,si:-1,ti:-1},L=new Array(u),I=0;I<u;I++){L[I]=new Array(g);for(var B=0;B<g;B++)if(h[I]===f[B]){var M=L[I][B]=0===I||0===B?1:L[I-1][B-1]+1;M>C.length&&(C.length=M,C.si=I-M+1,C.ti=B-M+1)}else L[I][B]=0}return C},l.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},l}();D.LongestCommonSubsequence=t;var d=function(){function l(h,f,u){var g=this;void 0===u&&(u=12),this.originalnodes=h,this.groupPadding=u,this.leaves=null,this.nodes=h.map(function(K,st){return new m(st,f.getBounds(K),f.getChildren(K))}),this.leaves=this.nodes.filter(function(K){return K.leaf}),this.groups=this.nodes.filter(function(K){return!K.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(K){return K.children.forEach(function(st){return g.nodes[st].parent=K})}),this.root={children:[]},this.nodes.forEach(function(K){typeof K.parent>"u"&&(K.parent=g.root,g.root.children.push(K.id)),K.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(K,st){return g.getDepth(K)-g.getDepth(st)}),this.backToFront.slice(0).reverse().filter(function(K){return!K.leaf}).forEach(function(K){var st=c.Rectangle.empty();K.children.forEach(function(j){return st=st.union(g.nodes[j].rect)}),K.rect=st.inflate(g.groupPadding)});var L=this.midPoints(this.cols.map(function(K){return K.pos})),I=this.midPoints(this.rows.map(function(K){return K.pos})),B=L[0],M=L[L.length-1],R=I[0],Z=I[I.length-1],H=this.rows.map(function(K){return{x1:B,x2:M,y1:K.pos,y2:K.pos}}).concat(I.map(function(K){return{x1:B,x2:M,y1:K,y2:K}})),G=this.cols.map(function(K){return{x1:K.pos,x2:K.pos,y1:R,y2:Z}}).concat(L.map(function(K){return{x1:K,x2:K,y1:R,y2:Z}})),tt=H.concat(G);tt.forEach(function(K){return K.verts=[]}),this.verts=[],this.edges=[],H.forEach(function(K){return G.forEach(function(st){var j=new p(g.verts.length,st.x1,K.y1);K.verts.push(j),st.verts.push(j),g.verts.push(j);for(var W=g.backToFront.length;W-- >0;){var et=g.backToFront[W],at=et.rect,Y=Math.abs(j.x-at.cx()),nt=Math.abs(j.y-at.cy());if(Y<at.width()/2&&nt<at.height()/2){j.node=et;break}}})}),tt.forEach(function(K,st){g.nodes.forEach(function(nt,rt){nt.rect.lineIntersections(K.x1,K.y1,K.x2,K.y2).forEach(function(q,F){var E=new p(g.verts.length,q.x,q.y,nt,K);g.verts.push(E),K.verts.push(E),nt.ports.push(E)})});var j=Math.abs(K.y1-K.y2)<.1,W=function(nt,rt){return j?rt.x-nt.x:rt.y-nt.y};K.verts.sort(W);for(var et=1;et<K.verts.length;et++){var at=K.verts[et-1],Y=K.verts[et];at.node&&at.node===Y.node&&at.node.leaf||g.edges.push({source:at.id,target:Y.id,length:Math.abs(W(at,Y))})}})}return l.prototype.avg=function(h){return h.reduce(function(f,u){return f+u})/h.length},l.prototype.getGridLines=function(h){for(var f=[],u=this.leaves.slice(0,this.leaves.length);u.length>0;){var g=u.filter(function(L){return L.rect["overlap"+h.toUpperCase()](u[0].rect)}),C={nodes:g,pos:this.avg(g.map(function(L){return L.rect["c"+h]()}))};f.push(C),C.nodes.forEach(function(L){return u.splice(u.indexOf(L),1)})}return f.sort(function(L,I){return L.pos-I.pos}),f},l.prototype.getDepth=function(h){for(var f=0;h.parent!==this.root;)f++,h=h.parent;return f},l.prototype.midPoints=function(h){for(var f=h[1]-h[0],u=[h[0]-f/2],g=1;g<h.length;g++)u.push((h[g]+h[g-1])/2);return u.push(h[h.length-1]+f/2),u},l.prototype.findLineage=function(h){var f=[h];do{f.push(h=h.parent)}while(h!==this.root);return f.reverse()},l.prototype.findAncestorPathBetween=function(h,f){for(var u=this.findLineage(h),g=this.findLineage(f),C=0;u[C]===g[C];)C++;return{commonAncestor:u[C-1],lineages:u.slice(C).concat(g.slice(C))}},l.prototype.siblingObstacles=function(h,f){var u=this,g=this.findAncestorPathBetween(h,f),C={};g.lineages.forEach(function(I){return C[I.id]={}});var L=g.commonAncestor.children.filter(function(I){return!(I in C)});return g.lineages.filter(function(I){return I.parent!==g.commonAncestor}).forEach(function(I){return L=L.concat(I.parent.children.filter(function(B){return B!==I.id}))}),L.map(function(I){return u.nodes[I]})},l.getSegmentSets=function(h,f,u){for(var g=[],C=0;C<h.length;C++)for(var L=h[C],I=0;I<L.length;I++)(B=L[I]).edgeid=C,B.i=I,Math.abs(B[1][f]-B[0][f])<.1&&g.push(B);g.sort(function(G,tt){return G[0][f]-tt[0][f]});for(var R=[],Z=null,H=0;H<g.length;H++){var B=g[H];(!Z||Math.abs(B[0][f]-Z.pos)>.1)&&R.push(Z={pos:B[0][f],segments:[]}),Z.segments.push(B)}return R},l.nudgeSegs=function(h,f,u,g,C,L){var I=g.length;if(!(I<=1)){for(var B=g.map(function(et){return new x.Variable(et[0][h])}),M=[],R=0;R<I;R++)for(var Z=0;Z<I;Z++)if(R!==Z){var H=g[R],tt=H.edgeid,K=g[Z].edgeid,st=-1,j=-1;"x"==h?C(tt,K)&&(H[0][f]<H[1][f]?(st=Z,j=R):(st=R,j=Z)):C(tt,K)&&(H[0][f]<H[1][f]?(st=R,j=Z):(st=Z,j=R)),st>=0&&M.push(new x.Constraint(B[st],B[j],L))}new x.Solver(B,M).solve(),B.forEach(function(et,at){var Y=g[at],nt=et.position();Y[0][h]=Y[1][h]=nt;var rt=u[Y.edgeid];Y.i>0&&(rt[Y.i-1][1][h]=nt),Y.i<rt.length-1&&(rt[Y.i+1][0][h]=nt)})}},l.nudgeSegments=function(h,f,u,g,C){for(var L=l.getSegmentSets(h,f,u),I=0;I<L.length;I++){for(var B=L[I],M=[],R=0;R<B.segments.length;R++){var Z=B.segments[R];M.push({type:0,s:Z,pos:Math.min(Z[0][u],Z[1][u])}),M.push({type:1,s:Z,pos:Math.max(Z[0][u],Z[1][u])})}M.sort(function(tt,K){return tt.pos-K.pos+tt.type-K.type});var H=[],G=0;M.forEach(function(tt){0===tt.type?(H.push(tt.s),G++):G--,0==G&&(l.nudgeSegs(f,u,h,H,g,C),H=[])})}},l.prototype.routeEdges=function(h,f,u,g){var C=this,L=h.map(function(M){return C.route(u(M),g(M))}),I=l.orderEdges(L),B=L.map(function(M){return l.makeSegments(M)});return l.nudgeSegments(B,"x","y",I,f),l.nudgeSegments(B,"y","x",I,f),l.unreverseEdges(B,L),B},l.unreverseEdges=function(h,f){h.forEach(function(u,g){f[g].reversed&&(u.reverse(),u.forEach(function(L){L.reverse()}))})},l.angleBetween2Lines=function(h,f){var u=Math.atan2(h[0].y-h[1].y,h[0].x-h[1].x),g=Math.atan2(f[0].y-f[1].y,f[0].x-f[1].x),C=u-g;return(C>Math.PI||C<-Math.PI)&&(C=g-u),C},l.isLeft=function(h,f,u){return(f.x-h.x)*(u.y-h.y)-(f.y-h.y)*(u.x-h.x)<=0},l.getOrder=function(h){for(var f={},u=0;u<h.length;u++){var g=h[u];typeof f[g.l]>"u"&&(f[g.l]={}),f[g.l][g.r]=!0}return function(C,L){return typeof f[C]<"u"&&f[C][L]}},l.orderEdges=function(h){for(var f=[],u=0;u<h.length-1;u++)for(var g=u+1;g<h.length;g++){var B,M,R,C=h[u],L=h[g],I=new t(C,L);if(0!==I.length){if(I.reversed&&(L.reverse(),L.reversed=!0,I=new t(C,L)),(I.si<=0||I.ti<=0)&&(I.si+I.length>=C.length||I.ti+I.length>=L.length)){f.push({l:u,r:g});continue}I.si+I.length>=C.length||I.ti+I.length>=L.length?(B=C[I.si+1],R=C[I.si-1],M=L[I.ti-1]):(B=C[I.si+I.length-2],M=C[I.si+I.length],R=L[I.ti+I.length]),l.isLeft(B,M,R)?f.push({l:g,r:u}):f.push({l:u,r:g})}}return l.getOrder(f)},l.makeSegments=function(h){function f(M){return{x:M.x,y:M.y}}for(var g=[],C=f(h[0]),L=1;L<h.length;L++){var I=f(h[L]),B=L<h.length-1?h[L+1]:null;(!B||(M=C,R=I,Z=B,!(Math.abs((R.x-M.x)*(Z.y-M.y)-(R.y-M.y)*(Z.x-M.x))<.001)))&&(g.push([C,I]),C=I)}var M,R,Z;return g},l.prototype.route=function(h,f){var u=this,g=this.nodes[h],C=this.nodes[f];this.obstacles=this.siblingObstacles(g,C);var L={};this.obstacles.forEach(function(j){return L[j.id]=j}),this.passableEdges=this.edges.filter(function(j){var W=u.verts[j.source],et=u.verts[j.target];return!(W.node&&W.node.id in L||et.node&&et.node.id in L)});for(var I=1;I<g.ports.length;I++)this.passableEdges.push({source:g.ports[0].id,target:g.ports[I].id,length:0});for(I=1;I<C.ports.length;I++)this.passableEdges.push({source:C.ports[0].id,target:C.ports[I].id,length:0});var st=new _.Calculator(this.verts.length,this.passableEdges,function(j){return j.source},function(j){return j.target},function(j){return j.length}).PathFromNodeToNodeWithPrevCost(g.ports[0].id,C.ports[0].id,function(j,W,et){var at=u.verts[j],Y=u.verts[W],nt=u.verts[et],rt=Math.abs(nt.x-at.x),q=Math.abs(nt.y-at.y);return at.node===g&&at.node===Y.node||Y.node===C&&Y.node===nt.node?0:rt>1&&q>1?1e3:0}).reverse().map(function(j){return u.verts[j]});return st.push(this.nodes[C.id].ports[0]),st.filter(function(j,W){return!(W<st.length-1&&st[W+1].node===g&&j.node===g||W>0&&j.node===C&&st[W-1].node===C)})},l.getRoutePath=function(h,f,u,g){var I,B,M,rt,q,C={routepath:"M "+h[0][0].x+" "+h[0][0].y+" ",arrowpath:""};if(h.length>1)for(var L=0;L<h.length;L++){var R=(B=(I=h[L])[1].x)-I[0].x,Z=(M=I[1].y)-I[0].y;if(L<h.length-1){Math.abs(R)>0?B-=R/Math.abs(R)*f:M-=Z/Math.abs(Z)*f,C.routepath+="L "+B+" "+M+" ";var H=h[L+1],G=H[0].x,tt=H[0].y;R=H[1].x-G,Z=H[1].y-tt;var W,et,j=l.angleBetween2Lines(I,H)<0?1:0;Math.abs(R)>0?(W=G+R/Math.abs(R)*f,et=tt):(W=G,et=tt+Z/Math.abs(Z)*f);var at=Math.abs(W-B),Y=Math.abs(et-M);C.routepath+="A "+at+" "+Y+" 0 0 "+j+" "+W+" "+et+" "}else{var nt=[B,M];Math.abs(R)>0?(rt=[B-=R/Math.abs(R)*g,M+u],q=[B,M-u]):(rt=[B+u,M-=Z/Math.abs(Z)*g],q=[B-u,M]),C.routepath+="L "+B+" "+M+" ",g>0&&(C.arrowpath="M "+nt[0]+" "+nt[1]+" L "+rt[0]+" "+rt[1]+" L "+q[0]+" "+q[1])}}else R=(B=(I=h[0])[1].x)-I[0].x,Z=(M=I[1].y)-I[0].y,nt=[B,M],Math.abs(R)>0?(rt=[B-=R/Math.abs(R)*g,M+u],q=[B,M-u]):(rt=[B+u,M-=Z/Math.abs(Z)*g],q=[B-u,M]),C.routepath+="L "+B+" "+M+" ",g>0&&(C.arrowpath="M "+nt[0]+" "+nt[1]+" L "+rt[0]+" "+rt[1]+" L "+q[0]+" "+q[1]);return C},l}();D.GridRouter=d},30345:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s_GOLDEN_SECTION=(1+Math.sqrt(5))/2;D.applyPacking=function c(_,m,p,L,C,l){void 0===C&&(C=1),void 0===l&&(l=!0);var u=m,g=p,I=(C=typeof C<"u"?C:1,L=typeof L<"u"?L:0,0),B=0,M=0,R=0,Z=[];function K(et,at){Z=[],I=0,B=0,R=0;for(var Y=0;Y<et.length;Y++)st(et[Y],at);return Math.abs(function W(){return I/B}()-C)}function st(et,at){for(var Y=void 0,nt=0;nt<Z.length;nt++)if(Z[nt].space_left>=et.height&&Z[nt].x+Z[nt].width+et.width+10-at<=1e-4){Y=Z[nt];break}Z.push(et),void 0!==Y?(et.x=Y.x+Y.width+10,et.y=Y.bottom,et.space_left=et.height,et.bottom=et.y,Y.space_left-=et.height+10,Y.bottom+=et.height+10):(et.y=R,R+=et.height+10,et.x=0,et.bottom=et.y,et.space_left=et.height),et.y+et.height-B>-1e-4&&(B=et.y+et.height-0),et.x+et.width-I>-1e-4&&(I=et.x+et.width-0)}0!=_.length&&(function H(et){et.forEach(function(Y){!function at(Y){var nt=Number.MAX_VALUE,rt=Number.MAX_VALUE,q=0,F=0;Y.array.forEach(function(E){var ut=typeof E.width<"u"?E.width:L,ft=typeof E.height<"u"?E.height:L;ut/=2,ft/=2,q=Math.max(E.x+ut,q),nt=Math.min(E.x-ut,nt),F=Math.max(E.y+ft,F),rt=Math.min(E.y-ft,rt)}),Y.width=q-nt,Y.height=F-rt}(Y)})}(_),function tt(et,at){var Y=Number.POSITIVE_INFINITY,nt=0;et.sort(function(wt,yt){return yt.height-wt.height});for(var rt=Qt=M=et.reduce(function(wt,yt){return wt.width<yt.width?wt.width:yt.width}),q=pe=function j(et){var at=0;return et.forEach(function(Y){return at+=Y.width+10}),at}(et),F=0,E=Number.MAX_VALUE,ut=Number.MAX_VALUE,ft=-1,Dt=Number.MAX_VALUE,St=Number.MAX_VALUE;Dt>M||St>1e-4;){if(1!=ft){var Qt=q-(q-rt)/s_GOLDEN_SECTION;E=K(et,Qt)}if(0!=ft){var pe=rt+(q-rt)/s_GOLDEN_SECTION;ut=K(et,pe)}if(Dt=Math.abs(Qt-pe),St=Math.abs(E-ut),E<Y&&(Y=E,nt=Qt),ut<Y&&(Y=ut,nt=pe),E>ut?(rt=Qt,Qt=pe,E=ut,ft=1):(q=pe,pe=Qt,ut=E,ft=0),F++>100)break}K(et,nt)}(_),l&&function G(et){et.forEach(function(at){var Y={x:0,y:0};at.array.forEach(function(q){Y.x+=q.x,Y.y+=q.y}),Y.x/=at.array.length,Y.y/=at.array.length;var rt_x=at.x-(Y.x-at.width/2)+u/2-I/2,rt_y=at.y-(Y.y-at.height/2)+g/2-B/2;at.array.forEach(function(q){q.x+=rt_x,q.y+=rt_y})})}(_))},D.separateGraphs=function x(_,m){for(var p={},t={},d=[],l=0,h=0;h<m.length;h++){var f=m[h],u=f.source,g=f.target;t[u.index]?t[u.index].push(g):t[u.index]=[g],t[g.index]?t[g.index].push(u):t[g.index]=[u]}for(h=0;h<_.length;h++){var C=_[h];p[C.index]||L(C,!0)}function L(I,B){if(void 0===p[I.index]){B&&(l++,d.push({array:[]})),p[I.index]=l,d[l-1].array.push(I);var M=t[I.index];if(M)for(var R=0;R<M.length;R++)L(M[R],!1)}}return d}},15675:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var l,u,c=s(33900),x=s(58802),_=s(91786),m=s(4068),p=s(33858),t=s(30225),d=s(30345);function h(u){return typeof u.leaves<"u"||typeof u.groups<"u"}(u=l=D.EventType||(D.EventType={}))[u.start=0]="start",u[u.tick=1]="tick",u[u.end=2]="end";var f=function(){function u(){var g=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:u.getSourceIndex,getTargetIndex:u.getTargetIndex,setLength:u.setLinkLength,getType:function(C){return"function"==typeof g._linkType?g._linkType(C):0}}}return u.prototype.on=function(g,C){return this.event||(this.event={}),"string"==typeof g?this.event[l[g]]=C:this.event[g]=C,this},u.prototype.trigger=function(g){this.event&&typeof this.event[g.type]<"u"&&this.event[g.type](g)},u.prototype.kick=function(){for(;!this.tick(););},u.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:l.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var L,I,g=this._nodes.length;for(this._descent.locks.clear(),I=0;I<g;++I)(L=this._nodes[I]).fixed&&((typeof L.px>"u"||typeof L.py>"u")&&(L.px=L.x,L.py=L.y),this._descent.locks.add(I,[L.px,L.py]));var M=this._descent.rungeKutta();return 0===M?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=M),this._lastStress=M,this.updateNodePositions(),this.trigger({type:l.tick,alpha:this._alpha,stress:this._lastStress}),!1},u.prototype.updateNodePositions=function(){for(var L,g=this._descent.x[0],C=this._descent.x[1],I=this._nodes.length;I--;)(L=this._nodes[I]).x=g[I],L.y=C[I]},u.prototype.nodes=function(g){if(!g){if(0===this._nodes.length&&this._links.length>0){var C=0;this._links.forEach(function(I){C=Math.max(C,I.source,I.target)}),this._nodes=new Array(++C);for(var L=0;L<C;++L)this._nodes[L]={}}return this._nodes}return this._nodes=g,this},u.prototype.groups=function(g){var C=this;return g?(this._groups=g,this._rootGroup={},this._groups.forEach(function(L){typeof L.padding>"u"&&(L.padding=1),typeof L.leaves<"u"&&L.leaves.forEach(function(I,B){"number"==typeof I&&((L.leaves[B]=C._nodes[I]).parent=L)}),typeof L.groups<"u"&&L.groups.forEach(function(I,B){"number"==typeof I&&((L.groups[B]=C._groups[I]).parent=L)})}),this._rootGroup.leaves=this._nodes.filter(function(L){return typeof L.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(L){return typeof L.parent>"u"}),this):this._groups},u.prototype.powerGraphGroups=function(g){var C=c.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(C.groups),g(C),this},u.prototype.avoidOverlaps=function(g){return arguments.length?(this._avoidOverlaps=g,this):this._avoidOverlaps},u.prototype.handleDisconnected=function(g){return arguments.length?(this._handleDisconnected=g,this):this._handleDisconnected},u.prototype.flowLayout=function(g,C){return arguments.length||(g="y"),this._directedLinkConstraints={axis:g,getMinSeparation:"number"==typeof C?function(){return C}:C},this},u.prototype.links=function(g){return arguments.length?(this._links=g,this):this._links},u.prototype.constraints=function(g){return arguments.length?(this._constraints=g,this):this._constraints},u.prototype.distanceMatrix=function(g){return arguments.length?(this._distanceMatrix=g,this):this._distanceMatrix},u.prototype.size=function(g){return g?(this._canvasSize=g,this):this._canvasSize},u.prototype.defaultNodeSize=function(g){return g?(this._defaultNodeSize=g,this):this._defaultNodeSize},u.prototype.groupCompactness=function(g){return g?(this._groupCompactness=g,this):this._groupCompactness},u.prototype.linkDistance=function(g){return g?(this._linkDistance="function"==typeof g?g:+g,this._linkLengthCalculator=null,this):this._linkDistance},u.prototype.linkType=function(g){return this._linkType=g,this},u.prototype.convergenceThreshold=function(g){return g?(this._threshold="function"==typeof g?g:+g,this):this._threshold},u.prototype.alpha=function(g){return arguments.length?(g=+g,this._alpha?this._alpha=g>0?g:0:g>0&&(this._running||(this._running=!0,this.trigger({type:l.start,alpha:this._alpha=g}),this.kick())),this):this._alpha},u.prototype.getLinkLength=function(g){return"function"==typeof this._linkDistance?+this._linkDistance(g):this._linkDistance},u.setLinkLength=function(g,C){g.length=C},u.prototype.getLinkType=function(g){return"function"==typeof this._linkType?this._linkType(g):0},u.prototype.symmetricDiffLinkLengths=function(g,C){var L=this;return void 0===C&&(C=1),this.linkDistance(function(I){return g*I.length}),this._linkLengthCalculator=function(){return x.symmetricDiffLinkLengths(L._links,L.linkAccessor,C)},this},u.prototype.jaccardLinkLengths=function(g,C){var L=this;return void 0===C&&(C=1),this.linkDistance(function(I){return g*I.length}),this._linkLengthCalculator=function(){return x.jaccardLinkLengths(L._links,L.linkAccessor,C)},this},u.prototype.start=function(g,C,L,I,B,M){var R=this;void 0===g&&(g=0),void 0===C&&(C=0),void 0===L&&(L=0),void 0===I&&(I=0),void 0===B&&(B=!0),void 0===M&&(M=!0);var nt,G=this.nodes().length,tt=G+2*this._groups.length,st=this._canvasSize[0],j=this._canvasSize[1],W=new Array(tt),et=new Array(tt),at=null,Y=this._avoidOverlaps;this._nodes.forEach(function(Dt,St){Dt.index=St,typeof Dt.x>"u"&&(Dt.x=st/2,Dt.y=j/2),W[St]=Dt.x,et[St]=Dt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?nt=this._distanceMatrix:(nt=new p.Calculator(tt,this._links,u.getSourceIndex,u.getTargetIndex,function(Dt){return R.getLinkLength(Dt)}).DistanceMatrix(),at=_.Descent.createSquareMatrix(tt,function(){return 2}),this._links.forEach(function(Dt){"number"==typeof Dt.source&&(Dt.source=R._nodes[Dt.source]),"number"==typeof Dt.target&&(Dt.target=R._nodes[Dt.target])}),this._links.forEach(function(Dt){var St=u.getSourceIndex(Dt),Qt=u.getTargetIndex(Dt);at[St][Qt]=at[Qt][St]=Dt.weight||1}));var rt=_.Descent.createSquareMatrix(tt,function(Dt,St){return nt[Dt][St]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var Z=G;this._groups.forEach(function(St){(function(St,Qt,pe,wt){at[St][Qt]=at[Qt][St]=pe,rt[St][Qt]=rt[Qt][St]=.1})(Z,Z+1,R._groupCompactness),W[Z]=0,et[Z++]=0,W[Z]=0,et[Z++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var F=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,F=F.concat(x.generateDirectedEdgeConstraints(G,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new _.Descent([W,et],rt),this._descent.locks.clear(),Z=0;Z<G;++Z){var E=this._nodes[Z];E.fixed&&(E.px=E.x,E.py=E.y,this._descent.locks.add(Z,[E.x,E.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(g,W,et),F.length>0&&(this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,F).projectFunctions()),this._descent.run(C),this.separateOverlappingComponents(st,j,M),this.avoidOverlaps(Y),Y&&(this._nodes.forEach(function(Dt,St){Dt.x=W[St],Dt.y=et[St]}),this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,F,!0).projectFunctions(),this._nodes.forEach(function(Dt,St){W[St]=Dt.x,et[St]=Dt.y})),this._descent.G=at,this._descent.run(L),I){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=G,this._descent.scaleSnapByMaxH=G!=tt;var ft=_.Descent.createSquareMatrix(tt,function(Dt,St){return Dt>=G||St>=G?at[Dt][St]:0});this._descent.G=ft,this._descent.run(I)}return this.updateNodePositions(),this.separateOverlappingComponents(st,j,M),B?this.resume():this},u.prototype.initialLayout=function(g,C,L){if(this._groups.length>0&&g>0){var I=this._nodes.length,B=this._links.map(function(R){return{source:R.source.index,target:R.target.index}}),M=this._nodes.map(function(R){return{index:R.index}});this._groups.forEach(function(R,Z){M.push({index:R.index=I+Z})}),this._groups.forEach(function(R,Z){typeof R.leaves<"u"&&R.leaves.forEach(function(H){return B.push({source:R.index,target:H.index})}),typeof R.groups<"u"&&R.groups.forEach(function(H){return B.push({source:R.index,target:H.index})})}),(new u).size(this.size()).nodes(M).links(B).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(g,0,0,0,!1),this._nodes.forEach(function(R){C[R.index]=M[R.index].x,L[R.index]=M[R.index].y})}else this._descent.run(g)},u.prototype.separateOverlappingComponents=function(g,C,L){var I=this;if(void 0===L&&(L=!0),!this._distanceMatrix&&this._handleDisconnected){var B=this._descent.x[0],M=this._descent.x[1];this._nodes.forEach(function(Z,H){Z.x=B[H],Z.y=M[H]});var R=d.separateGraphs(this._nodes,this._links);d.applyPacking(R,g,C,this._defaultNodeSize,1,L),this._nodes.forEach(function(Z,H){I._descent.x[0][H]=Z.x,I._descent.x[1][H]=Z.y,Z.bounds&&(Z.bounds.setXCentre(Z.x),Z.bounds.setYCentre(Z.y))})}},u.prototype.resume=function(){return this.alpha(.1)},u.prototype.stop=function(){return this.alpha(0)},u.prototype.prepareEdgeRouting=function(g){void 0===g&&(g=0),this._visibilityGraph=new t.TangentVisibilityGraph(this._nodes.map(function(C){return C.bounds.inflate(-g).vertices()}))},u.prototype.routeEdge=function(g,C,L){void 0===C&&(C=5);var I=[],B=new t.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),M={x:g.source.x,y:g.source.y},R={x:g.target.x,y:g.target.y},Z=B.addPoint(M,g.source.index),H=B.addPoint(R,g.target.index);B.addEdgeIfVisible(M,R,g.source.index,g.target.index),typeof L<"u"&&L(B);var j=new p.Calculator(B.V.length,B.E,function(rt){return rt.source.id},function(rt){return rt.target.id},function(rt){return rt.length()}).PathFromNodeToNode(Z.id,H.id);if(1===j.length||j.length===B.V.length){var W=m.makeEdgeBetween(g.source.innerBounds,g.target.innerBounds,C);I=[W.sourceIntersection,W.arrowStart]}else{for(var et=j.length-2,at=B.V[j[et]].p,Y=B.V[j[0]].p,nt=(I=[g.source.innerBounds.rayIntersection(at.x,at.y)],et);nt>=0;--nt)I.push(B.V[j[nt]].p);I.push(m.makeEdgeTo(Y,g.target.innerBounds,C))}return I},u.getSourceIndex=function(g){return"number"==typeof g.source?g.source:g.source.index},u.getTargetIndex=function(g){return"number"==typeof g.target?g.target:g.target.index},u.linkId=function(g){return u.getSourceIndex(g)+"-"+u.getTargetIndex(g)},u.dragStart=function(g){h(g)?u.storeOffset(g,u.dragOrigin(g)):(u.stopNode(g),g.fixed|=2)},u.stopNode=function(g){g.px=g.x,g.py=g.y},u.storeOffset=function(g,C){typeof g.leaves<"u"&&g.leaves.forEach(function(L){L.fixed|=2,u.stopNode(L),L._dragGroupOffsetX=L.x-C.x,L._dragGroupOffsetY=L.y-C.y}),typeof g.groups<"u"&&g.groups.forEach(function(L){return u.storeOffset(L,C)})},u.dragOrigin=function(g){return h(g)?{x:g.bounds.cx(),y:g.bounds.cy()}:g},u.drag=function(g,C){h(g)?(typeof g.leaves<"u"&&g.leaves.forEach(function(L){g.bounds.setXCentre(C.x),g.bounds.setYCentre(C.y),L.px=L._dragGroupOffsetX+C.x,L.py=L._dragGroupOffsetY+C.y}),typeof g.groups<"u"&&g.groups.forEach(function(L){return u.drag(L,C)})):(g.px=C.x,g.py=C.y)},u.dragEnd=function(g){h(g)?(typeof g.leaves<"u"&&g.leaves.forEach(function(C){u.dragEnd(C),delete C._dragGroupOffsetX,delete C._dragGroupOffsetY}),typeof g.groups<"u"&&g.groups.forEach(u.dragEnd)):g.fixed&=-7},u.mouseOver=function(g){g.fixed|=4,g.px=g.x,g.py=g.y},u.mouseOut=function(g){g.fixed&=-5},u}();D.Layout=f},86461:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(33858),x=s(91786),_=s(4068),m=s(58802),p=function(){function h(f,u){this.source=f,this.target=u}return h.prototype.actualLength=function(f){var u=this;return Math.sqrt(f.reduce(function(g,C){var L=C[u.target]-C[u.source];return g+L*L},0))},h}();D.Link3D=p,D.Node3D=function h(f,u,g){void 0===f&&(f=0),void 0===u&&(u=0),void 0===g&&(g=0),this.x=f,this.y=u,this.z=g};var d=function(){function h(f,u,g){var C=this;void 0===g&&(g=1),this.nodes=f,this.links=u,this.idealLinkLength=g,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(h.k);for(var L=0;L<h.k;++L)this.result[L]=new Array(f.length);f.forEach(function(I,B){for(var M=0,R=h.dims;M<R.length;M++){var Z=R[M];typeof I[Z]>"u"&&(I[Z]=Math.random())}C.result[0][B]=I.x,C.result[1][B]=I.y,C.result[2][B]=I.z})}return h.prototype.linkLength=function(f){return f.actualLength(this.result)},h.prototype.start=function(f){var u=this;void 0===f&&(f=100);var g=this.nodes.length,C=new l;this.useJaccardLinkLengths&&m.jaccardLinkLengths(this.links,C,1.5),this.links.forEach(function(Z){return Z.length*=u.idealLinkLength});var L=new c.Calculator(g,this.links,function(Z){return Z.source},function(Z){return Z.target},function(Z){return Z.length}).DistanceMatrix(),I=x.Descent.createSquareMatrix(g,function(Z,H){return L[Z][H]}),B=x.Descent.createSquareMatrix(g,function(){return 2});this.links.forEach(function(Z){var H=Z.source,G=Z.target;return B[H][G]=B[G][H]=1}),this.descent=new x.Descent(this.result,I),this.descent.threshold=.001,this.descent.G=B,this.constraints&&(this.descent.project=new _.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var M=0;M<this.nodes.length;M++){var R=this.nodes[M];R.fixed&&this.descent.locks.add(M,[R.x,R.y,R.z])}return this.descent.run(f),this},h.prototype.tick=function(){this.descent.locks.clear();for(var f=0;f<this.nodes.length;f++){var u=this.nodes[f];u.fixed&&this.descent.locks.add(f,[u.x,u.y,u.z])}return this.descent.rungeKutta()},h.k=(h.dims=["x","y","z"]).length,h}();D.Layout3D=d;var l=function(){function h(){}return h.prototype.getSourceIndex=function(f){return f.source},h.prototype.getTargetIndex=function(f){return f.target},h.prototype.getLength=function(f){return f.length},h.prototype.setLength=function(f,u){f.length=u},h}()},58802:(w,D)=>{"use strict";function s(l,h){var f={};for(var u in l)f[u]={};for(var u in h)f[u]={};return Object.keys(f).length}function c(l,h){var f=0;for(var u in l)typeof h[u]<"u"&&++f;return f}function _(l,h,f,u){var g=function x(l,h){var f={},u=function(g,C){typeof f[g]>"u"&&(f[g]={}),f[g][C]={}};return l.forEach(function(g){var C=h.getSourceIndex(g),L=h.getTargetIndex(g);u(C,L),u(L,C)}),f}(l,u);l.forEach(function(C){var L=g[u.getSourceIndex(C)],I=g[u.getTargetIndex(C)];u.setLength(C,1+h*f(L,I))})}function d(l,h,f){var u=[],g=0,C=[],L=[];function I(j){j.index=j.lowlink=g++,C.push(j),j.onStack=!0;for(var W=0,et=j.out;W<et.length;W++){var at=et[W];typeof at.index>"u"?(I(at),j.lowlink=Math.min(j.lowlink,at.lowlink)):at.onStack&&(j.lowlink=Math.min(j.lowlink,at.index))}if(j.lowlink===j.index){for(var Y=[];C.length&&((at=C.pop()).onStack=!1,Y.push(at),at!==j););L.push(Y.map(function(nt){return nt.id}))}}for(var B=0;B<l;B++)u.push({id:B,out:[]});for(var M=0,R=h;M<R.length;M++){var Z=R[M],H=u[f.getSourceIndex(Z)],G=u[f.getTargetIndex(Z)];H.out.push(G)}for(var tt=0,K=u;tt<K.length;tt++){var st=K[tt];typeof st.index>"u"&&I(st)}return L}Object.defineProperty(D,"__esModule",{value:!0}),D.symmetricDiffLinkLengths=function m(l,h,f){void 0===f&&(f=1),_(l,f,function(u,g){return Math.sqrt(s(u,g)-c(u,g))},h)},D.jaccardLinkLengths=function p(l,h,f){void 0===f&&(f=1),_(l,f,function(u,g){return Math.min(Object.keys(u).length,Object.keys(g).length)<1.1?0:c(u,g)/s(u,g)},h)},D.generateDirectedEdgeConstraints=function t(l,h,f,u){var g=d(l,h,u),C={};g.forEach(function(I,B){return I.forEach(function(M){return C[M]=B})});var L=[];return h.forEach(function(I){var B=u.getSourceIndex(I),M=u.getTargetIndex(I);C[B]!==C[M]&&L.push({axis:f,left:B,right:M,gap:u.getMinSeparation(I)})}),L},D.stronglyConnectedComponents=d},33900:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function h(f,u,g){this.source=f,this.target=u,this.type=g};D.PowerEdge=s;var c=function(){function h(f,u,g,C){var L=this;if(this.linkAccessor=g,this.modules=new Array(f),this.roots=[],C)this.initModulesFromGroup(C);else{this.roots.push(new p);for(var I=0;I<f;++I)this.roots[0].add(this.modules[I]=new _(I))}this.R=u.length,u.forEach(function(B){var M=L.modules[g.getSourceIndex(B)],R=L.modules[g.getTargetIndex(B)],Z=g.getType(B);M.outgoing.add(Z,R),R.incoming.add(Z,M)})}return h.prototype.initModulesFromGroup=function(f){var u=new p;this.roots.push(u);for(var g=0;g<f.leaves.length;++g){var C=f.leaves[g],L=new _(C.id);this.modules[C.id]=L,u.add(L)}if(f.groups)for(var I=0;I<f.groups.length;++I){var B=f.groups[I],M={};for(var R in B)"leaves"!==R&&"groups"!==R&&B.hasOwnProperty(R)&&(M[R]=B[R]);u.add(new _(-1-I,new t,new t,this.initModulesFromGroup(B),M))}return u},h.prototype.merge=function(f,u,g){void 0===g&&(g=0);var C=f.incoming.intersection(u.incoming),L=f.outgoing.intersection(u.outgoing),I=new p;I.add(f),I.add(u);var B=new _(this.modules.length,L,C,I);this.modules.push(B);var M=function(R,Z,H){R.forAll(function(G,tt){G.forAll(function(K){var st=K[Z];st.add(tt,B),st.remove(tt,f),st.remove(tt,u),f[H].remove(tt,K),u[H].remove(tt,K)})})};return M(L,"incoming","outgoing"),M(C,"outgoing","incoming"),this.R-=C.count()+L.count(),this.roots[g].remove(f),this.roots[g].remove(u),this.roots[g].add(B),B},h.prototype.rootMerges=function(f){void 0===f&&(f=0);for(var u=this.roots[f].modules(),g=u.length,C=new Array(g*(g-1)),L=0,I=0,B=g-1;I<B;++I)for(var M=I+1;M<g;++M){var R=u[I],Z=u[M];C[L]={id:L,nEdges:this.nEdges(R,Z),a:R,b:Z},L++}return C},h.prototype.greedyMerge=function(){for(var f=0;f<this.roots.length;++f)if(!(this.roots[f].modules().length<2)){var g=this.rootMerges(f).sort(function(C,L){return C.nEdges==L.nEdges?C.id-L.id:C.nEdges-L.nEdges})[0];if(!(g.nEdges>=this.R))return this.merge(g.a,g.b,f),!0}},h.prototype.nEdges=function(f,u){var g=f.incoming.intersection(u.incoming),C=f.outgoing.intersection(u.outgoing);return this.R-g.count()-C.count()},h.prototype.getGroupHierarchy=function(f){var u=this,g=[];return x(this.roots[0],{},g),this.allEdges().forEach(function(I){var B=u.modules[I.source],M=u.modules[I.target];f.push(new s(typeof B.gid>"u"?I.source:g[B.gid],typeof M.gid>"u"?I.target:g[M.gid],I.type))}),g},h.prototype.allEdges=function(){var f=[];return h.getEdges(this.roots[0],f),f},h.getEdges=function(f,u){f.forAll(function(g){g.getEdges(u),h.getEdges(g.children,u)})},h}();function x(h,f,u){h.forAll(function(g){if(g.isLeaf())f.leaves||(f.leaves=[]),f.leaves.push(g.id);else{var C=f;if(g.gid=u.length,!g.isIsland()||g.isPredefined()){if(C={id:g.gid},g.isPredefined())for(var L in g.definition)C[L]=g.definition[L];f.groups||(f.groups=[]),f.groups.push(g.gid),u.push(C)}x(g.children,C,u)}})}D.Configuration=c;var _=function(){function h(f,u,g,C,L){void 0===u&&(u=new t),void 0===g&&(g=new t),void 0===C&&(C=new p),this.id=f,this.outgoing=u,this.incoming=g,this.children=C,this.definition=L}return h.prototype.getEdges=function(f){var u=this;this.outgoing.forAll(function(g,C){g.forAll(function(L){f.push(new s(u.id,L.id,C))})})},h.prototype.isLeaf=function(){return 0===this.children.count()},h.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},h.prototype.isPredefined=function(){return typeof this.definition<"u"},h}();D.Module=_;var p=function(){function h(){this.table={}}return h.prototype.count=function(){return Object.keys(this.table).length},h.prototype.intersection=function(f){var u=new h;return u.table=function m(h,f){var u={};for(var g in h)g in f&&(u[g]=h[g]);return u}(this.table,f.table),u},h.prototype.intersectionCount=function(f){return this.intersection(f).count()},h.prototype.contains=function(f){return f in this.table},h.prototype.add=function(f){this.table[f.id]=f},h.prototype.remove=function(f){delete this.table[f.id]},h.prototype.forAll=function(f){for(var u in this.table)f(this.table[u])},h.prototype.modules=function(){var f=[];return this.forAll(function(u){u.isPredefined()||f.push(u)}),f},h}();D.ModuleSet=p;var t=function(){function h(){this.sets={},this.n=0}return h.prototype.count=function(){return this.n},h.prototype.contains=function(f){var u=!1;return this.forAllModules(function(g){!u&&g.id==f&&(u=!0)}),u},h.prototype.add=function(f,u){(f in this.sets?this.sets[f]:this.sets[f]=new p).add(u),++this.n},h.prototype.remove=function(f,u){var g=this.sets[f];g.remove(u),0===g.count()&&delete this.sets[f],--this.n},h.prototype.forAll=function(f){for(var u in this.sets)f(this.sets[u],Number(u))},h.prototype.forAllModules=function(f){this.forAll(function(u,g){return u.forAll(f)})},h.prototype.intersection=function(f){var u=new h;return this.forAll(function(g,C){if(C in f.sets){var L=g.intersection(f.sets[C]),I=L.count();I>0&&(u.sets[C]=L,u.n+=I)}}),u},h}();D.LinkSets=t,D.getGroups=function l(h,f,u,g){for(var L=new c(h.length,f,u,g);L.greedyMerge(););var I=[],B=L.getGroupHierarchy(I);return I.forEach(function(M){var R=function(Z){var H=M[Z];"number"==typeof H&&(M[Z]=h[H])};R("source"),R("target")}),{groups:B,powerEdges:I}}},88866:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function(){function x(_){this.elem=_,this.subheaps=[]}return x.prototype.toString=function(_){for(var m="",p=!1,t=0;t<this.subheaps.length;++t){var d=this.subheaps[t];d.elem?(p&&(m+=","),m+=d.toString(_),p=!0):p=!1}return""!==m&&(m="("+m+")"),(this.elem?_(this.elem):"")+m},x.prototype.forEach=function(_){this.empty()||(_(this.elem,this),this.subheaps.forEach(function(m){return m.forEach(_)}))},x.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(_,m){return _+m.count()},0)},x.prototype.min=function(){return this.elem},x.prototype.empty=function(){return null==this.elem},x.prototype.contains=function(_){if(this===_)return!0;for(var m=0;m<this.subheaps.length;m++)if(this.subheaps[m].contains(_))return!0;return!1},x.prototype.isHeap=function(_){var m=this;return this.subheaps.every(function(p){return _(m.elem,p.elem)&&p.isHeap(_)})},x.prototype.insert=function(_,m){return this.merge(new x(_),m)},x.prototype.merge=function(_,m){return this.empty()?_:_.empty()?this:m(this.elem,_.elem)?(this.subheaps.push(_),this):(_.subheaps.push(this),_)},x.prototype.removeMin=function(_){return this.empty()?null:this.mergePairs(_)},x.prototype.mergePairs=function(_){if(0==this.subheaps.length)return new x(null);if(1==this.subheaps.length)return this.subheaps[0];var m=this.subheaps.pop().merge(this.subheaps.pop(),_),p=this.mergePairs(_);return m.merge(p,_)},x.prototype.decreaseKey=function(_,m,p,t){var d=_.removeMin(t);_.elem=d.elem,_.subheaps=d.subheaps,null!==p&&null!==d.elem&&p(_.elem,_);var l=new x(m);return null!==p&&p(m,l),this.merge(l,t)},x}();D.PairingHeap=s;var c=function(){function x(_){this.lessThan=_}return x.prototype.top=function(){return this.empty()?null:this.root.elem},x.prototype.push=function(){for(var _=[],m=0;m<arguments.length;m++)_[m]=arguments[m];for(var p,d,t=0;d=_[t];++t)p=new s(d),this.root=this.empty()?p:this.root.merge(p,this.lessThan);return p},x.prototype.empty=function(){return!this.root||!this.root.elem},x.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},x.prototype.forEach=function(_){this.root.forEach(_)},x.prototype.pop=function(){if(this.empty())return null;var _=this.root.min();return this.root=this.root.removeMin(this.lessThan),_},x.prototype.reduceKey=function(_,m,p){void 0===p&&(p=null),this.root=this.root.decreaseKey(_,m,p,this.lessThan)},x.prototype.toString=function(_){return this.root.toString(_)},x.prototype.count=function(){return this.root.count()},x}();D.PriorityQueue=c},94655:function(w,D){"use strict";var p,s=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0});var c=function(){function p(){this.findIter=function(t){for(var d=this._root,l=this.iterator();null!==d;){var h=this._comparator(t,d.data);if(0===h)return l._cursor=d,l;l._ancestors.push(d),d=d.get_child(h>0)}return null}}return p.prototype.clear=function(){this._root=null,this.size=0},p.prototype.find=function(t){for(var d=this._root;null!==d;){var l=this._comparator(t,d.data);if(0===l)return d.data;d=d.get_child(l>0)}return null},p.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},p.prototype.upperBound=function(t){var d=this._comparator;return this._bound(t,function l(h,f){return d(f,h)})},p.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},p.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},p.prototype.iterator=function(){return new x(this)},p.prototype.each=function(t){for(var l,d=this.iterator();null!==(l=d.next());)t(l)},p.prototype.reach=function(t){for(var l,d=this.iterator();null!==(l=d.prev());)t(l)},p.prototype._bound=function(t,d){for(var l=this._root,h=this.iterator();null!==l;){var f=this._comparator(t,l.data);if(0===f)return h._cursor=l,h;h._ancestors.push(l),l=l.get_child(f>0)}for(var u=h._ancestors.length-1;u>=0;--u)if(d(t,(l=h._ancestors[u]).data)>0)return h._cursor=l,h._ancestors.length=u,h;return h._ancestors.length=0,h},p}();D.TreeBase=c;var x=function(){function p(t){this._tree=t,this._ancestors=[],this._cursor=null}return p.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},p.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===d)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},p.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===d)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},p.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},p.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},p}();D.Iterator=x;var _=function(){function p(t){this.data=t,this.left=null,this.right=null,this.red=!0}return p.prototype.get_child=function(t){return t?this.right:this.left},p.prototype.set_child=function(t,d){t?this.right=d:this.left=d},p}(),m=function(p){function t(d){var l=p.call(this)||this;return l._root=null,l._comparator=d,l.size=0,l}return s(t,p),t.prototype.insert=function(d){var l=!1;if(null===this._root)this._root=new _(d),l=!0,this.size++;else{var h=new _(void 0),f=!1,u=!1,g=null,C=h,L=null,I=this._root;for(C.right=this._root;;){if(null===I?(I=new _(d),L.set_child(f,I),l=!0,this.size++):t.is_red(I.left)&&t.is_red(I.right)&&(I.red=!0,I.left.red=!1,I.right.red=!1),t.is_red(I)&&t.is_red(L)){var B=C.right===g;I===L.get_child(u)?C.set_child(B,t.single_rotate(g,!u)):C.set_child(B,t.double_rotate(g,!u))}var M=this._comparator(I.data,d);if(0===M)break;u=f,null!==g&&(C=g),g=L,L=I,I=I.get_child(f=M<0)}this._root=h.right}return this._root.red=!1,l},t.prototype.remove=function(d){if(null===this._root)return!1;var l=new _(void 0),h=l;h.right=this._root;for(var f=null,u=null,g=null,C=!0;null!==h.get_child(C);){var L=C;u=f,f=h,h=h.get_child(C);var I=this._comparator(d,h.data);if(C=I>0,0===I&&(g=h),!t.is_red(h)&&!t.is_red(h.get_child(C)))if(t.is_red(h.get_child(!C))){var B=t.single_rotate(h,C);f.set_child(L,B),f=B}else if(!t.is_red(h.get_child(!C))){var M=f.get_child(!L);if(null!==M)if(t.is_red(M.get_child(!L))||t.is_red(M.get_child(L))){var R=u.right===f;t.is_red(M.get_child(L))?u.set_child(R,t.double_rotate(f,L)):t.is_red(M.get_child(!L))&&u.set_child(R,t.single_rotate(f,L));var Z=u.get_child(R);Z.red=!0,h.red=!0,Z.left.red=!1,Z.right.red=!1}else f.red=!1,M.red=!0,h.red=!0}}return null!==g&&(g.data=h.data,f.set_child(f.right===h,h.get_child(null===h.left)),this.size--),this._root=l.right,null!==this._root&&(this._root.red=!1),null!==g},t.is_red=function(d){return null!==d&&d.red},t.single_rotate=function(d,l){var h=d.get_child(!l);return d.set_child(!l,h.get_child(l)),h.set_child(l,d),d.red=!0,h.red=!1,h},t.double_rotate=function(d,l){return d.set_child(!l,t.single_rotate(d.get_child(!l),!l)),t.single_rotate(d,l)},t}(c);D.RBTree=m},4068:function(w,D,s){"use strict";var j,c=this&&this.__extends||(j=function(W,et){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,Y){at.__proto__=Y}||function(at,Y){for(var nt in Y)Y.hasOwnProperty(nt)&&(at[nt]=Y[nt])})(W,et)},function(W,et){function at(){this.constructor=W}j(W,et),W.prototype=null===et?Object.create(et):(at.prototype=et.prototype,new at)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(98237),_=s(94655);function m(j){return j.bounds=typeof j.leaves<"u"?j.leaves.reduce(function(W,et){return et.bounds.union(W)},p.empty()):p.empty(),typeof j.groups<"u"&&(j.bounds=j.groups.reduce(function(W,et){return m(et).union(W)},j.bounds)),j.bounds=j.bounds.inflate(j.padding),j.bounds}D.computeGroupBounds=m;var p=function(){function j(W,et,at,Y){this.x=W,this.X=et,this.y=at,this.Y=Y}return j.empty=function(){return new j(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},j.prototype.cx=function(){return(this.x+this.X)/2},j.prototype.cy=function(){return(this.y+this.Y)/2},j.prototype.overlapX=function(W){var et=this.cx(),at=W.cx();return et<=at&&W.x<this.X?this.X-W.x:at<=et&&this.x<W.X?W.X-this.x:0},j.prototype.overlapY=function(W){var et=this.cy(),at=W.cy();return et<=at&&W.y<this.Y?this.Y-W.y:at<=et&&this.y<W.Y?W.Y-this.y:0},j.prototype.setXCentre=function(W){var et=W-this.cx();this.x+=et,this.X+=et},j.prototype.setYCentre=function(W){var et=W-this.cy();this.y+=et,this.Y+=et},j.prototype.width=function(){return this.X-this.x},j.prototype.height=function(){return this.Y-this.y},j.prototype.union=function(W){return new j(Math.min(this.x,W.x),Math.max(this.X,W.X),Math.min(this.y,W.y),Math.max(this.Y,W.Y))},j.prototype.lineIntersections=function(W,et,at,Y){for(var nt=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],rt=[],q=0;q<4;++q){var F=j.lineIntersection(W,et,at,Y,nt[q][0],nt[q][1],nt[q][2],nt[q][3]);null!==F&&rt.push({x:F.x,y:F.y})}return rt},j.prototype.rayIntersection=function(W,et){var at=this.lineIntersections(this.cx(),this.cy(),W,et);return at.length>0?at[0]:null},j.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},j.lineIntersection=function(W,et,at,Y,nt,rt,q,F){var E=at-W,ut=q-nt,ft=Y-et,Dt=F-rt,St=Dt*E-ut*ft;if(0==St)return null;var Qt=W-nt,pe=et-rt,yt=(ut*pe-Dt*Qt)/St,zt=(E*pe-ft*Qt)/St;return yt>=0&&yt<=1&&zt>=0&&zt<=1?{x:W+yt*E,y:et+yt*ft}:null},j.prototype.inflate=function(W){return new j(this.x-W,this.X+W,this.y-W,this.Y+W)},j}();D.Rectangle=p,D.makeEdgeBetween=function t(j,W,et){var at=j.rayIntersection(W.cx(),W.cy())||{x:j.cx(),y:j.cy()},Y=W.rayIntersection(j.cx(),j.cy())||{x:W.cx(),y:W.cy()},nt=Y.x-at.x,rt=Y.y-at.y,q=Math.sqrt(nt*nt+rt*rt),F=q-et;return{sourceIntersection:at,targetIntersection:Y,arrowStart:{x:at.x+F*nt/q,y:at.y+F*rt/q}}},D.makeEdgeTo=function d(j,W,et){var at=W.rayIntersection(j.x,j.y);at||(at={x:W.cx(),y:W.cy()});var Y=at.x-j.x,nt=at.y-j.y,rt=Math.sqrt(Y*Y+nt*nt);return{x:at.x-et*Y/rt,y:at.y-et*nt/rt}};var l=function j(W,et,at){this.v=W,this.r=et,this.pos=at,this.prev=u(),this.next=u()},h=function j(W,et,at){this.isOpen=W,this.v=et,this.pos=at};function f(j,W){return j.pos>W.pos?1:j.pos<W.pos||j.isOpen?-1:W.isOpen?1:0}function u(){return new _.RBTree(function(j,W){return j.pos-W.pos})}var g={getCentre:function(j){return j.cx()},getOpen:function(j){return j.y},getClose:function(j){return j.Y},getSize:function(j){return j.width()},makeRect:function(j,W,et,at){return new p(et-at/2,et+at/2,j,W)},findNeighbours:function B(j,W){var et=function(at,Y){for(var rt,nt=W.findIter(j);null!==(rt=nt[at]());){var q=rt.r.overlapX(j.r);if((q<=0||q<=rt.r.overlapY(j.r))&&(j[at].insert(rt),rt[Y].insert(j)),q<=0)break}};et("next","prev"),et("prev","next")}},C={getCentre:function(j){return j.cy()},getOpen:function(j){return j.x},getClose:function(j){return j.X},getSize:function(j){return j.height()},makeRect:function(j,W,et,at){return new p(j,W,et-at/2,et+at/2)},findNeighbours:function M(j,W){var et=function(at,Y){var nt=W.findIter(j)[at]();null!==nt&&nt.r.overlapX(j.r)>0&&(j[at].insert(nt),nt[Y].insert(j))};et("next","prev"),et("prev","next")}};function L(j,W,et,at){void 0===at&&(at=!1);var Y=j.padding,nt=typeof j.groups<"u"?j.groups.length:0,rt=typeof j.leaves<"u"?j.leaves.length:0,q=nt?j.groups.reduce(function(ie,Mt){return ie.concat(L(Mt,W,et,!0))},[]):[],F=(at?2:0)+rt+nt,E=new Array(F),ut=new Array(F),ft=0,Dt=function(ie,Mt){ut[ft]=ie,E[ft++]=Mt};if(at){var St=j.bounds,Qt=W.getCentre(St),pe=W.getSize(St)/2,wt=W.getOpen(St),yt=W.getClose(St),Nt=Qt-pe+Y/2,zt=Qt+pe-Y/2;j.minVar.desiredPosition=Nt,Dt(W.makeRect(wt,yt,Nt,Y),j.minVar),j.maxVar.desiredPosition=zt,Dt(W.makeRect(wt,yt,zt,Y),j.maxVar)}rt&&j.leaves.forEach(function(ie){return Dt(ie.bounds,ie.variable)}),nt&&j.groups.forEach(function(ie){var Mt=ie.bounds;Dt(W.makeRect(W.getOpen(Mt),W.getClose(Mt),W.getCentre(Mt),W.getSize(Mt)),ie.minVar)});var de=I(ut,E,W,et);return nt&&(E.forEach(function(ie){ie.cOut=[],ie.cIn=[]}),de.forEach(function(ie){ie.left.cOut.push(ie),ie.right.cIn.push(ie)}),j.groups.forEach(function(ie){var Mt=(ie.padding-W.getSize(ie.bounds))/2;ie.minVar.cIn.forEach(function(te){return te.gap+=Mt}),ie.minVar.cOut.forEach(function(te){te.left=ie.maxVar,te.gap+=Mt})})),q.concat(de)}function I(j,W,et,at){var Y,nt=j.length,rt=2*nt;console.assert(W.length>=nt);var q=new Array(rt);for(Y=0;Y<nt;++Y){var F=j[Y],E=new l(W[Y],F,et.getCentre(F));q[Y]=new h(!0,E,et.getOpen(F)),q[Y+nt]=new h(!1,E,et.getClose(F))}q.sort(f);var ut=new Array,ft=u();for(Y=0;Y<rt;++Y){var Dt=q[Y];if(E=Dt.v,Dt.isOpen)ft.insert(E),et.findNeighbours(E,ft);else{ft.remove(E);var St=function(wt,yt){var Nt=(et.getSize(wt.r)+et.getSize(yt.r))/2+at;ut.push(new x.Constraint(wt.v,yt.v,Nt))},Qt=function(wt,yt,Nt){for(var zt,de=E[wt].iterator();null!==(zt=de[wt]());)Nt(zt,E),zt[yt].remove(E)};Qt("prev","next",function(wt,yt){return St(wt,yt)}),Qt("next","prev",function(wt,yt){return St(yt,wt)})}}return console.assert(0===ft.size),ut}function R(j,W){return I(j,W,g,1e-6)}function Z(j,W){return I(j,W,C,1e-6)}function H(j){return L(j,g,1e-6)}function G(j){return L(j,C,1e-6)}D.generateXConstraints=R,D.generateYConstraints=Z,D.generateXGroupConstraints=H,D.generateYGroupConstraints=G,D.removeOverlaps=function tt(j){var W=j.map(function(Y){return new x.Variable(Y.cx())}),et=R(j,W),at=new x.Solver(W,et);at.solve(),W.forEach(function(Y,nt){return j[nt].setXCentre(Y.position())}),W=j.map(function(Y){return new x.Variable(Y.cy())}),et=Z(j,W),(at=new x.Solver(W,et)).solve(),W.forEach(function(Y,nt){return j[nt].setYCentre(Y.position())})};var K=function(j){function W(et,at){var Y=j.call(this,0,at)||this;return Y.index=et,Y}return c(W,j),W}(x.Variable);D.IndexedVariable=K;var st=function(){function j(W,et,at,Y,nt){var rt=this;if(void 0===at&&(at=null),void 0===Y&&(Y=null),void 0===nt&&(nt=!1),this.nodes=W,this.groups=et,this.rootGroup=at,this.avoidOverlaps=nt,this.variables=W.map(function(F,E){return F.variable=new K(E,1)}),Y&&this.createConstraints(Y),nt&&at&&typeof at.groups<"u"){W.forEach(function(F){if(F.width&&F.height){var E=F.width/2,ut=F.height/2;F.bounds=new p(F.x-E,F.x+E,F.y-ut,F.y+ut)}else F.bounds=new p(F.x,F.x,F.y,F.y)}),m(at);var q=W.length;et.forEach(function(F){rt.variables[q]=F.minVar=new K(q++,typeof F.stiffness<"u"?F.stiffness:.01),rt.variables[q]=F.maxVar=new K(q++,typeof F.stiffness<"u"?F.stiffness:.01)})}}return j.prototype.createSeparation=function(W){return new x.Constraint(this.nodes[W.left].variable,this.nodes[W.right].variable,W.gap,typeof W.equality<"u"&&W.equality)},j.prototype.makeFeasible=function(W){var et=this;if(this.avoidOverlaps){var at="x",Y="width";"x"===W.axis&&(at="y",Y="height");var nt=W.offsets.map(function(q){return et.nodes[q.node]}).sort(function(q,F){return q[at]-F[at]}),rt=null;nt.forEach(function(q){if(rt){var F=rt[at]+rt[Y];F>q[at]&&(q[at]=F)}rt=q})}},j.prototype.createAlignment=function(W){var et=this,at=this.nodes[W.offsets[0].node].variable;this.makeFeasible(W);var Y="x"===W.axis?this.xConstraints:this.yConstraints;W.offsets.slice(1).forEach(function(nt){Y.push(new x.Constraint(at,et.nodes[nt.node].variable,nt.offset,!0))})},j.prototype.createConstraints=function(W){var et=this,at=function(Y){return typeof Y.type>"u"||"separation"===Y.type};this.xConstraints=W.filter(function(Y){return"x"===Y.axis&&at(Y)}).map(function(Y){return et.createSeparation(Y)}),this.yConstraints=W.filter(function(Y){return"y"===Y.axis&&at(Y)}).map(function(Y){return et.createSeparation(Y)}),W.filter(function(Y){return"alignment"===Y.type}).forEach(function(Y){return et.createAlignment(Y)})},j.prototype.setupVariablesAndBounds=function(W,et,at,Y){this.nodes.forEach(function(nt,rt){nt.fixed?(nt.variable.weight=nt.fixedWeight?nt.fixedWeight:1e3,at[rt]=Y(nt)):nt.variable.weight=1;var q=(nt.width||0)/2,F=(nt.height||0)/2,E=W[rt],ut=et[rt];nt.bounds=new p(E-q,E+q,ut-F,ut+F)})},j.prototype.xProject=function(W,et,at){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(W,et,W,at,function(Y){return Y.px},this.xConstraints,H,function(Y){return Y.bounds.setXCentre(at[Y.variable.index]=Y.variable.position())},function(Y){var nt=at[Y.minVar.index]=Y.minVar.position(),rt=at[Y.maxVar.index]=Y.maxVar.position(),q=Y.padding/2;Y.bounds.x=nt-q,Y.bounds.X=rt+q})},j.prototype.yProject=function(W,et,at){!this.rootGroup&&!this.yConstraints||this.project(W,et,et,at,function(Y){return Y.py},this.yConstraints,G,function(Y){return Y.bounds.setYCentre(at[Y.variable.index]=Y.variable.position())},function(Y){var nt=at[Y.minVar.index]=Y.minVar.position(),rt=at[Y.maxVar.index]=Y.maxVar.position(),q=Y.padding/2;Y.bounds.y=nt-q,Y.bounds.Y=rt+q})},j.prototype.projectFunctions=function(){var W=this;return[function(et,at,Y){return W.xProject(et,at,Y)},function(et,at,Y){return W.yProject(et,at,Y)}]},j.prototype.project=function(W,et,at,Y,nt,rt,q,F,E){this.setupVariablesAndBounds(W,et,Y,nt),this.rootGroup&&this.avoidOverlaps&&(m(this.rootGroup),rt=rt.concat(q(this.rootGroup))),this.solve(this.variables,rt,at,Y),this.nodes.forEach(F),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(E),m(this.rootGroup))},j.prototype.solve=function(W,et,at,Y){var nt=new x.Solver(W,et);nt.setStartingPositions(at),nt.setDesiredPositions(Y),nt.solve()},j}();D.Projection=st},33858:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(88866),x=function t(d,l){this.id=d,this.distance=l},_=function t(d){this.id=d,this.neighbours=[]},m=function t(d,l,h){this.node=d,this.prev=l,this.d=h},p=function(){function t(d,l,h,f,u){this.n=d,this.es=l,this.neighbours=new Array(this.n);for(var g=this.n;g--;)this.neighbours[g]=new _(g);for(g=this.es.length;g--;){var C=this.es[g],L=h(C),I=f(C),B=u(C);this.neighbours[L].neighbours.push(new x(I,B)),this.neighbours[I].neighbours.push(new x(L,B))}}return t.prototype.DistanceMatrix=function(){for(var d=new Array(this.n),l=0;l<this.n;++l)d[l]=this.dijkstraNeighbours(l);return d},t.prototype.DistancesFromNode=function(d){return this.dijkstraNeighbours(d)},t.prototype.PathFromNodeToNode=function(d,l){return this.dijkstraNeighbours(d,l)},t.prototype.PathFromNodeToNodeWithPrevCost=function(d,l,h){var f=new c.PriorityQueue(function(G,tt){return G.d<=tt.d}),u=this.neighbours[d],g=new m(u,null,0),C={};for(f.push(g);!f.empty()&&(u=(g=f.pop()).node).id!==l;)for(var L=u.neighbours.length;L--;){var I=u.neighbours[L],B=this.neighbours[I.id];if(!g.prev||B.id!==g.prev.node.id){var M=B.id+","+u.id;if(!(M in C&&C[M]<=g.d)){var R=g.prev?h(g.prev.node.id,u.id,B.id):0,Z=g.d+I.distance+R;C[M]=Z,f.push(new m(B,g,Z))}}}for(var H=[];g.prev;)H.push((g=g.prev).node.id);return H},t.prototype.dijkstraNeighbours=function(d,l){void 0===l&&(l=-1);for(var h=new c.PriorityQueue(function(R,Z){return R.d<=Z.d}),f=this.neighbours.length,u=new Array(f);f--;){var g=this.neighbours[f];g.d=f===d?0:Number.POSITIVE_INFINITY,g.q=h.push(g)}for(;!h.empty();){var C=h.pop();if(u[C.id]=C.d,C.id===l){for(var L=[],I=C;typeof I.prev<"u";)L.push(I.prev.id),I=I.prev;return L}for(f=C.neighbours.length;f--;){var B=C.neighbours[f],M=(I=this.neighbours[B.id],C.d+B.distance);C.d!==Number.MAX_VALUE&&I.d>M&&(I.d=M,I.prev=C,h.reduceKey(I.q,I,function(Z,H){return Z.q=H}))}}return u},t}();D.Calculator=p},98237:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function(){function d(l){this.scale=l,this.AB=0,this.AD=0,this.A2=0}return d.prototype.addVariable=function(l){var h=this.scale/l.scale,u=l.weight;this.AB+=u*h*(l.offset/l.scale),this.AD+=u*h*l.desiredPosition,this.A2+=u*h*h},d.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},d}();D.PositionStats=s;var c=function(){function d(l,h,f,u){void 0===u&&(u=!1),this.left=l,this.right=h,this.gap=f,this.equality=u,this.active=!1,this.unsatisfiable=!1,this.left=l,this.right=h,this.gap=f,this.equality=u}return d.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},d}();D.Constraint=c;var x=function(){function d(l,h,f){void 0===h&&(h=1),void 0===f&&(f=1),this.desiredPosition=l,this.weight=h,this.scale=f,this.offset=0}return d.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},d.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},d.prototype.visitNeighbours=function(l,h){var f=function(u,g){return u.active&&l!==g&&h(u,g)};this.cOut.forEach(function(u){return f(u,u.right)}),this.cIn.forEach(function(u){return f(u,u.left)})},d}();D.Variable=x;var _=function(){function d(l){this.vars=[],l.offset=0,this.ps=new s(l.scale),this.addVariable(l)}return d.prototype.addVariable=function(l){l.block=this,this.vars.push(l),this.ps.addVariable(l),this.posn=this.ps.getPosn()},d.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var l=0,h=this.vars.length;l<h;++l)this.ps.addVariable(this.vars[l]);this.posn=this.ps.getPosn()},d.prototype.compute_lm=function(l,h,f){var u=this,g=l.dfdv();return l.visitNeighbours(h,function(C,L){var I=u.compute_lm(L,l,f);L===C.right?(g+=I*C.left.scale,C.lm=I):(g+=I*C.right.scale,C.lm=-I),f(C)}),g/l.scale},d.prototype.populateSplitBlock=function(l,h){var f=this;l.visitNeighbours(h,function(u,g){g.offset=l.offset+(g===u.right?u.gap:-u.gap),f.addVariable(g),f.populateSplitBlock(g,l)})},d.prototype.traverse=function(l,h,f,u){var g=this;void 0===f&&(f=this.vars[0]),void 0===u&&(u=null),f.visitNeighbours(u,function(C,L){h.push(l(C)),g.traverse(l,h,L,f)})},d.prototype.findMinLM=function(){var l=null;return this.compute_lm(this.vars[0],null,function(h){!h.equality&&(null===l||h.lm<l.lm)&&(l=h)}),l},d.prototype.findMinLMBetween=function(l,h){this.compute_lm(l,null,function(){});var f=null;return this.findPath(l,null,h,function(u,g){!u.equality&&u.right===g&&(null===f||u.lm<f.lm)&&(f=u)}),f},d.prototype.findPath=function(l,h,f,u){var g=this,C=!1;return l.visitNeighbours(h,function(L,I){!C&&(I===f||g.findPath(I,l,f,u))&&(C=!0,u(L,I))}),C},d.prototype.isActiveDirectedPathBetween=function(l,h){if(l===h)return!0;for(var f=l.cOut.length;f--;){var u=l.cOut[f];if(u.active&&this.isActiveDirectedPathBetween(u.right,h))return!0}return!1},d.split=function(l){return l.active=!1,[d.createSplitBlock(l.left),d.createSplitBlock(l.right)]},d.createSplitBlock=function(l){var h=new d(l);return h.populateSplitBlock(l,null),h},d.prototype.splitBetween=function(l,h){var f=this.findMinLMBetween(l,h);if(null!==f){var u=d.split(f);return{constraint:f,lb:u[0],rb:u[1]}}return null},d.prototype.mergeAcross=function(l,h,f){h.active=!0;for(var u=0,g=l.vars.length;u<g;++u){var C=l.vars[u];C.offset+=f,this.addVariable(C)}this.posn=this.ps.getPosn()},d.prototype.cost=function(){for(var l=0,h=this.vars.length;h--;){var f=this.vars[h],u=f.position()-f.desiredPosition;l+=u*u*f.weight}return l},d}();D.Block=_;var m=function(){function d(l){this.vs=l;var h=l.length;for(this.list=new Array(h);h--;){var f=new _(l[h]);this.list[h]=f,f.blockInd=h}}return d.prototype.cost=function(){for(var l=0,h=this.list.length;h--;)l+=this.list[h].cost();return l},d.prototype.insert=function(l){l.blockInd=this.list.length,this.list.push(l)},d.prototype.remove=function(l){var h=this.list.length-1,f=this.list[h];this.list.length=h,l!==f&&(this.list[l.blockInd]=f,f.blockInd=l.blockInd)},d.prototype.merge=function(l){var h=l.left.block,f=l.right.block,u=l.right.offset-l.left.offset-l.gap;h.vars.length<f.vars.length?(f.mergeAcross(h,l,u),this.remove(h)):(h.mergeAcross(f,l,-u),this.remove(f))},d.prototype.forEach=function(l){this.list.forEach(l)},d.prototype.updateBlockPositions=function(){this.list.forEach(function(l){return l.updateWeightedPosition()})},d.prototype.split=function(l){var h=this;this.updateBlockPositions(),this.list.forEach(function(f){var u=f.findMinLM();null!==u&&u.lm<p.LAGRANGIAN_TOLERANCE&&(f=u.left.block,_.split(u).forEach(function(g){return h.insert(g)}),h.remove(f),l.push(u))})},d}();D.Blocks=m;var p=function(){function d(l,h){this.vs=l,this.cs=h,this.vs=l,l.forEach(function(f){f.cIn=[],f.cOut=[]}),this.cs=h,h.forEach(function(f){f.left.cOut.push(f),f.right.cIn.push(f)}),this.inactive=h.map(function(f){return f.active=!1,f}),this.bs=null}return d.prototype.cost=function(){return this.bs.cost()},d.prototype.setStartingPositions=function(l){this.inactive=this.cs.map(function(h){return h.active=!1,h}),this.bs=new m(this.vs),this.bs.forEach(function(h,f){return h.posn=l[f]})},d.prototype.setDesiredPositions=function(l){this.vs.forEach(function(h,f){return h.desiredPosition=l[f]})},d.prototype.mostViolated=function(){for(var l=Number.MAX_VALUE,h=null,f=this.inactive,u=f.length,g=u,C=0;C<u;++C){var L=f[C];if(!L.unsatisfiable){var I=L.slack();if((L.equality||I<l)&&(l=I,h=L,g=C,L.equality))break}}return g!==u&&(l<d.ZERO_UPPERBOUND&&!h.active||h.equality)&&(f[g]=f[u-1],f.length=u-1),h},d.prototype.satisfy=function(){null==this.bs&&(this.bs=new m(this.vs)),this.bs.split(this.inactive);for(var l=null;(l=this.mostViolated())&&(l.equality||l.slack()<d.ZERO_UPPERBOUND&&!l.active);){var h=l.left.block;if(h!==l.right.block)this.bs.merge(l);else{if(h.isActiveDirectedPathBetween(l.right,l.left)){l.unsatisfiable=!0;continue}var u=h.splitBetween(l.left,l.right);if(null===u){l.unsatisfiable=!0;continue}this.bs.insert(u.lb),this.bs.insert(u.rb),this.bs.remove(h),this.inactive.push(u.constraint),l.slack()>=0?this.inactive.push(l):this.bs.merge(l)}}},d.prototype.solve=function(){this.satisfy();for(var l=Number.MAX_VALUE,h=this.bs.cost();Math.abs(l-h)>1e-4;)this.satisfy(),l=h,h=this.bs.cost();return h},d.LAGRANGIAN_TOLERANCE=-1e-4,d.ZERO_UPPERBOUND=-1e-10,d}();D.Solver=p,D.removeOverlapInOneDimension=function t(d,l,h){for(var f=d.map(function(K){return new x(K.desiredCenter)}),u=[],g=d.length,C=0;C<g-1;C++)u.push(new c(f[C],f[C+1],(d[C].size+d[C+1].size)/2));var B=f[0],M=f[g-1],R=d[0].size/2,Z=d[g-1].size/2,H=null,G=null;return l&&(H=new x(l,1e3*B.weight),f.push(H),u.push(new c(H,B,R))),h&&(G=new x(h,1e3*M.weight),f.push(G),u.push(new c(M,G,Z))),new p(f,u).solve(),{newCenters:f.slice(0,d.length).map(function(K){return K.position()}),lowerBound:H?H.position():B.position()-R,upperBound:G?G.position():M.position()+Z}}}}]);