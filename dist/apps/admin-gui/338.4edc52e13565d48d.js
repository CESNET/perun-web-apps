"use strict";(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[338],{54668:(Y,B,t)=>{t.d(B,{l:()=>p});var L=t(7274),_=t(13381),c=t(20206),n=t(10036),e=t(95017),P=t(64080),i=t(24006),s=t(94650),M=t(89383),d=t(36895),x=t(284),N=t(59549),R=t(97392),Z=t(4859),m=t(98380),S=t(68530),I=t(97403),U=t(73358),D=t(64877);function g(A,E){1&A&&s._UZ(0,"perun-web-apps-loading-dialog")}function h(A,E){1&A&&s._UZ(0,"perun-web-apps-loading-table")}function v(A,E){if(1&A&&(s._UZ(0,"app-users-list",16),s.ALo(1,"translate")),2&A){const T=s.oxw(3);s.Q6J("displayedColumns",T.displayedColumns)("selection",T.selection)("tableId",T.tableId)("disableRouting",!0)("users",T.identities)("noUsersFoundLabel",s.lcZ(1,6,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES"))}}function l(A,E){if(1&A&&(s.TgZ(0,"div",14),s.YNc(1,v,2,8,"app-users-list",15),s.qZA()),2&A){s.oxw();const T=s.MAs(18),C=s.oxw();s.xp6(1),s.Q6J("perunWebAppsLoader",C.loading)("perunWebAppsLoaderIndicator",T)}}function u(A,E){1&A&&(s.TgZ(0,"perun-web-apps-alert",17),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&A&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function o(A,E){if(1&A){const T=s.EpF();s.TgZ(0,"div")(1,"div",2),s.NdJ("keyup",function(y){s.CHM(T);const F=s.oxw();return s.KtG(F.onKeyInput(y))}),s.TgZ(2,"h1",3),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),s._uU(8),s.ALo(9,"translate"),s.qZA(),s._UZ(10,"input",6),s.TgZ(11,"mat-error"),s._uU(12),s.ALo(13,"translate"),s.qZA()(),s.TgZ(14,"button",7),s.NdJ("click",function(){s.CHM(T);const y=s.oxw();return s.KtG(y.onSearchByString())}),s.TgZ(15,"mat-icon"),s._uU(16,"search"),s.qZA()(),s.YNc(17,h,1,0,"ng-template",null,8,s.W1O),s.YNc(19,l,2,2,"div",9),s.YNc(20,u,3,3,"perun-web-apps-alert",10),s.qZA(),s.TgZ(21,"div",11)(22,"button",12),s.NdJ("click",function(){s.CHM(T);const y=s.oxw();return s.KtG(y.onCancel())}),s._uU(23),s.ALo(24,"translate"),s.qZA(),s.TgZ(25,"button",13),s.NdJ("click",function(){s.CHM(T);const y=s.oxw();return s.KtG(y.onAdd())}),s._uU(26),s.ALo(27,"translate"),s.qZA()()()()}if(2&A){const T=s.oxw();s.xp6(1),s.Tol(T.theme),s.xp6(2),s.Oqu(s.lcZ(4,13,"DIALOGS.CONNECT_IDENTITY.TITLE_"+T.target)),s.xp6(5),s.Oqu(s.lcZ(9,15,"DIALOGS.CONNECT_IDENTITY.SEARCH")),s.xp6(2),s.Q6J("formControl",T.searchCtrl),s.xp6(2),s.hij(" ",s.lcZ(13,17,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),s.xp6(2),s.Q6J("disabled",T.loading),s.xp6(5),s.Q6J("ngIf",T.firstSearchDone),s.xp6(1),s.Q6J("ngIf",!T.firstSearchDone),s.xp6(3),s.hij(" ",s.lcZ(24,19,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),s.xp6(2),s.Q6J("disabled",0===T.selection.selected.length),s.xp6(1),s.hij(" ",s.lcZ(27,21,"DIALOGS.CONNECT_IDENTITY.CONNECT")," ")}}let p=(()=>{class A{constructor(T,C,y,F,j,z){this.dialogRef=T,this.data=C,this.userManager=y,this.storeService=F,this.notificator=j,this.translate=z,this.loading=!1,this.finalLoading=!1,this.identities=[],this.selection=new e.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=n.Iz}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new i.p4("",[i.kI.required,i.kI.pattern(".*[\\S]+.*")])}onAdd(){let T,C;this.finalLoading=!0,this.isService?(T=this.selection.selected[0].id,C=this.userId):(T=this.userId,C=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(T,C).subscribe({next:()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)},error:()=>this.finalLoading=!1})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid)return void this.searchCtrl.markAllAsTouched();this.loading=!0,this.firstSearchDone=!0;let T=[P.r.USER_DEF_ORGANIZATION,P.r.USER_DEF_PREFERRED_MAIL];T=T.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,T).subscribe(C=>{this.identities=this.filterIdentities(C),this.loading=!1},()=>{this.loading=!1})}onKeyInput(T){"Enter"===T.key&&this.onSearchByString()}filterIdentities(T){return T.filter(this.isService?C=>!C.serviceUser:C=>C.serviceUser)}}return A.\u0275fac=function(T){return new(T||A)(s.Y36(L.so),s.Y36(L.WI),s.Y36(_.Fv),s.Y36(c.d6),s.Y36(c.V6),s.Y36(M.sK))},A.\u0275cmp=s.Xpm({type:A,selectors:[["app-connect-identity-dialog"]],decls:4,vars:5,consts:[["spinner",""],[4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"me-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"formControl"],["color","primary","mat-flat-button","",1,"me-2","search-btn",3,"disabled","click"],["searchSpinner",""],["class","position-relative",4,"ngIf"],["alert_type","info",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ms-auto",3,"click"],["color","accent","mat-flat-button","",1,"ms-2",3,"disabled","click"],[1,"position-relative"],[3,"displayedColumns","selection","tableId","disableRouting","users","noUsersFoundLabel",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"displayedColumns","selection","tableId","disableRouting","users","noUsersFoundLabel"],["alert_type","info"]],template:function(T,C){if(1&T&&(s.YNc(0,g,1,0,"ng-template",null,0,s.W1O),s.TgZ(2,"div"),s.YNc(3,o,28,23,"div",1),s.qZA()),2&T){const y=s.MAs(1);s.xp6(2),s.Gre("",C.theme," position-relative"),s.xp6(1),s.Q6J("perunWebAppsLoader",C.finalLoading)("perunWebAppsLoaderIndicator",y)}},dependencies:[d.O5,x.Nt,N.KE,N.hX,N.TO,i.Fj,i.JJ,i.oH,R.Hw,Z.lW,L.uh,L.xY,L.H8,m.w,S.K,I.b,U.e,D.C,M.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]}),A})()},94814:(Y,B,t)=>{t.d(B,{B:()=>I});var L=t(13381),_=t(7274),c=t(20206),n=t(30671),e=t(94650),P=t(89383),i=t(36895),s=t(4859),M=t(98380),d=t(31359);function x(U,D){1&U&&e._UZ(0,"th",13)}function N(U,D){if(1&U&&(e.TgZ(0,"td",14),e._uU(1),e.ALo(2,"userFullName"),e.qZA()),2&U){const g=D.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,g))}}function R(U,D){1&U&&e._UZ(0,"tr",15)}function Z(U,D){1&U&&e._UZ(0,"tr",16)}function m(U,D){1&U&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&U&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function S(U,D){1&U&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&U&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}let I=(()=>{class U{constructor(g,h,v,l,u,o){this.dialogRef=g,this.data=h,this.userManager=v,this.notificator=l,this.translate=u,this.store=o,this.displayedColumns=["name"]}ngOnInit(){let g;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new n.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(g=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(g=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(g).subscribe(h=>{this.disconnectingLastOwner=1===h.length})}onConfirm(){let g,h;this.isService?(g=this.dataSource.data[0].id,h=this.userId):(g=this.userId,h=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(g,h).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}}return U.\u0275fac=function(g){return new(g||U)(e.Y36(_.so),e.Y36(_.WI),e.Y36(L.Fv),e.Y36(c.V6),e.Y36(P.sK),e.Y36(c.d6))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fw-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","fw-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ms-auto",3,"click"],["color","warn","mat-flat-button","",1,"ms-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"fw-bolder"],["mat-row",""],["alert_type","warn"]],template:function(g,h){1&g&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div")(4,"div",1)(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",2),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"table",3),e.ynx(12,4),e.YNc(13,x,1,0,"th",5),e.YNc(14,N,3,3,"td",6),e.BQk(),e.YNc(15,R,1,0,"tr",7),e.YNc(16,Z,1,0,"tr",8),e.qZA(),e.YNc(17,m,3,3,"perun-web-apps-alert",9),e.YNc(18,S,3,3,"perun-web-apps-alert",9),e.qZA(),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return h.onCancel()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return h.onConfirm()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()),2&g&&(e.xp6(1),e.Oqu(e.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+h.targetTitle)),e.xp6(2),e.Tol(h.theme),e.xp6(3),e.Oqu(e.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+h.targetDescription)),e.xp6(3),e.hij(" ",e.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),e.xp6(2),e.Q6J("dataSource",h.dataSource),e.xp6(4),e.Q6J("matHeaderRowDef",h.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",h.displayedColumns),e.xp6(1),e.Q6J("ngIf",h.disconnectingSelf),e.xp6(1),e.Q6J("ngIf",h.disconnectingLastOwner),e.xp6(3),e.hij(" ",e.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},dependencies:[i.O5,s.lW,n.BZ,n.fO,n.as,n.w1,n.Dz,n.nj,n.ge,n.ev,n.XQ,n.Gk,_.uh,_.xY,_.H8,M.w,P.X$,d.d]}),U})()},29862:(Y,B,t)=>{t.d(B,{x:()=>S});var L=t(13381),_=t(7274),c=t(20206),n=t(24006),e=t(94650),P=t(89383),i=t(36895),s=t(284),M=t(59549),d=t(4859);function x(I,U){1&I&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&I&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function N(I,U){1&I&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&I&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function R(I,U){1&I&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&I&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function Z(I,U){1&I&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&I&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function m(I,U){1&I&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&I&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}let S=(()=>{class I{constructor(D,g,h,v,l){this.dialogRef=D,this.data=g,this.userService=h,this.notificator=v,this.translateService=l,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new n.p4(this.data.user.titleBefore,[n.kI.pattern(".*[\\S]+.*"),n.kI.maxLength(129)]),this.titleAfter=new n.p4(this.data.user.titleAfter,[n.kI.pattern(".*[\\S]+.*"),n.kI.maxLength(129)]),this.firstName=new n.p4(this.data.user.firstName,[n.kI.required,n.kI.pattern(".*[\\S]+.*"),n.kI.maxLength(129)]),this.middleName=new n.p4(this.data.user.middleName,[n.kI.pattern(".*[\\S]+.*"),n.kI.maxLength(129)]),this.lastName=new n.p4(this.data.user.lastName,[n.kI.required,n.kI.pattern(".*[\\S]+.*"),n.kI.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(D=>{this.notificator.showSuccess(D),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return I.\u0275fac=function(D){return new(D||I)(e.Y36(_.so),e.Y36(_.WI),e.Y36(L.Fv),e.Y36(c.V6),e.Y36(P.sK))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-edit-user-dialog"]],decls:42,vars:38,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl"],[4,"ngIf"],["matInput","","data-cy","user-first-name-input","required","",3,"formControl"],["matInput","","required","",3,"formControl"],["mat-dialog-actions",""],["mat-flat-button","",1,"ms-auto",3,"click"],["color","accent","data-cy","user-save-button","mat-flat-button","",1,"ms-2",3,"disabled","click"]],template:function(D,g){1&D&&(e.TgZ(0,"div")(1,"h1",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1)(5,"mat-form-field")(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",2),e.YNc(10,x,3,3,"mat-error",3),e.qZA(),e.TgZ(11,"mat-form-field")(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",2),e.YNc(16,N,3,3,"mat-error",3),e.qZA(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",4),e.YNc(22,R,3,3,"mat-error",3),e.qZA(),e.TgZ(23,"mat-form-field")(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"input",2),e.YNc(28,Z,3,3,"mat-error",3),e.qZA(),e.TgZ(29,"mat-form-field")(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",5),e.YNc(34,m,3,3,"mat-error",3),e.qZA()(),e.TgZ(35,"div",6)(36,"button",7),e.NdJ("click",function(){return g.onCancel()}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"button",8),e.NdJ("click",function(){return g.onSave()}),e._uU(40),e.ALo(41,"translate"),e.qZA()()()),2&D&&(e.Tol(g.theme),e.xp6(2),e.Oqu(e.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),e.xp6(5),e.Oqu(e.lcZ(8,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),e.xp6(2),e.Q6J("formControl",g.titleBefore),e.xp6(1),e.Q6J("ngIf",g.titleBefore.invalid),e.xp6(3),e.Oqu(e.lcZ(14,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),e.xp6(2),e.Q6J("formControl",g.titleAfter),e.xp6(1),e.Q6J("ngIf",g.titleAfter.invalid),e.xp6(3),e.Oqu(e.lcZ(20,28,"DIALOGS.EDIT_USER.FIRST_NAME")),e.xp6(2),e.Q6J("formControl",g.firstName),e.xp6(1),e.Q6J("ngIf",g.firstName.invalid),e.xp6(3),e.Oqu(e.lcZ(26,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),e.xp6(2),e.Q6J("formControl",g.middleName),e.xp6(1),e.Q6J("ngIf",g.middleName.invalid),e.xp6(3),e.Oqu(e.lcZ(32,32,"DIALOGS.EDIT_USER.LAST_NAME")),e.xp6(2),e.Q6J("formControl",g.lastName),e.xp6(1),e.Q6J("ngIf",g.lastName.invalid),e.xp6(3),e.hij(" ",e.lcZ(38,34,"DIALOGS.EDIT_USER.CANCEL")," "),e.xp6(2),e.Q6J("disabled",g.loading||g.firstName.invalid||g.lastName.invalid||g.titleBefore.invalid||g.titleAfter.invalid||g.middleName.invalid),e.xp6(1),e.hij(" ",e.lcZ(41,36,"DIALOGS.EDIT_USER.SAVE")," "))},dependencies:[i.O5,s.Nt,M.KE,M.hX,M.TO,n.Fj,n.JJ,n.Q7,n.oH,d.lW,_.uh,_.xY,_.H8,P.X$]}),I})()},90979:(Y,B,t)=>{t.d(B,{G:()=>P});var L=t(7274),_=t(20206),c=t(13381),n=t(94650),e=t(1415);let P=(()=>{class i{constructor(M,d,x,N){this.data=M,this.dialogRef=d,this.facilityService=x,this.notificator=N,this.loading=!1}update(M){this.loading=!0,this.facilityService.updateFacilityBan({banOnFacility:{id:this.data.ban.id,beanName:"BanOnFacility",facilityId:this.data.ban.facilityId,userId:this.data.ban.userId,description:M.description,validityTo:M.validity}}).subscribe({next:()=>{this.notificator.showSuccess("DIALOGS.UPDATE_BAN.SUCCESS"),this.dialogRef.close(!0)},error:()=>{this.loading=!1}})}cancel(){this.dialogRef.close(!1)}}return i.\u0275fac=function(M){return new(M||i)(n.Y36(L.WI),n.Y36(L.so),n.Y36(c.IQ),n.Y36(_.V6))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-update-facility-ban-dialog"]],decls:1,vars:3,consts:[[3,"ban","theme","loading","cancel","update"]],template:function(M,d){1&M&&(n.TgZ(0,"app-update-ban-dialog",0),n.NdJ("cancel",function(){return d.cancel()})("update",function(N){return d.update(N)}),n.qZA()),2&M&&n.Q6J("ban",d.data.ban)("theme","facility-theme")("loading",d.loading)},dependencies:[e.l]}),i})()},98973:(Y,B,t)=>{t.d(B,{u:()=>Z});var L=t(20206),_=t(94650),c=t(82761),n=t(36895),e=t(3848),P=t(48323),i=t(12651),s=t(89383);function M(m,S){1&m&&(_._uU(0),_.ALo(1,"translate")),2&m&&_.hij(" ",_.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function d(m,S){if(1&m&&_._UZ(0,"app-one-entity-attribute-page",6),2&m){const I=_.oxw();_.Q6J("entityId",I.userId)("entity","user")}}function x(m,S){1&m&&(_._uU(0),_.ALo(1,"translate"),_.ALo(2,"translate")),2&m&&_.AsE(" ",_.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",_.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function N(m,S){if(1&m&&_._UZ(0,"app-two-entity-attribute-page",7),2&m){const I=_.oxw(2);_.Q6J("firstEntity","user")("firstEntityId",I.userId)("secondEntity","facility")}}function R(m,S){1&m&&(_.TgZ(0,"mat-tab"),_.YNc(1,x,3,6,"ng-template",3),_.YNc(2,N,1,3,"ng-template",4),_.qZA())}let Z=(()=>{class m{constructor(I,U,D){this.route=I,this.store=U,this.authResolver=D}ngOnInit(){this.route.parent.params.subscribe(I=>{this.userId=Number(I.userId),this.userId||(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}}return m.\u0275fac=function(I){return new(I||m)(_.Y36(c.gz),_.Y36(L.d6),_.Y36(L.x4))},m.\u0275cmp=_.Xpm({type:m,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(I,U){2&I&&_.ekj("router-component",U.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],["mat-stretch-tabs","false"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(I,U){1&I&&(_.TgZ(0,"h1",0),_._uU(1),_.ALo(2,"translate"),_.qZA(),_.TgZ(3,"mat-tab-group",1)(4,"mat-tab",2),_.YNc(5,M,2,3,"ng-template",3),_.YNc(6,d,1,2,"ng-template",4),_.qZA(),_.YNc(7,R,3,0,"mat-tab",5),_.qZA()),2&I&&(_.xp6(1),_.Oqu(_.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),_.xp6(6),_.Q6J("ngIf",U.userFacilityAttAuth))},dependencies:[n.O5,e.Vc,e.uD,e.uX,e.SP,P.Y,i.t,s.X$]}),m})()},51403:(Y,B,t)=>{t.d(B,{Q:()=>o});var L=t(13381),_=t(20206),c=t(9244),n=t(32316),e=t(28943),P=t(90979),i=t(94650),s=t(7274),M=t(3848),d=t(68530),x=t(64901),N=t(72561),R=t(73358),Z=t(89383);function m(p,A){1&p&&(i._uU(0),i.ALo(1,"translate")),2&p&&i.hij(" ",i.lcZ(1,1,"USER_DETAIL.BANS.VO")," ")}function S(p,A){if(1&p){const E=i.EpF();i.TgZ(0,"perun-web-apps-ban-on-entity-list",8),i.NdJ("updateBan",function(C){i.CHM(E);const y=i.oxw(2);return i.KtG(y.updateVoBan(C))}),i.qZA()}if(2&p){const E=i.oxw(2);i.Q6J("bans",E.voBans)("displayedColumns",E.displayedColumns)("filter",E.filter)("updatePolicy","updateBan_BanOnVo_policy")}}function I(p,A){if(1&p){const E=i.EpF();i.TgZ(0,"perun-web-apps-debounce-filter",5),i.NdJ("filter",function(C){i.CHM(E);const y=i.oxw();return i.KtG(y.filter=C)}),i.qZA(),i.TgZ(1,"div",6),i.YNc(2,S,1,4,"perun-web-apps-ban-on-entity-list",7),i.qZA()}if(2&p){const E=i.oxw(),T=i.MAs(14);i.Q6J("placeholder","USER_DETAIL.BANS.FILTER"),i.xp6(2),i.Q6J("perunWebAppsLoader",E.loading)("perunWebAppsLoaderIndicator",T)}}function U(p,A){1&p&&(i._uU(0),i.ALo(1,"translate")),2&p&&i.hij(" ",i.lcZ(1,1,"USER_DETAIL.BANS.RESOURCE")," ")}function D(p,A){if(1&p){const E=i.EpF();i.TgZ(0,"perun-web-apps-ban-on-entity-list",8),i.NdJ("updateBan",function(C){i.CHM(E);const y=i.oxw(2);return i.KtG(y.updateResourceBan(C))}),i.qZA()}if(2&p){const E=i.oxw(2);i.Q6J("bans",E.resourceBans)("displayedColumns",E.displayedColumns)("filter",E.filter)("updatePolicy","updateBan_BanOnResource_policy")}}function g(p,A){if(1&p){const E=i.EpF();i.TgZ(0,"perun-web-apps-debounce-filter",5),i.NdJ("filter",function(C){i.CHM(E);const y=i.oxw();return i.KtG(y.filter=C)}),i.qZA(),i.TgZ(1,"div",6),i.YNc(2,D,1,4,"perun-web-apps-ban-on-entity-list",7),i.qZA()}if(2&p){const E=i.oxw(),T=i.MAs(14);i.Q6J("placeholder","USER_DETAIL.BANS.FILTER"),i.xp6(2),i.Q6J("perunWebAppsLoader",E.loading)("perunWebAppsLoaderIndicator",T)}}function h(p,A){1&p&&(i._uU(0),i.ALo(1,"translate")),2&p&&i.hij(" ",i.lcZ(1,1,"USER_DETAIL.BANS.FACILITY")," ")}function v(p,A){if(1&p){const E=i.EpF();i.TgZ(0,"perun-web-apps-ban-on-entity-list",8),i.NdJ("updateBan",function(C){i.CHM(E);const y=i.oxw(2);return i.KtG(y.updateFacilityBan(C))}),i.qZA()}if(2&p){const E=i.oxw(2);i.Q6J("bans",E.facilityBans)("displayedColumns",E.displayedColumns)("filter",E.filter)("updatePolicy","updateBan_BanOnFacility_policy")}}function l(p,A){if(1&p){const E=i.EpF();i.TgZ(0,"perun-web-apps-debounce-filter",5),i.NdJ("filter",function(C){i.CHM(E);const y=i.oxw();return i.KtG(y.filter=C)}),i.qZA(),i.TgZ(1,"div",6),i.YNc(2,v,1,4,"perun-web-apps-ban-on-entity-list",7),i.qZA()}if(2&p){const E=i.oxw(),T=i.MAs(14);i.Q6J("placeholder","USER_DETAIL.BANS.FILTER"),i.xp6(2),i.Q6J("perunWebAppsLoader",E.loading)("perunWebAppsLoaderIndicator",T)}}function u(p,A){1&p&&i._UZ(0,"perun-web-apps-loading-table")}let o=(()=>{class p{constructor(E,T,C,y,F){this.voService=E,this.resourceService=T,this.facilityService=C,this.entityService=y,this.dialog=F,this.loading=!1,this.voBans=[],this.resourceBans=[],this.facilityBans=[],this.filter="",this.displayedColumns=["banId","targetId","targetName","description","expiration","edit"]}ngOnInit(){this.loading=!0,this.user=this.entityService.getEntity(),this.refreshVoBans()}refreshVoBans(){this.loading=!0,this.voService.getEnrichedVoBansForUser(this.user.id).subscribe({next:E=>{this.voBans=E,this.loading=!1},error:()=>this.loading=!1})}refreshResourceBans(){this.loading=!0,this.resourceService.getEnrichedBansForUser(this.user.id).subscribe({next:E=>{this.resourceBans=E,this.loading=!1},error:()=>this.loading=!1})}refreshFacilityBans(){this.loading=!0,this.facilityService.getEnricheFacilitydBansForUser(this.user.id).subscribe({next:E=>{this.facilityBans=E,this.loading=!1},error:()=>this.loading=!1})}updateVoBan(E){this.dialog.open(n.A,this.getConfig(E)).afterClosed().subscribe(C=>{C&&this.refreshVoBans()})}updateResourceBan(E){this.dialog.open(e.e,this.getConfig(E)).afterClosed().subscribe(C=>{C&&this.refreshResourceBans()})}updateFacilityBan(E){this.dialog.open(P.G,this.getConfig(E)).afterClosed().subscribe(C=>{C&&this.refreshFacilityBans()})}getConfig(E){const T=(0,c.kZ)();return T.width="600px",T.data={ban:E.ban,theme:"user-theme"},T}refresh(E){0===E.index?this.refreshVoBans():1===E.index?this.refreshResourceBans():this.refreshFacilityBans()}}return p.\u0275fac=function(E){return new(E||p)(i.Y36(L.YF),i.Y36(L.xk),i.Y36(L.IQ),i.Y36(_.fb),i.Y36(s.uw))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-user-bans"]],decls:15,vars:3,consts:[[1,"page-subtitle"],["mat-stretch-tabs","false",1,"mt-3",3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["spinner",""],[1,"mt-2","search-field",3,"placeholder","filter"],[1,"position-relative"],[3,"bans","displayedColumns","filter","updatePolicy","updateBan",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"bans","displayedColumns","filter","updatePolicy","updateBan"]],template:function(E,T){1&E&&(i.TgZ(0,"h1",0),i._uU(1),i.ALo(2,"translate"),i.qZA(),i.TgZ(3,"mat-tab-group",1),i.NdJ("selectedTabChange",function(y){return T.refresh(y)}),i.TgZ(4,"mat-tab"),i.YNc(5,m,2,3,"ng-template",2),i.YNc(6,I,3,3,"ng-template",3),i.qZA(),i.TgZ(7,"mat-tab"),i.YNc(8,U,2,3,"ng-template",2),i.YNc(9,g,3,3,"ng-template",3),i.qZA(),i.TgZ(10,"mat-tab"),i.YNc(11,h,2,3,"ng-template",2),i.YNc(12,l,3,3,"ng-template",3),i.qZA()(),i.YNc(13,u,1,0,"ng-template",null,4,i.W1O)),2&E&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"USER_DETAIL.BANS.TITLE"),"\n"))},dependencies:[M.Vc,M.uD,M.uX,M.SP,d.K,x.P,N.s,R.e,Z.X$]}),p})()},85985:(Y,B,t)=>{t.d(B,{u:()=>g});var L=t(20206),_=t(13381),c=t(10036),n=t(94650),e=t(82761),P=t(36895),i=t(68530),s=t(25788),M=t(96214),d=t(64901),x=t(73358),N=t(89383);function R(h,v){1&h&&(n.TgZ(0,"h1",7),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&h&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function Z(h,v){1&h&&(n.TgZ(0,"h1",7),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&h&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}const m=function(){return["id","vo","name","description"]};function S(h,v){if(1&h&&n._UZ(0,"perun-web-apps-groups-list",8),2&h){const l=n.oxw();n.Q6J("disableMembers",!1)("groups",l.membersGroups)("displayedColumns",n.DdM(5,m))("filter",l.memberFilterValue)("tableId",l.tableId)}}function I(h,v){if(1&h&&n._UZ(0,"perun-web-apps-groups-list",8),2&h){const l=n.oxw(2);n.Q6J("disableMembers",!1)("groups",l.adminsGroups)("displayedColumns",n.DdM(5,m))("filter",l.adminFilterValue)("tableId",l.adminTableId)}}function U(h,v){if(1&h){const l=n.EpF();n.TgZ(0,"div",9)(1,"h1",7),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"perun-web-apps-refresh-button",1),n.NdJ("refresh",function(){n.CHM(l);const o=n.oxw();return n.KtG(o.refreshAdminTable())}),n.qZA(),n.TgZ(5,"perun-web-apps-debounce-filter",2),n.NdJ("filter",function(o){n.CHM(l);const p=n.oxw();return n.KtG(p.adminFilter(o))}),n.qZA(),n.TgZ(6,"div",3),n.YNc(7,I,1,6,"perun-web-apps-groups-list",4),n.qZA()()}if(2&h){const l=n.oxw(),u=n.MAs(8);n.xp6(2),n.hij(" ",n.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),n.xp6(3),n.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",l.adminRefresh)("perunWebAppsLoaderIndicator",u)}}function D(h,v){1&h&&n._UZ(0,"perun-web-apps-loading-table")}let g=(()=>{class h{constructor(l,u,o,p,A){this.usersService=l,this.memberService=u,this.groupService=o,this.store=p,this.route=A,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=c.KE,this.adminTableId=c.Sb}ngOnInit(){(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(l=>this.userId=Number(l.userId)),this.refreshAdminTable(),this.refreshMemberTable()}memberFilter(l){this.memberFilterValue=l}adminFilter(l){this.adminFilterValue=l}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(l=>{this.adminsGroups=l,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(l=>{this.vos=l;for(const u of this.vos)this.memberService.getMemberByUser(u.id,this.userId).subscribe(o=>{this.groupService.getMemberGroups(o.id).subscribe(p=>{this.membersGroups=this.membersGroups.concat(p),this.vos.indexOf(u)===this.vos.length-1&&(this.memberRefresh=!1)})});0===l.length&&(this.memberRefresh=!1)})}}return h.\u0275fac=function(l){return new(l||h)(n.Y36(_.Fv),n.Y36(_.uq),n.Y36(_.ff),n.Y36(L.d6),n.Y36(e.gz))},h.\u0275cmp=n.Xpm({type:h,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(l,u){2&l&&n.ekj("router-component",u.true)},decls:9,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"position-relative"],[3,"disableMembers","groups","displayedColumns","filter","tableId",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["class","mt-5",4,"ngIf"],["spinner",""],[1,"page-subtitle"],[3,"disableMembers","groups","displayedColumns","filter","tableId"],[1,"mt-5"]],template:function(l,u){if(1&l&&(n.YNc(0,R,3,3,"h1",0),n.YNc(1,Z,3,3,"h1",0),n.TgZ(2,"perun-web-apps-refresh-button",1),n.NdJ("refresh",function(){return u.refreshMemberTable()}),n.qZA(),n.TgZ(3,"perun-web-apps-debounce-filter",2),n.NdJ("filter",function(p){return u.memberFilter(p)}),n.qZA(),n.TgZ(4,"div",3),n.YNc(5,S,1,6,"perun-web-apps-groups-list",4),n.qZA(),n.YNc(6,U,8,6,"div",5),n.YNc(7,D,1,0,"ng-template",null,6,n.W1O)),2&l){const o=n.MAs(8);n.Q6J("ngIf",u.showPrincipal),n.xp6(1),n.Q6J("ngIf",!u.showPrincipal),n.xp6(2),n.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",u.memberRefresh)("perunWebAppsLoaderIndicator",o),n.xp6(1),n.Q6J("ngIf",!u.showPrincipal)}},dependencies:[P.O5,i.K,s.W,M.t,d.P,x.e,N.X$]}),h})()},74837:(Y,B,t)=>{t.d(B,{j:()=>D});var L=t(13381),_=t(20206),c=t(10036),n=t(94650),e=t(82761),P=t(36895),i=t(68530),s=t(87831),M=t(96214),d=t(64901),x=t(73358),N=t(89383);function R(g,h){1&g&&(n.TgZ(0,"h1",7),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&g&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function Z(g,h){1&g&&(n.TgZ(0,"h1",7),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&g&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function m(g,h){if(1&g&&n._UZ(0,"perun-web-apps-vos-list",8),2&g){const v=n.oxw();n.Q6J("displayedColumns",v.displayedColumns)("tableId",v.memberTableId)("filterValue",v.memberFilterValue)("vos",v.vosWhereIsMember)}}function S(g,h){if(1&g&&n._UZ(0,"perun-web-apps-vos-list",8),2&g){const v=n.oxw(2);n.Q6J("displayedColumns",v.displayedColumns)("tableId",v.adminTableId)("filterValue",v.adminFilterValue)("vos",v.vosWhereIsAdmin)}}function I(g,h){if(1&g){const v=n.EpF();n.TgZ(0,"div",9)(1,"h1",7),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"perun-web-apps-refresh-button",1),n.NdJ("refresh",function(){n.CHM(v);const u=n.oxw();return n.KtG(u.refreshAdminTable())}),n.qZA(),n.TgZ(5,"perun-web-apps-debounce-filter",2),n.NdJ("filter",function(u){n.CHM(v);const o=n.oxw();return n.KtG(o.applyAdminFilter(u))}),n.qZA(),n.TgZ(6,"div",3),n.YNc(7,S,1,4,"perun-web-apps-vos-list",4),n.qZA()()}if(2&g){const v=n.oxw(),l=n.MAs(8);n.xp6(2),n.Oqu(n.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),n.xp6(3),n.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",v.adminRefresh)("perunWebAppsLoaderIndicator",l)}}function U(g,h){1&g&&n._UZ(0,"perun-web-apps-loading-table")}let D=(()=>{class g{constructor(v,l,u,o){this.usersService=v,this.authResolver=l,this.store=u,this.route=o,this.vosWhereIsAdmin=[],this.vosWhereIsMember=[],this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=c.YF,this.memberTableId=c.gc}ngOnInit(){(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(v=>this.userId=Number(v.userId)),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(v=>{this.vosWhereIsMember=v,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(v=>{this.vosWhereIsAdmin=v,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(v){this.memberFilterValue=v}applyAdminFilter(v){this.adminFilterValue=v}}return g.\u0275fac=function(v){return new(v||g)(n.Y36(L.Fv),n.Y36(_.x4),n.Y36(_.d6),n.Y36(e.gz))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(v,l){2&v&&n.ekj("router-component",l.true)},decls:9,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"position-relative"],[3,"displayedColumns","tableId","filterValue","vos",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["class","mt-5",4,"ngIf"],["spinner",""],[1,"page-subtitle"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(v,l){if(1&v&&(n.YNc(0,R,3,3,"h1",0),n.YNc(1,Z,3,3,"h1",0),n.TgZ(2,"perun-web-apps-refresh-button",1),n.NdJ("refresh",function(){return l.refreshMemberTable()}),n.qZA(),n.TgZ(3,"perun-web-apps-debounce-filter",2),n.NdJ("filter",function(o){return l.applyMemberFilter(o)}),n.qZA(),n.TgZ(4,"div",3),n.YNc(5,m,1,4,"perun-web-apps-vos-list",4),n.qZA(),n.YNc(6,I,8,6,"div",5),n.YNc(7,U,1,0,"ng-template",null,6,n.W1O)),2&v){const u=n.MAs(8);n.Q6J("ngIf",l.isMyProfile),n.xp6(1),n.Q6J("ngIf",!l.isMyProfile),n.xp6(2),n.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",l.memberRefresh)("perunWebAppsLoaderIndicator",u),n.xp6(1),n.Q6J("ngIf",!l.isMyProfile)}},dependencies:[P.O5,i.K,s.Z,M.t,d.P,x.e,N.X$]}),g})()},17755:(Y,B,t)=>{t.d(B,{Z:()=>v});var L=t(13381),_=t(30671),c=t(20206),n=t(64080),e=t(9244),P=t(30167),i=t(94650),s=t(82761),M=t(7274),d=t(36895),x=t(97392),N=t(4859),R=t(73546),Z=t(71135),m=t(89383);function S(l,u){1&l&&i._UZ(0,"th",12)}function I(l,u){if(1&l&&(i.TgZ(0,"td",13),i._uU(1),i.qZA()),2&l){const o=u.$implicit;i.xp6(1),i.hij("",o.displayName,":")}}function U(l,u){1&l&&i._UZ(0,"th",12)}function D(l,u){if(1&l){const o=i.EpF();i.TgZ(0,"td",14)(1,"div",15),i._uU(2),i.TgZ(3,"button",16),i.NdJ("click",function(){i.CHM(o);const A=i.oxw(2);return i.KtG(A.changeEmail())}),i.TgZ(4,"mat-icon"),i._uU(5,"edit"),i.qZA()()()()}if(2&l){const o=u.$implicit;i.xp6(2),i.hij(" ",o.value," ")}}function g(l,u){1&l&&i._UZ(0,"tr",17)}function h(l,u){if(1&l&&(i.TgZ(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title")(4,"h1",4),i._uU(5),i.ALo(6,"translate"),i.qZA()()(),i.TgZ(7,"mat-card-content")(8,"table",5),i.ynx(9,6),i.YNc(10,S,1,0,"th",7),i.YNc(11,I,2,1,"td",8),i.BQk(),i.ynx(12,9),i.YNc(13,U,1,0,"th",7),i.YNc(14,D,6,1,"td",10),i.BQk(),i.YNc(15,g,1,0,"tr",11),i.qZA()()()()),2&l){const o=i.oxw();i.xp6(5),i.Oqu(i.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),i.xp6(3),i.Q6J("dataSource",o.mailDataSource),i.xp6(7),i.Q6J("matRowDefColumns",o.displayedColumns)}}let v=(()=>{class l{constructor(o,p,A,E,T){this.userService=o,this.attributeService=p,this.storeService=A,this.route=E,this.dialog=T,this.navItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(o=>{o.userId?this.userService.getUserById(Number(o.userId)).subscribe(p=>{this.user=p,this.isServiceUser=p.serviceUser,this.initNavItems(`/admin/users/${this.user.id}`)}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,n.r.USER_DEF_PREFERRED_MAIL).subscribe(p=>{this.preferredMail=p,this.handleMailNotDefined(),this.mailDataSource=new _.by([this.preferredMail]),this.initNavItems("/myProfile")}))})}changeEmail(){const o=(0,e.kZ)();o.width="350px",o.data={userId:this.userID},this.dialog.open(P.gr,o).afterClosed().subscribe(A=>{A&&this.attributeService.getUserAttributeByName(this.userID,n.r.USER_DEF_PREFERRED_MAIL).subscribe(E=>{this.preferredMail=E,this.handleMailNotDefined(),this.mailDataSource=new _.by([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,e.Cz)(n.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:new Object("-")})}initNavItems(o){this.navItems=[{cssIcon:"perun-vo",url:`${o}/organizations`,label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:`${o}/groups`,label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-user",url:`${o}/accounts`,label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-identity",url:`${o}/identities`,label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:`${o}/facilities`,label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:`${o}/resources`,label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:`${o}/attributes`,label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-roles",url:`${o}/roles`,label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.navItems.push(this.isServiceUser?{cssIcon:"perun-manager",url:`${o}/associated-users`,label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:`${o}/service-identities`,label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-ban",url:"bans",label:"MENU_ITEMS.USER.BANS",style:"user-btn"}),window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:`${o}/settings`,label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(L.Fv),i.Y36(L.H8),i.Y36(c.d6),i.Y36(s.gz),i.Y36(M.uw))},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(o,p){2&o&&i.ekj("router-component",p.true)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],["appearance","outlined",1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","fw-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"fw-bold"],["mat-cell",""],[1,"d-flex","align-items-center"],["mat-icon-button","",1,"ms-3",3,"click"],["mat-row",""]],template:function(o,p){1&o&&(i.YNc(0,h,16,5,"div",0),i._UZ(1,"perun-web-apps-menu-buttons-field",1)),2&o&&(i.Q6J("ngIf",p.inMyProfile),i.xp6(1),i.Q6J("items",p.navItems)("size","small"))},dependencies:[d.O5,x.Hw,N.RK,_.BZ,_.fO,_.w1,_.Dz,_.nj,_.ge,_.ev,_.Gk,R.a8,R.dn,R.dk,R.n5,Z.L,m.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),l})()},6097:(Y,B,t)=>{t.d(B,{t:()=>N});var L=t(13381),_=t(20206),c=t(94650),n=t(82761),e=t(3848),P=t(72263),i=t(89383);function s(R,Z){1&R&&(c._uU(0),c.ALo(1,"translate")),2&R&&c.hij(" ",c.lcZ(1,1,"USER_DETAIL.DASHBOARD.DIRECT_ROLES")," ")}function M(R,Z){if(1&R){const m=c.EpF();c.TgZ(0,"app-perun-web-apps-roles-page",4),c.NdJ("reload",function(){c.CHM(m);const I=c.oxw();return c.KtG(I.getData())})("startLoading",function(){c.CHM(m);const I=c.oxw();return c.KtG(I.outerLoading=!0)}),c.qZA()}if(2&R){const m=c.oxw();c.Q6J("outerLoading",m.outerLoading)("roles",m.roles)("entityId",m.userId)("showDescription",m.showDescription)("entityType",m.entityType)("editable",!0)}}function d(R,Z){1&R&&(c._uU(0),c.ALo(1,"translate")),2&R&&c.hij(" ",c.lcZ(1,1,"USER_DETAIL.DASHBOARD.AUTHORIZED_GROUP_BASED_ROLES")," ")}function x(R,Z){if(1&R){const m=c.EpF();c.TgZ(0,"app-perun-web-apps-roles-page",5),c.NdJ("reload",function(){c.CHM(m);const I=c.oxw();return c.KtG(I.getData())})("startLoading",function(){c.CHM(m);const I=c.oxw();return c.KtG(I.outerLoading=!0)}),c.qZA()}if(2&R){const m=c.oxw();c.Q6J("outerLoading",m.outerLoading)("roles",m.indirectRoles)("entityId",m.userId)("showDescription",m.showDescription)("entityType",m.entityType)("editable",!1)("complementaryObjectsWithAuthzGroups",m.rolesComplementaryObjectsWithAuthzGroups)}}let N=(()=>{class R{constructor(m,S,I,U){this.authzResolverService=m,this.route=S,this.store=I,this.roleService=U,this.roles=new Map,this.indirectRoles=new Map,this.rolesComplementaryObjectsWithAuthzGroups=new Map,this.showDescription=!0}ngOnInit(){this.outerLoading=!0,this.route.parent.params.subscribe(m=>{m.userId?(this.entityType="USER",this.userId=Number(m.userId)):(this.userId=this.store.getPerunPrincipal().userId,this.entityType="SELF"),this.getData()})}getData(){this.outerLoading=!0,this.roles.clear(),this.authzResolverService.getUserDirectRoles(this.userId).subscribe({next:m=>{const S=Object.keys(m).map(I=>I.toUpperCase());this.roles=this.roleService.prepareRoles(m,S),this.indirectRoles.clear(),this.authzResolverService.getUserRolesObtainedFromAuthorizedGroupMemberships(this.userId).subscribe({next:I=>{const U=Object.keys(I).map(D=>D.toUpperCase());this.indirectRoles=this.roleService.prepareRoles(I,U),this.rolesComplementaryObjectsWithAuthzGroups.clear(),this.authzResolverService.getRoleComplementaryObjectsWithAuthorizedGroups(this.userId).subscribe({next:D=>{this.rolesComplementaryObjectsWithAuthzGroups=this.roleService.prepareComplementaryObjects(Object.keys(D),D),this.outerLoading=!1},error:()=>this.outerLoading=!1})},error:()=>this.outerLoading=!1})},error:()=>this.outerLoading=!1})}}return R.\u0275fac=function(m){return new(m||R)(c.Y36(L.Ct),c.Y36(n.gz),c.Y36(_.d6),c.Y36(_.Nj))},R.\u0275cmp=c.Xpm({type:R,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(m,S){2&m&&c.ekj("router-component",S.true)},decls:10,vars:3,consts:[[1,"page-subtitle","d-flex"],["mat-stretch-tabs","false"],["matTabLabel",""],["matTabContent",""],[3,"outerLoading","roles","entityId","showDescription","entityType","editable","reload","startLoading"],[3,"outerLoading","roles","entityId","showDescription","entityType","editable","complementaryObjectsWithAuthzGroups","reload","startLoading"]],template:function(m,S){1&m&&(c.TgZ(0,"h1",0),c._uU(1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"mat-tab-group",1)(4,"mat-tab"),c.YNc(5,s,2,3,"ng-template",2),c.YNc(6,M,1,6,"ng-template",3),c.qZA(),c.TgZ(7,"mat-tab"),c.YNc(8,d,2,3,"ng-template",2),c.YNc(9,x,1,7,"ng-template",3),c.qZA()()),2&m&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"ROLES.TITLE")))},dependencies:[e.Vc,e.uD,e.uX,e.SP,P._,i.X$]}),R})()},46597:(Y,B,t)=>{t.d(B,{d:()=>h});var L=t(10036),_=t(13381),c=t(95017),n=t(9244),e=t(54668),P=t(94814),i=t(20206),s=t(54004),M=t(63900),d=t(94650),x=t(7274),N=t(82761),R=t(4859),Z=t(68530),m=t(96214),S=t(73358),I=t(64877),U=t(89383);function D(v,l){1&v&&d._UZ(0,"perun-web-apps-loading-table")}function g(v,l){if(1&v&&(d._UZ(0,"app-users-list",7),d.ALo(1,"translate")),2&v){const u=d.oxw();d.Q6J("noUsersFoundLabel",d.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("disableRouting",u.disableRouting)("displayedColumns",u.displayedColumns)("selection",u.selection)("tableId",u.tableId)("users",u.associatedUsers)}}let h=(()=>{class v{constructor(u,o,p,A,E){this.dialog=u,this.router=o,this.authResolver=p,this.userManager=A,this.entityStorageService=E,this.loading=!1,this.selection=new c.Ov(!1,[]),this.associatedUsers=[],this.tableId=L.It,this.displayedColumns=["select","id","user","name","email","logins","organization"]}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).pipe((0,s.U)(u=>u.map(o=>o.id)),(0,M.w)(u=>this.userManager.getRichUsersWithAttributesByIds(u))).subscribe(u=>{this.associatedUsers=u,this.selection.clear(),this.setAuth(),this.loading=!1})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){const u=(0,n.kZ)();u.width="1250px",u.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(e.l,u).afterClosed().subscribe(p=>{p&&this.refreshTable()})}onRemove(){const u=(0,n.kZ)();u.width="650px",u.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(P.B,u).afterClosed().subscribe(p=>{p&&(this.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[this.user])?this.refreshTable():this.router.navigate(["/myProfile"],{queryParamsHandling:"preserve"}))})}}return v.\u0275fac=function(u){return new(u||v)(d.Y36(x.uw),d.Y36(N.F0),d.Y36(i.x4),d.Y36(_.Fv),d.Y36(i.fb))},v.\u0275cmp=d.Xpm({type:v,selectors:[["app-user-settings-associated-users"]],decls:15,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],["spinner",""],[1,"position-relative"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users"]],template:function(u,o){if(1&u&&(d.TgZ(0,"div")(1,"h1",0),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"perun-web-apps-refresh-button",1),d.NdJ("refresh",function(){return o.refreshTable()}),d.qZA(),d.TgZ(5,"button",2),d.NdJ("click",function(){return o.onAdd()}),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.TgZ(8,"button",3),d.NdJ("click",function(){return o.onRemove()}),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.YNc(11,D,1,0,"ng-template",null,4,d.W1O),d.TgZ(13,"div",5),d.YNc(14,g,2,8,"app-users-list",6),d.qZA()()),2&u){const p=d.MAs(12);d.xp6(2),d.Oqu(d.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),d.xp6(4),d.hij(" ",d.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),d.xp6(2),d.Q6J("disabled",0===o.selection.selected.length),d.xp6(1),d.hij(" ",d.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),d.xp6(5),d.Q6J("perunWebAppsLoader",o.loading)("perunWebAppsLoaderIndicator",p)}},dependencies:[R.lW,Z.K,m.t,S.e,I.C,U.X$]}),v})()},97453:(Y,B,t)=>{t.d(B,{R:()=>v});var L=t(95017),_=t(13381),c=t(10036),n=t(9244),e=t(54668),P=t(94814),i=t(20206),s=t(94650),M=t(82761),d=t(7274),x=t(36895),N=t(4859),R=t(68530),Z=t(96214),m=t(73358),S=t(64877),I=t(89383);function U(l,u){if(1&l){const o=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(o);const A=s.oxw();return s.KtG(A.onAdd())}),s._uU(1),s.ALo(2,"translate"),s.qZA()}2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function D(l,u){if(1&l){const o=s.EpF();s.TgZ(0,"button",8),s.NdJ("click",function(){s.CHM(o);const A=s.oxw();return s.KtG(A.onRemove())}),s._uU(1),s.ALo(2,"translate"),s.qZA()}if(2&l){const o=s.oxw();s.Q6J("disabled",0===o.selection.selected.length),s.xp6(1),s.hij(" ",s.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function g(l,u){1&l&&s._UZ(0,"perun-web-apps-loading-table")}function h(l,u){if(1&l&&(s._UZ(0,"app-users-list",9),s.ALo(1,"translate")),2&l){const o=s.oxw();s.Q6J("noUsersFoundLabel",s.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("displayedColumns",o.displayedColumns)("selection",o.selection)("tableId",o.tableId)("routeToAdmin",o.routeToAdminSection)("users",o.identities)}}let v=(()=>{class l{constructor(o,p,A,E,T,C){this.route=o,this.dialog=p,this.router=A,this.userManager=E,this.authResolver=T,this.store=C,this.loading=!1,this.selection=new L.Ov(!1,[]),this.identities=[],this.tableId=c.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.loading=!0,this.subscription=this.route.parent.params.subscribe(o=>{this.userId=Number(o.userId),this.userId||(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(o=>{this.identities=o,this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){const o=(0,n.kZ)();o.width="1250px",o.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(e.l,o).afterClosed().subscribe(A=>{A&&this.refreshTable()})}onRemove(){const o=(0,n.kZ)();o.width="650px",o.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(P.B,o).afterClosed().subscribe(A=>{A&&this.refreshTable()})}}return l.\u0275fac=function(o){return new(o||l)(s.Y36(M.gz),s.Y36(d.uw),s.Y36(M.F0),s.Y36(_.Fv),s.Y36(i.x4),s.Y36(i.d6))},l.\u0275cmp=s.Xpm({type:l,selectors:[["app-user-settings-service-identities"]],decls:10,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","me-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","me-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["spinner",""],[1,"position-relative"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users"]],template:function(o,p){if(1&o&&(s.TgZ(0,"h1",0),s._uU(1),s.ALo(2,"translate"),s.qZA(),s.TgZ(3,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return p.refreshTable()}),s.qZA(),s.YNc(4,U,3,3,"button",2),s.YNc(5,D,3,4,"button",3),s.YNc(6,g,1,0,"ng-template",null,4,s.W1O),s.TgZ(8,"div",5),s.YNc(9,h,2,8,"app-users-list",6),s.qZA()),2&o){const A=s.MAs(7);s.xp6(1),s.Oqu(s.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),s.xp6(3),s.Q6J("ngIf",p.addIdentity),s.xp6(1),s.Q6J("ngIf",p.removeIdentity),s.xp6(4),s.Q6J("perunWebAppsLoader",p.loading)("perunWebAppsLoaderIndicator",A)}},dependencies:[x.O5,N.lW,R.K,Z.t,m.e,S.C,I.X$]}),l})()},38338:(Y,B,t)=>{t.r(B),t.d(B,{UsersModule:()=>dt});var L=t(36895),_=t(82761),c=t(74837),n=t(85985),e=t(94650),P=t(61283);let i=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(a,f){2&a&&e.ekj("router-component",f.true)},decls:1,vars:0,template:function(a,f){1&a&&e._UZ(0,"app-animated-router-outlet")},dependencies:[P.A]}),r})();var s=t(13381),M=t(51572),d=t(71135);function x(r,b){1&r&&e._UZ(0,"mat-spinner",2)}function N(r,b){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"perun-web-apps-menu-buttons-field",3),e.qZA()),2&r){const a=e.oxw();e.xp6(1),e.Q6J("items",a.navItems)("size","small")}}let R=(()=>{class r{constructor(a,f){this.route=a,this.userManager=f,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(a=>{const f=Number(a.userId);this.userManager.getUserById(f).subscribe(O=>{this.isServiceUser=O.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"/myProfile/settings/passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings1",url:"/myProfile/settings/guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(_.gz),e.Y36(s.Fv))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(a,f){2&a&&e.ekj("router-component",f.true)},decls:2,vars:2,consts:[["class","me-auto ms-auto",4,"ngIf"],[4,"ngIf"],[1,"me-auto","ms-auto"],[3,"items","size"]],template:function(a,f){1&a&&(e.YNc(0,x,1,0,"mat-spinner",0),e.YNc(1,N,2,2,"div",1)),2&a&&(e.Q6J("ngIf",f.loading),e.xp6(1),e.Q6J("ngIf",!f.loading))},dependencies:[L.O5,M.Ou,d.L]}),r})();var Z=t(98973),m=t(37433),S=t(9244),I=t(6335),U=t(3238),D=t(59549),g=t(84385),h=t(89383);function v(r,b){if(1&r&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&r){const a=b.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}let l=(()=>{class r{constructor(a){this.guiConfigService=a,this.tablePageSizeOptions=S.f7}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(I.Rc)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(I.Rc,this.preferredTablePageSize)}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(I.Ng))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,f){1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-select",3),e.NdJ("valueChange",function(W){return f.preferredTablePageSize=W})("valueChange",function(){return f.updatePreferredTablePageSize()}),e.YNc(9,v,2,2,"mat-option",4),e.qZA()()()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),e.xp6(5),e.Oqu(e.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),e.xp6(2),e.Q6J("value",f.preferredTablePageSize),e.xp6(1),e.Q6J("ngForOf",f.tablePageSizeOptions))},dependencies:[L.sg,U.ey,D.KE,D.hX,g.gD,h.X$]}),r})();var u=t(17755),o=t(20206),p=t(77968),A=t(97392),E=t(10266),T=t(4235),C=t(34198),y=t(55660),F=t(31359);const j=function(){return{color:"black"}},z=function(){return["/myProfile"]};function k(r,b){if(1&r&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.TgZ(2,"div",2),e._UZ(3,"mat-icon",3),e.ALo(4,"translate"),e.TgZ(5,"div",4)(6,"div",5)(7,"a",6),e.NdJ("auxclick",function(f){return f.preventDefault()}),e._uU(8),e.ALo(9,"userFullName"),e.qZA(),e.TgZ(10,"span",7),e._uU(11),e.qZA()(),e.TgZ(12,"span",8),e._uU(13),e.ALo(14,"translate"),e.ALo(15,"translate"),e.qZA()()(),e._UZ(16,"app-animated-router-outlet"),e.qZA()),2&r){const a=e.oxw();e.xp6(3),e.s9C("matTooltip",e.lcZ(4,9,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(17,j)),e.xp6(4),e.Q6J("perunWebAppsMiddleClickRouterLink",e.DdM(18,z))("routerLink",e.DdM(19,z)),e.xp6(1),e.hij(" ",e.lcZ(9,11,a.user)," "),e.xp6(3),e.hij(" \xa0#",a.user.id," "),e.xp6(2),e.lnq(" ",e.lcZ(14,13,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(15,15,"MENU_ITEMS.USER.USER_TYPE"),": ",a.getUserType()," ")}}let ee=(()=>{class r{constructor(a,f,O,W){this.sideMenuService=a,this.store=f,this.entityStore=O,this.router=W}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(()=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.entityStore.setEntity(this.user),this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(p.D),e.Y36(o.d6),e.Y36(o.fb),e.Y36(_.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid ps-xl-5 pe-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","ps-xl-5","pe-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"user-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(a,f){1&a&&e.YNc(0,k,17,20,"div",0),2&a&&e.Q6J("ngIf",void 0!==f.user)},dependencies:[L.O5,L.PC,_.rH,A.Hw,E.gM,T.W,C.Y,y.Q,P.A,h.X$,F.d]}),r})();var te=t(6097),ne=t(97453),se=t(69024),ie=t(29862),K=t(7274),J=t(4859);function ae(r,b){1&r&&e._UZ(0,"mat-spinner",11)}function re(r,b){if(1&r){const a=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(a);const O=e.oxw(2);return e.KtG(O.editUser())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()}}const oe=function(){return{color:"black"}},V=function(r){return["/myProfile/service-identities",r]};function le(r,b){if(1&r&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.YNc(2,ae,1,0,"mat-spinner",2),e.TgZ(3,"div",3),e._UZ(4,"mat-icon",4),e.ALo(5,"translate"),e.TgZ(6,"div",5)(7,"div",6)(8,"a",7),e.NdJ("auxclick",function(f){return f.preventDefault()}),e._uU(9),e.ALo(10,"userFullName"),e.qZA(),e.TgZ(11,"span",8),e._uU(12),e.qZA(),e.YNc(13,re,3,0,"button",9),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span",10),e._uU(18),e.ALo(19,"translate"),e.ALo(20,"translate"),e.qZA()()(),e._UZ(21,"app-animated-router-outlet"),e.qZA()),2&r){const a=e.oxw();e.xp6(2),e.Q6J("ngIf",a.loading),e.xp6(2),e.s9C("matTooltip",e.lcZ(5,13,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(23,oe)),e.xp6(4),e.Q6J("perunWebAppsMiddleClickRouterLink",e.VKq(24,V,a.user.id.toString()))("routerLink",e.VKq(26,V,a.user.id)),e.xp6(1),e.hij(" ",e.lcZ(10,15,a.user)," "),e.xp6(3),e.hij(" \xa0#",a.user.id," "),e.xp6(1),e.Q6J("ngIf",a.authResolver.isPerunAdmin()),e.xp6(2),e.AsE("",e.lcZ(16,17,"ADMIN_USER.UUID"),": ",a.user.uuid,""),e.xp6(3),e.lnq(" ",e.lcZ(19,19,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(20,21,"MENU_ITEMS.USER.USER_TYPE"),": ",a.getUserType()," ")}}let _e=(()=>{class r{constructor(a,f,O,W,G,Q,H){this.sideMenuService=a,this.usersService=f,this.sideMenuItemService=O,this.route=W,this.dialog=G,this.authResolver=Q,this.entityStorageService=H,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(a=>{const f=Number(a.userId);this.entityStorageService.setEntity({id:f,beanName:"User"}),this.usersService.getUserById(f).subscribe(O=>{this.user=O;const W=this.sideMenuItemService.parseServiceIdentity(O);this.sideMenuService.setUserItems([W]),this.loading=!1},()=>this.loading=!1)})}getUserType(){return this.user.serviceUser?"Service":"Person"}editUser(){const a=(0,S.kZ)();a.width="450px",a.data={theme:"admin-theme",user:this.user},this.dialog.open(ie.x,a).afterClosed().subscribe(O=>{O&&this.usersService.getUserById(this.user.id).subscribe(W=>{this.user=W})})}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(p.D),e.Y36(s.Fv),e.Y36(se.V),e.Y36(_.gz),e.Y36(K.uw),e.Y36(o.x4),e.Y36(o.fb))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid ps-xl-5 pe-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","ps-xl-5","pe-xl-5","user-theme"],["class","me-auto ms-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"user-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"me-auto","ms-auto"],["mat-icon-button","",3,"click"]],template:function(a,f){1&a&&e.YNc(0,le,22,28,"div",0),2&a&&e.Q6J("ngIf",void 0!==f.user)},dependencies:[L.O5,L.PC,_.rH,A.Hw,J.RK,M.Ou,E.gM,T.W,C.Y,y.Q,P.A,h.X$,F.d]}),r})(),pe=(()=>{class r{constructor(a){this.entityStorageService=a,this.navItems=[]}ngOnInit(){this.serviceAccount=this.entityStorageService.getEntity(),this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-manager",url:`/myProfile/service-identities/${this.serviceAccount.id}/associated-users`,label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"},{cssIcon:"perun-notification",url:`/myProfile/service-identities/${this.serviceAccount.id}/mailing-lists`,label:"MENU_ITEMS.USER.MAILING_LISTS",style:"user-btn"},{cssIcon:"perun-statistics",url:`/myProfile/service-identities/${this.serviceAccount.id}/data-quotas`,label:"MENU_ITEMS.USER.DATA_QUOTAS",style:"user-btn"},{cssIcon:"perun-authentication",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication`,label:"MENU_ITEMS.USER.AUTHENTICATION",style:"user-btn"}]}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(o.fb))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-service-identity-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(a,f){1&a&&e._UZ(0,"perun-web-apps-menu-buttons-field",0),2&a&&e.Q6J("items",f.navItems)("size","small")},dependencies:[d.L]}),r})();var ce=t(46597),ue=t(74006);let de=(()=>{class r{constructor(a){this.entityStorageService=a}ngOnInit(){this.user=this.entityStorageService.getEntity()}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(o.fb))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-perun-web-apps-user-settings-mailing-lists"]],decls:1,vars:2,consts:[[3,"user","isService"]],template:function(a,f){1&a&&e._UZ(0,"perun-web-apps-mailing-lists",0),2&a&&e.Q6J("user",f.user)("isService",!0)},dependencies:[ue.E]}),r})();var me=t(2541);let ge=(()=>{class r{constructor(a){this.entityStorageService=a}ngOnInit(){this.user=this.entityStorageService.getEntity()}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(o.fb))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-perun-web-apps-user-settings-data-quotas"]],decls:1,vars:1,consts:[[3,"user"]],template:function(a,f){1&a&&e._UZ(0,"perun-web-apps-data-quotas",0),2&a&&e.Q6J("user",f.user)},dependencies:[me.m]}),r})(),he=(()=>{class r{constructor(a){this.entityStorageService=a,this.navItems=[]}ngOnInit(){this.serviceAccount=this.entityStorageService.getEntity(),this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-logins",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication/logins`,label:"MENU_ITEMS.USER.LOGINS",style:"user-btn"},{cssIcon:"perun-certificates",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication/certificates`,label:"MENU_ITEMS.USER.CERTIFICATES",style:"user-btn"},{cssIcon:"perun-key",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication/ssh-keys`,label:"MENU_ITEMS.USER.SSH_KEYS",style:"user-btn"}]}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(o.fb))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-service-identity-authentication-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(a,f){1&a&&e._UZ(0,"perun-web-apps-menu-buttons-field",0),2&a&&e.Q6J("items",f.navItems)("size","small")},dependencies:[d.L]}),r})();var w=t(24006),fe=t(28499),Ee=t(97403),X=t(73358),Ie=t(95406);function ve(r,b){1&r&&e._UZ(0,"perun-web-apps-loading-dialog")}function Te(r,b){if(1&r){const a=e.EpF();e.TgZ(0,"div")(1,"h1",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"app-login-password-form-with-generate-option",5),e.qZA(),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(){e.CHM(a);const O=e.oxw();return e.KtG(O.onCancel())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){e.CHM(a);const O=e.oxw();return e.KtG(O.onSetLogin())}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()}if(2&r){const a=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"DIALOGS.SET_LOGIN.TITLE")),e.xp6(3),e.Q6J("formGroup",a.formGroup)("filteredNamespace",a.data.filteredNamespaces),e.xp6(3),e.hij(" ",e.lcZ(9,8,"DIALOGS.SET_LOGIN.CANCEL")," "),e.xp6(2),e.Q6J("disabled","Not selected"===a.formGroup.get("namespaceCtrl").value||a.formGroup.invalid||a.formGroup.pending||a.processing),e.xp6(1),e.hij(" ",e.lcZ(12,10,"DIALOGS.SET_LOGIN.SET_LOGIN")," ")}}let Ae=(()=>{class r{constructor(a,f,O,W,G,Q,H,mt,gt,ht){this.dialogRef=a,this.data=f,this.formBuilder=O,this.usersManagerService=W,this.membersManagerService=G,this.attributesManagerService=Q,this.apiRequestConfiguration=H,this.notificator=mt,this.translate=gt,this.cd=ht,this.processing=!1}ngOnInit(){this.userId=this.data.userId,this.formGroup=this.formBuilder.group({namespaceCtrl:["Not selected"],loginCtrl:["",[w.kI.pattern("^[a-z][a-z0-9_-]+$"),w.kI.maxLength(15),w.kI.minLength(2)]],passwordCtrl:["",w.kI.required,[(0,fe.yT)(null,this.usersManagerService,this.apiRequestConfiguration)]],passwordAgainCtrl:[""],generatePasswordCtrl:[!0]},{validators:S.dN.passwordMatchValidator})}ngAfterViewInit(){this.cd.detectChanges()}onSetLogin(){this.processing=!0;const a=this.formGroup.get("namespaceCtrl").value.toLowerCase(),f=this.formGroup.get("loginCtrl").value;if(f)this.setLogin(a,f);else{const O=`urn:perun:user:attribute-def:def:login-namespace:${a}`;this.attributesManagerService.getUserAttributeByName(this.userId,"urn:perun:user:attribute-def:core:lastName").subscribe(W=>{this.usersManagerService.generateAccountForName(a,W.value).subscribe(Q=>{this.setLogin(a,Q[O])},()=>this.processing=!1)})}}setLogin(a,f){this.usersManagerService.setLogin(this.userId,f,a).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_LOGIN")),this.setPassword()},()=>{this.processing=!1})}setPassword(){const a=this.formGroup.get("namespaceCtrl").value.toLowerCase(),f=this.formGroup.get("passwordCtrl").value;if(this.formGroup.get("generatePasswordCtrl").value){if(!this.formGroup.get("loginCtrl").value)return;this.usersManagerService.reserveRandomPassword(this.userId,a).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,a).subscribe(()=>{this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}else this.usersManagerService.reservePasswordForUser({user:this.userId,namespace:a,password:f}).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,a).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_PASSWORD")),this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}onCancel(){this.dialogRef.close(!1)}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(K.so),e.Y36(K.WI),e.Y36(w.QS),e.Y36(s.Fv),e.Y36(s.uq),e.Y36(s.H8),e.Y36(o.F5),e.Y36(o.V6),e.Y36(h.sK),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-perun-web-apps-set-login-dialog"]],decls:4,vars:2,consts:[["spinner",""],[1,"vo-theme","position-relative"],[4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[3,"formGroup","filteredNamespace"],["mat-dialog-actions",""],["mat-flat-button","",1,"ms-auto",3,"click"],["color","accent","mat-flat-button","",1,"ms-2",3,"disabled","click"]],template:function(a,f){if(1&a&&(e.YNc(0,ve,1,0,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,Te,13,12,"div",2),e.qZA()),2&a){const O=e.MAs(1);e.xp6(3),e.Q6J("perunWebAppsLoader",f.processing)("perunWebAppsLoaderIndicator",O)}},dependencies:[w.JL,w.sg,J.lW,K.uh,K.xY,K.H8,Ee.b,X.e,Ie.r,h.X$]}),r})();var $=t(96214),be=t(53599);const Ue=["logins"];let Ce=(()=>{class r{constructor(a,f){this.dialog=a,this.entityStorageService=f,this.filteredNamespaces=[]}ngOnInit(){this.userId=this.entityStorageService.getEntity().id}onAdd(){const a=(0,S.kZ)();a.width="500px",a.data={userId:this.userId,filteredNamespaces:this.filteredNamespaces},this.dialog.open(Ae,a).afterClosed().subscribe(O=>{O&&this.logins.refreshTable()})}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(K.uw),e.Y36(o.fb))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-perun-web-apps-user-settings-logins"]],viewQuery:function(a,f){if(1&a&&e.Gf(Ue,5),2&a){let O;e.iGM(O=e.CRH())&&(f.logins=O.first)}},decls:9,vars:7,consts:[[1,"page-title"],[3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],[3,"authenticationPage","filteredNamespaces"],["logins",""]],template:function(a,f){if(1&a){const O=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perun-web-apps-refresh-button",1),e.NdJ("refresh",function(){e.CHM(O);const G=e.MAs(8);return e.KtG(G.refreshTable())}),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return f.onAdd()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"perun-web-apps-password-reset",3,4),e.NdJ("filteredNamespaces",function(G){return f.filteredNamespaces=G}),e.qZA()}2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"USER_DETAIL.SETTINGS.LOGINS.TITLE")),e.xp6(4),e.hij(" ",e.lcZ(6,5,"USER_DETAIL.SETTINGS.LOGINS.ADD"),"\n"),e.xp6(2),e.Q6J("authenticationPage",!0))},dependencies:[J.lW,$.t,be.N,h.X$]}),r})(),Se=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-service-identity-authentication"]],hostVars:2,hostBindings:function(a,f){2&a&&e.ekj("router-component",f.true)},decls:1,vars:0,template:function(a,f){1&a&&e._UZ(0,"app-animated-router-outlet")},dependencies:[P.A]}),r})();var De=t(64080),Oe=t(95017),Me=t(30167),Re=t(68530),Le=t(53984);const Pe=["list"];function ye(r,b){1&r&&e._UZ(0,"perun-web-apps-loading-table")}const Ne=function(r){return[r]};function Ze(r,b){if(1&r&&e._UZ(0,"perun-web-apps-attributes-list",6,7),2&r){const a=e.oxw();e.Q6J("attributes",e.VKq(2,Ne,a.certificates))("selection",a.selection)}}let xe=(()=>{class r{constructor(a,f,O){this.entityStorageService=a,this.attributesManagerService=f,this.dialog=O,this.selection=new Oe.Ov(!0,[])}ngOnInit(){this.userId=this.entityStorageService.getEntity().id,this.refresh()}refresh(){this.loading=!0,this.attributesManagerService.getUserAttributeByName(this.userId,De.r.USER_DEF_CERTIFICATES).subscribe(a=>{this.certificates=a,this.selection.clear(),this.loading=!1})}save(){this.list.updateMapAttributes();const a=(0,S.kZ)();a.width="450px",a.data={entityId:this.userId,entity:"user",attributes:this.selection.selected},this.dialog.open(Me.wA,a).afterClosed().subscribe(O=>{O&&this.refresh()})}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(o.fb),e.Y36(s.H8),e.Y36(K.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-service-identity-certificates"]],viewQuery:function(a,f){if(1&a&&e.Gf(Pe,5),2&a){let O;e.iGM(O=e.CRH())&&(f.list=O.first)}},decls:11,vars:9,consts:[[1,"page-title"],[1,"mt-2",3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","mt-2",3,"disabled","click"],["spinner",""],[1,"position-relative"],[3,"attributes","selection",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"attributes","selection"],["list",""]],template:function(a,f){if(1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perun-web-apps-refresh-button",1),e.NdJ("refresh",function(){return f.refresh()}),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return f.save()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ye,1,0,"ng-template",null,3,e.W1O),e.TgZ(9,"div",4),e.YNc(10,Ze,2,4,"perun-web-apps-attributes-list",5),e.qZA()),2&a){const O=e.MAs(8);e.xp6(1),e.Oqu(e.lcZ(2,5,"USER_DETAIL.SETTINGS.CERTIFICATES.TITLE")),e.xp6(3),e.Q6J("disabled",0===f.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(6,7,"USER_DETAIL.SETTINGS.CERTIFICATES.SAVE"),"\n"),e.xp6(5),e.Q6J("perunWebAppsLoader",f.loading)("perunWebAppsLoaderIndicator",O)}},dependencies:[J.lW,Re.K,$.t,Le.p,X.e,h.X$]}),r})();var Be=t(51403);const We=[{path:"",component:ee,children:[{path:"",component:u.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:Z.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:c.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:n.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:te.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:ne.R,data:{animation:"UserServiceIdentities"}},{path:"bans",component:Be.Q,data:{animation:"UserBansPage"}},{path:"settings",component:i,children:[{path:"",component:R,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:m.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:l,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:_e,children:[{path:"",component:pe},{path:"associated-users",component:ce.d},{path:"authentication",component:Se,children:[{path:"",component:he},{path:"logins",component:Ce},{path:"certificates",component:xe},{path:"ssh-keys",component:m.N7}]},{path:"mailing-lists",component:de},{path:"data-quotas",component:ge}]}];let Ye=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild(We),_.Bz]}),r})();var Ke=t(47957),we=t(284),Ge=t(23267),Fe=t(37084),Je=t(96308),Qe=t(30671),He=t(3848),ze=t(35423),je=t(56709),Ve=t(17009),Xe=t(73162),$e=t(90455),qe=t(99602),ke=t(71948),et=t(44850),tt=t(98739),q=t(73546),nt=t(86257),st=t(73555),it=t(77331),at=t(28255),rt=t(67376),ot=t(63189),lt=t(46860),_t=t(42673),pt=t(11243),ct=t(97480),ut=t(33462);let dt=(()=>{class r{constructor(a){this.translate=a,a.addLangs(["en","cs"])}}return r.\u0275fac=function(a){return new(a||r)(e.LFG(h.sK))},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[L.ez,Ye,Ke.Bb,we.c,D.lN,w.UX,w.u5,A.Ps,Ge.SJ,Fe.To,h.aw.forChild({}),J.ot,Je.JX,Qe.p0,He.Nh,ze.dp,J.ot,je.p9,K.Is,g.LD,Ve.ZX,M.Cq,Xe.Cv,E.AV,$e.rP,qe.FA,U.XK,ke.Fk,et.t,U.si,tt.TU,q.QW,nt.T5,st._t,q.QW,it.Hi,at.Tx,rt.Cl,ot.r,lt.A,_t.g,m.ez,pt.r,ct.d4,ut.m]}),r})()}}]);