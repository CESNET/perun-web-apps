(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{BAI5:function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var i=s("Ssnw"),n=s("X2Q7"),a=s("iyZ4"),c=s("EM62"),r=s("sEIs"),o=s("2kYt"),b=s("0XDM"),l=s("A8Ay"),u=s("csyo"),p=s("K9kF"),d=s("s2Ay");function f(e,t){1&e&&(c.Sb(0,"h1",6),c.Jc(1),c.ec(2,"translate"),c.Rb()),2&e&&(c.Ab(1),c.Lc(" ",c.fc(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function m(e,t){1&e&&(c.Sb(0,"h1",6),c.Jc(1),c.ec(2,"translate"),c.Rb()),2&e&&(c.Ab(1),c.Lc(" ",c.fc(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function h(e,t){1&e&&c.Nb(0,"mat-spinner",7)}const S=function(){return["id","vo","name","description","status"]};function g(e,t){if(1&e){const e=c.Tb();c.Sb(0,"perun-web-apps-groups-list",8),c.Zb("page",(function(t){return c.xc(e),c.dc().pageChanged(t)})),c.Rb()}if(2&e){const e=c.dc();c.kc("pageSize",e.pageSize)("groups",e.membersGroups)("displayedColumns",c.oc(5,S))("disableMembers",!1)("filter",e.memberFilterValue)}}function R(e,t){1&e&&c.Nb(0,"mat-spinner",7)}const I=function(){return["id","vo","name","description"]};function E(e,t){if(1&e){const e=c.Tb();c.Sb(0,"perun-web-apps-groups-list",8),c.Zb("page",(function(t){return c.xc(e),c.dc(2).adminPageChanged(t)})),c.Rb()}if(2&e){const e=c.dc(2);c.kc("pageSize",e.adminPageSize)("groups",e.adminsGroups)("displayedColumns",c.oc(5,I))("disableMembers",!1)("filter",e.adminFilterValue)}}function A(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",9),c.Sb(1,"h1",6),c.Jc(2),c.ec(3,"translate"),c.Rb(),c.Sb(4,"perun-web-apps-refresh-button",1),c.Zb("refresh",(function(){return c.xc(e),c.dc().refreshAdminTable()})),c.Rb(),c.Sb(5,"perun-web-apps-immediate-filter",2),c.Zb("filter",(function(t){return c.xc(e),c.dc().adminFilter(t)})),c.Rb(),c.Hc(6,R,1,0,"mat-spinner",3),c.Hc(7,E,1,6,"perun-web-apps-groups-list",4),c.Rb()}if(2&e){const e=c.dc();c.Ab(2),c.Lc(" ",c.fc(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),c.Ab(3),c.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),c.Ab(1),c.kc("ngIf",e.adminRefresh),c.Ab(1),c.kc("ngIf",!e.adminRefresh)}}let v=(()=>{class e{constructor(e,t,s,i,n,c){this.usersService=e,this.memberService=t,this.tableConfigService=s,this.groupService=i,this.store=n,this.route=c,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=a.bb,this.adminTableId=a.ab}ngOnInit(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.adminPageSize=this.tableConfigService.getTablePageSize(this.adminTableId),!0===(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(e=>this.userId=e.userId),this.refreshAdminTable(),this.refreshMemberTable()}pageChanged(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}adminPageChanged(e){this.adminPageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.adminTableId,e.pageSize)}memberFilter(e){this.memberFilterValue=e}adminFilter(e){this.adminFilterValue=e}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(e=>{this.adminsGroups=e,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(e=>{this.vos=e;for(const t of this.vos)this.memberService.getMemberByUser(t.id,this.userId).subscribe(e=>{this.groupService.getMemberGroups(e.id).subscribe(e=>{this.membersGroups=this.membersGroups.concat(e),this.vos.indexOf(t)===this.vos.length-1&&(this.memberRefresh=!1)})});0===e.length&&(this.memberRefresh=!1)})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(n.q),c.Mb(n.i),c.Mb(a.pb),c.Mb(n.h),c.Mb(i.m),c.Mb(r.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("router-component",!0)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","groups","displayedColumns","disableMembers","filter","page",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"pageSize","groups","displayedColumns","disableMembers","filter","page"],[1,"mt-5"]],template:function(e,t){1&e&&(c.Hc(0,f,3,3,"h1",0),c.Hc(1,m,3,3,"h1",0),c.Sb(2,"perun-web-apps-refresh-button",1),c.Zb("refresh",(function(){return t.refreshMemberTable()})),c.Rb(),c.Sb(3,"perun-web-apps-immediate-filter",2),c.Zb("filter",(function(e){return t.memberFilter(e)})),c.Rb(),c.Hc(4,h,1,0,"mat-spinner",3),c.Hc(5,g,1,6,"perun-web-apps-groups-list",4),c.Hc(6,A,8,6,"div",5)),2&e&&(c.kc("ngIf",t.showPrincipal),c.Ab(1),c.kc("ngIf",!t.showPrincipal),c.Ab(2),c.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),c.Ab(1),c.kc("ngIf",t.memberRefresh),c.Ab(1),c.kc("ngIf",!t.memberRefresh),c.Ab(1),c.kc("ngIf",!t.showPrincipal))},directives:[o.t,b.a,l.a,u.c,p.a],pipes:[d.d],styles:[""]}),e})()},"Q/gj":function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var i=s("Ssnw"),n=s("EM62"),a=s("sEIs"),c=s("KZIX"),r=s("2kYt"),o=s("ZfaE"),b=s("bdug"),l=s("s2Ay");function u(e,t){1&e&&(n.Jc(0),n.ec(1,"translate")),2&e&&n.Lc(" ",n.fc(1,1,"ADMIN_USER.ENTITY")," ")}function p(e,t){if(1&e&&n.Nb(0,"app-one-entity-attribute-page",5),2&e){const e=n.dc();n.kc("entityId",e.userId)("entity","user")}}function d(e,t){1&e&&(n.Jc(0),n.ec(1,"translate"),n.ec(2,"translate")),2&e&&n.Mc(" ",n.fc(1,2,"ADMIN_USER.ENTITY")," - ",n.fc(2,4,"FACILITY_DETAIL.ENTITY")," ")}function f(e,t){if(1&e&&n.Nb(0,"app-two-entity-attribute-page",6),2&e){const e=n.dc(2);n.kc("firstEntity","user")("firstEntityId",e.userId)("secondEntity","facility")}}function m(e,t){1&e&&(n.Sb(0,"mat-tab"),n.Hc(1,d,3,6,"ng-template",2),n.Hc(2,f,1,3,"ng-template",3),n.Rb())}let h=(()=>{class e{constructor(e,t,s){this.route=e,this.store=t,this.authResolver=s}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=e.userId,void 0===this.userId&&(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(a.a),n.Mb(i.m),n.Mb(i.h))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(e,t){2&e&&n.Eb("router-component",!0)},decls:8,vars:4,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(n.Sb(0,"h1",0),n.Jc(1),n.ec(2,"translate"),n.Rb(),n.Sb(3,"mat-tab-group"),n.Sb(4,"mat-tab",1),n.Hc(5,u,2,3,"ng-template",2),n.Hc(6,p,1,2,"ng-template",3),n.Rb(),n.Hc(7,m,3,0,"mat-tab",4),n.Rb()),2&e&&(n.Ab(1),n.Kc(n.fc(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),n.Ab(6),n.kc("ngIf",t.userFacilityAttAuth))},directives:[c.c,c.a,c.d,c.b,r.t,o.a,b.a],pipes:[l.d],styles:[""]}),e})()},QOlj:function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var i=s("X2Q7"),n=s("FlRo"),a=s("Ssnw"),c=s("nyAh"),r=s("8clQ"),o=s("+0js"),b=s("EM62"),l=s("sEIs"),u=s("OZ4H"),p=s("2kYt"),d=s("ZG5M"),f=s("Meci"),m=s("PBFl"),h=s("bFHC"),S=s("s2Ay");function g(e,t){1&e&&b.Nb(0,"th",12)}function R(e,t){if(1&e&&(b.Sb(0,"td",13),b.Jc(1),b.Rb()),2&e){const e=t.$implicit;b.Ab(1),b.Lc(" ",e.displayName,": ")}}function I(e,t){1&e&&b.Nb(0,"th",12)}function E(e,t){if(1&e){const e=b.Tb();b.Sb(0,"td",14),b.Jc(1),b.Sb(2,"button",15),b.Zb("click",(function(){return b.xc(e),b.dc(2).changeEmail()})),b.Sb(3,"mat-icon"),b.Jc(4,"edit"),b.Rb(),b.Rb(),b.Rb()}if(2&e){const e=t.$implicit;b.Ab(1),b.Lc(" ",e.value," ")}}function A(e,t){1&e&&b.Nb(0,"tr",16)}function v(e,t){if(1&e&&(b.Sb(0,"div",2),b.Sb(1,"mat-card",3),b.Sb(2,"mat-card-header"),b.Sb(3,"mat-card-title"),b.Sb(4,"h1",4),b.Jc(5),b.ec(6,"translate"),b.Rb(),b.Rb(),b.Rb(),b.Sb(7,"mat-card-content"),b.Sb(8,"table",5),b.Qb(9,6),b.Hc(10,g,1,0,"th",7),b.Hc(11,R,2,1,"td",8),b.Pb(),b.Qb(12,9),b.Hc(13,I,1,0,"th",7),b.Hc(14,E,5,1,"td",10),b.Pb(),b.Hc(15,A,1,0,"tr",11),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e){const e=b.dc();b.Ab(5),b.Kc(b.fc(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),b.Ab(3),b.kc("dataSource",e.mailDataSource),b.Ab(7),b.kc("matRowDefColumns",e.displayedColumns)}}let O=(()=>{class e{constructor(e,t,s,i,n){this.userService=e,this.attributeService=t,this.storeService=s,this.route=i,this.dialog=n,this.navItems=[],this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(e=>{void 0!==e.userId?this.userService.getUserById(e.userId).subscribe(e=>{this.user=e,this.initNavItems()}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,c.a.USER_DEF_PREFERRED_MAIL).subscribe(e=>{this.preferredMail=e,this.handleMailNotDefined(),this.mailDataSource=new n.o([this.preferredMail]),this.initNavItems()}))})}initNavItems(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-group",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-group",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"},{cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}changeEmail(){const e=Object(r.q)();e.width="350px",e.data={userId:this.userID},this.dialog.open(o.c,e).afterClosed().subscribe(e=>{e&&this.attributeService.getUserAttributeByName(this.userID,c.a.USER_DEF_PREFERRED_MAIL).subscribe(e=>{this.preferredMail=e,this.handleMailNotDefined(),this.mailDataSource=new n.o([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:Object(r.v)(c.a.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:Object("-")})}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(i.q),b.Mb(i.c),b.Mb(a.m),b.Mb(l.a),b.Mb(u.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&b.Eb("router-component",!0)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(e,t){1&e&&(b.Hc(0,v,16,5,"div",0),b.Nb(1,"perun-web-apps-menu-buttons-field",1)),2&e&&(b.kc("ngIf",t.inMyProfile),b.Ab(1),b.kc("items",t.navItems)("size","small"))},directives:[p.t,d.a,f.a,f.f,f.m,f.d,n.n,n.c,n.i,n.b,n.m,n.h,n.a,m.b,h.a,n.l],pipes:[S.d],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),e})()},S5du:function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var i=s("X2Q7"),n=s("Ssnw"),a=s("iyZ4"),c=s("EM62"),r=s("sEIs"),o=s("2kYt"),b=s("0XDM"),l=s("A8Ay"),u=s("csyo"),p=s("qySP"),d=s("s2Ay");function f(e,t){1&e&&(c.Sb(0,"h1",6),c.Jc(1),c.ec(2,"translate"),c.Rb()),2&e&&(c.Ab(1),c.Lc(" ",c.fc(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function m(e,t){1&e&&(c.Sb(0,"h1",6),c.Jc(1),c.ec(2,"translate"),c.Rb()),2&e&&(c.Ab(1),c.Lc(" ",c.fc(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function h(e,t){1&e&&c.Nb(0,"mat-spinner",7)}function S(e,t){if(1&e){const e=c.Tb();c.Sb(0,"perun-web-apps-vos-list",8),c.Zb("page",(function(t){return c.xc(e),c.dc().memberPageChanged(t)})),c.Rb()}if(2&e){const e=c.dc();c.kc("displayedColumns",e.displayedColumns)("pageSize",e.memberPageSize)("filterValue",e.memberFilterValue)("vos",e.vosWhereIsMember)}}function g(e,t){1&e&&c.Nb(0,"mat-spinner",7)}function R(e,t){if(1&e){const e=c.Tb();c.Sb(0,"perun-web-apps-vos-list",8),c.Zb("page",(function(t){return c.xc(e),c.dc(2).adminPageChanged(t)})),c.Rb()}if(2&e){const e=c.dc(2);c.kc("displayedColumns",e.displayedColumns)("pageSize",e.adminPageSize)("filterValue",e.adminFilterValue)("vos",e.vosWhereIsAdmin)}}function I(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",9),c.Sb(1,"h1",6),c.Jc(2),c.ec(3,"translate"),c.Rb(),c.Sb(4,"perun-web-apps-refresh-button",1),c.Zb("refresh",(function(){return c.xc(e),c.dc().refreshAdminTable()})),c.Rb(),c.Sb(5,"perun-web-apps-immediate-filter",2),c.Zb("filter",(function(t){return c.xc(e),c.dc().applyAdminFilter(t)})),c.Rb(),c.Hc(6,g,1,0,"mat-spinner",3),c.Hc(7,R,1,4,"perun-web-apps-vos-list",4),c.Rb()}if(2&e){const e=c.dc();c.Ab(2),c.Kc(c.fc(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),c.Ab(3),c.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),c.Ab(1),c.kc("ngIf",e.adminRefresh),c.Ab(1),c.kc("ngIf",!e.adminRefresh)}}let E=(()=>{class e{constructor(e,t,s,i,n){this.usersService=e,this.authResolver=t,this.tableConfigService=s,this.store=i,this.route=n,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=a.db,this.memberTableId=a.eb}ngOnInit(){this.adminPageSize=this.tableConfigService.getTablePageSize(this.adminTableId),this.memberPageSize=this.tableConfigService.getTablePageSize(this.memberTableId),!0===(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(e=>this.userId=e.userId),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(e=>{this.vosWhereIsMember=e,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(e=>{this.vosWhereIsAdmin=e,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(e){this.memberFilterValue=e}adminPageChanged(e){this.adminPageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.adminTableId,e.pageSize)}memberPageChanged(e){this.memberPageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.memberTableId,e.pageSize)}applyAdminFilter(e){this.adminFilterValue=e}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(i.q),c.Mb(n.h),c.Mb(a.pb),c.Mb(n.m),c.Mb(r.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("router-component",!0)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","pageSize","filterValue","vos","page",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","pageSize","filterValue","vos","page"],[1,"mt-5"]],template:function(e,t){1&e&&(c.Hc(0,f,3,3,"h1",0),c.Hc(1,m,3,3,"h1",0),c.Sb(2,"perun-web-apps-refresh-button",1),c.Zb("refresh",(function(){return t.refreshMemberTable()})),c.Rb(),c.Sb(3,"perun-web-apps-immediate-filter",2),c.Zb("filter",(function(e){return t.applyMemberFilter(e)})),c.Rb(),c.Hc(4,h,1,0,"mat-spinner",3),c.Hc(5,S,1,4,"perun-web-apps-vos-list",4),c.Hc(6,I,8,6,"div",5)),2&e&&(c.kc("ngIf",t.isMyProfile),c.Ab(1),c.kc("ngIf",!t.isMyProfile),c.Ab(2),c.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),c.Ab(1),c.kc("ngIf",t.memberRefresh),c.Ab(1),c.kc("ngIf",!t.memberRefresh),c.Ab(1),c.kc("ngIf",!t.isMyProfile))},directives:[o.t,b.a,l.a,u.c,p.a],pipes:[d.d],styles:[""]}),e})()},faZ6:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("EM62"),n=s("ma6z");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Gb({type:e,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&i.Eb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&i.Nb(0,"app-animated-router-outlet")},directives:[n.a],styles:[""]}),e})()},m1kt:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var i=s("X2Q7"),n=s("EM62"),a=s("sEIs"),c=s("2kYt"),r=s("csyo"),o=s("ZG5M");function b(e,t){1&e&&n.Nb(0,"mat-spinner",2)}function l(e,t){if(1&e&&(n.Sb(0,"div"),n.Nb(1,"perun-web-apps-menu-buttons-field",3),n.Rb()),2&e){const e=n.dc();n.Ab(1),n.kc("items",e.navItems)("size","small")}}let u=(()=>{class e{constructor(e,t){this.route=e,this.userManager=t,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(e=>{this.userManager.getUserById(e.userId).subscribe(e=>{this.isServiceUser=e.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")?this.navItems.push(this.isServiceUser?{cssIcon:"perun-service-identity",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}):this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings2",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(a.a),n.Mb(i.q))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&n.Eb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(n.Hc(0,b,1,0,"mat-spinner",0),n.Hc(1,l,2,2,"div",1)),2&e&&(n.kc("ngIf",t.loading),n.Ab(1),n.kc("ngIf",!t.loading))},directives:[c.t,r.c,o.a],styles:[""]}),e})()},oXY0:function(e,t,s){"use strict";s.d(t,"a",(function(){return Fe}));var i=s("X2Q7"),n=s("Ssnw"),a=s("EM62"),c=s("sEIs"),r=s("2kYt"),o=s("csyo"),b=s("3Uyd"),l=s("bFHC"),u=s("Meci"),p=s("qySP"),d=s("NC8S"),f=s("K9kF"),m=s("23RZ"),h=s("w+DT"),S=s("nz2m"),g=s("s2Ay");function R(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function I(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function E(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.SELF_VOS_ADMIN")," "))}function A(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.SELF_VOS")," "))}function v(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.SELF_IDENTITIES_ADMIN")," "))}function O(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.SELF_IDENTITIES")," "))}const N=function(){return["user","id","name"]};function M(e,t){if(1&e&&(a.Sb(0,"div",11),a.Hc(1,v,3,3,"div",2),a.Hc(2,O,3,3,"div",2),a.Nb(3,"app-users-list",12),a.Rb()),2&e){const e=a.dc(4);a.Ab(1),a.kc("ngIf",!e.showDescription),a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("users",e.users)("disableRouting",!0)("displayedColumns",a.oc(5,N))}}const T=function(){return["id","name","shortName"]};function k(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,E,3,3,"div",2),a.Hc(2,A,3,3,"div",2),a.Nb(3,"perun-web-apps-vos-list",9),a.Hc(4,M,4,6,"div",10),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",!e.showDescription),a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(5,T))("vos",e.vos),a.Ab(1),a.kc("ngIf",e.users.length)}}function y(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getSelfData()})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",7),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,I,1,0,"mat-spinner",1),a.Hc(8,k,5,6,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.SELF")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function P(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function U(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.GROUPADMIN_GROUPS")," "))}const C=function(){return["id","vo","name","description"]};function L(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,U,3,3,"div",2),a.Nb(2,"perun-web-apps-groups-list",14),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("groups",e.groups)("displayedColumns",a.oc(3,C))}}function H(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getAdminGroupsAndVos()})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",13),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,P,1,0,"mat-spinner",1),a.Hc(8,L,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.GROUPADMIN")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function w(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function D(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.GROUPOBSERVER_GROUPS")," "))}const F=function(){return["id","recent","vo","name","description"]};function V(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,D,3,3,"div",2),a.Nb(2,"perun-web-apps-groups-list",14),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("groups",e.groups)("displayedColumns",a.oc(3,F))}}function _(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getGroupsAndVos("GROUPOBSERVER")})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",13),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,w,1,0,"mat-spinner",1),a.Hc(8,V,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.GROUPOBSERVER")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function x(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function G(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.VOADMIN_VOS")," "))}function z(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,G,3,3,"div",2),a.Nb(2,"perun-web-apps-vos-list",9),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,T))("vos",e.vos)}}function B(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getAdminVos()})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",15),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,x,1,0,"mat-spinner",1),a.Hc(8,z,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.VOADMIN")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function J(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function Z(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.VOOBSERVER_VOS")," "))}function Y(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,Z,3,3,"div",2),a.Nb(2,"perun-web-apps-vos-list",9),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,T))("vos",e.vos)}}function K(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){a.xc(e);const t=a.dc(2);return t.getVos(t.roles.get("VOOBSERVER").get("Vo"))})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",15),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,J,1,0,"mat-spinner",1),a.Hc(8,Y,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.VOOBSERVER")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function W(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function j(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.TRUSTEDFACILITYADMIN_VOS")," "))}function Q(e,t){if(1&e&&(a.Sb(0,"div"),a.Sb(1,"div"),a.Hc(2,j,3,3,"div",2),a.Nb(3,"perun-web-apps-vos-list",9),a.Rb(),a.Rb()),2&e){const e=a.dc(3);a.Ab(2),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,T))("vos",e.vos)}}function q(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){a.xc(e);const t=a.dc(2);return t.getVos(t.roles.get("TRUSTEDFACILITYADMIN").get("Vo"))})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",15),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,W,1,0,"mat-spinner",1),a.Hc(8,Q,4,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.TRUSTEDFACILITYADMIN")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function X(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function $(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.TOPGROUPCREATOR_VOS")," "))}function ee(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,$,3,3,"div",2),a.Nb(2,"perun-web-apps-vos-list",9),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,T))("vos",e.vos)}}function te(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){a.xc(e);const t=a.dc(2);return t.getVos(t.roles.get("TOPGROUPCREATOR").get("Vo"))})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",15),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,X,1,0,"mat-spinner",1),a.Hc(8,ee,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.TOPGROUPCREATOR")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function se(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function ie(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.RESOURCEADMIN_RESOURCES")," "))}const ne=function(){return["id","name","vo","facility","description"]};function ae(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,ie,3,3,"div",2),a.Nb(2,"perun-web-apps-resources-list",17),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("resources",e.resources)("routingVo",!0)("displayedColumns",a.oc(4,ne))}}function ce(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getResourcesData("RESOURCEADMIN")})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",16),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,se,1,0,"mat-spinner",1),a.Hc(8,ae,3,5,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.RESOURCEADMIN")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function re(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function oe(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.RESOURCEOBSERVER_RESOURCES")," "))}function be(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,oe,3,3,"div",2),a.Nb(2,"perun-web-apps-resources-list",17),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("resources",e.resources)("routingVo",!0)("displayedColumns",a.oc(4,ne))}}function le(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getResourcesData("RESOURCEOBSERVER")})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",16),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,re,1,0,"mat-spinner",1),a.Hc(8,be,3,5,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.RESOURCEOBSERVER")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function ue(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function pe(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.RESOURCESELFSERVICE_RESOURCES")," "))}function de(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,pe,3,3,"div",2),a.Nb(2,"perun-web-apps-resources-list",17),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("resources",e.resources)("routingVo",!0)("displayedColumns",a.oc(4,ne))}}function fe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getResourcesData("RESOURCESELFSERVICE")})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",16),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,ue,1,0,"mat-spinner",1),a.Hc(8,de,3,5,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.RESOURCESELFSERVICE")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function me(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function he(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.FACILITYADMIN_FACILITIES")," "))}const Se=function(){return["id","name","description"]};function ge(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,he,3,3,"div",2),a.Nb(2,"perun-web-apps-facilities-list",19),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,Se))("facilities",e.facilities)}}function Re(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getAdminFacilities()})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",18),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,me,1,0,"mat-spinner",1),a.Hc(8,ge,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.FACILITYADMIN")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function Ie(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function Ee(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.FACILITYOBSERVER_FACILITIES")," "))}function Ae(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,Ee,3,3,"div",2),a.Nb(2,"perun-web-apps-facilities-list",19),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,Se))("facilities",e.facilities)}}function ve(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getFacilities("FACILITYOBSERVER")})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",18),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,Ie,1,0,"mat-spinner",1),a.Hc(8,Ae,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.FACILITYOBSERVER")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function Oe(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function Ne(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.SPONSORSHIP_MEMBERS")," "))}const Me=function(){return["checkbox","email","logins","status","groupStatus","organization","type"]};function Te(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,Ne,3,3,"div",2),a.Nb(2,"perun-web-apps-members-list",20),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("members",e.members)("hideColumns",a.oc(3,Me))}}function ke(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){return a.xc(e),a.dc(2).getMembers()})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",7),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,Oe,1,0,"mat-spinner",1),a.Hc(8,Te,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.SPONSORSHIP")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function ye(e,t){1&e&&a.Nb(0,"mat-spinner",3)}function Pe(e,t){1&e&&(a.Sb(0,"div"),a.Jc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Lc(" ",a.fc(2,1,"ROLES.SPONSOR_VOS")," "))}function Ue(e,t){if(1&e&&(a.Sb(0,"div"),a.Hc(1,Pe,3,3,"div",2),a.Nb(2,"perun-web-apps-vos-list",9),a.Rb()),2&e){const e=a.dc(3);a.Ab(1),a.kc("ngIf",e.showDescription),a.Ab(1),a.kc("displayedColumns",a.oc(3,T))("vos",e.vos)}}function Ce(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){a.xc(e);const t=a.dc(2);return t.getVos(t.roles.get("SPONSOR").get("Vo"))})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",7),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Hc(7,ye,1,0,"mat-spinner",1),a.Hc(8,Ue,3,4,"div",2),a.Rb()}if(2&e){const e=a.dc(2);a.Ab(5),a.Kc(a.fc(6,3,"ROLES.SPONSOR")),a.Ab(2),a.kc("ngIf",e.loading),a.Ab(1),a.kc("ngIf",!e.loading)}}function Le(e,t){1&e&&(a.Sb(0,"mat-expansion-panel"),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",7),a.Sb(4,"p",8),a.Jc(5),a.ec(6,"translate"),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.Ab(5),a.Kc(a.fc(6,1,"ROLES.PERUN_ADMIN")))}function He(e,t){if(1&e&&(a.Sb(0,"p",22),a.Jc(1),a.Rb()),2&e){const e=t.$implicit;a.Ab(1),a.Mc("",e[0]," ids: ",e[1],"")}}function we(e,t){if(1&e){const e=a.Tb();a.Sb(0,"mat-expansion-panel",6),a.Zb("opened",(function(){a.xc(e);const s=t.$implicit;return a.dc(2).getInnerKeys(s)})),a.Sb(1,"mat-expansion-panel-header"),a.Sb(2,"mat-panel-title"),a.Nb(3,"mat-icon",7),a.Sb(4,"p",8),a.Jc(5),a.Rb(),a.Rb(),a.Rb(),a.Hc(6,He,2,2,"p",21),a.Rb()}if(2&e){const e=t.$implicit,s=a.dc(2);a.Ab(5),a.Kc(e),a.Ab(1),a.kc("ngForOf",s.currentIds)}}function De(e,t){if(1&e&&(a.Sb(0,"mat-accordion"),a.Hc(1,y,9,5,"mat-expansion-panel",4),a.Hc(2,H,9,5,"mat-expansion-panel",4),a.Hc(3,_,9,5,"mat-expansion-panel",4),a.Hc(4,B,9,5,"mat-expansion-panel",4),a.Hc(5,K,9,5,"mat-expansion-panel",4),a.Hc(6,q,9,5,"mat-expansion-panel",4),a.Hc(7,te,9,5,"mat-expansion-panel",4),a.Hc(8,ce,9,5,"mat-expansion-panel",4),a.Hc(9,le,9,5,"mat-expansion-panel",4),a.Hc(10,fe,9,5,"mat-expansion-panel",4),a.Hc(11,Re,9,5,"mat-expansion-panel",4),a.Hc(12,ve,9,5,"mat-expansion-panel",4),a.Hc(13,ke,9,5,"mat-expansion-panel",4),a.Hc(14,Ce,9,5,"mat-expansion-panel",4),a.Hc(15,Le,7,3,"mat-expansion-panel",2),a.Hc(16,we,7,2,"mat-expansion-panel",5),a.Rb()),2&e){const e=a.dc();a.Ab(1),a.kc("ngIf",e.isSelf),a.Ab(1),a.kc("ngIf",e.isGroupAdmin),a.Ab(1),a.kc("ngIf",e.isGroupObserver),a.Ab(1),a.kc("ngIf",e.isVoAdmin),a.Ab(1),a.kc("ngIf",e.isVoObserver),a.Ab(1),a.kc("ngIf",e.isTrustedFacilityAdmin),a.Ab(1),a.kc("ngIf",e.isTopGroupCreator),a.Ab(1),a.kc("ngIf",e.isResourceAdmin),a.Ab(1),a.kc("ngIf",e.isResourceObserver),a.Ab(1),a.kc("ngIf",e.isResourceSelfService),a.Ab(1),a.kc("ngIf",e.isFacilityAdmin),a.Ab(1),a.kc("ngIf",e.isFacilityObserver),a.Ab(1),a.kc("ngIf",e.hasSponsorship),a.Ab(1),a.kc("ngIf",e.isSponsor),a.Ab(1),a.kc("ngIf",e.isPerunAdmin),a.Ab(1),a.kc("ngForOf",e.roleNames)}}let Fe=(()=>{class e{constructor(e,t,s,i,n,a,c,r,o){this.authzResolverService=e,this.usersManagerService=t,this.vosManagerService=s,this.facilitiesManagerService=i,this.resourcesManagerService=n,this.membersManagerService=a,this.groupsManagerService=c,this.route=r,this.store=o,this.currentIds=[],this.roles=new Map,this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN"],this.roleNames=[],this.groups=[],this.vos=[],this.facilities=[],this.users=[],this.resources=[],this.members=[]}ngOnInit(){this.outerLoading=!0,this.route.parent.params.subscribe(e=>{e.userId?(this.userId=e.userId,this.authzResolverService.getUserRoleNames(this.userId).subscribe(e=>{this.roleNames=e.map(e=>e.toUpperCase()),this.authzResolverService.getUserRoles(this.userId).subscribe(e=>{this.prepareRoles(e)})})):(this.showDescription=!0,this.principal=this.store.getPerunPrincipal(),this.userId=this.principal.userId,this.roleNames=Object.keys(this.principal.roles),this.prepareRoles(this.principal.roles))})}prepareRoles(e){this.roleNames.forEach(t=>{const s=new Map;switch(Object.keys(e[t]).forEach(i=>{s.set(i,e[t][i])}),t){case"SELF":this.isSelf=!0;break;case"GROUPADMIN":this.isGroupAdmin=!0;break;case"VOADMIN":this.isVoAdmin=!0;break;case"RESOURCEADMIN":this.isResourceAdmin=!0;break;case"FACILITYADMIN":this.isFacilityAdmin=!0;break;case"TOPGROUPCREATOR":this.isTopGroupCreator=!0;break;case"SPONSORSHIP":this.hasSponsorship=!0;break;case"SPONSOR":this.isSponsor=!0;break;case"RESOURCESELFSERVICE":this.isResourceSelfService=!0;break;case"VOOBSERVER":this.isVoObserver=!0;break;case"RESOURCEOBSERVER":this.isResourceObserver=!0;break;case"GROUPOBSERVER":this.isGroupObserver=!0;break;case"TRUSTEDFACILITYADMIN":this.isTrustedFacilityAdmin=!0;break;case"FACILITYOBSERVER":this.isFacilityObserver=!0;break;case"PERUNADMIN":this.isPerunAdmin=!0}this.roles.set(t,s)}),this.roleNames=this.roleNames.filter(e=>!this.roleFilter.includes(e)),this.outerLoading=!1}getAdminGroupsAndVos(){this.loading=!0,this.groups=[],this.usersManagerService.getGroupsWhereUserIsAdmin(this.userId).subscribe(e=>{this.groups=e;const t=[...new Set(this.groups.map(e=>e.voId))];this.getVos(t)})}getVos(e){this.loading=!0,this.vos=[],this.vosManagerService.getVosByIds(e).subscribe(e=>{this.vos=e,this.loading=!1})}getInnerKeys(e){if(this.roles.get(e)){const t=this.roles.get(e).entries(),s=[];let i=t.next().value;for(;i;)s.push(i),i=t.next().value;this.currentIds=s}else this.currentIds=[]}getAdminVos(){this.loading=!0,this.vos=[],this.usersManagerService.getVosWhereUserIsAdmin(this.userId).subscribe(e=>{this.vos=e,this.loading=!1})}getAdminFacilities(){this.loading=!0,this.facilities=[],this.facilitiesManagerService.getFacilitiesWhereUserIsAdmin(this.userId).subscribe(e=>{this.facilities=e.map(e=>({facility:e})),this.loading=!1})}getSelfData(){this.loading=!0,this.vos=[],this.users=[],this.usersManagerService.getVosWhereUserIsMember(this.userId).subscribe(e=>{this.vos=e;const t=this.roles.get("SELF").get("User");t?this.usersManagerService.getUsersByIds(t).subscribe(e=>{this.users=e,this.loading=!1}):this.loading=!1})}getResourcesData(e){this.loading=!0;const t=this.roles.get(e).get("Resource");this.vos=[],this.facilities=[],this.resources=[],this.resourcesManagerService.getRichResourcesByIds(t).subscribe(e=>{this.resources=e,this.vos=this.resources.map(e=>e.vo).filter((e,t,s)=>s.indexOf(e)===t),this.facilities=this.resources.map(e=>({facility:e.facility})).filter((e,t,s)=>s.indexOf(e)===t),this.loading=!1})}getMembers(){this.loading=!0;const e=this.roles.get("SPONSORSHIP").get("Member");this.members=[],this.membersManagerService.getRichMembersByIds(e).subscribe(e=>{this.members=e,this.loading=!1})}getGroupsAndVos(e){this.loading=!0;const t=this.roles.get(e).get("Vo"),s=this.roles.get(e).get("Group");this.vos=[],this.groups=[],this.groupsManagerService.getGroupsByIds(s).subscribe(e=>{this.groups=e,this.vosManagerService.getVosByIds(t).subscribe(e=>{this.vos=e,this.loading=!1})})}getFacilities(e){this.loading=!0,this.facilities=[];const t=this.roles.get(e).get("Facility");this.facilitiesManagerService.getFacilitiesByIds(t).subscribe(e=>{this.facilities=e.map(e=>({facility:e})),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(i.d),a.Mb(i.q),a.Mb(i.r),a.Mb(i.g),a.Mb(i.m),a.Mb(i.i),a.Mb(i.h),a.Mb(c.a),a.Mb(n.m))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Eb("router-component",!0)},decls:5,vars:5,consts:[[1,"page-subtitle","d-flex"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"opened",4,"ngIf"],[3,"opened",4,"ngFor","ngForOf"],[3,"opened"],["mat-card-avatar","","svgIcon","perun-user-dark",1,"mr-2"],[1,"mt-auto","mb-auto"],[3,"displayedColumns","vos"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[3,"users","disableRouting","displayedColumns"],["mat-card-avatar","","svgIcon","perun-group-black",1,"mr-2"],[3,"groups","displayedColumns"],["mat-card-avatar","","svgIcon","perun-vo-black",1,"mr-2"],["mat-card-avatar","","svgIcon","perun-resource-black",1,"mr-2"],[3,"resources","routingVo","displayedColumns"],["mat-card-avatar","","svgIcon","perun-facility-black",1,"mr-2"],[3,"displayedColumns","facilities"],[3,"members","hideColumns"],["class","role-content",4,"ngFor","ngForOf"],[1,"role-content"]],template:function(e,t){1&e&&(a.Sb(0,"h1",0),a.Jc(1),a.ec(2,"translate"),a.Rb(),a.Hc(3,R,1,0,"mat-spinner",1),a.Hc(4,De,17,16,"mat-accordion",2)),2&e&&(a.Ab(1),a.Kc(a.fc(2,3,"ROLES.TITLE")),a.Ab(2),a.kc("ngIf",t.outerLoading),a.Ab(1),a.kc("ngIf",!t.outerLoading))},directives:[r.t,o.c,b.a,r.s,b.c,b.g,b.h,l.a,u.c,p.a,d.a,f.a,m.a,h.a,S.a],pipes:[g.d],styles:[".role-content[_ngcontent-%COMP%]{overflow:auto;overflow-y:hidden}.info-icon[_ngcontent-%COMP%]{vertical-align:middle;transform:scale(.8)}"]}),e})()},zrcO:function(e,t,s){"use strict";s.r(t),s.d(t,"UsersModule",(function(){return ue}));var i=s("2kYt"),n=s("sEIs"),a=s("S5du"),c=s("BAI5"),r=s("faZ6"),o=s("m1kt"),b=s("Q/gj"),l=s("HHEo"),u=s("8clQ"),p=s("iyZ4"),d=s("EM62"),f=s("29Wa"),m=s("R7+U"),h=s("mFH5"),S=s("s2Ay");function g(e,t){if(1&e&&(d.Sb(0,"mat-option",5),d.Jc(1),d.Rb()),2&e){const e=t.$implicit;d.kc("value",e),d.Ab(1),d.Lc(" ",e," ")}}let R=(()=>{class e{constructor(e){this.guiConfigService=e,this.tablePageSizeOptions=u.b}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(p.c)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(p.c,this.preferredTablePageSize)}}return e.\u0275fac=function(t){return new(t||e)(d.Mb(p.b))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(d.Sb(0,"h1",0),d.Jc(1),d.ec(2,"translate"),d.Rb(),d.Sb(3,"div",1),d.Sb(4,"mat-form-field",2),d.Sb(5,"mat-label"),d.Jc(6),d.ec(7,"translate"),d.Rb(),d.Sb(8,"mat-select",3),d.Zb("valueChange",(function(e){return t.preferredTablePageSize=e}))("valueChange",(function(){return t.updatePreferredTablePageSize()})),d.Hc(9,g,2,2,"mat-option",4),d.Rb(),d.Rb(),d.Rb()),2&e&&(d.Ab(1),d.Kc(d.fc(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),d.Ab(5),d.Kc(d.fc(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),d.Ab(2),d.kc("value",t.preferredTablePageSize),d.Ab(1),d.kc("ngForOf",t.tablePageSizeOptions))},directives:[f.c,f.g,m.a,i.s,h.n],pipes:[S.d],styles:[""]}),e})();var I=s("QOlj"),E=s("4sdY"),A=s("Ssnw"),v=s("EtYo"),O=s("bFHC"),N=s("Y2X+"),M=s("ma6z"),T=s("j+u3");const k=function(){return{color:"black"}},y=function(){return["/myProfile"]};function P(e,t){if(1&e&&(d.Sb(0,"div",1),d.Nb(1,"perun-web-apps-back-button"),d.Sb(2,"div",2),d.Nb(3,"mat-icon",3),d.ec(4,"translate"),d.Sb(5,"div",4),d.Sb(6,"div",5),d.Sb(7,"a",6),d.Jc(8),d.ec(9,"userFullName"),d.Rb(),d.Sb(10,"span",7),d.Jc(11),d.Rb(),d.Rb(),d.Sb(12,"span",8),d.Jc(13),d.ec(14,"translate"),d.ec(15,"translate"),d.Rb(),d.Rb(),d.Rb(),d.Nb(16,"app-animated-router-outlet"),d.Rb()),2&e){const e=d.dc();d.Ab(3),d.lc("matTooltip",d.fc(4,8,"MENU_ITEMS.USER.ENTITY")),d.kc("ngStyle",d.oc(16,k)),d.Ab(4),d.kc("routerLink",d.oc(17,y)),d.Ab(1),d.Lc(" ",d.fc(9,10,e.user)," "),d.Ab(3),d.Lc(" \xa0#",e.user.id," "),d.Ab(2),d.Nc(" ",d.fc(14,12,"MENU_ITEMS.USER.ENTITY"),", ",d.fc(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",e.getUserType()," ")}}let U=(()=>{class e{constructor(e,t,s){this.sideMenuService=e,this.store=t,this.router=s}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(e=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}}return e.\u0275fac=function(t){return new(t||e)(d.Mb(E.a),d.Mb(A.m),d.Mb(n.f))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(e,t){1&e&&d.Hc(0,P,17,18,"div",0),2&e&&d.kc("ngIf",void 0!==t.user)},directives:[i.t,v.a,O.a,N.a,i.w,n.i,M.a],pipes:[S.d,T.a],styles:[""]}),e})();var C=s("oXY0");const L=[{path:"",component:U,children:[{path:"",component:I.a,data:{animation:"UserOverviewPage"}},{path:"attributes",component:b.a,data:{animation:"UserAttributesPage"}},{path:"organizations",component:a.a,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:c.a,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:C.a,data:{animation:"UserRolesPage"}},{path:"settings",component:r.a,children:[{path:"",component:o.a,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:l.c,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:R,data:{animation:"UserAppConfigurationPage"}}]}]}];let H=(()=>{class e{}return e.\u0275mod=d.Kb({type:e}),e.\u0275inj=d.Jb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(L)],n.j]}),e})();var w=s("ulve"),D=s("Cd2c"),F=s("nIj0"),V=s("lQ7A"),_=s("3Uyd"),x=s("PBFl"),G=s("cePI"),z=s("FlRo"),B=s("KZIX"),J=s("QcI7"),Z=s("+Tre"),Y=s("OZ4H"),K=s("W1gw"),W=s("csyo"),j=s("66mq"),Q=s("k8N0"),q=s("gcUQ"),X=s("F1o0"),$=s("zmEM"),ee=s("iAde"),te=s("Meci"),se=s("x9Az"),ie=s("oqI+"),ne=s("S17y"),ae=s("Jb3d"),ce=s("qvOF"),re=s("KoHB"),oe=s("f3iV"),be=s("t47Z"),le=s("PCNd");let ue=(()=>{class e{constructor(e){this.translate=e,e.addLangs(["en","cs"])}}return e.\u0275mod=d.Kb({type:e}),e.\u0275inj=d.Jb({factory:function(t){return new(t||e)(d.Wb(S.e))},imports:[[i.c,H,w.b,D.c,f.e,F.B,F.l,O.b,V.g,_.b,S.c.forChild({}),x.c,G.c,z.p,B.g,J.e,x.c,Z.b,Y.h,m.b,K.b,W.b,j.b,N.b,Q.b,q.g,h.l,X.c,$.b,h.t,ee.b,te.j,se.g,ie.g,te.j,ne.g,ae.c,ce.g,re.a,oe.b,l.d,p.a,be.b,le.a]]}),e})()}}]);