(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[346],{89397:function(w,E){!function(s){"use strict";function c(H,Q){return Q.forEach(function(nt){nt&&"string"!=typeof nt&&!Array.isArray(nt)&&Object.keys(nt).forEach(function(tt){if("default"!==tt&&!(tt in H)){var V=Object.getOwnPropertyDescriptor(nt,tt);Object.defineProperty(H,tt,V.get?V:{enumerable:!0,get:function(){return nt[tt]}})}})}),Object.freeze(H)}var tt,nt,x={exports:{}};tt="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,nt=function(V){var mt,St,D=void 0!==(V=V||{})?V:{};D.ready=new Promise(function(b,k){mt=b,St=k});var Et,Mt={};for(Et in D)D.hasOwnProperty(Et)&&(Mt[Et]=D[Et]);var wt,Bt,jt="./this.program",ft="";"undefined"!=typeof document&&document.currentScript&&(ft=document.currentScript.src),tt&&(ft=tt),ft=0!==ft.indexOf("blob:")?ft.substr(0,ft.replace(/[?#].*/,"").lastIndexOf("/")+1):"",wt=function(b){var k=new XMLHttpRequest;return k.open("GET",b,!1),k.send(null),k.responseText},Bt=function(b,k,B){var it=new XMLHttpRequest;it.open("GET",b,!0),it.responseType="arraybuffer",it.onload=function(){200==it.status||0==it.status&&it.response?k(it.response):B()},it.onerror=B,it.send(null)};var _e,ce=D.print||console.log.bind(console),he=D.printErr||console.warn.bind(console);for(Et in Mt)Mt.hasOwnProperty(Et)&&(D[Et]=Mt[Et]);Mt=null,D.thisProgram&&(jt=D.thisProgram),D.wasmBinary&&(_e=D.wasmBinary),"object"!=typeof WebAssembly&&mi("no native wasm support detected");var qe,ke=!1;function It(b,k){b||mi("Assertion failed: "+k)}var Ve,Ge,an,xe,Cn,$t="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Ut(b,k,B){for(var it=k+B,ut=k;b[ut]&&!(ut>=it);)++ut;if(ut-k>16&&b.subarray&&$t)return $t.decode(b.subarray(k,ut));for(var yt="";k<ut;){var Ot=b[k++];if(128&Ot){var Zt=63&b[k++];if(192!=(224&Ot)){var ee=63&b[k++];if((Ot=224==(240&Ot)?(15&Ot)<<12|Zt<<6|ee:(7&Ot)<<18|Zt<<12|ee<<6|63&b[k++])<65536)yt+=String.fromCharCode(Ot);else{var De=Ot-65536;yt+=String.fromCharCode(55296|De>>10,56320|1023&De)}}else yt+=String.fromCharCode((31&Ot)<<6|Zt)}else yt+=String.fromCharCode(Ot)}return yt}function Jt(b,k){return b?Ut(an,b,k):""}function ue(b,k,B,it){if(!(it>0))return 0;for(var ut=B,yt=B+it-1,Ot=0;Ot<b.length;++Ot){var Zt=b.charCodeAt(Ot);if(Zt>=55296&&Zt<=57343&&(Zt=65536+((1023&Zt)<<10)|1023&b.charCodeAt(++Ot)),Zt<=127){if(B>=yt)break;k[B++]=Zt}else if(Zt<=2047){if(B+1>=yt)break;k[B++]=192|Zt>>6,k[B++]=128|63&Zt}else if(Zt<=65535){if(B+2>=yt)break;k[B++]=224|Zt>>12,k[B++]=128|Zt>>6&63,k[B++]=128|63&Zt}else{if(B+3>=yt)break;k[B++]=240|Zt>>18,k[B++]=128|Zt>>12&63,k[B++]=128|Zt>>6&63,k[B++]=128|63&Zt}}return k[B]=0,B-ut}function Se(b){for(var k=0,B=0;B<b.length;++B){var it=b.charCodeAt(B);it>=55296&&it<=57343&&(it=65536+((1023&it)<<10)|1023&b.charCodeAt(++B)),it<=127?++k:k+=it<=2047?2:it<=65535?3:4}return k}function Ce(b,k){return b%k>0&&(b+=k-b%k),b}function Tt(b){Ve=b,D.HEAP8=Ge=new Int8Array(b),D.HEAP16=new Int16Array(b),D.HEAP32=xe=new Int32Array(b),D.HEAPU8=an=new Uint8Array(b),D.HEAPU16=new Uint16Array(b),D.HEAPU32=new Uint32Array(b),D.HEAPF32=new Float32Array(b),D.HEAPF64=Cn=new Float64Array(b)}var Yt,oe=[],fe=[],qt=[];var fi=0,Ei=null;function Bi(b){fi++,D.monitorRunDependencies&&D.monitorRunDependencies(fi)}function Fi(b){if(fi--,D.monitorRunDependencies&&D.monitorRunDependencies(fi),0==fi&&Ei){var k=Ei;Ei=null,k()}}function mi(b){D.onAbort&&D.onAbort(b),he(b="Aborted("+b+")"),ke=!0,b+=". Build with -s ASSERTIONS=1 for more info.";var k=new WebAssembly.RuntimeError(b);throw St(k),k}D.preloadedImages={},D.preloadedAudios={};var tn;function Ee(b){return b.startsWith("data:application/octet-stream;base64,")}function yi(b){try{if(b==tn&&_e)return new Uint8Array(_e);throw"both async and sync fetching of the wasm failed"}catch(k){mi(k)}}Ee(tn="expatlib.wasm")||(tn=function dt(b){return D.locateFile?D.locateFile(b,ft):ft+b}(tn));var $e,ln,En={11694:function(b){var k=D.getCache(D.CExpatJS)[b];if(!k.hasOwnProperty("startElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::startElement.";k.startElement()},11912:function(b){var k=D.getCache(D.CExpatJS)[b];if(!k.hasOwnProperty("endElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::endElement.";k.endElement()},12124:function(b){var k=D.getCache(D.CExpatJS)[b];if(!k.hasOwnProperty("characterData"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::characterData.";k.characterData()}};function gi(b){for(;b.length>0;){var k=b.shift();if("function"!=typeof k){var B=k.func;"number"==typeof B?void 0===k.arg?Dn(B)():Dn(B)(k.arg):B(void 0===k.arg?null:k.arg)}else k(D)}}function Dn(b){return Yt.get(b)}var be={splitPath:function(b){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(b).slice(1)},normalizeArray:function(b,k){for(var B=0,it=b.length-1;it>=0;it--){var ut=b[it];"."===ut?b.splice(it,1):".."===ut?(b.splice(it,1),B++):B&&(b.splice(it,1),B--)}if(k)for(;B;B--)b.unshift("..");return b},normalize:function(b){var k="/"===b.charAt(0),B="/"===b.substr(-1);return!(b=be.normalizeArray(b.split("/").filter(function(it){return!!it}),!k).join("/"))&&!k&&(b="."),b&&B&&(b+="/"),(k?"/":"")+b},dirname:function(b){var k=be.splitPath(b),B=k[0],it=k[1];return B||it?(it&&(it=it.substr(0,it.length-1)),B+it):"."},basename:function(b){if("/"===b)return"/";var k=(b=(b=be.normalize(b)).replace(/\/$/,"")).lastIndexOf("/");return-1===k?b:b.substr(k+1)},extname:function(b){return be.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return be.normalize(b.join("/"))},join2:function(b,k){return be.normalize(b+"/"+k)}};var Vn={resolve:function(){for(var b="",k=!1,B=arguments.length-1;B>=-1&&!k;B--){var it=B>=0?arguments[B]:A.cwd();if("string"!=typeof it)throw new TypeError("Arguments to path.resolve must be strings");if(!it)return"";b=it+"/"+b,k="/"===it.charAt(0)}return(k?"/":"")+(b=be.normalizeArray(b.split("/").filter(function(ut){return!!ut}),!k).join("/"))||"."},relative:function(b,k){function B(De){for(var ze=0;ze<De.length&&""===De[ze];ze++);for(var sn=De.length-1;sn>=0&&""===De[sn];sn--);return ze>sn?[]:De.slice(ze,sn-ze+1)}b=Vn.resolve(b).substr(1),k=Vn.resolve(k).substr(1);for(var it=B(b.split("/")),ut=B(k.split("/")),yt=Math.min(it.length,ut.length),Ot=yt,Zt=0;Zt<yt;Zt++)if(it[Zt]!==ut[Zt]){Ot=Zt;break}var ee=[];for(Zt=Ot;Zt<it.length;Zt++)ee.push("..");return(ee=ee.concat(ut.slice(Ot))).join("/")}},un={ttys:[],init:function(){},shutdown:function(){},register:function(b,k){un.ttys[b]={input:[],output:[],ops:k},A.registerDevice(b,un.stream_ops)},stream_ops:{open:function(b){var k=un.ttys[b.node.rdev];if(!k)throw new A.ErrnoError(43);b.tty=k,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,k,B,it,ut){if(!b.tty||!b.tty.ops.get_char)throw new A.ErrnoError(60);for(var yt=0,Ot=0;Ot<it;Ot++){var Zt;try{Zt=b.tty.ops.get_char(b.tty)}catch(ee){throw new A.ErrnoError(29)}if(void 0===Zt&&0===yt)throw new A.ErrnoError(6);if(null==Zt)break;yt++,k[B+Ot]=Zt}return yt&&(b.node.timestamp=Date.now()),yt},write:function(b,k,B,it,ut){if(!b.tty||!b.tty.ops.put_char)throw new A.ErrnoError(60);try{for(var yt=0;yt<it;yt++)b.tty.ops.put_char(b.tty,k[B+yt])}catch(Ot){throw new A.ErrnoError(29)}return it&&(b.node.timestamp=Date.now()),yt}},default_tty_ops:{get_char:function(b){if(!b.input.length){var k=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(k=window.prompt("Input: "))&&(k+="\n"):"function"==typeof readline&&null!==(k=readline())&&(k+="\n"),!k)return null;b.input=de(k,!0)}return b.input.shift()},put_char:function(b,k){null===k||10===k?(ce(Ut(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(ce(Ut(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,k){null===k||10===k?(he(Ut(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(he(Ut(b.output,0)),b.output=[])}}};var $={ops_table:null,mount:function(b){return $.createNode(null,"/",16895,0)},createNode:function(b,k,B,it){if(A.isBlkdev(B)||A.isFIFO(B))throw new A.ErrnoError(63);$.ops_table||($.ops_table={dir:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,lookup:$.node_ops.lookup,mknod:$.node_ops.mknod,rename:$.node_ops.rename,unlink:$.node_ops.unlink,rmdir:$.node_ops.rmdir,readdir:$.node_ops.readdir,symlink:$.node_ops.symlink},stream:{llseek:$.stream_ops.llseek}},file:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:{llseek:$.stream_ops.llseek,read:$.stream_ops.read,write:$.stream_ops.write,allocate:$.stream_ops.allocate,mmap:$.stream_ops.mmap,msync:$.stream_ops.msync}},link:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,readlink:$.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:A.chrdev_stream_ops}});var ut=A.createNode(b,k,B,it);return A.isDir(ut.mode)?(ut.node_ops=$.ops_table.dir.node,ut.stream_ops=$.ops_table.dir.stream,ut.contents={}):A.isFile(ut.mode)?(ut.node_ops=$.ops_table.file.node,ut.stream_ops=$.ops_table.file.stream,ut.usedBytes=0,ut.contents=null):A.isLink(ut.mode)?(ut.node_ops=$.ops_table.link.node,ut.stream_ops=$.ops_table.link.stream):A.isChrdev(ut.mode)&&(ut.node_ops=$.ops_table.chrdev.node,ut.stream_ops=$.ops_table.chrdev.stream),ut.timestamp=Date.now(),b&&(b.contents[k]=ut,b.timestamp=ut.timestamp),ut},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage:function(b,k){var B=b.contents?b.contents.length:0;if(!(B>=k)){k=Math.max(k,B*(B<1048576?2:1.125)>>>0),0!=B&&(k=Math.max(k,256));var ut=b.contents;b.contents=new Uint8Array(k),b.usedBytes>0&&b.contents.set(ut.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,k){if(b.usedBytes!=k)if(0==k)b.contents=null,b.usedBytes=0;else{var B=b.contents;b.contents=new Uint8Array(k),B&&b.contents.set(B.subarray(0,Math.min(k,b.usedBytes))),b.usedBytes=k}},node_ops:{getattr:function(b){var k={};return k.dev=A.isChrdev(b.mode)?b.id:1,k.ino=b.id,k.mode=b.mode,k.nlink=1,k.uid=0,k.gid=0,k.rdev=b.rdev,k.size=A.isDir(b.mode)?4096:A.isFile(b.mode)?b.usedBytes:A.isLink(b.mode)?b.link.length:0,k.atime=new Date(b.timestamp),k.mtime=new Date(b.timestamp),k.ctime=new Date(b.timestamp),k.blksize=4096,k.blocks=Math.ceil(k.size/k.blksize),k},setattr:function(b,k){void 0!==k.mode&&(b.mode=k.mode),void 0!==k.timestamp&&(b.timestamp=k.timestamp),void 0!==k.size&&$.resizeFileStorage(b,k.size)},lookup:function(b,k){throw A.genericErrors[44]},mknod:function(b,k,B,it){return $.createNode(b,k,B,it)},rename:function(b,k,B){if(A.isDir(b.mode)){var it;try{it=A.lookupNode(k,B)}catch(yt){}if(it)for(var ut in it.contents)throw new A.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=B,k.contents[B]=b,k.timestamp=b.parent.timestamp,b.parent=k},unlink:function(b,k){delete b.contents[k],b.timestamp=Date.now()},rmdir:function(b,k){var B=A.lookupNode(b,k);for(var it in B.contents)throw new A.ErrnoError(55);delete b.contents[k],b.timestamp=Date.now()},readdir:function(b){var k=[".",".."];for(var B in b.contents)!b.contents.hasOwnProperty(B)||k.push(B);return k},symlink:function(b,k,B){var it=$.createNode(b,k,41471,0);return it.link=B,it},readlink:function(b){if(!A.isLink(b.mode))throw new A.ErrnoError(28);return b.link}},stream_ops:{read:function(b,k,B,it,ut){var yt=b.node.contents;if(ut>=b.node.usedBytes)return 0;var Ot=Math.min(b.node.usedBytes-ut,it);if(Ot>8&&yt.subarray)k.set(yt.subarray(ut,ut+Ot),B);else for(var Zt=0;Zt<Ot;Zt++)k[B+Zt]=yt[ut+Zt];return Ot},write:function(b,k,B,it,ut,yt){if(k.buffer===Ge.buffer&&(yt=!1),!it)return 0;var Ot=b.node;if(Ot.timestamp=Date.now(),k.subarray&&(!Ot.contents||Ot.contents.subarray)){if(yt)return Ot.contents=k.subarray(B,B+it),Ot.usedBytes=it,it;if(0===Ot.usedBytes&&0===ut)return Ot.contents=k.slice(B,B+it),Ot.usedBytes=it,it;if(ut+it<=Ot.usedBytes)return Ot.contents.set(k.subarray(B,B+it),ut),it}if($.expandFileStorage(Ot,ut+it),Ot.contents.subarray&&k.subarray)Ot.contents.set(k.subarray(B,B+it),ut);else for(var Zt=0;Zt<it;Zt++)Ot.contents[ut+Zt]=k[B+Zt];return Ot.usedBytes=Math.max(Ot.usedBytes,ut+it),it},llseek:function(b,k,B){var it=k;if(1===B?it+=b.position:2===B&&A.isFile(b.node.mode)&&(it+=b.node.usedBytes),it<0)throw new A.ErrnoError(28);return it},allocate:function(b,k,B){$.expandFileStorage(b.node,k+B),b.node.usedBytes=Math.max(b.node.usedBytes,k+B)},mmap:function(b,k,B,it,ut,yt){if(0!==k)throw new A.ErrnoError(28);if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);var Ot,Zt,ee=b.node.contents;if(2&yt||ee.buffer!==Ve){if((it>0||it+B<ee.length)&&(ee=ee.subarray?ee.subarray(it,it+B):Array.prototype.slice.call(ee,it,it+B)),Zt=!0,!(Ot=function z(b){mi()}()))throw new A.ErrnoError(48);Ge.set(ee,Ot)}else Zt=!1,Ot=ee.byteOffset;return{ptr:Ot,allocated:Zt}},msync:function(b,k,B,it,ut){if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);return 2&ut||$.stream_ops.write(b,k,0,it,B,!1),0}}};var A={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(b,k){if(k=k||{},!(b=Vn.resolve(A.cwd(),b)))return{path:"",node:null};var B={follow_mount:!0,recurse_count:0};for(var it in B)void 0===k[it]&&(k[it]=B[it]);if(k.recurse_count>8)throw new A.ErrnoError(32);for(var ut=be.normalizeArray(b.split("/").filter(function(we){return!!we}),!1),yt=A.root,Ot="/",Zt=0;Zt<ut.length;Zt++){var ee=Zt===ut.length-1;if(ee&&k.parent)break;if(yt=A.lookupNode(yt,ut[Zt]),Ot=be.join2(Ot,ut[Zt]),A.isMountpoint(yt)&&(!ee||ee&&k.follow_mount)&&(yt=yt.mounted.root),!ee||k.follow)for(var De=0;A.isLink(yt.mode);){var ze=A.readlink(Ot);if(Ot=Vn.resolve(be.dirname(Ot),ze),yt=A.lookupPath(Ot,{recurse_count:k.recurse_count}).node,De++>40)throw new A.ErrnoError(32)}}return{path:Ot,node:yt}},getPath:function(b){for(var k;;){if(A.isRoot(b)){var B=b.mount.mountpoint;return k?"/"!==B[B.length-1]?B+"/"+k:B+k:B}k=k?b.name+"/"+k:b.name,b=b.parent}},hashName:function(b,k){for(var B=0,it=0;it<k.length;it++)B=(B<<5)-B+k.charCodeAt(it)|0;return(b+B>>>0)%A.nameTable.length},hashAddNode:function(b){var k=A.hashName(b.parent.id,b.name);b.name_next=A.nameTable[k],A.nameTable[k]=b},hashRemoveNode:function(b){var k=A.hashName(b.parent.id,b.name);if(A.nameTable[k]===b)A.nameTable[k]=b.name_next;else for(var B=A.nameTable[k];B;){if(B.name_next===b){B.name_next=b.name_next;break}B=B.name_next}},lookupNode:function(b,k){var B=A.mayLookup(b);if(B)throw new A.ErrnoError(B,b);for(var it=A.hashName(b.id,k),ut=A.nameTable[it];ut;ut=ut.name_next)if(ut.parent.id===b.id&&ut.name===k)return ut;return A.lookup(b,k)},createNode:function(b,k,B,it){var ut=new A.FSNode(b,k,B,it);return A.hashAddNode(ut),ut},destroyNode:function(b){A.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return 32768==(61440&b)},isDir:function(b){return 16384==(61440&b)},isLink:function(b){return 40960==(61440&b)},isChrdev:function(b){return 8192==(61440&b)},isBlkdev:function(b){return 24576==(61440&b)},isFIFO:function(b){return 4096==(61440&b)},isSocket:function(b){return 49152==(49152&b)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(b){var k=A.flagModes[b];if(void 0===k)throw new Error("Unknown file open mode: "+b);return k},flagsToPermissionString:function(b){var k=["r","w","rw"][3&b];return 512&b&&(k+="w"),k},nodePermissions:function(b,k){return A.ignorePermissions?0:k.includes("r")&&!(292&b.mode)||k.includes("w")&&!(146&b.mode)||k.includes("x")&&!(73&b.mode)?2:0},mayLookup:function(b){return A.nodePermissions(b,"x")||(b.node_ops.lookup?0:2)},mayCreate:function(b,k){try{return A.lookupNode(b,k),20}catch(it){}return A.nodePermissions(b,"wx")},mayDelete:function(b,k,B){var it;try{it=A.lookupNode(b,k)}catch(yt){return yt.errno}var ut=A.nodePermissions(b,"wx");if(ut)return ut;if(B){if(!A.isDir(it.mode))return 54;if(A.isRoot(it)||A.getPath(it)===A.cwd())return 10}else if(A.isDir(it.mode))return 31;return 0},mayOpen:function(b,k){return b?A.isLink(b.mode)?32:A.isDir(b.mode)&&("r"!==A.flagsToPermissionString(k)||512&k)?31:A.nodePermissions(b,A.flagsToPermissionString(k)):44},MAX_OPEN_FDS:4096,nextfd:function(b,k){k=k||A.MAX_OPEN_FDS;for(var B=b=b||0;B<=k;B++)if(!A.streams[B])return B;throw new A.ErrnoError(33)},getStream:function(b){return A.streams[b]},createStream:function(b,k,B){A.FSStream||(A.FSStream=function(){},A.FSStream.prototype={object:{get:function(){return this.node},set:function(Ot){this.node=Ot}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var it=new A.FSStream;for(var ut in b)it[ut]=b[ut];b=it;var yt=A.nextfd(k,B);return b.fd=yt,A.streams[yt]=b,b},closeStream:function(b){A.streams[b]=null},chrdev_stream_ops:{open:function(b){var k=A.getDevice(b.node.rdev);b.stream_ops=k.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new A.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return 255&b},makedev:function(b,k){return b<<8|k},registerDevice:function(b,k){A.devices[b]={stream_ops:k}},getDevice:function(b){return A.devices[b]},getMounts:function(b){for(var k=[],B=[b];B.length;){var it=B.pop();k.push(it),B.push.apply(B,it.mounts)}return k},syncfs:function(b,k){"function"==typeof b&&(k=b,b=!1),A.syncFSRequests++,A.syncFSRequests>1&&he("warning: "+A.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var B=A.getMounts(A.root.mount),it=0;function ut(Ot){return A.syncFSRequests--,k(Ot)}function yt(Ot){if(Ot)return yt.errored?void 0:(yt.errored=!0,ut(Ot));++it>=B.length&&ut(null)}B.forEach(function(Ot){if(!Ot.type.syncfs)return yt(null);Ot.type.syncfs(Ot,b,yt)})},mount:function(b,k,B){var yt,it="/"===B,ut=!B;if(it&&A.root)throw new A.ErrnoError(10);if(!it&&!ut){var Ot=A.lookupPath(B,{follow_mount:!1});if(B=Ot.path,A.isMountpoint(yt=Ot.node))throw new A.ErrnoError(10);if(!A.isDir(yt.mode))throw new A.ErrnoError(54)}var Zt={type:b,opts:k,mountpoint:B,mounts:[]},ee=b.mount(Zt);return ee.mount=Zt,Zt.root=ee,it?A.root=ee:yt&&(yt.mounted=Zt,yt.mount&&yt.mount.mounts.push(Zt)),ee},unmount:function(b){var k=A.lookupPath(b,{follow_mount:!1});if(!A.isMountpoint(k.node))throw new A.ErrnoError(28);var B=k.node,it=B.mounted,ut=A.getMounts(it);Object.keys(A.nameTable).forEach(function(Ot){for(var Zt=A.nameTable[Ot];Zt;){var ee=Zt.name_next;ut.includes(Zt.mount)&&A.destroyNode(Zt),Zt=ee}}),B.mounted=null;var yt=B.mount.mounts.indexOf(it);B.mount.mounts.splice(yt,1)},lookup:function(b,k){return b.node_ops.lookup(b,k)},mknod:function(b,k,B){var ut=A.lookupPath(b,{parent:!0}).node,yt=be.basename(b);if(!yt||"."===yt||".."===yt)throw new A.ErrnoError(28);var Ot=A.mayCreate(ut,yt);if(Ot)throw new A.ErrnoError(Ot);if(!ut.node_ops.mknod)throw new A.ErrnoError(63);return ut.node_ops.mknod(ut,yt,k,B)},create:function(b,k){return k=void 0!==k?k:438,k&=4095,A.mknod(b,k|=32768,0)},mkdir:function(b,k){return k=void 0!==k?k:511,k&=1023,A.mknod(b,k|=16384,0)},mkdirTree:function(b,k){for(var B=b.split("/"),it="",ut=0;ut<B.length;++ut)if(B[ut]){it+="/"+B[ut];try{A.mkdir(it,k)}catch(yt){if(20!=yt.errno)throw yt}}},mkdev:function(b,k,B){return void 0===B&&(B=k,k=438),A.mknod(b,k|=8192,B)},symlink:function(b,k){if(!Vn.resolve(b))throw new A.ErrnoError(44);var it=A.lookupPath(k,{parent:!0}).node;if(!it)throw new A.ErrnoError(44);var ut=be.basename(k),yt=A.mayCreate(it,ut);if(yt)throw new A.ErrnoError(yt);if(!it.node_ops.symlink)throw new A.ErrnoError(63);return it.node_ops.symlink(it,ut,b)},rename:function(b,k){var Zt,ee,B=be.dirname(b),it=be.dirname(k),ut=be.basename(b),yt=be.basename(k);if(Zt=A.lookupPath(b,{parent:!0}).node,ee=A.lookupPath(k,{parent:!0}).node,!Zt||!ee)throw new A.ErrnoError(44);if(Zt.mount!==ee.mount)throw new A.ErrnoError(75);var sn,De=A.lookupNode(Zt,ut),ze=Vn.relative(b,it);if("."!==ze.charAt(0))throw new A.ErrnoError(28);if("."!==(ze=Vn.relative(k,B)).charAt(0))throw new A.ErrnoError(55);try{sn=A.lookupNode(ee,yt)}catch(Me){}if(De!==sn){var we=A.isDir(De.mode),Oe=A.mayDelete(Zt,ut,we);if(Oe)throw new A.ErrnoError(Oe);if(Oe=sn?A.mayDelete(ee,yt,we):A.mayCreate(ee,yt))throw new A.ErrnoError(Oe);if(!Zt.node_ops.rename)throw new A.ErrnoError(63);if(A.isMountpoint(De)||sn&&A.isMountpoint(sn))throw new A.ErrnoError(10);if(ee!==Zt&&(Oe=A.nodePermissions(Zt,"w")))throw new A.ErrnoError(Oe);A.hashRemoveNode(De);try{Zt.node_ops.rename(De,ee,yt)}catch(Me){throw Me}finally{A.hashAddNode(De)}}},rmdir:function(b){var B=A.lookupPath(b,{parent:!0}).node,it=be.basename(b),ut=A.lookupNode(B,it),yt=A.mayDelete(B,it,!0);if(yt)throw new A.ErrnoError(yt);if(!B.node_ops.rmdir)throw new A.ErrnoError(63);if(A.isMountpoint(ut))throw new A.ErrnoError(10);B.node_ops.rmdir(B,it),A.destroyNode(ut)},readdir:function(b){var B=A.lookupPath(b,{follow:!0}).node;if(!B.node_ops.readdir)throw new A.ErrnoError(54);return B.node_ops.readdir(B)},unlink:function(b){var B=A.lookupPath(b,{parent:!0}).node,it=be.basename(b),ut=A.lookupNode(B,it),yt=A.mayDelete(B,it,!1);if(yt)throw new A.ErrnoError(yt);if(!B.node_ops.unlink)throw new A.ErrnoError(63);if(A.isMountpoint(ut))throw new A.ErrnoError(10);B.node_ops.unlink(B,it),A.destroyNode(ut)},readlink:function(b){var B=A.lookupPath(b).node;if(!B)throw new A.ErrnoError(44);if(!B.node_ops.readlink)throw new A.ErrnoError(28);return Vn.resolve(A.getPath(B.parent),B.node_ops.readlink(B))},stat:function(b,k){var it=A.lookupPath(b,{follow:!k}).node;if(!it)throw new A.ErrnoError(44);if(!it.node_ops.getattr)throw new A.ErrnoError(63);return it.node_ops.getattr(it)},lstat:function(b){return A.stat(b,!0)},chmod:function(b,k,B){var it;if(!(it="string"==typeof b?A.lookupPath(b,{follow:!B}).node:b).node_ops.setattr)throw new A.ErrnoError(63);it.node_ops.setattr(it,{mode:4095&k|-4096&it.mode,timestamp:Date.now()})},lchmod:function(b,k){A.chmod(b,k,!0)},fchmod:function(b,k){var B=A.getStream(b);if(!B)throw new A.ErrnoError(8);A.chmod(B.node,k)},chown:function(b,k,B,it){var ut;if(!(ut="string"==typeof b?A.lookupPath(b,{follow:!it}).node:b).node_ops.setattr)throw new A.ErrnoError(63);ut.node_ops.setattr(ut,{timestamp:Date.now()})},lchown:function(b,k,B){A.chown(b,k,B,!0)},fchown:function(b,k,B){var it=A.getStream(b);if(!it)throw new A.ErrnoError(8);A.chown(it.node,k,B)},truncate:function(b,k){if(k<0)throw new A.ErrnoError(28);var B;if(!(B="string"==typeof b?A.lookupPath(b,{follow:!0}).node:b).node_ops.setattr)throw new A.ErrnoError(63);if(A.isDir(B.mode))throw new A.ErrnoError(31);if(!A.isFile(B.mode))throw new A.ErrnoError(28);var ut=A.nodePermissions(B,"w");if(ut)throw new A.ErrnoError(ut);B.node_ops.setattr(B,{size:k,timestamp:Date.now()})},ftruncate:function(b,k){var B=A.getStream(b);if(!B)throw new A.ErrnoError(8);if(0==(2097155&B.flags))throw new A.ErrnoError(28);A.truncate(B.node,k)},utime:function(b,k,B){var ut=A.lookupPath(b,{follow:!0}).node;ut.node_ops.setattr(ut,{timestamp:Math.max(k,B)})},open:function(b,k,B,it,ut){if(""===b)throw new A.ErrnoError(44);var yt;if(B=void 0===B?438:B,B=64&(k="string"==typeof k?A.modeStringToFlags(k):k)?4095&B|32768:0,"object"==typeof b)yt=b;else{b=be.normalize(b);try{yt=A.lookupPath(b,{follow:!(131072&k)}).node}catch(ze){}}var Zt=!1;if(64&k)if(yt){if(128&k)throw new A.ErrnoError(20)}else yt=A.mknod(b,B,0),Zt=!0;if(!yt)throw new A.ErrnoError(44);if(A.isChrdev(yt.mode)&&(k&=-513),65536&k&&!A.isDir(yt.mode))throw new A.ErrnoError(54);if(!Zt){var ee=A.mayOpen(yt,k);if(ee)throw new A.ErrnoError(ee)}512&k&&A.truncate(yt,0),k&=-131713;var De=A.createStream({node:yt,path:A.getPath(yt),id:yt.id,flags:k,mode:yt.mode,seekable:!0,position:0,stream_ops:yt.stream_ops,node_ops:yt.node_ops,ungotten:[],error:!1},it,ut);return De.stream_ops.open&&De.stream_ops.open(De),D.logReadFiles&&!(1&k)&&(A.readFiles||(A.readFiles={}),b in A.readFiles||(A.readFiles[b]=1)),De},close:function(b){if(A.isClosed(b))throw new A.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(k){throw k}finally{A.closeStream(b.fd)}b.fd=null},isClosed:function(b){return null===b.fd},llseek:function(b,k,B){if(A.isClosed(b))throw new A.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new A.ErrnoError(70);if(0!=B&&1!=B&&2!=B)throw new A.ErrnoError(28);return b.position=b.stream_ops.llseek(b,k,B),b.ungotten=[],b.position},read:function(b,k,B,it,ut){if(it<0||ut<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(1==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.read)throw new A.ErrnoError(28);var yt=void 0!==ut;if(yt){if(!b.seekable)throw new A.ErrnoError(70)}else ut=b.position;var Ot=b.stream_ops.read(b,k,B,it,ut);return yt||(b.position+=Ot),Ot},write:function(b,k,B,it,ut,yt){if(it<0||ut<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.write)throw new A.ErrnoError(28);b.seekable&&1024&b.flags&&A.llseek(b,0,2);var Ot=void 0!==ut;if(Ot){if(!b.seekable)throw new A.ErrnoError(70)}else ut=b.position;var Zt=b.stream_ops.write(b,k,B,it,ut,yt);return Ot||(b.position+=Zt),Zt},allocate:function(b,k,B){if(A.isClosed(b))throw new A.ErrnoError(8);if(k<0||B<=0)throw new A.ErrnoError(28);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(!A.isFile(b.node.mode)&&!A.isDir(b.node.mode))throw new A.ErrnoError(43);if(!b.stream_ops.allocate)throw new A.ErrnoError(138);b.stream_ops.allocate(b,k,B)},mmap:function(b,k,B,it,ut,yt){if(0!=(2&ut)&&0==(2&yt)&&2!=(2097155&b.flags))throw new A.ErrnoError(2);if(1==(2097155&b.flags))throw new A.ErrnoError(2);if(!b.stream_ops.mmap)throw new A.ErrnoError(43);return b.stream_ops.mmap(b,k,B,it,ut,yt)},msync:function(b,k,B,it,ut){return b&&b.stream_ops.msync?b.stream_ops.msync(b,k,B,it,ut):0},munmap:function(b){return 0},ioctl:function(b,k,B){if(!b.stream_ops.ioctl)throw new A.ErrnoError(59);return b.stream_ops.ioctl(b,k,B)},readFile:function(b,k){if((k=k||{}).flags=k.flags||0,k.encoding=k.encoding||"binary","utf8"!==k.encoding&&"binary"!==k.encoding)throw new Error('Invalid encoding type "'+k.encoding+'"');var B,it=A.open(b,k.flags),yt=A.stat(b).size,Ot=new Uint8Array(yt);return A.read(it,Ot,0,yt,0),"utf8"===k.encoding?B=Ut(Ot,0):"binary"===k.encoding&&(B=Ot),A.close(it),B},writeFile:function(b,k,B){(B=B||{}).flags=B.flags||577;var it=A.open(b,B.flags,B.mode);if("string"==typeof k){var ut=new Uint8Array(Se(k)+1),yt=ue(k,ut,0,ut.length);A.write(it,ut,0,yt,void 0,B.canOwn)}else{if(!ArrayBuffer.isView(k))throw new Error("Unsupported data type");A.write(it,k,0,k.byteLength,void 0,B.canOwn)}A.close(it)},cwd:function(){return A.currentPath},chdir:function(b){var k=A.lookupPath(b,{follow:!0});if(null===k.node)throw new A.ErrnoError(44);if(!A.isDir(k.node.mode))throw new A.ErrnoError(54);var B=A.nodePermissions(k.node,"x");if(B)throw new A.ErrnoError(B);A.currentPath=k.path},createDefaultDirectories:function(){A.mkdir("/tmp"),A.mkdir("/home"),A.mkdir("/home/web_user")},createDefaultDevices:function(){A.mkdir("/dev"),A.registerDevice(A.makedev(1,3),{read:function(){return 0},write:function(k,B,it,ut,yt){return ut}}),A.mkdev("/dev/null",A.makedev(1,3)),un.register(A.makedev(5,0),un.default_tty_ops),un.register(A.makedev(6,0),un.default_tty1_ops),A.mkdev("/dev/tty",A.makedev(5,0)),A.mkdev("/dev/tty1",A.makedev(6,0));var b=function Di(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var b=new Uint8Array(1);return function(){return crypto.getRandomValues(b),b[0]}}return function(){mi("randomDevice")}}();A.createDevice("/dev","random",b),A.createDevice("/dev","urandom",b),A.mkdir("/dev/shm"),A.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){A.mkdir("/proc");var b=A.mkdir("/proc/self");A.mkdir("/proc/self/fd"),A.mount({mount:function(){var k=A.createNode(b,"fd",16895,73);return k.node_ops={lookup:function(B,it){var yt=A.getStream(+it);if(!yt)throw new A.ErrnoError(8);var Ot={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return yt.path}}};return Ot.parent=Ot,Ot}},k}},{},"/proc/self/fd")},createStandardStreams:function(){D.stdin?A.createDevice("/dev","stdin",D.stdin):A.symlink("/dev/tty","/dev/stdin"),D.stdout?A.createDevice("/dev","stdout",null,D.stdout):A.symlink("/dev/tty","/dev/stdout"),D.stderr?A.createDevice("/dev","stderr",null,D.stderr):A.symlink("/dev/tty1","/dev/stderr"),A.open("/dev/stdin",0),A.open("/dev/stdout",1),A.open("/dev/stderr",1)},ensureErrnoError:function(){A.ErrnoError||(A.ErrnoError=function(k,B){this.node=B,this.setErrno=function(it){this.errno=it},this.setErrno(k),this.message="FS error"},A.ErrnoError.prototype=new Error,A.ErrnoError.prototype.constructor=A.ErrnoError,[44].forEach(function(b){A.genericErrors[b]=new A.ErrnoError(b),A.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){A.ensureErrnoError(),A.nameTable=new Array(4096),A.mount($,{},"/"),A.createDefaultDirectories(),A.createDefaultDevices(),A.createSpecialDirectories(),A.filesystems={MEMFS:$}},init:function(b,k,B){A.init.initialized=!0,A.ensureErrnoError(),D.stdin=b||D.stdin,D.stdout=k||D.stdout,D.stderr=B||D.stderr,A.createStandardStreams()},quit:function(){A.init.initialized=!1;var b=D._fflush;b&&b(0);for(var k=0;k<A.streams.length;k++){var B=A.streams[k];!B||A.close(B)}},getMode:function(b,k){var B=0;return b&&(B|=365),k&&(B|=146),B},findObject:function(b,k){var B=A.analyzePath(b,k);return B.exists?B.object:null},analyzePath:function(b,k){try{b=(B=A.lookupPath(b,{follow:!k})).path}catch(ut){}var it={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var B=A.lookupPath(b,{parent:!0});it.parentExists=!0,it.parentPath=B.path,it.parentObject=B.node,it.name=be.basename(b),B=A.lookupPath(b,{follow:!k}),it.exists=!0,it.path=B.path,it.object=B.node,it.name=B.node.name,it.isRoot="/"===B.path}catch(ut){it.error=ut.errno}return it},createPath:function(b,k,B,it){b="string"==typeof b?b:A.getPath(b);for(var ut=k.split("/").reverse();ut.length;){var yt=ut.pop();if(yt){var Ot=be.join2(b,yt);try{A.mkdir(Ot)}catch(Zt){}b=Ot}}return Ot},createFile:function(b,k,B,it,ut){var yt=be.join2("string"==typeof b?b:A.getPath(b),k),Ot=A.getMode(it,ut);return A.create(yt,Ot)},createDataFile:function(b,k,B,it,ut,yt){var Ot=k?be.join2("string"==typeof b?b:A.getPath(b),k):b,Zt=A.getMode(it,ut),ee=A.create(Ot,Zt);if(B){if("string"==typeof B){for(var De=new Array(B.length),ze=0,sn=B.length;ze<sn;++ze)De[ze]=B.charCodeAt(ze);B=De}A.chmod(ee,146|Zt);var we=A.open(ee,577);A.write(we,B,0,B.length,0,yt),A.close(we),A.chmod(ee,Zt)}return ee},createDevice:function(b,k,B,it){var ut=be.join2("string"==typeof b?b:A.getPath(b),k),yt=A.getMode(!!B,!!it);A.createDevice.major||(A.createDevice.major=64);var Ot=A.makedev(A.createDevice.major++,0);return A.registerDevice(Ot,{open:function(Zt){Zt.seekable=!1},close:function(Zt){it&&it.buffer&&it.buffer.length&&it(10)},read:function(Zt,ee,De,ze,sn){for(var we=0,Oe=0;Oe<ze;Oe++){var Me;try{Me=B()}catch(Jn){throw new A.ErrnoError(29)}if(void 0===Me&&0===we)throw new A.ErrnoError(6);if(null==Me)break;we++,ee[De+Oe]=Me}return we&&(Zt.node.timestamp=Date.now()),we},write:function(Zt,ee,De,ze,sn){for(var we=0;we<ze;we++)try{it(ee[De+we])}catch(Oe){throw new A.ErrnoError(29)}return ze&&(Zt.node.timestamp=Date.now()),we}}),A.mkdev(ut,yt,Ot)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!wt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{b.contents=de(wt(b.url),!0),b.usedBytes=b.contents.length}catch(k){throw new A.ErrnoError(29)}},createLazyFile:function(b,k,B,it,ut){function yt(){this.lengthKnown=!1,this.chunks=[]}if(yt.prototype.get=function(we){if(!(we>this.length-1||we<0)){var Oe=we%this.chunkSize;return this.getter(we/this.chunkSize|0)[Oe]}},yt.prototype.setDataGetter=function(we){this.getter=we},yt.prototype.cacheLength=function(){var we=new XMLHttpRequest;if(we.open("HEAD",B,!1),we.send(null),!(we.status>=200&&we.status<300||304===we.status))throw new Error("Couldn't load "+B+". Status: "+we.status);var Me,Oe=Number(we.getResponseHeader("Content-length")),Jn=(Me=we.getResponseHeader("Accept-Ranges"))&&"bytes"===Me,Hi=(Me=we.getResponseHeader("Content-Encoding"))&&"gzip"===Me,vi=1048576;Jn||(vi=Oe);var Nn=this;Nn.setDataGetter(function(Ci){var Ki=Ci*vi,Bn=(Ci+1)*vi-1;if(Bn=Math.min(Bn,Oe-1),void 0===Nn.chunks[Ci]&&(Nn.chunks[Ci]=function(Ci,Ki){if(Ci>Ki)throw new Error("invalid range ("+Ci+", "+Ki+") or no bytes requested!");if(Ki>Oe-1)throw new Error("only "+Oe+" bytes available! programmer error!");var Bn=new XMLHttpRequest;if(Bn.open("GET",B,!1),Oe!==vi&&Bn.setRequestHeader("Range","bytes="+Ci+"-"+Ki),"undefined"!=typeof Uint8Array&&(Bn.responseType="arraybuffer"),Bn.overrideMimeType&&Bn.overrideMimeType("text/plain; charset=x-user-defined"),Bn.send(null),!(Bn.status>=200&&Bn.status<300||304===Bn.status))throw new Error("Couldn't load "+B+". Status: "+Bn.status);return void 0!==Bn.response?new Uint8Array(Bn.response||[]):de(Bn.responseText||"",!0)}(Ki,Bn)),void 0===Nn.chunks[Ci])throw new Error("doXHR failed!");return Nn.chunks[Ci]}),(Hi||!Oe)&&(vi=Oe=1,Oe=this.getter(0).length,vi=Oe,ce("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Oe,this._chunkSize=vi,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Zt,ee=A.createFile(b,k,Zt={isDevice:!1,url:B},it,ut);Zt.contents?ee.contents=Zt.contents:Zt.url&&(ee.contents=null,ee.url=Zt.url),Object.defineProperties(ee,{usedBytes:{get:function(){return this.contents.length}}});var De={};return Object.keys(ee.stream_ops).forEach(function(sn){var we=ee.stream_ops[sn];De[sn]=function(){return A.forceLoadFile(ee),we.apply(null,arguments)}}),De.read=function(we,Oe,Me,Jn,Hi){A.forceLoadFile(ee);var vi=we.node.contents;if(Hi>=vi.length)return 0;var Hn=Math.min(vi.length-Hi,Jn);if(vi.slice)for(var Nn=0;Nn<Hn;Nn++)Oe[Me+Nn]=vi[Hi+Nn];else for(Nn=0;Nn<Hn;Nn++)Oe[Me+Nn]=vi.get(Hi+Nn);return Hn},ee.stream_ops=De,ee},createPreloadedFile:function(b,k,B,it,ut,yt,Ot,Zt,ee,De){Browser.init();var ze=k?Vn.resolve(be.join2(b,k)):b;function sn(we){function Oe(Jn){De&&De(),Zt||A.createDataFile(b,k,Jn,it,ut,ee),yt&&yt(),Fi()}var Me=!1;D.preloadPlugins.forEach(function(Jn){Me||Jn.canHandle(ze)&&(Jn.handle(we,ze,Oe,function(){Ot&&Ot(),Fi()}),Me=!0)}),Me||Oe(we)}Bi(),"string"==typeof B?function ct(b,k,B,it){var ut=it?"":"al "+b;Bt(b,function(yt){It(yt,'Loading data file "'+b+'" failed (no arrayBuffer).'),k(new Uint8Array(yt)),ut&&Fi()},function(yt){if(!B)throw'Loading data file "'+b+'" failed.';B()}),ut&&Bi()}(B,function(we){sn(we)},Ot):sn(B)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,k,B){k=k||function(){},B=B||function(){};var it=A.indexedDB();try{var ut=it.open(A.DB_NAME(),A.DB_VERSION)}catch(yt){return B(yt)}ut.onupgradeneeded=function(){ce("creating db"),ut.result.createObjectStore(A.DB_STORE_NAME)},ut.onsuccess=function(){var Zt=ut.result.transaction([A.DB_STORE_NAME],"readwrite"),ee=Zt.objectStore(A.DB_STORE_NAME),De=0,ze=0,sn=b.length;function we(){0==ze?k():B()}b.forEach(function(Oe){var Me=ee.put(A.analyzePath(Oe).object.contents,Oe);Me.onsuccess=function(){++De+ze==sn&&we()},Me.onerror=function(){ze++,De+ze==sn&&we()}}),Zt.onerror=B},ut.onerror=B},loadFilesFromDB:function(b,k,B){k=k||function(){},B=B||function(){};var it=A.indexedDB();try{var ut=it.open(A.DB_NAME(),A.DB_VERSION)}catch(yt){return B(yt)}ut.onupgradeneeded=B,ut.onsuccess=function(){var Ot=ut.result;try{var Zt=Ot.transaction([A.DB_STORE_NAME],"readonly")}catch(Oe){return void B(Oe)}var ee=Zt.objectStore(A.DB_STORE_NAME),De=0,ze=0,sn=b.length;function we(){0==ze?k():B()}b.forEach(function(Oe){var Me=ee.get(Oe);Me.onsuccess=function(){A.analyzePath(Oe).exists&&A.unlink(Oe),A.createDataFile(be.dirname(Oe),be.basename(Oe),Me.result,!0,!0,!0),++De+ze==sn&&we()},Me.onerror=function(){ze++,De+ze==sn&&we()}}),Zt.onerror=B},ut.onerror=B}},bt={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(b,k,B){if("/"===k[0])return k;var it;if(-100===b)it=A.cwd();else{var ut=A.getStream(b);if(!ut)throw new A.ErrnoError(8);it=ut.path}if(0==k.length){if(!B)throw new A.ErrnoError(44);return it}return be.join2(it,k)},doStat:function(b,k,B){try{var it=b(k)}catch(ut){if(ut&&ut.node&&be.normalize(k)!==be.normalize(A.getPath(ut.node)))return-54;throw ut}return xe[B>>2]=it.dev,xe[B+4>>2]=0,xe[B+8>>2]=it.ino,xe[B+12>>2]=it.mode,xe[B+16>>2]=it.nlink,xe[B+20>>2]=it.uid,xe[B+24>>2]=it.gid,xe[B+28>>2]=it.rdev,xe[B+32>>2]=0,ln=[it.size>>>0,($e=it.size,+Math.abs($e)>=1?$e>0?(0|Math.min(+Math.floor($e/4294967296),4294967295))>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],xe[B+40>>2]=ln[0],xe[B+44>>2]=ln[1],xe[B+48>>2]=4096,xe[B+52>>2]=it.blocks,xe[B+56>>2]=it.atime.getTime()/1e3|0,xe[B+60>>2]=0,xe[B+64>>2]=it.mtime.getTime()/1e3|0,xe[B+68>>2]=0,xe[B+72>>2]=it.ctime.getTime()/1e3|0,xe[B+76>>2]=0,ln=[it.ino>>>0,($e=it.ino,+Math.abs($e)>=1?$e>0?(0|Math.min(+Math.floor($e/4294967296),4294967295))>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],xe[B+80>>2]=ln[0],xe[B+84>>2]=ln[1],0},doMsync:function(b,k,B,it,ut){var yt=an.slice(b,b+B);A.msync(k,yt,ut,B,it)},doMkdir:function(b,k){return"/"===(b=be.normalize(b))[b.length-1]&&(b=b.substr(0,b.length-1)),A.mkdir(b,k,0),0},doMknod:function(b,k,B){switch(61440&k){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return A.mknod(b,k,B),0},doReadlink:function(b,k,B){if(B<=0)return-28;var it=A.readlink(b),ut=Math.min(B,Se(it)),yt=Ge[k+ut];return function ve(b,k,B){return ue(b,an,k,B)}(it,k,B+1),Ge[k+ut]=yt,ut},doAccess:function(b,k){if(-8&k)return-28;var it=A.lookupPath(b,{follow:!0}).node;if(!it)return-44;var ut="";return 4&k&&(ut+="r"),2&k&&(ut+="w"),1&k&&(ut+="x"),ut&&A.nodePermissions(it,ut)?-2:0},doDup:function(b,k,B){var it=A.getStream(B);return it&&A.close(it),A.open(b,k,0,B,B).fd},doReadv:function(b,k,B,it){for(var ut=0,yt=0;yt<B;yt++){var Zt=xe[k+(8*yt+4)>>2],ee=A.read(b,Ge,xe[k+8*yt>>2],Zt,it);if(ee<0)return-1;if(ut+=ee,ee<Zt)break}return ut},doWritev:function(b,k,B,it){for(var ut=0,yt=0;yt<B;yt++){var ee=A.write(b,Ge,xe[k+8*yt>>2],xe[k+(8*yt+4)>>2],it);if(ee<0)return-1;ut+=ee}return ut},varargs:void 0,get:function(){return bt.varargs+=4,xe[bt.varargs-4>>2]},getStr:function(b){return Jt(b)},getStreamFromFD:function(b){var k=A.getStream(b);if(!k)throw new A.ErrnoError(8);return k},get64:function(b,k){return b}};var Vt=[];function pt(b){try{return qe.grow(b-Ve.byteLength+65535>>>16),Tt(qe.buffer),1}catch(k){}}var _t={};function Wt(){if(!Wt.strings){var k={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:jt||"./this.program"};for(var B in _t)void 0===_t[B]?delete k[B]:k[B]=_t[B];var it=[];for(var B in k)it.push(B+"="+k[B]);Wt.strings=it}return Wt.strings}var Pe=function(b,k,B,it){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=A.nextInode++,this.name=k,this.mode=B,this.node_ops={},this.stream_ops={},this.rdev=it};function de(b,k,B){var it=B>0?B:Se(b)+1,ut=new Array(it),yt=ue(b,ut,0,ut.length);return k&&(ut.length=yt),ut}Object.defineProperties(Pe.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(b){b?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(b){b?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return A.isDir(this.mode)}},isDevice:{get:function(){return A.isChrdev(this.mode)}}}),A.FSNode=Pe,A.staticInit();var Re={h:function Dt(b,k,B){bt.varargs=B;try{var it=bt.getStr(b),ut=B?bt.get():0;return A.open(it,k,ut).fd}catch(Ot){if(void 0===A||!(Ot instanceof A.ErrnoError))throw Ot;return-Ot.errno}},b:function Pt(){mi("")},a:function Ht(b,k,B){var it=function Qt(b,k){var B;for(Vt.length=0,k>>=2;B=an[b++];){var it=B<105;it&&1&k&&k++,Vt.push(it?Cn[k++>>1]:xe[k]),++k}return Vt}(k,B);return En[b].apply(null,it)},k:function J(b,k,B){an.copyWithin(b,k,k+B)},e:function gt(b){var k=an.length,B=2147483648;if((b>>>=0)>B)return!1;for(var it=1;it<=4;it*=2){var ut=k*(1+.2/it);if(ut=Math.min(ut,b+100663296),pt(Math.min(B,Ce(Math.max(b,ut),65536))))return!0}return!1},f:function Lt(b,k){var B=0;return Wt().forEach(function(it,ut){var yt=k+B;xe[b+4*ut>>2]=yt,function Ie(b,k,B){for(var it=0;it<b.length;++it)Ge[k++>>0]=b.charCodeAt(it);B||(Ge[k>>0]=0)}(it,yt),B+=it.length+1}),0},g:function ae(b,k){var B=Wt();xe[b>>2]=B.length;var it=0;return B.forEach(function(ut){it+=ut.length+1}),xe[k>>2]=it,0},d:function O(b){try{var k=bt.getStreamFromFD(b);return A.close(k),0}catch(B){if(void 0===A||!(B instanceof A.ErrnoError))throw B;return B.errno}},i:function ie(b,k,B,it){try{var ut=bt.getStreamFromFD(b),yt=bt.doReadv(ut,k,B);return xe[it>>2]=yt,0}catch(Ot){if(void 0===A||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},j:function Te(b,k,B,it,ut){try{var yt=bt.getStreamFromFD(b),Zt=4294967296*B+(k>>>0),ee=9007199254740992;return Zt<=-ee||Zt>=ee?-61:(A.llseek(yt,Zt,it),ln=[yt.position>>>0,($e=yt.position,+Math.abs($e)>=1?$e>0?(0|Math.min(+Math.floor($e/4294967296),4294967295))>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],xe[ut>>2]=ln[0],xe[ut+4>>2]=ln[1],yt.getdents&&0===Zt&&0===it&&(yt.getdents=null),0)}catch(De){if(void 0===A||!(De instanceof A.ErrnoError))throw De;return De.errno}},c:function ye(b,k,B,it){try{var ut=bt.getStreamFromFD(b),yt=bt.doWritev(ut,k,B);return xe[it>>2]=yt,0}catch(Ot){if(void 0===A||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},l:function Ke(b){var k=Date.now();return xe[b>>2]=k/1e3|0,xe[b+4>>2]=k%1e3*1e3|0,0}};(function On(){var b={a:Re};function k(Ot,Zt){D.asm=Ot.exports,Tt((qe=D.asm.m).buffer),Yt=D.asm.G,function Pi(b){fe.unshift(b)}(D.asm.n),Fi()}function B(Ot){k(Ot.instance)}function it(Ot){return function Qi(){return _e||"function"!=typeof fetch?Promise.resolve().then(function(){return yi(tn)}):fetch(tn,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+tn+"'";return b.arrayBuffer()}).catch(function(){return yi(tn)})}().then(function(Zt){return WebAssembly.instantiate(Zt,b)}).then(function(Zt){return Zt}).then(Ot,function(Zt){he("failed to asynchronously prepare wasm: "+Zt),mi(Zt)})}if(Bi(),D.instantiateWasm)try{return D.instantiateWasm(b,k)}catch(Ot){return he("Module.instantiateWasm callback failed with error: "+Ot),!1}return function ut(){return _e||"function"!=typeof WebAssembly.instantiateStreaming||Ee(tn)||"function"!=typeof fetch?it(B):fetch(tn,{credentials:"same-origin"}).then(function(Ot){return WebAssembly.instantiateStreaming(Ot,b).then(B,function(ee){return he("wasm streaming compile failed: "+ee),he("falling back to ArrayBuffer instantiation"),it(B)})})}().catch(St),{}})(),D.___wasm_call_ctors=function(){return(D.___wasm_call_ctors=D.asm.n).apply(null,arguments)};var jn,fn=D._emscripten_bind_CExpat_CExpat_0=function(){return(fn=D._emscripten_bind_CExpat_CExpat_0=D.asm.o).apply(null,arguments)},mn=D._emscripten_bind_CExpat_version_0=function(){return(mn=D._emscripten_bind_CExpat_version_0=D.asm.p).apply(null,arguments)},je=D._emscripten_bind_CExpat_create_0=function(){return(je=D._emscripten_bind_CExpat_create_0=D.asm.q).apply(null,arguments)},We=D._emscripten_bind_CExpat_destroy_0=function(){return(We=D._emscripten_bind_CExpat_destroy_0=D.asm.r).apply(null,arguments)},wn=D._emscripten_bind_CExpat_parse_1=function(){return(wn=D._emscripten_bind_CExpat_parse_1=D.asm.s).apply(null,arguments)},Rn=D._emscripten_bind_CExpat_tag_0=function(){return(Rn=D._emscripten_bind_CExpat_tag_0=D.asm.t).apply(null,arguments)},Zn=D._emscripten_bind_CExpat_attrs_0=function(){return(Zn=D._emscripten_bind_CExpat_attrs_0=D.asm.u).apply(null,arguments)},zn=D._emscripten_bind_CExpat_content_0=function(){return(zn=D._emscripten_bind_CExpat_content_0=D.asm.v).apply(null,arguments)},Ri=D._emscripten_bind_CExpat_startElement_0=function(){return(Ri=D._emscripten_bind_CExpat_startElement_0=D.asm.w).apply(null,arguments)},le=D._emscripten_bind_CExpat_endElement_0=function(){return(le=D._emscripten_bind_CExpat_endElement_0=D.asm.x).apply(null,arguments)},Xe=D._emscripten_bind_CExpat_characterData_0=function(){return(Xe=D._emscripten_bind_CExpat_characterData_0=D.asm.y).apply(null,arguments)},_n=D._emscripten_bind_CExpat___destroy___0=function(){return(_n=D._emscripten_bind_CExpat___destroy___0=D.asm.z).apply(null,arguments)},Tn=D._emscripten_bind_VoidPtr___destroy___0=function(){return(Tn=D._emscripten_bind_VoidPtr___destroy___0=D.asm.A).apply(null,arguments)},Xn=D._emscripten_bind_CExpatJS_CExpatJS_0=function(){return(Xn=D._emscripten_bind_CExpatJS_CExpatJS_0=D.asm.B).apply(null,arguments)},oi=D._emscripten_bind_CExpatJS_startElement_0=function(){return(oi=D._emscripten_bind_CExpatJS_startElement_0=D.asm.C).apply(null,arguments)},_i=D._emscripten_bind_CExpatJS_endElement_0=function(){return(_i=D._emscripten_bind_CExpatJS_endElement_0=D.asm.D).apply(null,arguments)},$n=D._emscripten_bind_CExpatJS_characterData_0=function(){return($n=D._emscripten_bind_CExpatJS_characterData_0=D.asm.E).apply(null,arguments)},Li=D._emscripten_bind_CExpatJS___destroy___0=function(){return(Li=D._emscripten_bind_CExpatJS___destroy___0=D.asm.F).apply(null,arguments)};function bi(b){function k(){jn||(jn=!0,D.calledRun=!0,!ke&&(function Ye(){!D.noFSInit&&!A.init.initialized&&A.init(),A.ignorePermissions=!1,gi(fe)}(),mt(D),D.onRuntimeInitialized&&D.onRuntimeInitialized(),function bn(){if(D.postRun)for("function"==typeof D.postRun&&(D.postRun=[D.postRun]);D.postRun.length;)b=D.postRun.shift(),qt.unshift(b);var b;gi(qt)}()))}fi>0||(function Ue(){if(D.preRun)for("function"==typeof D.preRun&&(D.preRun=[D.preRun]);D.preRun.length;)b=D.preRun.shift(),oe.unshift(b);var b;gi(oe)}(),fi>0)||(D.setStatus?(D.setStatus("Running..."),setTimeout(function(){setTimeout(function(){D.setStatus("")},1),k()},1)):k())}if(D._malloc=function(){return(D._malloc=D.asm.H).apply(null,arguments)},Ei=function b(){jn||bi(),jn||(Ei=b)},D.run=bi,D.preInit)for("function"==typeof D.preInit&&(D.preInit=[D.preInit]);D.preInit.length>0;)D.preInit.pop()();function gn(){}function hn(b){return(b||gn).__cache__}function li(b,k){var B=hn(k),it=B[b];return it||((it=Object.create((k||gn).prototype)).ptr=b,B[b]=it)}bi(),(gn.prototype=Object.create(gn.prototype)).constructor=gn,gn.prototype.__class__=gn,gn.__cache__={},D.WrapperObject=gn,D.getCache=hn,D.wrapPointer=li,D.castObject=function Ji(b,k){return li(b.ptr,k)},D.NULL=li(0),D.destroy=function ci(b){if(!b.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";b.__destroy__(),delete hn(b.__class__)[b.ptr]},D.compare=function zi(b,k){return b.ptr===k.ptr},D.getPointer=function Mn(b){return b.ptr},D.getClass=function Ti(b){return b.__class__};var cn={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(cn.needed){for(var b=0;b<cn.temps.length;b++)D._free(cn.temps[b]);cn.temps.length=0,D._free(cn.buffer),cn.buffer=0,cn.size+=cn.needed,cn.needed=0}cn.buffer||(cn.size+=128,cn.buffer=D._malloc(cn.size),It(cn.buffer)),cn.pos=0},alloc:function(b,k){It(cn.buffer);var ut,it=b.length*k.BYTES_PER_ELEMENT;return cn.pos+(it=it+7&-8)>=cn.size?(It(it>0),cn.needed+=it,ut=D._malloc(it),cn.temps.push(ut)):(ut=cn.buffer+cn.pos,cn.pos+=it),ut},copy:function(b,k,B){switch(B>>>=0,k.BYTES_PER_ELEMENT){case 2:B>>>=1;break;case 4:B>>>=2;break;case 8:B>>>=3}for(var ut=0;ut<b.length;ut++)k[B+ut]=b[ut]}};function Qe(){this.ptr=fn(),hn(Qe)[this.ptr]=this}function Qn(){throw"cannot construct a VoidPtr, no constructor in IDL"}function In(){this.ptr=Xn(),hn(In)[this.ptr]=this}return(Qe.prototype=Object.create(gn.prototype)).constructor=Qe,Qe.prototype.__class__=Qe,Qe.__cache__={},D.CExpat=Qe,Qe.prototype.version=Qe.prototype.version=function(){return Jt(mn(this.ptr))},Qe.prototype.create=Qe.prototype.create=function(){return!!je(this.ptr)},Qe.prototype.destroy=Qe.prototype.destroy=function(){We(this.ptr)},Qe.prototype.parse=Qe.prototype.parse=function(b){var k=this.ptr;return cn.prepare(),b=b&&"object"==typeof b?b.ptr:function Zi(b){if("string"==typeof b){var k=de(b),B=cn.alloc(k,Ge);return cn.copy(k,Ge,B),B}return b}(b),!!wn(k,b)},Qe.prototype.tag=Qe.prototype.tag=function(){return Jt(Rn(this.ptr))},Qe.prototype.attrs=Qe.prototype.attrs=function(){return Jt(Zn(this.ptr))},Qe.prototype.content=Qe.prototype.content=function(){return Jt(zn(this.ptr))},Qe.prototype.startElement=Qe.prototype.startElement=function(){Ri(this.ptr)},Qe.prototype.endElement=Qe.prototype.endElement=function(){le(this.ptr)},Qe.prototype.characterData=Qe.prototype.characterData=function(){Xe(this.ptr)},Qe.prototype.__destroy__=Qe.prototype.__destroy__=function(){_n(this.ptr)},(Qn.prototype=Object.create(gn.prototype)).constructor=Qn,Qn.prototype.__class__=Qn,Qn.__cache__={},D.VoidPtr=Qn,Qn.prototype.__destroy__=Qn.prototype.__destroy__=function(){Tn(this.ptr)},(In.prototype=Object.create(Qe.prototype)).constructor=In,In.prototype.__class__=In,In.__cache__={},D.CExpatJS=In,In.prototype.startElement=In.prototype.startElement=function(){oi(this.ptr)},In.prototype.endElement=In.prototype.endElement=function(){_i(this.ptr)},In.prototype.characterData=In.prototype.characterData=function(){$n(this.ptr)},In.prototype.__destroy__=In.prototype.__destroy__=function(){Li(this.ptr)},V.ready},x.exports=nt;var g=Object.freeze(c({__proto__:null,default:x.exports},[x.exports]));var d=function p(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}().__hpcc_wasmFolder||void 0;function l(H){if(!arguments.length)return d;var Q=d;return d=H,Q}function u(H,Q,nt){var tt=H.default||H;return tt.__hpcc_promise||(tt.__hpcc_promise=tt({wasmBinary:nt,locateFile:function(V,D){return"".concat(function h(H,Q){for(;H.charAt(H.length-1)===Q;)H=H.substring(0,H.length-1);return H}(Q||l()||D||".","/"),"/").concat(function f(H,Q){for(;H.charAt(0)===Q;)H=H.substring(1);return H}(V,"/"))}})),tt.__hpcc_promise}var m=function(){function H(Q,nt){this.tag=Q,this.attrs=nt,this._content=""}return Object.defineProperty(H.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),H.prototype.appendContent=function(Q){this._content+=Q},H}(),T=function(){function H(){this._stack=[]}return H.prototype.parse=function(Q,nt,tt){return R(Q,this,nt,tt)},H.prototype.top=function(){return this._stack[this._stack.length-1]},H.prototype.startElement=function(Q,nt){var tt=new m(Q,nt);return this._stack.push(tt),tt},H.prototype.endElement=function(Q){return this._stack.pop()},H.prototype.characterData=function(Q){this.top().appendContent(Q)},H}();function R(H,Q,nt,tt){return u(g,nt,tt).then(function(V){var D=new V.CExpatJS;D.startElement=function(){Q.startElement(this.tag(),function L(H){var Q={},nt=H,tt="".concat(String.fromCharCode(1)),V="".concat(tt).concat(tt);return nt.split(V).filter(function(D){return!!D}).forEach(function(D){var mt=D.split(tt);Q[mt[0]]=mt[1]}),Q}(this.attrs()))},D.endElement=function(){Q.endElement(this.tag())},D.characterData=function(){Q.characterData(this.content())},D.create();var mt=D.parse(H);return D.destroy(),V.destroy(D),mt})}var M={exports:{}};!function(H,Q){var nt=function(){var tt="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(V){var mt,St,D=void 0!==(V=V||{})?V:{};D.ready=new Promise(function(y,S){mt=y,St=S});var Et,Mt={};for(Et in D)D.hasOwnProperty(Et)&&(Mt[Et]=D[Et]);var Bt,re,jt="./this.program",Nt=function(y,S){throw S},dt="";"undefined"!=typeof document&&document.currentScript&&(dt=document.currentScript.src),tt&&(dt=tt),dt=0!==dt.indexOf("blob:")?dt.substr(0,dt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Bt=function(y){var S=new XMLHttpRequest;return S.open("GET",y,!1),S.send(null),S.responseText},re=function(y,S,P){var j=new XMLHttpRequest;j.open("GET",y,!0),j.responseType="arraybuffer",j.onload=function(){200==j.status||0==j.status&&j.response?S(j.response):P()},j.onerror=P,j.send(null)};var he=D.print||console.log.bind(console),_e=D.printErr||console.warn.bind(console);for(Et in Mt)Mt.hasOwnProperty(Et)&&(D[Et]=Mt[Et]);Mt=null,D.thisProgram&&(jt=D.thisProgram),D.quit&&(Nt=D.quit);var $t,qe=0;D.wasmBinary&&($t=D.wasmBinary);var Ut=D.noExitRuntime||!0;"object"!=typeof WebAssembly&&ln("no native wasm support detected");var Jt,ue=!1;function ve(y,S){y||ln("Assertion failed: "+S)}var Tt,Yt,oe,fe,qt,Ue,Se="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Ie(y,S,P){for(var j=S+P,ht=S;y[ht]&&!(ht>=j);)++ht;if(ht-S>16&&y.subarray&&Se)return Se.decode(y.subarray(S,ht));for(var xt="";S<ht;){var At=y[S++];if(128&At){var Rt=63&y[S++];if(192!=(224&At)){var te=63&y[S++];if((At=224==(240&At)?(15&At)<<12|Rt<<6|te:(7&At)<<18|Rt<<12|te<<6|63&y[S++])<65536)xt+=String.fromCharCode(At);else{var Le=At-65536;xt+=String.fromCharCode(55296|Le>>10,56320|1023&Le)}}else xt+=String.fromCharCode((31&At)<<6|Rt)}else xt+=String.fromCharCode(At)}return xt}function Ce(y,S){return y?Ie(oe,y,S):""}function Ve(y,S,P,j){if(!(j>0))return 0;for(var ht=P,xt=P+j-1,At=0;At<y.length;++At){var Rt=y.charCodeAt(At);if(Rt>=55296&&Rt<=57343&&(Rt=65536+((1023&Rt)<<10)|1023&y.charCodeAt(++At)),Rt<=127){if(P>=xt)break;S[P++]=Rt}else if(Rt<=2047){if(P+1>=xt)break;S[P++]=192|Rt>>6,S[P++]=128|63&Rt}else if(Rt<=65535){if(P+2>=xt)break;S[P++]=224|Rt>>12,S[P++]=128|Rt>>6&63,S[P++]=128|63&Rt}else{if(P+3>=xt)break;S[P++]=240|Rt>>18,S[P++]=128|Rt>>12&63,S[P++]=128|Rt>>6&63,S[P++]=128|63&Rt}}return S[P]=0,P-ht}function an(y){for(var S=0,P=0;P<y.length;++P){var j=y.charCodeAt(P);j>=55296&&j<=57343&&(j=65536+((1023&j)<<10)|1023&y.charCodeAt(++P)),j<=127?++S:S+=j<=2047?2:j<=65535?3:4}return S}function Cn(y,S){return y%S>0&&(y+=S-y%S),y}function Ye(y){Tt=y,D.HEAP8=Yt=new Int8Array(y),D.HEAP16=fe=new Int16Array(y),D.HEAP32=qt=new Int32Array(y),D.HEAPU8=oe=new Uint8Array(y),D.HEAPU16=new Uint16Array(y),D.HEAPU32=new Uint32Array(y),D.HEAPF32=new Float32Array(y),D.HEAPF64=Ue=new Float64Array(y)}var bn,si=[],Pi=[],pi=[];var tn=0,yi=null;function On(y){tn++,D.monitorRunDependencies&&D.monitorRunDependencies(tn)}function $e(y){if(tn--,D.monitorRunDependencies&&D.monitorRunDependencies(tn),0==tn&&yi){var S=yi;yi=null,S()}}function ln(y){D.onAbort&&D.onAbort(y),_e(y="Aborted("+y+")"),ue=!0,y+=". Build with -s ASSERTIONS=1 for more info.";var S=new WebAssembly.RuntimeError(y);throw St(S),S}D.preloadedImages={},D.preloadedAudios={};var Dn;function gi(y){return y.startsWith("data:application/octet-stream;base64,")}function be(y){try{if(y==Dn&&$t)return new Uint8Array($t);throw"both async and sync fetching of the wasm failed"}catch(S){ln(S)}}gi(Dn="graphvizlib.wasm")||(Dn=function wt(y){return D.locateFile?D.locateFile(y,dt):dt+y}(Dn));var un,z,bt,$={161580:function(y,S){var P=Ce(y),j=Ce(S);O.createPath("/",Ht.dirname(P)),O.writeFile(Ht.join("/",P),j)}};function ct(y){for(;y.length>0;){var S=y.shift();if("function"!=typeof S){var P=S.func;"number"==typeof P?void 0===S.arg?A(P)():A(P)(S.arg):P(void 0===S.arg?null:S.arg)}else S(D)}}function A(y){return bn.get(y)}bt=function(){return performance.now()};function Pt(y){return qt[Ot()>>2]=y,y}var Ht={splitPath:function(y){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(y).slice(1)},normalizeArray:function(y,S){for(var P=0,j=y.length-1;j>=0;j--){var ht=y[j];"."===ht?y.splice(j,1):".."===ht?(y.splice(j,1),P++):P&&(y.splice(j,1),P--)}if(S)for(;P;P--)y.unshift("..");return y},normalize:function(y){var S="/"===y.charAt(0),P="/"===y.substr(-1);return!(y=Ht.normalizeArray(y.split("/").filter(function(j){return!!j}),!S).join("/"))&&!S&&(y="."),y&&P&&(y+="/"),(S?"/":"")+y},dirname:function(y){var S=Ht.splitPath(y),P=S[0],j=S[1];return P||j?(j&&(j=j.substr(0,j.length-1)),P+j):"."},basename:function(y){if("/"===y)return"/";var S=(y=(y=Ht.normalize(y)).replace(/\/$/,"")).lastIndexOf("/");return-1===S?y:y.substr(S+1)},extname:function(y){return Ht.splitPath(y)[3]},join:function(){var y=Array.prototype.slice.call(arguments,0);return Ht.normalize(y.join("/"))},join2:function(y,S){return Ht.normalize(y+"/"+S)}};var pt={resolve:function(){for(var y="",S=!1,P=arguments.length-1;P>=-1&&!S;P--){var j=P>=0?arguments[P]:O.cwd();if("string"!=typeof j)throw new TypeError("Arguments to path.resolve must be strings");if(!j)return"";y=j+"/"+y,S="/"===j.charAt(0)}return(S?"/":"")+(y=Ht.normalizeArray(y.split("/").filter(function(ht){return!!ht}),!S).join("/"))||"."},relative:function(y,S){function P(Le){for(var en=0;en<Le.length&&""===Le[en];en++);for(var dn=Le.length-1;dn>=0&&""===Le[dn];dn--);return en>dn?[]:Le.slice(en,dn-en+1)}y=pt.resolve(y).substr(1),S=pt.resolve(S).substr(1);for(var j=P(y.split("/")),ht=P(S.split("/")),xt=Math.min(j.length,ht.length),At=xt,Rt=0;Rt<xt;Rt++)if(j[Rt]!==ht[Rt]){At=Rt;break}var te=[];for(Rt=At;Rt<j.length;Rt++)te.push("..");return(te=te.concat(ht.slice(At))).join("/")}},gt={ttys:[],init:function(){},shutdown:function(){},register:function(y,S){gt.ttys[y]={input:[],output:[],ops:S},O.registerDevice(y,gt.stream_ops)},stream_ops:{open:function(y){var S=gt.ttys[y.node.rdev];if(!S)throw new O.ErrnoError(43);y.tty=S,y.seekable=!1},close:function(y){y.tty.ops.flush(y.tty)},flush:function(y){y.tty.ops.flush(y.tty)},read:function(y,S,P,j,ht){if(!y.tty||!y.tty.ops.get_char)throw new O.ErrnoError(60);for(var xt=0,At=0;At<j;At++){var Rt;try{Rt=y.tty.ops.get_char(y.tty)}catch(te){throw new O.ErrnoError(29)}if(void 0===Rt&&0===xt)throw new O.ErrnoError(6);if(null==Rt)break;xt++,S[P+At]=Rt}return xt&&(y.node.timestamp=Date.now()),xt},write:function(y,S,P,j,ht){if(!y.tty||!y.tty.ops.put_char)throw new O.ErrnoError(60);try{for(var xt=0;xt<j;xt++)y.tty.ops.put_char(y.tty,S[P+xt])}catch(At){throw new O.ErrnoError(29)}return j&&(y.node.timestamp=Date.now()),xt}},default_tty_ops:{get_char:function(y){if(!y.input.length){var S=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(S=window.prompt("Input: "))&&(S+="\n"):"function"==typeof readline&&null!==(S=readline())&&(S+="\n"),!S)return null;y.input=Zi(S,!0)}return y.input.shift()},put_char:function(y,S){null===S||10===S?(he(Ie(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(he(Ie(y.output,0)),y.output=[])}},default_tty1_ops:{put_char:function(y,S){null===S||10===S?(_e(Ie(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(_e(Ie(y.output,0)),y.output=[])}}};function Wt(y){y=function zt(y,S){return Math.ceil(y/S)*S}(y,65536);var S=ze(65536,y);return S?(function _t(y,S){oe.fill(0,y,y+S)}(S,y),S):0}var Lt={ops_table:null,mount:function(y){return Lt.createNode(null,"/",16895,0)},createNode:function(y,S,P,j){if(O.isBlkdev(P)||O.isFIFO(P))throw new O.ErrnoError(63);Lt.ops_table||(Lt.ops_table={dir:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr,lookup:Lt.node_ops.lookup,mknod:Lt.node_ops.mknod,rename:Lt.node_ops.rename,unlink:Lt.node_ops.unlink,rmdir:Lt.node_ops.rmdir,readdir:Lt.node_ops.readdir,symlink:Lt.node_ops.symlink},stream:{llseek:Lt.stream_ops.llseek}},file:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr},stream:{llseek:Lt.stream_ops.llseek,read:Lt.stream_ops.read,write:Lt.stream_ops.write,allocate:Lt.stream_ops.allocate,mmap:Lt.stream_ops.mmap,msync:Lt.stream_ops.msync}},link:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr,readlink:Lt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Lt.node_ops.getattr,setattr:Lt.node_ops.setattr},stream:O.chrdev_stream_ops}});var ht=O.createNode(y,S,P,j);return O.isDir(ht.mode)?(ht.node_ops=Lt.ops_table.dir.node,ht.stream_ops=Lt.ops_table.dir.stream,ht.contents={}):O.isFile(ht.mode)?(ht.node_ops=Lt.ops_table.file.node,ht.stream_ops=Lt.ops_table.file.stream,ht.usedBytes=0,ht.contents=null):O.isLink(ht.mode)?(ht.node_ops=Lt.ops_table.link.node,ht.stream_ops=Lt.ops_table.link.stream):O.isChrdev(ht.mode)&&(ht.node_ops=Lt.ops_table.chrdev.node,ht.stream_ops=Lt.ops_table.chrdev.stream),ht.timestamp=Date.now(),y&&(y.contents[S]=ht,y.timestamp=ht.timestamp),ht},getFileDataAsTypedArray:function(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage:function(y,S){var P=y.contents?y.contents.length:0;if(!(P>=S)){S=Math.max(S,P*(P<1048576?2:1.125)>>>0),0!=P&&(S=Math.max(S,256));var ht=y.contents;y.contents=new Uint8Array(S),y.usedBytes>0&&y.contents.set(ht.subarray(0,y.usedBytes),0)}},resizeFileStorage:function(y,S){if(y.usedBytes!=S)if(0==S)y.contents=null,y.usedBytes=0;else{var P=y.contents;y.contents=new Uint8Array(S),P&&y.contents.set(P.subarray(0,Math.min(S,y.usedBytes))),y.usedBytes=S}},node_ops:{getattr:function(y){var S={};return S.dev=O.isChrdev(y.mode)?y.id:1,S.ino=y.id,S.mode=y.mode,S.nlink=1,S.uid=0,S.gid=0,S.rdev=y.rdev,S.size=O.isDir(y.mode)?4096:O.isFile(y.mode)?y.usedBytes:O.isLink(y.mode)?y.link.length:0,S.atime=new Date(y.timestamp),S.mtime=new Date(y.timestamp),S.ctime=new Date(y.timestamp),S.blksize=4096,S.blocks=Math.ceil(S.size/S.blksize),S},setattr:function(y,S){void 0!==S.mode&&(y.mode=S.mode),void 0!==S.timestamp&&(y.timestamp=S.timestamp),void 0!==S.size&&Lt.resizeFileStorage(y,S.size)},lookup:function(y,S){throw O.genericErrors[44]},mknod:function(y,S,P,j){return Lt.createNode(y,S,P,j)},rename:function(y,S,P){if(O.isDir(y.mode)){var j;try{j=O.lookupNode(S,P)}catch(xt){}if(j)for(var ht in j.contents)throw new O.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=P,S.contents[P]=y,S.timestamp=y.parent.timestamp,y.parent=S},unlink:function(y,S){delete y.contents[S],y.timestamp=Date.now()},rmdir:function(y,S){var P=O.lookupNode(y,S);for(var j in P.contents)throw new O.ErrnoError(55);delete y.contents[S],y.timestamp=Date.now()},readdir:function(y){var S=[".",".."];for(var P in y.contents)!y.contents.hasOwnProperty(P)||S.push(P);return S},symlink:function(y,S,P){var j=Lt.createNode(y,S,41471,0);return j.link=P,j},readlink:function(y){if(!O.isLink(y.mode))throw new O.ErrnoError(28);return y.link}},stream_ops:{read:function(y,S,P,j,ht){var xt=y.node.contents;if(ht>=y.node.usedBytes)return 0;var At=Math.min(y.node.usedBytes-ht,j);if(At>8&&xt.subarray)S.set(xt.subarray(ht,ht+At),P);else for(var Rt=0;Rt<At;Rt++)S[P+Rt]=xt[ht+Rt];return At},write:function(y,S,P,j,ht,xt){if(S.buffer===Yt.buffer&&(xt=!1),!j)return 0;var At=y.node;if(At.timestamp=Date.now(),S.subarray&&(!At.contents||At.contents.subarray)){if(xt)return At.contents=S.subarray(P,P+j),At.usedBytes=j,j;if(0===At.usedBytes&&0===ht)return At.contents=S.slice(P,P+j),At.usedBytes=j,j;if(ht+j<=At.usedBytes)return At.contents.set(S.subarray(P,P+j),ht),j}if(Lt.expandFileStorage(At,ht+j),At.contents.subarray&&S.subarray)At.contents.set(S.subarray(P,P+j),ht);else for(var Rt=0;Rt<j;Rt++)At.contents[ht+Rt]=S[P+Rt];return At.usedBytes=Math.max(At.usedBytes,ht+j),j},llseek:function(y,S,P){var j=S;if(1===P?j+=y.position:2===P&&O.isFile(y.node.mode)&&(j+=y.node.usedBytes),j<0)throw new O.ErrnoError(28);return j},allocate:function(y,S,P){Lt.expandFileStorage(y.node,S+P),y.node.usedBytes=Math.max(y.node.usedBytes,S+P)},mmap:function(y,S,P,j,ht,xt){if(0!==S)throw new O.ErrnoError(28);if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);var At,Rt,te=y.node.contents;if(2&xt||te.buffer!==Tt){if((j>0||j+P<te.length)&&(te=te.subarray?te.subarray(j,j+P):Array.prototype.slice.call(te,j,j+P)),Rt=!0,!(At=Wt(P)))throw new O.ErrnoError(48);Yt.set(te,At)}else Rt=!1,At=te.byteOffset;return{ptr:At,allocated:Rt}},msync:function(y,S,P,j,ht){if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);return 2&ht||Lt.stream_ops.write(y,S,0,j,P,!1),0}}};var O={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(y,S){if(S=S||{},!(y=pt.resolve(O.cwd(),y)))return{path:"",node:null};var P={follow_mount:!0,recurse_count:0};for(var j in P)void 0===S[j]&&(S[j]=P[j]);if(S.recurse_count>8)throw new O.ErrnoError(32);for(var ht=Ht.normalizeArray(y.split("/").filter(function(Ne){return!!Ne}),!1),xt=O.root,At="/",Rt=0;Rt<ht.length;Rt++){var te=Rt===ht.length-1;if(te&&S.parent)break;if(xt=O.lookupNode(xt,ht[Rt]),At=Ht.join2(At,ht[Rt]),O.isMountpoint(xt)&&(!te||te&&S.follow_mount)&&(xt=xt.mounted.root),!te||S.follow)for(var Le=0;O.isLink(xt.mode);){var en=O.readlink(At);if(At=pt.resolve(Ht.dirname(At),en),xt=O.lookupPath(At,{recurse_count:S.recurse_count}).node,Le++>40)throw new O.ErrnoError(32)}}return{path:At,node:xt}},getPath:function(y){for(var S;;){if(O.isRoot(y)){var P=y.mount.mountpoint;return S?"/"!==P[P.length-1]?P+"/"+S:P+S:P}S=S?y.name+"/"+S:y.name,y=y.parent}},hashName:function(y,S){for(var P=0,j=0;j<S.length;j++)P=(P<<5)-P+S.charCodeAt(j)|0;return(y+P>>>0)%O.nameTable.length},hashAddNode:function(y){var S=O.hashName(y.parent.id,y.name);y.name_next=O.nameTable[S],O.nameTable[S]=y},hashRemoveNode:function(y){var S=O.hashName(y.parent.id,y.name);if(O.nameTable[S]===y)O.nameTable[S]=y.name_next;else for(var P=O.nameTable[S];P;){if(P.name_next===y){P.name_next=y.name_next;break}P=P.name_next}},lookupNode:function(y,S){var P=O.mayLookup(y);if(P)throw new O.ErrnoError(P,y);for(var j=O.hashName(y.id,S),ht=O.nameTable[j];ht;ht=ht.name_next)if(ht.parent.id===y.id&&ht.name===S)return ht;return O.lookup(y,S)},createNode:function(y,S,P,j){var ht=new O.FSNode(y,S,P,j);return O.hashAddNode(ht),ht},destroyNode:function(y){O.hashRemoveNode(y)},isRoot:function(y){return y===y.parent},isMountpoint:function(y){return!!y.mounted},isFile:function(y){return 32768==(61440&y)},isDir:function(y){return 16384==(61440&y)},isLink:function(y){return 40960==(61440&y)},isChrdev:function(y){return 8192==(61440&y)},isBlkdev:function(y){return 24576==(61440&y)},isFIFO:function(y){return 4096==(61440&y)},isSocket:function(y){return 49152==(49152&y)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(y){var S=O.flagModes[y];if(void 0===S)throw new Error("Unknown file open mode: "+y);return S},flagsToPermissionString:function(y){var S=["r","w","rw"][3&y];return 512&y&&(S+="w"),S},nodePermissions:function(y,S){return O.ignorePermissions?0:S.includes("r")&&!(292&y.mode)||S.includes("w")&&!(146&y.mode)||S.includes("x")&&!(73&y.mode)?2:0},mayLookup:function(y){return O.nodePermissions(y,"x")||(y.node_ops.lookup?0:2)},mayCreate:function(y,S){try{return O.lookupNode(y,S),20}catch(j){}return O.nodePermissions(y,"wx")},mayDelete:function(y,S,P){var j;try{j=O.lookupNode(y,S)}catch(xt){return xt.errno}var ht=O.nodePermissions(y,"wx");if(ht)return ht;if(P){if(!O.isDir(j.mode))return 54;if(O.isRoot(j)||O.getPath(j)===O.cwd())return 10}else if(O.isDir(j.mode))return 31;return 0},mayOpen:function(y,S){return y?O.isLink(y.mode)?32:O.isDir(y.mode)&&("r"!==O.flagsToPermissionString(S)||512&S)?31:O.nodePermissions(y,O.flagsToPermissionString(S)):44},MAX_OPEN_FDS:4096,nextfd:function(y,S){S=S||O.MAX_OPEN_FDS;for(var P=y=y||0;P<=S;P++)if(!O.streams[P])return P;throw new O.ErrnoError(33)},getStream:function(y){return O.streams[y]},createStream:function(y,S,P){O.FSStream||(O.FSStream=function(){},O.FSStream.prototype={object:{get:function(){return this.node},set:function(At){this.node=At}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var j=new O.FSStream;for(var ht in y)j[ht]=y[ht];y=j;var xt=O.nextfd(S,P);return y.fd=xt,O.streams[xt]=y,y},closeStream:function(y){O.streams[y]=null},chrdev_stream_ops:{open:function(y){var S=O.getDevice(y.node.rdev);y.stream_ops=S.stream_ops,y.stream_ops.open&&y.stream_ops.open(y)},llseek:function(){throw new O.ErrnoError(70)}},major:function(y){return y>>8},minor:function(y){return 255&y},makedev:function(y,S){return y<<8|S},registerDevice:function(y,S){O.devices[y]={stream_ops:S}},getDevice:function(y){return O.devices[y]},getMounts:function(y){for(var S=[],P=[y];P.length;){var j=P.pop();S.push(j),P.push.apply(P,j.mounts)}return S},syncfs:function(y,S){"function"==typeof y&&(S=y,y=!1),O.syncFSRequests++,O.syncFSRequests>1&&_e("warning: "+O.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var P=O.getMounts(O.root.mount),j=0;function ht(At){return O.syncFSRequests--,S(At)}function xt(At){if(At)return xt.errored?void 0:(xt.errored=!0,ht(At));++j>=P.length&&ht(null)}P.forEach(function(At){if(!At.type.syncfs)return xt(null);At.type.syncfs(At,y,xt)})},mount:function(y,S,P){var xt,j="/"===P,ht=!P;if(j&&O.root)throw new O.ErrnoError(10);if(!j&&!ht){var At=O.lookupPath(P,{follow_mount:!1});if(P=At.path,O.isMountpoint(xt=At.node))throw new O.ErrnoError(10);if(!O.isDir(xt.mode))throw new O.ErrnoError(54)}var Rt={type:y,opts:S,mountpoint:P,mounts:[]},te=y.mount(Rt);return te.mount=Rt,Rt.root=te,j?O.root=te:xt&&(xt.mounted=Rt,xt.mount&&xt.mount.mounts.push(Rt)),te},unmount:function(y){var S=O.lookupPath(y,{follow_mount:!1});if(!O.isMountpoint(S.node))throw new O.ErrnoError(28);var P=S.node,j=P.mounted,ht=O.getMounts(j);Object.keys(O.nameTable).forEach(function(At){for(var Rt=O.nameTable[At];Rt;){var te=Rt.name_next;ht.includes(Rt.mount)&&O.destroyNode(Rt),Rt=te}}),P.mounted=null;var xt=P.mount.mounts.indexOf(j);P.mount.mounts.splice(xt,1)},lookup:function(y,S){return y.node_ops.lookup(y,S)},mknod:function(y,S,P){var ht=O.lookupPath(y,{parent:!0}).node,xt=Ht.basename(y);if(!xt||"."===xt||".."===xt)throw new O.ErrnoError(28);var At=O.mayCreate(ht,xt);if(At)throw new O.ErrnoError(At);if(!ht.node_ops.mknod)throw new O.ErrnoError(63);return ht.node_ops.mknod(ht,xt,S,P)},create:function(y,S){return S=void 0!==S?S:438,S&=4095,O.mknod(y,S|=32768,0)},mkdir:function(y,S){return S=void 0!==S?S:511,S&=1023,O.mknod(y,S|=16384,0)},mkdirTree:function(y,S){for(var P=y.split("/"),j="",ht=0;ht<P.length;++ht)if(P[ht]){j+="/"+P[ht];try{O.mkdir(j,S)}catch(xt){if(20!=xt.errno)throw xt}}},mkdev:function(y,S,P){return void 0===P&&(P=S,S=438),O.mknod(y,S|=8192,P)},symlink:function(y,S){if(!pt.resolve(y))throw new O.ErrnoError(44);var j=O.lookupPath(S,{parent:!0}).node;if(!j)throw new O.ErrnoError(44);var ht=Ht.basename(S),xt=O.mayCreate(j,ht);if(xt)throw new O.ErrnoError(xt);if(!j.node_ops.symlink)throw new O.ErrnoError(63);return j.node_ops.symlink(j,ht,y)},rename:function(y,S){var Rt,te,P=Ht.dirname(y),j=Ht.dirname(S),ht=Ht.basename(y),xt=Ht.basename(S);if(Rt=O.lookupPath(y,{parent:!0}).node,te=O.lookupPath(S,{parent:!0}).node,!Rt||!te)throw new O.ErrnoError(44);if(Rt.mount!==te.mount)throw new O.ErrnoError(75);var dn,Le=O.lookupNode(Rt,ht),en=pt.relative(y,j);if("."!==en.charAt(0))throw new O.ErrnoError(28);if("."!==(en=pt.relative(S,P)).charAt(0))throw new O.ErrnoError(55);try{dn=O.lookupNode(te,xt)}catch(vn){}if(Le!==dn){var Ne=O.isDir(Le.mode),Be=O.mayDelete(Rt,ht,Ne);if(Be)throw new O.ErrnoError(Be);if(Be=dn?O.mayDelete(te,xt,Ne):O.mayCreate(te,xt))throw new O.ErrnoError(Be);if(!Rt.node_ops.rename)throw new O.ErrnoError(63);if(O.isMountpoint(Le)||dn&&O.isMountpoint(dn))throw new O.ErrnoError(10);if(te!==Rt&&(Be=O.nodePermissions(Rt,"w")))throw new O.ErrnoError(Be);O.hashRemoveNode(Le);try{Rt.node_ops.rename(Le,te,xt)}catch(vn){throw vn}finally{O.hashAddNode(Le)}}},rmdir:function(y){var P=O.lookupPath(y,{parent:!0}).node,j=Ht.basename(y),ht=O.lookupNode(P,j),xt=O.mayDelete(P,j,!0);if(xt)throw new O.ErrnoError(xt);if(!P.node_ops.rmdir)throw new O.ErrnoError(63);if(O.isMountpoint(ht))throw new O.ErrnoError(10);P.node_ops.rmdir(P,j),O.destroyNode(ht)},readdir:function(y){var P=O.lookupPath(y,{follow:!0}).node;if(!P.node_ops.readdir)throw new O.ErrnoError(54);return P.node_ops.readdir(P)},unlink:function(y){var P=O.lookupPath(y,{parent:!0}).node,j=Ht.basename(y),ht=O.lookupNode(P,j),xt=O.mayDelete(P,j,!1);if(xt)throw new O.ErrnoError(xt);if(!P.node_ops.unlink)throw new O.ErrnoError(63);if(O.isMountpoint(ht))throw new O.ErrnoError(10);P.node_ops.unlink(P,j),O.destroyNode(ht)},readlink:function(y){var P=O.lookupPath(y).node;if(!P)throw new O.ErrnoError(44);if(!P.node_ops.readlink)throw new O.ErrnoError(28);return pt.resolve(O.getPath(P.parent),P.node_ops.readlink(P))},stat:function(y,S){var j=O.lookupPath(y,{follow:!S}).node;if(!j)throw new O.ErrnoError(44);if(!j.node_ops.getattr)throw new O.ErrnoError(63);return j.node_ops.getattr(j)},lstat:function(y){return O.stat(y,!0)},chmod:function(y,S,P){var j;if(!(j="string"==typeof y?O.lookupPath(y,{follow:!P}).node:y).node_ops.setattr)throw new O.ErrnoError(63);j.node_ops.setattr(j,{mode:4095&S|-4096&j.mode,timestamp:Date.now()})},lchmod:function(y,S){O.chmod(y,S,!0)},fchmod:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);O.chmod(P.node,S)},chown:function(y,S,P,j){var ht;if(!(ht="string"==typeof y?O.lookupPath(y,{follow:!j}).node:y).node_ops.setattr)throw new O.ErrnoError(63);ht.node_ops.setattr(ht,{timestamp:Date.now()})},lchown:function(y,S,P){O.chown(y,S,P,!0)},fchown:function(y,S,P){var j=O.getStream(y);if(!j)throw new O.ErrnoError(8);O.chown(j.node,S,P)},truncate:function(y,S){if(S<0)throw new O.ErrnoError(28);var P;if(!(P="string"==typeof y?O.lookupPath(y,{follow:!0}).node:y).node_ops.setattr)throw new O.ErrnoError(63);if(O.isDir(P.mode))throw new O.ErrnoError(31);if(!O.isFile(P.mode))throw new O.ErrnoError(28);var ht=O.nodePermissions(P,"w");if(ht)throw new O.ErrnoError(ht);P.node_ops.setattr(P,{size:S,timestamp:Date.now()})},ftruncate:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);if(0==(2097155&P.flags))throw new O.ErrnoError(28);O.truncate(P.node,S)},utime:function(y,S,P){var ht=O.lookupPath(y,{follow:!0}).node;ht.node_ops.setattr(ht,{timestamp:Math.max(S,P)})},open:function(y,S,P,j,ht){if(""===y)throw new O.ErrnoError(44);var xt;if(P=void 0===P?438:P,P=64&(S="string"==typeof S?O.modeStringToFlags(S):S)?4095&P|32768:0,"object"==typeof y)xt=y;else{y=Ht.normalize(y);try{xt=O.lookupPath(y,{follow:!(131072&S)}).node}catch(en){}}var Rt=!1;if(64&S)if(xt){if(128&S)throw new O.ErrnoError(20)}else xt=O.mknod(y,P,0),Rt=!0;if(!xt)throw new O.ErrnoError(44);if(O.isChrdev(xt.mode)&&(S&=-513),65536&S&&!O.isDir(xt.mode))throw new O.ErrnoError(54);if(!Rt){var te=O.mayOpen(xt,S);if(te)throw new O.ErrnoError(te)}512&S&&O.truncate(xt,0),S&=-131713;var Le=O.createStream({node:xt,path:O.getPath(xt),id:xt.id,flags:S,mode:xt.mode,seekable:!0,position:0,stream_ops:xt.stream_ops,node_ops:xt.node_ops,ungotten:[],error:!1},j,ht);return Le.stream_ops.open&&Le.stream_ops.open(Le),D.logReadFiles&&!(1&S)&&(O.readFiles||(O.readFiles={}),y in O.readFiles||(O.readFiles[y]=1)),Le},close:function(y){if(O.isClosed(y))throw new O.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(S){throw S}finally{O.closeStream(y.fd)}y.fd=null},isClosed:function(y){return null===y.fd},llseek:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new O.ErrnoError(70);if(0!=P&&1!=P&&2!=P)throw new O.ErrnoError(28);return y.position=y.stream_ops.llseek(y,S,P),y.ungotten=[],y.position},read:function(y,S,P,j,ht){if(j<0||ht<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(1==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.read)throw new O.ErrnoError(28);var xt=void 0!==ht;if(xt){if(!y.seekable)throw new O.ErrnoError(70)}else ht=y.position;var At=y.stream_ops.read(y,S,P,j,ht);return xt||(y.position+=At),At},write:function(y,S,P,j,ht,xt){if(j<0||ht<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.write)throw new O.ErrnoError(28);y.seekable&&1024&y.flags&&O.llseek(y,0,2);var At=void 0!==ht;if(At){if(!y.seekable)throw new O.ErrnoError(70)}else ht=y.position;var Rt=y.stream_ops.write(y,S,P,j,ht,xt);return At||(y.position+=Rt),Rt},allocate:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(S<0||P<=0)throw new O.ErrnoError(28);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(!O.isFile(y.node.mode)&&!O.isDir(y.node.mode))throw new O.ErrnoError(43);if(!y.stream_ops.allocate)throw new O.ErrnoError(138);y.stream_ops.allocate(y,S,P)},mmap:function(y,S,P,j,ht,xt){if(0!=(2&ht)&&0==(2&xt)&&2!=(2097155&y.flags))throw new O.ErrnoError(2);if(1==(2097155&y.flags))throw new O.ErrnoError(2);if(!y.stream_ops.mmap)throw new O.ErrnoError(43);return y.stream_ops.mmap(y,S,P,j,ht,xt)},msync:function(y,S,P,j,ht){return y&&y.stream_ops.msync?y.stream_ops.msync(y,S,P,j,ht):0},munmap:function(y){return 0},ioctl:function(y,S,P){if(!y.stream_ops.ioctl)throw new O.ErrnoError(59);return y.stream_ops.ioctl(y,S,P)},readFile:function(y,S){if((S=S||{}).flags=S.flags||0,S.encoding=S.encoding||"binary","utf8"!==S.encoding&&"binary"!==S.encoding)throw new Error('Invalid encoding type "'+S.encoding+'"');var P,j=O.open(y,S.flags),xt=O.stat(y).size,At=new Uint8Array(xt);return O.read(j,At,0,xt,0),"utf8"===S.encoding?P=Ie(At,0):"binary"===S.encoding&&(P=At),O.close(j),P},writeFile:function(y,S,P){(P=P||{}).flags=P.flags||577;var j=O.open(y,P.flags,P.mode);if("string"==typeof S){var ht=new Uint8Array(an(S)+1),xt=Ve(S,ht,0,ht.length);O.write(j,ht,0,xt,void 0,P.canOwn)}else{if(!ArrayBuffer.isView(S))throw new Error("Unsupported data type");O.write(j,S,0,S.byteLength,void 0,P.canOwn)}O.close(j)},cwd:function(){return O.currentPath},chdir:function(y){var S=O.lookupPath(y,{follow:!0});if(null===S.node)throw new O.ErrnoError(44);if(!O.isDir(S.node.mode))throw new O.ErrnoError(54);var P=O.nodePermissions(S.node,"x");if(P)throw new O.ErrnoError(P);O.currentPath=S.path},createDefaultDirectories:function(){O.mkdir("/tmp"),O.mkdir("/home"),O.mkdir("/home/web_user")},createDefaultDevices:function(){O.mkdir("/dev"),O.registerDevice(O.makedev(1,3),{read:function(){return 0},write:function(S,P,j,ht,xt){return ht}}),O.mkdev("/dev/null",O.makedev(1,3)),gt.register(O.makedev(5,0),gt.default_tty_ops),gt.register(O.makedev(6,0),gt.default_tty1_ops),O.mkdev("/dev/tty",O.makedev(5,0)),O.mkdev("/dev/tty1",O.makedev(6,0));var y=function J(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var y=new Uint8Array(1);return function(){return crypto.getRandomValues(y),y[0]}}return function(){ln("randomDevice")}}();O.createDevice("/dev","random",y),O.createDevice("/dev","urandom",y),O.mkdir("/dev/shm"),O.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){O.mkdir("/proc");var y=O.mkdir("/proc/self");O.mkdir("/proc/self/fd"),O.mount({mount:function(){var S=O.createNode(y,"fd",16895,73);return S.node_ops={lookup:function(P,j){var xt=O.getStream(+j);if(!xt)throw new O.ErrnoError(8);var At={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return xt.path}}};return At.parent=At,At}},S}},{},"/proc/self/fd")},createStandardStreams:function(){D.stdin?O.createDevice("/dev","stdin",D.stdin):O.symlink("/dev/tty","/dev/stdin"),D.stdout?O.createDevice("/dev","stdout",null,D.stdout):O.symlink("/dev/tty","/dev/stdout"),D.stderr?O.createDevice("/dev","stderr",null,D.stderr):O.symlink("/dev/tty1","/dev/stderr"),O.open("/dev/stdin",0),O.open("/dev/stdout",1),O.open("/dev/stderr",1)},ensureErrnoError:function(){O.ErrnoError||(O.ErrnoError=function(S,P){this.node=P,this.setErrno=function(j){this.errno=j},this.setErrno(S),this.message="FS error"},O.ErrnoError.prototype=new Error,O.ErrnoError.prototype.constructor=O.ErrnoError,[44].forEach(function(y){O.genericErrors[y]=new O.ErrnoError(y),O.genericErrors[y].stack="<generic error, no stack>"}))},staticInit:function(){O.ensureErrnoError(),O.nameTable=new Array(4096),O.mount(Lt,{},"/"),O.createDefaultDirectories(),O.createDefaultDevices(),O.createSpecialDirectories(),O.filesystems={MEMFS:Lt}},init:function(y,S,P){O.init.initialized=!0,O.ensureErrnoError(),D.stdin=y||D.stdin,D.stdout=S||D.stdout,D.stderr=P||D.stderr,O.createStandardStreams()},quit:function(){O.init.initialized=!1;var y=D._fflush;y&&y(0);for(var S=0;S<O.streams.length;S++){var P=O.streams[S];!P||O.close(P)}},getMode:function(y,S){var P=0;return y&&(P|=365),S&&(P|=146),P},findObject:function(y,S){var P=O.analyzePath(y,S);return P.exists?P.object:null},analyzePath:function(y,S){try{y=(P=O.lookupPath(y,{follow:!S})).path}catch(ht){}var j={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var P=O.lookupPath(y,{parent:!0});j.parentExists=!0,j.parentPath=P.path,j.parentObject=P.node,j.name=Ht.basename(y),P=O.lookupPath(y,{follow:!S}),j.exists=!0,j.path=P.path,j.object=P.node,j.name=P.node.name,j.isRoot="/"===P.path}catch(ht){j.error=ht.errno}return j},createPath:function(y,S,P,j){y="string"==typeof y?y:O.getPath(y);for(var ht=S.split("/").reverse();ht.length;){var xt=ht.pop();if(xt){var At=Ht.join2(y,xt);try{O.mkdir(At)}catch(Rt){}y=At}}return At},createFile:function(y,S,P,j,ht){var xt=Ht.join2("string"==typeof y?y:O.getPath(y),S),At=O.getMode(j,ht);return O.create(xt,At)},createDataFile:function(y,S,P,j,ht,xt){var At=S?Ht.join2("string"==typeof y?y:O.getPath(y),S):y,Rt=O.getMode(j,ht),te=O.create(At,Rt);if(P){if("string"==typeof P){for(var Le=new Array(P.length),en=0,dn=P.length;en<dn;++en)Le[en]=P.charCodeAt(en);P=Le}O.chmod(te,146|Rt);var Ne=O.open(te,577);O.write(Ne,P,0,P.length,0,xt),O.close(Ne),O.chmod(te,Rt)}return te},createDevice:function(y,S,P,j){var ht=Ht.join2("string"==typeof y?y:O.getPath(y),S),xt=O.getMode(!!P,!!j);O.createDevice.major||(O.createDevice.major=64);var At=O.makedev(O.createDevice.major++,0);return O.registerDevice(At,{open:function(Rt){Rt.seekable=!1},close:function(Rt){j&&j.buffer&&j.buffer.length&&j(10)},read:function(Rt,te,Le,en,dn){for(var Ne=0,Be=0;Be<en;Be++){var vn;try{vn=P()}catch(ui){throw new O.ErrnoError(29)}if(void 0===vn&&0===Ne)throw new O.ErrnoError(6);if(null==vn)break;Ne++,te[Le+Be]=vn}return Ne&&(Rt.node.timestamp=Date.now()),Ne},write:function(Rt,te,Le,en,dn){for(var Ne=0;Ne<en;Ne++)try{j(te[Le+Ne])}catch(Be){throw new O.ErrnoError(29)}return en&&(Rt.node.timestamp=Date.now()),Ne}}),O.mkdev(ht,xt,At)},forceLoadFile:function(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Bt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{y.contents=Zi(Bt(y.url),!0),y.usedBytes=y.contents.length}catch(S){throw new O.ErrnoError(29)}},createLazyFile:function(y,S,P,j,ht){function xt(){this.lengthKnown=!1,this.chunks=[]}if(xt.prototype.get=function(Ne){if(!(Ne>this.length-1||Ne<0)){var Be=Ne%this.chunkSize;return this.getter(Ne/this.chunkSize|0)[Be]}},xt.prototype.setDataGetter=function(Ne){this.getter=Ne},xt.prototype.cacheLength=function(){var Ne=new XMLHttpRequest;if(Ne.open("HEAD",P,!1),Ne.send(null),!(Ne.status>=200&&Ne.status<300||304===Ne.status))throw new Error("Couldn't load "+P+". Status: "+Ne.status);var vn,Be=Number(Ne.getResponseHeader("Content-length")),ui=(vn=Ne.getResponseHeader("Accept-Ranges"))&&"bytes"===vn,gr=(vn=Ne.getResponseHeader("Content-Encoding"))&&"gzip"===vn,ki=1048576;ui||(ki=Be);var xi=this;xi.setDataGetter(function(Yi){var _r=Yi*ki,Kn=(Yi+1)*ki-1;if(Kn=Math.min(Kn,Be-1),void 0===xi.chunks[Yi]&&(xi.chunks[Yi]=function(Yi,_r){if(Yi>_r)throw new Error("invalid range ("+Yi+", "+_r+") or no bytes requested!");if(_r>Be-1)throw new Error("only "+Be+" bytes available! programmer error!");var Kn=new XMLHttpRequest;if(Kn.open("GET",P,!1),Be!==ki&&Kn.setRequestHeader("Range","bytes="+Yi+"-"+_r),"undefined"!=typeof Uint8Array&&(Kn.responseType="arraybuffer"),Kn.overrideMimeType&&Kn.overrideMimeType("text/plain; charset=x-user-defined"),Kn.send(null),!(Kn.status>=200&&Kn.status<300||304===Kn.status))throw new Error("Couldn't load "+P+". Status: "+Kn.status);return void 0!==Kn.response?new Uint8Array(Kn.response||[]):Zi(Kn.responseText||"",!0)}(_r,Kn)),void 0===xi.chunks[Yi])throw new Error("doXHR failed!");return xi.chunks[Yi]}),(gr||!Be)&&(ki=Be=1,Be=this.getter(0).length,ki=Be,he("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Be,this._chunkSize=ki,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Rt,te=O.createFile(y,S,Rt={isDevice:!1,url:P},j,ht);Rt.contents?te.contents=Rt.contents:Rt.url&&(te.contents=null,te.url=Rt.url),Object.defineProperties(te,{usedBytes:{get:function(){return this.contents.length}}});var Le={};return Object.keys(te.stream_ops).forEach(function(dn){var Ne=te.stream_ops[dn];Le[dn]=function(){return O.forceLoadFile(te),Ne.apply(null,arguments)}}),Le.read=function(Ne,Be,vn,ui,gr){O.forceLoadFile(te);var ki=Ne.node.contents;if(gr>=ki.length)return 0;var wr=Math.min(ki.length-gr,ui);if(ki.slice)for(var xi=0;xi<wr;xi++)Be[vn+xi]=ki[gr+xi];else for(xi=0;xi<wr;xi++)Be[vn+xi]=ki.get(gr+xi);return wr},te.stream_ops=Le,te},createPreloadedFile:function(y,S,P,j,ht,xt,At,Rt,te,Le){Browser.init();var en=S?pt.resolve(Ht.join2(y,S)):y;function dn(Ne){function Be(ui){Le&&Le(),Rt||O.createDataFile(y,S,ui,j,ht,te),xt&&xt(),$e()}var vn=!1;D.preloadPlugins.forEach(function(ui){vn||ui.canHandle(en)&&(ui.handle(Ne,en,Be,function(){At&&At(),$e()}),vn=!0)}),vn||Be(Ne)}On(),"string"==typeof P?function ae(y,S,P,j){var ht=j?"":"al "+y;re(y,function(xt){ve(xt,'Loading data file "'+y+'" failed (no arrayBuffer).'),S(new Uint8Array(xt)),ht&&$e()},function(xt){if(!P)throw'Loading data file "'+y+'" failed.';P()}),ht&&On()}(P,function(Ne){dn(Ne)},At):dn(P)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(y,S,P){S=S||function(){},P=P||function(){};var j=O.indexedDB();try{var ht=j.open(O.DB_NAME(),O.DB_VERSION)}catch(xt){return P(xt)}ht.onupgradeneeded=function(){he("creating db"),ht.result.createObjectStore(O.DB_STORE_NAME)},ht.onsuccess=function(){var Rt=ht.result.transaction([O.DB_STORE_NAME],"readwrite"),te=Rt.objectStore(O.DB_STORE_NAME),Le=0,en=0,dn=y.length;function Ne(){0==en?S():P()}y.forEach(function(Be){var vn=te.put(O.analyzePath(Be).object.contents,Be);vn.onsuccess=function(){++Le+en==dn&&Ne()},vn.onerror=function(){en++,Le+en==dn&&Ne()}}),Rt.onerror=P},ht.onerror=P},loadFilesFromDB:function(y,S,P){S=S||function(){},P=P||function(){};var j=O.indexedDB();try{var ht=j.open(O.DB_NAME(),O.DB_VERSION)}catch(xt){return P(xt)}ht.onupgradeneeded=P,ht.onsuccess=function(){var At=ht.result;try{var Rt=At.transaction([O.DB_STORE_NAME],"readonly")}catch(Be){return void P(Be)}var te=Rt.objectStore(O.DB_STORE_NAME),Le=0,en=0,dn=y.length;function Ne(){0==en?S():P()}y.forEach(function(Be){var vn=te.get(Be);vn.onsuccess=function(){O.analyzePath(Be).exists&&O.unlink(Be),O.createDataFile(Ht.dirname(Be),Ht.basename(Be),vn.result,!0,!0,!0),++Le+en==dn&&Ne()},vn.onerror=function(){en++,Le+en==dn&&Ne()}}),Rt.onerror=P},ht.onerror=P}},ie={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(y,S,P){if("/"===S[0])return S;var j;if(-100===y)j=O.cwd();else{var ht=O.getStream(y);if(!ht)throw new O.ErrnoError(8);j=ht.path}if(0==S.length){if(!P)throw new O.ErrnoError(44);return j}return Ht.join2(j,S)},doStat:function(y,S,P){try{var j=y(S)}catch(ht){if(ht&&ht.node&&Ht.normalize(S)!==Ht.normalize(O.getPath(ht.node)))return-54;throw ht}return qt[P>>2]=j.dev,qt[P+4>>2]=0,qt[P+8>>2]=j.ino,qt[P+12>>2]=j.mode,qt[P+16>>2]=j.nlink,qt[P+20>>2]=j.uid,qt[P+24>>2]=j.gid,qt[P+28>>2]=j.rdev,qt[P+32>>2]=0,z=[j.size>>>0,(un=j.size,+Math.abs(un)>=1?un>0?(0|Math.min(+Math.floor(un/4294967296),4294967295))>>>0:~~+Math.ceil((un-+(~~un>>>0))/4294967296)>>>0:0)],qt[P+40>>2]=z[0],qt[P+44>>2]=z[1],qt[P+48>>2]=4096,qt[P+52>>2]=j.blocks,qt[P+56>>2]=j.atime.getTime()/1e3|0,qt[P+60>>2]=0,qt[P+64>>2]=j.mtime.getTime()/1e3|0,qt[P+68>>2]=0,qt[P+72>>2]=j.ctime.getTime()/1e3|0,qt[P+76>>2]=0,z=[j.ino>>>0,(un=j.ino,+Math.abs(un)>=1?un>0?(0|Math.min(+Math.floor(un/4294967296),4294967295))>>>0:~~+Math.ceil((un-+(~~un>>>0))/4294967296)>>>0:0)],qt[P+80>>2]=z[0],qt[P+84>>2]=z[1],0},doMsync:function(y,S,P,j,ht){var xt=oe.slice(y,y+P);O.msync(S,xt,ht,P,j)},doMkdir:function(y,S){return"/"===(y=Ht.normalize(y))[y.length-1]&&(y=y.substr(0,y.length-1)),O.mkdir(y,S,0),0},doMknod:function(y,S,P){switch(61440&S){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return O.mknod(y,S,P),0},doReadlink:function(y,S,P){if(P<=0)return-28;var j=O.readlink(y),ht=Math.min(P,an(j)),xt=Yt[S+ht];return function Ge(y,S,P){return Ve(y,oe,S,P)}(j,S,P+1),Yt[S+ht]=xt,ht},doAccess:function(y,S){if(-8&S)return-28;var j=O.lookupPath(y,{follow:!0}).node;if(!j)return-44;var ht="";return 4&S&&(ht+="r"),2&S&&(ht+="w"),1&S&&(ht+="x"),ht&&O.nodePermissions(j,ht)?-2:0},doDup:function(y,S,P){var j=O.getStream(P);return j&&O.close(j),O.open(y,S,0,P,P).fd},doReadv:function(y,S,P,j){for(var ht=0,xt=0;xt<P;xt++){var Rt=qt[S+(8*xt+4)>>2],te=O.read(y,Yt,qt[S+8*xt>>2],Rt,j);if(te<0)return-1;if(ht+=te,te<Rt)break}return ht},doWritev:function(y,S,P,j){for(var ht=0,xt=0;xt<P;xt++){var te=O.write(y,Yt,qt[S+8*xt>>2],qt[S+(8*xt+4)>>2],j);if(te<0)return-1;ht+=te}return ht},varargs:void 0,get:function(){return ie.varargs+=4,qt[ie.varargs-4>>2]},getStr:function(y){return Ce(y)},getStreamFromFD:function(y){var S=O.getStream(y);if(!S)throw new O.ErrnoError(8);return S},get64:function(y,S){return y}};var Zn=[];function Xe(y){try{return Jt.grow(y-Tt.byteLength+65535>>>16),Ye(Jt.buffer),1}catch(S){}}var Tn={};function oi(){if(!oi.strings){var S={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:jt||"./this.program"};for(var P in Tn)void 0===Tn[P]?delete S[P]:S[P]=Tn[P];var j=[];for(var P in S)j.push(P+"="+S[P]);oi.strings=j}return oi.strings}var Mn=function(y,S,P,j){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=O.nextInode++,this.name=S,this.mode=P,this.node_ops={},this.stream_ops={},this.rdev=j};function Zi(y,S,P){var j=P>0?P:an(y)+1,ht=new Array(j),xt=Ve(y,ht,0,ht.length);return S&&(ht.length=xt),ht}Object.defineProperties(Mn.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(y){y?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(y){y?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return O.isDir(this.mode)}},isDevice:{get:function(){return O.isChrdev(this.mode)}}}),O.FSNode=Mn,O.staticInit();var Qe={A:function Qt(y,S){return function Vt(y,S){var P;if(0===y)P=Date.now();else{if(1!==y&&4!==y)return Pt(28),-1;P=bt()}return qt[S>>2]=P/1e3|0,qt[S+4>>2]=P%1e3*1e3*1e3|0,0}(y,S)},B:function Te(y,S){try{return y=ie.getStr(y),ie.doAccess(y,S)}catch(P){if(void 0===O||!(P instanceof O.ErrnoError))throw P;return-P.errno}},h:function ye(y,S,P){ie.varargs=P;try{var j=ie.getStreamFromFD(y);switch(S){case 0:return(ht=ie.get())<0?-28:O.open(j.path,j.flags,0,ht).fd;case 1:case 2:case 6:case 7:return 0;case 3:return j.flags;case 4:var ht=ie.get();return j.flags|=ht,0;case 5:return ht=ie.get(),fe[ht+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Pt(28),-1}}catch(Rt){if(void 0===O||!(Rt instanceof O.ErrnoError))throw Rt;return-Rt.errno}},x:function Ke(y,S){try{var P=ie.getStreamFromFD(y);return ie.doStat(O.stat,P.path,S)}catch(j){if(void 0===O||!(j instanceof O.ErrnoError))throw j;return-j.errno}},u:function Pe(y,S,P,j){try{S=ie.getStr(S);var ht=256&j,xt=4096&j;return j&=-4353,S=ie.calculateAt(y,S,xt),ie.doStat(ht?O.lstat:O.stat,S,P)}catch(At){if(void 0===O||!(At instanceof O.ErrnoError))throw At;return-At.errno}},y:function Fe(y,S,P){ie.varargs=P;try{var j=ie.getStreamFromFD(y);switch(S){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return j.tty?0:-59;case 21519:if(!j.tty)return-59;var ht=ie.get();return qt[ht>>2]=0,0;case 21520:return j.tty?-28:-59;case 21531:return ht=ie.get(),O.ioctl(j,S,ht);default:ln("bad ioctl syscall "+S)}}catch(xt){if(void 0===O||!(xt instanceof O.ErrnoError))throw xt;return-xt.errno}},k:function de(y,S,P,j,ht,xt){try{return function se(y,S,P,j,ht,xt){xt<<=12;var At,Rt=!1;if(0!=(16&j)&&y%65536!=0)return-28;if(0!=(32&j)){if(!(At=Wt(S)))return-48;Rt=!0}else{var te=O.getStream(ht);if(!te)return-8;var Le=O.mmap(te,y,S,xt,P,j);At=Le.ptr,Rt=Le.allocated}return ie.mappings[At]={malloc:At,len:S,allocated:Rt,fd:ht,prot:P,flags:j,offset:xt},At}(y,S,P,j,ht,xt)}catch(At){if(void 0===O||!(At instanceof O.ErrnoError))throw At;return-At.errno}},j:function fn(y,S){try{return function Re(y,S){var P=ie.mappings[y];if(0===S||!P)return-28;if(S===P.len){var j=O.getStream(P.fd);j&&2&P.prot&&ie.doMsync(y,j,S,P.flags,P.offset),ie.mappings[y]=null,P.allocated&&yt(P.malloc)}return 0}(y,S)}catch(P){if(void 0===O||!(P instanceof O.ErrnoError))throw P;return-P.errno}},e:function mn(y,S,P){ie.varargs=P;try{var j=ie.getStr(y),ht=P?ie.get():0;return O.open(j,S,ht).fd}catch(At){if(void 0===O||!(At instanceof O.ErrnoError))throw At;return-At.errno}},v:function je(y,S){try{return y=ie.getStr(y),ie.doStat(O.stat,y,S)}catch(P){if(void 0===O||!(P instanceof O.ErrnoError))throw P;return-P.errno}},z:function We(y){try{return y=ie.getStr(y),O.unlink(y),0}catch(S){if(void 0===O||!(S instanceof O.ErrnoError))throw S;return-S.errno}},r:function wn(){throw"longjmp"},q:function Rn(){ln("")},C:function Ri(y,S,P){var j=function zn(y,S){var P;for(Zn.length=0,S>>=2;P=oe[y++];){var j=P<105;j&&1&S&&S++,Zn.push(j?Ue[S++>>1]:qt[S]),++S}return Zn}(S,P);return $[y].apply(null,j)},o:function le(y,S,P){oe.copyWithin(y,S,S+P)},p:function _n(y){var S=oe.length,P=2147483648;if((y>>>=0)>P)return!1;for(var j=1;j<=4;j*=2){var ht=S*(1+.2/j);if(ht=Math.min(ht,y+100663296),Xe(Math.min(P,Cn(Math.max(y,ht),65536))))return!0}return!1},s:function _i(y,S){var P=0;return oi().forEach(function(j,ht){var xt=S+P;qt[y+4*ht>>2]=xt,function xe(y,S,P){for(var j=0;j<y.length;++j)Yt[S++>>0]=y.charCodeAt(j);P||(Yt[S>>0]=0)}(j,xt),P+=j.length+1}),0},t:function $n(y,S){var P=oi();qt[y>>2]=P.length;var j=0;return P.forEach(function(ht){j+=ht.length+1}),qt[S>>2]=j,0},a:function Li(y){!function Hi(y,S){!function vi(y){(function Ei(){return Ut||!1})()||(D.onExit&&D.onExit(y),ue=!0),Nt(y,new Me(y))}(y)}(y)},d:function jn(y){try{var S=ie.getStreamFromFD(y);return O.close(S),0}catch(P){if(void 0===O||!(P instanceof O.ErrnoError))throw P;return P.errno}},i:function bi(y,S,P,j){try{var ht=ie.getStreamFromFD(y),xt=ie.doReadv(ht,S,P);return qt[j>>2]=xt,0}catch(At){if(void 0===O||!(At instanceof O.ErrnoError))throw At;return At.errno}},n:function gn(y,S,P,j,ht){try{var xt=ie.getStreamFromFD(y),Rt=4294967296*P+(S>>>0),te=9007199254740992;return Rt<=-te||Rt>=te?-61:(O.llseek(xt,Rt,j),z=[xt.position>>>0,(un=xt.position,+Math.abs(un)>=1?un>0?(0|Math.min(+Math.floor(un/4294967296),4294967295))>>>0:~~+Math.ceil((un-+(~~un>>>0))/4294967296)>>>0:0)],qt[ht>>2]=z[0],qt[ht+4>>2]=z[1],xt.getdents&&0===Rt&&0===j&&(xt.getdents=null),0)}catch(Le){if(void 0===O||!(Le instanceof O.ErrnoError))throw Le;return Le.errno}},g:function hn(y,S,P,j){try{var ht=ie.getStreamFromFD(y),xt=ie.doWritev(ht,S,P);return qt[j>>2]=xt,0}catch(At){if(void 0===O||!(At instanceof O.ErrnoError))throw At;return At.errno}},c:function li(){return qe},w:function Ji(y){var S=Date.now();return qt[y>>2]=S/1e3|0,qt[y+4>>2]=S%1e3*1e3|0,0},l:function we(y,S,P,j,ht,xt,At){var Rt=Zt();try{return A(y)(S,P,j,ht,xt,At)}catch(te){if(ee(Rt),te!==te+0&&"longjmp"!==te)throw te;De(1,0)}},m:function sn(y,S){var P=Zt();try{A(y)(S)}catch(j){if(ee(P),j!==j+0&&"longjmp"!==j)throw j;De(1,0)}},b:function ci(y){!function(y){qe=y}(y)},f:function zi(y){var S=Date.now()/1e3|0;return y&&(qt[y>>2]=S),S}};(function Vn(){var y={a:Qe};function S(At,Rt){D.asm=At.exports,Ye((Jt=D.asm.D).buffer),bn=D.asm.M,function ji(y){Pi.unshift(y)}(D.asm.E),$e()}function P(At){S(At.instance)}function j(At){return function Di(){return $t||"function"!=typeof fetch?Promise.resolve().then(function(){return be(Dn)}):fetch(Dn,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+Dn+"'";return y.arrayBuffer()}).catch(function(){return be(Dn)})}().then(function(Rt){return WebAssembly.instantiate(Rt,y)}).then(function(Rt){return Rt}).then(At,function(Rt){_e("failed to asynchronously prepare wasm: "+Rt),ln(Rt)})}if(On(),D.instantiateWasm)try{return D.instantiateWasm(y,S)}catch(At){return _e("Module.instantiateWasm callback failed with error: "+At),!1}return function ht(){return $t||"function"!=typeof WebAssembly.instantiateStreaming||gi(Dn)||"function"!=typeof fetch?j(P):fetch(Dn,{credentials:"same-origin"}).then(function(At){return WebAssembly.instantiateStreaming(At,y).then(P,function(te){return _e("wasm streaming compile failed: "+te),_e("falling back to ArrayBuffer instantiation"),j(P)})})}().catch(St),{}})(),D.___wasm_call_ctors=function(){return(D.___wasm_call_ctors=D.asm.E).apply(null,arguments)};var Qn=D._emscripten_bind_VoidPtr___destroy___0=function(){return(Qn=D._emscripten_bind_VoidPtr___destroy___0=D.asm.F).apply(null,arguments)},In=D._emscripten_bind_Graphviz_Graphviz_2=function(){return(In=D._emscripten_bind_Graphviz_Graphviz_2=D.asm.G).apply(null,arguments)},b=D._emscripten_bind_Graphviz_version_0=function(){return(b=D._emscripten_bind_Graphviz_version_0=D.asm.H).apply(null,arguments)},k=D._emscripten_bind_Graphviz_lastError_0=function(){return(k=D._emscripten_bind_Graphviz_lastError_0=D.asm.I).apply(null,arguments)},B=D._emscripten_bind_Graphviz_layout_3=function(){return(B=D._emscripten_bind_Graphviz_layout_3=D.asm.J).apply(null,arguments)},it=D._emscripten_bind_Graphviz_createFile_2=function(){return(it=D._emscripten_bind_Graphviz_createFile_2=D.asm.K).apply(null,arguments)},ut=D._emscripten_bind_Graphviz___destroy___0=function(){return(ut=D._emscripten_bind_Graphviz___destroy___0=D.asm.L).apply(null,arguments)};D._malloc=function(){return(D._malloc=D.asm.N).apply(null,arguments)};var Oe,yt=D._free=function(){return(yt=D._free=D.asm.O).apply(null,arguments)},Ot=D.___errno_location=function(){return(Ot=D.___errno_location=D.asm.P).apply(null,arguments)},Zt=D.stackSave=function(){return(Zt=D.stackSave=D.asm.Q).apply(null,arguments)},ee=D.stackRestore=function(){return(ee=D.stackRestore=D.asm.R).apply(null,arguments)},De=D._setThrew=function(){return(De=D._setThrew=D.asm.S).apply(null,arguments)},ze=D._memalign=function(){return(ze=D._memalign=D.asm.T).apply(null,arguments)};function Me(y){this.name="ExitStatus",this.message="Program terminated with exit("+y+")",this.status=y}function Jn(y){function S(){Oe||(Oe=!0,D.calledRun=!0,!ue&&(function Bi(){!D.noFSInit&&!O.init.initialized&&O.init(),O.ignorePermissions=!1,ct(Pi)}(),mt(D),D.onRuntimeInitialized&&D.onRuntimeInitialized(),function Fi(){if(D.postRun)for("function"==typeof D.postRun&&(D.postRun=[D.postRun]);D.postRun.length;)y=D.postRun.shift(),pi.unshift(y);var y;ct(pi)}()))}tn>0||(function er(){if(D.preRun)for("function"==typeof D.preRun&&(D.preRun=[D.preRun]);D.preRun.length;)y=D.preRun.shift(),si.unshift(y);var y;ct(si)}(),tn>0)||(D.setStatus?(D.setStatus("Running..."),setTimeout(function(){setTimeout(function(){D.setStatus("")},1),S()},1)):S())}if(yi=function y(){Oe||Jn(),Oe||(yi=y)},D.run=Jn,D.preInit)for("function"==typeof D.preInit&&(D.preInit=[D.preInit]);D.preInit.length>0;)D.preInit.pop()();function Hn(){}function Nn(y){return(y||Hn).__cache__}function Ci(y,S){var P=Nn(S),j=P[y];return j||((j=Object.create((S||Hn).prototype)).ptr=y,P[y]=j)}Jn(),(Hn.prototype=Object.create(Hn.prototype)).constructor=Hn,Hn.prototype.__class__=Hn,Hn.__cache__={},D.WrapperObject=Hn,D.getCache=Nn,D.wrapPointer=Ci,D.castObject=function Ki(y,S){return Ci(y.ptr,S)},D.NULL=Ci(0),D.destroy=function Bn(y){if(!y.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";y.__destroy__(),delete Nn(y.__class__)[y.ptr]},D.compare=function va(y,S){return y.ptr===S.ptr},D.getPointer=function za(y){return y.ptr},D.getClass=function Mr(y){return y.__class__};var An={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(An.needed){for(var y=0;y<An.temps.length;y++)D._free(An.temps[y]);An.temps.length=0,D._free(An.buffer),An.buffer=0,An.size+=An.needed,An.needed=0}An.buffer||(An.size+=128,An.buffer=D._malloc(An.size),ve(An.buffer)),An.pos=0},alloc:function(y,S){ve(An.buffer);var ht,j=y.length*S.BYTES_PER_ELEMENT;return An.pos+(j=j+7&-8)>=An.size?(ve(j>0),An.needed+=j,ht=D._malloc(j),An.temps.push(ht)):(ht=An.buffer+An.pos,An.pos+=j),ht},copy:function(y,S,P){switch(P>>>=0,S.BYTES_PER_ELEMENT){case 2:P>>>=1;break;case 4:P>>>=2;break;case 8:P>>>=3}for(var ht=0;ht<y.length;ht++)S[P+ht]=y[ht]}};function mr(y){if("string"==typeof y){var S=Zi(y),P=An.alloc(S,Yt);return An.copy(S,Yt,P),P}return y}function qi(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Yn(y,S){y&&"object"==typeof y&&(y=y.ptr),S&&"object"==typeof S&&(S=S.ptr),this.ptr=In(y,S),Nn(Yn)[this.ptr]=this}return(qi.prototype=Object.create(Hn.prototype)).constructor=qi,qi.prototype.__class__=qi,qi.__cache__={},D.VoidPtr=qi,qi.prototype.__destroy__=qi.prototype.__destroy__=function(){Qn(this.ptr)},(Yn.prototype=Object.create(Hn.prototype)).constructor=Yn,Yn.prototype.__class__=Yn,Yn.__cache__={},D.Graphviz=Yn,Yn.prototype.version=Yn.prototype.version=function(){return Ce(b(this.ptr))},Yn.prototype.lastError=Yn.prototype.lastError=function(){return Ce(k(this.ptr))},Yn.prototype.layout=Yn.prototype.layout=function(y,S,P){var j=this.ptr;return An.prepare(),y=y&&"object"==typeof y?y.ptr:mr(y),S=S&&"object"==typeof S?S.ptr:mr(S),P=P&&"object"==typeof P?P.ptr:mr(P),Ce(B(j,y,S,P))},Yn.prototype.createFile=Yn.prototype.createFile=function(y,S){var P=this.ptr;An.prepare(),y=y&&"object"==typeof y?y.ptr:mr(y),S=S&&"object"==typeof S?S.ptr:mr(S),it(P,y,S)},Yn.prototype.__destroy__=Yn.prototype.__destroy__=function(){ut(this.ptr)},V.ready}}();H.exports=nt}(M);var Z=Object.freeze(c({__proto__:null,default:M.exports},[M.exports])),Y=function(){return Y=Object.assign||function(H){for(var Q,nt=1,tt=arguments.length;nt<tt;nt++)for(var V in Q=arguments[nt])Object.prototype.hasOwnProperty.call(Q,V)&&(H[V]=Q[V]);return H},Y.apply(this,arguments)},U=function(H,Q,nt){if(nt||2===arguments.length)for(var D,tt=0,V=Q.length;tt<V;tt++)(D||!(tt in Q))&&(D||(D=Array.prototype.slice.call(Q,0,tt)),D[tt]=Q[tt]);return H.concat(D||Array.prototype.slice.call(Q))};function rt(H){return{path:H.path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'.concat(H.width,'" height="').concat(H.height,'"></svg>')}}function st(H,Q){var nt=Y({images:[],files:[]},Q);U(U([],nt.files,!0),function q(H){return H.map(rt)}(nt.images),!0).forEach(function(tt){return H.createFile(tt.path,tt.data)})}var X={layout:function(H,Q,nt,tt){return void 0===Q&&(Q="svg"),void 0===nt&&(nt="dot"),H?u(Z,null==tt?void 0:tt.wasmFolder,null==tt?void 0:tt.wasmBinary).then(function(V){var D=new V.Graphviz(void 0!==(null==tt?void 0:tt.yInvert)&&(null==tt?void 0:tt.yInvert),void 0!==(null==tt?void 0:tt.nop)?null==tt?void 0:tt.nop:0);st(D,tt);var mt=D.layout(H,Q,nt);if(V.destroy(D),!mt)throw new Error(V.Graphviz.prototype.lastError());return mt}):Promise.resolve("")},circo:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"circo",nt)},dot:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"dot",nt)},fdp:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"fdp",nt)},sfdp:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"sfdp",nt)},neato:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"neato",nt)},osage:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"osage",nt)},patchwork:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"patchwork",nt)},twopi:function(H,Q,nt){return void 0===Q&&(Q="svg"),this.layout(H,Q,"twopi",nt)}},W=function(){function H(Q){this._wasm=Q}return H.prototype.layout=function(Q,nt,tt,V){if(void 0===nt&&(nt="svg"),void 0===tt&&(tt="dot"),!Q)return"";var D=new this._wasm.Graphviz((null==V?void 0:V.yInvert)?1:0,(null==V?void 0:V.nop)?null==V?void 0:V.nop:0);st(D,V);var mt=D.layout(Q,nt,tt);if(this._wasm.destroy(D),!mt)throw new Error(this._wasm.Graphviz.prototype.lastError());return mt},H.prototype.circo=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"circo",tt)},H.prototype.dot=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"dot",tt)},H.prototype.fdp=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"fdp",tt)},H.prototype.sfdp=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"sfdp",tt)},H.prototype.neato=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"neato",tt)},H.prototype.osage=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"osage",tt)},H.prototype.patchwork=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"patchwork",tt)},H.prototype.twopi=function(Q,nt,tt){return void 0===nt&&(nt="svg"),this.layout(Q,nt,"twopi",tt)},H}();s.GraphvizSync=W,s.StackElement=m,s.StackParser=T,s.expatVersion=function I(H,Q){return u(g,H,Q).then(function(nt){return nt.CExpat.prototype.version()})},s.graphviz=X,s.graphvizSync=function at(H,Q){return u(Z,H,Q).then(function(nt){return new W(nt)})},s.graphvizVersion=function K(H,Q){return u(Z,H,Q).then(function(nt){return nt.Graphviz.prototype.version()})},s.parse=R,s.wasmFolder=l,Object.defineProperty(s,"__esModule",{value:!0})}(E)},36346:(w,E,s)=>{"use strict";s.r(E),s.d(E,{AdminModule:()=>Ty});var c={};s.r(c),s.d(c,{forceCenter:()=>sd,forceCollide:()=>Uo,forceLink:()=>Yo,forceManyBody:()=>Xo,forceRadial:()=>Md,forceSimulation:()=>Wo,forceX:()=>Nd,forceY:()=>Pd});var x={};s.r(x),s.d(x,{dispatch:()=>ba.Z});var _={};s.r(_),s.d(_,{interval:()=>Rd,now:()=>or.zO,timeout:()=>$a.Z,timer:()=>or.HT,timerFlush:()=>or.R8});var g=s(69808),p=s(36157),t=s(5e3),d=s(77968),l=s(4235),h=s(25245),f=s(61283),u=s(51062);const m=function(){return{color:"black"}};let T=(()=>{class n{constructor(e){this.sideMenuService=e}ngOnInit(){this.sideMenuService.setAdminItems([])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-page"]],decls:7,vars:5,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","admin-theme"],[1,"page-title","d-flex"],["svgIcon","perun-perun-admin",1,"perun-icon","icon-scale",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.TgZ(2,"h1",1),t._UZ(3,"mat-icon",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(4,m)),t.xp6(1),t.hij(" ",t.lcZ(5,2,"ADMIN.TITLE")," "))},directives:[l.W,h.Hw,g.PC,f.A],pipes:[u.X$],styles:[""]}),n})();var L=s(71135);let I=(()=>{class n{constructor(){this.navItems=[{cssIcon:"perun-attributes",url:"/admin/attributes",label:"MENU_ITEMS.ADMIN.ATTRIBUTES",style:"admin-btn"},{cssIcon:"perun-user",url:"/admin/users",label:"MENU_ITEMS.ADMIN.USERS",style:"admin-btn"},{cssIcon:"perun-owner-grey",url:"/admin/owners",label:"MENU_ITEMS.ADMIN.OWNERS",style:"admin-btn"},{cssIcon:"perun-service",url:"/admin/services",label:"MENU_ITEMS.ADMIN.SERVICES",style:"admin-btn"},{cssIcon:"perun-preview",url:"/admin/visualizer",label:"MENU_ITEMS.ADMIN.VISUALIZER",style:"admin-btn"},{cssIcon:"perun-external-sources",url:"/admin/ext_sources",label:"MENU_ITEMS.ADMIN.EXT_SOURCES",style:"admin-btn"},{cssIcon:"perun-audit-log",url:"/admin/audit_log",label:"MENU_ITEMS.ADMIN.AUDIT_LOG",style:"admin-btn"},{cssIcon:"perun-consent-hubs",url:"/admin/consent_hubs",label:"MENU_ITEMS.ADMIN.CONSENT_HUBS",style:"admin-btn"},{cssIcon:"perun-searcher",url:"/admin/searcher",label:"MENU_ITEMS.ADMIN.SEARCHER",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.navItems)("size","small"))},directives:[L.L],styles:[""]}),n})();var R=s(20449),M=s(48966),F=s(32075),Z=s(32080),Y=s(32105),U=s(20773),rt=s(98380),q=s(47423);function st(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function K(n,r){1&n&&t._UZ(0,"th",16)}function X(n,r){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function W(n,r){1&n&&t._UZ(0,"tr",18)}function at(n,r){1&n&&t._UZ(0,"tr",19)}function H(n,r){if(1&n&&(t.TgZ(0,"div",7),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,K,1,0,"th",11),t.YNc(10,X,2,1,"td",12),t.BQk(),t.YNc(11,W,1,0,"tr",13),t.YNc(12,at,1,0,"tr",14),t.qZA(),t.TgZ(13,"perun-web-apps-alert",15),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE2")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.hij(" ",t.lcZ(15,10,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.WARNING")," ")}}let Q=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.attributesManager=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.dataSource=new F.by(this.data.attributes)}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0;const e=[];for(const i of this.data.attributes)e.push(i.id);this.attributesManager.deleteAttributeDefinitions(e).subscribe(()=>{this.translate.get("DIALOGS.DELETE_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Y.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-attribute-definition-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","","data-cy","confirm-delete-attr-definition-button",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",1,"mt-3"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,st,1,0,"mat-spinner",1),t.YNc(5,H,16,12,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onSubmit()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},directives:[M.uh,g.O5,U.Ou,M.xY,F.BZ,F.w1,F.fO,F.ge,F.Dz,F.ev,F.as,F.XQ,F.nj,F.Gk,rt.w,M.H8,q.lW],pipes:[u.X$],styles:[""]}),n})();var nt=s(93075),tt=s(78372),V=s(63900),D=s(61135),mt=s(68306),St=s(38421),Mt=s(75797),Et=s(60515),jt=s(25403),Nt=s(63269);function ft(...n){const r=(0,Nt.jO)(n),e=(0,Mt.k)(n);return e.length?new mt.y(i=>{let a=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{a=o=null});for(let v=0;!i.closed&&v<e.length;v++)(0,St.Xf)(e[v]).subscribe((0,jt.x)(i,C=>{if(a[v].push(C),a.every(N=>N.length)){const N=a.map(G=>G.shift());i.next(r?r(...N):N),a.some((G,et)=>!G.length&&o[et])&&i.complete()}},()=>{o[v]=!0,!a[v].length&&i.complete()}));return()=>{a=o=null}}):Et.E}var dt=s(39646),wt=s(19516),Bt=s(67322),re=s(98833),ce=s(74533),he=s(74107),_e=s(90508),qe=s(29772),ke=s(32368),It=s(4765);function $t(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.ALo(1,"translate"),t.TgZ(2,"mat-slide-toggle",2),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().attDef.unique=a}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}if(2&n){const e=r.ngIf,i=t.oxw();t.s9C("matTooltip",t.lcZ(1,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.TOOLTIP")),t.Q6J("matTooltipDisabled",!e.disable),t.xp6(2),t.Q6J("ngModel",i.attDef.unique)("disabled",e.disable),t.xp6(1),t.hij(" ",t.lcZ(4,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.UNIQUE")," ")}}const Ut=function(n){return{disable:n}};let Jt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-unique-toggle"]],inputs:{attDef:"attDef"},decls:2,vars:5,consts:[["class","unique-toggle-container","matTooltipPosition","above",3,"matTooltipDisabled","matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"unique-toggle-container",3,"matTooltipDisabled","matTooltip"],["color","accent","labelPosition","before",3,"ngModel","disabled","ngModelChange"]],template:function(e,i){1&e&&(t.YNc(0,$t,5,9,"div",0),t.ALo(1,"disableUniqueAttribute")),2&e&&t.Q6J("ngIf",t.VKq(3,Ut,t.lcZ(1,1,i.attDef)))},directives:[g.O5,qe.gM,ke.Rr,nt.JJ,nt.On],pipes:[u.X$,It.b],styles:[".unique-toggle-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:1em 0;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;font-size:1.125rem}"]}),n})();var ue=s(53251),ve=s(23123);function Se(n,r){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.ALo(2,"displayedRole"),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function Ie(n,r){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}let Ce=(()=>{class n{constructor(e){this.attrRightsService=e,this.policyRemoved=new t.vpe,this.roles=this.attrRightsService.getRoles()}ngOnInit(){this.selectedRole=new D.X(this.policy.role),this.objects=this.selectedRole.pipe((0,V.w)(e=>this.attrRightsService.getObjects(e)))}changeRole(e){this.selectedRole.next(e.value),this.policy.object="None"}remove(){this.policyRemoved.emit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-item"]],inputs:{policy:"policy"},outputs:{policyRemoved:"policyRemoved"},decls:14,vars:14,consts:[[1,"flex-row"],[1,"grow-item"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","",1,"close-button",3,"click"],["inline","true"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-form-field",1),t.TgZ(2,"mat-select",2),t.NdJ("ngModelChange",function(o){return i.policy.role=o})("selectionChange",function(o){return i.changeRole(o)}),t.ALo(3,"translate"),t.YNc(4,Se,3,4,"mat-option",3),t.ALo(5,"async"),t.qZA(),t.qZA(),t.TgZ(6,"mat-form-field"),t.TgZ(7,"mat-select",4),t.NdJ("ngModelChange",function(o){return i.policy.object=o}),t.ALo(8,"translate"),t.YNc(9,Ie,2,2,"mat-option",3),t.ALo(10,"async"),t.qZA(),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){return i.remove()}),t.TgZ(12,"mat-icon",6),t._uU(13,"remove_circle"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.s9C("placeholder",t.lcZ(3,6,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ROLE")),t.Q6J("ngModel",i.policy.role),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,8,i.roles)),t.xp6(3),t.s9C("placeholder",t.lcZ(8,10,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ENTITY")),t.Q6J("ngModel",i.policy.object),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,12,i.objects)))},directives:[Bt.KE,he.gD,nt.JJ,nt.On,g.sg,_e.ey,q.lW,h.Hw],pipes:[u.X$,g.Ov,ve.i],styles:[".flex-row[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;background:white;border-radius:1em;padding:1em 1em 0}.grow-item[_ngcontent-%COMP%]{flex-grow:2;margin:0 1em}.close-button[_ngcontent-%COMP%]{position:absolute;font-size:1.3em;top:-15px;right:-15px;z-index:100}"]}),n})();function Ve(n,r){1&n&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.AND")," "))}function Ge(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"perun-web-apps-attribute-rights-item",7),t.NdJ("policyRemoved",function(){const o=t.CHM(e).index;return t.oxw(2).removePolicy(o)}),t.qZA(),t.YNc(2,Ve,3,3,"div",8),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw(2);t.xp6(1),t.Q6J("policy",e),t.xp6(1),t.Q6J("ngIf",i!==a.collection.policies.length-1)}}function an(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.YNc(2,Ge,3,2,"div",3),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeCollection()}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().addPolicy()}),t.TgZ(8,"mat-icon"),t._uU(9,"add_circle"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.collection.policies)}}let xe=(()=>{class n{constructor(){this.collectionRemoved=new t.vpe}addPolicy(){this.collection.policies.push({id:-1,role:null,object:null,policyCollectionId:this.collection.id})}removePolicy(e){this.collection.policies.splice(e,1),0===this.collection.policies.length&&this.removeCollection()}removeCollection(){this.collectionRemoved.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-collection"]],inputs:{collection:"collection"},outputs:{collectionRemoved:"collectionRemoved"},decls:1,vars:1,consts:[["class","collection",4,"ngIf"],[1,"collection"],[1,"column","role-selection"],[4,"ngFor","ngForOf"],[1,"column","controls"],["mat-icon-button","",3,"click"],["color","accent","mat-icon-button","",3,"click"],[3,"policy","policyRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,i){1&e&&t.YNc(0,an,10,1,"div",0),2&e&&t.Q6J("ngIf",i.collection)},directives:[g.O5,g.sg,Ce,q.lW,h.Hw],pipes:[u.X$],styles:[".collection[_ngcontent-%COMP%]{background-color:#0000001a;padding:1em;border-radius:1em;margin-top:1em;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1em}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}.role-selection[_ngcontent-%COMP%]{flex-grow:2}.controls[_ngcontent-%COMP%]{align-items:flex-end;justify-content:center}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em}"]}),n})();function Cn(n,r){1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.OR")," "))}function Tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"perun-web-apps-attribute-rights-collection",5),t.NdJ("collectionRemoved",function(){const o=t.CHM(e).index;return t.oxw().removeCollection(o)}),t.qZA(),t.YNc(2,Cn,3,3,"div",6),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw();t.xp6(1),t.Q6J("collection",e.action===a.action?e:null),t.xp6(1),t.Q6J("ngIf",i!==a.lastIndex&&e.action===a.action)}}let Yt=(()=>{class n{ngOnChanges(){this.lastIndex=this.findLastIndex()}addCollection(){this.collections.push({id:-1,attributeId:this.attributeId,action:this.action,policies:[{id:-1,role:null,object:null,policyCollectionId:-1}]}),this.lastIndex=this.findLastIndex()}removeCollection(e){this.collections.splice(e,1),this.lastIndex=this.findLastIndex()}findLastIndex(){let e=0;for(let i=0;i<this.collections.length;i++)this.collections[i].action===this.action&&(e=i);return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-tab"]],inputs:{attributeId:"attributeId",collections:"collections",action:"action"},features:[t.TTD],decls:8,vars:4,consts:[["alert_type","info"],[4,"ngFor","ngForOf"],[1,"button-container"],["color","accent","mat-icon-button","",1,"add-button",3,"click"],["inline","true"],[3,"collection","collectionRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,i){1&e&&(t.TgZ(0,"perun-web-apps-alert",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Tt,3,2,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.addCollection()}),t.TgZ(6,"mat-icon",4),t._uU(7,"add_circle"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.INFO"),"\n"),t.xp6(2),t.Q6J("ngForOf",i.collections))},directives:[rt.w,g.sg,xe,g.O5,q.lW,h.Hw],pipes:[u.X$],styles:[".add-button[_ngcontent-%COMP%]{font-size:2em}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em;font-weight:700}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1em}"]}),n})();function oe(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate")),2&n){const e=t.oxw().$implicit;t.hij(" ",t.lcZ(1,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS."+e)," ")}}function fe(n,r){if(1&n&&(t.TgZ(0,"mat-tab"),t.YNc(1,oe,2,3,"ng-template",1),t._UZ(2,"perun-web-apps-attribute-rights-tab",2),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Q6J("attributeId",null==i.attDef?null:i.attDef.id)("collections",i.collections)("action",e)}}let qt=(()=>{class n{constructor(){this.collections=[],this.actionTabs=["READ","WRITE"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-tab-group"]],inputs:{attDef:"attDef",collections:"collections"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matTabLabel",""],[3,"attributeId","collections","action"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group"),t.YNc(1,fe,3,3,"mat-tab",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.actionTabs))},directives:[ue.SP,g.sg,ue.uX,ue.uD,Yt],pipes:[u.X$],styles:[""]}),n})(),Ue=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(".")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"attributeTypeClean",type:n,pure:!0}),n})();function Ye(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function bn(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function si(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Pi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function pi(n,r){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function fi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Ei(n,r){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function er(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Bi(n,r){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function Fi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function mi(n,r){if(1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"form",9),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",10),t.ALo(4,"translate"),t.YNc(5,bn,3,3,"mat-error",11),t.qZA(),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",12),t.ALo(8,"translate"),t.YNc(9,si,3,3,"mat-error",11),t.qZA(),t.TgZ(10,"mat-form-field"),t.TgZ(11,"textarea",13),t.ALo(12,"translate"),t._uU(13,"        "),t.qZA(),t.YNc(14,Pi,3,3,"mat-error",11),t.qZA(),t.TgZ(15,"mat-form-field"),t.TgZ(16,"mat-select",14),t.ALo(17,"translate"),t.YNc(18,pi,2,2,"mat-option",15),t.qZA(),t.YNc(19,fi,3,3,"mat-error",11),t.qZA(),t.TgZ(20,"mat-form-field"),t.TgZ(21,"mat-select",16),t.ALo(22,"translate"),t.YNc(23,Ei,2,2,"mat-option",15),t.qZA(),t.YNc(24,er,3,3,"mat-error",11),t.qZA(),t.TgZ(25,"mat-form-field"),t.TgZ(26,"mat-select",17),t.ALo(27,"translate"),t.YNc(28,Bi,3,4,"mat-option",15),t.qZA(),t.YNc(29,Fi,3,3,"mat-error",11),t.qZA(),t.qZA(),t._UZ(30,"perun-web-apps-attribute-unique-toggle",18),t.ALo(31,"async"),t._UZ(32,"perun-web-apps-attribute-rights-tab-group",19),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,18,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FRIENDLY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","friendlyName")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,20,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","displayName")),t.xp6(2),t.s9C("placeholder",t.lcZ(12,22,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(2),t.s9C("placeholder",t.lcZ(17,24,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ENTITY")),t.xp6(2),t.Q6J("ngForOf",e.entities),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","entity")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,26,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DEFINITION")),t.xp6(2),t.Q6J("ngForOf",e.definitionTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","definitionType")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,28,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VALUE_TYPE")),t.xp6(2),t.Q6J("ngForOf",e.valueTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","valueType")),t.xp6(1),t.Q6J("attDef",t.lcZ(31,30,e.attDef)),t.xp6(2),t.Q6J("collections",e.collections)}}let ji=(()=>{class n{constructor(e,i,a,o,v,C,N){this.dialogRef=e,this.formBuilder=i,this.attributeService=a,this.attributeRightsService=o,this.notificator=v,this.translate=C,this.uniqueAttPipe=N,this.loading=!1,this.attributeControl=this.formBuilder.group({friendlyName:["",nt.kI.required],displayName:["",nt.kI.required],description:["",nt.kI.required],entity:["",nt.kI.required],definitionType:["",nt.kI.required],valueType:["",nt.kI.required]}),this.entities=["facility","resource","group","group_resource","host","member","member_group","member_resource","user","ues","user_facility","vo","entityless"],this.definitionTypes=["def","opt","virt","core"],this.valueTypes=["java.lang.String","java.lang.Integer","java.lang.Boolean","java.util.Array","java.util.LinkedHashMap"],this.attDef=new D.X({id:0,beanName:"",namespace:"",unique:!1}),this.collections=[],this.attributeControl.valueChanges.pipe((0,tt.b)(200)).subscribe(G=>{this.setAttribute(G)})}submit(){this.loading=!0,this.attributeService.createAttributeDefinition({attribute:this.attDef.getValue()}).pipe((0,V.w)(e=>ft((0,dt.of)(e.id),(0,dt.of)(this.collections))),this.attributeRightsService.addAttributeId(),this.attributeRightsService.filterNullInPolicy(),(0,V.w)(e=>this.attributeService.setAttributePolicyCollections({policyCollections:e}))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}cancel(){this.dialogRef.close(!1)}setAttribute(e){const i={id:0,beanName:"",friendlyName:e.friendlyName,displayName:e.displayName,description:e.description,type:e.valueType,namespace:this.createNamespace(e.entity,e.definitionType)};i.unique=this.attDef.getValue().unique&&!this.uniqueAttPipe.transform(i),this.attDef.next(i)}createNamespace(e,i){return"urn:perun:"+e+":attribute-def:"+i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(nt.qu),t.Y36(Y.H8),t.Y36(Z.eE),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(wt.bY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-attribute-definition-dialog"]],features:[t._Bn([wt.bY])],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","create-attr-definition-button","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"dialog-container",3,"formGroup"],["matInput","","formControlName","friendlyName","data-cy","attribute-friendly-name-input","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","displayName","data-cy","attribute-display-name-input","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","data-cy","attribute-description-input","required","",3,"placeholder"],["formControlName","entity","data-cy","attribute-entity-input","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","definitionType","data-cy","attribute-definition-type-input","required","",3,"placeholder"],["formControlName","valueType","data-cy","attribute-value-type-input","required","",3,"placeholder"],[3,"attDef"],[3,"collections"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ye,1,0,"mat-spinner",2),t.YNc(5,mi,33,32,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.cancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.submit()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading||i.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},directives:[M.uh,g.O5,U.Ou,M.xY,nt._Y,nt.JL,nt.sg,Bt.KE,re.Nt,nt.Fj,nt.JJ,nt.u,nt.Q7,Bt.TO,ce.IC,he.gD,g.sg,_e.ey,Jt,qt,M.H8,q.lW],pipes:[u.X$,Ue,g.Ov],styles:[""]}),n})();var Ee=s(9244),tn=s(10036);function yi(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function Qi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"perun-web-apps-alert",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",10),t.TgZ(5,"input",11),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().value=a}),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.IMPORT_ATTRIBUTE.INFO")," "),t.xp6(3),t.Q6J("ngModel",e.value)("placeholder",t.lcZ(6,5,"DIALOGS.IMPORT_ATTRIBUTE.HINT"))}}let On=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.notificator=i,this.translate=a,this.attributesManager=o,this.attributesRightsService=v,this.value="",this.loading=!1}create(){this.loading=!0,this.attributeData=JSON.parse(this.value),this.attributesManager.createAttributeDefinition({attribute:this.attributeData.attributeDefinition}).pipe((0,V.w)(e=>ft((0,dt.of)(e.id),(0,dt.of)(this.attributeData.attributeRights))),this.attributesRightsService.addAttributeId(),(0,V.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e}))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.IMPORT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Y.H8),t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attribute-import-dialog"]],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","info"],[1,"w-100"],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,yi,1,0,"mat-spinner",2),t.YNc(5,Qi,7,7,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.dialogRef.close()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.create()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.IMPORT_ATTRIBUTE.TITLE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.IMPORT_ATTRIBUTE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===i.value.trim().length||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.IMPORT_ATTRIBUTE.CREATE")," "))},directives:[M.uh,g.O5,U.Ou,M.xY,rt.w,Bt.KE,re.Nt,nt.Fj,nt.Q7,nt.JJ,nt.On,M.H8,q.lW],pipes:[u.X$],styles:[""]}),n})();var $e=s(96214),ln=s(7434),En=s(84847),gi=s(36769),Dn=s(68675),be=s(69287),Di=s(81125),Vn=s(60205),un=s(33604),z=s(18750),$=s(77446),ct=s(43532);function A(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",22),t.TgZ(1,"mat-checkbox",23),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return a?o.masterToggle():null}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",24),t.TgZ(1,"mat-checkbox",25),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,C=t.oxw(2);return a?C.selection.toggle(v):null})("click",function(a){return a.stopPropagation()}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))}}function Dt(n,r){1&n&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.KEY")," "))}function Pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"label"),t.TgZ(2,"input",28),t.NdJ("ngModelChange",function(){const o=t.CHM(e).$implicit;return t.oxw(2).onValueChange(o)})("ngModelChange",function(a){return t.CHM(e).$implicit[0]=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngModel",e[0])}}function Vt(n,r){1&n&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.VALUE")," "))}function Qt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"perun-web-apps-attribute-value",29),t.NdJ("sendEventToParent2",function(){const o=t.CHM(e).$implicit;return t.oxw(2).onValueChange(o)}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("attribute",e[1])}}function Ht(n,r){1&n&&t._UZ(0,"tr",30)}function J(n,r){1&n&&t._UZ(0,"tr",31)}function pt(n,r){if(1&n&&(t.TgZ(0,"div",10),t.TgZ(1,"perun-web-apps-table-wrapper",11),t.TgZ(2,"table",12),t.ynx(3,13),t.YNc(4,A,2,3,"th",14),t.YNc(5,bt,2,2,"td",15),t.BQk(),t.ynx(6,16),t.YNc(7,Dt,3,3,"th",17),t.YNc(8,Pt,3,1,"td",18),t.BQk(),t.ynx(9,19),t.YNc(10,Vt,3,3,"th",17),t.YNc(11,Qt,2,1,"td",18),t.BQk(),t.YNc(12,Ht,1,0,"tr",20),t.YNc(13,J,1,0,"tr",21),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("dataLength",e.dataSource.filteredData.length)("hideExport",!0)("tableId",e.tableId),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function gt(n,r){1&n&&t._UZ(0,"mat-spinner",32)}function _t(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.NO_KEYS_WARNING")," "))}let zt=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.attributesManager=v,this.switchView=new t.vpe,this.records=[],this.displayedColumns=["select","key","value"],this.dataSource=new F.by,this.selection=new R.Ov(!0,[]),this.isAddButtonDisabled=!1,this.pageSizeOptions=Ee.f7}set matSort(e){this.sort=e}ngOnChanges(){this.ngOnInit()}ngOnInit(){this.loading=!0,this.attDef=this.data.attDef,this.attributesManager.getEntitylessKeys(this.attDef.id).subscribe(e=>{this.attributesManager.getEntitylessAttributesByName(`${this.attDef.namespace}:${this.attDef.friendlyName}`).subscribe(i=>{let a=0;this.records=[];for(const o of e)this.records.push([o,i[a]]),a++;this.dataSource=new F.by(this.records),this.setDataSource(),this.loading=!1})})}setDataSource(){!this.child||!this.child.paginator||this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator)}onSave(){this.updateMapAttributes();for(const e of this.selection.selected)this.attributesManager.setEntitylessAttribute({key:e[0],attribute:e[1]}).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.selection.clear(),this.isAddButtonDisabled=!1}onRemove(){for(const e of this.selection.selected)this.attributesManager.removeEntitylessAttribute(e[0],e[1].id).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.ngOnInit(),this.selection.clear(),this.isAddButtonDisabled=!1}onAdd(){const e=["",this.attDef];e[1].value=void 0,this.records.unshift(e),this.dataSource.data=this.records,this.setDataSource(),this.selection.clear(),this.selection.select(e),this.isAddButtonDisabled=!0}onCancel(){this.dialogRef.close(!1)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e[1].id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onValueChange(e){this.selection.select(e)}updateMapAttributes(){for(const e of this.items.toArray())"java.util.LinkedHashMap"===e.attribute.type&&e.updateMapAttribute()}ngAfterViewInit(){this.children.changes.subscribe(e=>{this.child=e.first,this.dataSource.paginator=this.child.paginator})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Y.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-entityless-attribute-keys-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(En.YE,7),t.Gf(un.Mw,5),t.Gf(Ee.l9,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.matSort=a.first),t.iGM(a=t.CRH())&&(i.items=a),t.iGM(a=t.CRH())&&(i.children=a)}},inputs:{attDef:"attDef",tableId:"tableId"},outputs:{switchView:"switchView"},features:[t.TTD],decls:19,vars:19,consts:[["mat-dialog-title",""],["mat-dialog-actions","",1,"mt-3"],["mat-stroked-button","",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"click"],["color","accent","matTooltip","save or remove new attribute first","mat-flat-button","","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltipDisabled","click"],["color","warn","mat-flat-button","",1,"ml-2",3,"click"],["mat-dialog-content","",1,"mt-3",3,"hidden"],["class","card mt-3",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn","class","mt-3",4,"ngIf"],[1,"card","mt-3"],[3,"pageSizeOptions","dataLength","hideExport","tableId"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","New key",1,"mt-2",3,"ngModel","ngModelChange"],[3,"attribute","sendEventToParent2"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],[1,"ml-auto","mr-auto"],["alert_type","warn",1,"mt-3"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.switchView.emit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",6),t.YNc(16,pt,14,7,"div",7),t.YNc(17,gt,1,0,"mat-spinner",8),t.YNc(18,_t,3,3,"perun-web-apps-alert",9),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.attDef.namespace+":"+i.attDef.friendlyName),t.xp6(3),t.hij(" ",t.lcZ(5,11,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(8,13,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE")," "),t.xp6(2),t.Q6J("disabled",i.isAddButtonDisabled)("matTooltipDisabled",!i.isAddButtonDisabled),t.xp6(1),t.hij(" ",t.lcZ(11,15,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.ADD")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE")," "),t.xp6(2),t.Q6J("hidden",i.loading),t.xp6(1),t.Q6J("ngIf",i.records&&i.records.length),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",0===i.records.length))},directives:[M.uh,M.H8,q.lW,qe.gM,M.xY,g.O5,z.l,F.BZ,En.YE,F.w1,F.fO,F.ge,$.oG,F.Dz,F.ev,En.nU,re.Nt,nt.Fj,nt.JJ,nt.On,ct.M,F.as,F.XQ,F.nj,F.Gk,U.Ou,rt.w],pipes:[u.X$],styles:[".mat-cell[_ngcontent-%COMP%]{padding:8px 8px 8px 0}"]}),n})();function Wt(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function Lt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function ae(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}const O=function(){return["id","name","enabled","script"]};function ie(n,r){if(1&n&&(t.TgZ(0,"div",11),t.TgZ(1,"form",12),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",13),t.ALo(4,"translate"),t.YNc(5,Lt,3,3,"mat-error",1),t.qZA(),t.TgZ(6,"mat-form-field"),t.TgZ(7,"textarea",14),t.ALo(8,"translate"),t._uU(9,"          "),t.qZA(),t.YNc(10,ae,3,3,"mat-error",1),t.qZA(),t.qZA(),t._UZ(11,"perun-web-apps-attribute-unique-toggle",15),t._UZ(12,"perun-web-apps-attribute-rights-tab-group",16),t.ALo(13,"async"),t.TgZ(14,"mat-accordion"),t.TgZ(15,"mat-expansion-panel",17),t.TgZ(16,"mat-expansion-panel-header"),t.TgZ(17,"mat-panel-title"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA(),t._UZ(20,"app-services-list",18),t.ALo(21,"async"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,12,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","name")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(1),t.Q6J("attDef",e.attDef),t.xp6(1),t.Q6J("attDef",e.attDef)("collections",t.lcZ(13,16,e.collections$)),t.xp6(6),t.hij(" ",t.lcZ(19,18,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SERVICES")," "),t.xp6(2),t.Q6J("disableRouting",!0)("displayedColumns",t.DdM(22,O))("services",t.lcZ(21,20,e.services$))}}function Te(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).switchShowKeys()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SHOW_KEYS")," "))}function ye(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h1",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Wt,1,0,"mat-spinner",3),t.YNc(5,ie,22,23,"div",4),t.TgZ(6,"div",5),t.YNc(7,Te,3,3,"button",6),t.TgZ(8,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCopy()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(2),t.Q6J("ngIf","entityless"===(null==e.attDef?null:e.attDef.entity)),t.xp6(2),t.hij(" ",t.lcZ(10,10,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FOR_IMPORT")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading||e.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(16,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CONFIRM")," ")}}function Ke(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-entityless-attribute-keys-list",20),t.NdJ("switchView",function(){return t.CHM(e),t.oxw().switchShowKeys()}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("attDef",e.attDef)("tableId",e.tableId)}}let Pe=(()=>{class n{constructor(e,i,a,o,v,C,N,G,et){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.clipboard=v,this.attributesManager=C,this.serviceService=N,this.formBuilder=G,this.attributeRightsService=et,this.tableId=tn.Wv,this.loading=!1,this.showKeys=!1,this.attDef=this.data.attDef,this.attributeControl=this.formBuilder.group({name:[this.attDef.displayName,nt.kI.required],description:[this.attDef.description,nt.kI.required]}),this.collections$=new D.X([]),this.services$=this.serviceService.getServicesByAttributeDefinition(this.attDef.id).pipe((0,Dn.O)([]))}ngOnInit(){this.dialogRef.addPanelClass("mat-dialog-height-transition"),this.attributesManager.getAttributePolicyCollections(this.attDef.id).subscribe(this.collections$)}onSubmit(){this.loading=!0,this.updateAttribute(),this.attributesManager.updateAttributeDefinition({attributeDefinition:this.attDef}).pipe((0,V.w)(()=>(0,dt.of)(this.collections$.getValue())),this.attributeRightsService.filterNullInPolicy(),(0,V.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e}))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}switchShowKeys(){this.showKeys=!this.showKeys,this.dialogRef.updateSize(this.showKeys?"800px":"700px")}onCopy(){this.updateAttribute();const e={attributeDefinition:this.attDef,attributeRights:this.collections$.getValue()};this.clipboard.copy(JSON.stringify(e))?this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPIED")):this.notificator.showError(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FAILED"))}updateAttribute(){this.attDef.displayName=this.attributeControl.get("name").value,this.attDef.description=this.attributeControl.get("description").value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(be.TU),t.Y36(Y.H8),t.Y36(Y.KK),t.Y36(nt.qu),t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-attribute-definition-dialog"]],decls:3,vars:2,consts:[[1,"admin-theme"],[4,"ngIf"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","",1,"ml-2",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"fields-container",3,"formGroup"],["matInput","","formControlName","name","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","required","",3,"placeholder"],[3,"attDef"],[3,"attDef","collections"],[1,"mt-4","mb-4"],[3,"disableRouting","displayedColumns","services"],["mat-flat-button","",3,"click"],[3,"attDef","tableId","switchView"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ye,17,16,"div",1),t.YNc(2,Ke,2,2,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!i.showKeys),t.xp6(1),t.Q6J("ngIf",i.showKeys))},directives:[g.O5,M.uh,U.Ou,M.xY,nt._Y,nt.JL,nt.sg,Bt.KE,re.Nt,nt.Fj,nt.JJ,nt.u,nt.Q7,Bt.TO,ce.IC,Jt,qt,Di.pp,Di.ib,Di.yz,Di.yK,Vn.Q,M.H8,q.lW,zt],pipes:[u.X$,g.Ov],styles:[".fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],data:{animation:[gi.SG,gi.GH,gi.Ls]}}),n})();var Fe=s(70844),se=s(64597);let de=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(":")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"nameSpaceToDef",type:n,pure:!0}),n})();function Re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",19),t.TgZ(1,"mat-checkbox",20),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw();return a?o.masterToggle():null}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function fn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",21),t.TgZ(1,"mat-checkbox",22),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,C=t.oxw();return a?C.selection.toggle(v):null})("click",function(a){return a.stopPropagation()}),t.ALo(2,"multiWordDataCy"),t.ALo(3,"consentRelatedAttribute"),t.ALo(4,"translate"),t.ALo(5,"consentRelatedAttribute"),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q2q("data-cy","",t.lcZ(2,6,e.displayName),"-checkbox"),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))("disabled",t.Dn7(3,8,e.namespace,i.serviceEnabled,i.consentRequired))("matTooltip",t.lcZ(4,12,"ADMIN.ATTRIBUTES.CONSENT_RELATED_DISABLED"))("matTooltipDisabled",!t.Dn7(5,14,e.namespace,i.serviceEnabled,i.consentRequired))}}function mn(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ID")," "))}function je(n,r){if(1&n&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function We(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_FRIENDLY_NAME")," "))}function wn(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function Rn(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ENTITY")," "))}function Zn(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.entity)}}function zn(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_DEF")," "))}function Ri(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"nameSpaceToDef"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.namespace))}}function le(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_TYPE")," "))}function Xe(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.type))}}function _n(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_UNIQUE")," "))}function Tn(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.unique)}}function Xn(n,r){1&n&&t._UZ(0,"tr",26)}function oi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().onRowClick(o)}),t.qZA()}if(2&n){const e=t.oxw();t.ekj("cursor-pointer",!e.disableRouting)}}function _i(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.NO_ATTRIBUTES"),"\n"))}function $n(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}let Li=(()=>{class n{constructor(e,i,a,o){this.dialog=e,this.authResolver=i,this.tableCheckbox=a,this.consentRelatedPipe=o,this.selection=new R.Ov(!0,[]),this.displayedColumns=["select","id","friendlyName","entity","namespace","type","unique"],this.disableRouting=!1,this.consentRequired=!1,this.serviceEnabled=!1,this.refreshEvent=new t.vpe,this.pageSizeOptions=Ee.f7,this.canBeSelected=v=>!this.consentRelatedPipe.transform(v.namespace,this.serviceEnabled,this.consentRequired)}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"friendlyName":return e.friendlyName;case"entity":return e.entity;case"namespace":if(e.namespace){const a=e.namespace;return a.substring(a.lastIndexOf(":")+1,a.length)}return"";case"type":if(e.type){const a=e.type;return a.substring(a.lastIndexOf(".")+1,a.length)}return"";case"unique":return e.unique?"true":"false";default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(e=>"id"!==e)),this.dataSource=new F.by(this.definitions),this.setDataSource()}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}exportData(e){(0,Ee.O6)((0,Ee.Xn)(this.dataSource.filteredData,this.displayedColumns,n.getDataForColumn),e)}setDataSource(){this.dataSource&&(this.dataSource.filter=this.filterValue,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,i)=>(0,Ee.Sd)(e,i,this.displayedColumns,n.getDataForColumn),this.dataSource.sortData=(e,i)=>(0,Ee.pR)(e,i,n.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelectedWithDisabledCheckbox(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.child.paginator.pageIndex,this.dataSource,this.sort,this.canBeSelected)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!0,this.canBeSelected)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onRowClick(e){if(!this.disableRouting){const i=(0,Ee.kZ)();i.width="700px",i.data={attDef:e},this.dialog.open(Pe,i).afterClosed().subscribe(o=>{o&&(this.selection.clear(),this.refreshEvent.emit())})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.UA),t.Y36(Fe.u))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attr-def-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Ee.l9,7),t.Gf(En.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{definitions:"definitions",selection:"selection",displayedColumns:"displayedColumns",filterValue:"filterValue",tableId:"tableId",disableRouting:"disableRouting",consentRequired:"consentRequired",serviceEnabled:"serviceEnabled"},outputs:{refreshEvent:"refreshEvent"},features:[t.TTD],decls:29,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportData"],[1,"overflow-auto"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","friendlyName"],["mat-cell","",4,"matCellDef"],["matColumnDef","entity"],["matColumnDef","namespace"],["matColumnDef","type"],["matColumnDef","unique"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","click",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["matTooltipPosition","left","color","primary",3,"aria-label","checked","disabled","matTooltip","matTooltipDisabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"click"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(o){return i.exportData(o)}),t.TgZ(2,"div",2),t.TgZ(3,"table",3),t.ynx(4,4),t.YNc(5,Re,2,3,"th",5),t.YNc(6,fn,6,18,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,mn,3,3,"th",8),t.YNc(9,je,2,1,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,We,3,3,"th",8),t.YNc(12,wn,2,1,"td",11),t.BQk(),t.ynx(13,12),t.YNc(14,Rn,3,3,"th",8),t.YNc(15,Zn,2,1,"td",11),t.BQk(),t.ynx(16,13),t.YNc(17,zn,3,3,"th",8),t.YNc(18,Ri,3,3,"td",11),t.BQk(),t.ynx(19,14),t.YNc(20,le,3,3,"th",8),t.YNc(21,Xe,3,3,"td",11),t.BQk(),t.ynx(22,15),t.YNc(23,_n,3,3,"th",8),t.YNc(24,Tn,2,1,"td",11),t.BQk(),t.YNc(25,Xn,1,0,"tr",16),t.YNc(26,oi,1,2,"tr",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,_i,3,3,"perun-web-apps-alert",18),t.YNc(28,$n,3,3,"perun-web-apps-alert",18)),2&e&&(t.Q6J("hidden",0===i.dataSource.filteredData.length||0===i.definitions.length),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("dataLength",i.dataSource.filteredData.length)("tableId",i.tableId),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.definitions.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.definitions.length))},directives:[z.l,F.BZ,En.YE,F.w1,F.fO,F.ge,$.oG,F.Dz,F.ev,qe.gM,En.nU,F.as,F.XQ,F.nj,F.Gk,g.O5,rt.w],pipes:[se.R,Fe.u,u.X$,de,Ue],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function jn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCreate()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.CREATE")," "))}function bi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onImport()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.IMPORT")," "))}function gn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDelete()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.ATTRIBUTES.DELETE")," ")}}function hn(n,r){1&n&&t._UZ(0,"mat-spinner",11)}function li(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",12),t.NdJ("refreshEvent",function(){return t.CHM(e),t.oxw().refreshTable()}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("disableRouting",!e.authResolver.isPerunAdmin())("filterValue",e.filterValue)("selection",e.selected)("tableId",e.tableId)}}let Ji=(()=>{class n{constructor(e,i,a){this.dialog=e,this.attributesManager=i,this.authResolver=a,this.attrDefinitions=[],this.selected=new R.Ov(!0,[]),this.filterValue="",this.tableId=tn.uM}ngOnInit(){this.refreshTable()}onCreate(){const e=(0,Ee.kZ)();e.width="650px",this.dialog.open(ji,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onDelete(){const e=(0,Ee.kZ)();e.width="450px",e.data={attributes:this.selected.selected,theme:"admin-theme"},this.dialog.open(Q,e).afterClosed().subscribe(a=>{a&&(this.refreshTable(),this.selected.clear())})}refreshTable(){this.loading=!0,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}applyFilter(e){this.filterValue=e}onImport(){const e=(0,Ee.kZ)();e.width="700px",this.dialog.open(On,e).afterClosed().subscribe(a=>{!0===a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Y.H8),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-attributes"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","data-cy","new-attr-definition-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","mr-2","data-cy","delete-attr-definition-button","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent",4,"ngIf"],["color","accent","data-cy","new-attr-definition-button","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","data-cy","delete-attr-definition-button","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,jn,3,3,"button",2),t.YNc(6,bi,3,3,"button",3),t.YNc(7,gn,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(9,hn,1,0,"mat-spinner",6),t.YNc(10,li,1,5,"app-attr-def-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"ADMIN.ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.ATTRIBUTES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,g.O5,q.lW,ln.L,U.Ou,Li],pipes:[u.X$],styles:[""]}),n})(),ci=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-visualizer"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"app-animated-router-outlet")},directives:[f.A],styles:[""]}),n})();var zi=s(9921);let Mn=(()=>{class n{constructor(e){this.attributesManager=e}ngOnInit(){this.attributesManager.getAttributeModulesDependenciesGraphText("DOT").subscribe(e=>{const i=e.graph.replace("\\t","").replace("\\n","").replace("\\","");(0,zi.graphviz)("#dependenciesGraph",{zoom:!1}).renderDot(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-attr-modules"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:4,vars:3,consts:[[1,"page-subtitle"],["id","dependenciesGraph",1,"card"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"div",1)),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.VISUALIZER.ATTR_DEPENDENCIES.TITLE"),"\n"))},pipes:[u.X$],styles:["#dependenciesGraph[_ngcontent-%COMP%]{overflow-y:scroll}"]}),n})(),Ti=(()=>{class n{constructor(){this.items=[{cssIcon:"perun-module-dependencies",url:"attrDependencies",label:"MENU_ITEMS.VISUALIZER.ATTR_DEPENDENCIES",style:"admin-btn"},{cssIcon:"perun-user-destination-relationship",url:"userDestinationRelationship",label:"MENU_ITEMS.VISUALIZER.USER_DESTINATION",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.items)("size","small"))},directives:[L.L],styles:[""]}),n})();var cn=s(71884),Zi=s(18505),Qe=s(92081),Qn=s(91079),In=s(79814);function b(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_USER"))}function k(n,r){1&n&&t._UZ(0,"mat-spinner",17),2&n&&t.Q6J("diameter",20)("strokeWidth",2)}function B(n,r){if(1&n&&(t.TgZ(0,"mat-option",18),t.TgZ(1,"span",19),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.firstName+" "+e.lastName),t.xp6(2),t.hij("#",e.id,""),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function it(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_DESTINATION"))}function ut(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_SERVICE"))}function yt(n,r){if(1&n&&(t.TgZ(0,"mat-radio-button",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Ot=(()=>{class n{constructor(e,i,a,o,v,C){this.usersService=e,this.translate=i,this.facilityManager=a,this.serviceService=o,this.router=v,this.notificator=C,this.searchField=new nt.NI,this.chosenService="",this.availableServices=[],this.loading=!1,this.destination=""}ngOnInit(){this.searchField.setValue(""),this.users=this.searchField.valueChanges.pipe((0,tt.b)(400),(0,cn.x)(),(0,Zi.b)(()=>this.loading=!0),(0,V.w)(e=>this.usersService.findUsers(e)),(0,Zi.b)(()=>this.loading=!1)),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SELECT_NO_SERVICE").subscribe(e=>{this.noServiceText=e,this.availableServices.push(this.noServiceText)})}validateName(e){""!==this.searchField.value?this.usersService.findUsers(this.searchField.value).subscribe(i=>{for(const a of i){if((a.firstName+" "+a.lastName).toLowerCase()===this.searchField.value.toLowerCase()){this.selectedUser=a,e.selected.completed=!0,e.next();break}this.selectedUser=null}this.selectedUser||this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_NAME").subscribe(a=>{this.notificator.showError(a)})}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_NAME").subscribe(i=>{this.notificator.showError(i)})}validateDestination(e){""!==this.destination?(this.availableServices=[],this.availableServices.push(this.noServiceText),this.chosenService="",this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(i=>{if(0!==i.length){e.selected.completed=!0,e.next();for(const a of i)this.serviceService.getAllRichDestinationsForFacility(a.id).subscribe(o=>{for(const v of o)v.destination===this.destination&&(this.availableServices.includes(v.service.name)||this.availableServices.push(v.service.name))})}else this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_DESTINATION").subscribe(a=>{this.notificator.showError(a)})})):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_DESTINATION").subscribe(i=>{this.notificator.showError(i)})}getGraph(){""!==this.chosenService?this.router.navigate(["admin/visualizer/userDestinationRelationship/graph"],this.chosenService===this.noServiceText?{queryParams:{user:this.selectedUser.id,destination:this.destination,service:"noService"}}:{queryParams:{user:this.selectedUser.id,destination:this.destination,service:this.chosenService}}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NOT_CHOSEN_SERVICE").subscribe(e=>{this.notificator.showError(e)})}notCompleted(e){e.selected.completed=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.Fv),t.Y36(u.sK),t.Y36(Y.IQ),t.Y36(Y.KK),t.Y36(p.F0),t.Y36(Z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-relationship"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:46,vars:36,consts:[[1,"p-3","card","settings-card","col-12","col-xl-5"],[1,"page-subtitle"],["linear",""],["stepper",""],["completed","false"],["matStepLabel",""],[1,"w-100"],["matInput","","type","text",3,"placeholder","formControl","matAutocomplete","keydown.enter","ngModelChange"],["matSuffix","",3,"diameter","strokeWidth",4,"ngIf"],["align","start"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"mt-2",3,"click"],["matInput","","type","text",3,"placeholder","ngModel","keydown.enter","ngModelChange"],["mat-stroked-button","","matStepperPrevious","",1,"mt-2"],[1,"mb-2",3,"ngModel","ngModelChange"],["class","flex-column d-flex","color","primary",3,"value",4,"ngFor","ngForOf"],["matSuffix","",3,"diameter","strokeWidth"],[3,"value"],[1,"text-muted"],["color","primary",1,"flex-column","d-flex",3,"value"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-vertical-stepper",2,3),t.TgZ(6,"mat-step",4),t.YNc(7,b,2,3,"ng-template",5),t.TgZ(8,"mat-form-field",6),t.TgZ(9,"input",7),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return i.validateName(v)})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return i.notCompleted(v)}),t.ALo(10,"translate"),t.qZA(),t.YNc(11,k,1,2,"mat-spinner",8),t.TgZ(12,"mat-hint",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-autocomplete",null,10),t.YNc(17,B,4,4,"mat-option",11),t.ALo(18,"async"),t.qZA(),t.qZA(),t.TgZ(19,"div"),t.TgZ(20,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return i.validateName(v)}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"mat-step",4),t.YNc(24,it,2,3,"ng-template",5),t.TgZ(25,"mat-form-field",6),t.TgZ(26,"input",13),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return i.validateDestination(v)})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return i.notCompleted(v)})("ngModelChange",function(v){return i.destination=v}),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div"),t.TgZ(29,"button",14),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return i.validateDestination(v)}),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"mat-step"),t.YNc(36,ut,2,3,"ng-template",5),t.TgZ(37,"mat-radio-group",15),t.NdJ("ngModelChange",function(v){return i.chosenService=v}),t.YNc(38,yt,2,2,"mat-radio-button",16),t.qZA(),t.TgZ(39,"div"),t.TgZ(40,"button",14),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"button",12),t.NdJ("click",function(){return i.getGraph()}),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.MAs(16);t.xp6(2),t.hij(" ",t.lcZ(3,16,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(10,18,"ADMIN.VISUALIZER.USER_DESTINATION.USER_EXAMPLE")),t.Q6J("formControl",i.searchField)("matAutocomplete",a),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(2),t.Oqu(t.lcZ(14,20,"ADMIN.VISUALIZER.USER_DESTINATION.USER_HINT")),t.xp6(4),t.Q6J("ngForOf",t.lcZ(18,22,i.users)),t.xp6(4),t.hij(" ",t.lcZ(22,24,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(27,26,"ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION_EXAMPLE")),t.Q6J("ngModel",i.destination),t.xp6(4),t.hij(" ",t.lcZ(31,28,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(4),t.Q6J("ngModel",i.chosenService),t.xp6(1),t.Q6J("ngForOf",i.availableServices),t.xp6(3),t.hij(" ",t.lcZ(42,32,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(45,34,"ADMIN.VISUALIZER.USER_DESTINATION.SUBMIT_BUTTON")," ")}},directives:[Qe.Vq,Qe.C0,Qe.VY,Bt.KE,re.Nt,nt.Fj,Qn.ZL,nt.JJ,nt.oH,g.O5,U.Ou,Bt.R9,Bt.bx,Qn.XC,g.sg,_e.ey,q.lW,nt.On,Qe.fd,In.VQ,In.U0],pipes:[u.X$,g.Ov],styles:[""]}),n})();function Zt(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function ee(n){this._context=n}function ze(n,r){this._basis=new ee(n),this._beta=r}ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zt(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},ze.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var N,i=n[0],a=r[0],o=n[e]-i,v=r[e]-a,C=-1;++C<=e;)this._basis.point(this._beta*n[C]+(1-this._beta)*(i+(N=C/e)*o),this._beta*r[C]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const sn=function n(r){function e(i){return 1===r?new ee(i):new ze(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var we=s(77579),Oe=s(70655),Me=s(41777);function Jn(){}function Hi(n){return null==n?Jn:function(){return this.querySelector(n)}}function Hn(){return[]}function Nn(n){return null==n?Hn:function(){return this.querySelectorAll(n)}}function Ki(n){return function(){return this.matches(n)}}function va(n){return new Array(n.length)}function Mr(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}function qi(n,r,e,i,a,o){for(var C,v=0,N=r.length,G=o.length;v<G;++v)(C=r[v])?(C.__data__=o[v],i[v]=C):e[v]=new Mr(n,o[v]);for(;v<N;++v)(C=r[v])&&(a[v]=C)}function Yn(n,r,e,i,a,o,v){var C,N,Ct,G={},et=r.length,lt=o.length,ot=new Array(et);for(C=0;C<et;++C)(N=r[C])&&(ot[C]=Ct="$"+v.call(N,N.__data__,C,r),Ct in G?a[C]=N:G[Ct]=N);for(C=0;C<lt;++C)(N=G[Ct="$"+v.call(n,o[C],C,o)])?(i[C]=N,N.__data__=o[C],G[Ct]=null):e[C]=new Mr(n,o[C]);for(C=0;C<et;++C)(N=r[C])&&G[ot[C]]===N&&(a[C]=N)}function At(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}Mr.prototype={constructor:Mr,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Be="http://www.w3.org/1999/xhtml";const vn={svg:"http://www.w3.org/2000/svg",xhtml:Be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ui(n){var r=n+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=n.slice(0,e))&&(n=n.slice(e+1)),vn.hasOwnProperty(r)?{space:vn[r],local:n}:n}function gr(n){return function(){this.removeAttribute(n)}}function ki(n){return function(){this.removeAttributeNS(n.space,n.local)}}function wr(n,r){return function(){this.setAttribute(n,r)}}function xi(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function Yi(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function _r(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Gs(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function yc(n){return function(){this.style.removeProperty(n)}}function bc(n,r,e){return function(){this.style.setProperty(n,r,e)}}function Tc(n,r,e){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function Nr(n,r){return n.style.getPropertyValue(r)||Gs(n).getComputedStyle(n,null).getPropertyValue(r)}function wc(n){return function(){delete this[n]}}function Ac(n,r){return function(){this[n]=r}}function Sc(n,r){return function(){var e=r.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Vs(n){return n.trim().split(/^|\s+/)}function Ha(n){return n.classList||new zs(n)}function zs(n){this._node=n,this._names=Vs(n.getAttribute("class")||"")}function Hs(n,r){for(var e=Ha(n),i=-1,a=r.length;++i<a;)e.add(r[i])}function Ys(n,r){for(var e=Ha(n),i=-1,a=r.length;++i<a;)e.remove(r[i])}function Dc(n){return function(){Hs(this,n)}}function Lc(n){return function(){Ys(this,n)}}function kc(n,r){return function(){(r.apply(this,arguments)?Hs:Ys)(this,n)}}function Oc(){this.textContent=""}function Mc(n){return function(){this.textContent=n}}function Nc(n){return function(){var r=n.apply(this,arguments);this.textContent=null==r?"":r}}function Fc(){this.innerHTML=""}function Rc(n){return function(){this.innerHTML=n}}function Zc(n){return function(){var r=n.apply(this,arguments);this.innerHTML=null==r?"":r}}function Uc(){this.nextSibling&&this.parentNode.appendChild(this)}function Vc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hc(n){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===Be&&r.documentElement.namespaceURI===Be?r.createElement(n):r.createElementNS(e,n)}}function Yc(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Ws(n){var r=ui(n);return(r.local?Yc:Hc)(r)}function Xc(){return null}function jc(){var n=this.parentNode;n&&n.removeChild(this)}function Jc(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function Kc(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}zs.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Xs={},Ar=null;function nu(n,r,e){return n=$s(n,r,e),function(i){var a=i.relatedTarget;(!a||a!==this&&!(8&a.compareDocumentPosition(this)))&&n.call(this,i)}}function $s(n,r,e){return function(i){var a=Ar;Ar=i;try{n.call(this,this.__data__,r,e)}finally{Ar=a}}}function iu(n){return n.trim().split(/^|\s+/).map(function(r){var e="",i=r.indexOf(".");return i>=0&&(e=r.slice(i+1),r=r.slice(0,i)),{type:r,name:e}})}function ru(n){return function(){var r=this.__on;if(r){for(var o,e=0,i=-1,a=r.length;e<a;++e)o=r[e],n.type&&o.type!==n.type||o.name!==n.name?r[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?r.length=i:delete this.__on}}}function au(n,r,e){var i=Xs.hasOwnProperty(n.type)?nu:$s;return function(a,o,v){var N,C=this.__on,G=i(r,o,v);if(C)for(var et=0,lt=C.length;et<lt;++et)if((N=C[et]).type===n.type&&N.name===n.name)return this.removeEventListener(N.type,N.listener,N.capture),this.addEventListener(N.type,N.listener=G,N.capture=e),void(N.value=r);this.addEventListener(n.type,G,e),N={type:n.type,name:n.name,value:r,listener:G,capture:e},C?C.push(N):this.__on=[N]}}function js(n,r,e){var i=Gs(n),a=i.CustomEvent;"function"==typeof a?a=new a(r,e):(a=i.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),n.dispatchEvent(a)}function ou(n,r){return function(){return js(this,n,r)}}function lu(n,r){return function(){return js(this,n,r.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Xs={mouseenter:"mouseover",mouseleave:"mouseout"}));var Qs=[null];function Ui(n,r){this._groups=n,this._parents=r}function Js(){return new Ui([[document.documentElement]],Qs)}Ui.prototype=Js.prototype={constructor:Ui,select:function vi(n){"function"!=typeof n&&(n=Hi(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,G,o=r[a],v=o.length,C=i[a]=new Array(v),et=0;et<v;++et)(N=o[et])&&(G=n.call(N,N.__data__,et,o))&&("__data__"in N&&(G.__data__=N.__data__),C[et]=G);return new Ui(i,this._parents)},selectAll:function Ci(n){"function"!=typeof n&&(n=Nn(n));for(var r=this._groups,e=r.length,i=[],a=[],o=0;o<e;++o)for(var N,v=r[o],C=v.length,G=0;G<C;++G)(N=v[G])&&(i.push(n.call(N,N.__data__,G,v)),a.push(N));return new Ui(i,a)},filter:function Bn(n){"function"!=typeof n&&(n=Ki(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,C=i[a]=[],G=0;G<v;++G)(N=o[G])&&n.call(N,N.__data__,G,o)&&C.push(N);return new Ui(i,this._parents)},data:function y(n,r){if(!n)return Ct=new Array(this.size()),G=-1,this.each(function(pe){Ct[++G]=pe}),Ct;var e=r?Yn:qi,i=this._parents,a=this._groups;"function"!=typeof n&&(n=function An(n){return function(){return n}}(n));for(var o=a.length,v=new Array(o),C=new Array(o),N=new Array(o),G=0;G<o;++G){var et=i[G],lt=a[G],ot=lt.length,Ct=n.call(et,et&&et.__data__,G,i),kt=Ct.length,Ft=C[G]=new Array(kt),vt=v[G]=new Array(kt);e(et,lt,Ft,vt,N[G]=new Array(ot),Ct,r);for(var ge,Ae,Kt=0,Xt=0;Kt<kt;++Kt)if(ge=Ft[Kt]){for(Kt>=Xt&&(Xt=Kt+1);!(Ae=vt[Xt])&&++Xt<kt;);ge._next=Ae||null}}return(v=new Ui(v,i))._enter=C,v._exit=N,v},enter:function za(){return new Ui(this._enter||this._groups.map(va),this._parents)},exit:function S(){return new Ui(this._exit||this._groups.map(va),this._parents)},join:function P(n,r,e){var i=this.enter(),a=this,o=this.exit();return i="function"==typeof n?n(i):i.append(n+""),null!=r&&(a=r(a)),null==e?o.remove():e(o),i&&a?i.merge(a).order():a},merge:function j(n){for(var r=this._groups,e=n._groups,i=r.length,o=Math.min(i,e.length),v=new Array(i),C=0;C<o;++C)for(var ot,N=r[C],G=e[C],et=N.length,lt=v[C]=new Array(et),Ct=0;Ct<et;++Ct)(ot=N[Ct]||G[Ct])&&(lt[Ct]=ot);for(;C<i;++C)v[C]=r[C];return new Ui(v,this._parents)},order:function ht(){for(var n=this._groups,r=-1,e=n.length;++r<e;)for(var v,i=n[r],a=i.length-1,o=i[a];--a>=0;)(v=i[a])&&(o&&4^v.compareDocumentPosition(o)&&o.parentNode.insertBefore(v,o),o=v);return this},sort:function xt(n){function r(lt,ot){return lt&&ot?n(lt.__data__,ot.__data__):!lt-!ot}n||(n=At);for(var e=this._groups,i=e.length,a=new Array(i),o=0;o<i;++o){for(var G,v=e[o],C=v.length,N=a[o]=new Array(C),et=0;et<C;++et)(G=v[et])&&(N[et]=G);N.sort(r)}return new Ui(a,this._parents).order()},call:function Rt(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function te(){var n=new Array(this.size()),r=-1;return this.each(function(){n[++r]=this}),n},node:function Le(){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var i=n[r],a=0,o=i.length;a<o;++a){var v=i[a];if(v)return v}return null},size:function en(){var n=0;return this.each(function(){++n}),n},empty:function dn(){return!this.node()},each:function Ne(n){for(var r=this._groups,e=0,i=r.length;e<i;++e)for(var C,a=r[e],o=0,v=a.length;o<v;++o)(C=a[o])&&n.call(C,C.__data__,o,a);return this},attr:function Kn(n,r){var e=ui(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==r?e.local?ki:gr:"function"==typeof r?e.local?_r:Yi:e.local?xi:wr)(e,r))},style:function Cc(n,r,e){return arguments.length>1?this.each((null==r?yc:"function"==typeof r?Tc:bc)(n,r,null==e?"":e)):Nr(this.node(),n)},property:function Ec(n,r){return arguments.length>1?this.each((null==r?wc:"function"==typeof r?Sc:Ac)(n,r)):this.node()[n]},classed:function Ic(n,r){var e=Vs(n+"");if(arguments.length<2){for(var i=Ha(this.node()),a=-1,o=e.length;++a<o;)if(!i.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?kc:r?Dc:Lc)(e,r))},text:function Pc(n){return arguments.length?this.each(null==n?Oc:("function"==typeof n?Nc:Mc)(n)):this.node().textContent},html:function Bc(n){return arguments.length?this.each(null==n?Fc:("function"==typeof n?Zc:Rc)(n)):this.node().innerHTML},raise:function Gc(){return this.each(Uc)},lower:function zc(){return this.each(Vc)},append:function Wc(n){var r="function"==typeof n?n:Ws(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function $c(n,r){var e="function"==typeof n?n:Ws(n),i=null==r?Xc:"function"==typeof r?r:Hi(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function Qc(){return this.each(jc)},clone:function qc(n){return this.select(n?Kc:Jc)},datum:function tu(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function su(n,r,e){var a,v,i=iu(n+""),o=i.length;if(!(arguments.length<2)){for(C=r?au:ru,null==e&&(e=!1),a=0;a<o;++a)this.each(C(i[a],r,e));return this}var C=this.node().__on;if(C)for(var et,N=0,G=C.length;N<G;++N)for(a=0,et=C[N];a<o;++a)if((v=i[a]).type===et.type&&v.name===et.name)return et.value},dispatch:function cu(n,r){return this.each(("function"==typeof r?lu:ou)(n,r))}};const na=Js;function Ks(n){return"string"==typeof n?new Ui([[document.querySelector(n)]],[document.documentElement]):new Ui([[n]],Qs)}function qs(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function xa(n){this._context=n}function to(n,r){this._basis=new xa(n),this._beta=r}xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qs(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},to.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var N,i=n[0],a=r[0],o=n[e]-i,v=r[e]-a,C=-1;++C<=e;)this._basis.point(this._beta*n[C]+(1-this._beta)*(i+(N=C/e)*o),this._beta*r[C]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const uu=function n(r){function e(i){return 1===r?new xa(i):new to(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var Ya=Math.PI,Wa=2*Ya,Sr=1e-6,hu=Wa-Sr;function Xa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function eo(){return new Xa}Xa.prototype=eo.prototype={constructor:Xa,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,e,i){this._+="Q"+ +n+","+ +r+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(n,r,e,i,a,o){this._+="C"+ +n+","+ +r+","+ +e+","+ +i+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(n,r,e,i,a){var o=this._x1,v=this._y1,C=(e=+e)-(n=+n),N=(i=+i)-(r=+r),G=o-n,et=v-r,lt=G*G+et*et;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(lt>Sr)if(Math.abs(et*C-N*G)>Sr&&a){var ot=e-o,Ct=i-v,kt=C*C+N*N,Ft=ot*ot+Ct*Ct,vt=Math.sqrt(kt),Gt=Math.sqrt(lt),Kt=a*Math.tan((Ya-Math.acos((kt+lt-Ft)/(2*vt*Gt)))/2),Xt=Kt/Gt,ge=Kt/vt;Math.abs(Xt-1)>Sr&&(this._+="L"+(n+Xt*G)+","+(r+Xt*et)),this._+="A"+a+","+a+",0,0,"+ +(et*ot>G*Ct)+","+(this._x1=n+ge*C)+","+(this._y1=r+ge*N)}else this._+="L"+(this._x1=n)+","+(this._y1=r)},arc:function(n,r,e,i,a,o){n=+n,r=+r,o=!!o;var v=(e=+e)*Math.cos(i),C=e*Math.sin(i),N=n+v,G=r+C,et=1^o,lt=o?i-a:a-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+N+","+G:(Math.abs(this._x1-N)>Sr||Math.abs(this._y1-G)>Sr)&&(this._+="L"+N+","+G),e&&(lt<0&&(lt=lt%Wa+Wa),lt>hu?this._+="A"+e+","+e+",0,1,"+et+","+(n-v)+","+(r-C)+"A"+e+","+e+",0,1,"+et+","+(this._x1=N)+","+(this._y1=G):lt>Sr&&(this._+="A"+e+","+e+",0,"+ +(lt>=Ya)+","+et+","+(this._x1=n+e*Math.cos(a))+","+(this._y1=r+e*Math.sin(a))))},rect:function(n,r,e,i){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};const du=eo;function ya(n){return function(){return n}}function no(n){this._context=n}function pu(n){return new no(n)}function fu(n){return n[0]}function mu(n){return n[1]}no.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;default:this._context.lineTo(n,r)}}};var io=Math.PI;function ao(n){return(1-Math.cos(io*n))/2}var ba=s(25922),or=s(49194),$a=s(73339),_u=(0,ba.Z)("start","end","cancel","interrupt"),vu=[];function wa(n,r,e,i,a,o){var v=n.__transition;if(v){if(e in v)return}else n.__transition={};!function xu(n,r,e){var a,i=n.__transition;function v(G){var et,lt,ot,Ct;if(1!==e.state)return N();for(et in i)if((Ct=i[et]).name===e.name){if(3===Ct.state)return(0,$a.Z)(v);4===Ct.state?(Ct.state=6,Ct.timer.stop(),Ct.on.call("interrupt",n,n.__data__,Ct.index,Ct.group),delete i[et]):+et<r&&(Ct.state=6,Ct.timer.stop(),Ct.on.call("cancel",n,n.__data__,Ct.index,Ct.group),delete i[et])}if((0,$a.Z)(function(){3===e.state&&(e.state=4,e.timer.restart(C,e.delay,e.time),C(G))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(ot=e.tween.length),et=0,lt=-1;et<ot;++et)(Ct=e.tween[et].value.call(n,n.__data__,e.index,e.group))&&(a[++lt]=Ct);a.length=lt+1}}function C(G){for(var et=G<e.duration?e.ease.call(null,G/e.duration):(e.timer.restart(N),e.state=5,1),lt=-1,ot=a.length;++lt<ot;)a[lt].call(n,et);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),N())}function N(){for(var G in e.state=6,e.timer.stop(),delete i[r],i)return;delete n.__transition}i[r]=e,e.timer=(0,or.HT)(function o(G){e.state=1,e.timer.restart(v,e.delay,e.time),e.delay<=G&&v(G-e.delay)},0,e.time)}(n,e,{name:r,index:i,group:a,on:_u,tween:vu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ja(n,r){var e=tr(n,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function lr(n,r){var e=tr(n,r);if(e.state>3)throw new Error("too late; already running");return e}function tr(n,r){var e=n.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function vr(n,r){return n=+n,r=+r,function(e){return n*(1-e)+r*e}}var ia,qa,ho,Aa,co=180/Math.PI,Ka={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uo(n,r,e,i,a,o){var v,C,N;return(v=Math.sqrt(n*n+r*r))&&(n/=v,r/=v),(N=n*e+r*i)&&(e-=n*N,i-=r*N),(C=Math.sqrt(e*e+i*i))&&(e/=C,i/=C,N/=C),n*i<r*e&&(n=-n,r=-r,N=-N,v=-v),{translateX:a,translateY:o,rotate:Math.atan2(r,n)*co,skewX:Math.atan(N)*co,scaleX:v,scaleY:C}}function po(n,r,e,i){function a(G){return G.length?G.pop()+" ":""}return function(G,et){var lt=[],ot=[];return G=n(G),et=n(et),function o(G,et,lt,ot,Ct,kt){if(G!==lt||et!==ot){var Ft=Ct.push("translate(",null,r,null,e);kt.push({i:Ft-4,x:vr(G,lt)},{i:Ft-2,x:vr(et,ot)})}else(lt||ot)&&Ct.push("translate("+lt+r+ot+e)}(G.translateX,G.translateY,et.translateX,et.translateY,lt,ot),function v(G,et,lt,ot){G!==et?(G-et>180?et+=360:et-G>180&&(G+=360),ot.push({i:lt.push(a(lt)+"rotate(",null,i)-2,x:vr(G,et)})):et&&lt.push(a(lt)+"rotate("+et+i)}(G.rotate,et.rotate,lt,ot),function C(G,et,lt,ot){G!==et?ot.push({i:lt.push(a(lt)+"skewX(",null,i)-2,x:vr(G,et)}):et&&lt.push(a(lt)+"skewX("+et+i)}(G.skewX,et.skewX,lt,ot),function N(G,et,lt,ot,Ct,kt){if(G!==lt||et!==ot){var Ft=Ct.push(a(Ct)+"scale(",null,",",null,")");kt.push({i:Ft-4,x:vr(G,lt)},{i:Ft-2,x:vr(et,ot)})}else(1!==lt||1!==ot)&&Ct.push(a(Ct)+"scale("+lt+","+ot+")")}(G.scaleX,G.scaleY,et.scaleX,et.scaleY,lt,ot),G=et=null,function(Ct){for(var vt,kt=-1,Ft=ot.length;++kt<Ft;)lt[(vt=ot[kt]).i]=vt.x(Ct);return lt.join("")}}}var wu=po(function Tu(n){return"none"===n?Ka:(ia||(ia=document.createElement("DIV"),qa=document.documentElement,ho=document.defaultView),ia.style.transform=n,n=ho.getComputedStyle(qa.appendChild(ia),null).getPropertyValue("transform"),qa.removeChild(ia),uo(+(n=n.slice(7,-1).split(","))[0],+n[1],+n[2],+n[3],+n[4],+n[5]))},"px, ","px)","deg)"),Au=po(function Cu(n){return null!=n&&(Aa||(Aa=document.createElementNS("http://www.w3.org/2000/svg","g")),Aa.setAttribute("transform",n),n=Aa.transform.baseVal.consolidate())?uo((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):Ka},", ",")",")");function Su(n,r){var e,i;return function(){var a=lr(this,n),o=a.tween;if(o!==e)for(var v=0,C=(i=e=o).length;v<C;++v)if(i[v].name===r){(i=i.slice()).splice(v,1);break}a.tween=i}}function Eu(n,r,e){var i,a;if("function"!=typeof e)throw new Error;return function(){var o=lr(this,n),v=o.tween;if(v!==i){a=(i=v).slice();for(var C={name:r,value:e},N=0,G=a.length;N<G;++N)if(a[N].name===r){a[N]=C;break}N===G&&a.push(C)}o.tween=a}}function ts(n,r,e){var i=n._id;return n.each(function(){var a=lr(this,i);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return tr(a,i).value[r]}}function es(n,r,e){n.prototype=r.prototype=e,e.constructor=n}function fo(n,r){var e=Object.create(n.prototype);for(var i in r)e[i]=r[i];return e}function ra(){}var Sa=1/.7,Pr="\\s*([+-]?\\d+)\\s*",sa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lu=/^#([0-9a-f]{3,8})$/,ku=new RegExp("^rgb\\("+[Pr,Pr,Pr]+"\\)$"),Iu=new RegExp("^rgb\\("+[nr,nr,nr]+"\\)$"),Ou=new RegExp("^rgba\\("+[Pr,Pr,Pr,sa]+"\\)$"),Mu=new RegExp("^rgba\\("+[nr,nr,nr,sa]+"\\)$"),Nu=new RegExp("^hsl\\("+[sa,nr,nr]+"\\)$"),Pu=new RegExp("^hsla\\("+[sa,nr,nr,sa]+"\\)$"),mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function go(){return this.rgb().formatHex()}function _o(){return this.rgb().formatRgb()}function oa(n){var r,e;return n=(n+"").trim().toLowerCase(),(r=Lu.exec(n))?(e=r[1].length,r=parseInt(r[1],16),6===e?vo(r):3===e?new Gi(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?Ea(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?Ea(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=ku.exec(n))?new Gi(r[1],r[2],r[3],1):(r=Iu.exec(n))?new Gi(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=Ou.exec(n))?Ea(r[1],r[2],r[3],r[4]):(r=Mu.exec(n))?Ea(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Nu.exec(n))?bo(r[1],r[2]/100,r[3]/100,1):(r=Pu.exec(n))?bo(r[1],r[2]/100,r[3]/100,r[4]):mo.hasOwnProperty(n)?vo(mo[n]):"transparent"===n?new Gi(NaN,NaN,NaN,0):null}function vo(n){return new Gi(n>>16&255,n>>8&255,255&n,1)}function Ea(n,r,e,i){return i<=0&&(n=r=e=NaN),new Gi(n,r,e,i)}function Ru(n){return n instanceof ra||(n=oa(n)),n?new Gi((n=n.rgb()).r,n.g,n.b,n.opacity):new Gi}function Da(n,r,e,i){return 1===arguments.length?Ru(n):new Gi(n,r,e,null==i?1:i)}function Gi(n,r,e,i){this.r=+n,this.g=+r,this.b=+e,this.opacity=+i}function xo(){return"#"+ns(this.r)+ns(this.g)+ns(this.b)}function yo(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function ns(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function bo(n,r,e,i){return i<=0?n=r=e=NaN:e<=0||e>=1?n=r=NaN:r<=0&&(n=NaN),new ir(n,r,e,i)}function To(n){if(n instanceof ir)return new ir(n.h,n.s,n.l,n.opacity);if(n instanceof ra||(n=oa(n)),!n)return new ir;if(n instanceof ir)return n;var r=(n=n.rgb()).r/255,e=n.g/255,i=n.b/255,a=Math.min(r,e,i),o=Math.max(r,e,i),v=NaN,C=o-a,N=(o+a)/2;return C?(v=r===o?(e-i)/C+6*(e<i):e===o?(i-r)/C+2:(r-e)/C+4,C/=N<.5?o+a:2-o-a,v*=60):C=N>0&&N<1?0:v,new ir(v,C,N,n.opacity)}function ir(n,r,e,i){this.h=+n,this.s=+r,this.l=+e,this.opacity=+i}function is(n,r,e){return 255*(n<60?r+(e-r)*n/60:n<180?e:n<240?r+(e-r)*(240-n)/60:r)}function Co(n,r,e,i,a){var o=n*n,v=o*n;return((1-3*n+3*o-v)*r+(4-6*o+3*v)*e+(1+3*n+3*o-3*v)*i+v*a)/6}function wo(n){return function(){return n}}function So(n,r){var e=r-n;return e?function Ao(n,r){return function(e){return n+e*r}}(n,e):wo(isNaN(n)?r:n)}es(ra,oa,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:go,formatHex:go,formatHsl:function Fu(){return To(this).formatHsl()},formatRgb:_o,toString:_o}),es(Gi,Da,fo(ra,{brighter:function(n){return n=null==n?Sa:Math.pow(Sa,n),new Gi(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Gi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xo,formatHex:xo,formatRgb:yo,toString:yo})),es(ir,function Zu(n,r,e,i){return 1===arguments.length?To(n):new ir(n,r,e,null==i?1:i)},fo(ra,{brighter:function(n){return n=null==n?Sa:Math.pow(Sa,n),new ir(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new ir(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),r=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*r,a=2*e-i;return new Gi(is(n>=240?n-240:n+120,a,i),is(n,a,i),is(n<120?n+240:n-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));const Eo=function n(r){var e=function Vu(n){return 1==(n=+n)?So:function(r,e){return e-r?function Gu(n,r,e){return n=Math.pow(n,e),r=Math.pow(r,e)-n,e=1/e,function(i){return Math.pow(n+i*r,e)}}(r,e,n):wo(isNaN(r)?e:r)}}(r);function i(a,o){var v=e((a=Da(a)).r,(o=Da(o)).r),C=e(a.g,o.g),N=e(a.b,o.b),G=So(a.opacity,o.opacity);return function(et){return a.r=v(et),a.g=C(et),a.b=N(et),a.opacity=G(et),a+""}}return i.gamma=n,i}(1);function Do(n){return function(r){var v,C,e=r.length,i=new Array(e),a=new Array(e),o=new Array(e);for(v=0;v<e;++v)C=Da(r[v]),i[v]=C.r||0,a[v]=C.g||0,o[v]=C.b||0;return i=n(i),a=n(a),o=n(o),C.opacity=1,function(N){return C.r=i(N),C.g=a(N),C.b=o(N),C+""}}}Do(function Bu(n){var r=n.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),a=n[i],o=n[i+1];return Co((e-i/r)*r,i>0?n[i-1]:2*a-o,a,o,i<r-1?n[i+2]:2*o-a)}}),Do(function Uu(n){var r=n.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*r);return Co((e-i/r)*r,n[(i+r-1)%r],n[i%r],n[(i+1)%r],n[(i+2)%r])}});var rs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,as=new RegExp(rs.source,"g");function Yu(n,r){var i,a,o,e=rs.lastIndex=as.lastIndex=0,v=-1,C=[],N=[];for(n+="",r+="";(i=rs.exec(n))&&(a=as.exec(r));)(o=a.index)>e&&(o=r.slice(e,o),C[v]?C[v]+=o:C[++v]=o),(i=i[0])===(a=a[0])?C[v]?C[v]+=a:C[++v]=a:(C[++v]=null,N.push({i:v,x:vr(i,a)})),e=as.lastIndex;return e<r.length&&(o=r.slice(e),C[v]?C[v]+=o:C[++v]=o),C.length<2?N[0]?function Hu(n){return function(r){return n(r)+""}}(N[0].x):function zu(n){return function(){return n}}(r):(r=N.length,function(G){for(var lt,et=0;et<r;++et)C[(lt=N[et]).i]=lt.x(G);return C.join("")})}function Lo(n,r){var e;return("number"==typeof r?vr:r instanceof oa?Eo:(e=oa(r))?(r=e,Eo):Yu)(n,r)}function Wu(n){return function(){this.removeAttribute(n)}}function Xu(n){return function(){this.removeAttributeNS(n.space,n.local)}}function $u(n,r,e){var i,o,a=e+"";return function(){var v=this.getAttribute(n);return v===a?null:v===i?o:o=r(i=v,e)}}function ju(n,r,e){var i,o,a=e+"";return function(){var v=this.getAttributeNS(n.space,n.local);return v===a?null:v===i?o:o=r(i=v,e)}}function Qu(n,r,e){var i,a,o;return function(){var v,N,C=e(this);return null==C?void this.removeAttribute(n):(v=this.getAttribute(n))===(N=C+"")?null:v===i&&N===a?o:(a=N,o=r(i=v,C))}}function Ju(n,r,e){var i,a,o;return function(){var v,N,C=e(this);return null==C?void this.removeAttributeNS(n.space,n.local):(v=this.getAttributeNS(n.space,n.local))===(N=C+"")?null:v===i&&N===a?o:(a=N,o=r(i=v,C))}}function qu(n,r){return function(e){this.setAttribute(n,r.call(this,e))}}function th(n,r){return function(e){this.setAttributeNS(n.space,n.local,r.call(this,e))}}function eh(n,r){var e,i;function a(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&th(n,o)),e}return a._value=r,a}function nh(n,r){var e,i;function a(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&qu(n,o)),e}return a._value=r,a}function rh(n,r){return function(){Ja(this,n).delay=+r.apply(this,arguments)}}function ah(n,r){return r=+r,function(){Ja(this,n).delay=r}}function oh(n,r){return function(){lr(this,n).duration=+r.apply(this,arguments)}}function lh(n,r){return r=+r,function(){lr(this,n).duration=r}}function uh(n,r){if("function"!=typeof r)throw new Error;return function(){lr(this,n).ease=r}}function mh(n,r,e){var i,a,o=function fh(n){return(n+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?Ja:lr;return function(){var v=o(this,n),C=v.on;C!==i&&(a=(i=C).copy()).on(r,e),v.on=a}}var bh=na.prototype.constructor;function ko(n){return function(){this.style.removeProperty(n)}}function Dh(n,r,e){return function(i){this.style.setProperty(n,r.call(this,i),e)}}function Lh(n,r,e){var i,a;function o(){var v=r.apply(this,arguments);return v!==a&&(i=(a=v)&&Dh(n,v,e)),i}return o._value=r,o}function Nh(n){return function(r){this.textContent=n.call(this,r)}}function Ph(n){var r,e;function i(){var a=n.apply(this,arguments);return a!==e&&(r=(e=a)&&Nh(a)),r}return i._value=n,i}var Bh=0;function cr(n,r,e,i){this._groups=n,this._parents=r,this._name=e,this._id=i}function Io(){return++Bh}var Fr=na.prototype;cr.prototype=function Uh(n){return na().transition(n)}.prototype={constructor:cr,select:function xh(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=Hi(n));for(var i=this._groups,a=i.length,o=new Array(a),v=0;v<a;++v)for(var et,lt,C=i[v],N=C.length,G=o[v]=new Array(N),ot=0;ot<N;++ot)(et=C[ot])&&(lt=n.call(et,et.__data__,ot,C))&&("__data__"in et&&(lt.__data__=et.__data__),G[ot]=lt,wa(G[ot],r,e,ot,G,tr(et,e)));return new cr(o,this._parents,r,e)},selectAll:function yh(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=Nn(n));for(var i=this._groups,a=i.length,o=[],v=[],C=0;C<a;++C)for(var et,N=i[C],G=N.length,lt=0;lt<G;++lt)if(et=N[lt]){for(var Ct,ot=n.call(et,et.__data__,lt,N),kt=tr(et,e),Ft=0,vt=ot.length;Ft<vt;++Ft)(Ct=ot[Ft])&&wa(Ct,r,e,Ft,ot,kt);o.push(ot),v.push(et)}return new cr(o,v,r,e)},filter:function dh(n){"function"!=typeof n&&(n=Ki(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,C=i[a]=[],G=0;G<v;++G)(N=o[G])&&n.call(N,N.__data__,G,o)&&C.push(N);return new cr(i,this._parents,this._name,this._id)},merge:function ph(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,e=n._groups,i=r.length,o=Math.min(i,e.length),v=new Array(i),C=0;C<o;++C)for(var ot,N=r[C],G=e[C],et=N.length,lt=v[C]=new Array(et),Ct=0;Ct<et;++Ct)(ot=N[Ct]||G[Ct])&&(lt[Ct]=ot);for(;C<i;++C)v[C]=r[C];return new cr(v,this._parents,this._name,this._id)},selection:function Th(){return new bh(this._groups,this._parents)},transition:function Rh(){for(var n=this._name,r=this._id,e=Io(),i=this._groups,a=i.length,o=0;o<a;++o)for(var N,v=i[o],C=v.length,G=0;G<C;++G)if(N=v[G]){var et=tr(N,r);wa(N,n,e,G,v,{time:et.time+et.delay+et.duration,delay:0,duration:et.duration,ease:et.ease})}return new cr(i,this._parents,n,e)},call:Fr.call,nodes:Fr.nodes,node:Fr.node,size:Fr.size,empty:Fr.empty,each:Fr.each,on:function gh(n,r){var e=this._id;return arguments.length<2?tr(this.node(),e).on.on(n):this.each(mh(e,n,r))},attr:function Ku(n,r){var e=ui(n),i="transform"===e?Au:Lo;return this.attrTween(n,"function"==typeof r?(e.local?Ju:Qu)(e,i,ts(this,"attr."+n,r)):null==r?(e.local?Xu:Wu)(e):(e.local?ju:$u)(e,i,r))},attrTween:function ih(n,r){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var i=ui(n);return this.tween(e,(i.local?eh:nh)(i,r))},style:function Eh(n,r,e){var i="transform"==(n+="")?wu:Lo;return null==r?this.styleTween(n,function Ch(n,r){var e,i,a;return function(){var o=Nr(this,n),v=(this.style.removeProperty(n),Nr(this,n));return o===v?null:o===e&&v===i?a:a=r(e=o,i=v)}}(n,i)).on("end.style."+n,ko(n)):"function"==typeof r?this.styleTween(n,function Ah(n,r,e){var i,a,o;return function(){var v=Nr(this,n),C=e(this),N=C+"";return null==C&&(this.style.removeProperty(n),N=C=Nr(this,n)),v===N?null:v===i&&N===a?o:(a=N,o=r(i=v,C))}}(n,i,ts(this,"style."+n,r))).each(function Sh(n,r){var e,i,a,C,o="style."+r,v="end."+o;return function(){var N=lr(this,n),G=N.on,et=null==N.value[o]?C||(C=ko(r)):void 0;(G!==e||a!==et)&&(i=(e=G).copy()).on(v,a=et),N.on=i}}(this._id,n)):this.styleTween(n,function wh(n,r,e){var i,o,a=e+"";return function(){var v=Nr(this,n);return v===a?null:v===i?o:o=r(i=v,e)}}(n,i,r),e).on("end.style."+n,null)},styleTween:function kh(n,r,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,Lh(n,r,null==e?"":e))},text:function Mh(n){return this.tween("text","function"==typeof n?function Oh(n){return function(){var r=n(this);this.textContent=null==r?"":r}}(ts(this,"text",n)):function Ih(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function Fh(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Ph(n))},remove:function vh(){return this.on("end.remove",function _h(n){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==n)return;r&&r.removeChild(this)}}(this._id))},tween:function Du(n,r){var e=this._id;if(n+="",arguments.length<2){for(var v,i=tr(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((v=i[a]).name===n)return v.value;return null}return this.each((null==r?Su:Eu)(e,n,r))},delay:function sh(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?rh:ah)(r,n)):tr(this.node(),r).delay},duration:function ch(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?oh:lh)(r,n)):tr(this.node(),r).duration},ease:function hh(n){var r=this._id;return arguments.length?this.each(uh(r,n)):tr(this.node(),r).ease},end:function Zh(){var n,r,e=this,i=e._id,a=e.size();return new Promise(function(o,v){var C={value:v},N={value:function(){0==--a&&o()}};e.each(function(){var G=lr(this,i),et=G.on;et!==n&&((r=(n=et).copy())._.cancel.push(C),r._.interrupt.push(C),r._.end.push(N)),G.on=r})})}};var ss={time:null,delay:0,duration:250,ease:s(27065).tw};function Vh(n,r){for(var e;!(e=n.__transition)||!(e=e[r]);)if(!(n=n.parentNode))return ss.time=(0,or.zO)(),ss;return e}na.prototype.interrupt=function bu(n){return this.each(function(){!function yu(n,r){var i,a,v,e=n.__transition,o=!0;if(e){for(v in r=null==r?null:r+"",e)(i=e[v]).name===r?(a=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[v]):o=!1;o&&delete n.__transition}}(this,n)})},na.prototype.transition=function zh(n){var r,e;n instanceof cr?(r=n._id,n=n._name):(r=Io(),(e=ss).time=(0,or.zO)(),n=null==n?null:n+"");for(var i=this._groups,a=i.length,o=0;o<a;++o)for(var N,v=i[o],C=v.length,G=0;G<C;++G)(N=v[G])&&wa(N,n,r,G,v,e||Vh(N,r));return new cr(i,this._parents,n,r)};var Oo=s(50727),Mo=s(54968),Yh=s(50590);function qh(n){return void 0===n}function id(n){if(Array.isArray(n)){for(var r=0,e=Array(n.length);r<n.length;r++)e[r]=n[r];return e}return Array.from(n)}function rd(n){return Array.isArray(n)?n:Array.from(n)}function la(){for(var n=arguments.length,r=Array(n),e=0;e<n;e++)r[e]=arguments[e];var i=function(lt,ot){return{a:lt.a*ot.a+lt.c*ot.b,c:lt.a*ot.c+lt.c*ot.d,e:lt.a*ot.e+lt.c*ot.f+lt.e,b:lt.b*ot.a+lt.d*ot.b,d:lt.b*ot.c+lt.d*ot.d,f:lt.b*ot.e+lt.d*ot.f+lt.f}};switch((r=Array.isArray(r[0])?r[0]:r).length){case 0:throw new Error("no matrices provided");case 1:return r[0];case 2:return i(r[0],r[1]);default:var a=r,o=rd(a),v=o[0],C=o[1],N=o.slice(2),G=i(v,C);return la.apply(void 0,[G].concat(id(N)))}}function Fo(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:n,b:0,d:1,f:r}}function La(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n)}return this}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;const Ro=Symbol("implicit");function os(){var n=new Map,r=[],e=[],i=Ro;function a(o){var v=o+"",C=n.get(v);if(!C){if(i!==Ro)return i;n.set(v,C=r.push(o))}return e[(C-1)%e.length]}return a.domain=function(o){if(!arguments.length)return r.slice();r=[],n=new Map;for(const v of o){const C=v+"";n.has(C)||n.set(C,r.push(v))}return a},a.range=function(o){return arguments.length?(e=Array.from(o),a):e.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.copy=function(){return os(r,e).unknown(i)},La.apply(a,arguments),a}var Zr=s(59695);function sd(n,r){var e;function i(){var a,v,o=e.length,C=0,N=0;for(a=0;a<o;++a)C+=(v=e[a]).x,N+=v.y;for(C=C/o-n,N=N/o-r,a=0;a<o;++a)(v=e[a]).x-=C,v.y-=N}return null==n&&(n=0),null==r&&(r=0),i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(r=+a,i):r},i}function qn(n){return function(){return n}}function xr(){return 1e-6*(Math.random()-.5)}function Zo(n,r,e,i){if(isNaN(r)||isNaN(e))return n;var a,lt,ot,Ct,kt,Ft,vt,Gt,Kt,o=n._root,v={data:i},C=n._x0,N=n._y0,G=n._x1,et=n._y1;if(!o)return n._root=v,n;for(;o.length;)if((Ft=r>=(lt=(C+G)/2))?C=lt:G=lt,(vt=e>=(ot=(N+et)/2))?N=ot:et=ot,a=o,!(o=o[Gt=vt<<1|Ft]))return a[Gt]=v,n;if(Ct=+n._x.call(null,o.data),kt=+n._y.call(null,o.data),r===Ct&&e===kt)return v.next=o,a?a[Gt]=v:n._root=v,n;do{a=a?a[Gt]=new Array(4):n._root=new Array(4),(Ft=r>=(lt=(C+G)/2))?C=lt:G=lt,(vt=e>=(ot=(N+et)/2))?N=ot:et=ot}while((Gt=vt<<1|Ft)==(Kt=(kt>=ot)<<1|Ct>=lt));return a[Kt]=o,a[Gt]=v,n}function Ii(n,r,e,i,a){this.node=n,this.x0=r,this.y0=e,this.x1=i,this.y1=a}function xd(n){return n[0]}function bd(n){return n[1]}function ls(n,r,e){var i=new cs(null==r?xd:r,null==e?bd:e,NaN,NaN,NaN,NaN);return null==n?i:i.addAll(n)}function cs(n,r,e,i,a,o){this._x=n,this._y=r,this._x0=e,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function Bo(n){for(var r={data:n.data},e=r;n=n.next;)e=e.next={data:n.data};return r}var Oi=ls.prototype=cs.prototype;function Cd(n){return n.x+n.vx}function wd(n){return n.y+n.vy}function Uo(n){var r,e,i=1,a=1;function o(){for(var N,et,lt,ot,Ct,kt,Ft,G=r.length,vt=0;vt<a;++vt)for(et=ls(r,Cd,wd).visitAfter(v),N=0;N<G;++N)Ft=(kt=e[(lt=r[N]).index])*kt,ot=lt.x+lt.vx,Ct=lt.y+lt.vy,et.visit(Gt);function Gt(Kt,Xt,ge,Ae,pe){var nn=Kt.data,on=Kt.r,yn=kt+on;if(!nn)return Xt>ot+yn||Ae<ot-yn||ge>Ct+yn||pe<Ct-yn;if(nn.index>lt.index){var Ln=ot-nn.x-nn.vx,kn=Ct-nn.y-nn.vy,Wn=Ln*Ln+kn*kn;Wn<yn*yn&&(0===Ln&&(Wn+=(Ln=xr())*Ln),0===kn&&(Wn+=(kn=xr())*kn),Wn=(yn-(Wn=Math.sqrt(Wn)))/Wn*i,lt.vx+=(Ln*=Wn)*(yn=(on*=on)/(Ft+on)),lt.vy+=(kn*=Wn)*yn,nn.vx-=Ln*(yn=1-yn),nn.vy-=kn*yn)}}}function v(N){if(N.data)return N.r=e[N.data.index];for(var G=N.r=0;G<4;++G)N[G]&&N[G].r>N.r&&(N.r=N[G].r)}function C(){if(r){var N,et,G=r.length;for(e=new Array(G),N=0;N<G;++N)e[(et=r[N]).index]=+n(et,N,r)}}return"function"!=typeof n&&(n=qn(null==n?1:+n)),o.initialize=function(N){r=N,C()},o.iterations=function(N){return arguments.length?(a=+N,o):a},o.strength=function(N){return arguments.length?(i=+N,o):i},o.radius=function(N){return arguments.length?(n="function"==typeof N?N:qn(+N),C(),o):n},o}Oi.copy=function(){var e,i,n=new cs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Bo(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(i=r.source[a])&&(i.length?e.push({source:i,target:r.target[a]=new Array(4)}):r.target[a]=Bo(i));return n},Oi.add=function od(n){var r=+this._x.call(null,n),e=+this._y.call(null,n);return Zo(this.cover(r,e),r,e,n)},Oi.addAll=function ld(n){var r,e,a,o,i=n.length,v=new Array(i),C=new Array(i),N=1/0,G=1/0,et=-1/0,lt=-1/0;for(e=0;e<i;++e)isNaN(a=+this._x.call(null,r=n[e]))||isNaN(o=+this._y.call(null,r))||(v[e]=a,C[e]=o,a<N&&(N=a),a>et&&(et=a),o<G&&(G=o),o>lt&&(lt=o));if(N>et||G>lt)return this;for(this.cover(N,G).cover(et,lt),e=0;e<i;++e)Zo(this,v[e],C[e],n[e]);return this},Oi.cover=function cd(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var e=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(e))a=(e=Math.floor(n))+1,o=(i=Math.floor(r))+1;else{for(var N,G,v=a-e,C=this._root;e>n||n>=a||i>r||r>=o;)switch(G=(r<i)<<1|n<e,N=new Array(4),N[G]=C,C=N,v*=2,G){case 0:a=e+v,o=i+v;break;case 1:e=a-v,o=i+v;break;case 2:a=e+v,i=o-v;break;case 3:e=a-v,i=o-v}this._root&&this._root.length&&(this._root=C)}return this._x0=e,this._y0=i,this._x1=a,this._y1=o,this},Oi.data=function ud(){var n=[];return this.visit(function(r){if(!r.length)do{n.push(r.data)}while(r=r.next)}),n},Oi.extent=function hd(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Oi.find=function dd(n,r,e){var i,v,C,N,G,kt,Ft,a=this._x0,o=this._y0,et=this._x1,lt=this._y1,ot=[],Ct=this._root;for(Ct&&ot.push(new Ii(Ct,a,o,et,lt)),null==e?e=1/0:(a=n-e,o=r-e,et=n+e,lt=r+e,e*=e);kt=ot.pop();)if(!(!(Ct=kt.node)||(v=kt.x0)>et||(C=kt.y0)>lt||(N=kt.x1)<a||(G=kt.y1)<o))if(Ct.length){var vt=(v+N)/2,Gt=(C+G)/2;ot.push(new Ii(Ct[3],vt,Gt,N,G),new Ii(Ct[2],v,Gt,vt,G),new Ii(Ct[1],vt,C,N,Gt),new Ii(Ct[0],v,C,vt,Gt)),(Ft=(r>=Gt)<<1|n>=vt)&&(kt=ot[ot.length-1],ot[ot.length-1]=ot[ot.length-1-Ft],ot[ot.length-1-Ft]=kt)}else{var Kt=n-+this._x.call(null,Ct.data),Xt=r-+this._y.call(null,Ct.data),ge=Kt*Kt+Xt*Xt;if(ge<e){var Ae=Math.sqrt(e=ge);a=n-Ae,o=r-Ae,et=n+Ae,lt=r+Ae,i=Ct.data}}return i},Oi.remove=function pd(n){if(isNaN(et=+this._x.call(null,n))||isNaN(lt=+this._y.call(null,n)))return this;var r,i,a,o,et,lt,ot,Ct,kt,Ft,vt,Gt,e=this._root,v=this._x0,C=this._y0,N=this._x1,G=this._y1;if(!e)return this;if(e.length)for(;;){if((kt=et>=(ot=(v+N)/2))?v=ot:N=ot,(Ft=lt>=(Ct=(C+G)/2))?C=Ct:G=Ct,r=e,!(e=e[vt=Ft<<1|kt]))return this;if(!e.length)break;(r[vt+1&3]||r[vt+2&3]||r[vt+3&3])&&(i=r,Gt=vt)}for(;e.data!==n;)if(a=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,a?(o?a.next=o:delete a.next,this):r?(o?r[vt]=o:delete r[vt],(e=r[0]||r[1]||r[2]||r[3])&&e===(r[3]||r[2]||r[1]||r[0])&&!e.length&&(i?i[Gt]=e:this._root=e),this):(this._root=o,this)},Oi.removeAll=function fd(n){for(var r=0,e=n.length;r<e;++r)this.remove(n[r]);return this},Oi.root=function md(){return this._root},Oi.size=function gd(){var n=0;return this.visit(function(r){if(!r.length)do{++n}while(r=r.next)}),n},Oi.visit=function _d(n){var e,a,o,v,C,N,r=[],i=this._root;for(i&&r.push(new Ii(i,this._x0,this._y0,this._x1,this._y1));e=r.pop();)if(!n(i=e.node,o=e.x0,v=e.y0,C=e.x1,N=e.y1)&&i.length){var G=(o+C)/2,et=(v+N)/2;(a=i[3])&&r.push(new Ii(a,G,et,C,N)),(a=i[2])&&r.push(new Ii(a,o,et,G,N)),(a=i[1])&&r.push(new Ii(a,G,v,C,et)),(a=i[0])&&r.push(new Ii(a,o,v,G,et))}return this},Oi.visitAfter=function vd(n){var i,r=[],e=[];for(this._root&&r.push(new Ii(this._root,this._x0,this._y0,this._x1,this._y1));i=r.pop();){var a=i.node;if(a.length){var o,v=i.x0,C=i.y0,N=i.x1,G=i.y1,et=(v+N)/2,lt=(C+G)/2;(o=a[0])&&r.push(new Ii(o,v,C,et,lt)),(o=a[1])&&r.push(new Ii(o,et,C,N,lt)),(o=a[2])&&r.push(new Ii(o,v,lt,et,G)),(o=a[3])&&r.push(new Ii(o,et,lt,N,G))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this},Oi.x=function yd(n){return arguments.length?(this._x=n,this):this._x},Oi.y=function Td(n){return arguments.length?(this._y=n,this):this._y};var Wi="$";function ka(){}function Go(n,r){var e=new ka;if(n instanceof ka)n.each(function(C,N){e.set(N,C)});else if(Array.isArray(n)){var o,i=-1,a=n.length;if(null==r)for(;++i<a;)e.set(i,n[i]);else for(;++i<a;)e.set(r(o=n[i],i,n),o)}else if(n)for(var v in n)e.set(v,n[v]);return e}ka.prototype=Go.prototype={constructor:ka,has:function(n){return Wi+n in this},get:function(n){return this[Wi+n]},set:function(n,r){return this[Wi+n]=r,this},remove:function(n){var r=Wi+n;return r in this&&delete this[r]},clear:function(){for(var n in this)n[0]===Wi&&delete this[n]},keys:function(){var n=[];for(var r in this)r[0]===Wi&&n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)r[0]===Wi&&n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)r[0]===Wi&&n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)r[0]===Wi&&++n;return n},empty:function(){for(var n in this)if(n[0]===Wi)return!1;return!0},each:function(n){for(var r in this)r[0]===Wi&&n(this[r],r.slice(1),this)}};const us=Go;function Ia(){}var Er=us.prototype;function Dd(n){return n.index}function Ho(n,r){var e=n.get(r);if(!e)throw new Error("missing: "+r);return e}function Yo(n){var i,o,v,C,N,r=Dd,e=function et(Ft){return 1/Math.min(C[Ft.source.index],C[Ft.target.index])},a=qn(30),G=1;function lt(Ft){for(var vt=0,Gt=n.length;vt<G;++vt)for(var Xt,ge,Ae,pe,nn,on,yn,Kt=0;Kt<Gt;++Kt)pe=(Ae=(Xt=n[Kt]).target).x+Ae.vx-(ge=Xt.source).x-ge.vx||xr(),nn=Ae.y+Ae.vy-ge.y-ge.vy||xr(),nn*=on=((on=Math.sqrt(pe*pe+nn*nn))-o[Kt])/on*Ft*i[Kt],Ae.vx-=(pe*=on)*(yn=N[Kt]),Ae.vy-=nn*yn,ge.vx+=pe*(yn=1-yn),ge.vy+=nn*yn}function ot(){if(v){var Ft,Xt,vt=v.length,Gt=n.length,Kt=us(v,r);for(Ft=0,C=new Array(vt);Ft<Gt;++Ft)(Xt=n[Ft]).index=Ft,"object"!=typeof Xt.source&&(Xt.source=Ho(Kt,Xt.source)),"object"!=typeof Xt.target&&(Xt.target=Ho(Kt,Xt.target)),C[Xt.source.index]=(C[Xt.source.index]||0)+1,C[Xt.target.index]=(C[Xt.target.index]||0)+1;for(Ft=0,N=new Array(Gt);Ft<Gt;++Ft)N[Ft]=C[(Xt=n[Ft]).source.index]/(C[Xt.source.index]+C[Xt.target.index]);i=new Array(Gt),Ct(),o=new Array(Gt),kt()}}function Ct(){if(v)for(var Ft=0,vt=n.length;Ft<vt;++Ft)i[Ft]=+e(n[Ft],Ft,n)}function kt(){if(v)for(var Ft=0,vt=n.length;Ft<vt;++Ft)o[Ft]=+a(n[Ft],Ft,n)}return null==n&&(n=[]),lt.initialize=function(Ft){v=Ft,ot()},lt.links=function(Ft){return arguments.length?(n=Ft,ot(),lt):n},lt.id=function(Ft){return arguments.length?(r=Ft,lt):r},lt.iterations=function(Ft){return arguments.length?(G=+Ft,lt):G},lt.strength=function(Ft){return arguments.length?(e="function"==typeof Ft?Ft:qn(+Ft),Ct(),lt):e},lt.distance=function(Ft){return arguments.length?(a="function"==typeof Ft?Ft:qn(+Ft),kt(),lt):a},lt}function Ld(n){return n.x}function kd(n){return n.y}Ia.prototype=function Ed(n,r){var e=new Ia;if(n instanceof Ia)n.each(function(o){e.add(o)});else if(n){var i=-1,a=n.length;if(null==r)for(;++i<a;)e.add(n[i]);else for(;++i<a;)e.add(r(n[i],i,n))}return e}.prototype={constructor:Ia,has:Er.has,add:function(n){return this[Wi+(n+="")]=n,this},remove:Er.remove,clear:Er.clear,values:Er.keys,size:Er.size,empty:Er.empty,each:Er.each};var Od=Math.PI*(3-Math.sqrt(5));function Wo(n){var r,e=1,i=.001,a=1-Math.pow(i,1/300),o=0,v=.6,C=us(),N=(0,or.HT)(et),G=(0,ba.Z)("tick","end");function et(){lt(),G.call("tick",r),e<i&&(N.stop(),G.call("end",r))}function lt(kt){var Ft,Gt,vt=n.length;void 0===kt&&(kt=1);for(var Kt=0;Kt<kt;++Kt)for(e+=(o-e)*a,C.each(function(Xt){Xt(e)}),Ft=0;Ft<vt;++Ft)null==(Gt=n[Ft]).fx?Gt.x+=Gt.vx*=v:(Gt.x=Gt.fx,Gt.vx=0),null==Gt.fy?Gt.y+=Gt.vy*=v:(Gt.y=Gt.fy,Gt.vy=0);return r}function ot(){for(var vt,kt=0,Ft=n.length;kt<Ft;++kt){if((vt=n[kt]).index=kt,null!=vt.fx&&(vt.x=vt.fx),null!=vt.fy&&(vt.y=vt.fy),isNaN(vt.x)||isNaN(vt.y)){var Gt=10*Math.sqrt(kt),Kt=kt*Od;vt.x=Gt*Math.cos(Kt),vt.y=Gt*Math.sin(Kt)}(isNaN(vt.vx)||isNaN(vt.vy))&&(vt.vx=vt.vy=0)}}function Ct(kt){return kt.initialize&&kt.initialize(n),kt}return null==n&&(n=[]),ot(),r={tick:lt,restart:function(){return N.restart(et),r},stop:function(){return N.stop(),r},nodes:function(kt){return arguments.length?(n=kt,ot(),C.each(Ct),r):n},alpha:function(kt){return arguments.length?(e=+kt,r):e},alphaMin:function(kt){return arguments.length?(i=+kt,r):i},alphaDecay:function(kt){return arguments.length?(a=+kt,r):+a},alphaTarget:function(kt){return arguments.length?(o=+kt,r):o},velocityDecay:function(kt){return arguments.length?(v=1-kt,r):1-v},force:function(kt,Ft){return arguments.length>1?(null==Ft?C.remove(kt):C.set(kt,Ct(Ft)),r):C.get(kt)},find:function(kt,Ft,vt){var Xt,ge,Ae,pe,nn,Gt=0,Kt=n.length;for(null==vt?vt=1/0:vt*=vt,Gt=0;Gt<Kt;++Gt)(Ae=(Xt=kt-(pe=n[Gt]).x)*Xt+(ge=Ft-pe.y)*ge)<vt&&(nn=pe,vt=Ae);return nn},on:function(kt,Ft){return arguments.length>1?(G.on(kt,Ft),r):G.on(kt)}}}function Xo(){var n,r,e,a,i=qn(-30),o=1,v=1/0,C=.81;function N(ot){var Ct,kt=n.length,Ft=ls(n,Ld,kd).visitAfter(et);for(e=ot,Ct=0;Ct<kt;++Ct)r=n[Ct],Ft.visit(lt)}function G(){if(n){var ot,kt,Ct=n.length;for(a=new Array(Ct),ot=0;ot<Ct;++ot)a[(kt=n[ot]).index]=+i(kt,ot,n)}}function et(ot){var kt,Ft,Gt,Kt,Xt,Ct=0,vt=0;if(ot.length){for(Gt=Kt=Xt=0;Xt<4;++Xt)(kt=ot[Xt])&&(Ft=Math.abs(kt.value))&&(Ct+=kt.value,vt+=Ft,Gt+=Ft*kt.x,Kt+=Ft*kt.y);ot.x=Gt/vt,ot.y=Kt/vt}else{(kt=ot).x=kt.data.x,kt.y=kt.data.y;do{Ct+=a[kt.data.index]}while(kt=kt.next)}ot.value=Ct}function lt(ot,Ct,kt,Ft){if(!ot.value)return!0;var vt=ot.x-r.x,Gt=ot.y-r.y,Kt=Ft-Ct,Xt=vt*vt+Gt*Gt;if(Kt*Kt/C<Xt)return Xt<v&&(0===vt&&(Xt+=(vt=xr())*vt),0===Gt&&(Xt+=(Gt=xr())*Gt),Xt<o&&(Xt=Math.sqrt(o*Xt)),r.vx+=vt*ot.value*e/Xt,r.vy+=Gt*ot.value*e/Xt),!0;if(!(ot.length||Xt>=v)){(ot.data!==r||ot.next)&&(0===vt&&(Xt+=(vt=xr())*vt),0===Gt&&(Xt+=(Gt=xr())*Gt),Xt<o&&(Xt=Math.sqrt(o*Xt)));do{ot.data!==r&&(r.vx+=vt*(Kt=a[ot.data.index]*e/Xt),r.vy+=Gt*Kt)}while(ot=ot.next)}}return N.initialize=function(ot){n=ot,G()},N.strength=function(ot){return arguments.length?(i="function"==typeof ot?ot:qn(+ot),G(),N):i},N.distanceMin=function(ot){return arguments.length?(o=ot*ot,N):Math.sqrt(o)},N.distanceMax=function(ot){return arguments.length?(v=ot*ot,N):Math.sqrt(v)},N.theta=function(ot){return arguments.length?(C=ot*ot,N):Math.sqrt(C)},N}function Md(n,r,e){var i,o,v,a=qn(.1);function C(G){for(var et=0,lt=i.length;et<lt;++et){var ot=i[et],Ct=ot.x-r||1e-6,kt=ot.y-e||1e-6,Ft=Math.sqrt(Ct*Ct+kt*kt),vt=(v[et]-Ft)*o[et]*G/Ft;ot.vx+=Ct*vt,ot.vy+=kt*vt}}function N(){if(i){var G,et=i.length;for(o=new Array(et),v=new Array(et),G=0;G<et;++G)v[G]=+n(i[G],G,i),o[G]=isNaN(v[G])?0:+a(i[G],G,i)}}return"function"!=typeof n&&(n=qn(+n)),null==r&&(r=0),null==e&&(e=0),C.initialize=function(G){i=G,N()},C.strength=function(G){return arguments.length?(a="function"==typeof G?G:qn(+G),N(),C):a},C.radius=function(G){return arguments.length?(n="function"==typeof G?G:qn(+G),N(),C):n},C.x=function(G){return arguments.length?(r=+G,C):r},C.y=function(G){return arguments.length?(e=+G,C):e},C}function Nd(n){var e,i,a,r=qn(.1);function o(C){for(var et,N=0,G=e.length;N<G;++N)(et=e[N]).vx+=(a[N]-et.x)*i[N]*C}function v(){if(e){var C,N=e.length;for(i=new Array(N),a=new Array(N),C=0;C<N;++C)i[C]=isNaN(a[C]=+n(e[C],C,e))?0:+r(e[C],C,e)}}return"function"!=typeof n&&(n=qn(null==n?0:+n)),o.initialize=function(C){e=C,v()},o.strength=function(C){return arguments.length?(r="function"==typeof C?C:qn(+C),v(),o):r},o.x=function(C){return arguments.length?(n="function"==typeof C?C:qn(+C),v(),o):n},o}function Pd(n){var e,i,a,r=qn(.1);function o(C){for(var et,N=0,G=e.length;N<G;++N)(et=e[N]).vy+=(a[N]-et.y)*i[N]*C}function v(){if(e){var C,N=e.length;for(i=new Array(N),a=new Array(N),C=0;C<N;++C)i[C]=isNaN(a[C]=+n(e[C],C,e))?0:+r(e[C],C,e)}}return"function"!=typeof n&&(n=qn(null==n?0:+n)),o.initialize=function(C){e=C,v()},o.strength=function(C){return arguments.length?(r="function"==typeof C?C:qn(+C),v(),o):r},o.y=function(C){return arguments.length?(n="function"==typeof C?C:qn(+C),v(),o):n},o}var Fd=s(67824);function Rd(n,r,e){var i=new or.B7,a=r;return null==r?(i.restart(n,r,e),i):(r=+r,e=null==e?(0,or.zO)():+e,i.restart(function o(v){v+=a,i.restart(o,a+=r,e),n(v)},r,e),i)}const Zd=["linkTemplate"],Bd=["nodeTemplate"],Ud=["clusterTemplate"],Gd=["defsTemplate"],Vd=["miniMapNodeTemplate"],zd=["nodeElement"],Hd=["linkElement"];function Yd(n,r){if(1&n&&(t.O4$(),t.GkF(0,14)),2&n){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.defsTemplate)}}function Wd(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",15)),2&n){const e=r.$implicit;t.uIk("d",e.textPath)("id",e.id)}}const ca=function(n){return{$implicit:n}};function Xd(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function $d(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function jd(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).onClick(o)}),t.YNc(2,Xd,1,4,"ng-container",18),t.YNc(3,$d,4,6,"g",19),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldClusters.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!i.clusterTemplate)}}function Qd(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.linkTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function Jd(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",26)),2&n){const e=t.oxw().$implicit;t.uIk("d",e.line)}}function Kd(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,Qd,1,4,"ng-container",18),t.YNc(3,Jd,1,1,"path",25),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.Q6J("id",e.id),t.xp6(2),t.Q6J("ngIf",i.linkTemplate),t.xp6(1),t.Q6J("ngIf",!i.linkTemplate)}}function qd(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function tp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit;t.uIk("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function ep(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).onClick(o)})("mousedown",function(a){const v=t.CHM(e).$implicit;return t.oxw(2).onNodeMouseDown(a,v)}),t.YNc(2,qd,1,4,"ng-container",18),t.YNc(3,tp,1,3,"circle",29),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate)}}function np(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(a){return t.CHM(e),t.oxw().onTouchStart(a)})("touchend",function(a){return t.CHM(e),t.oxw().onTouchEnd(a)}),t.TgZ(1,"defs"),t.YNc(2,Yd,1,1,"ng-container",5),t.YNc(3,Wd,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){return t.CHM(e),t.oxw().isPanning=!0}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,jd,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,Kd,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,ep,4,6,"g",13),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",e.defsTemplate),t.xp6(1),t.Q6J("ngForOf",e.graph.edges),t.xp6(1),t.uIk("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function ip(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function rp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,ca,e))}}function ap(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.uIk("cx",e.dimension.width/2/i.minimapScaleCoefficient)("cy",e.dimension.height/2/i.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function sp(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,ip,1,4,"ng-container",18),t.YNc(3,rp,1,4,"ng-container",18),t.YNc(4,ap,1,3,"circle",29),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.miniMapNodeTemplate&&i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate&&!i.miniMapNodeTemplate)}}function op(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",31),t.TgZ(1,"rect",32),t.NdJ("mousedown",function(a){return t.CHM(e),t.oxw().onMinimapPanTo(a)}),t.qZA(),t.TgZ(2,"g"),t.TgZ(3,"g",33),t.YNc(4,sp,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){return t.CHM(e),t.oxw().onMinimapDragMouseDown()}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.uIk("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),t.xp6(1),t.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/e.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),t.xp6(1),t.ekj("panning",e.isMinimapPanning),t.uIk("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const lp=["*"],$o={};function ur(){let n=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return n=`a${n}`,$o[n]?ur():($o[n]=!0,n)}var Br=(()=>{return(n=Br||(Br={})).Both="both",n.Horizontal="horizontal",n.Vertical="vertical",Br;var n})(),Ur=(()=>{return(n=Ur||(Ur={})).UpperLeft="UpperLeft",n.UpperRight="UpperRight",Ur;var n})();function cp(n,r,e){e=e||{};let i,a,o,v=null,C=0;function N(){C=!1===e.leading?0:+new Date,v=null,o=n.apply(i,a)}return function(...G){const et=+new Date;!C&&!1===e.leading&&(C=et);const lt=r-(et-C);return i=this,a=G,lt<=0?(clearTimeout(v),v=null,C=et,o=n.apply(i,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,lt)),o}}function up(n,r){return function(i,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:cp(o.value,n,r)}),this[a]}}}}const jo=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class hp{constructor(r,e,i){"string"==typeof r&&(r=jo.find(a=>a.name===r)),this.colorDomain=r.domain,this.domain=e,this.customColors=i,this.scale=this.generateColorScheme(r,this.domain)}generateColorScheme(r,e){return"string"==typeof r&&(r=jo.find(i=>i.name===r)),os().range(r.domain).domain(e)}getColor(r){if(null==r)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(r);const e=r.toString();let i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),i?i.value:this.scale(r)}}let pp=(()=>{class n{constructor(e,i){this.element=e,this.zone=i,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:i,offsetWidth:a}=this.element.nativeElement;i&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),n})();var Gr=(()=>{return(n=Gr||(Gr={})).LEFT_TO_RIGHT="LR",n.RIGHT_TO_LEFT="RL",n.TOP_TO_BOTTOM="TB",n.BOTTOM_TO_TOM="BT",Gr;var n})();function Vr(n){return"string"==typeof n?{id:n,x:0,y:0}:n}function Jo(n,r){return"number"==typeof r?n[r]:r}const Ko={dagre:class fp{constructor(){this.defaultSettings={orientation:Gr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Zr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}return r}updateEdge(r,e){const i=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Zr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=ur()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreCluster:class mp{constructor(){this.defaultSettings={orientation:Gr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Zr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;const e=i=>{const a=this.dagreGraph._nodes[i.id];return Object.assign(Object.assign({},i),{position:{x:a.x,y:a.y},dimension:{width:a.width,height:a.height}})};return r.clusters=(r.clusters||[]).map(e),r.nodes=r.nodes.map(e),r}updateEdge(r,e){const i=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Zr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreClusters=r.clusters||[],this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=ur()),a});for(const i of this.dagreNodes)this.dagreGraph.setNode(i.id,i);for(const i of this.dagreClusters)this.dagreGraph.setNode(i.id,i),i.childNodeIds.forEach(a=>{this.dagreGraph.setParent(a,i.id)});for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreNodesOnly:class _p{constructor(){this.defaultSettings={orientation:Gr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Zr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}for(const e of r.edges)this.updateEdge(r,e);return r}updateEdge(r,e){const i=r.nodes.find(kt=>kt.id===e.source),a=r.nodes.find(kt=>kt.id===e.target),o="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",v="y"===o?"x":"y",C="y"===o?"height":"width",N=i.position[o]<=a.position[o]?-1:1,G={[v]:i.position[v],[o]:i.position[o]-N*(i.dimension[C]/2)},et={[v]:a.position[v],[o]:a.position[o]+N*(a.dimension[C]/2)},lt=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[G,{[v]:G[v],[o]:G[o]-N*lt},{[v]:et[v],[o]:et[o]+N*lt},et];const Ct=r.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return Ct&&(Ct.points=e.points),r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Zr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=ur()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},d3ForceDirected:class vp{constructor(){this.defaultSettings={force:Wo().force("charge",Xo().strength(-150)).force("collide",Uo(5)),forceLink:Yo().id(r=>r.id).distance(()=>100)},this.settings={},this.outputGraph$=new we.x}run(r){return this.inputGraph=r,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign({},e))],edges:[...this.inputGraph.edges.map(e=>Object.assign({},e))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.nodes(this.d3Graph.nodes).force("link",i.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(r){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||ur(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>Object.assign(Object.assign({},e),{source:Vr(e.source).id,target:Vr(e.target).id,points:[{x:Vr(e.source).x,y:Vr(e.source).y},{x:Vr(e.target).x,y:Vr(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){this.settings.force.alphaTarget(.3).restart();const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.draggingStart={x:e.x-i.x,y:e.y-i.y},i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDrag(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDragEnd(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.settings.force.alphaTarget(0),i.fx=void 0,i.fy=void 0)}},colaForceDirected:class xp{constructor(){this.defaultSettings={force:(0,Fd.d3adaptor)(Object.assign(Object.assign(Object.assign({},x),c),_)).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new we.x}run(r){return this.inputGraph=r,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign(Object.assign({},e),{width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(i=>this.inputGraph.clusters.findIndex(a=>a.id===i)).filter(i=>i>=0),leaves:e.childNodeIds.map(i=>this.inputGraph.nodes.findIndex(a=>a.id===i)).filter(i=>i>=0)}))],links:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(-1!==i&&-1!==a)return Object.assign(Object.assign({},e),{source:i,target:a})}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(!(i>=0&&a>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(r){return this.outputGraph.nodes=r.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||ur(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=r.links.map(e=>{const i=Jo(r.nodes,e.source),a=Jo(r.nodes,e.target);return Object.assign(Object.assign({},e),{source:i.id,target:a.id,points:[i.bounds.rayIntersection(a.bounds.cx(),a.bounds.cy()),a.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy())]})}).concat(r.groupLinks.map(e=>{const i=r.nodes.find(C=>C.id===e.source),a=r.nodes.find(C=>C.id===e.target),o=i||r.groups.find(C=>C.id===e.source),v=a||r.groups.find(C=>C.id===e.target);return Object.assign(Object.assign({},e),{source:o.id,target:v.id,points:[o.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(o.bounds.cx(),o.bounds.cy())]})})),this.outputGraph.clusters=r.groups.map((e,i)=>Object.assign(Object.assign({},this.inputGraph.clusters[i]),{dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(this.draggingStart={x:a.x-e.x,y:a.y-e.y},a.fixed=1,this.settings.force.start())}onDrag(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(a.x=this.draggingStart.x+e.x,a.y=this.draggingStart.y+e.y)}onDragEnd(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(a.fixed=0)}}};let qo=(()=>{class n{getLayout(e){if(Ko[e])return new Ko[e];throw new Error(`Unknown layout type '${e}'`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),yp=(()=>{class n{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),o=e.wheelDelta?i<0:i>0;(e.wheelDelta?i>0:i<0)?this.mouseWheelUp.emit(e):o&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","mouseWheel",""]],hostBindings:function(e,i){1&e&&t.NdJ("mousewheel",function(o){return i.onMouseWheelChrome(o)})("DOMMouseScroll",function(o){return i.onMouseWheelFirefox(o)})("wheel",function(o){return i.onWheel(o)})("onmousewheel",function(o){return i.onMouseWheelIE(o)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),n})(),bp=(()=>{class n{constructor(e,i,a,o){this.el=e,this.zone=i,this.cd=a,this.layoutService=o,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Br.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=Ur.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new Oo.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=v=>v.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${ur()}`}ngOnChanges(e){this.basicUpdate();const{layoutSettings:a}=e;this.setLayout(this.layout),a&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new pp(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=uu.beta(1)),this.zone.run(()=>{this.dims=function dp({width:n,height:r}){let e=n,i=r;return e=Math.max(0,e),i=Math.max(0,i),{width:Math.floor(e),height:Math.floor(i)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Oo.w0;const e=i=>(i.meta||(i.meta={}),i.id||(i.id=ur()),i.dimension?i.meta.forceDimensions=void 0===i.meta.forceDimensions||i.meta.forceDimensions:(i.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},i.meta.forceDimensions=!1),i.position={x:0,y:0},i.data=i.data?i.data:{},i);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(i=>(i.id||(i.id=ur()),i)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),i=e instanceof mt.y?e:(0,dt.of)(e);this.graphSubscription.add(i.subscribe(a=>{this.graph=a,this.tick()})),0!==this.graph.nodes.length&&i.pipe((0,Yh.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),e.add(o.id)});const i=new Set;(this.graph.clusters||[]).map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),i.add(o.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=i},500);const a=[];for(const o in this.graph.edgeLabels){const v=this.graph.edgeLabels[o],C=o.replace(/[^\w-]*/g,""),N=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let G=this._oldLinks.find(N?Ft=>`${Ft.source}${Ft.target}${Ft.id}`===C:Ft=>`${Ft.source}${Ft.target}`===C);const et=this.graph.edges.find(N?Ft=>`${Ft.source}${Ft.target}${Ft.id}`===C:Ft=>`${Ft.source}${Ft.target}`===C);G?G.data&&et&&et.data&&JSON.stringify(G.data)!==JSON.stringify(et.data)&&(G.data=et.data):G=et||v,G.oldLine=G.line;const lt=v.points,ot=this.generateLine(lt),Ct=Object.assign({},G);Ct.line=ot,Ct.points=lt,this.updateMidpointOnEdge(Ct,lt);const kt=lt[Math.floor(lt.length/2)];kt&&(Ct.textTransform=`translate(${kt.x||0},${kt.y||0})`),Ct.textAngle=0,Ct.oldLine||(Ct.oldLine=Ct.line),this.calcDominantBaseline(Ct),a.push(Ct)}this.graph.edges=a,this.graph.edges&&(this._oldLinks=this.graph.edges.map(o=>{const v=Object.assign({},o);return v.oldLine=o.line,v})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case Ur.UpperLeft:return"";case Ur.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,i=-1/0,a=1/0,o=-1/0;for(let v=0;v<this.graph.nodes.length;v++){const C=this.graph.nodes[v];e=C.position.x<e?C.position.x:e,a=C.position.y<a?C.position.y:a,i=C.position.x+C.dimension.width>i?C.position.x+C.dimension.width:i,o=C.position.y+C.dimension.height>o?C.position.y+C.dimension.height:o}e-=100,a-=100,i+=100,o+=100,this.graphDims.width=i-e,this.graphDims.height=o-a,this.minimapOffsetX=e,this.minimapOffsetY=a}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const i=e.nativeElement,a=this.graph.nodes.find(v=>v.id===i.id);if(!a)return;let o;try{if(o=i.getBBox(),!o.width||!o.height)return}catch(v){return}if(a.dimension.height=this.nodeHeight?a.dimension.height&&a.meta.forceDimensions?a.dimension.height:this.nodeHeight:a.dimension.height&&a.meta.forceDimensions?a.dimension.height:o.height,this.nodeMaxHeight&&(a.dimension.height=Math.max(a.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(a.dimension.height=Math.min(a.dimension.height,this.nodeMinHeight)),this.nodeWidth)a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:this.nodeWidth;else if(i.getElementsByTagName("text").length){let v;try{for(const C of i.getElementsByTagName("text")){const N=C.getBBox();v?(N.width>v.width&&(v.width=N.width),N.height>v.height&&(v.height=N.height)):v=N}}catch(C){return}a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:v.width+20}else a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:o.width;this.nodeMaxWidth&&(a.dimension.width=Math.max(a.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(a.dimension.width=Math.min(a.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(i=>{const a=this.graph.edges.find(o=>o.id===i.nativeElement.id);a&&(Ks(i.nativeElement).select(".line").attr("d",a.oldLine).transition().ease(ao).duration(e?500:0).attr("d",a.line),Ks(this.el.nativeElement).select(`#${a.id}`).attr("d",a.oldTextPath).transition().ease(ao).duration(e?500:0).attr("d",a.textPath),this.updateMidpointOnEdge(a,a.points))})}calcDominantBaseline(e){const i=e.points[0],a=e.points[e.points.length-1];e.oldTextPath=e.textPath,a.x<i.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return function gu(){var n=fu,r=mu,e=ya(!0),i=null,a=pu,o=null;function v(C){var N,et,ot,G=C.length,lt=!1;for(null==i&&(o=a(ot=du())),N=0;N<=G;++N)!(N<G&&e(et=C[N],N,C))===lt&&((lt=!lt)?o.lineStart():o.lineEnd()),lt&&o.point(+n(et,N,C),+r(et,N,C));if(ot)return o=null,ot+""||null}return v.x=function(C){return arguments.length?(n="function"==typeof C?C:ya(+C),v):n},v.y=function(C){return arguments.length?(r="function"==typeof C?C:ya(+C),v):r},v.defined=function(C){return arguments.length?(e="function"==typeof C?C:ya(!!C),v):e},v.curve=function(C){return arguments.length?(a=C,null!=i&&(o=a(i)),v):a},v.context=function(C){return arguments.length?(null==C?i=o=null:o=a(i=C),v):i},v}().x(a=>a.x).y(a=>a.y).curve(this.curve)(e)}onZoom(e,i){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const a=1+("in"===i?this.zoomSpeed:-this.zoomSpeed),o=this.zoomLevel*a;if(!(o<=this.minZoomLevel||o>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const v=e.clientX,C=e.clientY,N=this.el.nativeElement.querySelector("svg"),G=N.querySelector("g.chart"),et=N.createSVGPoint();et.x=v,et.y=C;const lt=et.matrixTransform(G.getScreenCTM().inverse());this.pan(lt.x,lt.y,!0),this.zoom(a),this.pan(-lt.x,-lt.y,!0)}else this.zoom(a)}pan(e,i,a=!1){const o=a?1:this.zoomLevel;this.transformationMatrix=la(this.transformationMatrix,Fo(e/o,i/o)),this.updateTransform()}panTo(e,i){null==e||isNaN(e)||null==i||isNaN(i)||(this.transformationMatrix=la(this.transformationMatrix,Fo((-this.panOffsetX-e*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-i*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(e){this.transformationMatrix=la(this.transformationMatrix,function td(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return qh(r)&&(r=n),{a:n,c:0,e:0,b:0,d:r,f:0}}(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const i=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(i,e),i.position.x+=e.movementX/this.zoomLevel,i.position.y+=e.movementY/this.zoomLevel,i.transform=`translate(${i.position.x-i.dimension.width/2}, ${i.position.y-i.dimension.height/2})`;for(const v of this.graph.edges)if((v.target===i.id||v.source===i.id||v.target.id===i.id||v.source.id===i.id)&&this.layout&&"string"!=typeof this.layout){const C=this.layout.updateEdge(this.graph,v),N=C instanceof mt.y?C:(0,dt.of)(C);this.graphSubscription.add(N.subscribe(G=>{this.graph=G,this.redrawEdge(v)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const i=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=i}updateTransform(){this.transform=function nd(n){return function Po(n){return"matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")"}(n)}(function ad(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(n.a*r)/r,b:Math.round(n.b*r)/r,c:Math.round(n.c*r)/r,d:Math.round(n.d*r)/r,e:Math.round(n.e*r)/r,f:Math.round(n.f*r)/r}}(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const i=this.activeEntries.indexOf(e);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,i)=>-1!==e.indexOf(i)?e:e.concat([i]),[]).sort()}trackLinkBy(e,i){return i.id}trackNodeBy(e,i){return i.id}setColors(){this.colors=new hp(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const i=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,o=i-this._touchLastX,v=a-this._touchLastY;this._touchLastX=i,this._touchLastY=a,this.pan(o,v)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,i){!this.draggingEnabled||(this.isDragging=!0,this.draggingNode=i,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(i,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){this.panTo((e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let a=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);a<this.minZoomLevel&&(a=this.minZoomLevel),a>this.maxZoomLevel&&(a=this.maxZoomLevel),a!==this.zoomLevel&&(this.zoomLevel=a,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const i=this.graph.nodes.find(a=>a.id===e);!i||this.panTo(i.position.x,i.position.y)}panWithConstraints(e,i){let a=i.movementX,o=i.movementY;switch(this.isMinimapPanning&&(a=-this.minimapScaleCoefficient*a*this.zoomLevel,o=-this.minimapScaleCoefficient*o*this.zoomLevel),e){case Br.Horizontal:this.pan(a,0);break;case Br.Vertical:this.pan(0,o);break;default:this.pan(a,o)}}updateMidpointOnEdge(e,i){if(e&&i)if(i.length%2==1)e.midPoint=i[Math.floor(i.length/2)];else{const a=i[i.length/2],o=i[i.length/2-1];e.midPoint={x:(a.x+o.x)/2,y:(a.y+o.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,i;const a=this.el.nativeElement;if(null!==a.parentNode){const o=a.parentNode.getBoundingClientRect();e=o.width,i=o.height}return e&&i?{width:e,height:i}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const i=(0,Mo.R)(window,"resize").pipe((0,tt.b)(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(qo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-graph"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,Zd,5),t.Suo(a,Bd,5),t.Suo(a,Ud,5),t.Suo(a,Gd,5),t.Suo(a,Vd,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.linkTemplate=o.first),t.iGM(o=t.CRH())&&(i.nodeTemplate=o.first),t.iGM(o=t.CRH())&&(i.clusterTemplate=o.first),t.iGM(o=t.CRH())&&(i.defsTemplate=o.first),t.iGM(o=t.CRH())&&(i.miniMapNodeTemplate=o.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(zd,5),t.Gf(Hd,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.nodeElements=a),t.iGM(a=t.CRH())&&(i.linkElements=a)}},hostBindings:function(e,i){1&e&&t.NdJ("mousemove",function(o){return i.onMouseMove(o)},!1,t.evT)("mousedown",function(o){return i.onMouseDown(o)},!1,t.evT)("click",function(o){return i.graphClick(o)},!1,t.evT)("touchmove",function(o){return i.onTouchMove(o)},!1,t.evT)("mouseup",function(o){return i.onMouseUp(o)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:lp,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(o){return i.onZoom(o,"in")})("mouseWheelDown",function(o){return i.onZoom(o,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,np,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,op,6,15,"g",3),t.qZA(),t.qZA()),2&e&&(t.Udp("width",i.width,"px"),t.Q6J("@animationState","active")("@.disabled",!i.animations),t.xp6(1),t.uIk("width",i.width)("height",i.height),t.xp6(1),t.Q6J("ngIf",i.initialized&&i.graph),t.xp6(1),t.uIk("id",i.minimapClipPathId),t.xp6(1),t.uIk("width",i.graphDims.width/i.minimapScaleCoefficient)("height",i.graphDims.height/i.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",i.showMiniMap))},directives:[yp,g.O5,g.tP,g.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,Me.X$)("animationState",[(0,Me.eR)(":enter",[(0,Me.oB)({opacity:0}),(0,Me.jt)("500ms 100ms",(0,Me.oB)({opacity:1}))])])]},changeDetection:0}),(0,Oe.gn)([up(500)],n.prototype,"updateMinimap",null),n})(),Tp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[qo],imports:[[g.ez]]}),n})(),Cp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez],Tp]}),n})();var tl=s(47429);s(52016),s(56758),s(37656),s(29132),s(18429);Math;function ua(n){return{type:n}}function ul(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function _s(n){let r=n,e=n;function i(v,C,N,G){for(null==N&&(N=0),null==G&&(G=v.length);N<G;){const et=N+G>>>1;e(v[et],C)<0?N=et+1:G=et}return N}return 1===n.length&&(r=(v,C)=>n(v)-C,e=function Np(n){return(r,e)=>ul(n(r),e)}(n)),{left:i,center:function o(v,C,N,G){null==N&&(N=0),null==G&&(G=v.length);const et=i(v,C,N,G-1);return et>N&&r(v[et-1],C)>-r(v[et],C)?et-1:et},right:function a(v,C,N,G){for(null==N&&(N=0),null==G&&(G=v.length);N<G;){const et=N+G>>>1;e(v[et],C)>0?G=et:N=et+1}return N}}}["w","e"].map(ua),["n","s"].map(ua),["n","w","e","s","nw","ne","sw","se"].map(ua);var vs=Math.sqrt(50),xs=Math.sqrt(10),ys=Math.sqrt(2);function bs(n,r,e){var i=Math.abs(r-n)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/a;return o>=vs?a*=10:o>=xs?a*=5:o>=ys&&(a*=2),r<n?-a:a}const pr=1e3,Xi=6e4,fr=60*Xi,Dr=24*fr,Ts=7*Dr,dl=30*Dr,Cs=365*Dr;var ws=new Date,As=new Date;function hi(n,r,e,i){function a(o){return n(o=0===arguments.length?new Date:new Date(+o)),o}return a.floor=function(o){return n(o=new Date(+o)),o},a.ceil=function(o){return n(o=new Date(o-1)),r(o,1),n(o),o},a.round=function(o){var v=a(o),C=a.ceil(o);return o-v<C-o?v:C},a.offset=function(o,v){return r(o=new Date(+o),null==v?1:Math.floor(v)),o},a.range=function(o,v,C){var G,N=[];if(o=a.ceil(o),C=null==C?1:Math.floor(C),!(o<v&&C>0))return N;do{N.push(G=new Date(+o)),r(o,C),n(o)}while(G<o&&o<v);return N},a.filter=function(o){return hi(function(v){if(v>=v)for(;n(v),!o(v);)v.setTime(v-1)},function(v,C){if(v>=v)if(C<0)for(;++C<=0;)for(;r(v,-1),!o(v););else for(;--C>=0;)for(;r(v,1),!o(v););})},e&&(a.count=function(o,v){return ws.setTime(+o),As.setTime(+v),n(ws),n(As),Math.floor(e(ws,As))},a.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?a.filter(i?function(v){return i(v)%o==0}:function(v){return a.count(0,v)%o==0}):a:null}),a}var Na=hi(function(){},function(n,r){n.setTime(+n+r)},function(n,r){return r-n});Na.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?hi(function(r){r.setTime(Math.floor(r/n)*n)},function(r,e){r.setTime(+r+e*n)},function(r,e){return(e-r)/n}):Na:null};const Fp=Na;const ha=hi(function(n){n.setTime(n-n.getMilliseconds())},function(n,r){n.setTime(+n+r*pr)},function(n,r){return(r-n)/pr},function(n){return n.getUTCSeconds()});const ml=hi(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*pr)},function(n,r){n.setTime(+n+r*Xi)},function(n,r){return(r-n)/Xi},function(n){return n.getMinutes()});const _l=hi(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*pr-n.getMinutes()*Xi)},function(n,r){n.setTime(+n+r*fr)},function(n,r){return(r-n)/fr},function(n){return n.getHours()});const Pa=hi(n=>n.setHours(0,0,0,0),(n,r)=>n.setDate(n.getDate()+r),(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Xi)/Dr,n=>n.getDate()-1);function Lr(n){return hi(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Xi)/Ts})}var Fa=Lr(0),Ra=Lr(1),Yr=(Lr(2),Lr(3),Lr(4));const yl=(Lr(5),Lr(6),hi(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,r){n.setMonth(n.getMonth()+r)},function(n,r){return r.getMonth()-n.getMonth()+12*(r.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}));var Ss=hi(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,r){n.setFullYear(n.getFullYear()+r)},function(n,r){return r.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});Ss.every=function(n){return isFinite(n=Math.floor(n))&&n>0?hi(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*n)}):null};const kr=Ss;const Gp=hi(function(n){n.setUTCSeconds(0,0)},function(n,r){n.setTime(+n+r*Xi)},function(n,r){return(r-n)/Xi},function(n){return n.getUTCMinutes()});const Vp=hi(function(n){n.setUTCMinutes(0,0,0)},function(n,r){n.setTime(+n+r*fr)},function(n,r){return(r-n)/fr},function(n){return n.getUTCHours()});const Es=hi(function(n){n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCDate(n.getUTCDate()+r)},function(n,r){return(r-n)/Dr},function(n){return n.getUTCDate()-1});function Ir(n){return hi(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-n)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/Ts})}var Ds=Ir(0),Za=Ir(1),Wr=(Ir(2),Ir(3),Ir(4));const Xp=(Ir(5),Ir(6),hi(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCMonth(n.getUTCMonth()+r)},function(n,r){return r.getUTCMonth()-n.getUTCMonth()+12*(r.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}));var Ls=hi(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r)},function(n,r){return r.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Ls.every=function(n){return isFinite(n=Math.floor(n))&&n>0?hi(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/n)*n),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*n)}):null};const Xr=Ls;function Al(n,r,e,i,a,o){const v=[[ha,1,pr],[ha,5,5e3],[ha,15,15e3],[ha,30,3e4],[o,1,Xi],[o,5,5*Xi],[o,15,15*Xi],[o,30,30*Xi],[a,1,fr],[a,3,3*fr],[a,6,6*fr],[a,12,12*fr],[i,1,Dr],[i,2,2*Dr],[e,1,Ts],[r,1,dl],[r,3,3*dl],[n,1,Cs]];function N(G,et,lt){const ot=Math.abs(et-G)/lt,Ct=_s(([,,vt])=>vt).right(v,ot);if(Ct===v.length)return n.every(bs(G/Cs,et/Cs,lt));if(0===Ct)return Fp.every(Math.max(bs(G,et,lt),1));const[kt,Ft]=v[ot/v[Ct-1][2]<v[Ct][2]/ot?Ct-1:Ct];return kt.every(Ft)}return[function C(G,et,lt){const ot=et<G;ot&&([G,et]=[et,G]);const Ct=lt&&"function"==typeof lt.range?lt:N(G,et,lt),kt=Ct?Ct.range(G,+et+1):[];return ot?kt.reverse():kt},N]}const[g1,_1]=Al(Xr,Xp,Ds,Es,Vp,Gp),[$p,jp]=Al(kr,yl,Fa,Pa,_l,ml);function ks(n){if(0<=n.y&&n.y<100){var r=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return r.setFullYear(n.y),r}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Is(n){if(0<=n.y&&n.y<100){var r=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return r.setUTCFullYear(n.y),r}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function da(n,r,e){return{y:n,m:r,d:e,H:0,M:0,S:0,L:0}}var Sl={"-":"",_:" ",0:"0"},di=/^\s*\d+/,Jp=/^%/,Kp=/[\\^$*+?|[\]().{}]/g;function xn(n,r,e){var i=n<0?"-":"",a=(i?-n:n)+"",o=a.length;return i+(o<e?new Array(e-o+1).join(r)+a:a)}function qp(n){return n.replace(Kp,"\\$&")}function pa(n){return new RegExp("^(?:"+n.map(qp).join("|")+")","i")}function fa(n){return new Map(n.map((r,e)=>[r.toLowerCase(),e]))}function tf(n,r,e){var i=di.exec(r.slice(e,e+1));return i?(n.w=+i[0],e+i[0].length):-1}function ef(n,r,e){var i=di.exec(r.slice(e,e+1));return i?(n.u=+i[0],e+i[0].length):-1}function nf(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.U=+i[0],e+i[0].length):-1}function rf(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.V=+i[0],e+i[0].length):-1}function af(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.W=+i[0],e+i[0].length):-1}function El(n,r,e){var i=di.exec(r.slice(e,e+4));return i?(n.y=+i[0],e+i[0].length):-1}function Dl(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function sf(n,r,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function of(n,r,e){var i=di.exec(r.slice(e,e+1));return i?(n.q=3*i[0]-3,e+i[0].length):-1}function lf(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.m=i[0]-1,e+i[0].length):-1}function Ll(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.d=+i[0],e+i[0].length):-1}function cf(n,r,e){var i=di.exec(r.slice(e,e+3));return i?(n.m=0,n.d=+i[0],e+i[0].length):-1}function kl(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.H=+i[0],e+i[0].length):-1}function uf(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.M=+i[0],e+i[0].length):-1}function hf(n,r,e){var i=di.exec(r.slice(e,e+2));return i?(n.S=+i[0],e+i[0].length):-1}function df(n,r,e){var i=di.exec(r.slice(e,e+3));return i?(n.L=+i[0],e+i[0].length):-1}function pf(n,r,e){var i=di.exec(r.slice(e,e+6));return i?(n.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function ff(n,r,e){var i=Jp.exec(r.slice(e,e+1));return i?e+i[0].length:-1}function mf(n,r,e){var i=di.exec(r.slice(e));return i?(n.Q=+i[0],e+i[0].length):-1}function gf(n,r,e){var i=di.exec(r.slice(e));return i?(n.s=+i[0],e+i[0].length):-1}function Il(n,r){return xn(n.getDate(),r,2)}function _f(n,r){return xn(n.getHours(),r,2)}function vf(n,r){return xn(n.getHours()%12||12,r,2)}function xf(n,r){return xn(1+Pa.count(kr(n),n),r,3)}function Ol(n,r){return xn(n.getMilliseconds(),r,3)}function yf(n,r){return Ol(n,r)+"000"}function bf(n,r){return xn(n.getMonth()+1,r,2)}function Tf(n,r){return xn(n.getMinutes(),r,2)}function Cf(n,r){return xn(n.getSeconds(),r,2)}function wf(n){var r=n.getDay();return 0===r?7:r}function Af(n,r){return xn(Fa.count(kr(n)-1,n),r,2)}function Ml(n){var r=n.getDay();return r>=4||0===r?Yr(n):Yr.ceil(n)}function Sf(n,r){return n=Ml(n),xn(Yr.count(kr(n),n)+(4===kr(n).getDay()),r,2)}function Ef(n){return n.getDay()}function Df(n,r){return xn(Ra.count(kr(n)-1,n),r,2)}function Lf(n,r){return xn(n.getFullYear()%100,r,2)}function kf(n,r){return xn((n=Ml(n)).getFullYear()%100,r,2)}function If(n,r){return xn(n.getFullYear()%1e4,r,4)}function Of(n,r){var e=n.getDay();return xn((n=e>=4||0===e?Yr(n):Yr.ceil(n)).getFullYear()%1e4,r,4)}function Mf(n){var r=n.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+xn(r/60|0,"0",2)+xn(r%60,"0",2)}function Nl(n,r){return xn(n.getUTCDate(),r,2)}function Nf(n,r){return xn(n.getUTCHours(),r,2)}function Pf(n,r){return xn(n.getUTCHours()%12||12,r,2)}function Ff(n,r){return xn(1+Es.count(Xr(n),n),r,3)}function Pl(n,r){return xn(n.getUTCMilliseconds(),r,3)}function Rf(n,r){return Pl(n,r)+"000"}function Zf(n,r){return xn(n.getUTCMonth()+1,r,2)}function Bf(n,r){return xn(n.getUTCMinutes(),r,2)}function Uf(n,r){return xn(n.getUTCSeconds(),r,2)}function Gf(n){var r=n.getUTCDay();return 0===r?7:r}function Vf(n,r){return xn(Ds.count(Xr(n)-1,n),r,2)}function Fl(n){var r=n.getUTCDay();return r>=4||0===r?Wr(n):Wr.ceil(n)}function zf(n,r){return n=Fl(n),xn(Wr.count(Xr(n),n)+(4===Xr(n).getUTCDay()),r,2)}function Hf(n){return n.getUTCDay()}function Yf(n,r){return xn(Za.count(Xr(n)-1,n),r,2)}function Wf(n,r){return xn(n.getUTCFullYear()%100,r,2)}function Xf(n,r){return xn((n=Fl(n)).getUTCFullYear()%100,r,2)}function $f(n,r){return xn(n.getUTCFullYear()%1e4,r,4)}function jf(n,r){var e=n.getUTCDay();return xn((n=e>=4||0===e?Wr(n):Wr.ceil(n)).getUTCFullYear()%1e4,r,4)}function Qf(){return"+0000"}function Rl(){return"%"}function Zl(n){return+n}function Bl(n){return Math.floor(+n/1e3)}!function tm(n){(function Qp(n){var r=n.dateTime,e=n.date,i=n.time,a=n.periods,o=n.days,v=n.shortDays,C=n.months,N=n.shortMonths,G=pa(a),et=fa(a),lt=pa(o),ot=fa(o),Ct=pa(v),kt=fa(v),Ft=pa(C),vt=fa(C),Gt=pa(N),Kt=fa(N),Xt={a:function ii(me){return v[me.getDay()]},A:function sr(me){return o[me.getDay()]},b:function ri(me){return N[me.getMonth()]},B:function ai(me){return C[me.getMonth()]},c:null,d:Il,e:Il,f:yf,g:kf,G:Of,H:_f,I:vf,j:xf,L:Ol,m:bf,M:Tf,p:function Un(me){return a[+(me.getHours()>=12)]},q:function Gn(me){return 1+~~(me.getMonth()/3)},Q:Zl,s:Bl,S:Cf,u:wf,U:Af,V:Sf,w:Ef,W:Df,x:null,X:null,y:Lf,Y:If,Z:Mf,"%":Rl},ge={a:function ga(me){return v[me.getUTCDay()]},A:function qr(me){return o[me.getUTCDay()]},b:function ta(me){return N[me.getUTCMonth()]},B:function ea(me){return C[me.getUTCMonth()]},c:null,d:Nl,e:Nl,f:Rf,g:Xf,G:jf,H:Nf,I:Pf,j:Ff,L:Pl,m:Zf,M:Bf,p:function Si(me){return a[+(me.getUTCHours()>=12)]},q:function Va(me){return 1+~~(me.getUTCMonth()/3)},Q:Zl,s:Bl,S:Uf,u:Gf,U:Vf,V:zf,w:Hf,W:Yf,x:null,X:null,y:Wf,Y:$f,Z:Qf,"%":Rl},Ae={a:function Ln(me,Je,pn){var ne=Ct.exec(Je.slice(pn));return ne?(me.w=kt.get(ne[0].toLowerCase()),pn+ne[0].length):-1},A:function kn(me,Je,pn){var ne=lt.exec(Je.slice(pn));return ne?(me.w=ot.get(ne[0].toLowerCase()),pn+ne[0].length):-1},b:function Wn(me,Je,pn){var ne=Gt.exec(Je.slice(pn));return ne?(me.m=Kt.get(ne[0].toLowerCase()),pn+ne[0].length):-1},B:function ti(me,Je,pn){var ne=Ft.exec(Je.slice(pn));return ne?(me.m=vt.get(ne[0].toLowerCase()),pn+ne[0].length):-1},c:function ei(me,Je,pn){return on(me,r,Je,pn)},d:Ll,e:Ll,f:pf,g:Dl,G:El,H:kl,I:kl,j:cf,L:df,m:lf,M:uf,p:function yn(me,Je,pn){var ne=G.exec(Je.slice(pn));return ne?(me.p=et.get(ne[0].toLowerCase()),pn+ne[0].length):-1},q:of,Q:mf,s:gf,S:hf,u:ef,U:nf,V:rf,w:tf,W:af,x:function ar(me,Je,pn){return on(me,e,Je,pn)},X:function ni(me,Je,pn){return on(me,i,Je,pn)},y:Dl,Y:El,Z:sf,"%":ff};function pe(me,Je){return function(pn){var Ni,He,Fn,ne=[],Pn=-1,Sn=0,Mi=me.length;for(pn instanceof Date||(pn=new Date(+pn));++Pn<Mi;)37===me.charCodeAt(Pn)&&(ne.push(me.slice(Sn,Pn)),null!=(He=Sl[Ni=me.charAt(++Pn)])?Ni=me.charAt(++Pn):He="e"===Ni?" ":"0",(Fn=Je[Ni])&&(Ni=Fn(pn,He)),ne.push(Ni),Sn=Pn+1);return ne.push(me.slice(Sn,Pn)),ne.join("")}}function nn(me,Je){return function(pn){var Sn,Mi,ne=da(1900,void 0,1);if(on(ne,me,pn+="",0)!=pn.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(1e3*ne.s+("L"in ne?ne.L:0));if(Je&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+12*ne.p),void 0===ne.m&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Mi=(Sn=Is(da(ne.y,0,1))).getUTCDay(),Sn=Mi>4||0===Mi?Za.ceil(Sn):Za(Sn),Sn=Es.offset(Sn,7*(ne.V-1)),ne.y=Sn.getUTCFullYear(),ne.m=Sn.getUTCMonth(),ne.d=Sn.getUTCDate()+(ne.w+6)%7):(Mi=(Sn=ks(da(ne.y,0,1))).getDay(),Sn=Mi>4||0===Mi?Ra.ceil(Sn):Ra(Sn),Sn=Pa.offset(Sn,7*(ne.V-1)),ne.y=Sn.getFullYear(),ne.m=Sn.getMonth(),ne.d=Sn.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Mi="Z"in ne?Is(da(ne.y,0,1)).getUTCDay():ks(da(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+7*ne.W-(Mi+5)%7:ne.w+7*ne.U-(Mi+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,Is(ne)):ks(ne)}}function on(me,Je,pn,ne){for(var Ni,He,Pn=0,Sn=Je.length,Mi=pn.length;Pn<Sn;){if(ne>=Mi)return-1;if(37===(Ni=Je.charCodeAt(Pn++))){if(Ni=Je.charAt(Pn++),!(He=Ae[Ni in Sl?Je.charAt(Pn++):Ni])||(ne=He(me,pn,ne))<0)return-1}else if(Ni!=pn.charCodeAt(ne++))return-1}return ne}return Xt.x=pe(e,Xt),Xt.X=pe(i,Xt),Xt.c=pe(r,Xt),ge.x=pe(e,ge),ge.X=pe(i,ge),ge.c=pe(r,ge),{format:function(me){var Je=pe(me+="",Xt);return Je.toString=function(){return me},Je},parse:function(me){var Je=nn(me+="",!1);return Je.toString=function(){return me},Je},utcFormat:function(me){var Je=pe(me+="",ge);return Je.toString=function(){return me},Je},utcParse:function(me){var Je=nn(me+="",!0);return Je.toString=function(){return me},Je}}})(n)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),_s(ul),_s(function em(n){return null===n?NaN:+n}),s(6738),s(84067),s(32517),s(38914),s(22910),s(65142),s(78986),s(16087);const wm=["caretElm"];function Am(n,r){}const Sm=function(n){return{model:n}};function Em(n,r){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Am,0,0,"ng-template",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(2,Sm,e.context))}}function Dm(n,r){if(1&n&&t._UZ(0,"span",6),2&n){const e=t.oxw();t.Q6J("innerHTML",e.title,t.oJD)}}function n_(n,r,e){e=e||{};let i,a,o,v=null,C=0;function N(){C=!1===e.leading?0:+new Date,v=null,o=n.apply(i,a)}return function(){const G=+new Date;!C&&!1===e.leading&&(C=G);const et=r-(G-C);return i=this,a=arguments,et<=0?(clearTimeout(v),v=null,C=G,o=n.apply(i,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,et)),o}}function i_(n,r){return function(i,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:n_(o.value,n,r)}),this[a]}}}}var rn=(()=>{return(n=rn||(rn={})).Top="top",n.Bottom="bottom",n.Left="left",n.Right="right",n.Center="center",rn;var n})();function Jl(n,r,e){return e===rn.Top?n.top-7:e===rn.Bottom?n.top+n.height-r.height+7:e===rn.Center?n.top+n.height/2-r.height/2:void 0}function Kl(n,r,e){return e===rn.Left?n.left-7:e===rn.Right?n.left+n.width-r.width+7:e===rn.Center?n.left+n.width/2-r.width/2:void 0}class Vi{static calculateVerticalAlignment(r,e,i){let a=Jl(r,e,i);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(r,e,i,a){let o;a===rn.Top&&(o=r.height/2-i.height/2+7),a===rn.Bottom&&(o=e.height-r.height/2-i.height/2-7),a===rn.Center&&(o=e.height/2-i.height/2);const v=Jl(r,e,a);return v+e.height>window.innerHeight&&(o+=v+e.height-window.innerHeight),o}static calculateHorizontalAlignment(r,e,i){let a=Kl(r,e,i);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(r,e,i,a){let o;a===rn.Left&&(o=r.width/2-i.width/2+7),a===rn.Right&&(o=e.width-r.width/2-i.width/2-7),a===rn.Center&&(o=e.width/2-i.width/2);const v=Kl(r,e,a);return v+e.width>window.innerWidth&&(o+=v+e.width-window.innerWidth),o}static shouldFlip(r,e,i,a){let o=!1;return i===rn.Right&&r.left+r.width+e.width+a>window.innerWidth&&(o=!0),i===rn.Left&&r.left-e.width-a<0&&(o=!0),i===rn.Top&&r.top-e.height-a<0&&(o=!0),i===rn.Bottom&&r.top+r.height+e.height+a>window.innerHeight&&(o=!0),o}static positionCaret(r,e,i,a,o){let v=0,C=0;return r===rn.Right?(C=-7,v=Vi.calculateVerticalCaret(i,e,a,o)):r===rn.Left?(C=e.width,v=Vi.calculateVerticalCaret(i,e,a,o)):r===rn.Top?(v=e.height,C=Vi.calculateHorizontalCaret(i,e,a,o)):r===rn.Bottom&&(v=-7,C=Vi.calculateHorizontalCaret(i,e,a,o)),{top:v,left:C}}static positionContent(r,e,i,a,o){let v=0,C=0;return r===rn.Right?(C=i.left+i.width+a,v=Vi.calculateVerticalAlignment(i,e,o)):r===rn.Left?(C=i.left-e.width-a,v=Vi.calculateVerticalAlignment(i,e,o)):r===rn.Top?(v=i.top-e.height-a,C=Vi.calculateHorizontalAlignment(i,e,o)):r===rn.Bottom&&(v=i.top+i.height+a,C=Vi.calculateHorizontalAlignment(i,e,o)),{top:v,left:C}}static determinePlacement(r,e,i,a){if(Vi.shouldFlip(i,e,r,a)){if(r===rn.Right)return rn.Left;if(r===rn.Left)return rn.Right;if(r===rn.Top)return rn.Bottom;if(r===rn.Bottom)return rn.Top}return r}}let r_=(()=>{class n{constructor(e,i,a){this.element=e,this.renderer=i,this.platformId=a}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,g.NF)(this.platformId))return;const e=this.element.nativeElement,i=this.host.nativeElement.getBoundingClientRect();if(!i.height&&!i.width)return;const a=e.getBoundingClientRect();this.checkFlip(i,a),this.positionContent(e,i,a),this.showCaret&&this.positionCaret(i,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,i,a){const{top:o,left:v}=Vi.positionContent(this.placement,a,i,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${o}px`),this.renderer.setStyle(e,"left",`${v}px`)}positionCaret(e,i){const a=this.caretElm.nativeElement,o=a.getBoundingClientRect(),{top:v,left:C}=Vi.positionCaret(this.placement,i,e,o,this.alignment);this.renderer.setStyle(a,"top",`${v}px`),this.renderer.setStyle(a,"left",`${C}px`)}checkFlip(e,i){this.placement=Vi.determinePlacement(this.placement,i,e,this.spacing)}onWindowResize(){this.position()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.Lbi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,i){if(1&e&&t.Gf(wm,5),2&e){let a;t.iGM(a=t.CRH())&&(i.caretElm=a.first)}},hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onWindowResize()},!1,t.Jf7),2&e&&t.Tol(i.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",0,1),t.TgZ(3,"div",2),t.YNc(4,Em,2,4,"span",3),t.YNc(5,Dm,1,1,"span",4),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Gre("tooltip-caret position-",i.placement,""),t.Q6J("hidden",!i.showCaret),t.xp6(3),t.Q6J("ngIf",!i.title),t.xp6(1),t.Q6J("ngIf",i.title))},directives:[g.O5,g.tP],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,Oe.gn)([i_(100)],n.prototype,"onWindowResize",null),n})(),ql=(()=>{class n{constructor(e,i,a){this.applicationRef=e,this.componentFactoryResolver=i,this.injector=a}static setGlobalRootViewContainer(e){n.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(n.globalRootViewContainer)return n.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function s_(n){return n.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,i){if(i){if(void 0!==i.inputs){const a=Object.getOwnPropertyNames(i.inputs);for(const o of a)e.instance[o]=i.inputs[o]}if(void 0!==i.outputs){const a=Object.getOwnPropertyNames(i.outputs);for(const o of a)e.instance[o]=i.outputs[o]}}return e}appendComponent(e,i={},a){a||(a=this.getRootViewContainer());const o=this.getComponentRootNode(a),v=new tl.u0(o,this.componentFactoryResolver,this.applicationRef,this.injector),C=new tl.C5(e),N=v.attach(C);return this.projectComponentBindings(N,i),N}}return n.globalRootViewContainer=null,n.\u0275fac=function(e){return new(e||n)(t.LFG(t.z2F),t.LFG(t._Vd),t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n extends class a_{constructor(r){this.injectionService=r,this.defaults={},this.components=new Map}getByType(r=this.type){return this.components.get(r)}create(r){return this.createByType(this.type,r)}createByType(r,e){e=this.assignDefaults(e);const i=this.injectComponent(r,e);return this.register(r,i),i}destroy(r){const e=this.components.get(r.componentType);if(e&&e.length){const i=e.indexOf(r);i>-1&&(e[i].destroy(),e.splice(i,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(r){const e=this.components.get(r);if(e&&e.length){let i=e.length-1;for(;i>=0;)this.destroy(e[i--])}}injectComponent(r,e){return this.injectionService.appendComponent(r,e)}assignDefaults(r){const e=Object.assign({},this.defaults.inputs),i=Object.assign({},this.defaults.outputs);return!r.inputs&&!r.outputs&&(r={inputs:r}),e&&(r.inputs=Object.assign(Object.assign({},e),r.inputs)),i&&(r.outputs=Object.assign(Object.assign({},i),r.outputs)),r}register(r,e){this.components.has(r)||this.components.set(r,[]),this.components.get(r).push(e)}}{constructor(e){super(e),this.type=r_}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ql))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),ac=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez]]}),n})();var Qr=(()=>{return(n=Qr||(Qr={})).popover="popover",n.tooltip="tooltip",Qr;var n})(),Tr=(()=>{return(n=Tr||(Tr={}))[n.all="all"]="all",n[n.focus="focus"]="focus",n[n.mouseover="mouseover"]="mouseover",Tr;var n})();let Rs,Ps=(()=>{class n{constructor(e,i,a){this.tooltipService=e,this.viewContainerRef=i,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=rn.Top,this.tooltipAlignment=rn.Center,this.tooltipType=Qr.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Tr.all,this.tooltipImmediateExit=!1,this.show=new t.vpe,this.hide=new t.vpe}get listensForFocus(){return this.tooltipShowEvent===Tr.all||this.tooltipShowEvent===Tr.focus}get listensForHover(){return this.tooltipShowEvent===Tr.all||this.tooltipShowEvent===Tr.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const i=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?300:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},i)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",i=>{e.contains(i.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const i=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?i():this.timeout=setTimeout(i,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ms),t.Y36(t.s_b),t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,i){1&e&&t.NdJ("focusin",function(){return i.onFocus()})("blur",function(){return i.onBlur()})("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(o){return i.onMouseLeave(o.target)})("click",function(){return i.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),n})(),sc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ql,Ms],imports:[[g.ez]]}),n})();"undefined"!=typeof window?Rs=window:"undefined"!=typeof global&&(Rs=global);let $i=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,ac,sc],g.ez,ac,sc]}),n})(),v_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),fc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),x_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),y_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),b_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),mc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})();Math;let Bs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),w_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i,Bs,mc]]}),n})(),S_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),E_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),D_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i,Bs,fc]]}),n})(),k_=(()=>{class n{constructor(){!function L_(){"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[$i,v_,fc,x_,y_,b_,mc,w_,S_,Bs,E_,D_]}),n})();function I_(n,r){1&n&&(t.TgZ(0,"div"),t._UZ(1,"mat-spinner",3),t.qZA())}function O_(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function M_(n,r){1&n&&(t.O4$(),t.TgZ(0,"marker",10),t._UZ(1,"path",11),t.qZA())}function N_(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",12),t._UZ(1,"rect"),t.TgZ(2,"text",13),t._uU(3),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.Q6J("tooltipTitle",e.tooltip)("tooltipPlacement","top")("tooltipType","tooltip"),t.xp6(1),t.uIk("fill",e.color)("height",e.dimension.height)("width",e.dimension.width),t.xp6(1),t.uIk("y",e.dimension.height/2)("x",10),t.xp6(1),t.hij(" ",e.label," ")}}function P_(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16),t.TgZ(3,"textPath",17),t._uU(4),t.qZA(),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.xp6(3),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.label," ")}}const F_=function(n,r){return[n,r]};function R_(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.YNc(9,O_,5,4,"span",4),t.TgZ(10,"div",5),t.TgZ(11,"ngx-graph",6),t.YNc(12,M_,2,0,"ng-template",null,7,t.W1O),t.YNc(14,N_,4,9,"ng-template",null,8,t.W1O),t.YNc(16,P_,5,2,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,12,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(6,14,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(2),t.Q6J("links",e.hierarchialGraph.links)("nodes",e.hierarchialGraph.nodes)("view",t.WLB(16,F_,e.innerWidth,e.innerHeight))("curve",e.curve)("draggingEnabled",!1)("zoomToFit$",e.zoomToFit$)}}function Z_(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function B_(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.YNc(8,Z_,5,4,"span",4),t._uU(9),t.ALo(10,"translate")),2&n){const e=t.oxw(2);t.hij(" ",t.lcZ(1,7,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(5,9,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(1),t.hij(" ",t.lcZ(10,11,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_4")," ")}}function U_(n,r){if(1&n&&(t.YNc(0,R_,18,19,"div",1),t.YNc(1,B_,11,13,"ng-template",null,2,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.isConnected)("ngIfElse",e)}}let G_=(()=>{class n{constructor(e,i,a,o,v,C,N,G,et){this.route=e,this.facilityManager=i,this.userService=a,this.membersService=o,this.serviceService=v,this.resourceManager=C,this.groupService=N,this.voService=G,this.translate=et,this.isConnected=!1,this.loading=!0,this.hierarchialGraph={nodes:[],links:[]},this.curve=sn,this.zoomToFit$=new we.x,this.idCounter=0}static findConnectedGroups(e,i){const a=[];for(const o of e)for(const v of i)o.id===v.id&&a.push(o);return a}static findConnectedResources(e,i){const a=[];for(const o of e)for(const v of i)o.id===v.id&&a.push(o);return a}onResize(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight}ngOnInit(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight,this.getLocalizedNames(),this.route.queryParams.subscribe(e=>{this.destination=String(e.destination),this.service=String(e.service),this.userService.getUserById(Number(e.user)).subscribe(i=>{this.user=i,this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(a=>{this.facilities=a,this.membersService.getMembersByUser(this.user.id).subscribe(o=>{if(this.membership=o,0===this.membership.length||0===this.facilities.length)return this.loading=!1,void(this.isConnected=!1);this.showGraph()})})})})}showGraph(){var e,i;const a=""+this.id().toString(),o=null!==(i=null!==(e=this.user.firstName)&&void 0!==e?e:" "+this.user.lastName)&&void 0!==i?i:"",v=this.localUser,C="user: "+this.user.id.toString();this.hierarchialGraph.nodes.push({id:a,label:o,tooltip:v,color:"#FFFFCC",tip:C});const G=""+this.id().toString(),et="destination no id";this.hierarchialGraph.nodes.push("noService"===this.service?{id:G,label:this.destination,tooltip:this.localDestination+": "+this.destination,color:"#E0E0E0",tip:et}:{id:G,label:this.service+": "+this.destination,tooltip:this.localService+": "+this.service+", "+this.localDestination+": "+this.destination,color:"#E0E0E0",tip:et});for(const lt of this.facilities)this.serviceService.getAllRichDestinationsForFacility(lt.id).subscribe(ot=>{this.connectToService(lt,ot),setTimeout(()=>{this.zoomToFit$.next(!0),this.loading=!1},2e3)})}connectToService(e,i){this.isConnectedToService(i)&&this.facilityManager.getAssignedResourcesForFacility(e.id).subscribe(a=>{for(const o of this.membership)this.connectToGroups(e,o,a)})}connectToGroups(e,i,a){this.facilityManager.getAllowedGroups(e.id,i.voId).subscribe(o=>{0!==o.length&&this.groupService.getMemberGroups(i.id).subscribe(v=>{const C=n.findConnectedGroups(o,v);if(0!==C.length)for(const N of C)this.connectToResource(e,N,a)})})}haveService(e){if("noService"===this.service)return!0;for(const i of e)if(this.service===i.name)return!0;return!1}connectToResource(e,i,a){this.resourceManager.getAssignedResourcesWithGroup(i.id).subscribe(o=>{const v=n.findConnectedResources(o,a);for(const C of v)this.resourceManager.getAssignedServicesToResource(C.id).subscribe(N=>{this.haveService(N)&&(this.isConnected=!0,this.addNodesToGraph(i.voId,i,C,e))})})}addNodesToGraph(e,i,a,o){if(-1===this.findEntityInGraph("Facility: "+o.id.toString())){const v=""+this.id().toString(),C=this.localFacility+": "+o.name,N=o.description,G="Facility: "+o.id.toString();this.hierarchialGraph.nodes.push({id:v,label:C,tooltip:N,color:"#FFCCFF",tip:G});const lt={source:v,target:this.hierarchialGraph.nodes[this.findEntityInGraph("destination no id")].id};this.hierarchialGraph.links.push(lt)}this.voService.getVoById(e).subscribe(v=>{if(-1===this.findEntityInGraph("Vo: "+v.id.toString())){const N=this.id().toString(),G=this.localVo+": "+v.shortName,et=v.name,lt="Vo: "+v.id.toString();this.hierarchialGraph.nodes.push({id:N,label:G,tooltip:et,color:"#E5FFCC",tip:lt});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("user: "+this.user.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct)}if(-1===this.findEntityInGraph("Group: "+i.id.toString())){const N=this.id().toString(),G=this.localGroup+": "+i.name,et=i.description,lt="Group: "+i.id.toString();this.hierarchialGraph.nodes.push({id:N,label:G,tooltip:et,color:"#CCE5FF",tip:lt});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Vo: "+v.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct)}const C=this.findEntityInGraph("Resource: "+a.id.toString());if(-1!==C){const N={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id.toString())].id,target:this.hierarchialGraph.nodes[C].id};this.hierarchialGraph.links.push(N)}else{const N=this.id().toString(),G=this.localResource+": "+a.name,et=a.description,lt="Resource: "+a.id.toString();this.hierarchialGraph.nodes.push({id:N,label:G,tooltip:et,color:"#FFCCCC",tip:lt});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct);const kt={source:N,target:this.hierarchialGraph.nodes[this.findEntityInGraph("Facility: "+o.id.toString())].id};this.hierarchialGraph.links.push(kt)}})}findEntityInGraph(e){for(let i=0;i<this.hierarchialGraph.nodes.length;i++)if(this.hierarchialGraph.nodes[i].tip===e)return i;return-1}isConnectedToService(e){for(const i of e)if(i.destination===this.destination&&(i.service.name===this.service||"noService"===this.service))return!0;return!1}id(){return this.idCounter++,this.idCounter}getLocalizedNames(){this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.USER").subscribe(e=>{this.localUser=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.VO").subscribe(e=>{this.localVo=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.GROUP").subscribe(e=>{this.localGroup=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.RESOURCE").subscribe(e=>{this.localResource=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.FACILITY").subscribe(e=>{this.localFacility=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SERVICE").subscribe(e=>{this.localService=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION").subscribe(e=>{this.localDestination=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(Y.IQ),t.Y36(Y.Fv),t.Y36(Y.uq),t.Y36(Y.KK),t.Y36(Y.xk),t.Y36(Y.ff),t.Y36(Y.YF),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-graph"]],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(o){return i.onResize(o)},!1,t.Jf7),2&e&&t.ekj("router-component",i.true)},decls:6,vars:5,consts:[[1,"page-subtitle"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"ml-auto","mr-auto"],[4,"ngIf"],[1,"card","w-100","h-100"],[1,"chart-container",3,"links","nodes","view","curve","draggingEnabled","zoomToFit$"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","markerHeight","4","refX","8","refY","0","markerWidth","4","orient","auto","viewBox","0 -5 10 10"],["d","M0,-5L10,0L0,5",1,"arrow-head"],["ngx-tooltip","",1,"node",3,"tooltipTitle","tooltipPlacement","tooltipType"],["alignment-baseline","central"],[1,"edge"],["marker-end","url(#arrow)","stroke-width","2",1,"line"],["text-anchor","end",1,"edge-label"],["startOffset","60%",2,"fill","#000"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,I_,2,0,"div",1),t.YNc(4,U_,3,2,"ng-template",null,2,t.W1O)),2&e){const a=t.MAs(5);t.xp6(1),t.hij(" ",t.lcZ(2,3,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE"),"\n"),t.xp6(2),t.Q6J("ngIf",i.loading)("ngIfElse",a)}},directives:[g.O5,U.Ou,bp,Ps],pipes:[u.X$],styles:[""]}),n})();var V_=s(25828),gc=s(69024),z_=s(29862),ma=s(16074),H_=s(31359);function Y_(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function W_(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editUser()}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).anonymizeUser()}),t.TgZ(5,"mat-icon"),t._uU(6,"no_accounts"),t.qZA(),t.qZA(),t.qZA()}}const X_=function(){return{color:"black"}},$_=function(n){return["/admin/users",n]};function j_(n,r){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6),t.TgZ(4,"div",7),t.TgZ(5,"a",8),t._uU(6),t.ALo(7,"userFullName"),t.qZA(),t.TgZ(8,"span",9),t._uU(9),t.qZA(),t.YNc(10,W_,7,0,"span",10),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",11),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,12,"ADMIN_USER.ENTITY")),t.Q6J("ngStyle",t.DdM(22,X_))("svgIcon",e.svgIcon),t.xp6(4),t.Q6J("routerLink",t.VKq(23,$_,e.user.id)),t.xp6(1),t.hij(" ",t.lcZ(7,14,e.user)," "),t.xp6(3),t.hij(" \xa0#",e.user.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE("",t.lcZ(13,16,"ADMIN_USER.UUID"),": ",e.user.uuid,""),t.xp6(3),t.lnq(" ",t.lcZ(16,18,"ADMIN_USER.ENTITY"),", ",t.lcZ(17,20,"ADMIN_USER.USER_TYPE"),": ",e.getUserType()," ")}}let Q_=(()=>{class n{constructor(e,i,a,o,v,C,N,G){this.route=e,this.usersService=i,this.sideMenuService=a,this.sideMenuItemService=o,this.dialog=v,this.authResolver=C,this.entityStorageService=N,this.router=G,this.loading=!1,this.svgIcon="perun-user-dark"}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{const i=Number(e.userId);this.entityStorageService.setEntity({id:Number(i),beanName:"User"}),this.path=`/admin/users/${i}`,this.regex="/admin/users/\\d+",this.usersService.getUserById(i).subscribe(a=>{this.user=a,this.user.serviceUser&&(this.svgIcon="perun-service-identity");const o=this.sideMenuItemService.parseUser(a,this.path,this.regex);this.sideMenuService.setAdminItems([o]),this.loading=!1},()=>this.loading=!1)})}editUser(){const e=(0,Ee.kZ)();e.width="450px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(z_.x,e).afterClosed().subscribe(a=>{a&&this.usersService.getUserById(this.user.id).subscribe(o=>{this.user=o})})}getUserType(){return this.user.serviceUser?"Service":"Person"}anonymizeUser(){const e=(0,Ee.kZ)();e.width="550px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(ma.GI,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin","users"],{queryParamsHandling:"merge"})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(Y.Fv),t.Y36(d.D),t.Y36(gc.V),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-user-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],[1,"perun-icon","perun-icon-detail",3,"ngStyle","svgIcon","matTooltip"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge","data-cy","user-name-link",1,"user-link",3,"routerLink"],[1,"text-muted"],[4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","","data-cy","edit-user-button",3,"click"],["mat-icon-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Y_,1,0,"mat-spinner",1),t.YNc(3,j_,18,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading&&void 0!==i.user))},directives:[l.W,g.O5,U.Ou,h.Hw,g.PC,qe.gM,p.yS,q.lW,f.A],pipes:[u.X$,H_.d],styles:[""]}),n})();var J_=s(17755),K_=s(74837),q_=s(85985),tv=s(98973),ev=s(15935);function nv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onLoad()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.EXT_SOURCES.LOAD")," "))}function iv(n,r){1&n&&t._UZ(0,"mat-spinner",6)}const rv=function(){return["id","name","type"]};function av(n,r){if(1&n&&t._UZ(0,"app-ext-sources-list",7),2&n){const e=t.oxw();t.Q6J("extSources",e.extSources)("filterValue",e.filterValue)("displayedColumns",t.DdM(4,rv))("tableId",e.tableId)}}let sv=(()=>{class n{constructor(e,i,a,o){this.extSourceService=e,this.notificator=i,this.translate=a,this.authResolver=o,this.extSources=[],this.filterValue="",this.loading=!1,this.tableId=tn.qy,this.translate.get("ADMIN.EXT_SOURCES.LOAD_SUCCESS").subscribe(v=>this.loadSuccess=v)}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}onLoad(){this.extSourceService.loadExtSourcesDefinitions().subscribe(()=>{this.notificator.showSuccess(this.loadSuccess),this.refreshTable()})}refreshTable(){this.loading=!0,this.extSourceService.getExtSources().subscribe(e=>{this.extSources=e,this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.KG),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-ext-sources"]],decls:8,vars:7,consts:[[1,"page-subtitle"],["class","mr-2","mat-stroked-button","",3,"click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"extSources","filterValue","displayedColumns","tableId",4,"ngIf"],["mat-stroked-button","",1,"mr-2",3,"click"],[1,"ml-auto","mr-auto"],[3,"extSources","filterValue","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,nv,3,3,"button",1),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(6,iv,1,0,"mat-spinner",3),t.YNc(7,av,1,5,"app-ext-sources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,5,"ADMIN.EXT_SOURCES.TITLE")),t.xp6(2),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.EXT_SOURCES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[g.O5,q.lW,ln.L,U.Ou,ev.D],pipes:[u.X$],styles:[""]}),n})();var ov=s(6097),lv=s(97453),Ga=s(54004);function cv(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function uv(n,r){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function hv(n,r){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"mat-form-field",8),t._UZ(2,"input",9),t.ALo(3,"translate"),t.TgZ(4,"mat-error"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"mat-form-field",8),t._UZ(8,"input",10),t.ALo(9,"translate"),t.TgZ(10,"mat-error"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-autocomplete",11,12),t.YNc(15,uv,2,2,"mat-option",13),t.ALo(16,"async"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.MAs(14),i=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(3,9,"DIALOGS.ADD_USER_EXT_SOURCE.LOGIN")),t.Q6J("formControl",i.loginControl),t.xp6(3),t.hij(" ",t.lcZ(6,11,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_LOGIN")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,13,"DIALOGS.ADD_USER_EXT_SOURCE.EXT_SOURCE")),t.Q6J("formControl",i.extSourcesControl)("matAutocomplete",e),t.xp6(3),t.hij(" ",t.lcZ(12,15,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_EXT_SOURCE")," "),t.xp6(2),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(16,17,i.filteredExtSources))}}let dv=(()=>{class n{constructor(e,i,a,o,v,C){this.dialogRef=e,this.data=i,this.extSourcesManagerService=a,this.usersManagerService=o,this.translate=v,this.notificator=C,this.extSources=[],v.get("DIALOGS.ADD_USER_EXT_SOURCE.SUCCESS").subscribe(N=>this.successMessage=N)}ngOnInit(){this.loading=!0,this.loginControl=new nt.NI("",[nt.kI.required,nt.kI.pattern(".*[\\S]+.*")]),this.extSourcesControl=new nt.NI("",[nt.kI.required]),this.loginControl.markAllAsTouched(),this.extSourcesControl.markAllAsTouched(),this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,Dn.O)(""),(0,Ga.U)(e=>this._filter(e))),this.extSourcesManagerService.getExtSources().subscribe(e=>{this.extSources=e,this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,Dn.O)(""),(0,Ga.U)(i=>this._filter(i))),this.loading=!1},()=>this.loading=!1)}displayFn(e){return e?e.name:null}onCancel(){this.dialogRef.close(!1)}onAdd(){this.loading=!0,this.usersManagerService.addUserExtSource({user:this.data.userId,userExtSource:{beanName:"",extSource:this.extSourcesControl.value,id:0,login:this.loginControl.value,userId:this.data.userId}}).subscribe(()=>{this.loading=!1,this.notificator.showSuccess(this.successMessage),this.dialogRef.close(!0)},()=>this.loading=!1)}_filter(e){const i="string"==typeof e?e.toLowerCase():e.name.toLowerCase();return this.extSources.filter(a=>a.name.toLowerCase().includes(i))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Y.KG),t.Y36(Y.Fv),t.Y36(u.sK),t.Y36(Z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-user-ext-source-dialog"]],decls:13,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container","user-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[1,"center-self","w-100"],["matInput","","required","",3,"formControl","placeholder"],["matInput","","required","","type","text",3,"formControl","matAutocomplete","placeholder"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,cv,1,0,"mat-spinner",2),t.YNc(5,hv,17,19,"div",3),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onAdd()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"DIALOGS.ADD_USER_EXT_SOURCE.TITLE")),t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.ADD_USER_EXT_SOURCE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loginControl.invalid||i.extSourcesControl.invalid||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.ADD_USER_EXT_SOURCE.ADD")," "))},directives:[M.uh,M.xY,g.O5,U.Ou,Bt.KE,re.Nt,nt.Fj,nt.Q7,nt.JJ,nt.oH,Bt.TO,Qn.ZL,Qn.XC,g.sg,_e.ey,M.H8,q.lW],pipes:[u.X$,g.Ov],styles:[".column-size[_ngcontent-%COMP%]{width:10rem!important;font-weight:700}.center-self[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.auto-width[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}.auto-width[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{max-width:100%;width:auto}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),n})();var pv=s(80275);function fv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().addIdentity()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.IDENTITIES.ADD"),"\n"))}function mv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeIdentity()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.IDENTITIES.REMOVE"),"\n")}}function gv(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function _v(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-user-ext-sources-list",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("selection",e.selection)("tableId",e.tableId)("userExtSources",e.userExtSources)}}let vv=(()=>{class n{constructor(e,i,a,o,v,C){this.usersManagerService=e,this.storage=i,this.registrarManagerService=a,this.dialog=o,this.route=v,this.authResolver=C,this.userExtSources=[],this.selection=new R.Ov(!1,[]),this.displayedColumns=["select","id","extSourceName","login","lastAccess"],this.tableId=tn.gG,this.filterValue=""}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId)}),this.refreshTable()}refreshTable(){this.loading=!0,this.selection.clear(),this.usersManagerService.getRichUserExtSources(this.userId).subscribe(e=>{this.userExtSources=e,this.loading=!1},()=>this.loading=!1)}addIdentity(){const e=(0,Ee.kZ)();e.width="1000px",e.data={userId:this.userId},this.dialog.open(dv,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeIdentity(){const e=(0,Ee.kZ)();e.width="450px",e.data={showSuccess:!0,theme:"user-theme",userId:this.userId,extSources:this.selection.selected},this.dialog.open(ma.Lc,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.Fv),t.Y36(Z.d6),t.Y36(Y.tk),t.Y36(M.uw),t.Y36(p.gz),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-identities"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],[1,"admin-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","selection","tableId","userExtSources"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(4,fv,3,3,"button",2),t.YNc(5,mv,3,4,"button",3),t.TgZ(6,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,gv,1,0,"mat-spinner",6),t.qZA(),t.YNc(9,_v,2,5,"div",7)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"USER_DETAIL.IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","USER_DETAIL.IDENTITIES.FILTER_PLACEHOLDER"),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,g.O5,q.lW,ln.L,U.Ou,pv.j],pipes:[u.X$],styles:[""]}),n})();var xv=s(80774),yv=s(62109);function bv(n,r){1&n&&t._UZ(0,"mat-spinner",5)}const Tv=function(){return["id","name","vo","facility","description"]};function Cv(n,r){if(1&n&&t._UZ(0,"perun-web-apps-resources-list",6),2&n){const e=t.oxw();t.Q6J("displayedColumns",t.DdM(4,Tv))("resources",e.resources)("filterValue",e.filterValue)("tableId",e.tableId)}}let wv=(()=>{class n{constructor(e,i){this.userManager=e,this.route=i,this.resources=[],this.tableId=tn.kO,this.filterValue=""}ngOnInit(){this.refreshTable()}refreshTable(){this.loading=!0,this.route.parent.params.subscribe(e=>{const i=Number(e.userId);this.userManager.getAssignedRichResourcesForUser(i).subscribe(a=>{this.resources=a,this.loading=!1})})}resourceFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.Fv),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-resources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","resources","filterValue","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","resources","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.resourceFilter(o)}),t.qZA(),t.YNc(6,bv,1,0,"mat-spinner",3),t.YNc(7,Cv,1,5,"perun-web-apps-resources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.RESOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.RESOURCES_LIST.TABLE_SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,ln.L,g.O5,U.Ou,yv.C],pipes:[u.X$],styles:[""]}),n})();var Av=s(61365),Sv=s(71103),Ev=s(53984);const Dv=["list"];function Lv(n,r){1&n&&t._UZ(0,"mat-spinner",8)}function kv(n,r){if(1&n&&t._UZ(0,"perun-web-apps-attributes-list",9,10),2&n){const e=t.oxw();t.Q6J("selection",e.selection)("attributes",e.attributes)("tableId",e.tableId)}}let Iv=(()=>{class n{constructor(e,i,a,o){this.dialog=e,this.attributesManager=i,this.userService=a,this.route=o,this.loading=!1,this.selection=new R.Ov(!0,[]),this.tableId=tn.rF,this.attributes=[]}ngOnInit(){this.route.params.subscribe(e=>{const i=Number(e.identityId);this.userService.getUserExtSourceById(i).subscribe(a=>{this.userExtSource=a,this.refreshTable()})})}refreshTable(){this.loading=!0,this.attributesManager.getUserExtSourceAttributes(this.userExtSource.id).subscribe(e=>{this.attributes=(0,Ee.MX)(e),this.selection.clear(),this.loading=!1})}onAdd(){const e=(0,Ee.kZ)();e.width="1050px",e.data={entityId:this.userExtSource.id,entity:"ues",notEmptyAttributes:this.attributes,style:"user-theme"},this.dialog.open(Sv.n,e).afterClosed().subscribe(a=>{"saved"===a&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const e=(0,Ee.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(ma.wA,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,Ee.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(Av.k,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Y.H8),t.Y36(Y.Fv),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-identity-detail"]],viewQuery:function(e,i){if(1&e&&t.Gf(Dv,5),2&e){let a;t.iGM(a=t.CRH())&&(i.list=a.first)}},decls:26,vars:32,consts:[[1,"page-subtitle"],[1,"mb-2"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","attributes","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"selection","attributes","tableId"],["list",""]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(15,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,Lv,1,0,"mat-spinner",6),t.YNc(25,kv,2,3,"perun-web-apps-attributes-list",7),t.qZA()),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,15,"SHARED.IDENTITY_DETAIL.TITLE")," - ",i.userExtSource?i.userExtSource.extSource.name:""," "),t.xp6(3),t.AsE(" ",t.lcZ(6,17,"SHARED.IDENTITY_DETAIL.TYPE"),": ",i.userExtSource?i.userExtSource.extSource.type:""," "),t.xp6(3),t.AsE(" ",t.lcZ(9,19,"SHARED.IDENTITY_DETAIL.LOGIN"),": ",i.userExtSource?i.userExtSource.login:""," "),t.xp6(3),t.AsE(" ",t.lcZ(12,21,"SHARED.IDENTITY_DETAIL.LAST_ACCESS"),": ",i.userExtSource?t.xi3(13,23,i.userExtSource.lastAccess,"d.M.y H:mm:ss"):""," "),t.xp6(4),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(17,26,"SHARED.IDENTITY_DETAIL.SAVE")," "),t.xp6(3),t.hij(" ",t.lcZ(20,28,"SHARED.IDENTITY_DETAIL.ADD")," "),t.xp6(2),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(23,30,"SHARED.IDENTITY_DETAIL.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,q.lW,g.O5,U.Ou,Ev.p],pipes:[u.X$,g.uU],styles:[""]}),n})();var Ov=s(40009),Mv=s(90719);function Nv(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function Pv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editService()}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}function Fv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).removeService()}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA(),t.qZA()}}function Rv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).evaluateConsents()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.EVALUATE_CONSENTS")," "))}const Zv=function(){return{color:"black"}},Bv=function(n){return["/admin/services",n]};function Uv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6),t.TgZ(4,"div",7),t.TgZ(5,"div",8),t.TgZ(6,"div",9),t.TgZ(7,"a",10),t._uU(8),t.qZA(),t.TgZ(9,"span",11),t._uU(10),t.qZA(),t.YNc(11,Pv,3,0,"button",12),t.YNc(12,Fv,3,0,"button",13),t.qZA(),t.TgZ(13,"span",14),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",15),t.TgZ(17,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){return t.CHM(e),t.oxw().changeServiceStatus()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){return t.CHM(e),t.oxw().propagationChange()}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.YNc(23,Rv,3,3,"button",17),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,14,"SERVICE_DETAIL.ENTITY")),t.Q6J("ngStyle",t.DdM(22,Zv)),t.xp6(6),t.Q6J("routerLink",t.VKq(23,Bv,e.service.id)),t.xp6(1),t.hij(" ",e.service.name," "),t.xp6(2),t.hij(" \xa0 #",e.service.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE(" ",t.lcZ(15,16,"SERVICE_DETAIL.DESCRIPTION"),": ",e.service.description," "),t.xp6(3),t.Q6J("checked",e.service.enabled),t.xp6(1),t.hij(" ",t.lcZ(19,18,"SERVICE_DETAIL.ENABLE")," "),t.xp6(2),t.Q6J("checked",e.service.useExpiredMembers),t.xp6(1),t.hij(" ",t.lcZ(22,20,"SERVICE_DETAIL.PROPAGATE")," "),t.xp6(2),t.Q6J("ngIf",e.authResolver.isPerunAdmin())}}let Gv=(()=>{class n{constructor(e,i,a,o,v,C,N,G,et,lt,ot){this.route=e,this.router=i,this.consentsManager=a,this.serviceManager=o,this.sideMenuService=v,this.sideMenuItemService=C,this.dialog=N,this.authResolver=G,this.translate=et,this.notificator=lt,this.entityStorageService=ot,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{this.serviceId=Number(e.serviceId),this.refresh()})}editService(){const e=(0,Ee.kZ)();e.width="600px",e.data={theme:"service-theme",service:this.service},this.dialog.open(Ov.R,e).afterClosed().subscribe(a=>{a&&this.refresh()})}removeService(){const e=(0,Ee.kZ)();e.width="600px",e.data={theme:"service-theme",services:[this.service]},this.dialog.open(Mv.m,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin/services"])})}changeServiceStatus(){this.service.enabled=!this.service.enabled,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.STATUS_CHANGE_SUCCESS"))},()=>this.service.enabled=!this.service.enabled)}propagationChange(){this.service.useExpiredMembers=!this.service.useExpiredMembers,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.PROPAGATION_CHANGE_SUCCESS"))},()=>this.service.useExpiredMembers=!this.service.useExpiredMembers)}evaluateConsents(){const e=(0,Ee.kZ)();e.width="500px",e.data={title:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_TITLE"),theme:"service-theme",description:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_DESCRIPTION"),items:[this.service.name],type:"confirmation",showAsk:!1},this.dialog.open(ma.Ts,e).afterClosed().subscribe(a=>{a&&this.consentsManager.evaluateConsentsForService(this.service.id).subscribe(()=>this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.EVALUATION_FINISH")))})}refresh(){this.serviceManager.getServiceById(this.serviceId).subscribe(e=>{this.service=e,this.entityStorageService.setEntity({id:e.id,beanName:e.beanName});const i=this.sideMenuItemService.parseService(this.service);this.sideMenuService.setAdminItems([i]),this.loading=!1},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(Y.WY),t.Y36(Y.KK),t.Y36(d.D),t.Y36(gc.V),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(u.sK),t.Y36(Z.V6),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","service-theme"],["class","ml-auto mr-auto",4,"ngIf"],["class","page-title-headtitle detail-layout",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"page-title-headtitle","detail-layout"],["svgIcon","perun-service",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"wrap-container"],[1,"detail-info"],[1,"flex-column"],[1,"page-title-headline","d-flex","align-items-center"],["data-cy","service-name-link","queryParamsHandling","merge",1,"service-link",3,"routerLink"],[1,"text-muted"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click",4,"ngIf"],["aria-label","Remove service","mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"detail-actions"],["labelPosition","before",3,"checked","toggleChange"],["class","action-button evaluate-button","mat-stroked-button","",3,"click",4,"ngIf"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click"],["aria-label","Remove service","mat-icon-button","",3,"click"],["mat-stroked-button","",1,"action-button","evaluate-button",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Nv,1,0,"mat-spinner",1),t.YNc(3,Uv,24,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[l.W,g.O5,U.Ou,h.Hw,qe.gM,g.PC,p.yS,q.lW,ke.Rr,f.A],pipes:[u.X$],styles:[".detail-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1.2em}.detail-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-right:1.2em}.wrap-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.3em}.detail-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid rgba(0,0,0,.2);padding-left:.5em}.evaluate-button[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}"],data:{animation:[gi.Ji]}}),n})(),Vv=(()=>{class n{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-attributes",url:"required-attributes",label:"MENU_ITEMS.SERVICE.REQUIRED_ATTRIBUTES",style:"service-btn"},{cssIcon:"perun-service_destination",url:"destinations",label:"MENU_ITEMS.SERVICE.DESTINATIONS",style:"service-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&t._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&t.Q6J("items",i.navItems)("size","small")},directives:[L.L],styles:[""]}),n})();var zv=s(32076),Hv=s(24351),_c=s(54482),Yv=s(25032),Xv=s(86099),$v=s(57359);function Qv(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function Jv(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.Q6J("alert_type","warn"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ACTIVE_WARN")))}function Kv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,Jv,3,4,"perun-web-apps-alert",6),t.ALo(2,"async"),t.TgZ(3,"perun-web-apps-immediate-filter",7),t.NdJ("filter",function(a){return t.CHM(e),t.oxw().applyFilter(a)}),t.qZA(),t._UZ(4,"app-attr-def-list",8),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,8,e.serviceEnabled$)),t.xp6(2),t.Q6J("placeholder","DIALOGS.ADD_REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("selection",e.selection)("definitions",e.attrDefinitions)("disableRouting",!0)("filterValue",e.filterValue)("serviceEnabled",t.lcZ(5,10,e.serviceEnabled$))("consentRequired",t.lcZ(6,12,e.consentRequired$))}}function qv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ADD")," ")}}let t0=(()=>{class n{constructor(e,i,a,o,v,C,N,G){this.dialogRef=e,this.data=i,this.serviceManager=a,this.attributesManager=o,this.facilitiesService=v,this.consentHubService=C,this.notificator=N,this.translate=G,this.consentRequired$=this.facilitiesService.getAssignedFacilitiesByService(this.data.serviceId).pipe((0,Hv.b)(zv.D),(0,Ga.U)(et=>et.id),function Wv(n,r){return(0,_c.e)((e,i)=>{const a=new Set;e.subscribe((0,jt.x)(i,o=>{const v=n?n(o):o;a.has(v)||(a.add(v),i.next(o))})),null==r||r.subscribe((0,jt.x)(i,()=>a.clear(),Yv.Z))})}(),(0,Xv.z)(et=>this.consentHubService.getConsentHubByFacility(et)),function jv(n,r){return(0,_c.e)((0,$v.U)(n,r,arguments.length>=2,!1,!0))}((et,lt)=>et||lt.enforceConsents,!1),(0,Dn.O)(!0)),this.serviceEnabled$=this.serviceManager.getServiceById(this.data.serviceId).pipe((0,Ga.U)(et=>et.enabled),(0,Dn.O)(!0)),this.attrDefinitions=[],this.selection=new R.Ov(!0,[]),this.filterValue="",this.loading=!1}ngOnInit(){this.loading=!0,this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}onAdd(){this.loading=!0;const e=this.selection.selected.map(i=>i.id);this.serviceManager.addRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.ADD_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Y.KK),t.Y36(Y.H8),t.Y36(Y.IQ),t.Y36(Y.WY),t.Y36(Z.V6),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-required-attributes"]],decls:7,vars:9,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],[3,"alert_type",4,"ngIf"],[3,"placeholder","filter"],[3,"selection","definitions","disableRouting","filterValue","serviceEnabled","consentRequired"],[3,"alert_type"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Qv,1,0,"mat-spinner",1),t.YNc(5,Kv,7,14,"div",2),t.YNc(6,qv,7,7,"div",3),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,7,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[M.uh,g.O5,U.Ou,M.xY,rt.w,ln.L,Li,M.H8,q.lW],pipes:[u.X$,g.Ov],styles:[""]}),n})();function e0(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function n0(n,r){1&n&&t._UZ(0,"th",15)}function r0(n,r){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function a0(n,r){1&n&&t._UZ(0,"tr",17)}function s0(n,r){1&n&&t._UZ(0,"tr",18)}function o0(n,r){if(1&n&&(t.TgZ(0,"div",7),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,n0,1,0,"th",11),t.YNc(10,r0,2,1,"td",12),t.BQk(),t.YNc(11,a0,1,0,"tr",13),t.YNc(12,s0,1,0,"tr",14),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.DESCRIPTION")),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let l0=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.serviceManager=a,this.notificator=o,this.translate=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.dataSource=new F.by(this.data.attrDefinitions)}onConfirm(){this.loading=!0;const e=this.dataSource.data.map(i=>i.id);this.serviceManager.removeRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Y.KK),t.Y36(Z.V6),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-remove-required-attributes"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div"),t.YNc(4,e0,1,0,"mat-spinner",1),t.YNc(5,o0,13,9,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onConfirm()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,9,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Tol(i.theme),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.REMOVE")," "))},directives:[M.uh,g.O5,U.Ou,M.xY,F.BZ,F.w1,F.fO,F.ge,F.Dz,F.ev,F.as,F.XQ,F.nj,F.Gk,M.H8,q.lW],pipes:[u.X$],styles:[""]}),n})();function c0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.ADD")," "))}function u0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onRemove()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.REMOVE")," ")}}function h0(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function d0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",10),t.NdJ("refreshEvent",function(){return t.CHM(e),t.oxw().refreshTable()}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("filterValue",e.filterValue)("selection",e.selection)("disableRouting",!e.authResolver.isPerunAdmin())("tableId",e.tableId)}}let p0=(()=>{class n{constructor(e,i,a,o){this.attributeManager=e,this.dialog=i,this.authResolver=a,this.entityStorageService=o,this.loading=!1,this.filterValue="",this.selection=new R.Ov(!0,[]),this.attrDefinitions=[],this.tableId=tn.JO}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.attributeManager.getRequiredAttributesDefinition(this.service.id).subscribe(e=>{this.selection.clear(),this.attrDefinitions=e,this.loading=!1})}onAdd(){const e=(0,Ee.kZ)();e.width="950px",e.data={serviceId:this.service.id,theme:"service-theme"},this.dialog.open(t0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,Ee.kZ)();e.width="650px",e.data={serviceId:this.service.id,attrDefinitions:this.selection.selected,theme:"service-theme"},this.dialog.open(l0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.H8),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-required-attributes"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,c0,3,3,"button",2),t.YNc(6,u0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(8,h0,1,0,"mat-spinner",5),t.YNc(9,d0,1,5,"app-attr-def-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,g.O5,q.lW,ln.L,U.Ou,Li],pipes:[u.X$],styles:[""]}),n})();var f0=s(46597),m0=s(89466),g0=s(70242);function _0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onRemove()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.REMOVE")," ")}}function v0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAllow()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.ALLOW")," ")}}function x0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onBlock()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.BLOCK")," ")}}function y0(n,r){1&n&&t._UZ(0,"mat-spinner",10)}const b0=function(){return["select","destinationId","facility","destination","type","status","propagationType"]};function T0(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-destination-list",11),2&n){const e=t.oxw();t.Q6J("destinations",e.destinations)("filterValue",e.filterValue)("selection",e.selection)("displayedColumns",t.DdM(5,b0))("tableId",e.tableId)}}let C0=(()=>{class n{constructor(e,i,a,o,v,C){this.serviceManager=e,this.notificator=i,this.translate=a,this.dialog=o,this.authResolver=v,this.entityStorageService=C,this.loading=!1,this.filterValue="",this.destinations=[],this.selection=new R.Ov(!0,[]),this.tableId=tn.Cf}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.serviceManager.getAllRichDestinationsForService(this.service.id).subscribe(e=>{this.selection.clear(),this.filterValue="",this.destinations=e,this.loading=!1})}onBlock(){this.loading=!0,this.blockServiceOnDestinations(this.selection.selected)}onAllow(){this.loading=!0,this.allowServiceOnDestinations(this.selection.selected)}onRemove(){const e=(0,Ee.kZ)();e.width="500px",e.data={destinations:this.selection.selected,theme:"admin-theme"},this.dialog.open(m0.u,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}blockServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.BLOCK_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.blockServiceOnDestination(this.service.id,i.id).subscribe(()=>{this.blockServiceOnDestinations(e)},()=>this.loading=!1)}allowServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.ALLOW_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.unblockServiceOnDestinationById(this.service.id,i.id).subscribe(()=>{this.allowServiceOnDestinations(e)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.KK),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-destinations"]],decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["color","warn","class","mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","accent","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"destinations","filterValue","selection","displayedColumns","tableId",4,"ngIf"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"destinations","filterValue","selection","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,_0,3,4,"button",2),t.YNc(6,v0,3,4,"button",3),t.YNc(7,x0,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(9,y0,1,0,"mat-spinner",6),t.YNc(10,T0,1,6,"app-perun-web-apps-destination-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"SERVICE_DETAIL.DESTINATIONS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.DESTINATIONS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,g.O5,q.lW,ln.L,U.Ou,g0.q],pipes:[u.X$],styles:[""]}),n})();function w0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function A0(n,r){1&n&&t._UZ(0,"th",13)}function S0(n,r){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function E0(n,r){1&n&&t._UZ(0,"tr",15)}function D0(n,r){1&n&&t._UZ(0,"tr",16)}function L0(n,r){if(1&n&&(t.TgZ(0,"div",5),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",7),t.ynx(8,8),t.YNc(9,A0,1,0,"th",9),t.YNc(10,S0,2,1,"td",10),t.BQk(),t.YNc(11,E0,1,0,"tr",11),t.YNc(12,D0,1,0,"tr",12),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"DIALOGS.DELETE_OWNER.DESCRIPTION")," "),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.DELETE_OWNER.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function k0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t.TgZ(1,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.DELETE_OWNER.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.DELETE_OWNER.DELETE")," ")}}let I0=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.ownersManagerService=v,this.displayedColumns=["name"],this.owners=[]}ngOnInit(){this.dataSource=new F.by(this.data),this.owners=this.data}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.owners.length?this.ownersManagerService.deleteOwner(this.owners.pop().id).subscribe(()=>{this.onSubmit()},()=>this.loading=!1):this.translate.get("DIALOGS.DELETE_OWNER.SUCCESS").subscribe(e=>{this.loading=!1,this.notificator.showSuccess(e),this.dialogRef.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Y.aC))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-owner-dialog"]],decls:6,vars:6,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,w0,1,0,"mat-spinner",1),t.YNc(4,L0,13,9,"div",2),t.YNc(5,k0,7,7,"div",3)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"DIALOGS.DELETE_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[M.uh,g.O5,U.Ou,M.xY,F.BZ,F.w1,F.fO,F.ge,F.Dz,F.ev,F.as,F.XQ,F.nj,F.Gk,M.H8,q.lW],pipes:[u.X$],styles:[""]}),n})();function O0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function M0(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.FILL_CONTACT")," "))}function N0(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.CONTACT_FORMAT")," "))}function P0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",5),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",6),t.ALo(4,"translate"),t.TgZ(5,"mat-error"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.ALo(10,"translate"),t.YNc(11,M0,3,3,"mat-error",3),t.YNc(12,N0,3,3,"mat-error",3),t.qZA(),t.TgZ(13,"mat-form-field"),t.TgZ(14,"mat-select",7),t.NdJ("valueChange",function(a){return t.CHM(e),t.oxw().type=a}),t.TgZ(15,"mat-option",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t.ALo(26,"translate"),t.TgZ(27,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.s9C("placeholder",t.lcZ(4,15,"DIALOGS.ADD_OWNER.NAME")),t.Q6J("formControl",e.nameCtrl),t.xp6(3),t.hij(" ",t.lcZ(7,17,"DIALOGS.ADD_OWNER.FILL_NAME")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(10,19,"DIALOGS.ADD_OWNER.CONTACT")),t.Q6J("formControl",e.contactCtrl),t.xp6(2),t.Q6J("ngIf",e.contactCtrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.contactCtrl.invalid&&!e.contactCtrl.hasError("required")),t.xp6(2),t.Q6J("value",e.type),t.xp6(2),t.Oqu(t.lcZ(17,21,"DIALOGS.ADD_OWNER.TYPE1")),t.xp6(3),t.Oqu(t.lcZ(20,23,"DIALOGS.ADD_OWNER.TYPE2")),t.xp6(4),t.hij(" ",t.lcZ(24,25,"DIALOGS.ADD_OWNER.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(26,27,"DIALOGS.ADD_OWNER.TOOLTIP")),t.Q6J("matTooltipDisabled",e.nameCtrl.valid&&e.contactCtrl.valid),t.xp6(2),t.Q6J("disabled",e.nameCtrl.invalid||e.contactCtrl.invalid),t.xp6(1),t.hij(" ",t.lcZ(29,29,"DIALOGS.ADD_OWNER.CREATE")," ")}}let F0=(()=>{class n{constructor(e,i,a,o){this.dialogRef=e,this.notificator=i,this.ownersManagerService=a,this.translate=o,this.type="1",o.get("DIALOGS.ADD_OWNER.SUCCESS").subscribe(v=>this.successMessage=v)}ngOnInit(){this.nameCtrl=new nt.NI(null,[nt.kI.required,nt.kI.pattern("^[\\w.-]+( [\\w.-]+)*$")]),this.contactCtrl=new nt.NI(null,[nt.kI.required,nt.kI.pattern(Ee.B2)])}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.ownersManagerService.createOwner({name:this.nameCtrl.value,contact:this.contactCtrl.value,ownerType:Number(this.type)}).subscribe(()=>{this.notificator.showSuccess(this.successMessage),this.loading=!1,this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(Z.V6),t.Y36(Y.aC),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-owner-dialog"]],decls:6,vars:5,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"formControl","placeholder"],[3,"value","valueChange"],["value","1"],["value","0"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["matTooltipPosition","above",3,"matTooltip","matTooltipDisabled"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,O0,1,0,"mat-spinner",2),t.YNc(5,P0,30,31,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"DIALOGS.ADD_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[M.uh,g.O5,U.Ou,M.xY,Bt.KE,re.Nt,nt.Fj,nt.Q7,nt.JJ,nt.oH,Bt.TO,he.gD,_e.ey,M.H8,q.lW,qe.gM],pipes:[u.X$],styles:[""]}),n})();var R0=s(23256);function Z0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().addOwner()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.OWNERS.ADD")," "))}function B0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeOwner()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.OWNERS.DELETE")," ")}}function U0(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function G0(n,r){if(1&n&&t._UZ(0,"perun-web-apps-owners-list",10),2&n){const e=t.oxw();t.Q6J("selection",e.selected)("filterValue",e.filterValue)("owners",e.owners)("tableId",e.tableId)}}let V0=(()=>{class n{constructor(e,i,a){this.ownersManagerService=e,this.dialog=i,this.guiAuthResolver=a,this.owners=[],this.selected=new R.Ov(!0,[]),this.filterValue="",this.tableId=tn.v1}ngOnInit(){this.setAuth(),this.refreshTable()}setAuth(){this.removeAuth=this.guiAuthResolver.isAuthorized("deleteOwner_Owner_policy",[]),this.addAuth=this.guiAuthResolver.isAuthorized("createOwner_Owner_policy",[])}refreshTable(){this.loading=!0,this.ownersManagerService.getAllOwners().subscribe(e=>{this.owners=e,this.selected.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}addOwner(){const e=(0,Ee.kZ)();e.width="400px",e.data={},this.dialog.open(F0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeOwner(){const e=(0,Ee.kZ)();e.width="400px",e.data=this.selected.selected,this.dialog.open(I0,e).afterClosed().subscribe(a=>{a&&(this.selected.clear(),this.refreshTable())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.aC),t.Y36(M.uw),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-owners"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","filterValue","owners","tableId",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"selection","filterValue","owners","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,Z0,3,3,"button",2),t.YNc(6,B0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(8,U0,1,0,"mat-spinner",5),t.YNc(9,G0,1,4,"perun-web-apps-owners-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"ADMIN.OWNERS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.addAuth),t.xp6(1),t.Q6J("ngIf",i.removeAuth),t.xp6(1),t.Q6J("placeholder","ADMIN.OWNERS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,g.O5,q.lW,ln.L,U.Ou,R0.Q],pipes:[u.X$],styles:[""]}),n})();var z0=s(74010);function H0(n,r){1&n&&t._UZ(0,"mat-spinner",5)}function Y0(n,r){if(1&n&&t._UZ(0,"perun-web-apps-facilities-list",6),2&n){const e=t.oxw();t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("facilities",e.facilities)("tableId",e.tableId)}}let W0=(()=>{class n{constructor(e,i){this.facilityManager=e,this.route=i,this.facilities=[],this.filterValue="",this.tableId=tn.zW,this.displayedColumns=["id","name","description"]}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.refreshTable()})}refreshTable(){this.loading=!0,this.facilityManager.getAssignedFacilitiesByUser(this.userId).subscribe(e=>{this.facilities=e.map(i=>({facility:i})),this.loading=!1})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.IQ),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-facilities"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","filterValue","facilities","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","facilities","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(6,H0,1,0,"mat-spinner",3),t.YNc(7,Y0,1,4,"perun-web-apps-facilities-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.FACILITIES.TITLE")),t.xp6(3),t.Q6J("placeholder","USER_DETAIL.FACILITIES.FILTER_PLACEHOLDER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,ln.L,g.O5,U.Ou,z0.X],pipes:[u.X$],styles:[""]}),n})();var vc=s(64080),X0=s(62707),$0=s(60526),j0=s(24179),Q0=s(12651),J0=s(19191);function K0(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function q0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-vo-search-select",7),t.NdJ("voSelected",function(a){return t.CHM(e),t.oxw().loadMember(a)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("vos",e.vos)}}function tx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.STATUS")," ")}function ex(n,r){1&n&&t._UZ(0,"mat-spinner",6)}const nx=function(){return["id","recent","name","description","expiration","groupStatus"]};function ix(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-groups-list",16),t.NdJ("refreshTable",function(){t.CHM(e);const a=t.oxw(4);return a.loadMember(a.selectedVo)}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("groups",e.groups)("memberId",e.member.id)("memberGroupStatus",e.member.groupStatus)("displayedColumns",t.DdM(4,nx))}}const rx=function(n,r){return["/organizations",n,"members",r]};function ax(n,r){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",10),t.TgZ(2,"span",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",12),t._uU(6),t.qZA(),t.qZA(),t._UZ(7,"app-member-overview-membership",13),t.TgZ(8,"p",14),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,ix,1,5,"perun-web-apps-groups-list",15),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,7,"USER_DETAIL.ACCOUNTS.MEMBER"),":"),t.xp6(2),t.Q6J("routerLink",t.WLB(11,rx,e.selectedVo.id,e.member.id)),t.xp6(1),t.hij("",e.member.id," "),t.xp6(1),t.Q6J("member",e.member)("vo",e.selectedVo),t.xp6(2),t.Oqu(t.lcZ(10,9,"USER_DETAIL.ACCOUNTS.GROUPS")),t.xp6(2),t.Q6J("ngIf",!e.loading)}}function sx(n,r){if(1&n&&(t.YNc(0,ex,1,0,"mat-spinner",1),t.YNc(1,ax,12,14,"div",4)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function ox(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_ATT")," ")}function lx(n,r){1&n&&t._UZ(0,"mat-spinner")}function cx(n,r){if(1&n&&t._UZ(0,"app-one-entity-attribute-page",18),2&n){const e=t.oxw(3);t.Q6J("entity","member")("entityId",e.member.id)}}function ux(n,r){if(1&n&&(t.YNc(0,lx,1,0,"mat-spinner",4),t.YNc(1,cx,1,2,"app-one-entity-attribute-page",17)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function hx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_GROUP_ATT")," ")}function dx(n,r){1&n&&t._UZ(0,"mat-spinner")}function px(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","group")}}function fx(n,r){if(1&n&&(t.YNc(0,dx,1,0,"mat-spinner",4),t.YNc(1,px,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function mx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_RESOURCE_ATT")," ")}function gx(n,r){1&n&&t._UZ(0,"mat-spinner")}function _x(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","resource")}}function vx(n,r){if(1&n&&(t.YNc(0,gx,1,0,"mat-spinner",4),t.YNc(1,_x,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function xx(n,r){1&n&&(t.TgZ(0,"mat-tab-group"),t.TgZ(1,"mat-tab"),t.YNc(2,tx,2,3,"ng-template",8),t.YNc(3,sx,2,2,"ng-template",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,ox,2,3,"ng-template",8),t.YNc(6,ux,2,2,"ng-template",9),t.qZA(),t.TgZ(7,"mat-tab"),t.YNc(8,hx,2,3,"ng-template",8),t.YNc(9,fx,2,2,"ng-template",9),t.qZA(),t.TgZ(10,"mat-tab"),t.YNc(11,mx,2,3,"ng-template",8),t.YNc(12,vx,2,2,"ng-template",9),t.qZA(),t.qZA())}function yx(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USER_DETAIL.ACCOUNTS.NO_VOS")))}let bx=(()=>{class n{constructor(e,i,a,o){this.route=e,this.usersService=i,this.membersService=a,this.groupService=o,this.initLoading=!1,this.loading=!1,this.vos=[],this.selectedVo=null,this.member=null,this.groups=[]}ngOnInit(){this.initLoading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.usersService.getVosWhereUserIsMember(this.userId).subscribe(i=>{this.vos=i,this.initLoading=!1},()=>this.initLoading=!1)})}loadMember(e){this.loading=!0,this.selectedVo=e,this.membersService.getMemberByUser(this.selectedVo.id,this.userId).subscribe(i=>{this.member=i,this.groupService.getMemberRichGroupsWithAttributesByNames(this.member.id,[vc.r.MEMBER_DEF_GROUP_EXPIRATION,vc.r.MEMBER_GROUP_STATUS]).subscribe(a=>{this.groups=a,this.loading=!1},()=>this.loading=!1)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(Y.Fv),t.Y36(Y.uq),t.Y36(Y.ff))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-accounts"]],decls:8,vars:7,consts:[[1,"page-title"],["class","ml-auto mr-auto",4,"ngIf"],[1,"d-flex"],["class","w-50",3,"vos","voSelected",4,"ngIf"],[4,"ngIf"],["alert_type","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"w-50",3,"vos","voSelected"],["matTabLabel",""],["matTabContent",""],[1,"mt-4","mb-4"],[1,"subtitle","mr-2"],["queryParamsHandling","merge",1,"member-link",3,"routerLink"],[3,"member","vo"],[1,"mt-4","subtitle"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable",4,"ngIf"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable"],[3,"entity","entityId",4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,K0,1,0,"mat-spinner",1),t.TgZ(4,"div",2),t.YNc(5,q0,1,1,"perun-web-apps-vo-search-select",3),t.qZA(),t.YNc(6,xx,13,0,"mat-tab-group",4),t.YNc(7,yx,3,3,"perun-web-apps-alert",5)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.ACCOUNTS.TITLE")),t.xp6(2),t.Q6J("ngIf",i.initLoading),t.xp6(2),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!i.initLoading&&0===i.vos.length))},directives:[g.O5,U.Ou,X0.M,ue.SP,ue.uX,ue.uD,ue.Vc,p.yS,$0.b,j0.W,Q0.t,J0.Y,rt.w],pipes:[u.X$],styles:[".subtitle[_ngcontent-%COMP%]{font-size:1.2rem}"]}),n})(),xc=(()=>{class n{transform(e){if(e)return e.split(".").pop()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"parseEventName",type:n,pure:!0}),n})();function Tx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.OBJECTS")," ")}function Cx(n,r){if(1&n&&t._UZ(0,"pre",9),2&n){const e=t.oxw();t.Q6J("innerHTML",e.syntaxHighlight(e.eventData),t.oJD)}}function wx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.MESSAGE")," ")}function Ax(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.message)}}let Sx=(()=>{class n{constructor(e,i,a){this.dialogRef=e,this.data=i,this.clipboard=a,this.tabIndex=0,this.eventData={}}ngOnInit(){const e=this.data.message.event;this.actor=this.data.message.actor,this.createdAt=this.data.message.createdAt,e.message&&(this.message=e.message,delete e.message),e.name&&(this.title=e.name,delete e.name),this.eventData=e}tabChanged(e){this.tabIndex=e.index}copyObjects(){this.clipboard.copy(JSON.stringify(this.eventData,null,2))}copyMessage(){this.clipboard.copy(this.message)}syntaxHighlight(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(i){let a="number";return i.startsWith('"')?a=i.endsWith(":")?"key":"string":/true|false/.test(i)?a="boolean":i.includes("null")&&(a="null"),'<span class="'+a+'">'+i+"</span>"})}onClose(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(be.TU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-message-detail-dialog"]],decls:26,vars:19,consts:[[1,"admin-theme"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-button","",3,"click"],[3,"innerHTML"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"parseEventName"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"mat-tab-group",3),t.NdJ("selectedTabChange",function(o){return i.tabChanged(o)}),t.TgZ(11,"mat-tab"),t.YNc(12,Tx,2,3,"ng-template",4),t.YNc(13,Cx,1,1,"ng-template",5),t.qZA(),t.TgZ(14,"mat-tab"),t.YNc(15,wx,2,3,"ng-template",4),t.YNc(16,Ax,2,1,"ng-template",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",6),t.TgZ(18,"button",7),t.NdJ("click",function(){return i.onClose()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){return 0===i.tabIndex?i.copyObjects():i.copyMessage()}),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"mat-icon"),t._uU(25,"content_copy"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){let a;t.xp6(2),t.hij(" ",t.lcZ(3,7,null!==(a=t.lcZ(4,9,i.title))&&void 0!==a?a:"DIALOGS.AUDIT_MESSAGE_DETAIL.TITLE")," "),t.xp6(5),t.HOy(" ",t.lcZ(8,11,"DIALOGS.AUDIT_MESSAGE_DETAIL.ACTOR"),": ",i.actor,", ",t.lcZ(9,13,"DIALOGS.AUDIT_MESSAGE_DETAIL.CREATED_AT"),": ",i.createdAt," "),t.xp6(12),t.hij(" ",t.lcZ(20,15,"DIALOGS.AUDIT_MESSAGE_DETAIL.CLOSE")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"DIALOGS.AUDIT_MESSAGE_DETAIL.COPY")," ")}},directives:[M.uh,M.xY,ue.SP,ue.uX,ue.uD,ue.Vc,M.H8,q.lW,h.Hw],pipes:[u.X$,xc],styles:[".key{color:brown}.string{color:green}.number{color:#ff8c00}.boolean{color:#00f}.null{color:#f0f}\n"],encapsulation:2}),n})();var Ex=s(86087),Dx=s(56451),Lx=s(62383);function kx(n,r){1&n&&(t.TgZ(0,"div",17),t._UZ(1,"mat-spinner",18),t.qZA())}function Ix(n,r){1&n&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ID")," "))}function Ox(n,r){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Mx(n,r){1&n&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.TIMESTAMP")," "))}function Nx(n,r){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.ALo(2,"parseDate"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,!0)," ")}}function Px(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.EVENT_NAME")))}function Fx(n,r){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"parseEventName"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.event.name)," ")}}function Rx(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ACTOR")))}function Zx(n,r){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.actor," ")}}function Bx(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.MESSAGE")))}function Ux(n,r){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.event.message," ")}}function Gx(n,r){1&n&&t._UZ(0,"th",21)}function Vx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"button",23),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().viewDetails(o)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AUDIT_MESSAGES_LIST.VIEW_DETAIL")," "))}function zx(n,r){1&n&&t._UZ(0,"tr",24)}function Hx(n,r){1&n&&t._UZ(0,"tr",25)}function Yx(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_AUDIT_MESSAGES"),"\n"))}let Wx=(()=>{class n{constructor(e,i,a){this.dialog=e,this.dynamicPaginatingService=i,this.tableConfigService=a,this.displayedColumns=["id","timestamp","name","actor","event.message","detail"],this.pageSizeOptions=Ee.f7}static getExportDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"timestamp":return(0,g.p6)(e.createdAt,"d.M.y H.mm.ss","en");case"name":return e.event.name.split(".").pop();case"actor":return e.actor;case"event.message":return e.event.message;default:return""}}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.child.paginator.pageIndex=0),(0,Dx.T)(this.sort.sortChange,this.child.paginator.page).pipe((0,Zi.b)(()=>this.loadAuditMessagesPage())).subscribe()}ngOnInit(){this.dataSource=new Z.Hy(this.dynamicPaginatingService,null),this.dataSource.loadAuditMessages(this.tableConfigService.getTablePageSize(this.tableId),0,"DESCENDING")}ngOnChanges(){this.dataSource&&(this.child.paginator.pageIndex=0,this.loadAuditMessagesPage())}loadAuditMessagesPage(){this.dataSource.loadAuditMessages(this.child.paginator.pageSize,this.child.paginator.pageIndex,"asc"===this.sort.direction?"ASCENDING":"DESCENDING")}viewDetails(e){const i=(0,Ee.kZ)(),a=JSON.parse(JSON.stringify(e));i.minWidth="700px",i.maxWidth="1000px",i.data={message:a},this.dialog.open(Sx,i)}exportData(e){(0,Ee.O6)((0,Ee.Xn)(this.dataSource.getData(),this.displayedColumns.filter(i=>"detail"!==i),n.getExportDataForColumn),e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Z.ly),t.Y36(tn.dB))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-messages-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Ee.l9,7),t.Gf(En.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},inputs:{tableId:"tableId",refresh:"refresh",displayedColumns:"displayedColumns",searchString:"searchString"},features:[t._Bn([{provide:Ex.ye,useClass:Z.Be}]),t.TTD],decls:28,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","pageSizeOptions","tableId","exportData"],["class","spinner-container",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","timestamp"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","","data-cy","audit-message-td",4,"matCellDef"],["matColumnDef","actor"],["matColumnDef","event.message"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],[1,"spinner-container"],[1,"ml-auto","mr-auto"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["mat-cell","","data-cy","audit-message-td",1,"static-column-size"],["color","accent","mat-flat-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(o){return i.exportData(o)}),t.YNc(3,kx,2,0,"div",2),t.ALo(4,"async"),t.TgZ(5,"table",3),t.ynx(6,4),t.YNc(7,Ix,3,3,"th",5),t.YNc(8,Ox,2,1,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,Mx,3,3,"th",5),t.YNc(11,Nx,3,4,"td",6),t.BQk(),t.ynx(12,8),t.YNc(13,Px,3,3,"th",9),t.YNc(14,Fx,3,3,"td",10),t.BQk(),t.ynx(15,11),t.YNc(16,Rx,3,3,"th",9),t.YNc(17,Zx,2,1,"td",6),t.BQk(),t.ynx(18,12),t.YNc(19,Bx,3,3,"th",9),t.YNc(20,Ux,2,1,"td",6),t.BQk(),t.ynx(21,13),t.YNc(22,Gx,1,0,"th",9),t.YNc(23,Vx,4,3,"td",6),t.BQk(),t.YNc(24,zx,1,0,"tr",14),t.YNc(25,Hx,1,0,"tr",15),t.qZA(),t.qZA(),t.qZA(),t.YNc(26,Yx,3,3,"perun-web-apps-alert",16),t.ALo(27,"async")),2&e&&(t.Q6J("hidden",0===i.dataSource.allObjectCount&&!1===t.lcZ(1,9,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataLength",i.dataSource.allObjectCount)("pageSizeOptions",i.pageSizeOptions)("tableId",i.tableId),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,11,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.allObjectCount&&!1===t.lcZ(27,13,i.dataSource.loading$)))},directives:[z.l,g.O5,U.Ou,F.BZ,En.YE,F.w1,F.fO,F.ge,En.nU,F.Dz,F.ev,q.lW,F.as,F.XQ,F.nj,F.Gk,rt.w],pipes:[g.Ov,u.X$,Lx.M,xc],styles:[""]}),n})(),Xx=(()=>{class n{constructor(){this.tableId=tn.yW,this.refresh=!1}refreshTable(){this.refresh=!this.refresh}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-audit-log"]],decls:5,vars:5,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"refresh","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t._UZ(4,"app-audit-messages-list",2)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,3,"ADMIN.AUDIT_LOG.TITLE")),t.xp6(3),t.Q6J("refresh",i.refresh)("tableId",i.tableId))},directives:[$e.t,Wx],pipes:[u.X$],styles:[""]}),n})();var $x=s(4834);let jx=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-edit-enforce-consents-dialog"]],decls:26,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-2","mb-2"],["alert_type","warn"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"mat-divider"),t.TgZ(11,"p",2),t._uU(12),t.qZA(),t._UZ(13,"mat-divider"),t.TgZ(14,"perun-web-apps-alert",3),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.TgZ(18,"div",4),t.TgZ(19,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",6),t.NdJ("click",function(){return i.onSubmit()}),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Tol(i.data.theme),t.xp6(2),t.hij(" ",i.data.enforceConsents?t.lcZ(3,9,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_TITLE"):t.lcZ(4,11,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_TITLE")," "),t.xp6(5),t.hij(" ",i.data.enforceConsents?t.lcZ(8,13,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_DESCRIPTION"):t.lcZ(9,15,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_DESCRIPTION")," "),t.xp6(5),t.Oqu(i.data.consentHubName),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(16,17,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BOLD_DESCRIPTION"):t.lcZ(17,19,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BOLD_DESCRIPTION")," "),t.xp6(5),t.hij(" ",t.lcZ(21,21,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.CANCEL_BUTTON")," "),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(24,23,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BUTTON"):t.lcZ(25,25,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BUTTON")," "))},directives:[M.uh,M.xY,$x.d,rt.w,M.H8,q.lW],pipes:[u.X$],styles:[""]}),n})();function Qx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",16),t.TgZ(1,"mat-checkbox",17),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw();return a?o.masterToggle():null}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Jx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",18),t.TgZ(1,"mat-checkbox",19),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,C=t.oxw();return a?C.selection.toggle(v):null})("click",function(a){return a.stopPropagation()}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))}}function Kx(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ID")," "))}function qx(n,r){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function ty(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NAME")," "))}function ey(n,r){if(1&n&&(t.TgZ(0,"td",22),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&n){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.name),"-name-td"),t.xp6(2),t.hij(" ",e.name," ")}}function ny(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ENFORCE_CONSENTS")," "))}function iy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",22),t.TgZ(1,"mat-slide-toggle",23),t.NdJ("change",function(a){const v=t.CHM(e).$implicit;return t.oxw().changeEnforceFlag(v,a)}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("checked",e.enforceConsents)}}function ry(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.FACILITIES")," "))}function ay(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",25),t._uU(3),t.qZA(),t._UZ(4,"br"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" #",e.id,"")}}function sy(n,r){if(1&n&&(t.TgZ(0,"td",22),t.YNc(1,ay,5,2,"span",24),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.facilities)}}function oy(n,r){1&n&&t._UZ(0,"tr",26)}function ly(n,r){1&n&&t._UZ(0,"tr",27)}function cy(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_CONSENT_HUBS"),"\n"))}function uy(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_FILTER_RESULTS"),"\n"))}let hy=(()=>{class n{constructor(e,i,a,o,v){this.tableCheckbox=e,this.dialog=i,this.notificator=a,this.translate=o,this.consentsManager=v,this.filterValue="",this.displayedColumns=["select","id","name","enforceConsents","facilities"],this.selection=new R.Ov(!0,[]),this.exporting=!1,this.pageSizeOptions=Ee.f7}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"name":return e.name;case"enforceConsents":return e.enforceConsents?"true":"false";case"facilities":{let a="";return e.facilities.forEach(o=>a+=o.name+" #"+String(o.id)+";"),a.slice(0,-1)}default:return""}}ngOnChanges(){this.dataSource=new F.by(this.consentHubs),this.setDataSource()}exportData(e){(0,Ee.O6)((0,Ee.Xn)(this.dataSource.filteredData,this.displayedColumns,n.getDataForColumn),e)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(e,i)=>(0,Ee.Sd)(e,i,this.displayedColumns,n.getDataForColumn),this.dataSource.sortData=(e,i)=>(0,Ee.pR)(e,i,n.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}changeEnforceFlag(e,i){i.source.checked=e.enforceConsents;const a=(0,Ee.kZ)();a.width="550px",a.data={theme:"admin-theme",enforceConsents:e.enforceConsents,consentHubName:e.name},this.dialog.open(jx,a).afterClosed().subscribe(v=>{v&&(e.enforceConsents=!e.enforceConsents,this.consentsManager.updateConsentHub({consentHub:e}).subscribe(C=>{i.source.checked=C.enforceConsents,e.enforceConsents=C.enforceConsents,this.translate.get("SHARED.COMPONENTS.CONSENT_HUBS_LIST.CHANGE_ENFORCE_CONSENTS_SUCCESS").subscribe(N=>{this.notificator.showSuccess(N)})},()=>e.enforceConsents=!e.enforceConsents))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.UA),t.Y36(M.uw),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Y.WY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-consent-hubs-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Ee.l9,7),t.Gf(En.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{consentHubs:"consentHubs",filterValue:"filterValue",displayedColumns:"displayedColumns",tableId:"tableId",selection:"selection"},features:[t.TTD],decls:22,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enforceConsents"],["matColumnDef","facilities"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],[3,"checked","change"],[4,"ngFor","ngForOf"],[1,"text-muted"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(o){return i.exportData(o)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,Qx,2,3,"th",4),t.YNc(5,Jx,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,Kx,3,3,"th",7),t.YNc(8,qx,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,ty,3,3,"th",7),t.YNc(11,ey,3,4,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,ny,3,3,"th",7),t.YNc(14,iy,2,1,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,ry,3,3,"th",7),t.YNc(17,sy,2,1,"td",10),t.BQk(),t.YNc(18,oy,1,0,"tr",13),t.YNc(19,ly,1,0,"tr",14),t.qZA(),t.qZA(),t.qZA(),t.YNc(20,cy,3,3,"perun-web-apps-alert",15),t.YNc(21,uy,3,3,"perun-web-apps-alert",15)),2&e&&(t.Q6J("hidden",0===i.consentHubs.length||0===i.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",i.tableId)("dataLength",i.dataSource.filteredData.length)("pageSizeOptions",i.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.consentHubs.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.consentHubs.length))},directives:[z.l,F.BZ,En.YE,F.w1,F.fO,F.ge,$.oG,F.Dz,F.ev,En.nU,ke.Rr,g.sg,F.as,F.XQ,F.nj,F.Gk,g.O5,rt.w],pipes:[u.X$,se.R],styles:[""]}),n})();function dy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().evaluateConsents()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.CONSENT_HUBS.EVALUATE_CONSENTS")," ")}}function py(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function fy(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-consent-hubs-list",8),2&n){const e=t.oxw();t.Q6J("consentHubs",e.consentHubs)("selection",e.selection)("filterValue",e.filterValue)("tableId",e.tableId)}}let my=(()=>{class n{constructor(e,i,a,o,v){this.consentsManager=e,this.authResolver=i,this.notificator=a,this.translate=o,this.dialog=v,this.loading=!1,this.tableId=tn.HE,this.selection=new R.Ov(!0,[]),this.filterValue="",this.consentHubs=[]}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}refreshTable(){this.loading=!0,this.consentsManager.getAllConsentHubs().subscribe(e=>{this.consentHubs=e,this.loading=!1})}evaluateConsents(){const e=(0,Ee.kZ)();e.width="500px",e.data={title:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_TITLE"),theme:"admin-theme",description:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_DESCRIPTION"),items:this.selection.selected.map(a=>a.name),type:"confirmation",showAsk:!1},this.dialog.open(ma.Ts,e).afterClosed().subscribe(a=>{a&&this.evaluateConsentsForConsentHub(0)})}evaluateConsentsForConsentHub(e){if(e===this.selection.selected.length)return this.notificator.showSuccess(this.translate.instant("ADMIN.CONSENT_HUBS.EVALUATION_FINISH")),void this.selection.clear();this.consentsManager.evaluateConsentsForConsentHub(this.selection.selected[e].id).subscribe(()=>{this.evaluateConsentsForConsentHub(++e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.WY),t.Y36(Z.x4),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(M.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-admin-consent-hubs"]],decls:9,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","action-button mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"consentHubs","selection","filterValue","tableId",4,"ngIf"],["color","accent","mat-flat-button","",1,"action-button","mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"consentHubs","selection","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,dy,3,4,"button",2),t.TgZ(6,"perun-web-apps-immediate-filter",3),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(7,py,1,0,"mat-spinner",4),t.YNc(8,fy,1,4,"app-perun-web-apps-consent-hubs-list",5),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,5,"ADMIN.CONSENT_HUBS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.CONSENT_HUBS.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[$e.t,g.O5,q.lW,ln.L,U.Ou,hy],pipes:[u.X$],styles:[""]}),n})();var gy=s(57788),Us=s(71992);const _y=[{path:"",component:T,canActivateChild:[Us.a],children:[{path:"",component:I,data:{animation:"AdminOverviewPage"}},{path:"attributes",component:Ji,data:{animation:"AdminAttributesPage"}},{path:"users",component:V_.t,data:{animation:"AdminUsersPage"}},{path:"owners",component:V0,data:{animation:"AdminOwnersPage"}},{path:"services",component:xv.F,data:{animation:"AdminServicesPage"}},{path:"audit_log",component:Xx,data:{animation:"AdminAuditLogPage"}},{path:"visualizer",component:ci,children:[{path:"",component:Ti,data:{animation:"VisualizerOverviewPage"}},{path:"attrDependencies",component:Mn,data:{animation:"VisualizerAttrModulesPage"}},{path:"userDestinationRelationship",component:Ot,data:{animation:"UserDestinationRelationshipPage"}},{path:"userDestinationRelationship/graph",component:G_,data:{animation:"UserDestinationGraphPage"}}]},{path:"ext_sources",component:sv,data:{animation:"AdminExtSourcesPage"}},{path:"consent_hubs",component:my,data:{animation:"AdminConsentHubsPage"}},{path:"searcher",component:gy.g,data:{animation:"AdminSearcherPage"}}]},{path:"users/:userId",component:Q_,canActivateChild:[Us.a],children:[{path:"",component:J_.Z,data:{animation:"UserOverviewPage"}},{path:"accounts",component:bx,data:{animation:"UserAccountsPage"}},{path:"attributes",component:tv.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:K_.j,data:{animation:"UserOrganizationsPage",showPrincipal:!1}},{path:"groups",component:q_.u,data:{animation:"UserGroupsPage",showPrincipal:!1}},{path:"identities",component:vv,data:{animation:"UserIdentitiesPage"}},{path:"facilities",component:W0,data:{animation:"UserFacilitiesPage"}},{path:"resources",component:wv,data:{animation:"UserRoles"}},{path:"identities/:identityId",component:Iv,data:{animation:"UserIdentityDetailPage"}},{path:"roles",component:ov.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:lv.R,data:{animation:"UserServiceIdentities"}},{path:"associated-users",component:f0.d,data:{animation:"AssociatedUsersPage"}}]},{path:"services/:serviceId",component:Gv,canActivateChild:[Us.a],children:[{path:"",component:Vv,data:{animation:"ServiceOverviewPage"}},{path:"required-attributes",component:p0,data:{animation:"ServiceRequiredAttributesPage"}},{path:"destinations",component:C0,data:{animation:"ServiceDestinationsPage"}}]}];let vy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(_y)],p.Bz]}),n})();var xy=s(14264),yy=s(63189),by=s(46374);let Ty=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Cp,k_,g.ez,vy,xy.m,yy.r,un.ez,wt.d4,by.UsersModule]]}),n})()},70242:(w,E,s)=>{"use strict";s.d(E,{q:()=>jt});var c=s(84847),x=s(20449),_=s(32075),g=s(9244),p=s(32080),t=s(5e3),d=s(18750),l=s(77446),h=s(69808),f=s(25245),u=s(29772),m=s(98380),T=s(51062);function L(Nt,ft){if(1&Nt){const dt=t.EpF();t.TgZ(0,"th",21),t.TgZ(1,"mat-checkbox",22),t.NdJ("change",function(Bt){t.CHM(dt);const re=t.oxw();return Bt?re.masterToggle():null}),t.qZA(),t.qZA()}if(2&Nt){const dt=t.oxw();t.xp6(1),t.Q6J("aria-label",dt.checkboxLabel())("checked",dt.selection.hasValue()&&dt.isAllSelected())("indeterminate",dt.selection.hasValue()&&!dt.isAllSelected())}}function I(Nt,ft){if(1&Nt){const dt=t.EpF();t.TgZ(0,"td",23),t.TgZ(1,"mat-checkbox",24),t.NdJ("change",function(Bt){const ce=t.CHM(dt).$implicit,he=t.oxw();return Bt?he.selection.toggle(ce):null})("click",function(Bt){return Bt.stopPropagation()}),t.qZA(),t.qZA()}if(2&Nt){const dt=ft.$implicit,wt=t.oxw();t.xp6(1),t.Q6J("aria-label",wt.checkboxLabel(dt))("checked",wt.selection.isSelected(dt))}}function R(Nt,ft){1&Nt&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION_ID")," "))}function M(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.hij(" ",dt.id," ")}}function F(Nt,ft){1&Nt&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.SERVICE")," "))}function Z(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.Oqu(dt.service.name)}}function Y(Nt,ft){1&Nt&&t._UZ(0,"th",28)}function U(Nt,ft){1&Nt&&(t.TgZ(0,"mat-icon",30),t.ALo(1,"translate"),t._uU(2," warning "),t.qZA()),2&Nt&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.WARN"))}function rt(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t.YNc(1,U,3,3,"mat-icon",29),t.qZA()),2&Nt){const dt=ft.$implicit,wt=t.oxw();t.xp6(1),t.Q6J("ngIf",!wt.services.has(dt.service.id))}}function q(Nt,ft){1&Nt&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.FACILITY")," "))}function st(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.Oqu(dt.facility.name)}}function K(Nt,ft){1&Nt&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION")," "))}function X(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.Oqu(dt.destination)}}function W(Nt,ft){1&Nt&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.TYPE")," "))}function at(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.Oqu(dt.type.toUpperCase())}}function H(Nt,ft){1&Nt&&t._UZ(0,"th",28)}function Q(Nt,ft){1&Nt&&(t.TgZ(0,"mat-icon",32),t.ALo(1,"translate"),t._uU(2," check_circle_outline "),t.qZA()),2&Nt&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.ALLOWED"))}function nt(Nt,ft){1&Nt&&(t.TgZ(0,"mat-icon",32),t.ALo(1,"translate"),t._uU(2," block "),t.qZA()),2&Nt&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.BLOCKED"))}function tt(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t.YNc(1,Q,3,3,"mat-icon",31),t.YNc(2,nt,3,3,"mat-icon",31),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.Q6J("ngIf",!dt.blocked),t.xp6(1),t.Q6J("ngIf",dt.blocked)}}function V(Nt,ft){1&Nt&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.PROPAGATION_TYPE")," "))}function D(Nt,ft){if(1&Nt&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&Nt){const dt=ft.$implicit;t.xp6(1),t.Oqu(dt.propagationType)}}function mt(Nt,ft){1&Nt&&t._UZ(0,"tr",33)}function St(Nt,ft){1&Nt&&t._UZ(0,"tr",34)}function Mt(Nt,ft){1&Nt&&(t.TgZ(0,"perun-web-apps-alert",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}function Et(Nt,ft){1&Nt&&(t.TgZ(0,"perun-web-apps-alert",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&Nt&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.NO_DESTINATIONS"),"\n"))}let jt=(()=>{class Nt{constructor(dt,wt){this.authResolver=dt,this.tableCheckbox=wt,this.destinations=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.pageSizeOptions=g.f7}set matSort(dt){this.sort=dt,this.setDataSource()}static getDataForColumn(dt,wt){switch(wt){case"destinationId":return dt.id.toString();case"service":return dt.service.name;case"facility":return dt.facility.name;case"destination":return dt.destination;case"type":return dt.type;case"status":return dt.blocked?"blocked":"allowed";case"propagationType":return dt.propagationType;default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(dt=>"destinationId"!==dt)),this.dataSource=new _.by(this.destinations),this.setDataSource(),this.dataSource.filter=this.filterValue.toLowerCase()}exportData(dt){(0,g.O6)((0,g.Xn)(this.dataSource.filteredData,this.displayedColumns,Nt.getDataForColumn),dt)}setDataSource(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(dt,wt)=>(0,g.Sd)(dt,wt,this.displayedColumns,Nt.getDataForColumn),this.dataSource.sortData=(dt,wt)=>(0,g.pR)(dt,wt,Nt.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(dt){return dt?`${this.selection.isSelected(dt)?"deselect":"select"} row ${dt.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}}return Nt.\u0275fac=function(dt){return new(dt||Nt)(t.Y36(p.x4),t.Y36(p.UA))},Nt.\u0275cmp=t.Xpm({type:Nt,selectors:[["app-perun-web-apps-destination-list"]],viewQuery:function(dt,wt){if(1&dt&&(t.Gf(g.l9,7),t.Gf(c.YE,7)),2&dt){let Bt;t.iGM(Bt=t.CRH())&&(wt.child=Bt.first),t.iGM(Bt=t.CRH())&&(wt.matSort=Bt.first)}},inputs:{destinations:"destinations",selection:"selection",filterValue:"filterValue",tableId:"tableId",displayedColumns:"displayedColumns",services:"services"},features:[t.TTD],decls:34,vars:9,consts:[[1,"card","mt-3",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","destinationId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","service"],["mat-cell","",4,"matCellDef"],["matColumnDef","warn"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","facility"],["matColumnDef","destination"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","propagationType"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],["class","warn","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"warn",3,"matTooltip"],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(dt,wt){1&dt&&(t.TgZ(0,"div",0),t.TgZ(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(re){return wt.exportData(re)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,L,2,3,"th",4),t.YNc(5,I,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,R,3,3,"th",7),t.YNc(8,M,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,F,3,3,"th",7),t.YNc(11,Z,2,1,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,Y,1,0,"th",12),t.YNc(14,rt,2,1,"td",10),t.BQk(),t.ynx(15,13),t.YNc(16,q,3,3,"th",7),t.YNc(17,st,2,1,"td",10),t.BQk(),t.ynx(18,14),t.YNc(19,K,3,3,"th",7),t.YNc(20,X,2,1,"td",10),t.BQk(),t.ynx(21,15),t.YNc(22,W,3,3,"th",7),t.YNc(23,at,2,1,"td",10),t.BQk(),t.ynx(24,16),t.YNc(25,H,1,0,"th",12),t.YNc(26,tt,3,2,"td",10),t.BQk(),t.ynx(27,17),t.YNc(28,V,3,3,"th",7),t.YNc(29,D,2,1,"td",10),t.BQk(),t.YNc(30,mt,1,0,"tr",18),t.YNc(31,St,1,0,"tr",19),t.qZA(),t.qZA(),t.qZA(),t.YNc(32,Mt,3,3,"perun-web-apps-alert",20),t.YNc(33,Et,3,3,"perun-web-apps-alert",20)),2&dt&&(t.Q6J("hidden",0===wt.dataSource.filteredData.length||0===wt.destinations.length),t.xp6(1),t.Q6J("pageSizeOptions",wt.pageSizeOptions)("dataLength",wt.dataSource.filteredData.length)("tableId",wt.tableId),t.xp6(1),t.Q6J("dataSource",wt.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",wt.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",wt.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===wt.dataSource.filteredData.length&&0!==wt.destinations.length),t.xp6(1),t.Q6J("ngIf",0===wt.destinations.length))},directives:[d.l,_.BZ,c.YE,_.w1,_.fO,_.ge,l.oG,_.Dz,_.ev,c.nU,h.O5,f.Hw,u.gM,_.as,_.XQ,_.nj,_.Gk,m.w],pipes:[T.X$],styles:[".warn[_ngcontent-%COMP%]{color:#ebe134}"]}),Nt})()},89466:(w,E,s)=>{"use strict";s.d(E,{u:()=>I});var c=s(32105),x=s(48966),_=s(32075),g=s(32080),p=s(5e3),t=s(51062),d=s(69808),l=s(20773),h=s(98380),f=s(70242),u=s(47423);function m(R,M){1&R&&p._UZ(0,"mat-spinner",6)}function T(R,M){if(1&R&&p._UZ(0,"app-perun-web-apps-destination-list",11),2&R){const F=p.oxw(2);p.Q6J("destinations",F.destinations)("displayedColumns",F.displayedColumns)}}function L(R,M){if(1&R&&(p.TgZ(0,"div",7),p.TgZ(1,"perun-web-apps-alert",8),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"div",9),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.YNc(10,T,1,2,"app-perun-web-apps-destination-list",10),p.qZA()),2&R){const F=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,4,"DIALOGS.REMOVE_DESTINATIONS.WARNING")),p.xp6(3),p.Oqu(p.lcZ(6,6,"DIALOGS.REMOVE_DESTINATIONS.DESCRIPTION")),p.xp6(3),p.hij(" ",p.lcZ(9,8,"DIALOGS.REMOVE_DESTINATIONS.ASK")," "),p.xp6(2),p.Q6J("ngIf",!F.loading)}}let I=(()=>{class R{constructor(F,Z,Y,U,rt){this.dialogRef=F,this.data=Z,this.notificator=Y,this.translate=U,this.serviceManager=rt,this.displayedColumns=[],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.destinations=this.data.destinations,this.displayedColumns="admin-theme"===this.theme?["destinationId","facility","destination","type","propagationType"]:["destinationId","service","destination","type","propagationType"],this.dataSource=new _.by(this.data.destinations)}onCancel(){this.dialogRef.close(!1)}deleteDestinations(){if(0===this.destinations.length)return this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_DESTINATIONS.SUCCESS")),void this.dialogRef.close(!0);const F=this.destinations.pop();this.serviceManager.removeDestination(F.service.id,F.facility.id,F.destination,F.type).subscribe(()=>{this.deleteDestinations()},()=>this.loading=!1)}onConfirm(){this.loading=!0,this.deleteDestinations()}}return R.\u0275fac=function(F){return new(F||R)(p.Y36(x.so),p.Y36(x.WI),p.Y36(g.V6),p.Y36(t.sK),p.Y36(c.KK))},R.\u0275cmp=p.Xpm({type:R,selectors:[["app-perun-web-apps-remove-destination-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","warn"],[1,"font-weight-bold"],[3,"destinations","displayedColumns",4,"ngIf"],[3,"destinations","displayedColumns"]],template:function(F,Z){1&F&&(p.TgZ(0,"h1",0),p._uU(1),p.ALo(2,"translate"),p.qZA(),p.TgZ(3,"div"),p.YNc(4,m,1,0,"mat-spinner",1),p.YNc(5,L,11,10,"div",2),p.TgZ(6,"div",3),p.TgZ(7,"button",4),p.NdJ("click",function(){return Z.onCancel()}),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"button",5),p.NdJ("click",function(){return Z.onConfirm()}),p._uU(11),p.ALo(12,"translate"),p.qZA(),p.qZA(),p.qZA()),2&F&&(p.xp6(1),p.Oqu(p.lcZ(2,9,"DIALOGS.REMOVE_DESTINATIONS.TITLE")),p.xp6(2),p.Tol(Z.theme),p.xp6(1),p.Q6J("ngIf",Z.loading),p.xp6(1),p.Q6J("ngIf",!Z.loading),p.xp6(3),p.hij(" ",p.lcZ(9,11,"DIALOGS.REMOVE_DESTINATIONS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",Z.loading),p.xp6(1),p.hij(" ",p.lcZ(12,13,"DIALOGS.REMOVE_DESTINATIONS.CONFIRM")," "))},directives:[x.uh,d.O5,l.Ou,x.xY,h.w,f.q,x.H8,u.lW],pipes:[t.X$],styles:[""]}),R})()},23256:(w,E,s)=>{"use strict";s.d(E,{Q:()=>X});var c=s(84847),x=s(20449),_=s(32075),g=s(9244),p=s(32080),t=s(5e3),d=s(18750),l=s(77446),h=s(69808),f=s(98380),u=s(51062);function m(W,at){if(1&W){const H=t.EpF();t.TgZ(0,"th",16),t.TgZ(1,"mat-checkbox",17),t.NdJ("change",function(nt){t.CHM(H);const tt=t.oxw();return nt?tt.masterToggle():null}),t.qZA(),t.qZA()}if(2&W){const H=t.oxw();t.xp6(1),t.Q6J("aria-label",H.checkboxLabel())("checked",H.selection.hasValue()&&H.isAllSelected())("indeterminate",H.selection.hasValue()&&!H.isAllSelected())}}function T(W,at){if(1&W){const H=t.EpF();t.TgZ(0,"td",18),t.TgZ(1,"mat-checkbox",19),t.NdJ("change",function(nt){const V=t.CHM(H).$implicit,D=t.oxw();return nt?D.selection.toggle(V):null})("click",function(nt){return nt.stopPropagation()}),t.qZA(),t.qZA()}if(2&W){const H=at.$implicit,Q=t.oxw();t.xp6(1),t.Q6J("aria-label",Q.checkboxLabel(H))("checked",Q.selection.isSelected(H))}}function L(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.ID")," "))}function I(W,at){if(1&W&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.hij(" ",H.id," ")}}function R(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NAME")," "))}function M(W,at){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.Oqu(H.name)}}function F(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.CONTACT")," "))}function Z(W,at){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.Oqu(H.contact)}}function Y(W,at){1&W&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.TYPE")," "))}function U(W,at){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const H=at.$implicit;t.xp6(1),t.Oqu(H.type)}}function rt(W,at){1&W&&t._UZ(0,"tr",23)}function q(W,at){1&W&&t._UZ(0,"tr",24)}function st(W,at){1&W&&(t.TgZ(0,"perun-web-apps-alert",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_OWNERS"),"\n"))}function K(W,at){1&W&&(t.TgZ(0,"perun-web-apps-alert",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_FILTER_OWNERS"),"\n"))}let X=(()=>{class W{constructor(H,Q){this.authResolver=H,this.tableCheckbox=Q,this.owners=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.displayedColumns=["select","id","name","contact","type"],this.pageSizeOptions=g.f7}set matSort(H){this.sort=H,this.setDataSource()}static getDataForColumn(H,Q){switch(Q){case"id":return H.id.toString();case"name":return H.name;case"contact":return H.contact;case"type":return H.type;default:return""}}ngAfterViewInit(){this.setDataSource()}exportData(H){(0,g.O6)((0,g.Xn)(this.dataSource.filteredData,this.displayedColumns,W.getDataForColumn),H)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(H,Q)=>(0,g.Sd)(H,Q,this.displayedColumns,W.getDataForColumn),this.dataSource.sortData=(H,Q)=>(0,g.pR)(H,Q,W.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(H=>"id"!==H)),this.dataSource=new _.by(this.owners),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(H){return H?`${this.selection.isSelected(H)?"deselect":"select"} row ${H.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}}return W.\u0275fac=function(H){return new(H||W)(t.Y36(p.x4),t.Y36(p.UA))},W.\u0275cmp=t.Xpm({type:W,selectors:[["perun-web-apps-owners-list"]],viewQuery:function(H,Q){if(1&H&&(t.Gf(g.l9,7),t.Gf(c.YE,7)),2&H){let nt;t.iGM(nt=t.CRH())&&(Q.child=nt.first),t.iGM(nt=t.CRH())&&(Q.matSort=nt.first)}},inputs:{owners:"owners",selection:"selection",tableId:"tableId",filterValue:"filterValue",displayedColumns:"displayedColumns"},features:[t.TTD],decls:22,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","contact"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(H,Q){1&H&&(t.TgZ(0,"div",0),t.TgZ(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(tt){return Q.exportData(tt)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,m,2,3,"th",4),t.YNc(5,T,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,L,3,3,"th",7),t.YNc(8,I,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,R,3,3,"th",7),t.YNc(11,M,2,1,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,F,3,3,"th",7),t.YNc(14,Z,2,1,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,Y,3,3,"th",7),t.YNc(17,U,2,1,"td",10),t.BQk(),t.YNc(18,rt,1,0,"tr",13),t.YNc(19,q,1,0,"tr",14),t.qZA(),t.qZA(),t.qZA(),t.YNc(20,st,3,3,"perun-web-apps-alert",15),t.YNc(21,K,3,3,"perun-web-apps-alert",15)),2&H&&(t.Q6J("hidden",0===Q.owners.length||0===Q.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",Q.tableId)("dataLength",Q.dataSource.filteredData.length)("pageSizeOptions",Q.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",Q.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",Q.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",Q.displayedColumns),t.xp6(1),t.Q6J("ngIf",!Q.owners.length),t.xp6(1),t.Q6J("ngIf",!Q.dataSource.filteredData.length&&Q.owners.length))},directives:[d.l,_.BZ,c.YE,_.w1,_.fO,_.ge,l.oG,_.Dz,_.ev,c.nU,_.as,_.XQ,_.nj,_.Gk,h.O5,f.w],pipes:[u.X$],styles:[""]}),W})()},16087:(w,E,s)=>{"use strict";const c=s(34315),x=s(52872),_=s(60929);w.exports=function g(d,l){switch(x(d)){case"object":return function p(d,l){if("function"==typeof l)return l(d);if(l||_(d)){const h=new d.constructor;for(let f in d)h[f]=g(d[f],l);return h}return d}(d,l);case"array":return function t(d,l){const h=new d.constructor(d.length);for(let f=0;f<d.length;f++)h[f]=g(d[f],l);return h}(d,l);default:return c(d)}}},60929:(w,E,s)=>{"use strict";var c=s(50623);function x(_){return!0===c(_)&&"[object Object]"===Object.prototype.toString.call(_)}w.exports=function(g){var p,t;return!(!1===x(g)||(p=g.constructor,"function"!=typeof p)||(t=p.prototype,!1===x(t))||!1===t.hasOwnProperty("isPrototypeOf"))}},52786:(w,E,s)=>{"use strict";s.d(E,{Il:()=>x,xV:()=>_,J5:()=>g,ZP:()=>Z,SU:()=>rt,B8:()=>q,Ss:()=>st,Ym:()=>Q});var c=s(68884);function x(){}var _=.7,g=1/_,p="\\s*([+-]?\\d+)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),f=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),u=new RegExp("^rgba\\("+[p,p,p,t]+"\\)$"),m=new RegExp("^rgba\\("+[d,d,d,t]+"\\)$"),T=new RegExp("^hsl\\("+[t,d,d]+"\\)$"),L=new RegExp("^hsla\\("+[t,d,d,t]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function R(){return this.rgb().formatHex()}function F(){return this.rgb().formatRgb()}function Z(V){var D,mt;return V=(V+"").trim().toLowerCase(),(D=l.exec(V))?(mt=D[1].length,D=parseInt(D[1],16),6===mt?Y(D):3===mt?new st(D>>8&15|D>>4&240,D>>4&15|240&D,(15&D)<<4|15&D,1):8===mt?U(D>>24&255,D>>16&255,D>>8&255,(255&D)/255):4===mt?U(D>>12&15|D>>8&240,D>>8&15|D>>4&240,D>>4&15|240&D,((15&D)<<4|15&D)/255):null):(D=h.exec(V))?new st(D[1],D[2],D[3],1):(D=f.exec(V))?new st(255*D[1]/100,255*D[2]/100,255*D[3]/100,1):(D=u.exec(V))?U(D[1],D[2],D[3],D[4]):(D=m.exec(V))?U(255*D[1]/100,255*D[2]/100,255*D[3]/100,D[4]):(D=T.exec(V))?at(D[1],D[2]/100,D[3]/100,1):(D=L.exec(V))?at(D[1],D[2]/100,D[3]/100,D[4]):I.hasOwnProperty(V)?Y(I[V]):"transparent"===V?new st(NaN,NaN,NaN,0):null}function Y(V){return new st(V>>16&255,V>>8&255,255&V,1)}function U(V,D,mt,St){return St<=0&&(V=D=mt=NaN),new st(V,D,mt,St)}function rt(V){return V instanceof x||(V=Z(V)),V?new st((V=V.rgb()).r,V.g,V.b,V.opacity):new st}function q(V,D,mt,St){return 1===arguments.length?rt(V):new st(V,D,mt,null==St?1:St)}function st(V,D,mt,St){this.r=+V,this.g=+D,this.b=+mt,this.opacity=+St}function K(){return"#"+W(this.r)+W(this.g)+W(this.b)}function X(){var V=this.opacity;return(1===(V=isNaN(V)?1:Math.max(0,Math.min(1,V)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===V?")":", "+V+")")}function W(V){return((V=Math.max(0,Math.min(255,Math.round(V)||0)))<16?"0":"")+V.toString(16)}function at(V,D,mt,St){return St<=0?V=D=mt=NaN:mt<=0||mt>=1?V=D=NaN:D<=0&&(V=NaN),new nt(V,D,mt,St)}function H(V){if(V instanceof nt)return new nt(V.h,V.s,V.l,V.opacity);if(V instanceof x||(V=Z(V)),!V)return new nt;if(V instanceof nt)return V;var D=(V=V.rgb()).r/255,mt=V.g/255,St=V.b/255,Mt=Math.min(D,mt,St),Et=Math.max(D,mt,St),jt=NaN,Nt=Et-Mt,ft=(Et+Mt)/2;return Nt?(jt=D===Et?(mt-St)/Nt+6*(mt<St):mt===Et?(St-D)/Nt+2:(D-mt)/Nt+4,Nt/=ft<.5?Et+Mt:2-Et-Mt,jt*=60):Nt=ft>0&&ft<1?0:jt,new nt(jt,Nt,ft,V.opacity)}function Q(V,D,mt,St){return 1===arguments.length?H(V):new nt(V,D,mt,null==St?1:St)}function nt(V,D,mt,St){this.h=+V,this.s=+D,this.l=+mt,this.opacity=+St}function tt(V,D,mt){return 255*(V<60?D+(mt-D)*V/60:V<180?mt:V<240?D+(mt-D)*(240-V)/60:D)}(0,c.Z)(x,Z,{copy:function(V){return Object.assign(new this.constructor,this,V)},displayable:function(){return this.rgb().displayable()},hex:R,formatHex:R,formatHsl:function M(){return H(this).formatHsl()},formatRgb:F,toString:F}),(0,c.Z)(st,q,(0,c.l)(x,{brighter:function(V){return V=null==V?g:Math.pow(g,V),new st(this.r*V,this.g*V,this.b*V,this.opacity)},darker:function(V){return V=null==V?_:Math.pow(_,V),new st(this.r*V,this.g*V,this.b*V,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K,formatHex:K,formatRgb:X,toString:X})),(0,c.Z)(nt,Q,(0,c.l)(x,{brighter:function(V){return V=null==V?g:Math.pow(g,V),new nt(this.h,this.s,this.l*V,this.opacity)},darker:function(V){return V=null==V?_:Math.pow(_,V),new nt(this.h,this.s,this.l*V,this.opacity)},rgb:function(){var V=this.h%360+360*(this.h<0),D=isNaN(V)||isNaN(this.s)?0:this.s,mt=this.l,St=mt+(mt<.5?mt:1-mt)*D,Mt=2*mt-St;return new st(tt(V>=240?V-240:V+120,Mt,St),tt(V,Mt,St),tt(V<120?V+240:V-120,Mt,St),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var V=this.opacity;return(1===(V=isNaN(V)?1:Math.max(0,Math.min(1,V)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===V?")":", "+V+")")}}))},68884:(w,E,s)=>{"use strict";function c(_,g,p){_.prototype=g.prototype=p,p.constructor=_}function x(_,g){var p=Object.create(_.prototype);for(var t in g)p[t]=g[t];return p}s.d(E,{Z:()=>c,l:()=>x})},25922:(w,E,s)=>{"use strict";s.d(E,{Z:()=>d});var c={value:function(){}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function g(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",m=f.indexOf(".");if(m>=0&&(u=f.slice(m+1),f=f.slice(0,m)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var m,f=0,u=l.length;f<u;++f)if((m=l[f]).name===h)return m.value}function t(l,h,f){for(var u=0,m=l.length;u<m;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var m,f=this._,u=g(l+"",f),T=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++T<L;)if(m=(l=u[T]).type)f[m]=t(f[m],l.name,h);else if(null==h)for(m in f)f[m]=t(f[m],l.name,null);return this}for(;++T<L;)if((m=(l=u[T]).type)&&(m=p(f[m],l.name)))return m},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((m=arguments.length-2)>0)for(var m,T,f=new Array(m),u=0;u<m;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,m=(T=this._[l]).length;u<m;++u)T[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],m=0,T=u.length;m<T;++m)u[m].value.apply(h,f)}};const d=x},56758:(w,E,s)=>{"use strict";s.d(E,{Z:()=>g,D:()=>p});var c=s(52016);function _(t){t.preventDefault(),t.stopImmediatePropagation()}function g(t){var d=t.document.documentElement,l=(0,c.Z)(t).on("dragstart.drag",_,!0);"onselectstart"in d?l.on("selectstart.drag",_,!0):(d.__noselect=d.style.MozUserSelect,d.style.MozUserSelect="none")}function p(t,d){var l=t.document.documentElement,h=(0,c.Z)(t).on("dragstart.drag",null);d&&(h.on("click.drag",_,!0),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in l?h.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}},27065:(w,E,s)=>{"use strict";function _(g){return((g*=2)<=1?g*g*g:(g-=2)*g*g+2)/2}s.d(E,{tw:()=>_})},22910:(w,E,s)=>{"use strict";s.d(E,{WU:()=>_,jH:()=>g,ZP:()=>p});var x,_,g,c=s(4753);function p(t){return x=(0,c.Z)(t),_=x.format,g=x.formatPrefix,x}p({thousands:",",grouping:[3],currency:["$",""]})},68520:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(5326);function x(_){return(_=(0,c.V)(Math.abs(_)))?_[1]:NaN}},5326:(w,E,s)=>{"use strict";function c(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function x(_,g){if((p=(_=g?_.toExponential(g-1):_.toExponential()).indexOf("e"))<0)return null;var p,t=_.slice(0,p);return[t.length>1?t[0]+t.slice(2):t,+_.slice(p+1)]}s.d(E,{Z:()=>c,V:()=>x})},32517:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x,v:()=>_});var c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x(g){if(!(p=c.exec(g)))throw new Error("invalid format: "+g);var p;return new _({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function _(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}x.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},41129:(w,E,s)=>{"use strict";s.r(E),s.d(E,{formatDefaultLocale:()=>c.ZP,format:()=>c.WU,formatPrefix:()=>c.jH,formatLocale:()=>x.Z,formatSpecifier:()=>_.Z,FormatSpecifier:()=>_.v,precisionFixed:()=>g.Z,precisionPrefix:()=>p.Z,precisionRound:()=>t.Z});var c=s(22910),x=s(4753),_=s(32517),g=s(78986),p=s(38914),t=s(65142)},4753:(w,E,s)=>{"use strict";s.d(E,{Z:()=>L});var d,c=s(68520),g=s(32517),t=s(5326);function h(I,R){var M=(0,t.V)(I,R);if(!M)return I+"";var F=M[0],Z=M[1];return Z<0?"0."+new Array(-Z).join("0")+F:F.length>Z+1?F.slice(0,Z+1)+"."+F.slice(Z+1):F+new Array(Z-F.length+2).join("0")}const f={"%":(I,R)=>(100*I).toFixed(R),b:I=>Math.round(I).toString(2),c:I=>I+"",d:t.Z,e:(I,R)=>I.toExponential(R),f:(I,R)=>I.toFixed(R),g:(I,R)=>I.toPrecision(R),o:I=>Math.round(I).toString(8),p:(I,R)=>h(100*I,R),r:h,s:function l(I,R){var M=(0,t.V)(I,R);if(!M)return I+"";var F=M[0],Z=M[1],Y=Z-(d=3*Math.max(-8,Math.min(8,Math.floor(Z/3))))+1,U=F.length;return Y===U?F:Y>U?F+new Array(Y-U+1).join("0"):Y>0?F.slice(0,Y)+"."+F.slice(Y):"0."+new Array(1-Y).join("0")+(0,t.V)(I,Math.max(0,R+Y-1))[0]},X:I=>Math.round(I).toString(16).toUpperCase(),x:I=>Math.round(I).toString(16)};function u(I){return I}var m=Array.prototype.map,T=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function L(I){var R=void 0===I.grouping||void 0===I.thousands?u:function x(I,R){return function(M,F){for(var Z=M.length,Y=[],U=0,rt=I[0],q=0;Z>0&&rt>0&&(q+rt+1>F&&(rt=Math.max(1,F-q)),Y.push(M.substring(Z-=rt,Z+rt)),!((q+=rt+1)>F));)rt=I[U=(U+1)%I.length];return Y.reverse().join(R)}}(m.call(I.grouping,Number),I.thousands+""),M=void 0===I.currency?"":I.currency[0]+"",F=void 0===I.currency?"":I.currency[1]+"",Z=void 0===I.decimal?".":I.decimal+"",Y=void 0===I.numerals?u:function _(I){return function(R){return R.replace(/[0-9]/g,function(M){return I[+M]})}}(m.call(I.numerals,String)),U=void 0===I.percent?"%":I.percent+"",rt=void 0===I.minus?"\u2212":I.minus+"",q=void 0===I.nan?"NaN":I.nan+"";function st(X){var W=(X=(0,g.Z)(X)).fill,at=X.align,H=X.sign,Q=X.symbol,nt=X.zero,tt=X.width,V=X.comma,D=X.precision,mt=X.trim,St=X.type;"n"===St?(V=!0,St="g"):f[St]||(void 0===D&&(D=12),mt=!0,St="g"),(nt||"0"===W&&"="===at)&&(nt=!0,W="0",at="=");var Mt="$"===Q?M:"#"===Q&&/[boxX]/.test(St)?"0"+St.toLowerCase():"",Et="$"===Q?F:/[%p]/.test(St)?U:"",jt=f[St],Nt=/[defgprs%]/.test(St);function ft(dt){var re,ce,he,wt=Mt,Bt=Et;if("c"===St)Bt=jt(dt)+Bt,dt="";else{var _e=(dt=+dt)<0||1/dt<0;if(dt=isNaN(dt)?q:jt(Math.abs(dt),D),mt&&(dt=function p(I){t:for(var Z,R=I.length,M=1,F=-1;M<R;++M)switch(I[M]){case".":F=Z=M;break;case"0":0===F&&(F=M),Z=M;break;default:if(!+I[M])break t;F>0&&(F=0)}return F>0?I.slice(0,F)+I.slice(Z+1):I}(dt)),_e&&0==+dt&&"+"!==H&&(_e=!1),wt=(_e?"("===H?H:rt:"-"===H||"("===H?"":H)+wt,Bt=("s"===St?T[8+d/3]:"")+Bt+(_e&&"("===H?")":""),Nt)for(re=-1,ce=dt.length;++re<ce;)if(48>(he=dt.charCodeAt(re))||he>57){Bt=(46===he?Z+dt.slice(re+1):dt.slice(re))+Bt,dt=dt.slice(0,re);break}}V&&!nt&&(dt=R(dt,1/0));var qe=wt.length+dt.length+Bt.length,ke=qe<tt?new Array(tt-qe+1).join(W):"";switch(V&&nt&&(dt=R(ke+dt,ke.length?tt-Bt.length:1/0),ke=""),at){case"<":dt=wt+dt+Bt+ke;break;case"=":dt=wt+ke+dt+Bt;break;case"^":dt=ke.slice(0,qe=ke.length>>1)+wt+dt+Bt+ke.slice(qe);break;default:dt=ke+wt+dt+Bt}return Y(dt)}return D=void 0===D?6:/[gprs]/.test(St)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D)),ft.toString=function(){return X+""},ft}return{format:st,formatPrefix:function K(X,W){var at=st(((X=(0,g.Z)(X)).type="f",X)),H=3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(W)/3))),Q=Math.pow(10,-H),nt=T[8+H/3];return function(tt){return at(Q*tt)+nt}}}}},78986:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(68520);function x(_){return Math.max(0,-(0,c.Z)(Math.abs(_)))}},38914:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(68520);function x(_,g){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(g)/3)))-(0,c.Z)(Math.abs(_)))}},65142:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(68520);function x(_,g){return _=Math.abs(_),g=Math.abs(g)-_,Math.max(0,(0,c.Z)(g)-(0,c.Z)(_))+1}},9921:function(w,E,s){!function(c,x,_,g,p,t,d,l,h,f){"use strict";function u(J){if(J&&J.__esModule)return J;var pt=Object.create(null);return J&&Object.keys(J).forEach(function(gt){if("default"!==gt){var _t=Object.getOwnPropertyDescriptor(J,gt);Object.defineProperty(pt,gt,_t.get?_t:{enumerable:!0,get:function(){return J[gt]}})}}),pt.default=J,Object.freeze(pt)}var Dt,m=u(x);function T(J,pt,gt){return pt in J?Object.defineProperty(J,pt,{value:gt,enumerable:!0,configurable:!0,writable:!0}):J[pt]=gt,J}function L(J){return function I(J){if(Array.isArray(J))return F(J)}(J)||function R(J){if("undefined"!=typeof Symbol&&null!=J[Symbol.iterator]||null!=J["@@iterator"])return Array.from(J)}(J)||function M(J,pt){if(J){if("string"==typeof J)return F(J,pt);var gt=Object.prototype.toString.call(J).slice(8,-1);if("Object"===gt&&J.constructor&&(gt=J.constructor.name),"Map"===gt||"Set"===gt)return Array.from(J);if("Arguments"===gt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gt))return F(J,pt)}}(J)||function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(J,pt){(null==pt||pt>J.length)&&(pt=J.length);for(var gt=0,_t=new Array(pt);gt<pt;gt++)_t[gt]=J[gt];return _t}function Y(J){var pt={},gt=J.node().nodeName;pt.tag=gt,"#text"==gt?pt.text=J.text():"#comment"==gt&&(pt.comment=J.text()),pt.attributes={};var _t=J.node().attributes;if(_t)for(var zt=0;zt<_t.length;zt++){var Wt=_t[zt];pt.attributes[Wt.name]=Wt.value}var Te,O=J.node().transform;if(O&&0!=O.baseVal.numberOfItems){var ie=O.baseVal.consolidate().matrix;pt.translation={x:ie.e,y:ie.f},pt.scale=ie.a}if("ellipse"==gt&&(pt.center={x:pt.attributes.cx,y:pt.attributes.cy}),"polygon"==gt){var ye=(Te=J.attr("points").split(" ")).map(function(mn){return mn.split(",")[0]}),Ke=Te.map(function(mn){return mn.split(",")[1]}),Pe=Math.min.apply(null,ye),Fe=Math.max.apply(null,ye),se=Math.min.apply(null,Ke),de=Math.max.apply(null,Ke);pt.bbox={x:Pe,y:se,width:Fe-Pe,height:de-se},pt.center={x:(Pe+Fe)/2,y:(se+de)/2}}return"path"==gt&&((Te=J.attr("d").split(/[A-Z ]/)).shift(),ye=Te.map(function(le){return+le.split(",")[0]}),Ke=Te.map(function(le){return+le.split(",")[1]}),Pe=Math.min.apply(null,ye),Fe=Math.max.apply(null,ye),se=Math.min.apply(null,Ke),de=Math.max.apply(null,Ke),pt.bbox={x:Pe,y:se,width:Fe-Pe,height:de-se},pt.center={x:(Pe+Fe)/2,y:(se+de)/2},pt.totalLength=J.node().getTotalLength()),"text"==gt&&(pt.center={x:J.attr("x"),y:J.attr("y")}),"#text"==gt?pt.text=J.text():"#comment"==gt&&(pt.comment=J.text()),pt}function U(J){var pt=Y(J);return pt.children=[],m.selectAll(J.node().childNodes).each(function(){var _t=U(m.select(this));_t.parent=pt,pt.children.push(_t)}),pt}function rt(J){return"#text"==J.tag?document.createTextNode(""):"#comment"==J.tag?document.createComment(J.comment):document.createElementNS("http://www.w3.org/2000/svg",J.tag)}function q(J){for(var pt=rt(J),gt=m.select(pt),_t=J.attributes,zt=0,Wt=Object.keys(_t);zt<Wt.length;zt++){var Lt=Wt[zt];gt.attr(Lt,_t[Lt])}return pt}function st(J,pt){var gt=m.select(J.node().parentNode),_t=q(pt),zt=gt.insert(function(){return _t},function(){return J.node()});return J.remove(),zt}function X(J,pt){(function K(J,pt){J.datum(pt),J.data([pt],function(gt){return gt.key})})(J,pt),m.selectAll(J.node().childNodes).each(function(_t,zt){X(m.select(this),pt.children[zt])})}function W(J,pt){var gt=J.selectAll(function(){return J.node().childNodes}),_t=(gt=gt.data(function(Lt){return Lt.children},function(Lt){return Lt.tag+"-"+pt})).enter().append(function(Lt){return rt(Lt)}),zt=gt.exit();zt=zt.remove(),gt=_t.merge(gt);var Wt={};gt.each(function(Lt){var ae=Lt.tag;null==Wt[ae]&&(Wt[ae]=0);var O=Wt[ae]++;at.call(this,Lt,O)})}function at(J){var pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,gt=m.select(this),_t=J.attributes,zt=gt.node().attributes;if(zt)for(var Wt=0;Wt<zt.length;Wt++){var Lt=zt[Wt],ae=Lt.name;if("xmlns"!=ae.split(":")[0]&&Lt.namespaceURI){var O=Lt.namespaceURI.split("/");ae=O[O.length-1]+":"+ae}ae in _t||(_t[ae]=null)}for(var Te=0,ye=Object.keys(_t);Te<ye.length;Te++){var Ke=ye[Te];gt.attr(Ke,_t[Ke])}J.text&&gt.text(J.text),W(gt,pt)}function H(J){return Object.assign({},J)}function Q(J){return Math.round(100*J)/100}function tt(){var J=this;var _t=m.select(this._selection.node().querySelector("svg"));if(0==_t.size())return this;this._zoomSelection=_t;var zt=d.zoom().scaleExtent(this._options.zoomScaleExtent).translateExtent(this._options.zoomTranslateExtent).interpolate(t.interpolate).on("zoom",function pt(Lt){m.select(_t.node().querySelector("g")).attr("transform",Lt.transform),J._dispatch.call("zoom",J)});this._zoomBehavior=zt;var Wt=m.select(_t.node().querySelector("g"));return _t.call(zt),this._active||D.call(this,Wt),this._originalTransform=d.zoomTransform(_t.node()),this}function V(J){var pt=this._translation,gt=this._scale,_t=J.datum().translation,zt=J.datum().scale,Wt=d.zoomTransform(this._zoomSelection.node());return pt&&(Wt=(Wt=Wt.scale(1/gt)).translate(-pt.x,-pt.y)),(Wt=Wt.translate(_t.x,_t.y)).scale(zt)}function D(J){this._zoomBehavior.transform(this._zoomSelection,V.call(this,J)),this._translation=J.datum().translation,this._scale=J.datum().scale,this._originalTransform=d.zoomIdentity.translate(J.datum().translation.x,J.datum().translation.y).scale(J.datum().scale)}function Nt(J,pt){return function(){var gt=J.map(function(_t){return t.interpolate([_t[0][0],_t[0][1]],[_t[1][0],_t[1][1]])});return function(_t){return _t<1?"M"+gt.map(function(zt){return zt(_t)}).join("L"):pt}}}function wt(J){return"edge"==J.attributes.class||"a"==J.tag&&"g"==J.parent.tag&&"edge"==J.parent.parent.attributes.class}function Bt(J){return J.parent&&wt(J.parent)}function _e(J){var pt=this._transition,gt=this._options.fade&&null!=pt,_t=this._options.tweenPaths,zt=this._options.tweenShapes,Wt=this._options.convertEqualSidedPolygons,Lt=this._options.growEnteringEdges&&null!=pt,ae=this._attributer,O=this;function Te(se){var de=m.select(this);if("svg"==se.tag){var Re=O._options;if(null!=Re.width||null!=Re.height){var fn=Re.width,mn=Re.height;null==fn?fn=4*se.attributes.width.replace("pt","")/3:(de.attr("width",fn),se.attributes.width=fn),null==mn?mn=4*se.attributes.height.replace("pt","")/3:(de.attr("height",mn),se.attributes.height=mn),Re.fit||(de.attr("viewBox","0 0 ".concat(3*fn/4/Re.scale," ").concat(3*mn/4/Re.scale)),se.attributes.viewBox="0 0 ".concat(3*fn/4/Re.scale," ").concat(3*mn/4/Re.scale))}1!=Re.scale&&(Re.fit||null==Re.width&&null==Re.height)&&(fn=se.attributes.viewBox.split(" ")[2],mn=se.attributes.viewBox.split(" ")[3],de.attr("viewBox","0 0 ".concat(fn/Re.scale," ").concat(mn/Re.scale)),se.attributes.viewBox="0 0 ".concat(fn/Re.scale," ").concat(mn/Re.scale))}ae&&de.each(ae);var je=se.tag,We=se.attributes,wn=de.node().attributes;if(wn)for(var Rn=0;Rn<wn.length;Rn++){var Zn=wn[Rn],zn=Zn.name;if("xmlns"!=zn.split(":")[0]&&Zn.namespaceURI){var Ri=Zn.namespaceURI.split("/");zn=Ri[Ri.length-1]+":"+zn}zn in We||(We[zn]=null)}var Xe=!1,_n=!1;if(zt&&pt){if(("polygon"==this.nodeName||"ellipse"==this.nodeName)&&se.alternativeOld&&(_n=!0),("polygon"==je||"ellipse"==je)&&se.alternativeNew&&(Xe=!0),"polygon"==this.nodeName&&"polygon"==je&&se.alternativeOld){var Tn=Y(de);if(!Wt){var oi=Tn.attributes.points.split(" ").length;(_i=se.attributes.points).split(" ").length==oi&&(Xe=!1,_n=!1)}}if(_n){var jn=st(de,se.alternativeOld);jn.data([se],function(){return se.key}),de=jn}Xe&&(je="path",We=se.alternativeNew.attributes)}var gn=de;if(pt&&(gn=gn.transition(pt),gt&&gn.filter(function(ut){return"#"==ut.tag[0]?null:this}).style("opacity",1),gn.filter(function(ut){return"#"==ut.tag[0]?null:this}).on("end",function(ut){m.select(this).attr("style",ut&&ut.attributes&&ut.attributes.style||null)})),Lt&&"path"==je&&se.offset){var li=se.totalLength;de.attr("stroke-dasharray",li+" "+li).attr("stroke-dashoffset",li).attr("transform","translate("+se.offset.x+","+se.offset.y+")"),We["stroke-dashoffset"]=0,We.transform="translate(0,0)",gn.attr("stroke-dashoffset",We["stroke-dashoffset"]).attr("transform",We.transform).on("start",function(){m.select(this).style("opacity",null)}).on("end",function(){m.select(this).attr("stroke-dashoffset",null).attr("stroke-dasharray",null).attr("transform",null)})}if(Lt&&"polygon"==je&&Bt(se)&&se.offset&&"path"==se.parent.children[3].tag){var ci=m.select(de.node().parentNode.querySelector("path")),zi=ci.node().getPointAtLength(0),Mn=ci.node().getPointAtLength(se.totalLength),Ti=ci.node().getPointAtLength(se.totalLength-1),cn=180*Math.atan2(Mn.y-Ti.y,Mn.x-Ti.x)/Math.PI,Zi=zi.x-Mn.x+se.offset.x,Qe=zi.y-Mn.y+se.offset.y;de.attr("transform","translate("+Zi+","+Qe+")"),gn.attrTween("transform",function(){return function(ut){var yt=ci.node().getPointAtLength(se.totalLength*ut),Ot=ci.node().getPointAtLength(se.totalLength*ut+1),Zt=180*Math.atan2(Ot.y-yt.y,Ot.x-yt.x)/Math.PI-cn;return"translate("+(Zi=yt.x-Mn.x+se.offset.x*(1-ut))+","+(Qe=yt.y-Mn.y+se.offset.y*(1-ut))+") rotate("+Zt+" "+Mn.x+" "+Mn.y+")"}}).on("start",function(){m.select(this).style("opacity",null)}).on("end",function(){m.select(this).attr("transform",null)})}for(var Qn=_t&&pt&&"path"==je&&null!=de.attr("d"),In=0,b=Object.keys(We);In<b.length;In++){var k=b[In],B=We[k];if(Qn&&"d"==k){var _i;(_i=(se.alternativeOld||se).points)&&gn.attrTween("d",Nt(_i,B))}else{if("transform"==k&&se.translation)if(pt){var it=gn.on("end");gn.on("start",function(){O._zoomBehavior&&gn.tween("attr.transform",function(){var ut=this;return function(yt){ut.setAttribute("transform",t.interpolateTransformSvg(d.zoomTransform(O._zoomSelection.node()).toString(),V.call(O,de).toString())(yt))}})}).on("end",function(){it.call(this),O._zoomBehavior&&D.call(O,de)})}else O._zoomBehavior&&(D.call(O,de),B=V.call(O,de).toString());gn.attr(k,B)}}Xe&&gn.on("end",function(ut,yt,Ot){st(jn=m.select(this),ut).data([ut],function(){return ut.key})}),se.text&&gn.text(se.text),function ie(se){var de=se.selectAll(function(){return se.node().childNodes}),Re=(de=de.data(function(je){return je.children},function(je){return je.key})).enter().append(function(je){var We=rt(je);return"#text"==je.tag&&gt&&(We.nodeValue=je.text),We});(gt||Lt&&wt(se.datum()))&&Re.filter(function(je){return"#"==je.tag[0]?null:this}).each(function(je){for(var We=m.select(this),wn=0,Rn=Object.keys(je.attributes);wn<Rn.length;wn++){var Zn=Rn[wn];We.attr(Zn,je.attributes[Zn])}}).filter(function(je){return"svg"==je.tag||"g"==je.tag?null:this}).style("opacity",0);var mn=de.exit();ae&&mn.each(ae),pt&&(mn=mn.transition(pt),gt&&mn.filter(function(je){return"#"==je.tag[0]?null:this}).style("opacity",0)),mn=mn.remove(),(de=Re.merge(de)).each(Te)}(de)}var ye=this._selection;if(null!=pt){var Ke=this._jobs;if(O._active)return Ke.push(null),this;ye.transition(pt).transition().duration(0).on("end",function(){O._active=!1,0!=Ke.length&&(Ke.shift(),O.render())}),this._active=!0}null!=pt&&ye.transition(pt).on("start",function(){O._dispatch.call("transitionStart",O)}).on("end",function(){O._dispatch.call("transitionEnd",O)}).transition().duration(0).on("start",function(){O._dispatch.call("restoreEnd",O),O._dispatch.call("end",O),J&&J.call(O)});var Pe=this._data,Fe=ye.selectAll("svg").data([Pe],function(se){return se.key});return Fe=Fe.enter().append("svg").merge(Fe),Te.call(Fe.node(),Pe),this._options.zoom&&!this._zoomBehavior&&tt.call(this),O._dispatch.call("renderEnd",O),null==pt&&(this._dispatch.call("end",this),J&&J.call(this)),this}function ke(J,pt){if("polygon"==J.tag){(gt=H(J)).tag="path";var zt=H(_t=J.attributes),Wt=_t.points;if("polygon"==pt.tag){(Lt=J.bbox).cx=Lt.x+Lt.width/2,Lt.cy=Lt.y+Lt.height/2;for(var O=_t.points.split(" "),ie=O.map(function(Tn){var Xn=Tn.split(",");return[Xn[0]-Lt.cx,Xn[1]-Lt.cy]}),Te=ie[ie.length-1][0],ye=ie[ie.length-1][1],Ke=0;Ke<ie.length;Ke++,Te=Pe,ye=Fe){var se=(Pe=ie[Ke][0])-Te;if(0!=(de=(Fe=ie[Ke][1])-ye)&&0<=(Re=Te-ye*se/de)&&Re<1/0&&(Te<=Re&&Re<=Pe||Pe<=Re&&Re<=Te))break}var fn=[[Lt.cx+Re,Lt.cy+0].join(",")];Wt=(fn=(fn=fn.concat(O.slice(Ke))).concat(O.slice(0,Ke))).join(" ")}zt.d="M"+Wt+"z",delete zt.points,gt.attributes=zt}else{var gt;(gt=H(J)).tag="path",zt=H(_t=J.attributes);var _t,Pe,Fe,Re,mn=_t.cx,je=_t.cy,We=_t.rx,wn=_t.ry;if("polygon"==pt.tag){var Lt;(Lt=pt.bbox).cx=Lt.x+Lt.width/2,Lt.cy=Lt.y+Lt.height/2;var Rn=pt.attributes.points.split(" ")[0].split(","),de=(se=Rn[0]-Lt.cx,Rn[1]-Lt.cy),Ri=Math.sqrt(Math.pow(se,2)+Math.pow(de,2)),le=se/Ri,Xe=-de/Ri}else le=1,Xe=0;zt.d="M "+mn+" "+je+" m "+(Pe=We*le)+","+(Fe=-wn*Xe)+" a "+We+","+wn+" 0 1,0 "+(se=(Re=We*-le)-Pe)+","+(de=-wn*-Xe-Fe)+" a "+We+","+wn+" 0 1,0 "+-se+","+-de+"z",delete zt.cx,delete zt.cy,delete zt.rx,delete zt.ry,gt.attributes=zt}return gt}function Ut(){var J=this;try{l.graphviz.layout("","svg","dot").then(function(){l.graphvizSync().then(function(_t){J.layoutSync=_t.layout.bind(_t),null==J._worker&&J._dispatch.call("initEnd",J),J._afterInit&&J._afterInit()})})}catch(_t){}if(null!=this._worker){var pt=this._vizURL,gt=this;this._workerPort.onmessage=function(_t){gt._workerCallbacks.shift().call(gt,_t)},pt.match(/^https?:\/\/|^\/\//i)||(pt=new window.URL(pt,document.location.href).href),Jt.call(this,{type:"layout",dot:"",engine:"dot",vizURL:pt},function(_t){}),Jt.call(this,{type:"version"},function(_t){"version"===_t.data.type&&(gt._graphvizVersion=_t.data.version,gt._dispatch.call("initEnd",this))})}}function Jt(J,pt){this._workerCallbacks.push(pt),this._workerPort.postMessage(J)}function Se(J,pt){var gt=this._options.keyMode,_t=this._options.tweenPaths,zt=this._options.tweenShapes;if("string"==typeof this._options.tweenPrecision&&this._options.tweenPrecision.includes("%"))var Wt=+this._options.tweenPrecision.split("%")[0]/100,Lt=this._options.tweenPrecision.includes("%");else Wt=this._options.tweenPrecision,Lt=!1;var ae=this._options.growEnteringEdges,O={},ie=this._dictionary||{},Te={},ye=this._nodeDictionary||{};function Ke(le,Xe){var _n=le.tag;if("index"==gt)le.key=Xe;else if("#"!=_n[0])if("id"==gt)le.key=le.attributes.id;else if("title"==gt){var Tn=le.children.find(function(Xn){return"title"==Xn.tag});Tn&&(le.key=Tn.children.length>0?Tn.children[0].text:"")}null==le.key&&(zt&&("ellipse"==_n||"polygon"==_n)&&(_n="path"),le.key=_n+"-"+Xe)}function Pe(le,Xe){le.id=(Xe?Xe.id+".":"")+le.key}function Fe(le){O[le.id]=le}function se(le,Xe){zt&&le.id in ie&&("polygon"==Xe.tag||"ellipse"==Xe.tag||"path"==Xe.tag)&&(Xe.tag!=le.tag||"polygon"==le.tag)&&("path"!=Xe.tag&&(le.alternativeOld=ke(Xe,le)),"path"!=le.tag&&(le.alternativeNew=ke(le,Xe)))}function de(le,Xe){if(_t&&Xe&&("path"==Xe.tag||le.alternativeOld&&"path"==le.alternativeOld.tag)){var _n=(le.alternativeNew||le).attributes.d;if(le.alternativeOld)var Tn=q(le.alternativeOld);else Tn=q(Xe);(le.alternativeOld||(le.alternativeOld={})).points=function ft(J,pt,gt,_t){for(var zt=J,Wt=zt.cloneNode(),Lt=zt.getTotalLength(),ae=(Wt.setAttribute("d",pt),Wt).getTotalLength(),O=[0],ie=0,Te=_t?gt:gt/Math.max(Lt,ae);(ie+=Te)<1;)O.push(ie);return O.push(1),O.map(function(Ke){var Pe=zt.getPointAtLength(Ke*Lt),Fe=Wt.getPointAtLength(Ke*ae);return[[Pe.x,Pe.y],[Fe.x,Fe.y]]})}(Tn,_n,Wt,Lt)}}function Re(le){var _n=arguments.length>2?arguments[2]:void 0;Ke(le,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),Pe(le,_n);var Xn=ie[le.id];Fe(le),se(le,Xn),de(le,Xn);var oi={};le.children.forEach(function(_i){var $n=_i.tag;("ellipse"==$n||"polygon"==$n)&&($n="path"),null==oi[$n]&&(oi[$n]=0),Re(_i,oi[$n]++,le)})}function je(le){(function fn(le){if(ae&&le.parent&&"node"==le.parent.attributes.class&&"title"==le.tag){if(le.children.length>0)var Tn=le.children[0].text;else Tn="";Te[Tn]=le.parent}})(le),function mn(le){var _n=le.tag;if(ae&&!ie[le.id]&&le.parent&&Bt(le)&&("path"==_n||"polygon"==_n)){if("polygon"==_n){var Xn=le.parent.children.find(function(Mn){return"path"==Mn.tag});Xn&&(le.totalLength=Xn.totalLength)}var _i=function ce(J){return function re(J){return"edge"==J.parent.attributes.class?J.parent:J.parent.parent.parent}(J).children.find(function(pt){return"title"==pt.tag})}(le).children[0],$n=_i.text.split("->");2!=$n.length&&($n=_i.text.split("--"));var Li=$n[0],jn=Te[Li],bi=ye[Li];if(bi){if((hn=jn.children.findIndex(function(Mn,Ti){return"g"==Mn.tag}))>=0){var gn=jn.children[hn].children.findIndex(function(Mn,Ti){return"a"==Mn.tag});jn=jn.children[hn].children[gn]}(hn=bi.children.findIndex(function(Mn,Ti){return"g"==Mn.tag}))>=0&&(gn=bi.children[hn].children.findIndex(function(Ti,cn){return"a"==Ti.tag}),bi=bi.children[hn].children[gn]);for(var li=jn.children,hn=0;hn<li.length;hn++)if("polygon"==li[hn].tag||"ellipse"==li[hn].tag||"path"==li[hn].tag||"text"==li[hn].tag){var Ji=li[hn];break}var ci=bi.children;for(hn=0;hn<ci.length;hn++)if("polygon"==ci[hn].tag||"ellipse"==ci[hn].tag||"path"==ci[hn].tag||"text"==ci[hn].tag){var zi=ci[hn];break}le.offset=zi&&Ji?{x:zi.center.x-Ji.center.x,y:zi.center.y-Ji.center.y}:{x:0,y:0}}}}(le),le.children.forEach(function(Xe){je(Xe)})}this._dispatch.call("layoutEnd",this);var We=m.select(document.createDocumentFragment()).append("div"),Rn=(new window.DOMParser).parseFromString(J,"image/svg+xml");We.append(function(){return Rn.documentElement});var zn=U(We.select("svg"));this._dispatch.call("dataExtractEnd",this),Re(zn),this._dispatch.call("dataProcessPass1End",this),je(zn),this._dispatch.call("dataProcessPass2End",this),this._data=zn,this._dictionary=O,this._nodeDictionary=Te,this._extractData=function(le,Xe,_n){var Tn=U(le);return Re(Tn,Xe,_n),je(Tn),Tn},this._busy=!1,this._dispatch.call("dataProcessEnd",this),pt&&pt.call(this),this._queue.length>0&&this._queue.shift().call(this)}function Fi(J,pt,gt,_t){var zt=[J*gt-(pt=-pt)*(_t=-_t),J*_t+pt*gt];return[J=zt[0],pt=-(pt=zt[1])]}function Ee(J,pt,gt,_t,zt,Wt,Lt){var O=U(ln.call(this,Wt));J.data([O]),at.call(J.node(),O),tn(J,pt,gt,_t,zt,Wt,Lt)}function tn(J,pt,gt,_t,zt,Wt,Lt){var ae=Lt.shortening||0,ye=[[0,-3.5],[10,0],[0,3.5],[0,-3.5]],Ke=_t-pt,Pe=zt-gt,Fe=Math.sqrt(Ke*Ke+Pe*Pe);if(0==Fe)var se=1,de=0;else se=Ke/Fe,de=Pe/Fe;if(_t=pt+(Fe-ae-10-.1)*se,zt=gt+(Fe-ae-10-.1)*de,Wt.URL||Wt.tooltip)var Re=J.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a"),fn=Re.selectWithoutDataPropagation("path"),mn=Re.selectWithoutDataPropagation("polygon");else fn=J.selectWithoutDataPropagation("path"),mn=J.selectWithoutDataPropagation("polygon");var je=f.path();je.moveTo(pt,gt),je.lineTo(_t,zt),fn.attr("d",je),_t=pt+(Fe-ae-10)*se,zt=gt+(Fe-ae-10)*de;for(var We=0;We<ye.length;We++)ye[We]=Fi((wn=ye[We])[0],wn[1],se,de);for(We=0;We<ye.length;We++)ye[We]=[_t+(wn=ye[We])[0],zt+wn[1]];var Rn=[];for(We=0;We<ye.length;We++){var wn;Rn.push((wn=ye[We]).join(","))}var Zn=Rn.join(" ");return mn.attr("points",Zn),this}function Qi(){return this._drawnEdge?(this._drawnEdge.g.remove(),this._drawnEdge=null,this):this}function $e(){return this._drawnEdge?this._drawnEdge.g:m.select(null)}function ln(J){for(var pt="",gt=0,_t=Object.keys(J);gt<_t.length;gt++){var zt=_t[gt];null!=J[zt]&&(pt+=' "'+zt+'"="'+J[zt]+'"')}var Lt=this.layoutSync("digraph {a -> b ["+pt+"]}","svg","dot"),O=(new window.DOMParser).parseFromString(Lt,"image/svg+xml");return m.select(document.createDocumentFragment()).append(function(){return O.documentElement}).select(".edge")}function Dn(J,pt,gt,_t,zt,Wt){var ae=U($.call(this,_t,zt));return J.data([ae]),at.call(J.node(),ae),be(J,pt,gt,zt),this}function be(J,pt,gt,_t,zt){if(_t.URL||_t.tooltip)var Wt=J.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");else Wt=J;var Lt=Wt.selectAll("ellipse,polygon,path,polyline"),ae=J.selectWithoutDataPropagation("text");if(0!=Lt.size()){var O=Lt.node().getBBox();O.cx=O.x+O.width/2,O.cy=O.y+O.height/2}else 0!=ae.size()&&(O={x:+ae.attr("x"),y:+ae.attr("y"),width:0,height:0,cx:+ae.attr("x"),cy:+ae.attr("y")});return Lt.each(function(ie,Te){var ye=m.select(this);if(ye.attr("cx"))ye.attr("cx",Q(pt)).attr("cy",Q(gt));else if(ye.attr("points")){var Ke=ye.attr("points").trim();ye.attr("points",function It(Wt,pt,gt){var zt,_t=(zt=Wt.split(" ")).map(function(Lt){return Lt.split(",")});return _t=zt.map(function(Lt){return[Q(+pt+ +Lt.split(",")[0]),Q(+gt+ +Lt.split(",")[1])]}),(zt=_t.map(function(Lt){return Lt.join(",")})).join(" ")}(Ke,pt-O.cx,gt-O.cy))}else{var Pe=ye.attr("d");ye.attr("d",function $t(J,pt,gt){(Wt=J.split(/[A-Z ]/)).shift();var _t=J.split(/[^[A-Z ]+/),Wt=(Wt.map(function(Lt){return Lt.split(",")}),Wt.map(function(Lt){return[Q(+pt+ +Lt.split(",")[0]),Q(+gt+ +Lt.split(",")[1])]}).map(function(Lt){return Lt.join(",")}));return _t.reduce(function(Lt,ae,O){return Lt.concat(ae,Wt[O])},[]).join("")}(Pe,pt-O.cx,gt-O.cy))}}),0!=ae.size()&&ae.attr("x",Q(+ae.attr("x")+pt-O.cx)).attr("y",Q(+ae.attr("y")+gt-O.cy)),this}function Vn(){if(!this._drawnNode)return this;var J=this._drawnNode.g;return J.empty()||J.remove(),this._drawnNode=null,this}function z(){return this._drawnNode?this._drawnNode.g:m.select(null)}function $(J,pt){for(var gt="",_t=0,zt=Object.keys(pt);_t<zt.length;_t++){var Wt=zt[_t];null!=pt[Wt]&&(gt+=' "'+Wt+'"="'+pt[Wt]+'"')}var ae=this.layoutSync('graph {"'+J+'" ['+gt+"]}","svg","dot"),ie=(new window.DOMParser).parseFromString(ae,"image/svg+xml");return m.select(document.createDocumentFragment()).append(function(){return ie.documentElement}).select(".node")}function ct(J){self.document={},J.addEventListener("message",function(pt){var gt=self["@hpcc-js/wasm"];null==gt&&pt.data.vizURL&&(importScripts(pt.data.vizURL),(gt=self["@hpcc-js/wasm"]).wasmFolder(pt.data.vizURL.match(/.*\//)[0])),"version"!=pt.data.type?gt.graphviz.layout(pt.data.dot,"svg",pt.data.engine,pt.data.options).then(function(_t){J.postMessage(_t?{type:"done",svg:_t}:pt.data.vizURL?{type:"init"}:{type:"skip"})}).catch(function(_t){J.postMessage({type:"error",error:_t.message})}):gt.graphvizVersion().then(function(_t){J.postMessage({type:"version",version:_t})})})}function A(){ct(self)}function bt(){self.onconnect=function(J){var pt=J.ports[0];ct(pt),pt.start()}}function Pt(J,pt){var gt=this;if(this._options={useWorker:!0,useSharedWorker:!1,engine:"dot",keyMode:"title",fade:!0,tweenPaths:!0,tweenShapes:!0,convertEqualSidedPolygons:!0,tweenPrecision:1,growEnteringEdges:!0,zoom:!0,zoomScaleExtent:[.1,10],zoomTranslateExtent:[[-1/0,-1/0],[1/0,1/0]],width:null,height:null,scale:1,fit:!1},pt instanceof Object)for(var _t=0,zt=Object.keys(pt);_t<zt.length;_t++){var Wt=zt[_t];this._options[Wt]=pt[Wt]}else"boolean"==typeof pt&&(this._options.useWorker=pt);var Lt=this._options.useWorker,ae=this._options.useSharedWorker;if("undefined"==typeof Worker&&(Lt=!1),"undefined"==typeof SharedWorker&&(ae=!1),Lt||ae){var ie=m.selectAll("script").filter(function(){return"javascript/worker"==m.select(this).attr("type")||m.select(this).attr("src")&&m.select(this).attr("src").match(/.*\/@hpcc-js\/wasm/)});0==ie.size()?(console.warn('No script tag of type "javascript/worker" was found and "useWorker" is true. Not using web worker.'),Lt=!1,ae=!1):(this._vizURL=ie.attr("src"),this._vizURL||(console.warn('No "src" attribute of was found on the "javascript/worker" script tag and "useWorker" is true. Not using web worker.'),Lt=!1,ae=!1))}if(ae){var Te="data:application/javascript;base64,"+btoa(ct.toString()+"("+bt.toString()+")()");this._worker=this._worker=new SharedWorker(Te),this._workerPort=this._worker.port,this._workerPortClose=this._worker.port.close.bind(this._workerPort),this._worker.port.start(),this._workerCallbacks=[]}else if(Lt){var ye=new Blob([ct.toString()+"("+A.toString()+")()"]),Ke=window.URL.createObjectURL(ye);this._worker=new Worker(Ke),this._workerPort=this._worker,this._workerPortClose=this._worker.terminate.bind(this._worker),this._workerCallbacks=[]}else l.graphvizVersion().then(function(Pe){gt._graphvizVersion=Pe}.bind(this));this._selection=J,this._active=!1,this._busy=!1,this._jobs=[],this._queue=[],this._keyModes=new Set(["title","id","tag-index","index"]),this._images=[],this._translation=void 0,this._scale=void 0,this._eventTypes=["initEnd","start","layoutStart","layoutEnd","dataExtractEnd","dataProcessPass1End","dataProcessPass2End","dataProcessEnd","renderStart","renderEnd","transitionStart","transitionEnd","restoreEnd","end","zoom"],this._dispatch=_.dispatch.apply(void 0,L(this._eventTypes)),Ut.call(this),J.node().__graphviz__=this}function Vt(J,pt){return m.select(J).graphviz(pt)}Pt.prototype=Vt.prototype=(T(Dt={constructor:Pt,engine:function oe(J){return this._options.engine=J,this},addImage:function fe(J,pt,gt){return this._images.push({path:J,width:pt,height:gt}),this},keyMode:function qt(J){if(!this._keyModes.has(J))throw Error("Illegal keyMode: "+J);if(J!=this._options.keyMode&&null!=this._data)throw Error("Too late to change keyMode");return this._options.keyMode=J,this},fade:function Ue(J){return this._options.fade=J,this},tweenPaths:function Ye(J){return this._options.tweenPaths=J,this},tweenShapes:function bn(J){return this._options.tweenShapes=J,J&&(this._options.tweenPaths=!0),this},convertEqualSidedPolygons:function si(J){return this._options.convertEqualSidedPolygons=J,this},tweenPrecision:function Pi(J){return this._options.tweenPrecision=J,this},growEnteringEdges:function pi(J){return this._options.growEnteringEdges=J,this},zoom:function nt(J){return this._options.zoom=J,this._options.zoom&&!this._zoomBehavior?tt.call(this):!this._options.zoom&&this._zoomBehavior&&(this._zoomSelection.on(".zoom",null),this._zoomBehavior=null),this},resetZoom:function mt(J){var pt=this._zoomSelection;return J&&(pt=pt.transition(J)),pt.call(this._zoomBehavior.transform,this._originalTransform),this},zoomBehavior:function Et(){return this._zoomBehavior||null},zoomSelection:function jt(){return this._zoomSelection||null},zoomScaleExtent:function St(J){return this._options.zoomScaleExtent=J,this},zoomTranslateExtent:function Mt(J){return this._options.zoomTranslateExtent=J,this},render:function he(J){return this._busy?(this._queue.push(this.render.bind(this,J)),this):(this._dispatch.call("renderStart",this),this._transitionFactory?p.timeout(function(){this._transition=g.transition(this._transitionFactory()),_e.call(this,J)}.bind(this),0):_e.call(this,J),this)},layout:function ue(J,pt,gt,_t){if(this._worker)Jt.call(this,{type:"layout",dot:J,engine:pt,options:gt},function(Wt){_t.call(this,Wt.data)});else try{var zt=this.layoutSync(J,"svg",pt,gt);_t.call(this,{type:"done",svg:zt})}catch(Wt){_t.call(this,{type:"error",error:Wt.message})}},dot:function ve(J,pt){var gt=this,_t=this._options.engine,zt=this._images;return this._dispatch.call("start",this),this._busy=!0,this._dispatch.call("layoutStart",this),this._worker||null!=this.layoutSync?(this.layout(J,_t,{images:zt},function(Lt){switch(Lt.type){case"error":if(!gt._onerror)throw Lt.error.message;gt._onerror(Lt.error);break;case"done":Se.call(this,Lt.svg,pt)}}),this):(this._afterInit=this.dot.bind(this,J,pt),this)},data:function dt(){return this._data||null},renderDot:function Ie(J,pt){var gt=this;return this.dot(J,function _t(){gt.render(pt)}),this},transition:function Ce(J){return J instanceof Function?this._transitionFactory=J:this._transition=g.transition(J),this},active:function Ve(J){var gt=this._selection.selectWithoutDataPropagation("svg");return 0!=gt.size()?g.active(gt.node(),J):null},options:function Ge(J){if(void 0===J)return Object.assign({},this._options);for(var pt=0,gt=Object.keys(J);pt<gt.length;pt++){var _t=gt[pt];this._options[_t]=J[_t]}return this},width:function an(J){return this._options.width=J,this},height:function xe(J){return this._options.height=J,this},scale:function Cn(J){return this._options.scale=J,this},fit:function Tt(J){return this._options.fit=J,this},attributer:function Yt(J){return this._attributer=J,this},on:function fi(J,pt){return this._dispatch.on(J,pt),this},onerror:function Ei(J){return this._onerror=J,this},logEvents:function er(J){for(var pt=this,gt=Date.now(),_t={},zt=this._eventTypes,Wt=Math.max.apply(Math,L(zt.map(function(ye){return ye.length}))),Lt=function(Ke){var Pe=zt[Ke];_t[Pe]=[],O=pt,pt.on(Pe+".log",J?function(){var Fe=Date.now(),se=_t[Pe].length;_t[Pe].push(Fe);var de="";if(de+="Event ",de+=h.format(" >2")(Ke)+" ",de+=Pe+" ".repeat(Wt-Pe.length),de+=h.format(" >5")(Fe-gt)+" ","initEnd"!=Pe&&(de+=h.format(" >5")(Fe-_t.start[se])),"dataProcessEnd"==Pe&&(de+=" prepare                 "+h.format(" >5")(Fe-_t.layoutEnd[se])),"renderEnd"==Pe&&O._transition&&(de+=" transition start margin "+h.format(" >5")(O._transition.delay()-(Fe-_t.renderStart[se])),ie=O._transition.delay(),Te=O._transition.duration()),"transitionStart"==Pe){var Re=Fe-_t.renderStart[se];de+=" transition delay        "+h.format(" >5")(Fe-_t.renderStart[se]),de+=" expected "+h.format(" >5")(ie),de+=" diff "+h.format(" >5")(Re-ie)}if("transitionEnd"==Pe){var fn=Fe-_t.transitionStart[se];de+=" transition duration     "+h.format(" >5")(fn),de+=" expected "+h.format(" >5")(Te),de+=" diff "+h.format(" >5")(fn-Te)}console.log(de),gt=Fe}:null)},ae=0;ae<zt.length;ae++){var O,ie,Te;Lt(ae)}return this},destroy:function Bi(){return delete this._selection.node().__graphviz__,this._worker&&this._workerPortClose(),this},drawEdge:function mi(J,pt,gt,_t,zt){var Wt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if((zt=Object.assign({},zt)).style&&zt.style.includes("invis"))var Lt=m.select(null);else{var ie=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),ye=U(ln.call(this,zt));Lt=ie.append("g").data([ye]),at.call(Lt.node(),ye),Ee.call(this,Lt,J,pt,gt,_t,zt,Wt)}return this._drawnEdge={g:Lt,x1:J,y1:pt,x2:gt,y2:_t,attributes:zt},this},updateDrawnEdge:function ji(J,pt,gt,_t){var zt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},Wt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var Lt=this._drawnEdge.g;return zt=Object.assign(this._drawnEdge.attributes,zt),this._drawnEdge.x1=J,this._drawnEdge.y1=pt,this._drawnEdge.x2=gt,this._drawnEdge.y2=_t,!Lt.empty()||zt.style&&zt.style.includes("invis")||(Lt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnEdge.g=Lt),Lt.empty()||Ee.call(this,Lt,J,pt,gt,_t,zt,Wt),this},moveDrawnEdgeEndPoint:function yi(J,pt){var gt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var _t=this._drawnEdge.g,zt=this._drawnEdge.x1,Wt=this._drawnEdge.y1,Lt=this._drawnEdge.attributes;return this._drawnEdge.x2=J,this._drawnEdge.y2=pt,tn(_t,zt,Wt,J,pt,Lt,gt),this},insertDrawnEdge:function On(J){if(!this._drawnEdge)throw Error("No edge has been drawn");var pt=this._drawnEdge.g;if(pt.empty())return this;pt.selectWithoutDataPropagation("title").text(J);var Wt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Lt=Wt.datum(),ae=this._extractData(pt,Lt.children.length,Wt.datum());return Lt.children.push(ae),X(pt,ae),this._drawnEdge=null,this},removeDrawnEdge:Qi},"removeDrawnEdge",Qi),T(Dt,"drawnEdgeSelection",$e),T(Dt,"drawnEdgeSelection",$e),T(Dt,"drawNode",function En(J,pt,gt){var _t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},zt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((_t=Object.assign({},_t)).style&&_t.style.includes("invis"))var Wt=m.select(null);else{var O=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Te=U($.call(this,gt,_t));Wt=O.append("g").data([Te]),at.call(Wt.node(),Te),Dn.call(this,Wt,J,pt,gt,_t,zt)}return this._drawnNode={g:Wt,nodeId:gt,x:J,y:pt,attributes:_t},this}),T(Dt,"updateDrawnNode",function gi(J,pt,gt){var _t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},zt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._drawnNode)throw Error("No node has been drawn");var Wt=this._drawnNode.g;return null==gt&&(gt=this._drawnNode.nodeId),_t=Object.assign(this._drawnNode.attributes,_t),this._drawnNode.nodeId=gt,this._drawnNode.x=J,this._drawnNode.y=pt,!Wt.empty()||_t.style&&_t.style.includes("invis")||(Wt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnNode.g=Wt),Wt.empty()||Dn.call(this,Wt,J,pt,gt,_t,zt),this}),T(Dt,"moveDrawnNode",function Di(J,pt){if(!this._drawnNode)throw Error("No node has been drawn");var gt=this._drawnNode.g,_t=this._drawnNode.attributes;return this._drawnNode.x=J,this._drawnNode.y=pt,gt.empty()||be(gt,J,pt,_t),this}),T(Dt,"insertDrawnNode",function un(J){if(!this._drawnNode)throw Error("No node has been drawn");null==J&&(J=this._drawnNode.nodeId);var pt=this._drawnNode.g;if(pt.empty())return this;var gt=this._drawnNode.attributes;if(pt.selectWithoutDataPropagation("title").text(J),gt.URL||gt.tooltip){var Wt=pt.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");Wt.selectWithoutDataPropagation("ellipse,polygon,path,polyline");var Lt=Wt.selectWithoutDataPropagation("text")}else pt.selectWithoutDataPropagation("ellipse,polygon,path,polyline"),Lt=pt.selectWithoutDataPropagation("text");Lt.text(gt.label||J);var ie=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Te=ie.datum(),ye=this._extractData(pt,Te.children.length,ie.datum());return Te.children.push(ye),X(pt,ye),this._drawnNode=null,this}),T(Dt,"removeDrawnNode",Vn),T(Dt,"removeDrawnNode",Vn),T(Dt,"drawnNodeSelection",z),T(Dt,"drawnNodeSelection",z),T(Dt,"graphvizVersion",function qe(){return this._graphvizVersion}),Dt),x.selection.prototype.graphviz=function Qt(J){var pt=this.node().__graphviz__;return pt?(pt.options(J),p.timeout(function(){pt._dispatch.call("initEnd",this)}.bind(this),0)):pt=new Pt(this,J),pt},x.selection.prototype.selectWithoutDataPropagation=function Ht(J){return m.select(this.size()>0?this.node().querySelector(J):null)},c.graphviz=Vt,Object.defineProperty(c,"__esModule",{value:!0})}(E,s(68557),s(75143),s(18429),s(65894),s(46176),s(46041),s(89397),s(41129),s(38184))},75143:(w,E,s)=>{"use strict";s.r(E),s.d(E,{dispatch:()=>d});var c={value:()=>{}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function g(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",m=f.indexOf(".");if(m>=0&&(u=f.slice(m+1),f=f.slice(0,m)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var m,f=0,u=l.length;f<u;++f)if((m=l[f]).name===h)return m.value}function t(l,h,f){for(var u=0,m=l.length;u<m;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var m,f=this._,u=g(l+"",f),T=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++T<L;)if(m=(l=u[T]).type)f[m]=t(f[m],l.name,h);else if(null==h)for(m in f)f[m]=t(f[m],l.name,null);return this}for(;++T<L;)if((m=(l=u[T]).type)&&(m=p(f[m],l.name)))return m},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((m=arguments.length-2)>0)for(var m,T,f=new Array(m),u=0;u<m;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,m=(T=this._[l]).length;u<m;++u)T[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],m=0,T=u.length;m<T;++m)u[m].value.apply(h,f)}};const d=x},65894:(w,E,s)=>{"use strict";s.r(E),s.d(E,{interval:()=>rt,now:()=>m,timeout:()=>U,timer:()=>I,timerFlush:()=>R});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(q){setTimeout(q,17)};function m(){return l||(u(T),l=f.now()+h)}function T(){l=0}function L(){this._call=this._time=this._next=null}function I(q,st,K){var X=new L;return X.restart(q,st,K),X}function R(){m(),++c;for(var st,q=p;q;)(st=l-q._time)>=0&&q._call.call(null,st),q=q._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{R()}finally{c=0,function Z(){for(var q,K,st=p,X=1/0;st;)st._call?(X>st._time&&(X=st._time),q=st,st=st._next):(K=st._next,st._next=null,st=q?q._next=K:p=K);t=q,Y(X)}(),l=0}}function F(){var q=f.now(),st=q-d;st>1e3&&(h-=st,d=q)}function Y(q){c||(x&&(x=clearTimeout(x)),q-l>24?(q<1/0&&(x=setTimeout(M,q-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(F,1e3)),c=1,u(M)))}function U(q,st,K){var X=new L;return X.restart(W=>{X.stop(),q(W+st)},st=null==st?0:+st,K),X}function rt(q,st,K){var X=new L,W=st;return null==st?(X.restart(q,st,K),X):(X._restart=X.restart,X.restart=function(at,H,Q){H=+H,Q=null==Q?m():+Q,X._restart(function nt(tt){tt+=W,X._restart(nt,W+=H,Q),at(tt)},H,Q)},X.restart(q,st,K),X)}L.prototype=I.prototype={constructor:L,restart:function(q,st,K){if("function"!=typeof q)throw new TypeError("callback is not a function");K=(null==K?m():+K)+(null==st?0:+st),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=q,this._time=K,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}}},90268:(w,E,s)=>{"use strict";s.d(E,{Z:()=>_,M:()=>g});var c=s(37656),x=s(62681);function _(p,t){return((0,x.v)(t)?x.Z:g)(p,t)}function g(p,t){var u,d=t?t.length:0,l=p?Math.min(d,p.length):0,h=new Array(l),f=new Array(d);for(u=0;u<l;++u)h[u]=(0,c.Z)(p[u],t[u]);for(;u<d;++u)f[u]=t[u];return function(m){for(u=0;u<l;++u)f[u]=h[u](m);return f}}},16712:(w,E,s)=>{"use strict";function c(_,g,p,t,d){var l=_*_,h=l*_;return((1-3*_+3*l-h)*g+(4-6*l+3*h)*p+(1+3*_+3*l-3*h)*t+h*d)/6}function x(_){var g=_.length-1;return function(p){var t=p<=0?p=0:p>=1?(p=1,g-1):Math.floor(p*g),d=_[t],l=_[t+1];return c((p-t/g)*g,t>0?_[t-1]:2*d-l,d,l,t<g-1?_[t+2]:2*l-d)}}s.d(E,{t:()=>c,Z:()=>x})},68523:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(16712);function x(_){var g=_.length;return function(p){var t=Math.floor(((p%=1)<0?++p:p)*g);return(0,c.t)((p-t/g)*g,_[(t+g-1)%g],_[t%g],_[(t+1)%g],_[(t+2)%g])}}},35147:(w,E,s)=>{"use strict";s.d(E,{wx:()=>g,yi:()=>p,ZP:()=>t});var c=s(47927);function x(d,l){return function(h){return d+h*l}}function g(d,l){var h=l-d;return h?x(d,h>180||h<-180?h-360*Math.round(h/360):h):(0,c.Z)(isNaN(d)?l:d)}function p(d){return 1==(d=+d)?t:function(l,h){return h-l?function _(d,l,h){return d=Math.pow(d,h),l=Math.pow(l,h)-d,h=1/h,function(f){return Math.pow(d+f*l,h)}}(l,h,d):(0,c.Z)(isNaN(l)?h:l)}}function t(d,l){var h=l-d;return h?x(d,h):(0,c.Z)(isNaN(d)?l:d)}},47927:(w,E,s)=>{"use strict";s.d(E,{Z:()=>c});const c=x=>()=>x},15629:(w,E,s)=>{"use strict";function c(x,_){var g=new Date;return x=+x,_=+_,function(p){return g.setTime(x*(1-p)+_*p),g}}s.d(E,{Z:()=>c})},46176:(w,E,s)=>{"use strict";s.r(E),s.d(E,{interpolate:()=>c.Z,interpolateArray:()=>x.Z,interpolateBasis:()=>_.Z,interpolateBasisClosed:()=>g.Z,interpolateCubehelix:()=>Ge,interpolateCubehelixLong:()=>an,interpolateDate:()=>p.Z,interpolateDiscrete:()=>t,interpolateHcl:()=>he,interpolateHclLong:()=>_e,interpolateHsl:()=>Z,interpolateHslLong:()=>Y,interpolateHue:()=>l,interpolateLab:()=>re,interpolateNumber:()=>h.Z,interpolateNumberArray:()=>f.Z,interpolateObject:()=>u.Z,interpolateRgb:()=>R.ZP,interpolateRgbBasis:()=>R.hD,interpolateRgbBasisClosed:()=>R.YD,interpolateRound:()=>m.Z,interpolateString:()=>T.Z,interpolateTransformCss:()=>L.Y,interpolateTransformSvg:()=>L.w,interpolateZoom:()=>I.Z,piecewise:()=>xe,quantize:()=>Cn});var c=s(37656),x=s(90268),_=s(16712),g=s(68523),p=s(15629);function t(Tt){var Yt=Tt.length;return function(oe){return Tt[Math.max(0,Math.min(Yt-1,Math.floor(oe*Yt)))]}}var d=s(35147);function l(Tt,Yt){var oe=(0,d.wx)(+Tt,+Yt);return function(fe){var qt=oe(fe);return qt-360*Math.floor(qt/360)}}var h=s(6738),f=s(62681),u=s(84858),m=s(84067),T=s(23096),L=s(75349),I=s(76257),R=s(86811),M=s(52786);function F(Tt){return function(Yt,oe){var fe=Tt((Yt=(0,M.Ym)(Yt)).h,(oe=(0,M.Ym)(oe)).h),qt=(0,d.ZP)(Yt.s,oe.s),Ue=(0,d.ZP)(Yt.l,oe.l),Ye=(0,d.ZP)(Yt.opacity,oe.opacity);return function(bn){return Yt.h=fe(bn),Yt.s=qt(bn),Yt.l=Ue(bn),Yt.opacity=Ye(bn),Yt+""}}}const Z=F(d.wx);var Y=F(d.ZP),U=s(68884);const rt=Math.PI/180,q=180/Math.PI,K=.96422,W=.82521,at=4/29,H=6/29,Q=3*H*H;function tt(Tt){if(Tt instanceof mt)return new mt(Tt.l,Tt.a,Tt.b,Tt.opacity);if(Tt instanceof wt)return Bt(Tt);Tt instanceof M.Ss||(Tt=(0,M.SU)(Tt));var Ue,Ye,Yt=jt(Tt.r),oe=jt(Tt.g),fe=jt(Tt.b),qt=St((.2225045*Yt+.7168786*oe+.0606169*fe)/1);return Yt===oe&&oe===fe?Ue=Ye=qt:(Ue=St((.4360747*Yt+.3850649*oe+.1430804*fe)/K),Ye=St((.0139322*Yt+.0971045*oe+.7141733*fe)/W)),new mt(116*qt-16,500*(Ue-qt),200*(qt-Ye),Tt.opacity)}function D(Tt,Yt,oe,fe){return 1===arguments.length?tt(Tt):new mt(Tt,Yt,oe,null==fe?1:fe)}function mt(Tt,Yt,oe,fe){this.l=+Tt,this.a=+Yt,this.b=+oe,this.opacity=+fe}function St(Tt){return Tt>.008856451679035631?Math.pow(Tt,1/3):Tt/Q+at}function Mt(Tt){return Tt>H?Tt*Tt*Tt:Q*(Tt-at)}function Et(Tt){return 255*(Tt<=.0031308?12.92*Tt:1.055*Math.pow(Tt,1/2.4)-.055)}function jt(Tt){return(Tt/=255)<=.04045?Tt/12.92:Math.pow((Tt+.055)/1.055,2.4)}function Nt(Tt){if(Tt instanceof wt)return new wt(Tt.h,Tt.c,Tt.l,Tt.opacity);if(Tt instanceof mt||(Tt=tt(Tt)),0===Tt.a&&0===Tt.b)return new wt(NaN,0<Tt.l&&Tt.l<100?0:NaN,Tt.l,Tt.opacity);var Yt=Math.atan2(Tt.b,Tt.a)*q;return new wt(Yt<0?Yt+360:Yt,Math.sqrt(Tt.a*Tt.a+Tt.b*Tt.b),Tt.l,Tt.opacity)}function dt(Tt,Yt,oe,fe){return 1===arguments.length?Nt(Tt):new wt(Tt,Yt,oe,null==fe?1:fe)}function wt(Tt,Yt,oe,fe){this.h=+Tt,this.c=+Yt,this.l=+oe,this.opacity=+fe}function Bt(Tt){if(isNaN(Tt.h))return new mt(Tt.l,0,0,Tt.opacity);var Yt=Tt.h*rt;return new mt(Tt.l,Math.cos(Yt)*Tt.c,Math.sin(Yt)*Tt.c,Tt.opacity)}function re(Tt,Yt){var oe=(0,d.ZP)((Tt=D(Tt)).l,(Yt=D(Yt)).l),fe=(0,d.ZP)(Tt.a,Yt.a),qt=(0,d.ZP)(Tt.b,Yt.b),Ue=(0,d.ZP)(Tt.opacity,Yt.opacity);return function(Ye){return Tt.l=oe(Ye),Tt.a=fe(Ye),Tt.b=qt(Ye),Tt.opacity=Ue(Ye),Tt+""}}function ce(Tt){return function(Yt,oe){var fe=Tt((Yt=dt(Yt)).h,(oe=dt(oe)).h),qt=(0,d.ZP)(Yt.c,oe.c),Ue=(0,d.ZP)(Yt.l,oe.l),Ye=(0,d.ZP)(Yt.opacity,oe.opacity);return function(bn){return Yt.h=fe(bn),Yt.c=qt(bn),Yt.l=Ue(bn),Yt.opacity=Ye(bn),Yt+""}}}(0,U.Z)(mt,D,(0,U.l)(M.Il,{brighter:function(Tt){return new mt(this.l+18*(null==Tt?1:Tt),this.a,this.b,this.opacity)},darker:function(Tt){return new mt(this.l-18*(null==Tt?1:Tt),this.a,this.b,this.opacity)},rgb:function(){var Tt=(this.l+16)/116,Yt=isNaN(this.a)?Tt:Tt+this.a/500,oe=isNaN(this.b)?Tt:Tt-this.b/200;return Yt=K*Mt(Yt),Tt=1*Mt(Tt),oe=W*Mt(oe),new M.Ss(Et(3.1338561*Yt-1.6168667*Tt-.4906146*oe),Et(-.9787684*Yt+1.9161415*Tt+.033454*oe),Et(.0719453*Yt-.2289914*Tt+1.4052427*oe),this.opacity)}})),(0,U.Z)(wt,dt,(0,U.l)(M.Il,{brighter:function(Tt){return new wt(this.h,this.c,this.l+18*(null==Tt?1:Tt),this.opacity)},darker:function(Tt){return new wt(this.h,this.c,this.l-18*(null==Tt?1:Tt),this.opacity)},rgb:function(){return Bt(this).rgb()}}));const he=ce(d.wx);var _e=ce(d.ZP),ke=1.78277,It=-.29227,$t=-.90649,Ut=1.97294,Jt=Ut*$t,ue=Ut*ke,ve=ke*It- -.14861*$t;function Se(Tt){if(Tt instanceof Ce)return new Ce(Tt.h,Tt.s,Tt.l,Tt.opacity);Tt instanceof M.Ss||(Tt=(0,M.SU)(Tt));var oe=Tt.g/255,fe=Tt.b/255,qt=(ve*fe+Jt*(Tt.r/255)-ue*oe)/(ve+Jt-ue),Ue=fe-qt,Ye=(Ut*(oe-qt)-It*Ue)/$t,bn=Math.sqrt(Ye*Ye+Ue*Ue)/(Ut*qt*(1-qt)),si=bn?Math.atan2(Ye,Ue)*q-120:NaN;return new Ce(si<0?si+360:si,bn,qt,Tt.opacity)}function Ie(Tt,Yt,oe,fe){return 1===arguments.length?Se(Tt):new Ce(Tt,Yt,oe,null==fe?1:fe)}function Ce(Tt,Yt,oe,fe){this.h=+Tt,this.s=+Yt,this.l=+oe,this.opacity=+fe}function Ve(Tt){return function Yt(oe){function fe(qt,Ue){var Ye=Tt((qt=Ie(qt)).h,(Ue=Ie(Ue)).h),bn=(0,d.ZP)(qt.s,Ue.s),si=(0,d.ZP)(qt.l,Ue.l),Pi=(0,d.ZP)(qt.opacity,Ue.opacity);return function(pi){return qt.h=Ye(pi),qt.s=bn(pi),qt.l=si(Math.pow(pi,oe)),qt.opacity=Pi(pi),qt+""}}return oe=+oe,fe.gamma=Yt,fe}(1)}(0,U.Z)(Ce,Ie,(0,U.l)(M.Il,{brighter:function(Tt){return Tt=null==Tt?M.J5:Math.pow(M.J5,Tt),new Ce(this.h,this.s,this.l*Tt,this.opacity)},darker:function(Tt){return Tt=null==Tt?M.xV:Math.pow(M.xV,Tt),new Ce(this.h,this.s,this.l*Tt,this.opacity)},rgb:function(){var Tt=isNaN(this.h)?0:(this.h+120)*rt,Yt=+this.l,oe=isNaN(this.s)?0:this.s*Yt*(1-Yt),fe=Math.cos(Tt),qt=Math.sin(Tt);return new M.Ss(255*(Yt+oe*(-.14861*fe+ke*qt)),255*(Yt+oe*(It*fe+$t*qt)),255*(Yt+oe*(Ut*fe)),this.opacity)}}));const Ge=Ve(d.wx);var an=Ve(d.ZP);function xe(Tt,Yt){void 0===Yt&&(Yt=Tt,Tt=c.Z);for(var oe=0,fe=Yt.length-1,qt=Yt[0],Ue=new Array(fe<0?0:fe);oe<fe;)Ue[oe]=Tt(qt,qt=Yt[++oe]);return function(Ye){var bn=Math.max(0,Math.min(fe-1,Math.floor(Ye*=fe)));return Ue[bn](Ye-bn)}}function Cn(Tt,Yt){for(var oe=new Array(Yt),fe=0;fe<Yt;++fe)oe[fe]=Tt(fe/(Yt-1));return oe}},6738:(w,E,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(g){return x*(1-g)+_*g}}s.d(E,{Z:()=>c})},62681:(w,E,s)=>{"use strict";function c(_,g){g||(g=[]);var d,p=_?Math.min(g.length,_.length):0,t=g.slice();return function(l){for(d=0;d<p;++d)t[d]=_[d]*(1-l)+g[d]*l;return t}}function x(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}s.d(E,{Z:()=>c,v:()=>x})},84858:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(37656);function x(_,g){var d,p={},t={};for(d in(null===_||"object"!=typeof _)&&(_={}),(null===g||"object"!=typeof g)&&(g={}),g)d in _?p[d]=(0,c.Z)(_[d],g[d]):t[d]=g[d];return function(l){for(d in p)t[d]=p[d](l);return t}}},86811:(w,E,s)=>{"use strict";s.d(E,{ZP:()=>p,hD:()=>d,YD:()=>l});var c=s(52786),x=s(16712),_=s(68523),g=s(35147);const p=function h(f){var u=(0,g.yi)(f);function m(T,L){var I=u((T=(0,c.B8)(T)).r,(L=(0,c.B8)(L)).r),R=u(T.g,L.g),M=u(T.b,L.b),F=(0,g.ZP)(T.opacity,L.opacity);return function(Z){return T.r=I(Z),T.g=R(Z),T.b=M(Z),T.opacity=F(Z),T+""}}return m.gamma=h,m}(1);function t(h){return function(f){var I,R,u=f.length,m=new Array(u),T=new Array(u),L=new Array(u);for(I=0;I<u;++I)R=(0,c.B8)(f[I]),m[I]=R.r||0,T[I]=R.g||0,L[I]=R.b||0;return m=h(m),T=h(T),L=h(L),R.opacity=1,function(M){return R.r=m(M),R.g=T(M),R.b=L(M),R+""}}}var d=t(x.Z),l=t(_.Z)},84067:(w,E,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(g){return Math.round(x*(1-g)+_*g)}}s.d(E,{Z:()=>c})},23096:(w,E,s)=>{"use strict";s.d(E,{Z:()=>t});var c=s(6738),x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(x.source,"g");function t(d,l){var f,u,m,h=x.lastIndex=_.lastIndex=0,T=-1,L=[],I=[];for(d+="",l+="";(f=x.exec(d))&&(u=_.exec(l));)(m=u.index)>h&&(m=l.slice(h,m),L[T]?L[T]+=m:L[++T]=m),(f=f[0])===(u=u[0])?L[T]?L[T]+=u:L[++T]=u:(L[++T]=null,I.push({i:T,x:(0,c.Z)(f,u)})),h=_.lastIndex;return h<l.length&&(m=l.slice(h),L[T]?L[T]+=m:L[++T]=m),L.length<2?I[0]?function p(d){return function(l){return d(l)+""}}(I[0].x):function g(d){return function(){return d}}(l):(l=I.length,function(R){for(var F,M=0;M<l;++M)L[(F=I[M]).i]=F.x(R);return L.join("")})}},75349:(w,E,s)=>{"use strict";s.d(E,{Y:()=>h,w:()=>f});var p,c=s(6738),x=180/Math.PI,_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function g(u,m,T,L,I,R){var M,F,Z;return(M=Math.sqrt(u*u+m*m))&&(u/=M,m/=M),(Z=u*T+m*L)&&(T-=u*Z,L-=m*Z),(F=Math.sqrt(T*T+L*L))&&(T/=F,L/=F,Z/=F),u*L<m*T&&(u=-u,m=-m,Z=-Z,M=-M),{translateX:I,translateY:R,rotate:Math.atan2(m,u)*x,skewX:Math.atan(Z)*x,scaleX:M,scaleY:F}}function l(u,m,T,L){function I(Y){return Y.length?Y.pop()+" ":""}return function(Y,U){var rt=[],q=[];return Y=u(Y),U=u(U),function R(Y,U,rt,q,st,K){if(Y!==rt||U!==q){var X=st.push("translate(",null,m,null,T);K.push({i:X-4,x:(0,c.Z)(Y,rt)},{i:X-2,x:(0,c.Z)(U,q)})}else(rt||q)&&st.push("translate("+rt+m+q+T)}(Y.translateX,Y.translateY,U.translateX,U.translateY,rt,q),function M(Y,U,rt,q){Y!==U?(Y-U>180?U+=360:U-Y>180&&(Y+=360),q.push({i:rt.push(I(rt)+"rotate(",null,L)-2,x:(0,c.Z)(Y,U)})):U&&rt.push(I(rt)+"rotate("+U+L)}(Y.rotate,U.rotate,rt,q),function F(Y,U,rt,q){Y!==U?q.push({i:rt.push(I(rt)+"skewX(",null,L)-2,x:(0,c.Z)(Y,U)}):U&&rt.push(I(rt)+"skewX("+U+L)}(Y.skewX,U.skewX,rt,q),function Z(Y,U,rt,q,st,K){if(Y!==rt||U!==q){var X=st.push(I(st)+"scale(",null,",",null,")");K.push({i:X-4,x:(0,c.Z)(Y,rt)},{i:X-2,x:(0,c.Z)(U,q)})}else(1!==rt||1!==q)&&st.push(I(st)+"scale("+rt+","+q+")")}(Y.scaleX,Y.scaleY,U.scaleX,U.scaleY,rt,q),Y=U=null,function(st){for(var W,K=-1,X=q.length;++K<X;)rt[(W=q[K]).i]=W.x(st);return rt.join("")}}}var h=l(function t(u){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(u+"");return m.isIdentity?_:g(m.a,m.b,m.c,m.d,m.e,m.f)},"px, ","px)","deg)"),f=l(function d(u){return null!=u&&(p||(p=document.createElementNS("http://www.w3.org/2000/svg","g")),p.setAttribute("transform",u),u=p.transform.baseVal.consolidate())?g((u=u.matrix).a,u.b,u.c,u.d,u.e,u.f):_},", ",")",")")},37656:(w,E,s)=>{"use strict";s.d(E,{Z:()=>f});var c=s(52786),x=s(86811),_=s(90268),g=s(15629),p=s(6738),t=s(84858),d=s(23096),l=s(47927),h=s(62681);function f(u,m){var L,T=typeof m;return null==m||"boolean"===T?(0,l.Z)(m):("number"===T?p.Z:"string"===T?(L=(0,c.ZP)(m))?(m=L,x.ZP):d.Z:m instanceof c.ZP?x.ZP:m instanceof Date?g.Z:(0,h.v)(m)?h.Z:Array.isArray(m)?_.M:"function"!=typeof m.valueOf&&"function"!=typeof m.toString||isNaN(m)?t.Z:p.Z)(u,m)}},76257:(w,E,s)=>{"use strict";function x(t){return((t=Math.exp(t))+1/t)/2}s.d(E,{Z:()=>p});const p=function t(d,l,h){function f(u,m){var rt,q,T=u[0],L=u[1],I=u[2],F=m[2],Z=m[0]-T,Y=m[1]-L,U=Z*Z+Y*Y;if(U<1e-12)q=Math.log(F/I)/d,rt=function(H){return[T+H*Z,L+H*Y,I*Math.exp(d*H*q)]};else{var st=Math.sqrt(U),K=(F*F-I*I+h*U)/(2*I*l*st),X=(F*F-I*I-h*U)/(2*F*l*st),W=Math.log(Math.sqrt(K*K+1)-K),at=Math.log(Math.sqrt(X*X+1)-X);q=(at-W)/d,rt=function(H){var Q=H*q,nt=x(W),tt=I/(l*st)*(nt*function g(t){return((t=Math.exp(2*t))-1)/(t+1)}(d*Q+W)-function _(t){return((t=Math.exp(t))-1/t)/2}(W));return[T+tt*Z,L+tt*Y,I*nt/x(d*Q+W)]}}return rt.duration=1e3*q*d/Math.SQRT2,rt}return f.rho=function(u){var m=Math.max(.001,+u),T=m*m;return t(m,T,T*T)},f}(Math.SQRT2,2,4)},38184:(w,E,s)=>{"use strict";s.r(E),s.d(E,{path:()=>d});const c=Math.PI,x=2*c,_=1e-6,g=x-_;function p(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function t(){return new p}p.prototype=t.prototype={constructor:p,moveTo:function(l,h){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(l,h){this._+="L"+(this._x1=+l)+","+(this._y1=+h)},quadraticCurveTo:function(l,h,f,u){this._+="Q"+ +l+","+ +h+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(l,h,f,u,m,T){this._+="C"+ +l+","+ +h+","+ +f+","+ +u+","+(this._x1=+m)+","+(this._y1=+T)},arcTo:function(l,h,f,u,m){var T=this._x1,L=this._y1,I=(f=+f)-(l=+l),R=(u=+u)-(h=+h),M=T-l,F=L-h,Z=M*M+F*F;if((m=+m)<0)throw new Error("negative radius: "+m);if(null===this._x1)this._+="M"+(this._x1=l)+","+(this._y1=h);else if(Z>_)if(Math.abs(F*I-R*M)>_&&m){var Y=f-T,U=u-L,rt=I*I+R*R,q=Y*Y+U*U,st=Math.sqrt(rt),K=Math.sqrt(Z),X=m*Math.tan((c-Math.acos((rt+Z-q)/(2*st*K)))/2),W=X/K,at=X/st;Math.abs(W-1)>_&&(this._+="L"+(l+W*M)+","+(h+W*F)),this._+="A"+m+","+m+",0,0,"+ +(F*Y>M*U)+","+(this._x1=l+at*I)+","+(this._y1=h+at*R)}else this._+="L"+(this._x1=l)+","+(this._y1=h)},arc:function(l,h,f,u,m,T){l=+l,h=+h,T=!!T;var L=(f=+f)*Math.cos(u),I=f*Math.sin(u),R=l+L,M=h+I,F=1^T,Z=T?u-m:m-u;if(f<0)throw new Error("negative radius: "+f);null===this._x1?this._+="M"+R+","+M:(Math.abs(this._x1-R)>_||Math.abs(this._y1-M)>_)&&(this._+="L"+R+","+M),f&&(Z<0&&(Z=Z%x+x),Z>g?this._+="A"+f+","+f+",0,1,"+F+","+(l-L)+","+(h-I)+"A"+f+","+f+",0,1,"+F+","+(this._x1=R)+","+(this._y1=M):Z>_&&(this._+="A"+f+","+f+",0,"+ +(Z>=c)+","+F+","+(this._x1=l+f*Math.cos(m))+","+(this._y1=h+f*Math.sin(m))))},rect:function(l,h,f,u){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}};const d=t},34638:(w,E,s)=>{"use strict";function c(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}s.d(E,{Z:()=>c})},7500:(w,E,s)=>{"use strict";s.d(E,{Z:()=>p});var c=s(36175),x=s(53517);function _(t){return function(){var d=this.ownerDocument,l=this.namespaceURI;return l===x.P&&d.documentElement.namespaceURI===x.P?d.createElement(t):d.createElementNS(l,t)}}function g(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function p(t){var d=(0,c.Z)(t);return(d.local?g:_)(d)}},68557:(w,E,s)=>{"use strict";s.r(E),s.d(E,{create:()=>_,creator:()=>c.Z,local:()=>p,matcher:()=>d.Z,namespace:()=>l.Z,namespaces:()=>h.Z,pointer:()=>f.Z,pointers:()=>m,select:()=>x.Z,selectAll:()=>I,selection:()=>L.ZP,selector:()=>R.Z,selectorAll:()=>M.Z,style:()=>F.S,window:()=>Z.Z});var c=s(7500),x=s(52016);function _(Y){return(0,x.Z)((0,c.Z)(Y).call(document.documentElement))}var g=0;function p(){return new t}function t(){this._="@"+(++g).toString(36)}t.prototype=p.prototype={constructor:t,get:function(Y){for(var U=this._;!(U in Y);)if(!(Y=Y.parentNode))return;return Y[U]},set:function(Y,U){return Y[this._]=U},remove:function(Y){return this._ in Y&&delete Y[this._]},toString:function(){return this._}};var d=s(97905),l=s(36175),h=s(53517),f=s(29132),u=s(75819);function m(Y,U){return Y.target&&(Y=(0,u.Z)(Y),void 0===U&&(U=Y.currentTarget),Y=Y.touches||[Y]),Array.from(Y,rt=>(0,f.Z)(rt,U))}var T=s(34638),L=s(37853);function I(Y){return"string"==typeof Y?new L.Y1([document.querySelectorAll(Y)],[document.documentElement]):new L.Y1([null==Y?[]:(0,T.Z)(Y)],L.Jz)}var R=s(29742),M=s(32037),F=s(24476),Z=s(2442)},97905:(w,E,s)=>{"use strict";function c(_){return function(){return this.matches(_)}}function x(_){return function(g){return g.matches(_)}}s.d(E,{Z:()=>c,P:()=>x})},36175:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(53517);function x(_){var g=_+="",p=g.indexOf(":");return p>=0&&"xmlns"!==(g=_.slice(0,p))&&(_=_.slice(p+1)),c.Z.hasOwnProperty(g)?{space:c.Z[g],local:_}:_}},53517:(w,E,s)=>{"use strict";s.d(E,{P:()=>c,Z:()=>x});var c="http://www.w3.org/1999/xhtml";const x={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},29132:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(75819);function x(_,g){if(_=(0,c.Z)(_),void 0===g&&(g=_.currentTarget),g){var p=g.ownerSVGElement||g;if(p.createSVGPoint){var t=p.createSVGPoint();return t.x=_.clientX,t.y=_.clientY,[(t=t.matrixTransform(g.getScreenCTM().inverse())).x,t.y]}if(g.getBoundingClientRect){var d=g.getBoundingClientRect();return[_.clientX-d.left-g.clientLeft,_.clientY-d.top-g.clientTop]}}return[_.pageX,_.pageY]}},52016:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(37853);function x(_){return"string"==typeof _?new c.Y1([[document.querySelector(_)]],[document.documentElement]):new c.Y1([[_]],c.Jz)}},37853:(w,E,s)=>{"use strict";s.d(E,{Y1:()=>be,ZP:()=>un,Jz:()=>Dn});var c=s(29742),_=s(34638),g=s(32037),d=s(97905),l=Array.prototype.find;function f(){return this.firstElementChild}var m=Array.prototype.filter;function T(){return this.children}function M(z){return new Array(z.length)}function Z(z,$){this.ownerDocument=z.ownerDocument,this.namespaceURI=z.namespaceURI,this._next=null,this._parent=z,this.__data__=$}function Y(z){return function(){return z}}function U(z,$,ct,A,bt,Dt){for(var Vt,Pt=0,Qt=$.length,Ht=Dt.length;Pt<Ht;++Pt)(Vt=$[Pt])?(Vt.__data__=Dt[Pt],A[Pt]=Vt):ct[Pt]=new Z(z,Dt[Pt]);for(;Pt<Qt;++Pt)(Vt=$[Pt])&&(bt[Pt]=Vt)}function rt(z,$,ct,A,bt,Dt,Pt){var Vt,Qt,_t,Ht=new Map,J=$.length,pt=Dt.length,gt=new Array(J);for(Vt=0;Vt<J;++Vt)(Qt=$[Vt])&&(gt[Vt]=_t=Pt.call(Qt,Qt.__data__,Vt,$)+"",Ht.has(_t)?bt[Vt]=Qt:Ht.set(_t,Qt));for(Vt=0;Vt<pt;++Vt)_t=Pt.call(z,Dt[Vt],Vt,Dt)+"",(Qt=Ht.get(_t))?(A[Vt]=Qt,Qt.__data__=Dt[Vt],Ht.delete(_t)):ct[Vt]=new Z(z,Dt[Vt]);for(Vt=0;Vt<J;++Vt)(Qt=$[Vt])&&Ht.get(gt[Vt])===Qt&&(bt[Vt]=Qt)}function q(z){return z.__data__}function Q(z,$){return z<$?-1:z>$?1:z>=$?0:NaN}Z.prototype={constructor:Z,appendChild:function(z){return this._parent.insertBefore(z,this._next)},insertBefore:function(z,$){return this._parent.insertBefore(z,$)},querySelector:function(z){return this._parent.querySelector(z)},querySelectorAll:function(z){return this._parent.querySelectorAll(z)}};var Mt=s(36175);function Et(z){return function(){this.removeAttribute(z)}}function jt(z){return function(){this.removeAttributeNS(z.space,z.local)}}function Nt(z,$){return function(){this.setAttribute(z,$)}}function ft(z,$){return function(){this.setAttributeNS(z.space,z.local,$)}}function dt(z,$){return function(){var ct=$.apply(this,arguments);null==ct?this.removeAttribute(z):this.setAttribute(z,ct)}}function wt(z,$){return function(){var ct=$.apply(this,arguments);null==ct?this.removeAttributeNS(z.space,z.local):this.setAttributeNS(z.space,z.local,ct)}}var re=s(24476);function ce(z){return function(){delete this[z]}}function he(z,$){return function(){this[z]=$}}function _e(z,$){return function(){var ct=$.apply(this,arguments);null==ct?delete this[z]:this[z]=ct}}function ke(z){return z.trim().split(/^|\s+/)}function It(z){return z.classList||new $t(z)}function $t(z){this._node=z,this._names=ke(z.getAttribute("class")||"")}function Ut(z,$){for(var ct=It(z),A=-1,bt=$.length;++A<bt;)ct.add($[A])}function Jt(z,$){for(var ct=It(z),A=-1,bt=$.length;++A<bt;)ct.remove($[A])}function ue(z){return function(){Ut(this,z)}}function ve(z){return function(){Jt(this,z)}}function Se(z,$){return function(){($.apply(this,arguments)?Ut:Jt)(this,z)}}function Ce(){this.textContent=""}function Ve(z){return function(){this.textContent=z}}function Ge(z){return function(){var $=z.apply(this,arguments);this.textContent=null==$?"":$}}function xe(){this.innerHTML=""}function Cn(z){return function(){this.innerHTML=z}}function Tt(z){return function(){var $=z.apply(this,arguments);this.innerHTML=null==$?"":$}}function oe(){this.nextSibling&&this.parentNode.appendChild(this)}function qt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}$t.prototype={add:function(z){this._names.indexOf(z)<0&&(this._names.push(z),this._node.setAttribute("class",this._names.join(" ")))},remove:function(z){var $=this._names.indexOf(z);$>=0&&(this._names.splice($,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(z){return this._names.indexOf(z)>=0}};var Ye=s(7500);function si(){return null}function pi(){var z=this.parentNode;z&&z.removeChild(this)}function Ei(){var z=this.cloneNode(!1),$=this.parentNode;return $?$.insertBefore(z,this.nextSibling):z}function er(){var z=this.cloneNode(!0),$=this.parentNode;return $?$.insertBefore(z,this.nextSibling):z}function ji(z){return z.trim().split(/^|\s+/).map(function($){var ct="",A=$.indexOf(".");return A>=0&&(ct=$.slice(A+1),$=$.slice(0,A)),{type:$,name:ct}})}function Ee(z){return function(){var $=this.__on;if($){for(var Dt,ct=0,A=-1,bt=$.length;ct<bt;++ct)Dt=$[ct],z.type&&Dt.type!==z.type||Dt.name!==z.name?$[++A]=Dt:this.removeEventListener(Dt.type,Dt.listener,Dt.options);++A?$.length=A:delete this.__on}}}function tn(z,$,ct){return function(){var bt,A=this.__on,Dt=function mi(z){return function($){z.call(this,$,this.__data__)}}($);if(A)for(var Pt=0,Vt=A.length;Pt<Vt;++Pt)if((bt=A[Pt]).type===z.type&&bt.name===z.name)return this.removeEventListener(bt.type,bt.listener,bt.options),this.addEventListener(bt.type,bt.listener=Dt,bt.options=ct),void(bt.value=$);this.addEventListener(z.type,Dt,ct),bt={type:z.type,name:z.name,value:$,listener:Dt,options:ct},A?A.push(bt):this.__on=[bt]}}var Qi=s(2442);function On(z,$,ct){var A=(0,Qi.Z)(z),bt=A.CustomEvent;"function"==typeof bt?bt=new bt($,ct):(bt=A.document.createEvent("Event"),ct?(bt.initEvent($,ct.bubbles,ct.cancelable),bt.detail=ct.detail):bt.initEvent($,!1,!1)),z.dispatchEvent(bt)}function $e(z,$){return function(){return On(this,z,$)}}function ln(z,$){return function(){return On(this,z,$.apply(this,arguments))}}var Dn=[null];function be(z,$){this._groups=z,this._parents=$}function Di(){return new be([[document.documentElement]],Dn)}be.prototype=Di.prototype={constructor:be,select:function x(z){"function"!=typeof z&&(z=(0,c.Z)(z));for(var $=this._groups,ct=$.length,A=new Array(ct),bt=0;bt<ct;++bt)for(var Qt,Ht,Dt=$[bt],Pt=Dt.length,Vt=A[bt]=new Array(Pt),J=0;J<Pt;++J)(Qt=Dt[J])&&(Ht=z.call(Qt,Qt.__data__,J,Dt))&&("__data__"in Qt&&(Ht.__data__=Qt.__data__),Vt[J]=Ht);return new be(A,this._parents)},selectAll:function t(z){z="function"==typeof z?function p(z){return function(){var $=z.apply(this,arguments);return null==$?[]:(0,_.Z)($)}}(z):(0,g.Z)(z);for(var $=this._groups,ct=$.length,A=[],bt=[],Dt=0;Dt<ct;++Dt)for(var Qt,Pt=$[Dt],Vt=Pt.length,Ht=0;Ht<Vt;++Ht)(Qt=Pt[Ht])&&(A.push(z.call(Qt,Qt.__data__,Ht,Pt)),bt.push(Qt));return new be(A,bt)},selectChild:function u(z){return this.select(null==z?f:function h(z){return function(){return l.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},selectChildren:function I(z){return this.selectAll(null==z?T:function L(z){return function(){return m.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},filter:function R(z){"function"!=typeof z&&(z=(0,d.Z)(z));for(var $=this._groups,ct=$.length,A=new Array(ct),bt=0;bt<ct;++bt)for(var Qt,Dt=$[bt],Pt=Dt.length,Vt=A[bt]=[],Ht=0;Ht<Pt;++Ht)(Qt=Dt[Ht])&&z.call(Qt,Qt.__data__,Ht,Dt)&&Vt.push(Qt);return new be(A,this._parents)},data:function st(z,$){if(!arguments.length)return Array.from(this,q);var ct=$?rt:U,A=this._parents,bt=this._groups;"function"!=typeof z&&(z=Y(z));for(var Dt=bt.length,Pt=new Array(Dt),Vt=new Array(Dt),Qt=new Array(Dt),Ht=0;Ht<Dt;++Ht){var J=A[Ht],pt=bt[Ht],gt=pt.length,_t=(0,_.Z)(z.call(J,J&&J.__data__,Ht,A)),zt=_t.length,Wt=Vt[Ht]=new Array(zt),Lt=Pt[Ht]=new Array(zt),ae=Qt[Ht]=new Array(gt);ct(J,pt,Wt,Lt,ae,_t,$);for(var Te,ye,O=0,ie=0;O<zt;++O)if(Te=Wt[O]){for(O>=ie&&(ie=O+1);!(ye=Lt[ie])&&++ie<zt;);Te._next=ye||null}}return(Pt=new be(Pt,A))._enter=Vt,Pt._exit=Qt,Pt},enter:function F(){return new be(this._enter||this._groups.map(M),this._parents)},exit:function K(){return new be(this._exit||this._groups.map(M),this._parents)},join:function X(z,$,ct){var A=this.enter(),bt=this,Dt=this.exit();return A="function"==typeof z?z(A):A.append(z+""),null!=$&&(bt=$(bt)),null==ct?Dt.remove():ct(Dt),A&&bt?A.merge(bt).order():bt},merge:function W(z){if(!(z instanceof be))throw new Error("invalid merge");for(var $=this._groups,ct=z._groups,A=$.length,Dt=Math.min(A,ct.length),Pt=new Array(A),Vt=0;Vt<Dt;++Vt)for(var gt,Qt=$[Vt],Ht=ct[Vt],J=Qt.length,pt=Pt[Vt]=new Array(J),_t=0;_t<J;++_t)(gt=Qt[_t]||Ht[_t])&&(pt[_t]=gt);for(;Vt<A;++Vt)Pt[Vt]=$[Vt];return new be(Pt,this._parents)},selection:function Vn(){return this},order:function at(){for(var z=this._groups,$=-1,ct=z.length;++$<ct;)for(var Pt,A=z[$],bt=A.length-1,Dt=A[bt];--bt>=0;)(Pt=A[bt])&&(Dt&&4^Pt.compareDocumentPosition(Dt)&&Dt.parentNode.insertBefore(Pt,Dt),Dt=Pt);return this},sort:function H(z){function $(pt,gt){return pt&&gt?z(pt.__data__,gt.__data__):!pt-!gt}z||(z=Q);for(var ct=this._groups,A=ct.length,bt=new Array(A),Dt=0;Dt<A;++Dt){for(var Ht,Pt=ct[Dt],Vt=Pt.length,Qt=bt[Dt]=new Array(Vt),J=0;J<Vt;++J)(Ht=Pt[J])&&(Qt[J]=Ht);Qt.sort($)}return new be(bt,this._parents).order()},call:function nt(){var z=arguments[0];return arguments[0]=this,z.apply(null,arguments),this},nodes:function tt(){return Array.from(this)},node:function V(){for(var z=this._groups,$=0,ct=z.length;$<ct;++$)for(var A=z[$],bt=0,Dt=A.length;bt<Dt;++bt){var Pt=A[bt];if(Pt)return Pt}return null},size:function D(){let z=0;for(const $ of this)++z;return z},empty:function mt(){return!this.node()},each:function St(z){for(var $=this._groups,ct=0,A=$.length;ct<A;++ct)for(var Vt,bt=$[ct],Dt=0,Pt=bt.length;Dt<Pt;++Dt)(Vt=bt[Dt])&&z.call(Vt,Vt.__data__,Dt,bt);return this},attr:function Bt(z,$){var ct=(0,Mt.Z)(z);if(arguments.length<2){var A=this.node();return ct.local?A.getAttributeNS(ct.space,ct.local):A.getAttribute(ct)}return this.each((null==$?ct.local?jt:Et:"function"==typeof $?ct.local?wt:dt:ct.local?ft:Nt)(ct,$))},style:re.Z,property:function qe(z,$){return arguments.length>1?this.each((null==$?ce:"function"==typeof $?_e:he)(z,$)):this.node()[z]},classed:function Ie(z,$){var ct=ke(z+"");if(arguments.length<2){for(var A=It(this.node()),bt=-1,Dt=ct.length;++bt<Dt;)if(!A.contains(ct[bt]))return!1;return!0}return this.each(("function"==typeof $?Se:$?ue:ve)(ct,$))},text:function an(z){return arguments.length?this.each(null==z?Ce:("function"==typeof z?Ge:Ve)(z)):this.node().textContent},html:function Yt(z){return arguments.length?this.each(null==z?xe:("function"==typeof z?Tt:Cn)(z)):this.node().innerHTML},raise:function fe(){return this.each(oe)},lower:function Ue(){return this.each(qt)},append:function bn(z){var $="function"==typeof z?z:(0,Ye.Z)(z);return this.select(function(){return this.appendChild($.apply(this,arguments))})},insert:function Pi(z,$){var ct="function"==typeof z?z:(0,Ye.Z)(z),A=null==$?si:"function"==typeof $?$:(0,c.Z)($);return this.select(function(){return this.insertBefore(ct.apply(this,arguments),A.apply(this,arguments)||null)})},remove:function fi(){return this.each(pi)},clone:function Bi(z){return this.select(z?er:Ei)},datum:function Fi(z){return arguments.length?this.property("__data__",z):this.node().__data__},on:function yi(z,$,ct){var bt,Pt,A=ji(z+""),Dt=A.length;if(!(arguments.length<2)){for(Vt=$?tn:Ee,bt=0;bt<Dt;++bt)this.each(Vt(A[bt],$,ct));return this}var Vt=this.node().__on;if(Vt)for(var J,Qt=0,Ht=Vt.length;Qt<Ht;++Qt)for(bt=0,J=Vt[Qt];bt<Dt;++bt)if((Pt=A[bt]).type===J.type&&Pt.name===J.name)return J.value},dispatch:function En(z,$){return this.each(("function"==typeof $?ln:$e)(z,$))},[Symbol.iterator]:function*gi(){for(var z=this._groups,$=0,ct=z.length;$<ct;++$)for(var Pt,A=z[$],bt=0,Dt=A.length;bt<Dt;++bt)(Pt=A[bt])&&(yield Pt)}};const un=Di},24476:(w,E,s)=>{"use strict";s.d(E,{Z:()=>p,S:()=>t});var c=s(2442);function x(d){return function(){this.style.removeProperty(d)}}function _(d,l,h){return function(){this.style.setProperty(d,l,h)}}function g(d,l,h){return function(){var f=l.apply(this,arguments);null==f?this.style.removeProperty(d):this.style.setProperty(d,f,h)}}function p(d,l,h){return arguments.length>1?this.each((null==l?x:"function"==typeof l?g:_)(d,l,null==h?"":h)):t(this.node(),d)}function t(d,l){return d.style.getPropertyValue(l)||(0,c.Z)(d).getComputedStyle(d,null).getPropertyValue(l)}},29742:(w,E,s)=>{"use strict";function c(){}function x(_){return null==_?c:function(){return this.querySelector(_)}}s.d(E,{Z:()=>x})},32037:(w,E,s)=>{"use strict";function c(){return[]}function x(_){return null==_?c:function(){return this.querySelectorAll(_)}}s.d(E,{Z:()=>x})},75819:(w,E,s)=>{"use strict";function c(x){let _;for(;_=x.sourceEvent;)x=_;return x}s.d(E,{Z:()=>c})},2442:(w,E,s)=>{"use strict";function c(x){return x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView}s.d(E,{Z:()=>c})},73339:(w,E,s)=>{"use strict";s.d(E,{Z:()=>x});var c=s(49194);function x(_,g,p){var t=new c.B7;return t.restart(function(d){t.stop(),_(d+g)},g=null==g?0:+g,p),t}},49194:(w,E,s)=>{"use strict";s.d(E,{zO:()=>m,B7:()=>L,HT:()=>I,R8:()=>R});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(U){setTimeout(U,17)};function m(){return l||(u(T),l=f.now()+h)}function T(){l=0}function L(){this._call=this._time=this._next=null}function I(U,rt,q){var st=new L;return st.restart(U,rt,q),st}function R(){m(),++c;for(var rt,U=p;U;)(rt=l-U._time)>=0&&U._call.call(null,rt),U=U._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{R()}finally{c=0,function Z(){for(var U,q,rt=p,st=1/0;rt;)rt._call?(st>rt._time&&(st=rt._time),U=rt,rt=rt._next):(q=rt._next,rt._next=null,rt=U?U._next=q:p=q);t=U,Y(st)}(),l=0}}function F(){var U=f.now(),rt=U-d;rt>1e3&&(h-=rt,d=U)}function Y(U){c||(x&&(x=clearTimeout(x)),U-l>24?(U<1/0&&(x=setTimeout(M,U-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(F,1e3)),c=1,u(M)))}L.prototype=I.prototype={constructor:L,restart:function(U,rt,q){if("function"!=typeof U)throw new TypeError("callback is not a function");q=(null==q?m():+q)+(null==rt?0:+rt),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=U,this._time=q,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}}},18429:(w,E,s)=>{"use strict";s.r(E),s.d(E,{active:()=>un,interrupt:()=>Z,transition:()=>$e});var c=s(37853),x=s(25922),_=s(49194),g=s(73339),p=(0,x.Z)("start","end","cancel","interrupt"),t=[];function L(z,$,ct,A,bt,Dt){var Pt=z.__transition;if(Pt){if(ct in Pt)return}else z.__transition={};!function F(z,$,ct){var bt,A=z.__transition;function Pt(Ht){var J,pt,gt,_t;if(1!==ct.state)return Qt();for(J in A)if((_t=A[J]).name===ct.name){if(3===_t.state)return(0,g.Z)(Pt);4===_t.state?(_t.state=6,_t.timer.stop(),_t.on.call("interrupt",z,z.__data__,_t.index,_t.group),delete A[J]):+J<$&&(_t.state=6,_t.timer.stop(),_t.on.call("cancel",z,z.__data__,_t.index,_t.group),delete A[J])}if((0,g.Z)(function(){3===ct.state&&(ct.state=4,ct.timer.restart(Vt,ct.delay,ct.time),Vt(Ht))}),ct.state=2,ct.on.call("start",z,z.__data__,ct.index,ct.group),2===ct.state){for(ct.state=3,bt=new Array(gt=ct.tween.length),J=0,pt=-1;J<gt;++J)(_t=ct.tween[J].value.call(z,z.__data__,ct.index,ct.group))&&(bt[++pt]=_t);bt.length=pt+1}}function Vt(Ht){for(var J=Ht<ct.duration?ct.ease.call(null,Ht/ct.duration):(ct.timer.restart(Qt),ct.state=5,1),pt=-1,gt=bt.length;++pt<gt;)bt[pt].call(z,J);5===ct.state&&(ct.on.call("end",z,z.__data__,ct.index,ct.group),Qt())}function Qt(){for(var Ht in ct.state=6,ct.timer.stop(),delete A[$],A)return;delete z.__transition}A[$]=ct,ct.timer=(0,_.HT)(function Dt(Ht){ct.state=1,ct.timer.restart(Pt,ct.delay,ct.time),ct.delay<=Ht&&Pt(Ht-ct.delay)},0,ct.time)}(z,ct,{name:$,index:A,group:bt,on:p,tween:t,time:Dt.time,delay:Dt.delay,duration:Dt.duration,ease:Dt.ease,timer:null,state:0})}function I(z,$){var ct=M(z,$);if(ct.state>0)throw new Error("too late; already scheduled");return ct}function R(z,$){var ct=M(z,$);if(ct.state>3)throw new Error("too late; already running");return ct}function M(z,$){var ct=z.__transition;if(!ct||!(ct=ct[$]))throw new Error("transition not found");return ct}function Z(z,$){var A,bt,Pt,ct=z.__transition,Dt=!0;if(ct){for(Pt in $=null==$?null:$+"",ct)(A=ct[Pt]).name===$?(bt=A.state>2&&A.state<5,A.state=6,A.timer.stop(),A.on.call(bt?"interrupt":"cancel",z,z.__data__,A.index,A.group),delete ct[Pt]):Dt=!1;Dt&&delete z.__transition}}var U=s(75349),rt=s(36175);function q(z,$){var ct,A;return function(){var bt=R(this,z),Dt=bt.tween;if(Dt!==ct)for(var Pt=0,Vt=(A=ct=Dt).length;Pt<Vt;++Pt)if(A[Pt].name===$){(A=A.slice()).splice(Pt,1);break}bt.tween=A}}function st(z,$,ct){var A,bt;if("function"!=typeof ct)throw new Error;return function(){var Dt=R(this,z),Pt=Dt.tween;if(Pt!==A){bt=(A=Pt).slice();for(var Vt={name:$,value:ct},Qt=0,Ht=bt.length;Qt<Ht;++Qt)if(bt[Qt].name===$){bt[Qt]=Vt;break}Qt===Ht&&bt.push(Vt)}Dt.tween=bt}}function X(z,$,ct){var A=z._id;return z.each(function(){var bt=R(this,A);(bt.value||(bt.value={}))[$]=ct.apply(this,arguments)}),function(bt){return M(bt,A).value[$]}}var W=s(52786),at=s(6738),H=s(86811),Q=s(23096);function nt(z,$){var ct;return("number"==typeof $?at.Z:$ instanceof W.ZP?H.ZP:(ct=(0,W.ZP)($))?($=ct,H.ZP):Q.Z)(z,$)}function tt(z){return function(){this.removeAttribute(z)}}function V(z){return function(){this.removeAttributeNS(z.space,z.local)}}function D(z,$,ct){var A,Dt,bt=ct+"";return function(){var Pt=this.getAttribute(z);return Pt===bt?null:Pt===A?Dt:Dt=$(A=Pt,ct)}}function mt(z,$,ct){var A,Dt,bt=ct+"";return function(){var Pt=this.getAttributeNS(z.space,z.local);return Pt===bt?null:Pt===A?Dt:Dt=$(A=Pt,ct)}}function St(z,$,ct){var A,bt,Dt;return function(){var Pt,Qt,Vt=ct(this);return null==Vt?void this.removeAttribute(z):(Pt=this.getAttribute(z))===(Qt=Vt+"")?null:Pt===A&&Qt===bt?Dt:(bt=Qt,Dt=$(A=Pt,Vt))}}function Mt(z,$,ct){var A,bt,Dt;return function(){var Pt,Qt,Vt=ct(this);return null==Vt?void this.removeAttributeNS(z.space,z.local):(Pt=this.getAttributeNS(z.space,z.local))===(Qt=Vt+"")?null:Pt===A&&Qt===bt?Dt:(bt=Qt,Dt=$(A=Pt,Vt))}}function jt(z,$){return function(ct){this.setAttribute(z,$.call(this,ct))}}function Nt(z,$){return function(ct){this.setAttributeNS(z.space,z.local,$.call(this,ct))}}function ft(z,$){var ct,A;function bt(){var Dt=$.apply(this,arguments);return Dt!==A&&(ct=(A=Dt)&&Nt(z,Dt)),ct}return bt._value=$,bt}function dt(z,$){var ct,A;function bt(){var Dt=$.apply(this,arguments);return Dt!==A&&(ct=(A=Dt)&&jt(z,Dt)),ct}return bt._value=$,bt}function Bt(z,$){return function(){I(this,z).delay=+$.apply(this,arguments)}}function re(z,$){return $=+$,function(){I(this,z).delay=$}}function he(z,$){return function(){R(this,z).duration=+$.apply(this,arguments)}}function _e(z,$){return $=+$,function(){R(this,z).duration=$}}function ke(z,$){if("function"!=typeof $)throw new Error;return function(){R(this,z).ease=$}}var Jt=s(97905);function Ie(z,$,ct){var A,bt,Dt=function Se(z){return(z+"").trim().split(/^|\s+/).every(function($){var ct=$.indexOf(".");return ct>=0&&($=$.slice(0,ct)),!$||"start"===$})}($)?I:R;return function(){var Pt=Dt(this,z),Vt=Pt.on;Vt!==A&&(bt=(A=Vt).copy()).on($,ct),Pt.on=bt}}var an=s(29742),Cn=s(32037),Yt=c.ZP.prototype.constructor,fe=s(24476);function Ue(z){return function(){this.style.removeProperty(z)}}function pi(z,$,ct){return function(A){this.style.setProperty(z,$.call(this,A),ct)}}function fi(z,$,ct){var A,bt;function Dt(){var Pt=$.apply(this,arguments);return Pt!==bt&&(A=(bt=Pt)&&pi(z,Pt,ct)),A}return Dt._value=$,Dt}function mi(z){return function($){this.textContent=z.call(this,$)}}function ji(z){var $,ct;function A(){var bt=z.apply(this,arguments);return bt!==ct&&($=(ct=bt)&&mi(bt)),$}return A._value=z,A}var Qi=0;function On(z,$,ct,A){this._groups=z,this._parents=$,this._name=ct,this._id=A}function $e(z){return(0,c.ZP)().transition(z)}function ln(){return++Qi}var En=c.ZP.prototype;On.prototype=$e.prototype={constructor:On,select:function xe(z){var $=this._name,ct=this._id;"function"!=typeof z&&(z=(0,an.Z)(z));for(var A=this._groups,bt=A.length,Dt=new Array(bt),Pt=0;Pt<bt;++Pt)for(var J,pt,Vt=A[Pt],Qt=Vt.length,Ht=Dt[Pt]=new Array(Qt),gt=0;gt<Qt;++gt)(J=Vt[gt])&&(pt=z.call(J,J.__data__,gt,Vt))&&("__data__"in J&&(pt.__data__=J.__data__),Ht[gt]=pt,L(Ht[gt],$,ct,gt,Ht,M(J,ct)));return new On(Dt,this._parents,$,ct)},selectAll:function Tt(z){var $=this._name,ct=this._id;"function"!=typeof z&&(z=(0,Cn.Z)(z));for(var A=this._groups,bt=A.length,Dt=[],Pt=[],Vt=0;Vt<bt;++Vt)for(var J,Qt=A[Vt],Ht=Qt.length,pt=0;pt<Ht;++pt)if(J=Qt[pt]){for(var _t,gt=z.call(J,J.__data__,pt,Qt),zt=M(J,ct),Wt=0,Lt=gt.length;Wt<Lt;++Wt)(_t=gt[Wt])&&L(_t,$,ct,Wt,gt,zt);Dt.push(gt),Pt.push(J)}return new On(Dt,Pt,$,ct)},filter:function ue(z){"function"!=typeof z&&(z=(0,Jt.Z)(z));for(var $=this._groups,ct=$.length,A=new Array(ct),bt=0;bt<ct;++bt)for(var Qt,Dt=$[bt],Pt=Dt.length,Vt=A[bt]=[],Ht=0;Ht<Pt;++Ht)(Qt=Dt[Ht])&&z.call(Qt,Qt.__data__,Ht,Dt)&&Vt.push(Qt);return new On(A,this._parents,this._name,this._id)},merge:function ve(z){if(z._id!==this._id)throw new Error;for(var $=this._groups,ct=z._groups,A=$.length,Dt=Math.min(A,ct.length),Pt=new Array(A),Vt=0;Vt<Dt;++Vt)for(var gt,Qt=$[Vt],Ht=ct[Vt],J=Qt.length,pt=Pt[Vt]=new Array(J),_t=0;_t<J;++_t)(gt=Qt[_t]||Ht[_t])&&(pt[_t]=gt);for(;Vt<A;++Vt)Pt[Vt]=$[Vt];return new On(Pt,this._parents,this._name,this._id)},selection:function oe(){return new Yt(this._groups,this._parents)},transition:function tn(){for(var z=this._name,$=this._id,ct=ln(),A=this._groups,bt=A.length,Dt=0;Dt<bt;++Dt)for(var Qt,Pt=A[Dt],Vt=Pt.length,Ht=0;Ht<Vt;++Ht)if(Qt=Pt[Ht]){var J=M(Qt,$);L(Qt,z,ct,Ht,Pt,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new On(A,this._parents,z,ct)},call:En.call,nodes:En.nodes,node:En.node,size:En.size,empty:En.empty,each:En.each,on:function Ce(z,$){var ct=this._id;return arguments.length<2?M(this.node(),ct).on.on(z):this.each(Ie(ct,z,$))},attr:function Et(z,$){var ct=(0,rt.Z)(z),A="transform"===ct?U.w:nt;return this.attrTween(z,"function"==typeof $?(ct.local?Mt:St)(ct,A,X(this,"attr."+z,$)):null==$?(ct.local?V:tt)(ct):(ct.local?mt:D)(ct,A,$))},attrTween:function wt(z,$){var ct="attr."+z;if(arguments.length<2)return(ct=this.tween(ct))&&ct._value;if(null==$)return this.tween(ct,null);if("function"!=typeof $)throw new Error;var A=(0,rt.Z)(z);return this.tween(ct,(A.local?ft:dt)(A,$))},style:function Pi(z,$,ct){var A="transform"==(z+="")?U.Y:nt;return null==$?this.styleTween(z,function qt(z,$){var ct,A,bt;return function(){var Dt=(0,fe.S)(this,z),Pt=(this.style.removeProperty(z),(0,fe.S)(this,z));return Dt===Pt?null:Dt===ct&&Pt===A?bt:bt=$(ct=Dt,A=Pt)}}(z,A)).on("end.style."+z,Ue(z)):"function"==typeof $?this.styleTween(z,function bn(z,$,ct){var A,bt,Dt;return function(){var Pt=(0,fe.S)(this,z),Vt=ct(this),Qt=Vt+"";return null==Vt&&(this.style.removeProperty(z),Qt=Vt=(0,fe.S)(this,z)),Pt===Qt?null:Pt===A&&Qt===bt?Dt:(bt=Qt,Dt=$(A=Pt,Vt))}}(z,A,X(this,"style."+z,$))).each(function si(z,$){var ct,A,bt,Vt,Dt="style."+$,Pt="end."+Dt;return function(){var Qt=R(this,z),Ht=Qt.on,J=null==Qt.value[Dt]?Vt||(Vt=Ue($)):void 0;(Ht!==ct||bt!==J)&&(A=(ct=Ht).copy()).on(Pt,bt=J),Qt.on=A}}(this._id,z)):this.styleTween(z,function Ye(z,$,ct){var A,Dt,bt=ct+"";return function(){var Pt=(0,fe.S)(this,z);return Pt===bt?null:Pt===A?Dt:Dt=$(A=Pt,ct)}}(z,A,$),ct).on("end.style."+z,null)},styleTween:function Ei(z,$,ct){var A="style."+(z+="");if(arguments.length<2)return(A=this.tween(A))&&A._value;if(null==$)return this.tween(A,null);if("function"!=typeof $)throw new Error;return this.tween(A,fi(z,$,null==ct?"":ct))},text:function Fi(z){return this.tween("text","function"==typeof z?function Bi(z){return function(){var $=z(this);this.textContent=null==$?"":$}}(X(this,"text",z)):function er(z){return function(){this.textContent=z}}(null==z?"":z+""))},textTween:function Ee(z){var $="text";if(arguments.length<1)return($=this.tween($))&&$._value;if(null==z)return this.tween($,null);if("function"!=typeof z)throw new Error;return this.tween($,ji(z))},remove:function Ge(){return this.on("end.remove",function Ve(z){return function(){var $=this.parentNode;for(var ct in this.__transition)if(+ct!==z)return;$&&$.removeChild(this)}}(this._id))},tween:function K(z,$){var ct=this._id;if(z+="",arguments.length<2){for(var Pt,A=M(this.node(),ct).tween,bt=0,Dt=A.length;bt<Dt;++bt)if((Pt=A[bt]).name===z)return Pt.value;return null}return this.each((null==$?q:st)(ct,z,$))},delay:function ce(z){var $=this._id;return arguments.length?this.each(("function"==typeof z?Bt:re)($,z)):M(this.node(),$).delay},duration:function qe(z){var $=this._id;return arguments.length?this.each(("function"==typeof z?he:_e)($,z)):M(this.node(),$).duration},ease:function It(z){var $=this._id;return arguments.length?this.each(ke($,z)):M(this.node(),$).ease},easeVarying:function Ut(z){if("function"!=typeof z)throw new Error;return this.each(function $t(z,$){return function(){var ct=$.apply(this,arguments);if("function"!=typeof ct)throw new Error;R(this,z).ease=ct}}(this._id,z))},end:function yi(){var z,$,ct=this,A=ct._id,bt=ct.size();return new Promise(function(Dt,Pt){var Vt={value:Pt},Qt={value:function(){0==--bt&&Dt()}};ct.each(function(){var Ht=R(this,A),J=Ht.on;J!==z&&(($=(z=J).copy())._.cancel.push(Vt),$._.interrupt.push(Vt),$._.end.push(Qt)),Ht.on=$}),0===bt&&Dt()})},[Symbol.iterator]:En[Symbol.iterator]};var Dn={time:null,delay:0,duration:250,ease:s(27065).tw};function be(z,$){for(var ct;!(ct=z.__transition)||!(ct=ct[$]);)if(!(z=z.parentNode))throw new Error(`transition ${$} not found`);return ct}c.ZP.prototype.interrupt=function Y(z){return this.each(function(){Z(this,z)})},c.ZP.prototype.transition=function Di(z){var $,ct;z instanceof On?($=z._id,z=z._name):($=ln(),(ct=Dn).time=(0,_.zO)(),z=null==z?null:z+"");for(var A=this._groups,bt=A.length,Dt=0;Dt<bt;++Dt)for(var Qt,Pt=A[Dt],Vt=Pt.length,Ht=0;Ht<Vt;++Ht)(Qt=Pt[Ht])&&L(Qt,z,$,Ht,Pt,ct||be(Qt,$));return new On(A,this._parents,z,$)};var Vn=[null];function un(z,$){var A,bt,ct=z.__transition;if(ct)for(bt in $=null==$?null:$+"",ct)if((A=ct[bt]).state>1&&A.name===$)return new On([[z]],Vn,$,+bt);return null}},46041:(w,E,s)=>{"use strict";s.r(E),s.d(E,{zoom:()=>Y,zoomIdentity:()=>f,zoomTransform:()=>u});var c=s(25922),x=s(56758),_=s(76257),g=s(52016),p=s(29132),t=s(18429);const d=U=>()=>U;function l(U,{sourceEvent:rt,target:q,transform:st,dispatch:K}){Object.defineProperties(this,{type:{value:U,enumerable:!0,configurable:!0},sourceEvent:{value:rt,enumerable:!0,configurable:!0},target:{value:q,enumerable:!0,configurable:!0},transform:{value:st,enumerable:!0,configurable:!0},_:{value:K}})}function h(U,rt,q){this.k=U,this.x=rt,this.y=q}h.prototype={constructor:h,scale:function(U){return 1===U?this:new h(this.k*U,this.x,this.y)},translate:function(U,rt){return 0===U&0===rt?this:new h(this.k,this.x+this.k*U,this.y+this.k*rt)},apply:function(U){return[U[0]*this.k+this.x,U[1]*this.k+this.y]},applyX:function(U){return U*this.k+this.x},applyY:function(U){return U*this.k+this.y},invert:function(U){return[(U[0]-this.x)/this.k,(U[1]-this.y)/this.k]},invertX:function(U){return(U-this.x)/this.k},invertY:function(U){return(U-this.y)/this.k},rescaleX:function(U){return U.copy().domain(U.range().map(this.invertX,this).map(U.invert,U))},rescaleY:function(U){return U.copy().domain(U.range().map(this.invertY,this).map(U.invert,U))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var f=new h(1,0,0);function u(U){for(;!U.__zoom;)if(!(U=U.parentNode))return f;return U.__zoom}function m(U){U.stopImmediatePropagation()}function T(U){U.preventDefault(),U.stopImmediatePropagation()}function L(U){return!(U.ctrlKey&&"wheel"!==U.type||U.button)}function I(){var U=this;return U instanceof SVGElement?(U=U.ownerSVGElement||U).hasAttribute("viewBox")?[[(U=U.viewBox.baseVal).x,U.y],[U.x+U.width,U.y+U.height]]:[[0,0],[U.width.baseVal.value,U.height.baseVal.value]]:[[0,0],[U.clientWidth,U.clientHeight]]}function R(){return this.__zoom||f}function M(U){return-U.deltaY*(1===U.deltaMode?.05:U.deltaMode?1:.002)*(U.ctrlKey?10:1)}function F(){return navigator.maxTouchPoints||"ontouchstart"in this}function Z(U,rt,q){var st=U.invertX(rt[0][0])-q[0][0],K=U.invertX(rt[1][0])-q[1][0],X=U.invertY(rt[0][1])-q[0][1],W=U.invertY(rt[1][1])-q[1][1];return U.translate(K>st?(st+K)/2:Math.min(0,st)||Math.max(0,K),W>X?(X+W)/2:Math.min(0,X)||Math.max(0,W))}function Y(){var nt,tt,V,U=L,rt=I,q=Z,st=M,K=F,X=[0,1/0],W=[[-1/0,-1/0],[1/0,1/0]],at=250,H=_.Z,Q=(0,c.Z)("start","zoom","end"),D=500,St=0,Mt=10;function Et(It){It.property("__zoom",R).on("wheel.zoom",re).on("mousedown.zoom",ce).on("dblclick.zoom",he).filter(K).on("touchstart.zoom",_e).on("touchmove.zoom",qe).on("touchend.zoom touchcancel.zoom",ke).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function jt(It,$t){return($t=Math.max(X[0],Math.min(X[1],$t)))===It.k?It:new h($t,It.x,It.y)}function Nt(It,$t,Ut){var Jt=$t[0]-Ut[0]*It.k,ue=$t[1]-Ut[1]*It.k;return Jt===It.x&&ue===It.y?It:new h(It.k,Jt,ue)}function ft(It){return[(+It[0][0]+ +It[1][0])/2,(+It[0][1]+ +It[1][1])/2]}function dt(It,$t,Ut,Jt){It.on("start.zoom",function(){wt(this,arguments).event(Jt).start()}).on("interrupt.zoom end.zoom",function(){wt(this,arguments).event(Jt).end()}).tween("zoom",function(){var ue=this,ve=arguments,Se=wt(ue,ve).event(Jt),Ie=rt.apply(ue,ve),Ce=null==Ut?ft(Ie):"function"==typeof Ut?Ut.apply(ue,ve):Ut,Ve=Math.max(Ie[1][0]-Ie[0][0],Ie[1][1]-Ie[0][1]),Ge=ue.__zoom,an="function"==typeof $t?$t.apply(ue,ve):$t,xe=H(Ge.invert(Ce).concat(Ve/Ge.k),an.invert(Ce).concat(Ve/an.k));return function(Cn){if(1===Cn)Cn=an;else{var Tt=xe(Cn),Yt=Ve/Tt[2];Cn=new h(Yt,Ce[0]-Tt[0]*Yt,Ce[1]-Tt[1]*Yt)}Se.zoom(null,Cn)}})}function wt(It,$t,Ut){return!Ut&&It.__zooming||new Bt(It,$t)}function Bt(It,$t){this.that=It,this.args=$t,this.active=0,this.sourceEvent=null,this.extent=rt.apply(It,$t),this.taps=0}function re(It,...$t){if(U.apply(this,arguments)){var Ut=wt(this,$t).event(It),Jt=this.__zoom,ue=Math.max(X[0],Math.min(X[1],Jt.k*Math.pow(2,st.apply(this,arguments)))),ve=(0,p.Z)(It);if(Ut.wheel)(Ut.mouse[0][0]!==ve[0]||Ut.mouse[0][1]!==ve[1])&&(Ut.mouse[1]=Jt.invert(Ut.mouse[0]=ve)),clearTimeout(Ut.wheel);else{if(Jt.k===ue)return;Ut.mouse=[ve,Jt.invert(ve)],(0,t.interrupt)(this),Ut.start()}T(It),Ut.wheel=setTimeout(Se,150),Ut.zoom("mouse",q(Nt(jt(Jt,ue),Ut.mouse[0],Ut.mouse[1]),Ut.extent,W))}function Se(){Ut.wheel=null,Ut.end()}}function ce(It,...$t){if(!V&&U.apply(this,arguments)){var Ut=wt(this,$t,!0).event(It),Jt=(0,g.Z)(It.view).on("mousemove.zoom",Ce,!0).on("mouseup.zoom",Ve,!0),ue=(0,p.Z)(It,ve),ve=It.currentTarget,Se=It.clientX,Ie=It.clientY;(0,x.Z)(It.view),m(It),Ut.mouse=[ue,this.__zoom.invert(ue)],(0,t.interrupt)(this),Ut.start()}function Ce(Ge){if(T(Ge),!Ut.moved){var an=Ge.clientX-Se,xe=Ge.clientY-Ie;Ut.moved=an*an+xe*xe>St}Ut.event(Ge).zoom("mouse",q(Nt(Ut.that.__zoom,Ut.mouse[0]=(0,p.Z)(Ge,ve),Ut.mouse[1]),Ut.extent,W))}function Ve(Ge){Jt.on("mousemove.zoom mouseup.zoom",null),(0,x.D)(Ge.view,Ut.moved),T(Ge),Ut.event(Ge).end()}}function he(It,...$t){if(U.apply(this,arguments)){var Ut=this.__zoom,Jt=(0,p.Z)(It.changedTouches?It.changedTouches[0]:It,this),ue=Ut.invert(Jt),ve=Ut.k*(It.shiftKey?.5:2),Se=q(Nt(jt(Ut,ve),Jt,ue),rt.apply(this,$t),W);T(It),at>0?(0,g.Z)(this).transition().duration(at).call(dt,Se,Jt,It):(0,g.Z)(this).call(Et.transform,Se,Jt,It)}}function _e(It,...$t){if(U.apply(this,arguments)){var ve,Se,Ie,Ce,Ut=It.touches,Jt=Ut.length,ue=wt(this,$t,It.changedTouches.length===Jt).event(It);for(m(It),Se=0;Se<Jt;++Se)Ce=[Ce=(0,p.Z)(Ie=Ut[Se],this),this.__zoom.invert(Ce),Ie.identifier],ue.touch0?!ue.touch1&&ue.touch0[2]!==Ce[2]&&(ue.touch1=Ce,ue.taps=0):(ue.touch0=Ce,ve=!0,ue.taps=1+!!nt);nt&&(nt=clearTimeout(nt)),ve&&(ue.taps<2&&(tt=Ce[0],nt=setTimeout(function(){nt=null},D)),(0,t.interrupt)(this),ue.start())}}function qe(It,...$t){if(this.__zooming){var ve,Se,Ie,Ce,Ut=wt(this,$t).event(It),Jt=It.changedTouches,ue=Jt.length;for(T(It),ve=0;ve<ue;++ve)Ie=(0,p.Z)(Se=Jt[ve],this),Ut.touch0&&Ut.touch0[2]===Se.identifier?Ut.touch0[0]=Ie:Ut.touch1&&Ut.touch1[2]===Se.identifier&&(Ut.touch1[0]=Ie);if(Se=Ut.that.__zoom,Ut.touch1){var Ve=Ut.touch0[0],Ge=Ut.touch0[1],an=Ut.touch1[0],xe=Ut.touch1[1],Cn=(Cn=an[0]-Ve[0])*Cn+(Cn=an[1]-Ve[1])*Cn,Tt=(Tt=xe[0]-Ge[0])*Tt+(Tt=xe[1]-Ge[1])*Tt;Se=jt(Se,Math.sqrt(Cn/Tt)),Ie=[(Ve[0]+an[0])/2,(Ve[1]+an[1])/2],Ce=[(Ge[0]+xe[0])/2,(Ge[1]+xe[1])/2]}else{if(!Ut.touch0)return;Ie=Ut.touch0[0],Ce=Ut.touch0[1]}Ut.zoom("touch",q(Nt(Se,Ie,Ce),Ut.extent,W))}}function ke(It,...$t){if(this.__zooming){var ve,Se,Ut=wt(this,$t).event(It),Jt=It.changedTouches,ue=Jt.length;for(m(It),V&&clearTimeout(V),V=setTimeout(function(){V=null},D),ve=0;ve<ue;++ve)Se=Jt[ve],Ut.touch0&&Ut.touch0[2]===Se.identifier?delete Ut.touch0:Ut.touch1&&Ut.touch1[2]===Se.identifier&&delete Ut.touch1;if(Ut.touch1&&!Ut.touch0&&(Ut.touch0=Ut.touch1,delete Ut.touch1),Ut.touch0)Ut.touch0[1]=this.__zoom.invert(Ut.touch0[0]);else if(Ut.end(),2===Ut.taps&&(Se=(0,p.Z)(Se,this),Math.hypot(tt[0]-Se[0],tt[1]-Se[1])<Mt)){var Ie=(0,g.Z)(this).on("dblclick.zoom");Ie&&Ie.apply(this,arguments)}}}return Et.transform=function(It,$t,Ut,Jt){var ue=It.selection?It.selection():It;ue.property("__zoom",R),It!==ue?dt(It,$t,Ut,Jt):ue.interrupt().each(function(){wt(this,arguments).event(Jt).start().zoom(null,"function"==typeof $t?$t.apply(this,arguments):$t).end()})},Et.scaleBy=function(It,$t,Ut,Jt){Et.scaleTo(It,function(){var ue=this.__zoom.k,ve="function"==typeof $t?$t.apply(this,arguments):$t;return ue*ve},Ut,Jt)},Et.scaleTo=function(It,$t,Ut,Jt){Et.transform(It,function(){var ue=rt.apply(this,arguments),ve=this.__zoom,Se=null==Ut?ft(ue):"function"==typeof Ut?Ut.apply(this,arguments):Ut,Ie=ve.invert(Se),Ce="function"==typeof $t?$t.apply(this,arguments):$t;return q(Nt(jt(ve,Ce),Se,Ie),ue,W)},Ut,Jt)},Et.translateBy=function(It,$t,Ut,Jt){Et.transform(It,function(){return q(this.__zoom.translate("function"==typeof $t?$t.apply(this,arguments):$t,"function"==typeof Ut?Ut.apply(this,arguments):Ut),rt.apply(this,arguments),W)},null,Jt)},Et.translateTo=function(It,$t,Ut,Jt,ue){Et.transform(It,function(){var ve=rt.apply(this,arguments),Se=this.__zoom,Ie=null==Jt?ft(ve):"function"==typeof Jt?Jt.apply(this,arguments):Jt;return q(f.translate(Ie[0],Ie[1]).scale(Se.k).translate("function"==typeof $t?-$t.apply(this,arguments):-$t,"function"==typeof Ut?-Ut.apply(this,arguments):-Ut),ve,W)},Jt,ue)},Bt.prototype={event:function(It){return It&&(this.sourceEvent=It),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(It,$t){return this.mouse&&"mouse"!==It&&(this.mouse[1]=$t.invert(this.mouse[0])),this.touch0&&"touch"!==It&&(this.touch0[1]=$t.invert(this.touch0[0])),this.touch1&&"touch"!==It&&(this.touch1[1]=$t.invert(this.touch1[0])),this.that.__zoom=$t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(It){var $t=(0,g.Z)(this.that).datum();Q.call(It,this.that,new l(It,{sourceEvent:this.sourceEvent,target:Et,type:It,transform:this.that.__zoom,dispatch:Q}),$t)}},Et.wheelDelta=function(It){return arguments.length?(st="function"==typeof It?It:d(+It),Et):st},Et.filter=function(It){return arguments.length?(U="function"==typeof It?It:d(!!It),Et):U},Et.touchable=function(It){return arguments.length?(K="function"==typeof It?It:d(!!It),Et):K},Et.extent=function(It){return arguments.length?(rt="function"==typeof It?It:d([[+It[0][0],+It[0][1]],[+It[1][0],+It[1][1]]]),Et):rt},Et.scaleExtent=function(It){return arguments.length?(X[0]=+It[0],X[1]=+It[1],Et):[X[0],X[1]]},Et.translateExtent=function(It){return arguments.length?(W[0][0]=+It[0][0],W[1][0]=+It[1][0],W[0][1]=+It[0][1],W[1][1]=+It[1][1],Et):[[W[0][0],W[0][1]],[W[1][0],W[1][1]]]},Et.constrain=function(It){return arguments.length?(q=It,Et):q},Et.duration=function(It){return arguments.length?(at=+It,Et):at},Et.interpolate=function(It){return arguments.length?(H=It,Et):H},Et.on=function(){var It=Q.on.apply(Q,arguments);return It===Q?Et:It},Et.clickDistance=function(It){return arguments.length?(St=(It=+It)*It,Et):Math.sqrt(St)},Et.tapDistance=function(It){return arguments.length?(Mt=+It,Et):Mt},Et}u.prototype=h.prototype},59695:(w,E,s)=>{w.exports={graphlib:s(36456),layout:s(14850),debug:s(71914),util:{time:s(11510).time,notime:s(11510).notime},version:s(28126)}},12234:(w,E,s)=>{"use strict";var c=s(45760),x=s(67365);w.exports={run:function _(t){var d="greedy"===t.graph().acyclicer?x(t,function l(h){return function(f){return h.edge(f).weight}}(t)):function g(t){var d=[],l={},h={};return c.forEach(t.nodes(),function f(u){c.has(h,u)||(h[u]=!0,l[u]=!0,c.forEach(t.outEdges(u),function(m){c.has(l,m.w)?d.push(m):f(m.w)}),delete l[u])}),d}(t);c.forEach(d,function(h){var f=t.edge(h);t.removeEdge(h),f.forwardName=h.name,f.reversed=!0,t.setEdge(h.w,h.v,f,c.uniqueId("rev"))})},undo:function p(t){c.forEach(t.edges(),function(d){var l=t.edge(d);if(l.reversed){t.removeEdge(d);var h=l.forwardName;delete l.reversed,delete l.forwardName,t.setEdge(d.w,d.v,l,h)}})}}},79999:(w,E,s)=>{var c=s(45760),x=s(11510);function g(p,t,d,l,h,f){var m=h[t][f-1],T=x.addDummyNode(p,"border",{width:0,height:0,rank:f,borderType:t},d);h[t][f]=T,p.setParent(T,l),m&&p.setEdge(m,T,{weight:1})}w.exports=function _(p){c.forEach(p.children(),function t(d){var l=p.children(d),h=p.node(d);if(l.length&&c.forEach(l,t),c.has(h,"minRank")){h.borderLeft=[],h.borderRight=[];for(var f=h.minRank,u=h.maxRank+1;f<u;++f)g(p,"borderLeft","_bl",d,h,f),g(p,"borderRight","_br",d,h,f)}})}},83870:(w,E,s)=>{"use strict";var c=s(45760);function g(f){c.forEach(f.nodes(),function(u){p(f.node(u))}),c.forEach(f.edges(),function(u){p(f.edge(u))})}function p(f){var u=f.width;f.width=f.height,f.height=u}function d(f){f.y=-f.y}function h(f){var u=f.x;f.x=f.y,f.y=u}w.exports={adjust:function x(f){var u=f.graph().rankdir.toLowerCase();("lr"===u||"rl"===u)&&g(f)},undo:function _(f){var u=f.graph().rankdir.toLowerCase();("bt"===u||"rl"===u)&&function t(f){c.forEach(f.nodes(),function(u){d(f.node(u))}),c.forEach(f.edges(),function(u){var m=f.edge(u);c.forEach(m.points,d),c.has(m,"y")&&d(m)})}(f),("lr"===u||"rl"===u)&&(function l(f){c.forEach(f.nodes(),function(u){h(f.node(u))}),c.forEach(f.edges(),function(u){var m=f.edge(u);c.forEach(m.points,h),c.has(m,"x")&&h(m)})}(f),g(f))}}},3226:w=>{function E(){var x={};x._next=x._prev=x,this._sentinel=x}function s(x){x._prev._next=x._next,x._next._prev=x._prev,delete x._next,delete x._prev}function c(x,_){if("_next"!==x&&"_prev"!==x)return _}w.exports=E,E.prototype.dequeue=function(){var x=this._sentinel,_=x._prev;if(_!==x)return s(_),_},E.prototype.enqueue=function(x){var _=this._sentinel;x._prev&&x._next&&s(x),x._next=_._next,_._next._prev=x,_._next=x,x._prev=_},E.prototype.toString=function(){for(var x=[],_=this._sentinel,g=_._prev;g!==_;)x.push(JSON.stringify(g,c)),g=g._prev;return"["+x.join(", ")+"]"}},71914:(w,E,s)=>{var c=s(45760),x=s(11510),_=s(36456).Graph;w.exports={debugOrdering:function g(p){var t=x.buildLayerMatrix(p),d=new _({compound:!0,multigraph:!0}).setGraph({});return c.forEach(p.nodes(),function(l){d.setNode(l,{label:l}),d.setParent(l,"layer"+p.node(l).rank)}),c.forEach(p.edges(),function(l){d.setEdge(l.v,l.w,{},l.name)}),c.forEach(t,function(l,h){d.setNode("layer"+h,{rank:"same"}),c.reduce(l,function(u,m){return d.setEdge(u,m,{style:"invis"}),m})}),d}}},36456:(w,E,s)=>{var c;try{c=s(85510)}catch(x){}c||(c=window.graphlib),w.exports=c},67365:(w,E,s)=>{var c=s(45760),x=s(36456).Graph,_=s(3226);w.exports=function p(f,u){if(f.nodeCount()<=1)return[];var m=function l(f,u){var m=new x,T=0,L=0;c.forEach(f.nodes(),function(M){m.setNode(M,{v:M,in:0,out:0})}),c.forEach(f.edges(),function(M){var F=m.edge(M.v,M.w)||0,Z=u(M);m.setEdge(M.v,M.w,F+Z),L=Math.max(L,m.node(M.v).out+=Z),T=Math.max(T,m.node(M.w).in+=Z)});var I=c.range(L+T+3).map(function(){return new _}),R=T+1;return c.forEach(m.nodes(),function(M){h(I,R,m.node(M))}),{graph:m,buckets:I,zeroIdx:R}}(f,u||g),T=function t(f,u,m){for(var R,T=[],L=u[u.length-1],I=u[0];f.nodeCount();){for(;R=I.dequeue();)d(f,u,m,R);for(;R=L.dequeue();)d(f,u,m,R);if(f.nodeCount())for(var M=u.length-2;M>0;--M)if(R=u[M].dequeue()){T=T.concat(d(f,u,m,R,!0));break}}return T}(m.graph,m.buckets,m.zeroIdx);return c.flatten(c.map(T,function(L){return f.outEdges(L.v,L.w)}),!0)};var g=c.constant(1);function d(f,u,m,T,L){var I=L?[]:void 0;return c.forEach(f.inEdges(T.v),function(R){var M=f.edge(R),F=f.node(R.v);L&&I.push({v:R.v,w:R.w}),F.out-=M,h(u,m,F)}),c.forEach(f.outEdges(T.v),function(R){var M=f.edge(R),Z=f.node(R.w);Z.in-=M,h(u,m,Z)}),f.removeNode(T.v),I}function h(f,u,m){m.out?m.in?f[m.out-m.in+u].enqueue(m):f[f.length-1].enqueue(m):f[0].enqueue(m)}},14850:(w,E,s)=>{"use strict";var c=s(45760),x=s(12234),_=s(91496),g=s(94124),p=s(11510).normalizeRanks,t=s(60162),d=s(11510).removeEmptyRanks,l=s(1230),h=s(79999),f=s(83870),u=s(32974),m=s(78226),T=s(11510),L=s(36456).Graph;w.exports=function I(ft,dt){var wt=dt&&dt.debugTiming?T.time:T.notime;wt("layout",function(){var Bt=wt("  buildLayoutGraph",function(){return function X(ft){var dt=new L({multigraph:!0,compound:!0}),wt=Nt(ft.graph());return dt.setGraph(c.merge({},Z,jt(wt,F),c.pick(wt,Y))),c.forEach(ft.nodes(),function(Bt){var re=Nt(ft.node(Bt));dt.setNode(Bt,c.defaults(jt(re,U),rt)),dt.setParent(Bt,ft.parent(Bt))}),c.forEach(ft.edges(),function(Bt){var re=Nt(ft.edge(Bt));dt.setEdge(Bt,c.merge({},st,jt(re,q),c.pick(re,K)))}),dt}(ft)});wt("  runLayout",function(){!function R(ft,dt){dt("    makeSpaceForEdgeLabels",function(){!function W(ft){var dt=ft.graph();dt.ranksep/=2,c.forEach(ft.edges(),function(wt){var Bt=ft.edge(wt);Bt.minlen*=2,"c"!==Bt.labelpos.toLowerCase()&&("TB"===dt.rankdir||"BT"===dt.rankdir?Bt.width+=Bt.labeloffset:Bt.height+=Bt.labeloffset)})}(ft)}),dt("    removeSelfEdges",function(){!function St(ft){c.forEach(ft.edges(),function(dt){if(dt.v===dt.w){var wt=ft.node(dt.v);wt.selfEdges||(wt.selfEdges=[]),wt.selfEdges.push({e:dt,label:ft.edge(dt)}),ft.removeEdge(dt)}})}(ft)}),dt("    acyclic",function(){x.run(ft)}),dt("    nestingGraph.run",function(){l.run(ft)}),dt("    rank",function(){g(T.asNonCompoundGraph(ft))}),dt("    injectEdgeLabelProxies",function(){!function at(ft){c.forEach(ft.edges(),function(dt){var wt=ft.edge(dt);if(wt.width&&wt.height){var Bt=ft.node(dt.v),re=ft.node(dt.w);T.addDummyNode(ft,"edge-proxy",{rank:(re.rank-Bt.rank)/2+Bt.rank,e:dt},"_ep")}})}(ft)}),dt("    removeEmptyRanks",function(){d(ft)}),dt("    nestingGraph.cleanup",function(){l.cleanup(ft)}),dt("    normalizeRanks",function(){p(ft)}),dt("    assignRankMinMax",function(){!function H(ft){var dt=0;c.forEach(ft.nodes(),function(wt){var Bt=ft.node(wt);Bt.borderTop&&(Bt.minRank=ft.node(Bt.borderTop).rank,Bt.maxRank=ft.node(Bt.borderBottom).rank,dt=c.max(dt,Bt.maxRank))}),ft.graph().maxRank=dt}(ft)}),dt("    removeEdgeLabelProxies",function(){!function Q(ft){c.forEach(ft.nodes(),function(dt){var wt=ft.node(dt);"edge-proxy"===wt.dummy&&(ft.edge(wt.e).labelRank=wt.rank,ft.removeNode(dt))})}(ft)}),dt("    normalize.run",function(){_.run(ft)}),dt("    parentDummyChains",function(){t(ft)}),dt("    addBorderSegments",function(){h(ft)}),dt("    order",function(){u(ft)}),dt("    insertSelfEdges",function(){!function Mt(ft){var dt=T.buildLayerMatrix(ft);c.forEach(dt,function(wt){var Bt=0;c.forEach(wt,function(re,ce){var he=ft.node(re);he.order=ce+Bt,c.forEach(he.selfEdges,function(_e){T.addDummyNode(ft,"selfedge",{width:_e.label.width,height:_e.label.height,rank:he.rank,order:ce+ ++Bt,e:_e.e,label:_e.label},"_se")}),delete he.selfEdges})})}(ft)}),dt("    adjustCoordinateSystem",function(){f.adjust(ft)}),dt("    position",function(){m(ft)}),dt("    positionSelfEdges",function(){!function Et(ft){c.forEach(ft.nodes(),function(dt){var wt=ft.node(dt);if("selfedge"===wt.dummy){var Bt=ft.node(wt.e.v),re=Bt.x+Bt.width/2,ce=Bt.y,he=wt.x-re,_e=Bt.height/2;ft.setEdge(wt.e,wt.label),ft.removeNode(dt),wt.label.points=[{x:re+2*he/3,y:ce-_e},{x:re+5*he/6,y:ce-_e},{x:re+he,y:ce},{x:re+5*he/6,y:ce+_e},{x:re+2*he/3,y:ce+_e}],wt.label.x=wt.x,wt.label.y=wt.y}})}(ft)}),dt("    removeBorderNodes",function(){!function mt(ft){c.forEach(ft.nodes(),function(dt){if(ft.children(dt).length){var wt=ft.node(dt),Bt=ft.node(wt.borderTop),re=ft.node(wt.borderBottom),ce=ft.node(c.last(wt.borderLeft)),he=ft.node(c.last(wt.borderRight));wt.width=Math.abs(he.x-ce.x),wt.height=Math.abs(re.y-Bt.y),wt.x=ce.x+wt.width/2,wt.y=Bt.y+wt.height/2}}),c.forEach(ft.nodes(),function(dt){"border"===ft.node(dt).dummy&&ft.removeNode(dt)})}(ft)}),dt("    normalize.undo",function(){_.undo(ft)}),dt("    fixupEdgeLabelCoords",function(){!function V(ft){c.forEach(ft.edges(),function(dt){var wt=ft.edge(dt);if(c.has(wt,"x"))switch(("l"===wt.labelpos||"r"===wt.labelpos)&&(wt.width-=wt.labeloffset),wt.labelpos){case"l":wt.x-=wt.width/2+wt.labeloffset;break;case"r":wt.x+=wt.width/2+wt.labeloffset}})}(ft)}),dt("    undoCoordinateSystem",function(){f.undo(ft)}),dt("    translateGraph",function(){!function nt(ft){var dt=Number.POSITIVE_INFINITY,wt=0,Bt=Number.POSITIVE_INFINITY,re=0,ce=ft.graph(),he=ce.marginx||0,_e=ce.marginy||0;function qe(ke){var It=ke.x,$t=ke.y,Ut=ke.width,Jt=ke.height;dt=Math.min(dt,It-Ut/2),wt=Math.max(wt,It+Ut/2),Bt=Math.min(Bt,$t-Jt/2),re=Math.max(re,$t+Jt/2)}c.forEach(ft.nodes(),function(ke){qe(ft.node(ke))}),c.forEach(ft.edges(),function(ke){var It=ft.edge(ke);c.has(It,"x")&&qe(It)}),dt-=he,Bt-=_e,c.forEach(ft.nodes(),function(ke){var It=ft.node(ke);It.x-=dt,It.y-=Bt}),c.forEach(ft.edges(),function(ke){var It=ft.edge(ke);c.forEach(It.points,function($t){$t.x-=dt,$t.y-=Bt}),c.has(It,"x")&&(It.x-=dt),c.has(It,"y")&&(It.y-=Bt)}),ce.width=wt-dt+he,ce.height=re-Bt+_e}(ft)}),dt("    assignNodeIntersects",function(){!function tt(ft){c.forEach(ft.edges(),function(dt){var ce,he,wt=ft.edge(dt),Bt=ft.node(dt.v),re=ft.node(dt.w);wt.points?(ce=wt.points[0],he=wt.points[wt.points.length-1]):(wt.points=[],ce=re,he=Bt),wt.points.unshift(T.intersectRect(Bt,ce)),wt.points.push(T.intersectRect(re,he))})}(ft)}),dt("    reversePoints",function(){!function D(ft){c.forEach(ft.edges(),function(dt){var wt=ft.edge(dt);wt.reversed&&wt.points.reverse()})}(ft)}),dt("    acyclic.undo",function(){x.undo(ft)})}(Bt,wt)}),wt("  updateInputGraph",function(){!function M(ft,dt){c.forEach(ft.nodes(),function(wt){var Bt=ft.node(wt),re=dt.node(wt);Bt&&(Bt.x=re.x,Bt.y=re.y,dt.children(wt).length&&(Bt.width=re.width,Bt.height=re.height))}),c.forEach(ft.edges(),function(wt){var Bt=ft.edge(wt),re=dt.edge(wt);Bt.points=re.points,c.has(re,"x")&&(Bt.x=re.x,Bt.y=re.y)}),ft.graph().width=dt.graph().width,ft.graph().height=dt.graph().height}(ft,Bt)})})};var F=["nodesep","edgesep","ranksep","marginx","marginy"],Z={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Y=["acyclicer","ranker","rankdir","align"],U=["width","height"],rt={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],st={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},K=["labelpos"];function jt(ft,dt){return c.mapValues(c.pick(ft,dt),Number)}function Nt(ft){var dt={};return c.forEach(ft,function(wt,Bt){dt[Bt.toLowerCase()]=wt}),dt}},45760:(w,E,s)=>{var c;try{c={cloneDeep:s(90733),constant:s(76684),defaults:s(28800),each:s(35474),filter:s(35281),find:s(62516),flatten:s(22274),forEach:s(89851),forIn:s(41176),has:s(54842),isUndefined:s(34235),last:s(25809),map:s(19984),mapValues:s(10203),max:s(18176),merge:s(80567),min:s(29439),minBy:s(29525),now:s(31710),pick:s(16372),range:s(90361),reduce:s(81337),sortBy:s(12906),uniqueId:s(51541),values:s(90377),zipObject:s(21617)}}catch(x){}c||(c=window._),w.exports=c},1230:(w,E,s)=>{var c=s(45760),x=s(11510);function g(l,h,f,u,m,T,L){var I=l.children(L);if(I.length){var R=x.addBorderNode(l,"_bt"),M=x.addBorderNode(l,"_bb"),F=l.node(L);l.setParent(R,L),F.borderTop=R,l.setParent(M,L),F.borderBottom=M,c.forEach(I,function(Z){g(l,h,f,u,m,T,Z);var Y=l.node(Z),U=Y.borderTop?Y.borderTop:Z,rt=Y.borderBottom?Y.borderBottom:Z,q=Y.borderTop?u:2*u,st=U!==rt?1:m-T[L]+1;l.setEdge(R,U,{weight:q,minlen:st,nestingEdge:!0}),l.setEdge(rt,M,{weight:q,minlen:st,nestingEdge:!0})}),l.parent(L)||l.setEdge(h,R,{weight:0,minlen:m+T[L]})}else L!==h&&l.setEdge(h,L,{weight:0,minlen:f})}w.exports={run:function _(l){var h=x.addDummyNode(l,"root",{},"_root"),f=function p(l){var h={};function f(u,m){var T=l.children(u);T&&T.length&&c.forEach(T,function(L){f(L,m+1)}),h[u]=m}return c.forEach(l.children(),function(u){f(u,1)}),h}(l),u=c.max(c.values(f))-1,m=2*u+1;l.graph().nestingRoot=h,c.forEach(l.edges(),function(L){l.edge(L).minlen*=m});var T=function t(l){return c.reduce(l.edges(),function(h,f){return h+l.edge(f).weight},0)}(l)+1;c.forEach(l.children(),function(L){g(l,h,m,T,u,f,L)}),l.graph().nodeRankFactor=m},cleanup:function d(l){var h=l.graph();l.removeNode(h.nestingRoot),delete h.nestingRoot,c.forEach(l.edges(),function(f){l.edge(f).nestingEdge&&l.removeEdge(f)})}}},91496:(w,E,s)=>{"use strict";var c=s(45760),x=s(11510);w.exports={run:function _(t){t.graph().dummyChains=[],c.forEach(t.edges(),function(d){!function g(t,d){var l=d.v,h=t.node(l).rank,f=d.w,u=t.node(f).rank,m=d.name,T=t.edge(d),L=T.labelRank;if(u!==h+1){var I,R,M;for(t.removeEdge(d),M=0,++h;h<u;++M,++h)T.points=[],I=x.addDummyNode(t,"edge",R={width:0,height:0,edgeLabel:T,edgeObj:d,rank:h},"_d"),h===L&&(R.width=T.width,R.height=T.height,R.dummy="edge-label",R.labelpos=T.labelpos),t.setEdge(l,I,{weight:T.weight},m),0===M&&t.graph().dummyChains.push(I),l=I;t.setEdge(l,f,{weight:T.weight},m)}}(t,d)})},undo:function p(t){c.forEach(t.graph().dummyChains,function(d){var f,l=t.node(d),h=l.edgeLabel;for(t.setEdge(l.edgeObj,h);l.dummy;)f=t.successors(d)[0],t.removeNode(d),h.points.push({x:l.x,y:l.y}),"edge-label"===l.dummy&&(h.x=l.x,h.y=l.y,h.width=l.width,h.height=l.height),l=t.node(d=f)})}}},33034:(w,E,s)=>{var c=s(45760);w.exports=function x(_,g,p){var d,t={};c.forEach(p,function(l){for(var f,u,h=_.parent(l);h;){if((f=_.parent(h))?(u=t[f],t[f]=h):(u=d,d=h),u&&u!==h)return void g.setEdge(u,h);h=f}})}},81323:(w,E,s)=>{var c=s(45760);w.exports=function x(_,g){return c.map(g,function(p){var t=_.inEdges(p);if(t.length){var d=c.reduce(t,function(l,h){var f=_.edge(h),u=_.node(h.v);return{sum:l.sum+f.weight*u.order,weight:l.weight+f.weight}},{sum:0,weight:0});return{v:p,barycenter:d.sum/d.weight,weight:d.weight}}return{v:p}})}},1686:(w,E,s)=>{var c=s(45760),x=s(36456).Graph;w.exports=function _(p,t,d){var l=function g(p){for(var t;p.hasNode(t=c.uniqueId("_root")););return t}(p),h=new x({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(f){return p.node(f)});return c.forEach(p.nodes(),function(f){var u=p.node(f),m=p.parent(f);(u.rank===t||u.minRank<=t&&t<=u.maxRank)&&(h.setNode(f),h.setParent(f,m||l),c.forEach(p[d](f),function(T){var L=T.v===f?T.w:T.v,I=h.edge(L,f),R=c.isUndefined(I)?0:I.weight;h.setEdge(L,f,{weight:p.edge(T).weight+R})}),c.has(u,"minRank")&&h.setNode(f,{borderLeft:u.borderLeft[t],borderRight:u.borderRight[t]}))}),h}},18796:(w,E,s)=>{"use strict";var c=s(45760);function _(g,p,t){for(var d=c.zipObject(t,c.map(t,function(T,L){return L})),l=c.flatten(c.map(p,function(T){return c.sortBy(c.map(g.outEdges(T),function(L){return{pos:d[L.w],weight:g.edge(L).weight}}),"pos")}),!0),h=1;h<t.length;)h<<=1;var f=2*h-1;h-=1;var u=c.map(new Array(f),function(){return 0}),m=0;return c.forEach(l.forEach(function(T){var L=T.pos+h;u[L]+=T.weight;for(var I=0;L>0;)L%2&&(I+=u[L+1]),u[L=L-1>>1]+=T.weight;m+=T.weight*I})),m}w.exports=function x(g,p){for(var t=0,d=1;d<p.length;++d)t+=_(g,p[d-1],p[d]);return t}},32974:(w,E,s)=>{"use strict";var c=s(45760),x=s(49402),_=s(18796),g=s(61057),p=s(1686),t=s(33034),d=s(36456).Graph,l=s(11510);function f(T,L,I){return c.map(L,function(R){return p(T,R,I)})}function u(T,L){var I=new d;c.forEach(T,function(R){var M=R.graph().root,F=g(R,M,I,L);c.forEach(F.vs,function(Z,Y){R.node(Z).order=Y}),t(R,I,F.vs)})}function m(T,L){c.forEach(L,function(I){c.forEach(I,function(R,M){T.node(R).order=M})})}w.exports=function h(T){var L=l.maxRank(T),I=f(T,c.range(1,L+1),"inEdges"),R=f(T,c.range(L-1,-1,-1),"outEdges"),M=x(T);m(T,M);for(var Z,F=Number.POSITIVE_INFINITY,Y=0,U=0;U<4;++Y,++U){u(Y%2?I:R,Y%4>=2),M=l.buildLayerMatrix(T);var rt=_(T,M);rt<F&&(U=0,Z=c.cloneDeep(M),F=rt)}m(T,Z)}},49402:(w,E,s)=>{"use strict";var c=s(45760);w.exports=function x(_){var g={},p=c.filter(_.nodes(),function(f){return!_.children(f).length}),t=c.max(c.map(p,function(f){return _.node(f).rank})),d=c.map(c.range(t+1),function(){return[]}),h=c.sortBy(p,function(f){return _.node(f).rank});return c.forEach(h,function l(f){if(!c.has(g,f)){g[f]=!0;var u=_.node(f);d[u.rank].push(f),c.forEach(_.successors(f),l)}}),d}},83826:(w,E,s)=>{"use strict";var c=s(45760);w.exports=function x(p,t){var d={};return c.forEach(p,function(h,f){var u=d[h.v]={indegree:0,in:[],out:[],vs:[h.v],i:f};c.isUndefined(h.barycenter)||(u.barycenter=h.barycenter,u.weight=h.weight)}),c.forEach(t.edges(),function(h){var f=d[h.v],u=d[h.w];!c.isUndefined(f)&&!c.isUndefined(u)&&(u.indegree++,f.out.push(d[h.w]))}),function _(p){var t=[];function d(f){return function(u){u.merged||(c.isUndefined(u.barycenter)||c.isUndefined(f.barycenter)||u.barycenter>=f.barycenter)&&function g(p,t){var d=0,l=0;p.weight&&(d+=p.barycenter*p.weight,l+=p.weight),t.weight&&(d+=t.barycenter*t.weight,l+=t.weight),p.vs=t.vs.concat(p.vs),p.barycenter=d/l,p.weight=l,p.i=Math.min(t.i,p.i),t.merged=!0}(f,u)}}function l(f){return function(u){u.in.push(f),0==--u.indegree&&p.push(u)}}for(;p.length;){var h=p.pop();t.push(h),c.forEach(h.in.reverse(),d(h)),c.forEach(h.out,l(h))}return c.map(c.filter(t,function(f){return!f.merged}),function(f){return c.pick(f,["vs","i","barycenter","weight"])})}(c.filter(d,function(h){return!h.indegree}))}},61057:(w,E,s)=>{var c=s(45760),x=s(81323),_=s(83826),g=s(93803);w.exports=function p(l,h,f,u){var m=l.children(h),T=l.node(h),L=T?T.borderLeft:void 0,I=T?T.borderRight:void 0,R={};L&&(m=c.filter(m,function(rt){return rt!==L&&rt!==I}));var M=x(l,m);c.forEach(M,function(rt){if(l.children(rt.v).length){var q=p(l,rt.v,f,u);R[rt.v]=q,c.has(q,"barycenter")&&function d(l,h){c.isUndefined(l.barycenter)?(l.barycenter=h.barycenter,l.weight=h.weight):(l.barycenter=(l.barycenter*l.weight+h.barycenter*h.weight)/(l.weight+h.weight),l.weight+=h.weight)}(rt,q)}});var F=_(M,f);!function t(l,h){c.forEach(l,function(f){f.vs=c.flatten(f.vs.map(function(u){return h[u]?h[u].vs:u}),!0)})}(F,R);var Z=g(F,u);if(L&&(Z.vs=c.flatten([L,Z.vs,I],!0),l.predecessors(L).length)){var Y=l.node(l.predecessors(L)[0]),U=l.node(l.predecessors(I)[0]);c.has(Z,"barycenter")||(Z.barycenter=0,Z.weight=0),Z.barycenter=(Z.barycenter*Z.weight+Y.order+U.order)/(Z.weight+2),Z.weight+=2}return Z}},93803:(w,E,s)=>{var c=s(45760),x=s(11510);function g(t,d,l){for(var h;d.length&&(h=c.last(d)).i<=l;)d.pop(),t.push(h.vs),l++;return l}w.exports=function _(t,d){var l=x.partition(t,function(R){return c.has(R,"barycenter")}),h=l.lhs,f=c.sortBy(l.rhs,function(R){return-R.i}),u=[],m=0,T=0,L=0;h.sort(function p(t){return function(d,l){return d.barycenter<l.barycenter?-1:d.barycenter>l.barycenter?1:t?l.i-d.i:d.i-l.i}}(!!d)),L=g(u,f,L),c.forEach(h,function(R){L+=R.vs.length,u.push(R.vs),m+=R.barycenter*R.weight,T+=R.weight,L=g(u,f,L)});var I={vs:c.flatten(u,!0)};return T&&(I.barycenter=m/T,I.weight=T),I}},60162:(w,E,s)=>{var c=s(45760);w.exports=function x(p){var t=function g(p){var t={},d=0;return c.forEach(p.children(),function l(h){var f=d;c.forEach(p.children(h),l),t[h]={low:f,lim:d++}}),t}(p);c.forEach(p.graph().dummyChains,function(d){for(var l=p.node(d),h=l.edgeObj,f=function _(p,t,d,l){var T,L,h=[],f=[],u=Math.min(t[d].low,t[l].low),m=Math.max(t[d].lim,t[l].lim);T=d;do{T=p.parent(T),h.push(T)}while(T&&(t[T].low>u||m>t[T].lim));for(L=T,T=l;(T=p.parent(T))!==L;)f.push(T);return{path:h.concat(f.reverse()),lca:L}}(p,t,h.v,h.w),u=f.path,m=f.lca,T=0,L=u[T],I=!0;d!==h.w;){if(l=p.node(d),I){for(;(L=u[T])!==m&&p.node(L).maxRank<l.rank;)T++;L===m&&(I=!1)}if(!I){for(;T<u.length-1&&p.node(L=u[T+1]).minRank<=l.rank;)T++;L=u[T]}p.setParent(d,L),d=p.successors(d)[0]}})}},54058:(w,E,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(11510);function g(F,Z){var Y={};return c.reduce(Z,function U(rt,q){var st=0,K=0,X=rt.length,W=c.last(q);return c.forEach(q,function(at,H){var Q=function t(F,Z){if(F.node(Z).dummy)return c.find(F.predecessors(Z),function(Y){return F.node(Y).dummy})}(F,at),nt=Q?F.node(Q).order:X;(Q||at===W)&&(c.forEach(q.slice(K,H+1),function(tt){c.forEach(F.predecessors(tt),function(V){var D=F.node(V),mt=D.order;(mt<st||nt<mt)&&(!D.dummy||!F.node(tt).dummy)&&d(Y,V,tt)})}),K=H+1,st=nt)}),q}),Y}function p(F,Z){var Y={};function U(q,st,K,X,W){var at;c.forEach(c.range(st,K),function(H){F.node(at=q[H]).dummy&&c.forEach(F.predecessors(at),function(Q){var nt=F.node(Q);nt.dummy&&(nt.order<X||nt.order>W)&&d(Y,Q,at)})})}return c.reduce(Z,function rt(q,st){var X,K=-1,W=0;return c.forEach(st,function(at,H){if("border"===F.node(at).dummy){var Q=F.predecessors(at);Q.length&&(X=F.node(Q[0]).order,U(st,W,H,K,X),W=H,K=X)}U(st,W,st.length,X,q.length)}),st}),Y}function d(F,Z,Y){if(Z>Y){var U=Z;Z=Y,Y=U}var rt=F[Z];rt||(F[Z]=rt={}),rt[Y]=!0}function l(F,Z,Y){if(Z>Y){var U=Z;Z=Y,Y=U}return c.has(F[Z],Y)}function h(F,Z,Y,U){var rt={},q={},st={};return c.forEach(Z,function(K){c.forEach(K,function(X,W){rt[X]=X,q[X]=X,st[X]=W})}),c.forEach(Z,function(K){var X=-1;c.forEach(K,function(W){var at=U(W);if(at.length)for(var H=((at=c.sortBy(at,function(V){return st[V]})).length-1)/2,Q=Math.floor(H),nt=Math.ceil(H);Q<=nt;++Q){var tt=at[Q];q[W]===W&&X<st[tt]&&!l(Y,W,tt)&&(q[tt]=W,q[W]=rt[W]=rt[tt],X=st[tt])}})}),{root:rt,align:q}}function f(F,Z,Y,U,rt){var q={},st=function u(F,Z,Y,U){var rt=new x,q=F.graph(),st=function R(F,Z,Y){return function(U,rt,q){var W,st=U.node(rt),K=U.node(q),X=0;if(X+=st.width/2,c.has(st,"labelpos"))switch(st.labelpos.toLowerCase()){case"l":W=-st.width/2;break;case"r":W=st.width/2}if(W&&(X+=Y?W:-W),W=0,X+=(st.dummy?Z:F)/2,X+=(K.dummy?Z:F)/2,X+=K.width/2,c.has(K,"labelpos"))switch(K.labelpos.toLowerCase()){case"l":W=K.width/2;break;case"r":W=-K.width/2}return W&&(X+=Y?W:-W),W=0,X}}(q.nodesep,q.edgesep,U);return c.forEach(Z,function(K){var X;c.forEach(K,function(W){var at=Y[W];if(rt.setNode(at),X){var H=Y[X],Q=rt.edge(H,at);rt.setEdge(H,at,Math.max(st(F,W,X),Q||0))}X=W})}),rt}(F,Z,Y,rt),K=rt?"borderLeft":"borderRight";function X(H,Q){for(var nt=st.nodes(),tt=nt.pop(),V={};tt;)V[tt]?H(tt):(V[tt]=!0,nt.push(tt),nt=nt.concat(Q(tt))),tt=nt.pop()}return X(function W(H){q[H]=st.inEdges(H).reduce(function(Q,nt){return Math.max(Q,q[nt.v]+st.edge(nt))},0)},st.predecessors.bind(st)),X(function at(H){var Q=st.outEdges(H).reduce(function(tt,V){return Math.min(tt,q[V.w]-st.edge(V))},Number.POSITIVE_INFINITY),nt=F.node(H);Q!==Number.POSITIVE_INFINITY&&nt.borderType!==K&&(q[H]=Math.max(q[H],Q))},st.successors.bind(st)),c.forEach(U,function(H){q[H]=q[Y[H]]}),q}function m(F,Z){return c.minBy(c.values(Z),function(Y){var U=Number.NEGATIVE_INFINITY,rt=Number.POSITIVE_INFINITY;return c.forIn(Y,function(q,st){var K=function M(F,Z){return F.node(Z).width}(F,st)/2;U=Math.max(q+K,U),rt=Math.min(q-K,rt)}),U-rt})}function T(F,Z){var Y=c.values(Z),U=c.min(Y),rt=c.max(Y);c.forEach(["u","d"],function(q){c.forEach(["l","r"],function(st){var W,K=q+st,X=F[K];if(X!==Z){var at=c.values(X);(W="l"===st?U-c.min(at):rt-c.max(at))&&(F[K]=c.mapValues(X,function(H){return H+W}))}})})}function L(F,Z){return c.mapValues(F.ul,function(Y,U){if(Z)return F[Z.toLowerCase()][U];var rt=c.sortBy(c.map(F,U));return(rt[1]+rt[2])/2})}w.exports={positionX:function I(F){var rt,Z=_.buildLayerMatrix(F),Y=c.merge(g(F,Z),p(F,Z)),U={};c.forEach(["u","d"],function(st){rt="u"===st?Z:c.values(Z).reverse(),c.forEach(["l","r"],function(K){"r"===K&&(rt=c.map(rt,function(H){return c.values(H).reverse()}));var X=("u"===st?F.predecessors:F.successors).bind(F),W=h(0,rt,Y,X),at=f(F,rt,W.root,W.align,"r"===K);"r"===K&&(at=c.mapValues(at,function(H){return-H})),U[st+K]=at})});var q=m(F,U);return T(U,q),L(U,F.graph().align)},findType1Conflicts:g,findType2Conflicts:p,addConflict:d,hasConflict:l,verticalAlignment:h,horizontalCompaction:f,alignCoordinates:T,findSmallestWidthAlignment:m,balance:L}},78226:(w,E,s)=>{"use strict";var c=s(45760),x=s(11510),_=s(54058).positionX;w.exports=function g(t){(function p(t){var d=x.buildLayerMatrix(t),l=t.graph().ranksep,h=0;c.forEach(d,function(f){var u=c.max(c.map(f,function(m){return t.node(m).height}));c.forEach(f,function(m){t.node(m).y=h+u/2}),h+=u+l})})(t=x.asNonCompoundGraph(t)),c.forEach(_(t),function(d,l){t.node(l).x=d})}},96632:(w,E,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(1916).slack;function p(l,h){return c.forEach(l.nodes(),function f(u){c.forEach(h.nodeEdges(u),function(m){var T=m.v,L=u===T?m.w:T;!l.hasNode(L)&&!_(h,m)&&(l.setNode(L,{}),l.setEdge(u,L,{}),f(L))})}),l.nodeCount()}function t(l,h){return c.minBy(h.edges(),function(f){if(l.hasNode(f.v)!==l.hasNode(f.w))return _(h,f)})}function d(l,h,f){c.forEach(l.nodes(),function(u){h.node(u).rank+=f})}w.exports=function g(l){var m,T,h=new x({directed:!1}),f=l.nodes()[0],u=l.nodeCount();for(h.setNode(f,{});p(h,l)<u;)m=t(h,l),T=h.hasNode(m.v)?_(l,m):-_(l,m),d(h,l,T);return h}},94124:(w,E,s)=>{"use strict";var x=s(1916).longestPath,_=s(96632),g=s(63804);w.exports=function p(h){switch(h.graph().ranker){case"network-simplex":default:!function l(h){g(h)}(h);break;case"tight-tree":!function d(h){x(h),_(h)}(h);break;case"longest-path":t(h)}};var t=x},63804:(w,E,s)=>{"use strict";var c=s(45760),x=s(96632),_=s(1916).slack,g=s(1916).longestPath,p=s(36456).alg.preorder,t=s(36456).alg.postorder,d=s(11510).simplify;function l(Y){Y=d(Y),g(Y);var rt,U=x(Y);for(m(U),h(U,Y);rt=L(U);)R(U,Y,rt,I(U,Y,rt))}function h(Y,U){var rt=t(Y,Y.nodes());rt=rt.slice(0,rt.length-1),c.forEach(rt,function(q){!function f(Y,U,rt){var q=Y.node(rt);Y.edge(rt,q.parent).cutvalue=u(Y,U,rt)}(Y,U,q)})}function u(Y,U,rt){var st=Y.node(rt).parent,K=!0,X=U.edge(rt,st),W=0;return X||(K=!1,X=U.edge(st,rt)),W=X.weight,c.forEach(U.nodeEdges(rt),function(at){var H=at.v===rt,Q=H?at.w:at.v;if(Q!==st){var nt=H===K,tt=U.edge(at).weight;if(W+=nt?tt:-tt,function F(Y,U,rt){return Y.hasEdge(U,rt)}(Y,rt,Q)){var V=Y.edge(rt,Q).cutvalue;W+=nt?-V:V}}}),W}function m(Y,U){arguments.length<2&&(U=Y.nodes()[0]),T(Y,{},1,U)}function T(Y,U,rt,q,st){var K=rt,X=Y.node(q);return U[q]=!0,c.forEach(Y.neighbors(q),function(W){c.has(U,W)||(rt=T(Y,U,rt,W,q))}),X.low=K,X.lim=rt++,st?X.parent=st:delete X.parent,rt}function L(Y){return c.find(Y.edges(),function(U){return Y.edge(U).cutvalue<0})}function I(Y,U,rt){var q=rt.v,st=rt.w;U.hasEdge(q,st)||(q=rt.w,st=rt.v);var K=Y.node(q),X=Y.node(st),W=K,at=!1;K.lim>X.lim&&(W=X,at=!0);var H=c.filter(U.edges(),function(Q){return at===Z(0,Y.node(Q.v),W)&&at!==Z(0,Y.node(Q.w),W)});return c.minBy(H,function(Q){return _(U,Q)})}function R(Y,U,rt,q){Y.removeEdge(rt.v,rt.w),Y.setEdge(q.v,q.w,{}),m(Y),h(Y,U),function M(Y,U){var rt=c.find(Y.nodes(),function(st){return!U.node(st).parent}),q=p(Y,rt);q=q.slice(1),c.forEach(q,function(st){var K=Y.node(st).parent,X=U.edge(st,K),W=!1;X||(X=U.edge(K,st),W=!0),U.node(st).rank=U.node(K).rank+(W?X.minlen:-X.minlen)})}(Y,U)}function Z(Y,U,rt){return rt.low<=U.lim&&U.lim<=rt.lim}w.exports=l,l.initLowLimValues=m,l.initCutValues=h,l.calcCutValue=u,l.leaveEdge=L,l.enterEdge=I,l.exchangeEdges=R},1916:(w,E,s)=>{"use strict";var c=s(45760);w.exports={longestPath:function x(g){var p={};c.forEach(g.sources(),function t(d){var l=g.node(d);if(c.has(p,d))return l.rank;p[d]=!0;var h=c.min(c.map(g.outEdges(d),function(f){return t(f.w)-g.edge(f).minlen}));return(h===Number.POSITIVE_INFINITY||null==h)&&(h=0),l.rank=h})},slack:function _(g,p){return g.node(p.w).rank-g.node(p.v).rank-g.edge(p).minlen}}},11510:(w,E,s)=>{"use strict";var c=s(45760),x=s(36456).Graph;function _(M,F,Z,Y){var U;do{U=c.uniqueId(Y)}while(M.hasNode(U));return Z.dummy=F,M.setNode(U,Z),U}function T(M){return c.max(c.map(M.nodes(),function(F){var Z=M.node(F).rank;if(!c.isUndefined(Z))return Z}))}w.exports={addDummyNode:_,simplify:function g(M){var F=(new x).setGraph(M.graph());return c.forEach(M.nodes(),function(Z){F.setNode(Z,M.node(Z))}),c.forEach(M.edges(),function(Z){var Y=F.edge(Z.v,Z.w)||{weight:0,minlen:1},U=M.edge(Z);F.setEdge(Z.v,Z.w,{weight:Y.weight+U.weight,minlen:Math.max(Y.minlen,U.minlen)})}),F},asNonCompoundGraph:function p(M){var F=new x({multigraph:M.isMultigraph()}).setGraph(M.graph());return c.forEach(M.nodes(),function(Z){M.children(Z).length||F.setNode(Z,M.node(Z))}),c.forEach(M.edges(),function(Z){F.setEdge(Z,M.edge(Z))}),F},successorWeights:function t(M){var F=c.map(M.nodes(),function(Z){var Y={};return c.forEach(M.outEdges(Z),function(U){Y[U.w]=(Y[U.w]||0)+M.edge(U).weight}),Y});return c.zipObject(M.nodes(),F)},predecessorWeights:function d(M){var F=c.map(M.nodes(),function(Z){var Y={};return c.forEach(M.inEdges(Z),function(U){Y[U.v]=(Y[U.v]||0)+M.edge(U).weight}),Y});return c.zipObject(M.nodes(),F)},intersectRect:function l(M,F){var K,X,Z=M.x,Y=M.y,U=F.x-Z,rt=F.y-Y,q=M.width/2,st=M.height/2;if(!U&&!rt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(rt)*q>Math.abs(U)*st?(rt<0&&(st=-st),K=st*U/rt,X=st):(U<0&&(q=-q),K=q,X=q*rt/U),{x:Z+K,y:Y+X}},buildLayerMatrix:function h(M){var F=c.map(c.range(T(M)+1),function(){return[]});return c.forEach(M.nodes(),function(Z){var Y=M.node(Z),U=Y.rank;c.isUndefined(U)||(F[U][Y.order]=Z)}),F},normalizeRanks:function f(M){var F=c.min(c.map(M.nodes(),function(Z){return M.node(Z).rank}));c.forEach(M.nodes(),function(Z){var Y=M.node(Z);c.has(Y,"rank")&&(Y.rank-=F)})},removeEmptyRanks:function u(M){var F=c.min(c.map(M.nodes(),function(rt){return M.node(rt).rank})),Z=[];c.forEach(M.nodes(),function(rt){var q=M.node(rt).rank-F;Z[q]||(Z[q]=[]),Z[q].push(rt)});var Y=0,U=M.graph().nodeRankFactor;c.forEach(Z,function(rt,q){c.isUndefined(rt)&&q%U!=0?--Y:Y&&c.forEach(rt,function(st){M.node(st).rank+=Y})})},addBorderNode:function m(M,F,Z,Y){var U={width:0,height:0};return arguments.length>=4&&(U.rank=Z,U.order=Y),_(M,"border",U,F)},maxRank:T,partition:function L(M,F){var Z={lhs:[],rhs:[]};return c.forEach(M,function(Y){F(Y)?Z.lhs.push(Y):Z.rhs.push(Y)}),Z},time:function I(M,F){var Z=c.now();try{return F()}finally{console.log(M+" time: "+(c.now()-Z)+"ms")}},notime:function R(M,F){return F()}}},28126:w=>{w.exports="0.8.5"},85510:(w,E,s)=>{var c=s(51838);w.exports={Graph:c.Graph,json:s(21088),alg:s(83430),version:c.version}},86730:(w,E,s)=>{var c=s(79138);w.exports=function x(_){var t,g={},p=[];function d(l){c.has(g,l)||(g[l]=!0,t.push(l),c.each(_.successors(l),d),c.each(_.predecessors(l),d))}return c.each(_.nodes(),function(l){t=[],d(l),t.length&&p.push(t)}),p}},22163:(w,E,s)=>{var c=s(79138);function _(g,p,t,d,l,h){c.has(d,p)||(d[p]=!0,t||h.push(p),c.each(l(p),function(f){_(g,f,t,d,l,h)}),t&&h.push(p))}w.exports=function x(g,p,t){c.isArray(p)||(p=[p]);var d=(g.isDirected()?g.successors:g.neighbors).bind(g),l=[],h={};return c.each(p,function(f){if(!g.hasNode(f))throw new Error("Graph does not have node: "+f);_(g,f,"post"===t,h,d,l)}),l}},25668:(w,E,s)=>{var c=s(61718),x=s(79138);w.exports=function _(g,p,t){return x.transform(g.nodes(),function(d,l){d[l]=c(g,l,p,t)},{})}},61718:(w,E,s)=>{var c=s(79138),x=s(31919);w.exports=function g(t,d,l,h){return function p(t,d,l,h){var m,T,f={},u=new x,L=function(I){var R=I.v!==m?I.v:I.w,M=f[R],F=l(I),Z=T.distance+F;if(F<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+I+" Weight: "+F);Z<M.distance&&(M.distance=Z,M.predecessor=m,u.decrease(R,Z))};for(t.nodes().forEach(function(I){var R=I===d?0:Number.POSITIVE_INFINITY;f[I]={distance:R},u.add(I,R)});u.size()>0&&(m=u.removeMin(),(T=f[m]).distance!==Number.POSITIVE_INFINITY);)h(m).forEach(L);return f}(t,String(d),l||_,h||function(f){return t.outEdges(f)})};var _=c.constant(1)},9611:(w,E,s)=>{var c=s(79138),x=s(73585);w.exports=function _(g){return c.filter(x(g),function(p){return p.length>1||1===p.length&&g.hasEdge(p[0],p[0])})}},22881:(w,E,s)=>{var c=s(79138);w.exports=function _(p,t,d){return function g(p,t,d){var l={},h=p.nodes();return h.forEach(function(f){l[f]={},l[f][f]={distance:0},h.forEach(function(u){f!==u&&(l[f][u]={distance:Number.POSITIVE_INFINITY})}),d(f).forEach(function(u){var m=u.v===f?u.w:u.v,T=t(u);l[f][m]={distance:T,predecessor:f}})}),h.forEach(function(f){var u=l[f];h.forEach(function(m){var T=l[m];h.forEach(function(L){var R=u[L],M=T[L],F=T[f].distance+R.distance;F<M.distance&&(M.distance=F,M.predecessor=R.predecessor)})})}),l}(p,t||x,d||function(l){return p.outEdges(l)})};var x=c.constant(1)},83430:(w,E,s)=>{w.exports={components:s(86730),dijkstra:s(61718),dijkstraAll:s(25668),findCycles:s(9611),floydWarshall:s(22881),isAcyclic:s(46693),postorder:s(46694),preorder:s(5330),prim:s(46823),tarjan:s(73585),topsort:s(52180)}},46693:(w,E,s)=>{var c=s(52180);w.exports=function x(_){try{c(_)}catch(g){if(g instanceof c.CycleException)return!1;throw g}return!0}},46694:(w,E,s)=>{var c=s(22163);w.exports=function x(_,g){return c(_,g,"post")}},5330:(w,E,s)=>{var c=s(22163);w.exports=function x(_,g){return c(_,g,"pre")}},46823:(w,E,s)=>{var c=s(79138),x=s(66568),_=s(31919);w.exports=function g(p,t){var f,d=new x,l={},h=new _;function u(T){var L=T.v===f?T.w:T.v,I=h.priority(L);if(void 0!==I){var R=t(T);R<I&&(l[L]=f,h.decrease(L,R))}}if(0===p.nodeCount())return d;c.each(p.nodes(),function(T){h.add(T,Number.POSITIVE_INFINITY),d.setNode(T)}),h.decrease(p.nodes()[0],0);for(var m=!1;h.size()>0;){if(f=h.removeMin(),c.has(l,f))d.setEdge(f,l[f]);else{if(m)throw new Error("Input graph is not connected: "+p);m=!0}p.nodeEdges(f).forEach(u)}return d}},73585:(w,E,s)=>{var c=s(79138);w.exports=function x(_){var g=0,p=[],t={},d=[];function l(h){var f=t[h]={onStack:!0,lowlink:g,index:g++};if(p.push(h),_.successors(h).forEach(function(T){c.has(t,T)?t[T].onStack&&(f.lowlink=Math.min(f.lowlink,t[T].index)):(l(T),f.lowlink=Math.min(f.lowlink,t[T].lowlink))}),f.lowlink===f.index){var m,u=[];do{m=p.pop(),t[m].onStack=!1,u.push(m)}while(h!==m);d.push(u)}}return _.nodes().forEach(function(h){c.has(t,h)||l(h)}),d}},52180:(w,E,s)=>{var c=s(79138);function x(g){var p={},t={},d=[];if(c.each(g.sinks(),function l(h){if(c.has(t,h))throw new _;c.has(p,h)||(t[h]=!0,p[h]=!0,c.each(g.predecessors(h),l),delete t[h],d.push(h))}),c.size(p)!==g.nodeCount())throw new _;return d}function _(){}w.exports=x,x.CycleException=_,_.prototype=new Error},31919:(w,E,s)=>{var c=s(79138);function x(){this._arr=[],this._keyIndices={}}w.exports=x,x.prototype.size=function(){return this._arr.length},x.prototype.keys=function(){return this._arr.map(function(_){return _.key})},x.prototype.has=function(_){return c.has(this._keyIndices,_)},x.prototype.priority=function(_){var g=this._keyIndices[_];if(void 0!==g)return this._arr[g].priority},x.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},x.prototype.add=function(_,g){var p=this._keyIndices;if(_=String(_),!c.has(p,_)){var t=this._arr,d=t.length;return p[_]=d,t.push({key:_,priority:g}),this._decrease(d),!0}return!1},x.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var _=this._arr.pop();return delete this._keyIndices[_.key],this._heapify(0),_.key},x.prototype.decrease=function(_,g){var p=this._keyIndices[_];if(g>this._arr[p].priority)throw new Error("New priority is greater than current priority. Key: "+_+" Old: "+this._arr[p].priority+" New: "+g);this._arr[p].priority=g,this._decrease(p)},x.prototype._heapify=function(_){var g=this._arr,p=2*_,t=p+1,d=_;p<g.length&&(d=g[p].priority<g[d].priority?p:d,t<g.length&&(d=g[t].priority<g[d].priority?t:d),d!==_&&(this._swap(_,d),this._heapify(d)))},x.prototype._decrease=function(_){for(var t,g=this._arr,p=g[_].priority;0!==_&&!(g[t=_>>1].priority<p);)this._swap(_,t),_=t},x.prototype._swap=function(_,g){var p=this._arr,t=this._keyIndices,d=p[_],l=p[g];p[_]=l,p[g]=d,t[l.key]=_,t[d.key]=g}},66568:(w,E,s)=>{"use strict";var c=s(79138);w.exports=p;var _="\0";function p(u){this._isDirected=!c.has(u,"directed")||u.directed,this._isMultigraph=!!c.has(u,"multigraph")&&u.multigraph,this._isCompound=!!c.has(u,"compound")&&u.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function t(u,m){u[m]?u[m]++:u[m]=1}function d(u,m){--u[m]||delete u[m]}function l(u,m,T,L){var I=""+m,R=""+T;if(!u&&I>R){var M=I;I=R,R=M}return I+"\x01"+R+"\x01"+(c.isUndefined(L)?"\0":L)}function h(u,m,T,L){var I=""+m,R=""+T;if(!u&&I>R){var M=I;I=R,R=M}var F={v:I,w:R};return L&&(F.name=L),F}function f(u,m){return l(u,m.v,m.w,m.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0,p.prototype.isDirected=function(){return this._isDirected},p.prototype.isMultigraph=function(){return this._isMultigraph},p.prototype.isCompound=function(){return this._isCompound},p.prototype.setGraph=function(u){return this._label=u,this},p.prototype.graph=function(){return this._label},p.prototype.setDefaultNodeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultNodeLabelFn=u,this},p.prototype.nodeCount=function(){return this._nodeCount},p.prototype.nodes=function(){return c.keys(this._nodes)},p.prototype.sources=function(){var u=this;return c.filter(this.nodes(),function(m){return c.isEmpty(u._in[m])})},p.prototype.sinks=function(){var u=this;return c.filter(this.nodes(),function(m){return c.isEmpty(u._out[m])})},p.prototype.setNodes=function(u,m){var T=arguments,L=this;return c.each(u,function(I){T.length>1?L.setNode(I,m):L.setNode(I)}),this},p.prototype.setNode=function(u,m){return c.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=m),this):(this._nodes[u]=arguments.length>1?m:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=_,this._children[u]={},this._children[_][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},p.prototype.node=function(u){return this._nodes[u]},p.prototype.hasNode=function(u){return c.has(this._nodes,u)},p.prototype.removeNode=function(u){var m=this;if(c.has(this._nodes,u)){var T=function(L){m.removeEdge(m._edgeObjs[L])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],c.each(this.children(u),function(L){m.setParent(L)}),delete this._children[u]),c.each(c.keys(this._in[u]),T),delete this._in[u],delete this._preds[u],c.each(c.keys(this._out[u]),T),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},p.prototype.setParent=function(u,m){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(m))m=_;else{for(var T=m+="";!c.isUndefined(T);T=this.parent(T))if(T===u)throw new Error("Setting "+m+" as parent of "+u+" would create a cycle");this.setNode(m)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=m,this._children[m][u]=!0,this},p.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},p.prototype.parent=function(u){if(this._isCompound){var m=this._parent[u];if(m!==_)return m}},p.prototype.children=function(u){if(c.isUndefined(u)&&(u=_),this._isCompound){var m=this._children[u];if(m)return c.keys(m)}else{if(u===_)return this.nodes();if(this.hasNode(u))return[]}},p.prototype.predecessors=function(u){var m=this._preds[u];if(m)return c.keys(m)},p.prototype.successors=function(u){var m=this._sucs[u];if(m)return c.keys(m)},p.prototype.neighbors=function(u){var m=this.predecessors(u);if(m)return c.union(m,this.successors(u))},p.prototype.isLeaf=function(u){return 0===(this.isDirected()?this.successors(u):this.neighbors(u)).length},p.prototype.filterNodes=function(u){var m=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});m.setGraph(this.graph());var T=this;c.each(this._nodes,function(R,M){u(M)&&m.setNode(M,R)}),c.each(this._edgeObjs,function(R){m.hasNode(R.v)&&m.hasNode(R.w)&&m.setEdge(R,T.edge(R))});var L={};function I(R){var M=T.parent(R);return void 0===M||m.hasNode(M)?(L[R]=M,M):M in L?L[M]:I(M)}return this._isCompound&&c.each(m.nodes(),function(R){m.setParent(R,I(R))}),m},p.prototype.setDefaultEdgeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultEdgeLabelFn=u,this},p.prototype.edgeCount=function(){return this._edgeCount},p.prototype.edges=function(){return c.values(this._edgeObjs)},p.prototype.setPath=function(u,m){var T=this,L=arguments;return c.reduce(u,function(I,R){return L.length>1?T.setEdge(I,R,m):T.setEdge(I,R),R}),this},p.prototype.setEdge=function(){var u,m,T,L,I=!1,R=arguments[0];"object"==typeof R&&null!==R&&"v"in R?(u=R.v,m=R.w,T=R.name,2===arguments.length&&(L=arguments[1],I=!0)):(u=R,m=arguments[1],T=arguments[3],arguments.length>2&&(L=arguments[2],I=!0)),u=""+u,m=""+m,c.isUndefined(T)||(T=""+T);var M=l(this._isDirected,u,m,T);if(c.has(this._edgeLabels,M))return I&&(this._edgeLabels[M]=L),this;if(!c.isUndefined(T)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(m),this._edgeLabels[M]=I?L:this._defaultEdgeLabelFn(u,m,T);var F=h(this._isDirected,u,m,T);return u=F.v,m=F.w,Object.freeze(F),this._edgeObjs[M]=F,t(this._preds[m],u),t(this._sucs[u],m),this._in[m][M]=F,this._out[u][M]=F,this._edgeCount++,this},p.prototype.edge=function(u,m,T){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,m,T);return this._edgeLabels[L]},p.prototype.hasEdge=function(u,m,T){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,m,T);return c.has(this._edgeLabels,L)},p.prototype.removeEdge=function(u,m,T){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,m,T),I=this._edgeObjs[L];return I&&(u=I.v,m=I.w,delete this._edgeLabels[L],delete this._edgeObjs[L],d(this._preds[m],u),d(this._sucs[u],m),delete this._in[m][L],delete this._out[u][L],this._edgeCount--),this},p.prototype.inEdges=function(u,m){var T=this._in[u];if(T){var L=c.values(T);return m?c.filter(L,function(I){return I.v===m}):L}},p.prototype.outEdges=function(u,m){var T=this._out[u];if(T){var L=c.values(T);return m?c.filter(L,function(I){return I.w===m}):L}},p.prototype.nodeEdges=function(u,m){var T=this.inEdges(u,m);if(T)return T.concat(this.outEdges(u,m))}},51838:(w,E,s)=>{w.exports={Graph:s(66568),version:s(75089)}},21088:(w,E,s)=>{var c=s(79138),x=s(66568);function g(d){return c.map(d.nodes(),function(l){var h=d.node(l),f=d.parent(l),u={v:l};return c.isUndefined(h)||(u.value=h),c.isUndefined(f)||(u.parent=f),u})}function p(d){return c.map(d.edges(),function(l){var h=d.edge(l),f={v:l.v,w:l.w};return c.isUndefined(l.name)||(f.name=l.name),c.isUndefined(h)||(f.value=h),f})}w.exports={write:function _(d){var l={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:g(d),edges:p(d)};return c.isUndefined(d.graph())||(l.value=c.clone(d.graph())),l},read:function t(d){var l=new x(d.options).setGraph(d.value);return c.each(d.nodes,function(h){l.setNode(h.v,h.value),h.parent&&l.setParent(h.v,h.parent)}),c.each(d.edges,function(h){l.setEdge({v:h.v,w:h.w,name:h.name},h.value)}),l}}},79138:(w,E,s)=>{var c;try{c={clone:s(11094),constant:s(76684),each:s(35474),filter:s(35281),has:s(54842),isArray:s(21503),isEmpty:s(71973),isFunction:s(75946),isUndefined:s(34235),keys:s(118),map:s(19984),reduce:s(81337),size:s(55637),transform:s(89416),union:s(68921),values:s(90377)}}catch(x){}c||(c=window._),w.exports=c},75089:w=>{w.exports="2.1.8"},50623:w=>{"use strict";w.exports=function(s){return null!=s&&"object"==typeof s&&!1===Array.isArray(s)}},52872:w=>{var E=Object.prototype.toString;function s(h){return"function"==typeof h.constructor?h.constructor.name:null}w.exports=function(f){if(void 0===f)return"undefined";if(null===f)return"null";var u=typeof f;if("boolean"===u)return"boolean";if("string"===u)return"string";if("number"===u)return"number";if("symbol"===u)return"symbol";if("function"===u)return function p(h,f){return"GeneratorFunction"===s(h)}(f)?"generatorfunction":"function";if(function c(h){return Array.isArray?Array.isArray(h):h instanceof Array}(f))return"array";if(function l(h){return!(!h.constructor||"function"!=typeof h.constructor.isBuffer)&&h.constructor.isBuffer(h)}(f))return"buffer";if(function d(h){try{if("number"==typeof h.length&&"function"==typeof h.callee)return!0}catch(f){if(-1!==f.message.indexOf("callee"))return!0}return!1}(f))return"arguments";if(function _(h){return h instanceof Date||"function"==typeof h.toDateString&&"function"==typeof h.getDate&&"function"==typeof h.setDate}(f))return"date";if(function x(h){return h instanceof Error||"string"==typeof h.message&&h.constructor&&"number"==typeof h.constructor.stackTraceLimit}(f))return"error";if(function g(h){return h instanceof RegExp||"string"==typeof h.flags&&"boolean"==typeof h.ignoreCase&&"boolean"==typeof h.multiline&&"boolean"==typeof h.global}(f))return"regexp";switch(s(f)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function t(h){return"function"==typeof h.throw&&"function"==typeof h.return&&"function"==typeof h.next}(f))return"generator";switch(u=E.call(f)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return u.slice(8,-1).toLowerCase().replace(/\s/g,"")}},37244:(w,E,s)=>{var _=s(53436)(s(12119),"DataView");w.exports=_},54994:(w,E,s)=>{var c=s(64312),x=s(46421),_=s(15764),g=s(18685),p=s(26676);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=g,t.prototype.set=p,w.exports=t},9215:(w,E,s)=>{var c=s(41840),x=s(34378),_=s(54981),g=s(67343),p=s(98895);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=g,t.prototype.set=p,w.exports=t},51501:(w,E,s)=>{var _=s(53436)(s(12119),"Map");w.exports=_},99850:(w,E,s)=>{var c=s(10638),x=s(11184),_=s(70866),g=s(43771),p=s(51772);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=g,t.prototype.set=p,w.exports=t},44267:(w,E,s)=>{var _=s(53436)(s(12119),"Promise");w.exports=_},46323:(w,E,s)=>{var _=s(53436)(s(12119),"Set");w.exports=_},58849:(w,E,s)=>{var c=s(99850),x=s(4600),_=s(31387);function g(p){var t=-1,d=null==p?0:p.length;for(this.__data__=new c;++t<d;)this.add(p[t])}g.prototype.add=g.prototype.push=x,g.prototype.has=_,w.exports=g},2858:(w,E,s)=>{var c=s(9215),x=s(13720),_=s(64410),g=s(45576),p=s(22247),t=s(41585);function d(l){var h=this.__data__=new c(l);this.size=h.size}d.prototype.clear=x,d.prototype.delete=_,d.prototype.get=g,d.prototype.has=p,d.prototype.set=t,w.exports=d},60443:(w,E,s)=>{var c=s(12119);w.exports=c.Symbol},73457:(w,E,s)=>{var c=s(12119);w.exports=c.Uint8Array},24243:(w,E,s)=>{var _=s(53436)(s(12119),"WeakMap");w.exports=_},26999:w=>{w.exports=function E(s,c,x){switch(x.length){case 0:return s.call(c);case 1:return s.call(c,x[0]);case 2:return s.call(c,x[0],x[1]);case 3:return s.call(c,x[0],x[1],x[2])}return s.apply(c,x)}},96837:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length;++x<_&&!1!==c(s[x],x,s););return s}},69779:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length,g=0,p=[];++x<_;){var t=s[x];c(t,x,s)&&(p[g++]=t)}return p}},61253:(w,E,s)=>{var c=s(14164);w.exports=function x(_,g){return!(null==_||!_.length)&&c(_,g,0)>-1}},37609:w=>{w.exports=function E(s,c,x){for(var _=-1,g=null==s?0:s.length;++_<g;)if(x(c,s[_]))return!0;return!1}},72271:(w,E,s)=>{var c=s(85334),x=s(77151),_=s(21503),g=s(80891),p=s(58442),t=s(48159),l=Object.prototype.hasOwnProperty;w.exports=function h(f,u){var m=_(f),T=!m&&x(f),L=!m&&!T&&g(f),I=!m&&!T&&!L&&t(f),R=m||T||L||I,M=R?c(f.length,String):[],F=M.length;for(var Z in f)(u||l.call(f,Z))&&(!R||!("length"==Z||L&&("offset"==Z||"parent"==Z)||I&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||p(Z,F)))&&M.push(Z);return M}},84633:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length,g=Array(_);++x<_;)g[x]=c(s[x],x,s);return g}},85059:w=>{w.exports=function E(s,c){for(var x=-1,_=c.length,g=s.length;++x<_;)s[g+x]=c[x];return s}},8745:w=>{w.exports=function E(s,c,x,_){var g=-1,p=null==s?0:s.length;for(_&&p&&(x=s[++g]);++g<p;)x=c(x,s[g],g,s);return x}},79503:w=>{w.exports=function E(s,c){for(var x=-1,_=null==s?0:s.length;++x<_;)if(c(s[x],x,s))return!0;return!1}},75481:(w,E,s)=>{var x=s(11847)("length");w.exports=x},49276:(w,E,s)=>{var c=s(85683),x=s(20217);w.exports=function _(g,p,t){(void 0!==t&&!x(g[p],t)||void 0===t&&!(p in g))&&c(g,p,t)}},89719:(w,E,s)=>{var c=s(85683),x=s(20217),g=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l){var h=t[d];(!g.call(t,d)||!x(h,l)||void 0===l&&!(d in t))&&c(t,d,l)}},43503:(w,E,s)=>{var c=s(20217);w.exports=function x(_,g){for(var p=_.length;p--;)if(c(_[p][0],g))return p;return-1}},94121:(w,E,s)=>{var c=s(31989),x=s(118);w.exports=function _(g,p){return g&&c(p,x(p),g)}},99287:(w,E,s)=>{var c=s(31989),x=s(16555);w.exports=function _(g,p){return g&&c(p,x(p),g)}},85683:(w,E,s)=>{var c=s(56713);w.exports=function x(_,g,p){"__proto__"==g&&c?c(_,g,{configurable:!0,enumerable:!0,value:p,writable:!0}):_[g]=p}},44462:(w,E,s)=>{var c=s(2858),x=s(96837),_=s(89719),g=s(94121),p=s(99287),t=s(19292),d=s(99454),l=s(84444),h=s(59905),f=s(47597),u=s(6967),m=s(28794),T=s(76782),L=s(37878),I=s(4264),R=s(21503),M=s(80891),F=s(13222),Z=s(25940),Y=s(90799),U=s(118),rt=s(16555),X="[object Arguments]",nt="[object Function]",mt="[object Object]",$t={};$t[X]=$t["[object Array]"]=$t["[object ArrayBuffer]"]=$t["[object DataView]"]=$t["[object Boolean]"]=$t["[object Date]"]=$t["[object Float32Array]"]=$t["[object Float64Array]"]=$t["[object Int8Array]"]=$t["[object Int16Array]"]=$t["[object Int32Array]"]=$t["[object Map]"]=$t["[object Number]"]=$t[mt]=$t["[object RegExp]"]=$t["[object Set]"]=$t["[object String]"]=$t["[object Symbol]"]=$t["[object Uint8Array]"]=$t["[object Uint8ClampedArray]"]=$t["[object Uint16Array]"]=$t["[object Uint32Array]"]=!0,$t["[object Error]"]=$t[nt]=$t["[object WeakMap]"]=!1,w.exports=function Ut(Jt,ue,ve,Se,Ie,Ce){var Ve,Ge=1&ue,an=2&ue,xe=4&ue;if(ve&&(Ve=Ie?ve(Jt,Se,Ie,Ce):ve(Jt)),void 0!==Ve)return Ve;if(!Z(Jt))return Jt;var Cn=R(Jt);if(Cn){if(Ve=T(Jt),!Ge)return d(Jt,Ve)}else{var Tt=m(Jt),Yt=Tt==nt||"[object GeneratorFunction]"==Tt;if(M(Jt))return t(Jt,Ge);if(Tt==mt||Tt==X||Yt&&!Ie){if(Ve=an||Yt?{}:I(Jt),!Ge)return an?h(Jt,p(Ve,Jt)):l(Jt,g(Ve,Jt))}else{if(!$t[Tt])return Ie?Jt:{};Ve=L(Jt,Tt,Ge)}}Ce||(Ce=new c);var oe=Ce.get(Jt);if(oe)return oe;Ce.set(Jt,Ve),Y(Jt)?Jt.forEach(function(Ue){Ve.add(Ut(Ue,ue,ve,Ue,Jt,Ce))}):F(Jt)&&Jt.forEach(function(Ue,Ye){Ve.set(Ye,Ut(Ue,ue,ve,Ye,Jt,Ce))});var qt=Cn?void 0:(xe?an?u:f:an?rt:U)(Jt);return x(qt||Jt,function(Ue,Ye){qt&&(Ue=Jt[Ye=Ue]),_(Ve,Ye,Ut(Ue,ue,ve,Ye,Jt,Ce))}),Ve}},78858:(w,E,s)=>{var c=s(25940),x=Object.create,_=function(){function g(){}return function(p){if(!c(p))return{};if(x)return x(p);g.prototype=p;var t=new g;return g.prototype=void 0,t}}();w.exports=_},43132:(w,E,s)=>{var c=s(45184),_=s(16539)(c);w.exports=_},67308:(w,E,s)=>{var c=s(44129);w.exports=function x(_,g,p){for(var t=-1,d=_.length;++t<d;){var l=_[t],h=g(l);if(null!=h&&(void 0===f?h==h&&!c(h):p(h,f)))var f=h,u=l}return u}},33609:(w,E,s)=>{var c=s(43132);w.exports=function x(_,g){var p=[];return c(_,function(t,d,l){g(t,d,l)&&p.push(t)}),p}},65317:w=>{w.exports=function E(s,c,x,_){for(var g=s.length,p=x+(_?1:-1);_?p--:++p<g;)if(c(s[p],p,s))return p;return-1}},50686:(w,E,s)=>{var c=s(85059),x=s(75039);w.exports=function _(g,p,t,d,l){var h=-1,f=g.length;for(t||(t=x),l||(l=[]);++h<f;){var u=g[h];p>0&&t(u)?p>1?_(u,p-1,t,d,l):c(l,u):d||(l[l.length]=u)}return l}},30755:(w,E,s)=>{var x=s(40456)();w.exports=x},45184:(w,E,s)=>{var c=s(30755),x=s(118);w.exports=function _(g,p){return g&&c(g,p,x)}},15456:(w,E,s)=>{var c=s(65456),x=s(68533);w.exports=function _(g,p){for(var t=0,d=(p=c(p,g)).length;null!=g&&t<d;)g=g[x(p[t++])];return t&&t==d?g:void 0}},38247:(w,E,s)=>{var c=s(85059),x=s(21503);w.exports=function _(g,p,t){var d=p(g);return x(g)?d:c(d,t(g))}},93337:(w,E,s)=>{var c=s(60443),x=s(21318),_=s(92902),t=c?c.toStringTag:void 0;w.exports=function d(l){return null==l?void 0===l?"[object Undefined]":"[object Null]":t&&t in Object(l)?x(l):_(l)}},31100:w=>{w.exports=function E(s,c){return s>c}},84781:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x,_){return null!=x&&s.call(x,_)}},69989:w=>{w.exports=function E(s,c){return null!=s&&c in Object(s)}},14164:(w,E,s)=>{var c=s(65317),x=s(70968),_=s(24977);w.exports=function g(p,t,d){return t==t?_(p,t,d):c(p,x,d)}},60186:(w,E,s)=>{var c=s(93337),x=s(72671);w.exports=function g(p){return x(p)&&"[object Arguments]"==c(p)}},85740:(w,E,s)=>{var c=s(58325),x=s(72671);w.exports=function _(g,p,t,d,l){return g===p||(null==g||null==p||!x(g)&&!x(p)?g!=g&&p!=p:c(g,p,t,d,_,l))}},58325:(w,E,s)=>{var c=s(2858),x=s(63914),_=s(78583),g=s(32286),p=s(28794),t=s(21503),d=s(80891),l=s(48159),f="[object Arguments]",u="[object Array]",m="[object Object]",L=Object.prototype.hasOwnProperty;w.exports=function I(R,M,F,Z,Y,U){var rt=t(R),q=t(M),st=rt?u:p(R),K=q?u:p(M),X=(st=st==f?m:st)==m,W=(K=K==f?m:K)==m,at=st==K;if(at&&d(R)){if(!d(M))return!1;rt=!0,X=!1}if(at&&!X)return U||(U=new c),rt||l(R)?x(R,M,F,Z,Y,U):_(R,M,st,F,Z,Y,U);if(!(1&F)){var H=X&&L.call(R,"__wrapped__"),Q=W&&L.call(M,"__wrapped__");if(H||Q){var nt=H?R.value():R,tt=Q?M.value():M;return U||(U=new c),Y(nt,tt,F,Z,U)}}return!!at&&(U||(U=new c),g(R,M,F,Z,Y,U))}},97021:(w,E,s)=>{var c=s(28794),x=s(72671);w.exports=function g(p){return x(p)&&"[object Map]"==c(p)}},40431:(w,E,s)=>{var c=s(2858),x=s(85740);w.exports=function p(t,d,l,h){var f=l.length,u=f,m=!h;if(null==t)return!u;for(t=Object(t);f--;){var T=l[f];if(m&&T[2]?T[1]!==t[T[0]]:!(T[0]in t))return!1}for(;++f<u;){var L=(T=l[f])[0],I=t[L],R=T[1];if(m&&T[2]){if(void 0===I&&!(L in t))return!1}else{var M=new c;if(h)var F=h(I,R,L,t,d,M);if(!(void 0===F?x(R,I,3,h,M):F))return!1}}return!0}},70968:w=>{w.exports=function E(s){return s!=s}},37304:(w,E,s)=>{var c=s(75946),x=s(91943),_=s(25940),g=s(52827),t=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");w.exports=function m(T){return!(!_(T)||x(T))&&(c(T)?u:t).test(g(T))}},771:(w,E,s)=>{var c=s(28794),x=s(72671);w.exports=function g(p){return x(p)&&"[object Set]"==c(p)}},1083:(w,E,s)=>{var c=s(93337),x=s(96231),_=s(72671),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1,w.exports=function H(Q){return _(Q)&&x(Q.length)&&!!at[c(Q)]}},96517:(w,E,s)=>{var c=s(98133),x=s(9458),_=s(32608),g=s(21503),p=s(87495);w.exports=function t(d){return"function"==typeof d?d:null==d?_:"object"==typeof d?g(d)?x(d[0],d[1]):c(d):p(d)}},81172:(w,E,s)=>{var c=s(45488),x=s(85491),g=Object.prototype.hasOwnProperty;w.exports=function p(t){if(!c(t))return x(t);var d=[];for(var l in Object(t))g.call(t,l)&&"constructor"!=l&&d.push(l);return d}},92809:(w,E,s)=>{var c=s(25940),x=s(45488),_=s(32158),p=Object.prototype.hasOwnProperty;w.exports=function t(d){if(!c(d))return _(d);var l=x(d),h=[];for(var f in d)"constructor"==f&&(l||!p.call(d,f))||h.push(f);return h}},99069:w=>{w.exports=function E(s,c){return s<c}},92046:(w,E,s)=>{var c=s(43132),x=s(56507);w.exports=function _(g,p){var t=-1,d=x(g)?Array(g.length):[];return c(g,function(l,h,f){d[++t]=p(l,h,f)}),d}},98133:(w,E,s)=>{var c=s(40431),x=s(22379),_=s(642);w.exports=function g(p){var t=x(p);return 1==t.length&&t[0][2]?_(t[0][0],t[0][1]):function(d){return d===p||c(d,p,t)}}},9458:(w,E,s)=>{var c=s(85740),x=s(8817),_=s(11172),g=s(45352),p=s(22442),t=s(642),d=s(68533);w.exports=function f(u,m){return g(u)&&p(m)?t(d(u),m):function(T){var L=x(T,u);return void 0===L&&L===m?_(T,u):c(m,L,3)}}},73842:(w,E,s)=>{var c=s(2858),x=s(49276),_=s(30755),g=s(33675),p=s(25940),t=s(16555),d=s(99351);w.exports=function l(h,f,u,m,T){h!==f&&_(f,function(L,I){if(T||(T=new c),p(L))g(h,f,I,u,l,m,T);else{var R=m?m(d(h,I),L,I+"",h,f,T):void 0;void 0===R&&(R=L),x(h,I,R)}},t)}},33675:(w,E,s)=>{var c=s(49276),x=s(19292),_=s(65208),g=s(99454),p=s(4264),t=s(77151),d=s(21503),l=s(92377),h=s(80891),f=s(75946),u=s(25940),m=s(97614),T=s(48159),L=s(99351),I=s(8067);w.exports=function R(M,F,Z,Y,U,rt,q){var st=L(M,Z),K=L(F,Z),X=q.get(K);if(X)c(M,Z,X);else{var W=rt?rt(st,K,Z+"",M,F,q):void 0,at=void 0===W;if(at){var H=d(K),Q=!H&&h(K),nt=!H&&!Q&&T(K);W=K,H||Q||nt?d(st)?W=st:l(st)?W=g(st):Q?(at=!1,W=x(K,!0)):nt?(at=!1,W=_(K,!0)):W=[]:m(K)||t(K)?(W=st,t(st)?W=I(st):(!u(st)||f(st))&&(W=p(K))):at=!1}at&&(q.set(K,W),U(W,K,Y,rt,q),q.delete(K)),c(M,Z,W)}}},6119:(w,E,s)=>{var c=s(84633),x=s(15456),_=s(96517),g=s(92046),p=s(42061),t=s(85647),d=s(41215),l=s(32608),h=s(21503);w.exports=function f(u,m,T){m=m.length?c(m,function(R){return h(R)?function(M){return x(M,1===R.length?R[0]:R)}:R}):[l];var L=-1;m=c(m,t(_));var I=g(u,function(R,M,F){return{criteria:c(m,function(Y){return Y(R)}),index:++L,value:R}});return p(I,function(R,M){return d(R,M,T)})}},83021:(w,E,s)=>{var c=s(95495),x=s(11172);w.exports=function _(g,p){return c(g,p,function(t,d){return x(g,d)})}},95495:(w,E,s)=>{var c=s(15456),x=s(55963),_=s(65456);w.exports=function g(p,t,d){for(var l=-1,h=t.length,f={};++l<h;){var u=t[l],m=c(p,u);d(m,u)&&x(f,_(u,p),m)}return f}},11847:w=>{w.exports=function E(s){return function(c){return null==c?void 0:c[s]}}},39222:(w,E,s)=>{var c=s(15456);w.exports=function x(_){return function(g){return c(g,_)}}},16307:w=>{var E=Math.ceil,s=Math.max;w.exports=function c(x,_,g,p){for(var t=-1,d=s(E((_-x)/(g||1)),0),l=Array(d);d--;)l[p?d:++t]=x,x+=g;return l}},13570:w=>{w.exports=function E(s,c,x,_,g){return g(s,function(p,t,d){x=_?(_=!1,p):c(x,p,t,d)}),x}},23269:(w,E,s)=>{var c=s(32608),x=s(53983),_=s(72185);w.exports=function g(p,t){return _(x(p,t,c),p+"")}},55963:(w,E,s)=>{var c=s(89719),x=s(65456),_=s(58442),g=s(25940),p=s(68533);w.exports=function t(d,l,h,f){if(!g(d))return d;for(var u=-1,m=(l=x(l,d)).length,T=m-1,L=d;null!=L&&++u<m;){var I=p(l[u]),R=h;if("__proto__"===I||"constructor"===I||"prototype"===I)return d;if(u!=T){var M=L[I];void 0===(R=f?f(M,I,L):void 0)&&(R=g(M)?M:_(l[u+1])?[]:{})}c(L,I,R),L=L[I]}return d}},69510:(w,E,s)=>{var c=s(76684),x=s(56713),_=s(32608);w.exports=x?function(p,t){return x(p,"toString",{configurable:!0,enumerable:!1,value:c(t),writable:!0})}:_},42061:w=>{w.exports=function E(s,c){var x=s.length;for(s.sort(c);x--;)s[x]=s[x].value;return s}},85334:w=>{w.exports=function E(s,c){for(var x=-1,_=Array(s);++x<s;)_[x]=c(x);return _}},93935:(w,E,s)=>{var c=s(60443),x=s(84633),_=s(21503),g=s(44129),t=c?c.prototype:void 0,d=t?t.toString:void 0;w.exports=function l(h){if("string"==typeof h)return h;if(_(h))return x(h,l)+"";if(g(h))return d?d.call(h):"";var f=h+"";return"0"==f&&1/h==-1/0?"-0":f}},83348:(w,E,s)=>{var c=s(42760),x=/^\s+/;w.exports=function _(g){return g&&g.slice(0,c(g)+1).replace(x,"")}},85647:w=>{w.exports=function E(s){return function(c){return s(c)}}},80707:(w,E,s)=>{var c=s(58849),x=s(61253),_=s(37609),g=s(25972),p=s(14575),t=s(24174);w.exports=function l(h,f,u){var m=-1,T=x,L=h.length,I=!0,R=[],M=R;if(u)I=!1,T=_;else if(L>=200){var F=f?null:p(h);if(F)return t(F);I=!1,T=g,M=new c}else M=f?[]:R;t:for(;++m<L;){var Z=h[m],Y=f?f(Z):Z;if(Z=u||0!==Z?Z:0,I&&Y==Y){for(var U=M.length;U--;)if(M[U]===Y)continue t;f&&M.push(Y),R.push(Z)}else T(M,Y,u)||(M!==R&&M.push(Y),R.push(Z))}return R}},19179:(w,E,s)=>{var c=s(84633);w.exports=function x(_,g){return c(g,function(p){return _[p]})}},38645:w=>{w.exports=function E(s,c,x){for(var _=-1,g=s.length,p=c.length,t={};++_<g;)x(t,s[_],_<p?c[_]:void 0);return t}},25972:w=>{w.exports=function E(s,c){return s.has(c)}},21481:(w,E,s)=>{var c=s(32608);w.exports=function x(_){return"function"==typeof _?_:c}},65456:(w,E,s)=>{var c=s(21503),x=s(45352),_=s(32855),g=s(73943);w.exports=function p(t,d){return c(t)?t:x(t,d)?[t]:_(g(t))}},43362:(w,E,s)=>{var c=s(73457);w.exports=function x(_){var g=new _.constructor(_.byteLength);return new c(g).set(new c(_)),g}},19292:(w,E,s)=>{w=s.nmd(w);var c=s(12119),x=E&&!E.nodeType&&E,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x?c.Buffer:void 0,t=p?p.allocUnsafe:void 0;w.exports=function d(l,h){if(h)return l.slice();var f=l.length,u=t?t(f):new l.constructor(f);return l.copy(u),u}},17e3:(w,E,s)=>{var c=s(43362);w.exports=function x(_,g){var p=g?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.byteLength)}},74098:w=>{var E=/\w*$/;w.exports=function s(c){var x=new c.constructor(c.source,E.exec(c));return x.lastIndex=c.lastIndex,x}},62533:(w,E,s)=>{var c=s(60443),x=c?c.prototype:void 0,_=x?x.valueOf:void 0;w.exports=function g(p){return _?Object(_.call(p)):{}}},65208:(w,E,s)=>{var c=s(43362);w.exports=function x(_,g){var p=g?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.length)}},13443:(w,E,s)=>{var c=s(44129);w.exports=function x(_,g){if(_!==g){var p=void 0!==_,t=null===_,d=_==_,l=c(_),h=void 0!==g,f=null===g,u=g==g,m=c(g);if(!f&&!m&&!l&&_>g||l&&h&&u&&!f&&!m||t&&h&&u||!p&&u||!d)return 1;if(!t&&!l&&!m&&_<g||m&&p&&d&&!t&&!l||f&&p&&d||!h&&d||!u)return-1}return 0}},41215:(w,E,s)=>{var c=s(13443);w.exports=function x(_,g,p){for(var t=-1,d=_.criteria,l=g.criteria,h=d.length,f=p.length;++t<h;){var u=c(d[t],l[t]);if(u)return t>=f?u:u*("desc"==p[t]?-1:1)}return _.index-g.index}},99454:w=>{w.exports=function E(s,c){var x=-1,_=s.length;for(c||(c=Array(_));++x<_;)c[x]=s[x];return c}},31989:(w,E,s)=>{var c=s(89719),x=s(85683);w.exports=function _(g,p,t,d){var l=!t;t||(t={});for(var h=-1,f=p.length;++h<f;){var u=p[h],m=d?d(t[u],g[u],u,t,g):void 0;void 0===m&&(m=g[u]),l?x(t,u,m):c(t,u,m)}return t}},84444:(w,E,s)=>{var c=s(31989),x=s(39383);w.exports=function _(g,p){return c(g,x(g),p)}},59905:(w,E,s)=>{var c=s(31989),x=s(53051);w.exports=function _(g,p){return c(g,x(g),p)}},24610:(w,E,s)=>{var c=s(12119);w.exports=c["__core-js_shared__"]},84944:(w,E,s)=>{var c=s(23269),x=s(93342);w.exports=function _(g){return c(function(p,t){var d=-1,l=t.length,h=l>1?t[l-1]:void 0,f=l>2?t[2]:void 0;for(h=g.length>3&&"function"==typeof h?(l--,h):void 0,f&&x(t[0],t[1],f)&&(h=l<3?void 0:h,l=1),p=Object(p);++d<l;){var u=t[d];u&&g(p,u,d,h)}return p})}},16539:(w,E,s)=>{var c=s(56507);w.exports=function x(_,g){return function(p,t){if(null==p)return p;if(!c(p))return _(p,t);for(var d=p.length,l=g?d:-1,h=Object(p);(g?l--:++l<d)&&!1!==t(h[l],l,h););return p}}},40456:w=>{w.exports=function E(s){return function(c,x,_){for(var g=-1,p=Object(c),t=_(c),d=t.length;d--;){var l=t[s?d:++g];if(!1===x(p[l],l,p))break}return c}}},24653:(w,E,s)=>{var c=s(96517),x=s(56507),_=s(118);w.exports=function g(p){return function(t,d,l){var h=Object(t);if(!x(t)){var f=c(d,3);t=_(t),d=function(m){return f(h[m],m,h)}}var u=p(t,d,l);return u>-1?h[f?t[u]:u]:void 0}}},97509:(w,E,s)=>{var c=s(16307),x=s(93342),_=s(12232);w.exports=function g(p){return function(t,d,l){return l&&"number"!=typeof l&&x(t,d,l)&&(d=l=void 0),t=_(t),void 0===d?(d=t,t=0):d=_(d),l=void 0===l?t<d?1:-1:_(l),c(t,d,l,p)}}},14575:(w,E,s)=>{var c=s(46323),x=s(12552),_=s(24174),p=c&&1/_(new c([,-0]))[1]==1/0?function(t){return new c(t)}:x;w.exports=p},56713:(w,E,s)=>{var c=s(53436),x=function(){try{var _=c(Object,"defineProperty");return _({},"",{}),_}catch(g){}}();w.exports=x},63914:(w,E,s)=>{var c=s(58849),x=s(79503),_=s(25972);w.exports=function t(d,l,h,f,u,m){var T=1&h,L=d.length,I=l.length;if(L!=I&&!(T&&I>L))return!1;var R=m.get(d),M=m.get(l);if(R&&M)return R==l&&M==d;var F=-1,Z=!0,Y=2&h?new c:void 0;for(m.set(d,l),m.set(l,d);++F<L;){var U=d[F],rt=l[F];if(f)var q=T?f(rt,U,F,l,d,m):f(U,rt,F,d,l,m);if(void 0!==q){if(q)continue;Z=!1;break}if(Y){if(!x(l,function(st,K){if(!_(Y,K)&&(U===st||u(U,st,h,f,m)))return Y.push(K)})){Z=!1;break}}else if(U!==rt&&!u(U,rt,h,f,m)){Z=!1;break}}return m.delete(d),m.delete(l),Z}},78583:(w,E,s)=>{var c=s(60443),x=s(73457),_=s(20217),g=s(63914),p=s(83205),t=s(24174),Y=c?c.prototype:void 0,U=Y?Y.valueOf:void 0;w.exports=function rt(q,st,K,X,W,at,H){switch(K){case"[object DataView]":if(q.byteLength!=st.byteLength||q.byteOffset!=st.byteOffset)return!1;q=q.buffer,st=st.buffer;case"[object ArrayBuffer]":return!(q.byteLength!=st.byteLength||!at(new x(q),new x(st)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+q,+st);case"[object Error]":return q.name==st.name&&q.message==st.message;case"[object RegExp]":case"[object String]":return q==st+"";case"[object Map]":var Q=p;case"[object Set]":if(Q||(Q=t),q.size!=st.size&&!(1&X))return!1;var tt=H.get(q);if(tt)return tt==st;X|=2,H.set(q,st);var V=g(Q(q),Q(st),X,W,at,H);return H.delete(q),V;case"[object Symbol]":if(U)return U.call(q)==U.call(st)}return!1}},32286:(w,E,s)=>{var c=s(47597),g=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l,h,f,u){var m=1&l,T=c(t),L=T.length;if(L!=c(d).length&&!m)return!1;for(var M=L;M--;){var F=T[M];if(!(m?F in d:g.call(d,F)))return!1}var Z=u.get(t),Y=u.get(d);if(Z&&Y)return Z==d&&Y==t;var U=!0;u.set(t,d),u.set(d,t);for(var rt=m;++M<L;){var q=t[F=T[M]],st=d[F];if(h)var K=m?h(st,q,F,d,t,u):h(q,st,F,t,d,u);if(!(void 0===K?q===st||f(q,st,l,h,u):K)){U=!1;break}rt||(rt="constructor"==F)}if(U&&!rt){var X=t.constructor,W=d.constructor;X!=W&&"constructor"in t&&"constructor"in d&&!("function"==typeof X&&X instanceof X&&"function"==typeof W&&W instanceof W)&&(U=!1)}return u.delete(t),u.delete(d),U}},3975:(w,E,s)=>{var c=s(22274),x=s(53983),_=s(72185);w.exports=function g(p){return _(x(p,void 0,c),p+"")}},79122:w=>{var E="object"==typeof global&&global&&global.Object===Object&&global;w.exports=E},47597:(w,E,s)=>{var c=s(38247),x=s(39383),_=s(118);w.exports=function g(p){return c(p,_,x)}},6967:(w,E,s)=>{var c=s(38247),x=s(53051),_=s(16555);w.exports=function g(p){return c(p,_,x)}},54537:(w,E,s)=>{var c=s(23819);w.exports=function x(_,g){var p=_.__data__;return c(g)?p["string"==typeof g?"string":"hash"]:p.map}},22379:(w,E,s)=>{var c=s(22442),x=s(118);w.exports=function _(g){for(var p=x(g),t=p.length;t--;){var d=p[t],l=g[d];p[t]=[d,l,c(l)]}return p}},53436:(w,E,s)=>{var c=s(37304),x=s(51990);w.exports=function _(g,p){var t=x(g,p);return c(t)?t:void 0}},29519:(w,E,s)=>{var x=s(69385)(Object.getPrototypeOf,Object);w.exports=x},21318:(w,E,s)=>{var c=s(60443),x=Object.prototype,_=x.hasOwnProperty,g=x.toString,p=c?c.toStringTag:void 0;w.exports=function t(d){var l=_.call(d,p),h=d[p];try{d[p]=void 0;var f=!0}catch(m){}var u=g.call(d);return f&&(l?d[p]=h:delete d[p]),u}},39383:(w,E,s)=>{var c=s(69779),x=s(49975),g=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols;w.exports=p?function(d){return null==d?[]:(d=Object(d),c(p(d),function(l){return g.call(d,l)}))}:x},53051:(w,E,s)=>{var c=s(85059),x=s(29519),_=s(39383),g=s(49975);w.exports=Object.getOwnPropertySymbols?function(d){for(var l=[];d;)c(l,_(d)),d=x(d);return l}:g},28794:(w,E,s)=>{var c=s(37244),x=s(51501),_=s(44267),g=s(46323),p=s(24243),t=s(93337),d=s(52827),l="[object Map]",f="[object Promise]",u="[object Set]",m="[object WeakMap]",T="[object DataView]",L=d(c),I=d(x),R=d(_),M=d(g),F=d(p),Z=t;(c&&Z(new c(new ArrayBuffer(1)))!=T||x&&Z(new x)!=l||_&&Z(_.resolve())!=f||g&&Z(new g)!=u||p&&Z(new p)!=m)&&(Z=function(Y){var U=t(Y),rt="[object Object]"==U?Y.constructor:void 0,q=rt?d(rt):"";if(q)switch(q){case L:return T;case I:return l;case R:return f;case M:return u;case F:return m}return U}),w.exports=Z},51990:w=>{w.exports=function E(s,c){return null==s?void 0:s[c]}},47283:(w,E,s)=>{var c=s(65456),x=s(77151),_=s(21503),g=s(58442),p=s(96231),t=s(68533);w.exports=function d(l,h,f){for(var u=-1,m=(h=c(h,l)).length,T=!1;++u<m;){var L=t(h[u]);if(!(T=null!=l&&f(l,L)))break;l=l[L]}return T||++u!=m?T:!!(m=null==l?0:l.length)&&p(m)&&g(L,m)&&(_(l)||x(l))}},77609:w=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");w.exports=function d(l){return t.test(l)}},64312:(w,E,s)=>{var c=s(60862);w.exports=function x(){this.__data__=c?c(null):{},this.size=0}},46421:w=>{w.exports=function E(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}},15764:(w,E,s)=>{var c=s(60862),g=Object.prototype.hasOwnProperty;w.exports=function p(t){var d=this.__data__;if(c){var l=d[t];return"__lodash_hash_undefined__"===l?void 0:l}return g.call(d,t)?d[t]:void 0}},18685:(w,E,s)=>{var c=s(60862),_=Object.prototype.hasOwnProperty;w.exports=function g(p){var t=this.__data__;return c?void 0!==t[p]:_.call(t,p)}},26676:(w,E,s)=>{var c=s(60862);w.exports=function _(g,p){var t=this.__data__;return this.size+=this.has(g)?0:1,t[g]=c&&void 0===p?"__lodash_hash_undefined__":p,this}},76782:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x){var _=x.length,g=new x.constructor(_);return _&&"string"==typeof x[0]&&s.call(x,"index")&&(g.index=x.index,g.input=x.input),g}},37878:(w,E,s)=>{var c=s(43362),x=s(17e3),_=s(74098),g=s(62533),p=s(65208);w.exports=function K(X,W,at){var H=X.constructor;switch(W){case"[object ArrayBuffer]":return c(X);case"[object Boolean]":case"[object Date]":return new H(+X);case"[object DataView]":return x(X,at);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return p(X,at);case"[object Map]":case"[object Set]":return new H;case"[object Number]":case"[object String]":return new H(X);case"[object RegExp]":return _(X);case"[object Symbol]":return g(X)}}},4264:(w,E,s)=>{var c=s(78858),x=s(29519),_=s(45488);w.exports=function g(p){return"function"!=typeof p.constructor||_(p)?{}:c(x(p))}},75039:(w,E,s)=>{var c=s(60443),x=s(77151),_=s(21503),g=c?c.isConcatSpreadable:void 0;w.exports=function p(t){return _(t)||x(t)||!!(g&&t&&t[g])}},58442:w=>{var s=/^(?:0|[1-9]\d*)$/;w.exports=function c(x,_){var g=typeof x;return!!(_=null==_?9007199254740991:_)&&("number"==g||"symbol"!=g&&s.test(x))&&x>-1&&x%1==0&&x<_}},93342:(w,E,s)=>{var c=s(20217),x=s(56507),_=s(58442),g=s(25940);w.exports=function p(t,d,l){if(!g(l))return!1;var h=typeof d;return!!("number"==h?x(l)&&_(d,l.length):"string"==h&&d in l)&&c(l[d],t)}},45352:(w,E,s)=>{var c=s(21503),x=s(44129),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;w.exports=function p(t,d){if(c(t))return!1;var l=typeof t;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=t&&!x(t))||g.test(t)||!_.test(t)||null!=d&&t in Object(d)}},23819:w=>{w.exports=function E(s){var c=typeof s;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==s:null===s}},91943:(w,E,s)=>{var g,c=s(24610),x=(g=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";w.exports=function _(g){return!!x&&x in g}},45488:w=>{var E=Object.prototype;w.exports=function s(c){var x=c&&c.constructor;return c===("function"==typeof x&&x.prototype||E)}},22442:(w,E,s)=>{var c=s(25940);w.exports=function x(_){return _==_&&!c(_)}},41840:w=>{w.exports=function E(){this.__data__=[],this.size=0}},34378:(w,E,s)=>{var c=s(43503),_=Array.prototype.splice;w.exports=function g(p){var t=this.__data__,d=c(t,p);return!(d<0||(d==t.length-1?t.pop():_.call(t,d,1),--this.size,0))}},54981:(w,E,s)=>{var c=s(43503);w.exports=function x(_){var g=this.__data__,p=c(g,_);return p<0?void 0:g[p][1]}},67343:(w,E,s)=>{var c=s(43503);w.exports=function x(_){return c(this.__data__,_)>-1}},98895:(w,E,s)=>{var c=s(43503);w.exports=function x(_,g){var p=this.__data__,t=c(p,_);return t<0?(++this.size,p.push([_,g])):p[t][1]=g,this}},10638:(w,E,s)=>{var c=s(54994),x=s(9215),_=s(51501);w.exports=function g(){this.size=0,this.__data__={hash:new c,map:new(_||x),string:new c}}},11184:(w,E,s)=>{var c=s(54537);w.exports=function x(_){var g=c(this,_).delete(_);return this.size-=g?1:0,g}},70866:(w,E,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).get(_)}},43771:(w,E,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).has(_)}},51772:(w,E,s)=>{var c=s(54537);w.exports=function x(_,g){var p=c(this,_),t=p.size;return p.set(_,g),this.size+=p.size==t?0:1,this}},83205:w=>{w.exports=function E(s){var c=-1,x=Array(s.size);return s.forEach(function(_,g){x[++c]=[g,_]}),x}},642:w=>{w.exports=function E(s,c){return function(x){return null!=x&&x[s]===c&&(void 0!==c||s in Object(x))}}},15144:(w,E,s)=>{var c=s(30535);w.exports=function _(g){var p=c(g,function(d){return 500===t.size&&t.clear(),d}),t=p.cache;return p}},60862:(w,E,s)=>{var x=s(53436)(Object,"create");w.exports=x},85491:(w,E,s)=>{var x=s(69385)(Object.keys,Object);w.exports=x},32158:w=>{w.exports=function E(s){var c=[];if(null!=s)for(var x in Object(s))c.push(x);return c}},73597:(w,E,s)=>{w=s.nmd(w);var c=s(79122),x=E&&!E.nodeType&&E,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x&&c.process,t=function(){try{return _&&_.require&&_.require("util").types||p&&p.binding&&p.binding("util")}catch(l){}}();w.exports=t},92902:w=>{var s=Object.prototype.toString;w.exports=function c(x){return s.call(x)}},69385:w=>{w.exports=function E(s,c){return function(x){return s(c(x))}}},53983:(w,E,s)=>{var c=s(26999),x=Math.max;w.exports=function _(g,p,t){return p=x(void 0===p?g.length-1:p,0),function(){for(var d=arguments,l=-1,h=x(d.length-p,0),f=Array(h);++l<h;)f[l]=d[p+l];l=-1;for(var u=Array(p+1);++l<p;)u[l]=d[l];return u[p]=t(f),c(g,this,u)}}},12119:(w,E,s)=>{var c=s(79122),x="object"==typeof self&&self&&self.Object===Object&&self,_=c||x||Function("return this")();w.exports=_},99351:w=>{w.exports=function E(s,c){if(("constructor"!==c||"function"!=typeof s[c])&&"__proto__"!=c)return s[c]}},4600:w=>{w.exports=function s(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this}},31387:w=>{w.exports=function E(s){return this.__data__.has(s)}},24174:w=>{w.exports=function E(s){var c=-1,x=Array(s.size);return s.forEach(function(_){x[++c]=_}),x}},72185:(w,E,s)=>{var c=s(69510),_=s(10029)(c);w.exports=_},10029:w=>{var c=Date.now;w.exports=function x(_){var g=0,p=0;return function(){var t=c(),d=16-(t-p);if(p=t,d>0){if(++g>=800)return arguments[0]}else g=0;return _.apply(void 0,arguments)}}},13720:(w,E,s)=>{var c=s(9215);w.exports=function x(){this.__data__=new c,this.size=0}},64410:w=>{w.exports=function E(s){var c=this.__data__,x=c.delete(s);return this.size=c.size,x}},45576:w=>{w.exports=function E(s){return this.__data__.get(s)}},22247:w=>{w.exports=function E(s){return this.__data__.has(s)}},41585:(w,E,s)=>{var c=s(9215),x=s(51501),_=s(99850);w.exports=function p(t,d){var l=this.__data__;if(l instanceof c){var h=l.__data__;if(!x||h.length<199)return h.push([t,d]),this.size=++l.size,this;l=this.__data__=new _(h)}return l.set(t,d),this.size=l.size,this}},24977:w=>{w.exports=function E(s,c,x){for(var _=x-1,g=s.length;++_<g;)if(s[_]===c)return _;return-1}},52315:(w,E,s)=>{var c=s(75481),x=s(77609),_=s(81149);w.exports=function g(p){return x(p)?_(p):c(p)}},32855:(w,E,s)=>{var c=s(15144),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,g=c(function(p){var t=[];return 46===p.charCodeAt(0)&&t.push(""),p.replace(x,function(d,l,h,f){t.push(h?f.replace(_,"$1"):l||d)}),t});w.exports=g},68533:(w,E,s)=>{var c=s(44129);w.exports=function _(g){if("string"==typeof g||c(g))return g;var p=g+"";return"0"==p&&1/g==-1/0?"-0":p}},52827:w=>{var s=Function.prototype.toString;w.exports=function c(x){if(null!=x){try{return s.call(x)}catch(_){}try{return x+""}catch(_){}}return""}},42760:w=>{var E=/\s/;w.exports=function s(c){for(var x=c.length;x--&&E.test(c.charAt(x)););return x}},81149:w=>{var E="\\ud800-\\udfff",p="["+E+"]",t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",d="\\ud83c[\\udffb-\\udfff]",h="[^"+E+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",T="(?:"+t+"|"+d+")?",L="[\\ufe0e\\ufe0f]?",R=L+T+"(?:\\u200d(?:"+[h,f,u].join("|")+")"+L+T+")*",M="(?:"+[h+t+"?",t,f,u,p].join("|")+")",F=RegExp(d+"(?="+d+")|"+M+R,"g");w.exports=function Z(Y){for(var U=F.lastIndex=0;F.test(Y);)++U;return U}},11094:(w,E,s)=>{var c=s(44462);w.exports=function _(g){return c(g,4)}},90733:(w,E,s)=>{var c=s(44462);w.exports=function g(p){return c(p,5)}},76684:w=>{w.exports=function E(s){return function(){return s}}},28800:(w,E,s)=>{var c=s(23269),x=s(20217),_=s(93342),g=s(16555),p=Object.prototype,t=p.hasOwnProperty,d=c(function(l,h){l=Object(l);var f=-1,u=h.length,m=u>2?h[2]:void 0;for(m&&_(h[0],h[1],m)&&(u=1);++f<u;)for(var T=h[f],L=g(T),I=-1,R=L.length;++I<R;){var M=L[I],F=l[M];(void 0===F||x(F,p[M])&&!t.call(l,M))&&(l[M]=T[M])}return l});w.exports=d},35474:(w,E,s)=>{w.exports=s(89851)},20217:w=>{w.exports=function E(s,c){return s===c||s!=s&&c!=c}},35281:(w,E,s)=>{var c=s(69779),x=s(33609),_=s(96517),g=s(21503);w.exports=function p(t,d){return(g(t)?c:x)(t,_(d,3))}},62516:(w,E,s)=>{var _=s(24653)(s(36397));w.exports=_},36397:(w,E,s)=>{var c=s(65317),x=s(96517),_=s(44401),g=Math.max;w.exports=function p(t,d,l){var h=null==t?0:t.length;if(!h)return-1;var f=null==l?0:_(l);return f<0&&(f=g(h+f,0)),c(t,x(d,3),f)}},22274:(w,E,s)=>{var c=s(50686);w.exports=function x(_){return null!=_&&_.length?c(_,1):[]}},89851:(w,E,s)=>{var c=s(96837),x=s(43132),_=s(21481),g=s(21503);w.exports=function p(t,d){return(g(t)?c:x)(t,_(d))}},41176:(w,E,s)=>{var c=s(30755),x=s(21481),_=s(16555);w.exports=function g(p,t){return null==p?p:c(p,x(t),_)}},8817:(w,E,s)=>{var c=s(15456);w.exports=function x(_,g,p){var t=null==_?void 0:c(_,g);return void 0===t?p:t}},54842:(w,E,s)=>{var c=s(84781),x=s(47283);w.exports=function _(g,p){return null!=g&&x(g,p,c)}},11172:(w,E,s)=>{var c=s(69989),x=s(47283);w.exports=function _(g,p){return null!=g&&x(g,p,c)}},32608:w=>{w.exports=function E(s){return s}},77151:(w,E,s)=>{var c=s(60186),x=s(72671),_=Object.prototype,g=_.hasOwnProperty,p=_.propertyIsEnumerable,t=c(function(){return arguments}())?c:function(d){return x(d)&&g.call(d,"callee")&&!p.call(d,"callee")};w.exports=t},21503:w=>{w.exports=Array.isArray},56507:(w,E,s)=>{var c=s(75946),x=s(96231);w.exports=function _(g){return null!=g&&x(g.length)&&!c(g)}},92377:(w,E,s)=>{var c=s(56507),x=s(72671);w.exports=function _(g){return x(g)&&c(g)}},80891:(w,E,s)=>{w=s.nmd(w);var c=s(12119),x=s(63580),_=E&&!E.nodeType&&E,g=_&&w&&!w.nodeType&&w,t=g&&g.exports===_?c.Buffer:void 0;w.exports=(t?t.isBuffer:void 0)||x},71973:(w,E,s)=>{var c=s(81172),x=s(28794),_=s(77151),g=s(21503),p=s(56507),t=s(80891),d=s(45488),l=s(48159),m=Object.prototype.hasOwnProperty;w.exports=function T(L){if(null==L)return!0;if(p(L)&&(g(L)||"string"==typeof L||"function"==typeof L.splice||t(L)||l(L)||_(L)))return!L.length;var I=x(L);if("[object Map]"==I||"[object Set]"==I)return!L.size;if(d(L))return!c(L).length;for(var R in L)if(m.call(L,R))return!1;return!0}},75946:(w,E,s)=>{var c=s(93337),x=s(25940);w.exports=function d(l){if(!x(l))return!1;var h=c(l);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h}},96231:w=>{w.exports=function s(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991}},13222:(w,E,s)=>{var c=s(97021),x=s(85647),_=s(73597),g=_&&_.isMap,p=g?x(g):c;w.exports=p},25940:w=>{w.exports=function E(s){var c=typeof s;return null!=s&&("object"==c||"function"==c)}},72671:w=>{w.exports=function E(s){return null!=s&&"object"==typeof s}},97614:(w,E,s)=>{var c=s(93337),x=s(29519),_=s(72671),d=Function.prototype.toString,l=Object.prototype.hasOwnProperty,h=d.call(Object);w.exports=function f(u){if(!_(u)||"[object Object]"!=c(u))return!1;var m=x(u);if(null===m)return!0;var T=l.call(m,"constructor")&&m.constructor;return"function"==typeof T&&T instanceof T&&d.call(T)==h}},90799:(w,E,s)=>{var c=s(771),x=s(85647),_=s(73597),g=_&&_.isSet,p=g?x(g):c;w.exports=p},30248:(w,E,s)=>{var c=s(93337),x=s(21503),_=s(72671);w.exports=function p(t){return"string"==typeof t||!x(t)&&_(t)&&"[object String]"==c(t)}},44129:(w,E,s)=>{var c=s(93337),x=s(72671);w.exports=function g(p){return"symbol"==typeof p||x(p)&&"[object Symbol]"==c(p)}},48159:(w,E,s)=>{var c=s(1083),x=s(85647),_=s(73597),g=_&&_.isTypedArray,p=g?x(g):c;w.exports=p},34235:w=>{w.exports=function E(s){return void 0===s}},118:(w,E,s)=>{var c=s(72271),x=s(81172),_=s(56507);w.exports=function g(p){return _(p)?c(p):x(p)}},16555:(w,E,s)=>{var c=s(72271),x=s(92809),_=s(56507);w.exports=function g(p){return _(p)?c(p,!0):x(p)}},25809:w=>{w.exports=function E(s){var c=null==s?0:s.length;return c?s[c-1]:void 0}},19984:(w,E,s)=>{var c=s(84633),x=s(96517),_=s(92046),g=s(21503);w.exports=function p(t,d){return(g(t)?c:_)(t,x(d,3))}},10203:(w,E,s)=>{var c=s(85683),x=s(45184),_=s(96517);w.exports=function g(p,t){var d={};return t=_(t,3),x(p,function(l,h,f){c(d,h,t(l,h,f))}),d}},18176:(w,E,s)=>{var c=s(67308),x=s(31100),_=s(32608);w.exports=function g(p){return p&&p.length?c(p,_,x):void 0}},30535:(w,E,s)=>{var c=s(99850);function _(g,p){if("function"!=typeof g||null!=p&&"function"!=typeof p)throw new TypeError("Expected a function");var t=function(){var d=arguments,l=p?p.apply(this,d):d[0],h=t.cache;if(h.has(l))return h.get(l);var f=g.apply(this,d);return t.cache=h.set(l,f)||h,f};return t.cache=new(_.Cache||c),t}_.Cache=c,w.exports=_},80567:(w,E,s)=>{var c=s(73842),_=s(84944)(function(g,p,t){c(g,p,t)});w.exports=_},29439:(w,E,s)=>{var c=s(67308),x=s(99069),_=s(32608);w.exports=function g(p){return p&&p.length?c(p,_,x):void 0}},29525:(w,E,s)=>{var c=s(67308),x=s(96517),_=s(99069);w.exports=function g(p,t){return p&&p.length?c(p,x(t,2),_):void 0}},12552:w=>{w.exports=function E(){}},31710:(w,E,s)=>{var c=s(12119);w.exports=function(){return c.Date.now()}},16372:(w,E,s)=>{var c=s(83021),_=s(3975)(function(g,p){return null==g?{}:c(g,p)});w.exports=_},87495:(w,E,s)=>{var c=s(11847),x=s(39222),_=s(45352),g=s(68533);w.exports=function p(t){return _(t)?c(g(t)):x(t)}},90361:(w,E,s)=>{var x=s(97509)();w.exports=x},81337:(w,E,s)=>{var c=s(8745),x=s(43132),_=s(96517),g=s(13570),p=s(21503);w.exports=function t(d,l,h){var f=p(d)?c:g,u=arguments.length<3;return f(d,_(l,4),h,u,x)}},55637:(w,E,s)=>{var c=s(81172),x=s(28794),_=s(56507),g=s(30248),p=s(52315);w.exports=function l(h){if(null==h)return 0;if(_(h))return g(h)?p(h):h.length;var f=x(h);return"[object Map]"==f||"[object Set]"==f?h.size:c(h).length}},12906:(w,E,s)=>{var c=s(50686),x=s(6119),_=s(23269),g=s(93342),p=_(function(t,d){if(null==t)return[];var l=d.length;return l>1&&g(t,d[0],d[1])?d=[]:l>2&&g(d[0],d[1],d[2])&&(d=[d[0]]),x(t,c(d,1),[])});w.exports=p},49975:w=>{w.exports=function E(){return[]}},63580:w=>{w.exports=function E(){return!1}},12232:(w,E,s)=>{var c=s(51467),x=1/0;w.exports=function g(p){return p?(p=c(p))===x||p===-x?17976931348623157e292*(p<0?-1:1):p==p?p:0:0===p?p:0}},44401:(w,E,s)=>{var c=s(12232);w.exports=function x(_){var g=c(_),p=g%1;return g==g?p?g-p:g:0}},51467:(w,E,s)=>{var c=s(83348),x=s(25940),_=s(44129),p=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;w.exports=function h(f){if("number"==typeof f)return f;if(_(f))return NaN;if(x(f)){var u="function"==typeof f.valueOf?f.valueOf():f;f=x(u)?u+"":u}if("string"!=typeof f)return 0===f?f:+f;f=c(f);var m=t.test(f);return m||d.test(f)?l(f.slice(2),m?2:8):p.test(f)?NaN:+f}},8067:(w,E,s)=>{var c=s(31989),x=s(16555);w.exports=function _(g){return c(g,x(g))}},73943:(w,E,s)=>{var c=s(93935);w.exports=function x(_){return null==_?"":c(_)}},89416:(w,E,s)=>{var c=s(96837),x=s(78858),_=s(45184),g=s(96517),p=s(29519),t=s(21503),d=s(80891),l=s(75946),h=s(25940),f=s(48159);w.exports=function u(m,T,L){var I=t(m),R=I||d(m)||f(m);if(T=g(T,4),null==L){var M=m&&m.constructor;L=R?I?new M:[]:h(m)&&l(M)?x(p(m)):{}}return(R?c:_)(m,function(F,Z,Y){return T(L,F,Z,Y)}),L}},68921:(w,E,s)=>{var c=s(50686),x=s(23269),_=s(80707),g=s(92377),p=x(function(t){return _(c(t,1,g,!0))});w.exports=p},51541:(w,E,s)=>{var c=s(73943),x=0;w.exports=function _(g){var p=++x;return c(g)+p}},90377:(w,E,s)=>{var c=s(19179),x=s(118);w.exports=function _(g){return null==g?[]:c(g,x(g))}},21617:(w,E,s)=>{var c=s(89719),x=s(38645);w.exports=function _(g,p){return x(g||[],p||[],c)}},34315:(w,E,s)=>{"use strict";const c=Symbol.prototype.valueOf,x=s(52872);w.exports=function _(h,f){switch(x(h)){case"array":return h.slice();case"object":return Object.assign({},h);case"date":return new h.constructor(Number(h));case"map":return new Map(h);case"set":return new Set(h);case"buffer":return function d(h){const f=h.length,u=Buffer.allocUnsafe?Buffer.allocUnsafe(f):Buffer.from(f);return h.copy(u),u}(h);case"symbol":return function l(h){return c?Object(c.call(h)):{}}(h);case"arraybuffer":return function p(h){const f=new h.constructor(h.byteLength);return new Uint8Array(f).set(new Uint8Array(h)),f}(h);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function t(h,f){return new h.constructor(h.buffer,h.byteOffset,h.length)}(h);case"regexp":return function g(h){const f=void 0!==h.flags?h.flags:/\w+$/.exec(h)||void 0,u=new h.constructor(h.source,f);return u.lastIndex=h.lastIndex,u}(h);case"error":return Object.create(h);default:return h}}},67824:(w,E,s)=>{"use strict";function c(x){for(var _ in x)E.hasOwnProperty(_)||(E[_]=x[_])}Object.defineProperty(E,"__esModule",{value:!0}),c(s(95085)),c(s(26243)),c(s(91786)),c(s(30225)),c(s(76767)),c(s(30345)),c(s(15675)),c(s(86461)),c(s(58802)),c(s(33900)),c(s(88866)),c(s(94655)),c(s(4068)),c(s(33858)),c(s(98237)),c(s(83292))},95085:function(w,E,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(d){var l=p.call(this)||this,f=d;return f.trigger&&(l.trigger=f.trigger),f.kick&&(l.kick=f.kick),f.drag&&(l.drag=f.drag),f.on&&(l.on=f.on),l.dragstart=l.dragStart=x.Layout.dragStart,l.dragend=l.dragEnd=x.Layout.dragEnd,l}return c(t,p),t.prototype.trigger=function(d){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(d,l){return this},t}(x.Layout);E.LayoutAdaptor=_,E.adaptor=function g(p){return new _(p)}},83292:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(15675),x=s(76767);E.gridify=function _(t,d,l,h){t.cola.start(0,0,0,10,!1);var f=function g(t,d,l,h){t.forEach(function(u){u.routerNode={name:u.name,bounds:u.bounds.inflate(-l)}}),d.forEach(function(u){u.routerNode={bounds:u.bounds.inflate(-h),children:(void 0!==u.groups?u.groups.map(function(m){return t.length+m.id}):[]).concat(void 0!==u.leaves?u.leaves.map(function(m){return m.index}):[])}});var f=t.concat(d).map(function(u,m){return u.routerNode.id=m,u.routerNode});return new x.GridRouter(f,{getChildren:function(u){return u.children},getBounds:function(u){return u.bounds}},l-h)}(t.cola.nodes(),t.cola.groups(),l,h);return f.routeEdges(t.powerGraph.powerEdges,d,function(u){return u.source.routerNode.id},function(u){return u.target.routerNode.id})},E.powerGraphGridLayout=function p(t,d,l){var h;t.nodes.forEach(function(T,L){return T.index=L}),(new c.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(T){(h=T).groups.forEach(function(L){return L.padding=l})});var f=t.nodes.length,u=[],m=t.nodes.slice(0);return m.forEach(function(T,L){return T.index=L}),h.groups.forEach(function(T){var L=T.index=T.id+f;m.push(T),void 0!==T.leaves&&T.leaves.forEach(function(I){return u.push({source:L,target:I.index})}),void 0!==T.groups&&T.groups.forEach(function(I){return u.push({source:L,target:I.id+f})})}),h.powerEdges.forEach(function(T){u.push({source:T.source.index,target:T.target.index})}),(new c.Layout).size(d).nodes(m).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new c.Layout).convergenceThreshold(.001).size(d).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(T){(h=T).groups.forEach(function(L){L.padding=l})}).start(50,0,100,0,!1),powerGraph:h}}},26243:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(49346),x=s(22487);E.d3adaptor=function _(p){return!p||function g(p){return p.version&&null!==p.version.match(/^3\./)}(p)?new c.D3StyleLayoutAdaptor:new x.D3StyleLayoutAdaptor(p)}},49346:function(w,E,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(){var d=p.call(this)||this;d.event=d3.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=d3.behavior.drag().origin(x.Layout.dragOrigin).on("dragstart.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,d3.event),l.resume()}).on("dragend.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;this.call(f)},d}return c(t,p),t.prototype.trigger=function(d){var l={type:x.EventType[d.type],alpha:d.alpha,stress:d.stress};this.event[l.type](l)},t.prototype.kick=function(){var d=this;d3.timer(function(){return p.prototype.tick.call(d)})},t.prototype.on=function(d,l){return this.event.on("string"==typeof d?d:x.EventType[d],l),this},t}(x.Layout);E.D3StyleLayoutAdaptor=_,E.d3adaptor=function g(){return new _}},22487:function(w,E,s){"use strict";var g,c=this&&this.__extends||(g=function(p,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var h in l)l.hasOwnProperty(h)&&(d[h]=l[h])})(p,t)},function(p,t){function d(){this.constructor=p}g(p,t),p.prototype=null===t?Object.create(t):(d.prototype=t.prototype,new d)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(15675),_=function(g){function p(t){var d=g.call(this)||this;d.d3Context=t,d.event=t.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=t.drag().subject(x.Layout.dragOrigin).on("start.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,t.event),l.resume()}).on("end.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;arguments[0].call(f)},d}return c(p,g),p.prototype.trigger=function(t){var d={type:x.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(d.type,d)},p.prototype.kick=function(){var t=this,d=this.d3Context.timer(function(){return g.prototype.tick.call(t)&&d.stop()})},p.prototype.on=function(t,d){return this.event.on("string"==typeof t?t:x.EventType[t],d),this},p}(x.Layout);E.D3StyleLayoutAdaptor=_},91786:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function(){function _(){this.locks={}}return _.prototype.add=function(g,p){this.locks[g]=p},_.prototype.clear=function(){this.locks={}},_.prototype.isEmpty=function(){for(var g in this.locks)return!1;return!0},_.prototype.apply=function(g){for(var p in this.locks)g(Number(p),this.locks[p])},_}();E.Locks=s;var c=function(){function _(g,p,t){void 0===t&&(t=null),this.D=p,this.G=t,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new x,this.project=null,this.x=g,this.k=g.length;var d=this.n=g[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new s,this.minD=Number.MAX_VALUE;for(var h,l=d;l--;)for(h=d;--h>l;){var f=p[l][h];f>0&&f<this.minD&&(this.minD=f)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),l=this.k;l--;){for(this.g[l]=new Array(d),this.H[l]=new Array(d),h=d;h--;)this.H[l][h]=new Array(d);this.Hd[l]=new Array(d),this.a[l]=new Array(d),this.b[l]=new Array(d),this.c[l]=new Array(d),this.d[l]=new Array(d),this.e[l]=new Array(d),this.ia[l]=new Array(d),this.ib[l]=new Array(d),this.xtmp[l]=new Array(d)}}return _.createSquareMatrix=function(g,p){for(var t=new Array(g),d=0;d<g;++d){t[d]=new Array(g);for(var l=0;l<g;++l)t[d][l]=p(d,l)}return t},_.prototype.offsetDir=function(){for(var g=this,p=new Array(this.k),t=0,d=0;d<this.k;++d){var l=p[d]=this.random.getNextBetween(.01,1)-.5;t+=l*l}return t=Math.sqrt(t),p.map(function(h){return h*(g.minD/t)})},_.prototype.computeDerivatives=function(g){var p=this,t=this.n;if(!(t<1)){for(var d,l=new Array(this.k),h=new Array(this.k),f=new Array(this.k),u=0,m=0;m<t;++m){for(d=0;d<this.k;++d)f[d]=this.g[d][m]=0;for(var T=0;T<t;++T)if(m!==T){for(var L=t;L--;){var I=0;for(d=0;d<this.k;++d){var R=l[d]=g[d][m]-g[d][T];I+=h[d]=R*R}if(I>1e-9)break;var M=this.offsetDir();for(d=0;d<this.k;++d)g[d][T]+=M[d]}var F=Math.sqrt(I),Z=this.D[m][T],Y=null!=this.G?this.G[m][T]:1;if(Y>1&&F>Z||!isFinite(Z)){for(d=0;d<this.k;++d)this.H[d][m][T]=0;continue}Y>1&&(Y=1);var U=Z*Z,rt=2*Y*(F-Z)/(U*F),q=F*F*F,st=2*-Y/(U*q);for(isFinite(rt)||console.log(rt),d=0;d<this.k;++d)this.g[d][m]+=l[d]*rt,f[d]-=this.H[d][m][T]=st*(q+Z*(h[d]-I)+F*I)}for(d=0;d<this.k;++d)u=Math.max(u,this.H[d][m][m]=f[d])}var K=this.snapGridSize/2,X=this.snapGridSize,at=this.snapStrength/(K*K),H=this.numGridSnapNodes;for(m=0;m<H;++m)for(d=0;d<this.k;++d){var Q=this.x[d][m],nt=Q/X,tt=nt%1,V=nt-tt;-K<(R=Math.abs(tt)<=.5?Q-V*X:Q>0?Q-(V+1)*X:Q-(V-1)*X)&&R<=K&&(this.scaleSnapByMaxH?(this.g[d][m]+=u*at*R,this.H[d][m][m]+=u*at):(this.g[d][m]+=at*R,this.H[d][m][m]+=at))}this.locks.isEmpty()||this.locks.apply(function(mt,St){for(d=0;d<p.k;++d)p.H[d][mt][mt]+=u,p.g[d][mt]-=u*(St[d]-g[d][mt])})}},_.dotProd=function(g,p){for(var t=0,d=g.length;d--;)t+=g[d]*p[d];return t},_.rightMultiply=function(g,p,t){for(var d=g.length;d--;)t[d]=_.dotProd(g[d],p)},_.prototype.computeStepSize=function(g){for(var p=0,t=0,d=0;d<this.k;++d)p+=_.dotProd(this.g[d],g[d]),_.rightMultiply(this.H[d],g[d],this.Hd[d]),t+=_.dotProd(g[d],this.Hd[d]);return 0!==t&&isFinite(t)?1*p/t:0},_.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var g=this.computeStepSize(this.g),p=0;p<this.k;++p)this.takeDescentStep(this.x[p],this.g[p],g);return this.computeStress()},_.copy=function(g,p){for(var t=g.length,d=p[0].length,l=0;l<t;++l)for(var h=0;h<d;++h)p[l][h]=g[l][h]},_.prototype.stepAndProject=function(g,p,t,d){_.copy(g,p),this.takeDescentStep(p[0],t[0],d),this.project&&this.project[0](g[0],g[1],p[0]),this.takeDescentStep(p[1],t[1],d),this.project&&this.project[1](p[0],g[1],p[1]);for(var l=2;l<this.k;l++)this.takeDescentStep(p[l],t[l],d)},_.mApply=function(g,p,t){for(var d=g;d-- >0;)for(var l=p;l-- >0;)t(d,l)},_.prototype.matrixApply=function(g){_.mApply(this.k,this.n,g)},_.prototype.computeNextPosition=function(g,p){var t=this;this.computeDerivatives(g);var d=this.computeStepSize(this.g);if(this.stepAndProject(g,p,this.g,d),this.project){this.matrixApply(function(h,f){return t.e[h][f]=g[h][f]-p[h][f]});var l=this.computeStepSize(this.e);l=Math.max(.2,Math.min(l,1)),this.stepAndProject(g,p,this.e,l)}},_.prototype.run=function(g){for(var p=Number.MAX_VALUE,t=!1;!t&&g-- >0;){var d=this.rungeKutta();t=Math.abs(p/d-1)<this.threshold,p=d}return p},_.prototype.rungeKutta=function(){var g=this;this.computeNextPosition(this.x,this.a),_.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),_.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var p=0;return this.matrixApply(function(t,d){var l=(g.a[t][d]+2*g.b[t][d]+2*g.c[t][d]+g.d[t][d])/6,h=g.x[t][d]-l;p+=h*h,g.x[t][d]=l}),p},_.mid=function(g,p,t){_.mApply(g.length,g[0].length,function(d,l){return t[d][l]=g[d][l]+(p[d][l]-g[d][l])/2})},_.prototype.takeDescentStep=function(g,p,t){for(var d=0;d<this.n;++d)g[d]=g[d]-t*p[d]},_.prototype.computeStress=function(){for(var g=0,p=0,t=this.n-1;p<t;++p)for(var d=p+1,l=this.n;d<l;++d){for(var h=0,f=0;f<this.k;++f){var u=this.x[f][p]-this.x[f][d];h+=u*u}h=Math.sqrt(h);var m=this.D[p][d];if(isFinite(m)){var T=m-h;g+=T*T/(m*m)}}return g},_.zeroDistance=1e-10,_}();E.Descent=c;var x=function(){function _(g){void 0===g&&(g=1),this.seed=g,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return _.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},_.prototype.getNextBetween=function(g,p){return g+this.getNext()*(p-g)},_}();E.PseudoRandom=x},30225:function(w,E,s){"use strict";var tt,c=this&&this.__extends||(tt=function(V,D){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(mt,St){mt.__proto__=St}||function(mt,St){for(var Mt in St)St.hasOwnProperty(Mt)&&(mt[Mt]=St[Mt])})(V,D)},function(V,D){function mt(){this.constructor=V}tt(V,D),V.prototype=null===D?Object.create(D):(mt.prototype=D.prototype,new mt)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(4068),_=function tt(){};E.Point=_;var g=function tt(V,D,mt,St){this.x1=V,this.y1=D,this.x2=mt,this.y2=St};E.LineSegment=g;var p=function(tt){function V(){return null!==tt&&tt.apply(this,arguments)||this}return c(V,tt),V}(_);function t(tt,V,D){return(V.x-tt.x)*(D.y-tt.y)-(D.x-tt.x)*(V.y-tt.y)}function d(tt,V,D){return t(tt,V,D)>0}function l(tt,V,D){return t(tt,V,D)<0}function T(tt,V){var D=V.slice(0);return D.push(V[0]),{rtan:L(tt,D),ltan:I(tt,D)}}function L(tt,V){var mt,St,Mt,jt,D=V.length-1;if(l(tt,V[1],V[0])&&!d(tt,V[D-1],V[0]))return 0;for(mt=0,St=D;;){if(St-mt==1)return d(tt,V[mt],V[St])?mt:St;if((jt=l(tt,V[(Mt=Math.floor((mt+St)/2))+1],V[Mt]))&&!d(tt,V[Mt-1],V[Mt]))return Mt;d(tt,V[mt+1],V[mt])?jt||d(tt,V[mt],V[Mt])?St=Mt:mt=Mt:jt&&l(tt,V[mt],V[Mt])?St=Mt:mt=Mt}}function I(tt,V){var mt,St,Mt,jt,D=V.length-1;if(d(tt,V[D-1],V[0])&&!l(tt,V[1],V[0]))return 0;for(mt=0,St=D;;){if(St-mt==1)return l(tt,V[mt],V[St])?mt:St;if(jt=l(tt,V[(Mt=Math.floor((mt+St)/2))+1],V[Mt]),d(tt,V[Mt-1],V[Mt])&&!jt)return Mt;l(tt,V[mt+1],V[mt])?jt?l(tt,V[mt],V[Mt])?St=Mt:mt=Mt:St=Mt:jt?mt=Mt:d(tt,V[mt],V[Mt])?St=Mt:mt=Mt}}function R(tt,V,D,mt,St,Mt){var Et,jt;jt=mt(tt[Et=D(V[0],tt)],V);for(var Nt=!1;!Nt;){for(Nt=!0;Et===tt.length-1&&(Et=0),!St(V[jt],tt[Et],tt[Et+1]);)++Et;for(;0===jt&&(jt=V.length-1),!Mt(tt[Et],V[jt],V[jt-1]);)--jt,Nt=!1}return{t1:Et,t2:jt}}function F(tt,V){return R(tt,V,L,I,d,l)}E.PolyPoint=p,E.isLeft=t,E.ConvexHull=function h(tt){var mt,V=tt.slice(0).sort(function(Bt,re){return Bt.x!==re.x?re.x-Bt.x:re.y-Bt.y}),D=tt.length,Mt=V[0].x;for(mt=1;mt<D&&V[mt].x===Mt;++mt);var Et=mt-1,jt=[];if(jt.push(V[0]),Et===D-1)V[Et].y!==V[0].y&&jt.push(V[Et]);else{var Nt,ft=D-1,dt=V[D-1].x;for(mt=D-2;mt>=0&&V[mt].x===dt;mt--);for(Nt=mt+1,mt=Et;++mt<=Nt;)if(!(t(V[0],V[Nt],V[mt])>=0&&mt<Nt)){for(;jt.length>1&&!(t(jt[jt.length-2],jt[jt.length-1],V[mt])>0);)jt.length-=1;0!=mt&&jt.push(V[mt])}ft!=Nt&&jt.push(V[ft]);var wt=jt.length;for(mt=Nt;--mt>=Et;)if(!(t(V[ft],V[Et],V[mt])>=0&&mt>Et)){for(;jt.length>wt&&!(t(jt[jt.length-2],jt[jt.length-1],V[mt])>0);)jt.length-=1;0!=mt&&jt.push(V[mt])}}return jt},E.clockwiseRadialSweep=function f(tt,V,D){V.slice(0).sort(function(mt,St){return Math.atan2(mt.y-tt.y,mt.x-tt.x)-Math.atan2(St.y-tt.y,St.x-tt.x)}).forEach(D)},E.tangent_PolyPolyC=R,E.LRtangent_PolyPolyC=function M(tt,V){var D=F(V,tt);return{t1:D.t2,t2:D.t1}},E.RLtangent_PolyPolyC=F,E.LLtangent_PolyPolyC=function Z(tt,V){return R(tt,V,I,I,l,l)},E.RRtangent_PolyPolyC=function Y(tt,V){return R(tt,V,L,L,d,d)};var U=function tt(V,D){this.t1=V,this.t2=D};E.BiTangent=U;var rt=function tt(){};E.BiTangents=rt;var q=function(tt){function V(){return null!==tt&&tt.apply(this,arguments)||this}return c(V,tt),V}(_);E.TVGPoint=q;var st=function tt(V,D,mt,St){this.id=V,this.polyid=D,this.polyvertid=mt,this.p=St,St.vv=this};E.VisibilityVertex=st;var K=function(){function tt(V,D){this.source=V,this.target=D}return tt.prototype.length=function(){var V=this.source.p.x-this.target.p.x,D=this.source.p.y-this.target.p.y;return Math.sqrt(V*V+D*D)},tt}();E.VisibilityEdge=K;var X=function(){function tt(V,D){if(this.P=V,this.V=[],this.E=[],D)this.V=D.V.slice(0),this.E=D.E.slice(0);else{for(var mt=V.length,St=0;St<mt;St++){for(var Mt=V[St],Et=0;Et<Mt.length;++Et){var Nt=new st(this.V.length,St,Et,Mt[Et]);this.V.push(Nt),Et>0&&this.E.push(new K(Mt[Et-1].vv,Nt))}Mt.length>1&&this.E.push(new K(Mt[0].vv,Mt[Mt.length-1].vv))}for(St=0;St<mt-1;St++){var ft=V[St];for(Et=St+1;Et<mt;Et++){var dt=V[Et],wt=at(ft,dt);for(var Bt in wt){var re=wt[Bt];this.addEdgeIfVisible(ft[re.t1],dt[re.t2],St,Et)}}}}}return tt.prototype.addEdgeIfVisible=function(V,D,mt,St){this.intersectsPolys(new g(V.x,V.y,D.x,D.y),mt,St)||this.E.push(new K(V.vv,D.vv))},tt.prototype.addPoint=function(V,D){var mt=this.P.length;this.V.push(new st(this.V.length,mt,0,V));for(var St=0;St<mt;++St)if(St!==D){var Mt=this.P[St],Et=T(V,Mt);this.addEdgeIfVisible(V,Mt[Et.ltan],D,St),this.addEdgeIfVisible(V,Mt[Et.rtan],D,St)}return V.vv},tt.prototype.intersectsPolys=function(V,D,mt){for(var St=0,Mt=this.P.length;St<Mt;++St)if(St!=D&&St!=mt&&W(V,this.P[St]).length>0)return!0;return!1},tt}();function W(tt,V){for(var D=[],mt=1,St=V.length;mt<St;++mt){var Mt=x.Rectangle.lineIntersection(tt.x1,tt.y1,tt.x2,tt.y2,V[mt-1].x,V[mt-1].y,V[mt].x,V[mt].y);Mt&&D.push(Mt)}return D}function at(tt,V){for(var D=tt.length-1,mt=V.length-1,St=new rt,Mt=0;Mt<D;++Mt)for(var Et=0;Et<mt;++Et){var jt=tt[0==Mt?D-1:Mt-1],Nt=tt[Mt],ft=tt[Mt+1],dt=V[0==Et?mt-1:Et-1],wt=V[Et],Bt=V[Et+1],re=t(jt,Nt,wt),ce=t(Nt,dt,wt),he=t(Nt,wt,Bt),_e=t(dt,wt,Nt),qe=t(wt,jt,Nt),ke=t(wt,Nt,ft);re>=0&&ce>=0&&he<0&&_e>=0&&qe>=0&&ke<0?St.ll=new U(Mt,Et):re<=0&&ce<=0&&he>0&&_e<=0&&qe<=0&&ke>0?St.rr=new U(Mt,Et):re<=0&&ce>0&&he<=0&&_e>=0&&qe<0&&ke>=0?St.rl=new U(Mt,Et):re>=0&&ce<0&&he>=0&&_e<=0&&qe>0&&ke<=0&&(St.lr=new U(Mt,Et))}return St}function Q(tt,V){return!tt.every(function(D){return!function H(tt,V){for(var D=1,mt=V.length;D<mt;++D)if(l(V[D-1],V[D],tt))return!1;return!0}(D,V)})}E.TangentVisibilityGraph=X,E.tangents=at,E.polysOverlap=function nt(tt,V){if(Q(tt,V)||Q(V,tt))return!0;for(var D=1,mt=tt.length;D<mt;++D){var St=tt[D],Mt=tt[D-1];if(W(new g(Mt.x,Mt.y,St.x,St.y),V).length>0)return!0}return!1}},76767:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(4068),x=s(98237),_=s(33858),g=function l(h,f,u){this.id=h,this.rect=f,this.children=u,this.leaf=void 0===u||0===u.length};E.NodeWrapper=g;var p=function l(h,f,u,m,T){void 0===m&&(m=null),void 0===T&&(T=null),this.id=h,this.x=f,this.y=u,this.node=m,this.line=T};E.Vert=p;var t=function(){function l(h,f){this.s=h,this.t=f;var u=l.findMatch(h,f),m=f.slice(0).reverse(),T=l.findMatch(h,m);u.length>=T.length?(this.length=u.length,this.si=u.si,this.ti=u.ti,this.reversed=!1):(this.length=T.length,this.si=T.si,this.ti=f.length-T.ti-T.length,this.reversed=!0)}return l.findMatch=function(h,f){for(var u=h.length,m=f.length,T={length:0,si:-1,ti:-1},L=new Array(u),I=0;I<u;I++){L[I]=new Array(m);for(var R=0;R<m;R++)if(h[I]===f[R]){var M=L[I][R]=0===I||0===R?1:L[I-1][R-1]+1;M>T.length&&(T.length=M,T.si=I-M+1,T.ti=R-M+1)}else L[I][R]=0}return T},l.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},l}();E.LongestCommonSubsequence=t;var d=function(){function l(h,f,u){var m=this;void 0===u&&(u=12),this.originalnodes=h,this.groupPadding=u,this.leaves=null,this.nodes=h.map(function(q,st){return new g(st,f.getBounds(q),f.getChildren(q))}),this.leaves=this.nodes.filter(function(q){return q.leaf}),this.groups=this.nodes.filter(function(q){return!q.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(q){return q.children.forEach(function(st){return m.nodes[st].parent=q})}),this.root={children:[]},this.nodes.forEach(function(q){void 0===q.parent&&(q.parent=m.root,m.root.children.push(q.id)),q.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(q,st){return m.getDepth(q)-m.getDepth(st)}),this.backToFront.slice(0).reverse().filter(function(q){return!q.leaf}).forEach(function(q){var st=c.Rectangle.empty();q.children.forEach(function(K){return st=st.union(m.nodes[K].rect)}),q.rect=st.inflate(m.groupPadding)});var L=this.midPoints(this.cols.map(function(q){return q.pos})),I=this.midPoints(this.rows.map(function(q){return q.pos})),R=L[0],M=L[L.length-1],F=I[0],Z=I[I.length-1],Y=this.rows.map(function(q){return{x1:R,x2:M,y1:q.pos,y2:q.pos}}).concat(I.map(function(q){return{x1:R,x2:M,y1:q,y2:q}})),U=this.cols.map(function(q){return{x1:q.pos,x2:q.pos,y1:F,y2:Z}}).concat(L.map(function(q){return{x1:q,x2:q,y1:F,y2:Z}})),rt=Y.concat(U);rt.forEach(function(q){return q.verts=[]}),this.verts=[],this.edges=[],Y.forEach(function(q){return U.forEach(function(st){var K=new p(m.verts.length,st.x1,q.y1);q.verts.push(K),st.verts.push(K),m.verts.push(K);for(var X=m.backToFront.length;X-- >0;){var W=m.backToFront[X],at=W.rect,H=Math.abs(K.x-at.cx()),Q=Math.abs(K.y-at.cy());if(H<at.width()/2&&Q<at.height()/2){K.node=W;break}}})}),rt.forEach(function(q,st){m.nodes.forEach(function(Q,nt){Q.rect.lineIntersections(q.x1,q.y1,q.x2,q.y2).forEach(function(tt,V){var D=new p(m.verts.length,tt.x,tt.y,Q,q);m.verts.push(D),q.verts.push(D),Q.ports.push(D)})});var K=Math.abs(q.y1-q.y2)<.1,X=function(Q,nt){return K?nt.x-Q.x:nt.y-Q.y};q.verts.sort(X);for(var W=1;W<q.verts.length;W++){var at=q.verts[W-1],H=q.verts[W];at.node&&at.node===H.node&&at.node.leaf||m.edges.push({source:at.id,target:H.id,length:Math.abs(X(at,H))})}})}return l.prototype.avg=function(h){return h.reduce(function(f,u){return f+u})/h.length},l.prototype.getGridLines=function(h){for(var f=[],u=this.leaves.slice(0,this.leaves.length);u.length>0;){var m=u.filter(function(L){return L.rect["overlap"+h.toUpperCase()](u[0].rect)}),T={nodes:m,pos:this.avg(m.map(function(L){return L.rect["c"+h]()}))};f.push(T),T.nodes.forEach(function(L){return u.splice(u.indexOf(L),1)})}return f.sort(function(L,I){return L.pos-I.pos}),f},l.prototype.getDepth=function(h){for(var f=0;h.parent!==this.root;)f++,h=h.parent;return f},l.prototype.midPoints=function(h){for(var f=h[1]-h[0],u=[h[0]-f/2],m=1;m<h.length;m++)u.push((h[m]+h[m-1])/2);return u.push(h[h.length-1]+f/2),u},l.prototype.findLineage=function(h){var f=[h];do{f.push(h=h.parent)}while(h!==this.root);return f.reverse()},l.prototype.findAncestorPathBetween=function(h,f){for(var u=this.findLineage(h),m=this.findLineage(f),T=0;u[T]===m[T];)T++;return{commonAncestor:u[T-1],lineages:u.slice(T).concat(m.slice(T))}},l.prototype.siblingObstacles=function(h,f){var u=this,m=this.findAncestorPathBetween(h,f),T={};m.lineages.forEach(function(I){return T[I.id]={}});var L=m.commonAncestor.children.filter(function(I){return!(I in T)});return m.lineages.filter(function(I){return I.parent!==m.commonAncestor}).forEach(function(I){return L=L.concat(I.parent.children.filter(function(R){return R!==I.id}))}),L.map(function(I){return u.nodes[I]})},l.getSegmentSets=function(h,f,u){for(var m=[],T=0;T<h.length;T++)for(var L=h[T],I=0;I<L.length;I++)(R=L[I]).edgeid=T,R.i=I,Math.abs(R[1][f]-R[0][f])<.1&&m.push(R);m.sort(function(U,rt){return U[0][f]-rt[0][f]});for(var F=[],Z=null,Y=0;Y<m.length;Y++){var R=m[Y];(!Z||Math.abs(R[0][f]-Z.pos)>.1)&&F.push(Z={pos:R[0][f],segments:[]}),Z.segments.push(R)}return F},l.nudgeSegs=function(h,f,u,m,T,L){var I=m.length;if(!(I<=1)){for(var R=m.map(function(W){return new x.Variable(W[0][h])}),M=[],F=0;F<I;F++)for(var Z=0;Z<I;Z++)if(F!==Z){var Y=m[F],rt=Y.edgeid,q=m[Z].edgeid,st=-1,K=-1;"x"==h?T(rt,q)&&(Y[0][f]<Y[1][f]?(st=Z,K=F):(st=F,K=Z)):T(rt,q)&&(Y[0][f]<Y[1][f]?(st=F,K=Z):(st=Z,K=F)),st>=0&&M.push(new x.Constraint(R[st],R[K],L))}new x.Solver(R,M).solve(),R.forEach(function(W,at){var H=m[at],Q=W.position();H[0][h]=H[1][h]=Q;var nt=u[H.edgeid];H.i>0&&(nt[H.i-1][1][h]=Q),H.i<nt.length-1&&(nt[H.i+1][0][h]=Q)})}},l.nudgeSegments=function(h,f,u,m,T){for(var L=l.getSegmentSets(h,f,u),I=0;I<L.length;I++){for(var R=L[I],M=[],F=0;F<R.segments.length;F++){var Z=R.segments[F];M.push({type:0,s:Z,pos:Math.min(Z[0][u],Z[1][u])}),M.push({type:1,s:Z,pos:Math.max(Z[0][u],Z[1][u])})}M.sort(function(rt,q){return rt.pos-q.pos+rt.type-q.type});var Y=[],U=0;M.forEach(function(rt){0===rt.type?(Y.push(rt.s),U++):U--,0==U&&(l.nudgeSegs(f,u,h,Y,m,T),Y=[])})}},l.prototype.routeEdges=function(h,f,u,m){var T=this,L=h.map(function(M){return T.route(u(M),m(M))}),I=l.orderEdges(L),R=L.map(function(M){return l.makeSegments(M)});return l.nudgeSegments(R,"x","y",I,f),l.nudgeSegments(R,"y","x",I,f),l.unreverseEdges(R,L),R},l.unreverseEdges=function(h,f){h.forEach(function(u,m){f[m].reversed&&(u.reverse(),u.forEach(function(L){L.reverse()}))})},l.angleBetween2Lines=function(h,f){var u=Math.atan2(h[0].y-h[1].y,h[0].x-h[1].x),m=Math.atan2(f[0].y-f[1].y,f[0].x-f[1].x),T=u-m;return(T>Math.PI||T<-Math.PI)&&(T=m-u),T},l.isLeft=function(h,f,u){return(f.x-h.x)*(u.y-h.y)-(f.y-h.y)*(u.x-h.x)<=0},l.getOrder=function(h){for(var f={},u=0;u<h.length;u++){var m=h[u];void 0===f[m.l]&&(f[m.l]={}),f[m.l][m.r]=!0}return function(T,L){return void 0!==f[T]&&f[T][L]}},l.orderEdges=function(h){for(var f=[],u=0;u<h.length-1;u++)for(var m=u+1;m<h.length;m++){var R,M,F,T=h[u],L=h[m],I=new t(T,L);if(0!==I.length){if(I.reversed&&(L.reverse(),L.reversed=!0,I=new t(T,L)),(I.si<=0||I.ti<=0)&&(I.si+I.length>=T.length||I.ti+I.length>=L.length)){f.push({l:u,r:m});continue}I.si+I.length>=T.length||I.ti+I.length>=L.length?(R=T[I.si+1],F=T[I.si-1],M=L[I.ti-1]):(R=T[I.si+I.length-2],M=T[I.si+I.length],F=L[I.ti+I.length]),l.isLeft(R,M,F)?f.push({l:m,r:u}):f.push({l:u,r:m})}}return l.getOrder(f)},l.makeSegments=function(h){function f(M){return{x:M.x,y:M.y}}for(var m=[],T=f(h[0]),L=1;L<h.length;L++){var I=f(h[L]),R=L<h.length-1?h[L+1]:null;(!R||(M=T,F=I,Z=R,!(Math.abs((F.x-M.x)*(Z.y-M.y)-(F.y-M.y)*(Z.x-M.x))<.001)))&&(m.push([T,I]),T=I)}var M,F,Z;return m},l.prototype.route=function(h,f){var u=this,m=this.nodes[h],T=this.nodes[f];this.obstacles=this.siblingObstacles(m,T);var L={};this.obstacles.forEach(function(K){return L[K.id]=K}),this.passableEdges=this.edges.filter(function(K){var X=u.verts[K.source],W=u.verts[K.target];return!(X.node&&X.node.id in L||W.node&&W.node.id in L)});for(var I=1;I<m.ports.length;I++)this.passableEdges.push({source:m.ports[0].id,target:m.ports[I].id,length:0});for(I=1;I<T.ports.length;I++)this.passableEdges.push({source:T.ports[0].id,target:T.ports[I].id,length:0});var st=new _.Calculator(this.verts.length,this.passableEdges,function(K){return K.source},function(K){return K.target},function(K){return K.length}).PathFromNodeToNodeWithPrevCost(m.ports[0].id,T.ports[0].id,function(K,X,W){var at=u.verts[K],H=u.verts[X],Q=u.verts[W],nt=Math.abs(Q.x-at.x),tt=Math.abs(Q.y-at.y);return at.node===m&&at.node===H.node||H.node===T&&H.node===Q.node?0:nt>1&&tt>1?1e3:0}).reverse().map(function(K){return u.verts[K]});return st.push(this.nodes[T.id].ports[0]),st.filter(function(K,X){return!(X<st.length-1&&st[X+1].node===m&&K.node===m||X>0&&K.node===T&&st[X-1].node===T)})},l.getRoutePath=function(h,f,u,m){var I,R,M,nt,tt,T={routepath:"M "+h[0][0].x+" "+h[0][0].y+" ",arrowpath:""};if(h.length>1)for(var L=0;L<h.length;L++){var F=(R=(I=h[L])[1].x)-I[0].x,Z=(M=I[1].y)-I[0].y;if(L<h.length-1){Math.abs(F)>0?R-=F/Math.abs(F)*f:M-=Z/Math.abs(Z)*f,T.routepath+="L "+R+" "+M+" ";var Y=h[L+1],U=Y[0].x,rt=Y[0].y;F=Y[1].x-U,Z=Y[1].y-rt;var X,W,K=l.angleBetween2Lines(I,Y)<0?1:0;Math.abs(F)>0?(X=U+F/Math.abs(F)*f,W=rt):(X=U,W=rt+Z/Math.abs(Z)*f);var at=Math.abs(X-R),H=Math.abs(W-M);T.routepath+="A "+at+" "+H+" 0 0 "+K+" "+X+" "+W+" "}else{var Q=[R,M];Math.abs(F)>0?(nt=[R-=F/Math.abs(F)*m,M+u],tt=[R,M-u]):(nt=[R+u,M-=Z/Math.abs(Z)*m],tt=[R-u,M]),T.routepath+="L "+R+" "+M+" ",m>0&&(T.arrowpath="M "+Q[0]+" "+Q[1]+" L "+nt[0]+" "+nt[1]+" L "+tt[0]+" "+tt[1])}}else F=(R=(I=h[0])[1].x)-I[0].x,Z=(M=I[1].y)-I[0].y,Q=[R,M],Math.abs(F)>0?(nt=[R-=F/Math.abs(F)*m,M+u],tt=[R,M-u]):(nt=[R+u,M-=Z/Math.abs(Z)*m],tt=[R-u,M]),T.routepath+="L "+R+" "+M+" ",m>0&&(T.arrowpath="M "+Q[0]+" "+Q[1]+" L "+nt[0]+" "+nt[1]+" L "+tt[0]+" "+tt[1]);return T},l}();E.GridRouter=d},30345:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s_GOLDEN_SECTION=(1+Math.sqrt(5))/2;E.applyPacking=function c(_,g,p,L,T,l){void 0===T&&(T=1),void 0===l&&(l=!0);var u=g,m=p,I=(T=void 0!==T?T:1,L=void 0!==L?L:0,0),R=0,M=0,F=0,Z=[];function q(W,at){Z=[],I=0,R=0,F=0;for(var H=0;H<W.length;H++)st(W[H],at);return Math.abs(function X(){return I/R}()-T)}function st(W,at){for(var H=void 0,Q=0;Q<Z.length;Q++)if(Z[Q].space_left>=W.height&&Z[Q].x+Z[Q].width+W.width+10-at<=1e-4){H=Z[Q];break}Z.push(W),void 0!==H?(W.x=H.x+H.width+10,W.y=H.bottom,W.space_left=W.height,W.bottom=W.y,H.space_left-=W.height+10,H.bottom+=W.height+10):(W.y=F,F+=W.height+10,W.x=0,W.bottom=W.y,W.space_left=W.height),W.y+W.height-R>-1e-4&&(R=W.y+W.height-0),W.x+W.width-I>-1e-4&&(I=W.x+W.width-0)}0!=_.length&&(function Y(W){W.forEach(function(H){!function at(H){var Q=Number.MAX_VALUE,nt=Number.MAX_VALUE,tt=0,V=0;H.array.forEach(function(D){var mt=void 0!==D.width?D.width:L,St=void 0!==D.height?D.height:L;mt/=2,St/=2,tt=Math.max(D.x+mt,tt),Q=Math.min(D.x-mt,Q),V=Math.max(D.y+St,V),nt=Math.min(D.y-St,nt)}),H.width=tt-Q,H.height=V-nt}(H)})}(_),function rt(W,at){var H=Number.POSITIVE_INFINITY,Q=0;W.sort(function(ft,dt){return dt.height-ft.height});for(var nt=jt=M=W.reduce(function(ft,dt){return ft.width<dt.width?ft.width:dt.width}),tt=Nt=function K(W){var at=0;return W.forEach(function(H){return at+=H.width+10}),at}(W),V=0,D=Number.MAX_VALUE,mt=Number.MAX_VALUE,St=-1,Mt=Number.MAX_VALUE,Et=Number.MAX_VALUE;Mt>M||Et>1e-4;){if(1!=St){var jt=tt-(tt-nt)/s_GOLDEN_SECTION;D=q(W,jt)}if(0!=St){var Nt=nt+(tt-nt)/s_GOLDEN_SECTION;mt=q(W,Nt)}if(Mt=Math.abs(jt-Nt),Et=Math.abs(D-mt),D<H&&(H=D,Q=jt),mt<H&&(H=mt,Q=Nt),D>mt?(nt=jt,jt=Nt,D=mt,St=1):(tt=Nt,Nt=jt,mt=D,St=0),V++>100)break}q(W,Q)}(_),l&&function U(W){W.forEach(function(at){var H={x:0,y:0};at.array.forEach(function(tt){H.x+=tt.x,H.y+=tt.y}),H.x/=at.array.length,H.y/=at.array.length;var nt_x=at.x-(H.x-at.width/2)+u/2-I/2,nt_y=at.y-(H.y-at.height/2)+m/2-R/2;at.array.forEach(function(tt){tt.x+=nt_x,tt.y+=nt_y})})}(_))},E.separateGraphs=function x(_,g){for(var p={},t={},d=[],l=0,h=0;h<g.length;h++){var f=g[h],u=f.source,m=f.target;t[u.index]?t[u.index].push(m):t[u.index]=[m],t[m.index]?t[m.index].push(u):t[m.index]=[u]}for(h=0;h<_.length;h++){var T=_[h];p[T.index]||L(T,!0)}function L(I,R){if(void 0===p[I.index]){R&&(l++,d.push({array:[]})),p[I.index]=l,d[l-1].array.push(I);var M=t[I.index];if(M)for(var F=0;F<M.length;F++)L(M[F],!1)}}return d}},15675:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var l,u,c=s(33900),x=s(58802),_=s(91786),g=s(4068),p=s(33858),t=s(30225),d=s(30345);function h(u){return void 0!==u.leaves||void 0!==u.groups}(u=l=E.EventType||(E.EventType={}))[u.start=0]="start",u[u.tick=1]="tick",u[u.end=2]="end";var f=function(){function u(){var m=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:u.getSourceIndex,getTargetIndex:u.getTargetIndex,setLength:u.setLinkLength,getType:function(T){return"function"==typeof m._linkType?m._linkType(T):0}}}return u.prototype.on=function(m,T){return this.event||(this.event={}),"string"==typeof m?this.event[l[m]]=T:this.event[m]=T,this},u.prototype.trigger=function(m){this.event&&void 0!==this.event[m.type]&&this.event[m.type](m)},u.prototype.kick=function(){for(;!this.tick(););},u.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:l.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var L,I,m=this._nodes.length;for(this._descent.locks.clear(),I=0;I<m;++I)(L=this._nodes[I]).fixed&&((void 0===L.px||void 0===L.py)&&(L.px=L.x,L.py=L.y),this._descent.locks.add(I,[L.px,L.py]));var M=this._descent.rungeKutta();return 0===M?this._alpha=0:void 0!==this._lastStress&&(this._alpha=M),this._lastStress=M,this.updateNodePositions(),this.trigger({type:l.tick,alpha:this._alpha,stress:this._lastStress}),!1},u.prototype.updateNodePositions=function(){for(var L,m=this._descent.x[0],T=this._descent.x[1],I=this._nodes.length;I--;)(L=this._nodes[I]).x=m[I],L.y=T[I]},u.prototype.nodes=function(m){if(!m){if(0===this._nodes.length&&this._links.length>0){var T=0;this._links.forEach(function(I){T=Math.max(T,I.source,I.target)}),this._nodes=new Array(++T);for(var L=0;L<T;++L)this._nodes[L]={}}return this._nodes}return this._nodes=m,this},u.prototype.groups=function(m){var T=this;return m?(this._groups=m,this._rootGroup={},this._groups.forEach(function(L){void 0===L.padding&&(L.padding=1),void 0!==L.leaves&&L.leaves.forEach(function(I,R){"number"==typeof I&&((L.leaves[R]=T._nodes[I]).parent=L)}),void 0!==L.groups&&L.groups.forEach(function(I,R){"number"==typeof I&&((L.groups[R]=T._groups[I]).parent=L)})}),this._rootGroup.leaves=this._nodes.filter(function(L){return void 0===L.parent}),this._rootGroup.groups=this._groups.filter(function(L){return void 0===L.parent}),this):this._groups},u.prototype.powerGraphGroups=function(m){var T=c.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(T.groups),m(T),this},u.prototype.avoidOverlaps=function(m){return arguments.length?(this._avoidOverlaps=m,this):this._avoidOverlaps},u.prototype.handleDisconnected=function(m){return arguments.length?(this._handleDisconnected=m,this):this._handleDisconnected},u.prototype.flowLayout=function(m,T){return arguments.length||(m="y"),this._directedLinkConstraints={axis:m,getMinSeparation:"number"==typeof T?function(){return T}:T},this},u.prototype.links=function(m){return arguments.length?(this._links=m,this):this._links},u.prototype.constraints=function(m){return arguments.length?(this._constraints=m,this):this._constraints},u.prototype.distanceMatrix=function(m){return arguments.length?(this._distanceMatrix=m,this):this._distanceMatrix},u.prototype.size=function(m){return m?(this._canvasSize=m,this):this._canvasSize},u.prototype.defaultNodeSize=function(m){return m?(this._defaultNodeSize=m,this):this._defaultNodeSize},u.prototype.groupCompactness=function(m){return m?(this._groupCompactness=m,this):this._groupCompactness},u.prototype.linkDistance=function(m){return m?(this._linkDistance="function"==typeof m?m:+m,this._linkLengthCalculator=null,this):this._linkDistance},u.prototype.linkType=function(m){return this._linkType=m,this},u.prototype.convergenceThreshold=function(m){return m?(this._threshold="function"==typeof m?m:+m,this):this._threshold},u.prototype.alpha=function(m){return arguments.length?(m=+m,this._alpha?this._alpha=m>0?m:0:m>0&&(this._running||(this._running=!0,this.trigger({type:l.start,alpha:this._alpha=m}),this.kick())),this):this._alpha},u.prototype.getLinkLength=function(m){return"function"==typeof this._linkDistance?+this._linkDistance(m):this._linkDistance},u.setLinkLength=function(m,T){m.length=T},u.prototype.getLinkType=function(m){return"function"==typeof this._linkType?this._linkType(m):0},u.prototype.symmetricDiffLinkLengths=function(m,T){var L=this;return void 0===T&&(T=1),this.linkDistance(function(I){return m*I.length}),this._linkLengthCalculator=function(){return x.symmetricDiffLinkLengths(L._links,L.linkAccessor,T)},this},u.prototype.jaccardLinkLengths=function(m,T){var L=this;return void 0===T&&(T=1),this.linkDistance(function(I){return m*I.length}),this._linkLengthCalculator=function(){return x.jaccardLinkLengths(L._links,L.linkAccessor,T)},this},u.prototype.start=function(m,T,L,I,R,M){var F=this;void 0===m&&(m=0),void 0===T&&(T=0),void 0===L&&(L=0),void 0===I&&(I=0),void 0===R&&(R=!0),void 0===M&&(M=!0);var Q,U=this.nodes().length,rt=U+2*this._groups.length,st=this._canvasSize[0],K=this._canvasSize[1],X=new Array(rt),W=new Array(rt),at=null,H=this._avoidOverlaps;this._nodes.forEach(function(Mt,Et){Mt.index=Et,void 0===Mt.x&&(Mt.x=st/2,Mt.y=K/2),X[Et]=Mt.x,W[Et]=Mt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?Q=this._distanceMatrix:(Q=new p.Calculator(rt,this._links,u.getSourceIndex,u.getTargetIndex,function(Mt){return F.getLinkLength(Mt)}).DistanceMatrix(),at=_.Descent.createSquareMatrix(rt,function(){return 2}),this._links.forEach(function(Mt){"number"==typeof Mt.source&&(Mt.source=F._nodes[Mt.source]),"number"==typeof Mt.target&&(Mt.target=F._nodes[Mt.target])}),this._links.forEach(function(Mt){var Et=u.getSourceIndex(Mt),jt=u.getTargetIndex(Mt);at[Et][jt]=at[jt][Et]=Mt.weight||1}));var nt=_.Descent.createSquareMatrix(rt,function(Mt,Et){return Q[Mt][Et]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var Z=U;this._groups.forEach(function(Et){(function(Et,jt,Nt,ft){at[Et][jt]=at[jt][Et]=Nt,nt[Et][jt]=nt[jt][Et]=.1})(Z,Z+1,F._groupCompactness),X[Z]=0,W[Z++]=0,X[Z]=0,W[Z++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var V=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,V=V.concat(x.generateDirectedEdgeConstraints(U,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new _.Descent([X,W],nt),this._descent.locks.clear(),Z=0;Z<U;++Z){var D=this._nodes[Z];D.fixed&&(D.px=D.x,D.py=D.y,this._descent.locks.add(Z,[D.x,D.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(m,X,W),V.length>0&&(this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,V).projectFunctions()),this._descent.run(T),this.separateOverlappingComponents(st,K,M),this.avoidOverlaps(H),H&&(this._nodes.forEach(function(Mt,Et){Mt.x=X[Et],Mt.y=W[Et]}),this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,V,!0).projectFunctions(),this._nodes.forEach(function(Mt,Et){X[Et]=Mt.x,W[Et]=Mt.y})),this._descent.G=at,this._descent.run(L),I){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=U,this._descent.scaleSnapByMaxH=U!=rt;var St=_.Descent.createSquareMatrix(rt,function(Mt,Et){return Mt>=U||Et>=U?at[Mt][Et]:0});this._descent.G=St,this._descent.run(I)}return this.updateNodePositions(),this.separateOverlappingComponents(st,K,M),R?this.resume():this},u.prototype.initialLayout=function(m,T,L){if(this._groups.length>0&&m>0){var I=this._nodes.length,R=this._links.map(function(F){return{source:F.source.index,target:F.target.index}}),M=this._nodes.map(function(F){return{index:F.index}});this._groups.forEach(function(F,Z){M.push({index:F.index=I+Z})}),this._groups.forEach(function(F,Z){void 0!==F.leaves&&F.leaves.forEach(function(Y){return R.push({source:F.index,target:Y.index})}),void 0!==F.groups&&F.groups.forEach(function(Y){return R.push({source:F.index,target:Y.index})})}),(new u).size(this.size()).nodes(M).links(R).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(m,0,0,0,!1),this._nodes.forEach(function(F){T[F.index]=M[F.index].x,L[F.index]=M[F.index].y})}else this._descent.run(m)},u.prototype.separateOverlappingComponents=function(m,T,L){var I=this;if(void 0===L&&(L=!0),!this._distanceMatrix&&this._handleDisconnected){var R=this._descent.x[0],M=this._descent.x[1];this._nodes.forEach(function(Z,Y){Z.x=R[Y],Z.y=M[Y]});var F=d.separateGraphs(this._nodes,this._links);d.applyPacking(F,m,T,this._defaultNodeSize,1,L),this._nodes.forEach(function(Z,Y){I._descent.x[0][Y]=Z.x,I._descent.x[1][Y]=Z.y,Z.bounds&&(Z.bounds.setXCentre(Z.x),Z.bounds.setYCentre(Z.y))})}},u.prototype.resume=function(){return this.alpha(.1)},u.prototype.stop=function(){return this.alpha(0)},u.prototype.prepareEdgeRouting=function(m){void 0===m&&(m=0),this._visibilityGraph=new t.TangentVisibilityGraph(this._nodes.map(function(T){return T.bounds.inflate(-m).vertices()}))},u.prototype.routeEdge=function(m,T,L){void 0===T&&(T=5);var I=[],R=new t.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),M={x:m.source.x,y:m.source.y},F={x:m.target.x,y:m.target.y},Z=R.addPoint(M,m.source.index),Y=R.addPoint(F,m.target.index);R.addEdgeIfVisible(M,F,m.source.index,m.target.index),void 0!==L&&L(R);var K=new p.Calculator(R.V.length,R.E,function(nt){return nt.source.id},function(nt){return nt.target.id},function(nt){return nt.length()}).PathFromNodeToNode(Z.id,Y.id);if(1===K.length||K.length===R.V.length){var X=g.makeEdgeBetween(m.source.innerBounds,m.target.innerBounds,T);I=[X.sourceIntersection,X.arrowStart]}else{for(var W=K.length-2,at=R.V[K[W]].p,H=R.V[K[0]].p,Q=(I=[m.source.innerBounds.rayIntersection(at.x,at.y)],W);Q>=0;--Q)I.push(R.V[K[Q]].p);I.push(g.makeEdgeTo(H,m.target.innerBounds,T))}return I},u.getSourceIndex=function(m){return"number"==typeof m.source?m.source:m.source.index},u.getTargetIndex=function(m){return"number"==typeof m.target?m.target:m.target.index},u.linkId=function(m){return u.getSourceIndex(m)+"-"+u.getTargetIndex(m)},u.dragStart=function(m){h(m)?u.storeOffset(m,u.dragOrigin(m)):(u.stopNode(m),m.fixed|=2)},u.stopNode=function(m){m.px=m.x,m.py=m.y},u.storeOffset=function(m,T){void 0!==m.leaves&&m.leaves.forEach(function(L){L.fixed|=2,u.stopNode(L),L._dragGroupOffsetX=L.x-T.x,L._dragGroupOffsetY=L.y-T.y}),void 0!==m.groups&&m.groups.forEach(function(L){return u.storeOffset(L,T)})},u.dragOrigin=function(m){return h(m)?{x:m.bounds.cx(),y:m.bounds.cy()}:m},u.drag=function(m,T){h(m)?(void 0!==m.leaves&&m.leaves.forEach(function(L){m.bounds.setXCentre(T.x),m.bounds.setYCentre(T.y),L.px=L._dragGroupOffsetX+T.x,L.py=L._dragGroupOffsetY+T.y}),void 0!==m.groups&&m.groups.forEach(function(L){return u.drag(L,T)})):(m.px=T.x,m.py=T.y)},u.dragEnd=function(m){h(m)?(void 0!==m.leaves&&m.leaves.forEach(function(T){u.dragEnd(T),delete T._dragGroupOffsetX,delete T._dragGroupOffsetY}),void 0!==m.groups&&m.groups.forEach(u.dragEnd)):m.fixed&=-7},u.mouseOver=function(m){m.fixed|=4,m.px=m.x,m.py=m.y},u.mouseOut=function(m){m.fixed&=-5},u}();E.Layout=f},86461:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(33858),x=s(91786),_=s(4068),g=s(58802),p=function(){function h(f,u){this.source=f,this.target=u}return h.prototype.actualLength=function(f){var u=this;return Math.sqrt(f.reduce(function(m,T){var L=T[u.target]-T[u.source];return m+L*L},0))},h}();E.Link3D=p,E.Node3D=function h(f,u,m){void 0===f&&(f=0),void 0===u&&(u=0),void 0===m&&(m=0),this.x=f,this.y=u,this.z=m};var d=function(){function h(f,u,m){var T=this;void 0===m&&(m=1),this.nodes=f,this.links=u,this.idealLinkLength=m,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(h.k);for(var L=0;L<h.k;++L)this.result[L]=new Array(f.length);f.forEach(function(I,R){for(var M=0,F=h.dims;M<F.length;M++){var Z=F[M];void 0===I[Z]&&(I[Z]=Math.random())}T.result[0][R]=I.x,T.result[1][R]=I.y,T.result[2][R]=I.z})}return h.prototype.linkLength=function(f){return f.actualLength(this.result)},h.prototype.start=function(f){var u=this;void 0===f&&(f=100);var m=this.nodes.length,T=new l;this.useJaccardLinkLengths&&g.jaccardLinkLengths(this.links,T,1.5),this.links.forEach(function(Z){return Z.length*=u.idealLinkLength});var L=new c.Calculator(m,this.links,function(Z){return Z.source},function(Z){return Z.target},function(Z){return Z.length}).DistanceMatrix(),I=x.Descent.createSquareMatrix(m,function(Z,Y){return L[Z][Y]}),R=x.Descent.createSquareMatrix(m,function(){return 2});this.links.forEach(function(Z){var Y=Z.source,U=Z.target;return R[Y][U]=R[U][Y]=1}),this.descent=new x.Descent(this.result,I),this.descent.threshold=.001,this.descent.G=R,this.constraints&&(this.descent.project=new _.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var M=0;M<this.nodes.length;M++){var F=this.nodes[M];F.fixed&&this.descent.locks.add(M,[F.x,F.y,F.z])}return this.descent.run(f),this},h.prototype.tick=function(){this.descent.locks.clear();for(var f=0;f<this.nodes.length;f++){var u=this.nodes[f];u.fixed&&this.descent.locks.add(f,[u.x,u.y,u.z])}return this.descent.rungeKutta()},h.k=(h.dims=["x","y","z"]).length,h}();E.Layout3D=d;var l=function(){function h(){}return h.prototype.getSourceIndex=function(f){return f.source},h.prototype.getTargetIndex=function(f){return f.target},h.prototype.getLength=function(f){return f.length},h.prototype.setLength=function(f,u){f.length=u},h}()},58802:(w,E)=>{"use strict";function s(l,h){var f={};for(var u in l)f[u]={};for(var u in h)f[u]={};return Object.keys(f).length}function c(l,h){var f=0;for(var u in l)void 0!==h[u]&&++f;return f}function _(l,h,f,u){var m=function x(l,h){var f={},u=function(m,T){void 0===f[m]&&(f[m]={}),f[m][T]={}};return l.forEach(function(m){var T=h.getSourceIndex(m),L=h.getTargetIndex(m);u(T,L),u(L,T)}),f}(l,u);l.forEach(function(T){var L=m[u.getSourceIndex(T)],I=m[u.getTargetIndex(T)];u.setLength(T,1+h*f(L,I))})}function d(l,h,f){var u=[],m=0,T=[],L=[];function I(K){K.index=K.lowlink=m++,T.push(K),K.onStack=!0;for(var X=0,W=K.out;X<W.length;X++){var at=W[X];void 0===at.index?(I(at),K.lowlink=Math.min(K.lowlink,at.lowlink)):at.onStack&&(K.lowlink=Math.min(K.lowlink,at.index))}if(K.lowlink===K.index){for(var H=[];T.length&&((at=T.pop()).onStack=!1,H.push(at),at!==K););L.push(H.map(function(Q){return Q.id}))}}for(var R=0;R<l;R++)u.push({id:R,out:[]});for(var M=0,F=h;M<F.length;M++){var Z=F[M],Y=u[f.getSourceIndex(Z)],U=u[f.getTargetIndex(Z)];Y.out.push(U)}for(var rt=0,q=u;rt<q.length;rt++){var st=q[rt];void 0===st.index&&I(st)}return L}Object.defineProperty(E,"__esModule",{value:!0}),E.symmetricDiffLinkLengths=function g(l,h,f){void 0===f&&(f=1),_(l,f,function(u,m){return Math.sqrt(s(u,m)-c(u,m))},h)},E.jaccardLinkLengths=function p(l,h,f){void 0===f&&(f=1),_(l,f,function(u,m){return Math.min(Object.keys(u).length,Object.keys(m).length)<1.1?0:c(u,m)/s(u,m)},h)},E.generateDirectedEdgeConstraints=function t(l,h,f,u){var m=d(l,h,u),T={};m.forEach(function(I,R){return I.forEach(function(M){return T[M]=R})});var L=[];return h.forEach(function(I){var R=u.getSourceIndex(I),M=u.getTargetIndex(I);T[R]!==T[M]&&L.push({axis:f,left:R,right:M,gap:u.getMinSeparation(I)})}),L},E.stronglyConnectedComponents=d},33900:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function h(f,u,m){this.source=f,this.target=u,this.type=m};E.PowerEdge=s;var c=function(){function h(f,u,m,T){var L=this;if(this.linkAccessor=m,this.modules=new Array(f),this.roots=[],T)this.initModulesFromGroup(T);else{this.roots.push(new p);for(var I=0;I<f;++I)this.roots[0].add(this.modules[I]=new _(I))}this.R=u.length,u.forEach(function(R){var M=L.modules[m.getSourceIndex(R)],F=L.modules[m.getTargetIndex(R)],Z=m.getType(R);M.outgoing.add(Z,F),F.incoming.add(Z,M)})}return h.prototype.initModulesFromGroup=function(f){var u=new p;this.roots.push(u);for(var m=0;m<f.leaves.length;++m){var T=f.leaves[m],L=new _(T.id);this.modules[T.id]=L,u.add(L)}if(f.groups)for(var I=0;I<f.groups.length;++I){var R=f.groups[I],M={};for(var F in R)"leaves"!==F&&"groups"!==F&&R.hasOwnProperty(F)&&(M[F]=R[F]);u.add(new _(-1-I,new t,new t,this.initModulesFromGroup(R),M))}return u},h.prototype.merge=function(f,u,m){void 0===m&&(m=0);var T=f.incoming.intersection(u.incoming),L=f.outgoing.intersection(u.outgoing),I=new p;I.add(f),I.add(u);var R=new _(this.modules.length,L,T,I);this.modules.push(R);var M=function(F,Z,Y){F.forAll(function(U,rt){U.forAll(function(q){var st=q[Z];st.add(rt,R),st.remove(rt,f),st.remove(rt,u),f[Y].remove(rt,q),u[Y].remove(rt,q)})})};return M(L,"incoming","outgoing"),M(T,"outgoing","incoming"),this.R-=T.count()+L.count(),this.roots[m].remove(f),this.roots[m].remove(u),this.roots[m].add(R),R},h.prototype.rootMerges=function(f){void 0===f&&(f=0);for(var u=this.roots[f].modules(),m=u.length,T=new Array(m*(m-1)),L=0,I=0,R=m-1;I<R;++I)for(var M=I+1;M<m;++M){var F=u[I],Z=u[M];T[L]={id:L,nEdges:this.nEdges(F,Z),a:F,b:Z},L++}return T},h.prototype.greedyMerge=function(){for(var f=0;f<this.roots.length;++f)if(!(this.roots[f].modules().length<2)){var m=this.rootMerges(f).sort(function(T,L){return T.nEdges==L.nEdges?T.id-L.id:T.nEdges-L.nEdges})[0];if(!(m.nEdges>=this.R))return this.merge(m.a,m.b,f),!0}},h.prototype.nEdges=function(f,u){var m=f.incoming.intersection(u.incoming),T=f.outgoing.intersection(u.outgoing);return this.R-m.count()-T.count()},h.prototype.getGroupHierarchy=function(f){var u=this,m=[];return x(this.roots[0],{},m),this.allEdges().forEach(function(I){var R=u.modules[I.source],M=u.modules[I.target];f.push(new s(void 0===R.gid?I.source:m[R.gid],void 0===M.gid?I.target:m[M.gid],I.type))}),m},h.prototype.allEdges=function(){var f=[];return h.getEdges(this.roots[0],f),f},h.getEdges=function(f,u){f.forAll(function(m){m.getEdges(u),h.getEdges(m.children,u)})},h}();function x(h,f,u){h.forAll(function(m){if(m.isLeaf())f.leaves||(f.leaves=[]),f.leaves.push(m.id);else{var T=f;if(m.gid=u.length,!m.isIsland()||m.isPredefined()){if(T={id:m.gid},m.isPredefined())for(var L in m.definition)T[L]=m.definition[L];f.groups||(f.groups=[]),f.groups.push(m.gid),u.push(T)}x(m.children,T,u)}})}E.Configuration=c;var _=function(){function h(f,u,m,T,L){void 0===u&&(u=new t),void 0===m&&(m=new t),void 0===T&&(T=new p),this.id=f,this.outgoing=u,this.incoming=m,this.children=T,this.definition=L}return h.prototype.getEdges=function(f){var u=this;this.outgoing.forAll(function(m,T){m.forAll(function(L){f.push(new s(u.id,L.id,T))})})},h.prototype.isLeaf=function(){return 0===this.children.count()},h.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},h.prototype.isPredefined=function(){return void 0!==this.definition},h}();E.Module=_;var p=function(){function h(){this.table={}}return h.prototype.count=function(){return Object.keys(this.table).length},h.prototype.intersection=function(f){var u=new h;return u.table=function g(h,f){var u={};for(var m in h)m in f&&(u[m]=h[m]);return u}(this.table,f.table),u},h.prototype.intersectionCount=function(f){return this.intersection(f).count()},h.prototype.contains=function(f){return f in this.table},h.prototype.add=function(f){this.table[f.id]=f},h.prototype.remove=function(f){delete this.table[f.id]},h.prototype.forAll=function(f){for(var u in this.table)f(this.table[u])},h.prototype.modules=function(){var f=[];return this.forAll(function(u){u.isPredefined()||f.push(u)}),f},h}();E.ModuleSet=p;var t=function(){function h(){this.sets={},this.n=0}return h.prototype.count=function(){return this.n},h.prototype.contains=function(f){var u=!1;return this.forAllModules(function(m){!u&&m.id==f&&(u=!0)}),u},h.prototype.add=function(f,u){(f in this.sets?this.sets[f]:this.sets[f]=new p).add(u),++this.n},h.prototype.remove=function(f,u){var m=this.sets[f];m.remove(u),0===m.count()&&delete this.sets[f],--this.n},h.prototype.forAll=function(f){for(var u in this.sets)f(this.sets[u],Number(u))},h.prototype.forAllModules=function(f){this.forAll(function(u,m){return u.forAll(f)})},h.prototype.intersection=function(f){var u=new h;return this.forAll(function(m,T){if(T in f.sets){var L=m.intersection(f.sets[T]),I=L.count();I>0&&(u.sets[T]=L,u.n+=I)}}),u},h}();E.LinkSets=t,E.getGroups=function l(h,f,u,m){for(var L=new c(h.length,f,u,m);L.greedyMerge(););var I=[],R=L.getGroupHierarchy(I);return I.forEach(function(M){var F=function(Z){var Y=M[Z];"number"==typeof Y&&(M[Z]=h[Y])};F("source"),F("target")}),{groups:R,powerEdges:I}}},88866:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function(){function x(_){this.elem=_,this.subheaps=[]}return x.prototype.toString=function(_){for(var g="",p=!1,t=0;t<this.subheaps.length;++t){var d=this.subheaps[t];d.elem?(p&&(g+=","),g+=d.toString(_),p=!0):p=!1}return""!==g&&(g="("+g+")"),(this.elem?_(this.elem):"")+g},x.prototype.forEach=function(_){this.empty()||(_(this.elem,this),this.subheaps.forEach(function(g){return g.forEach(_)}))},x.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(_,g){return _+g.count()},0)},x.prototype.min=function(){return this.elem},x.prototype.empty=function(){return null==this.elem},x.prototype.contains=function(_){if(this===_)return!0;for(var g=0;g<this.subheaps.length;g++)if(this.subheaps[g].contains(_))return!0;return!1},x.prototype.isHeap=function(_){var g=this;return this.subheaps.every(function(p){return _(g.elem,p.elem)&&p.isHeap(_)})},x.prototype.insert=function(_,g){return this.merge(new x(_),g)},x.prototype.merge=function(_,g){return this.empty()?_:_.empty()?this:g(this.elem,_.elem)?(this.subheaps.push(_),this):(_.subheaps.push(this),_)},x.prototype.removeMin=function(_){return this.empty()?null:this.mergePairs(_)},x.prototype.mergePairs=function(_){if(0==this.subheaps.length)return new x(null);if(1==this.subheaps.length)return this.subheaps[0];var g=this.subheaps.pop().merge(this.subheaps.pop(),_),p=this.mergePairs(_);return g.merge(p,_)},x.prototype.decreaseKey=function(_,g,p,t){var d=_.removeMin(t);_.elem=d.elem,_.subheaps=d.subheaps,null!==p&&null!==d.elem&&p(_.elem,_);var l=new x(g);return null!==p&&p(g,l),this.merge(l,t)},x}();E.PairingHeap=s;var c=function(){function x(_){this.lessThan=_}return x.prototype.top=function(){return this.empty()?null:this.root.elem},x.prototype.push=function(){for(var _=[],g=0;g<arguments.length;g++)_[g]=arguments[g];for(var p,d,t=0;d=_[t];++t)p=new s(d),this.root=this.empty()?p:this.root.merge(p,this.lessThan);return p},x.prototype.empty=function(){return!this.root||!this.root.elem},x.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},x.prototype.forEach=function(_){this.root.forEach(_)},x.prototype.pop=function(){if(this.empty())return null;var _=this.root.min();return this.root=this.root.removeMin(this.lessThan),_},x.prototype.reduceKey=function(_,g,p){void 0===p&&(p=null),this.root=this.root.decreaseKey(_,g,p,this.lessThan)},x.prototype.toString=function(_){return this.root.toString(_)},x.prototype.count=function(){return this.root.count()},x}();E.PriorityQueue=c},94655:function(w,E){"use strict";var p,s=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(E,"__esModule",{value:!0});var c=function(){function p(){this.findIter=function(t){for(var d=this._root,l=this.iterator();null!==d;){var h=this._comparator(t,d.data);if(0===h)return l._cursor=d,l;l._ancestors.push(d),d=d.get_child(h>0)}return null}}return p.prototype.clear=function(){this._root=null,this.size=0},p.prototype.find=function(t){for(var d=this._root;null!==d;){var l=this._comparator(t,d.data);if(0===l)return d.data;d=d.get_child(l>0)}return null},p.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},p.prototype.upperBound=function(t){var d=this._comparator;return this._bound(t,function l(h,f){return d(f,h)})},p.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},p.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},p.prototype.iterator=function(){return new x(this)},p.prototype.each=function(t){for(var l,d=this.iterator();null!==(l=d.next());)t(l)},p.prototype.reach=function(t){for(var l,d=this.iterator();null!==(l=d.prev());)t(l)},p.prototype._bound=function(t,d){for(var l=this._root,h=this.iterator();null!==l;){var f=this._comparator(t,l.data);if(0===f)return h._cursor=l,h;h._ancestors.push(l),l=l.get_child(f>0)}for(var u=h._ancestors.length-1;u>=0;--u)if(d(t,(l=h._ancestors[u]).data)>0)return h._cursor=l,h._ancestors.length=u,h;return h._ancestors.length=0,h},p}();E.TreeBase=c;var x=function(){function p(t){this._tree=t,this._ancestors=[],this._cursor=null}return p.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},p.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===d)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},p.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===d)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},p.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},p.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},p}();E.Iterator=x;var _=function(){function p(t){this.data=t,this.left=null,this.right=null,this.red=!0}return p.prototype.get_child=function(t){return t?this.right:this.left},p.prototype.set_child=function(t,d){t?this.right=d:this.left=d},p}(),g=function(p){function t(d){var l=p.call(this)||this;return l._root=null,l._comparator=d,l.size=0,l}return s(t,p),t.prototype.insert=function(d){var l=!1;if(null===this._root)this._root=new _(d),l=!0,this.size++;else{var h=new _(void 0),f=!1,u=!1,m=null,T=h,L=null,I=this._root;for(T.right=this._root;;){if(null===I?(I=new _(d),L.set_child(f,I),l=!0,this.size++):t.is_red(I.left)&&t.is_red(I.right)&&(I.red=!0,I.left.red=!1,I.right.red=!1),t.is_red(I)&&t.is_red(L)){var R=T.right===m;I===L.get_child(u)?T.set_child(R,t.single_rotate(m,!u)):T.set_child(R,t.double_rotate(m,!u))}var M=this._comparator(I.data,d);if(0===M)break;u=f,null!==m&&(T=m),m=L,L=I,I=I.get_child(f=M<0)}this._root=h.right}return this._root.red=!1,l},t.prototype.remove=function(d){if(null===this._root)return!1;var l=new _(void 0),h=l;h.right=this._root;for(var f=null,u=null,m=null,T=!0;null!==h.get_child(T);){var L=T;u=f,f=h,h=h.get_child(T);var I=this._comparator(d,h.data);if(T=I>0,0===I&&(m=h),!t.is_red(h)&&!t.is_red(h.get_child(T)))if(t.is_red(h.get_child(!T))){var R=t.single_rotate(h,T);f.set_child(L,R),f=R}else if(!t.is_red(h.get_child(!T))){var M=f.get_child(!L);if(null!==M)if(t.is_red(M.get_child(!L))||t.is_red(M.get_child(L))){var F=u.right===f;t.is_red(M.get_child(L))?u.set_child(F,t.double_rotate(f,L)):t.is_red(M.get_child(!L))&&u.set_child(F,t.single_rotate(f,L));var Z=u.get_child(F);Z.red=!0,h.red=!0,Z.left.red=!1,Z.right.red=!1}else f.red=!1,M.red=!0,h.red=!0}}return null!==m&&(m.data=h.data,f.set_child(f.right===h,h.get_child(null===h.left)),this.size--),this._root=l.right,null!==this._root&&(this._root.red=!1),null!==m},t.is_red=function(d){return null!==d&&d.red},t.single_rotate=function(d,l){var h=d.get_child(!l);return d.set_child(!l,h.get_child(l)),h.set_child(l,d),d.red=!0,h.red=!1,h},t.double_rotate=function(d,l){return d.set_child(!l,t.single_rotate(d.get_child(!l),!l)),t.single_rotate(d,l)},t}(c);E.RBTree=g},4068:function(w,E,s){"use strict";var K,c=this&&this.__extends||(K=function(X,W){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,H){at.__proto__=H}||function(at,H){for(var Q in H)H.hasOwnProperty(Q)&&(at[Q]=H[Q])})(X,W)},function(X,W){function at(){this.constructor=X}K(X,W),X.prototype=null===W?Object.create(W):(at.prototype=W.prototype,new at)});Object.defineProperty(E,"__esModule",{value:!0});var x=s(98237),_=s(94655);function g(K){return K.bounds=void 0!==K.leaves?K.leaves.reduce(function(X,W){return W.bounds.union(X)},p.empty()):p.empty(),void 0!==K.groups&&(K.bounds=K.groups.reduce(function(X,W){return g(W).union(X)},K.bounds)),K.bounds=K.bounds.inflate(K.padding),K.bounds}E.computeGroupBounds=g;var p=function(){function K(X,W,at,H){this.x=X,this.X=W,this.y=at,this.Y=H}return K.empty=function(){return new K(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},K.prototype.cx=function(){return(this.x+this.X)/2},K.prototype.cy=function(){return(this.y+this.Y)/2},K.prototype.overlapX=function(X){var W=this.cx(),at=X.cx();return W<=at&&X.x<this.X?this.X-X.x:at<=W&&this.x<X.X?X.X-this.x:0},K.prototype.overlapY=function(X){var W=this.cy(),at=X.cy();return W<=at&&X.y<this.Y?this.Y-X.y:at<=W&&this.y<X.Y?X.Y-this.y:0},K.prototype.setXCentre=function(X){var W=X-this.cx();this.x+=W,this.X+=W},K.prototype.setYCentre=function(X){var W=X-this.cy();this.y+=W,this.Y+=W},K.prototype.width=function(){return this.X-this.x},K.prototype.height=function(){return this.Y-this.y},K.prototype.union=function(X){return new K(Math.min(this.x,X.x),Math.max(this.X,X.X),Math.min(this.y,X.y),Math.max(this.Y,X.Y))},K.prototype.lineIntersections=function(X,W,at,H){for(var Q=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],nt=[],tt=0;tt<4;++tt){var V=K.lineIntersection(X,W,at,H,Q[tt][0],Q[tt][1],Q[tt][2],Q[tt][3]);null!==V&&nt.push({x:V.x,y:V.y})}return nt},K.prototype.rayIntersection=function(X,W){var at=this.lineIntersections(this.cx(),this.cy(),X,W);return at.length>0?at[0]:null},K.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},K.lineIntersection=function(X,W,at,H,Q,nt,tt,V){var D=at-X,mt=tt-Q,St=H-W,Mt=V-nt,Et=Mt*D-mt*St;if(0==Et)return null;var jt=X-Q,Nt=W-nt,dt=(mt*Nt-Mt*jt)/Et,Bt=(D*Nt-St*jt)/Et;return dt>=0&&dt<=1&&Bt>=0&&Bt<=1?{x:X+dt*D,y:W+dt*St}:null},K.prototype.inflate=function(X){return new K(this.x-X,this.X+X,this.y-X,this.Y+X)},K}();E.Rectangle=p,E.makeEdgeBetween=function t(K,X,W){var at=K.rayIntersection(X.cx(),X.cy())||{x:K.cx(),y:K.cy()},H=X.rayIntersection(K.cx(),K.cy())||{x:X.cx(),y:X.cy()},Q=H.x-at.x,nt=H.y-at.y,tt=Math.sqrt(Q*Q+nt*nt),V=tt-W;return{sourceIntersection:at,targetIntersection:H,arrowStart:{x:at.x+V*Q/tt,y:at.y+V*nt/tt}}},E.makeEdgeTo=function d(K,X,W){var at=X.rayIntersection(K.x,K.y);at||(at={x:X.cx(),y:X.cy()});var H=at.x-K.x,Q=at.y-K.y,nt=Math.sqrt(H*H+Q*Q);return{x:at.x-W*H/nt,y:at.y-W*Q/nt}};var l=function K(X,W,at){this.v=X,this.r=W,this.pos=at,this.prev=u(),this.next=u()},h=function K(X,W,at){this.isOpen=X,this.v=W,this.pos=at};function f(K,X){return K.pos>X.pos?1:K.pos<X.pos||K.isOpen?-1:X.isOpen?1:0}function u(){return new _.RBTree(function(K,X){return K.pos-X.pos})}var m={getCentre:function(K){return K.cx()},getOpen:function(K){return K.y},getClose:function(K){return K.Y},getSize:function(K){return K.width()},makeRect:function(K,X,W,at){return new p(W-at/2,W+at/2,K,X)},findNeighbours:function R(K,X){var W=function(at,H){for(var nt,Q=X.findIter(K);null!==(nt=Q[at]());){var tt=nt.r.overlapX(K.r);if((tt<=0||tt<=nt.r.overlapY(K.r))&&(K[at].insert(nt),nt[H].insert(K)),tt<=0)break}};W("next","prev"),W("prev","next")}},T={getCentre:function(K){return K.cy()},getOpen:function(K){return K.x},getClose:function(K){return K.X},getSize:function(K){return K.height()},makeRect:function(K,X,W,at){return new p(K,X,W-at/2,W+at/2)},findNeighbours:function M(K,X){var W=function(at,H){var Q=X.findIter(K)[at]();null!==Q&&Q.r.overlapX(K.r)>0&&(K[at].insert(Q),Q[H].insert(K))};W("next","prev"),W("prev","next")}};function L(K,X,W,at){void 0===at&&(at=!1);var H=K.padding,Q=void 0!==K.groups?K.groups.length:0,nt=void 0!==K.leaves?K.leaves.length:0,tt=Q?K.groups.reduce(function(ce,he){return ce.concat(L(he,X,W,!0))},[]):[],V=(at?2:0)+nt+Q,D=new Array(V),mt=new Array(V),St=0,Mt=function(ce,he){mt[St]=ce,D[St++]=he};if(at){var Et=K.bounds,jt=X.getCentre(Et),Nt=X.getSize(Et)/2,ft=X.getOpen(Et),dt=X.getClose(Et),wt=jt-Nt+H/2,Bt=jt+Nt-H/2;K.minVar.desiredPosition=wt,Mt(X.makeRect(ft,dt,wt,H),K.minVar),K.maxVar.desiredPosition=Bt,Mt(X.makeRect(ft,dt,Bt,H),K.maxVar)}nt&&K.leaves.forEach(function(ce){return Mt(ce.bounds,ce.variable)}),Q&&K.groups.forEach(function(ce){var he=ce.bounds;Mt(X.makeRect(X.getOpen(he),X.getClose(he),X.getCentre(he),X.getSize(he)),ce.minVar)});var re=I(mt,D,X,W);return Q&&(D.forEach(function(ce){ce.cOut=[],ce.cIn=[]}),re.forEach(function(ce){ce.left.cOut.push(ce),ce.right.cIn.push(ce)}),K.groups.forEach(function(ce){var he=(ce.padding-X.getSize(ce.bounds))/2;ce.minVar.cIn.forEach(function(_e){return _e.gap+=he}),ce.minVar.cOut.forEach(function(_e){_e.left=ce.maxVar,_e.gap+=he})})),tt.concat(re)}function I(K,X,W,at){var H,Q=K.length,nt=2*Q;console.assert(X.length>=Q);var tt=new Array(nt);for(H=0;H<Q;++H){var V=K[H],D=new l(X[H],V,W.getCentre(V));tt[H]=new h(!0,D,W.getOpen(V)),tt[H+Q]=new h(!1,D,W.getClose(V))}tt.sort(f);var mt=new Array,St=u();for(H=0;H<nt;++H){var Mt=tt[H];if(D=Mt.v,Mt.isOpen)St.insert(D),W.findNeighbours(D,St);else{St.remove(D);var Et=function(ft,dt){var wt=(W.getSize(ft.r)+W.getSize(dt.r))/2+at;mt.push(new x.Constraint(ft.v,dt.v,wt))},jt=function(ft,dt,wt){for(var Bt,re=D[ft].iterator();null!==(Bt=re[ft]());)wt(Bt,D),Bt[dt].remove(D)};jt("prev","next",function(ft,dt){return Et(ft,dt)}),jt("next","prev",function(ft,dt){return Et(dt,ft)})}}return console.assert(0===St.size),mt}function F(K,X){return I(K,X,m,1e-6)}function Z(K,X){return I(K,X,T,1e-6)}function Y(K){return L(K,m,1e-6)}function U(K){return L(K,T,1e-6)}E.generateXConstraints=F,E.generateYConstraints=Z,E.generateXGroupConstraints=Y,E.generateYGroupConstraints=U,E.removeOverlaps=function rt(K){var X=K.map(function(H){return new x.Variable(H.cx())}),W=F(K,X),at=new x.Solver(X,W);at.solve(),X.forEach(function(H,Q){return K[Q].setXCentre(H.position())}),X=K.map(function(H){return new x.Variable(H.cy())}),W=Z(K,X),(at=new x.Solver(X,W)).solve(),X.forEach(function(H,Q){return K[Q].setYCentre(H.position())})};var q=function(K){function X(W,at){var H=K.call(this,0,at)||this;return H.index=W,H}return c(X,K),X}(x.Variable);E.IndexedVariable=q;var st=function(){function K(X,W,at,H,Q){var nt=this;if(void 0===at&&(at=null),void 0===H&&(H=null),void 0===Q&&(Q=!1),this.nodes=X,this.groups=W,this.rootGroup=at,this.avoidOverlaps=Q,this.variables=X.map(function(V,D){return V.variable=new q(D,1)}),H&&this.createConstraints(H),Q&&at&&void 0!==at.groups){X.forEach(function(V){if(V.width&&V.height){var D=V.width/2,mt=V.height/2;V.bounds=new p(V.x-D,V.x+D,V.y-mt,V.y+mt)}else V.bounds=new p(V.x,V.x,V.y,V.y)}),g(at);var tt=X.length;W.forEach(function(V){nt.variables[tt]=V.minVar=new q(tt++,void 0!==V.stiffness?V.stiffness:.01),nt.variables[tt]=V.maxVar=new q(tt++,void 0!==V.stiffness?V.stiffness:.01)})}}return K.prototype.createSeparation=function(X){return new x.Constraint(this.nodes[X.left].variable,this.nodes[X.right].variable,X.gap,void 0!==X.equality&&X.equality)},K.prototype.makeFeasible=function(X){var W=this;if(this.avoidOverlaps){var at="x",H="width";"x"===X.axis&&(at="y",H="height");var Q=X.offsets.map(function(tt){return W.nodes[tt.node]}).sort(function(tt,V){return tt[at]-V[at]}),nt=null;Q.forEach(function(tt){if(nt){var V=nt[at]+nt[H];V>tt[at]&&(tt[at]=V)}nt=tt})}},K.prototype.createAlignment=function(X){var W=this,at=this.nodes[X.offsets[0].node].variable;this.makeFeasible(X);var H="x"===X.axis?this.xConstraints:this.yConstraints;X.offsets.slice(1).forEach(function(Q){H.push(new x.Constraint(at,W.nodes[Q.node].variable,Q.offset,!0))})},K.prototype.createConstraints=function(X){var W=this,at=function(H){return void 0===H.type||"separation"===H.type};this.xConstraints=X.filter(function(H){return"x"===H.axis&&at(H)}).map(function(H){return W.createSeparation(H)}),this.yConstraints=X.filter(function(H){return"y"===H.axis&&at(H)}).map(function(H){return W.createSeparation(H)}),X.filter(function(H){return"alignment"===H.type}).forEach(function(H){return W.createAlignment(H)})},K.prototype.setupVariablesAndBounds=function(X,W,at,H){this.nodes.forEach(function(Q,nt){Q.fixed?(Q.variable.weight=Q.fixedWeight?Q.fixedWeight:1e3,at[nt]=H(Q)):Q.variable.weight=1;var tt=(Q.width||0)/2,V=(Q.height||0)/2,D=X[nt],mt=W[nt];Q.bounds=new p(D-tt,D+tt,mt-V,mt+V)})},K.prototype.xProject=function(X,W,at){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(X,W,X,at,function(H){return H.px},this.xConstraints,Y,function(H){return H.bounds.setXCentre(at[H.variable.index]=H.variable.position())},function(H){var Q=at[H.minVar.index]=H.minVar.position(),nt=at[H.maxVar.index]=H.maxVar.position(),tt=H.padding/2;H.bounds.x=Q-tt,H.bounds.X=nt+tt})},K.prototype.yProject=function(X,W,at){!this.rootGroup&&!this.yConstraints||this.project(X,W,W,at,function(H){return H.py},this.yConstraints,U,function(H){return H.bounds.setYCentre(at[H.variable.index]=H.variable.position())},function(H){var Q=at[H.minVar.index]=H.minVar.position(),nt=at[H.maxVar.index]=H.maxVar.position(),tt=H.padding/2;H.bounds.y=Q-tt,H.bounds.Y=nt+tt})},K.prototype.projectFunctions=function(){var X=this;return[function(W,at,H){return X.xProject(W,at,H)},function(W,at,H){return X.yProject(W,at,H)}]},K.prototype.project=function(X,W,at,H,Q,nt,tt,V,D){this.setupVariablesAndBounds(X,W,H,Q),this.rootGroup&&this.avoidOverlaps&&(g(this.rootGroup),nt=nt.concat(tt(this.rootGroup))),this.solve(this.variables,nt,at,H),this.nodes.forEach(V),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(D),g(this.rootGroup))},K.prototype.solve=function(X,W,at,H){var Q=new x.Solver(X,W);Q.setStartingPositions(at),Q.setDesiredPositions(H),Q.solve()},K}();E.Projection=st},33858:(w,E,s)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var c=s(88866),x=function t(d,l){this.id=d,this.distance=l},_=function t(d){this.id=d,this.neighbours=[]},g=function t(d,l,h){this.node=d,this.prev=l,this.d=h},p=function(){function t(d,l,h,f,u){this.n=d,this.es=l,this.neighbours=new Array(this.n);for(var m=this.n;m--;)this.neighbours[m]=new _(m);for(m=this.es.length;m--;){var T=this.es[m],L=h(T),I=f(T),R=u(T);this.neighbours[L].neighbours.push(new x(I,R)),this.neighbours[I].neighbours.push(new x(L,R))}}return t.prototype.DistanceMatrix=function(){for(var d=new Array(this.n),l=0;l<this.n;++l)d[l]=this.dijkstraNeighbours(l);return d},t.prototype.DistancesFromNode=function(d){return this.dijkstraNeighbours(d)},t.prototype.PathFromNodeToNode=function(d,l){return this.dijkstraNeighbours(d,l)},t.prototype.PathFromNodeToNodeWithPrevCost=function(d,l,h){var f=new c.PriorityQueue(function(U,rt){return U.d<=rt.d}),u=this.neighbours[d],m=new g(u,null,0),T={};for(f.push(m);!f.empty()&&(u=(m=f.pop()).node).id!==l;)for(var L=u.neighbours.length;L--;){var I=u.neighbours[L],R=this.neighbours[I.id];if(!m.prev||R.id!==m.prev.node.id){var M=R.id+","+u.id;if(!(M in T&&T[M]<=m.d)){var F=m.prev?h(m.prev.node.id,u.id,R.id):0,Z=m.d+I.distance+F;T[M]=Z,f.push(new g(R,m,Z))}}}for(var Y=[];m.prev;)Y.push((m=m.prev).node.id);return Y},t.prototype.dijkstraNeighbours=function(d,l){void 0===l&&(l=-1);for(var h=new c.PriorityQueue(function(F,Z){return F.d<=Z.d}),f=this.neighbours.length,u=new Array(f);f--;){var m=this.neighbours[f];m.d=f===d?0:Number.POSITIVE_INFINITY,m.q=h.push(m)}for(;!h.empty();){var T=h.pop();if(u[T.id]=T.d,T.id===l){for(var L=[],I=T;void 0!==I.prev;)L.push(I.prev.id),I=I.prev;return L}for(f=T.neighbours.length;f--;){var R=T.neighbours[f],M=(I=this.neighbours[R.id],T.d+R.distance);T.d!==Number.MAX_VALUE&&I.d>M&&(I.d=M,I.prev=T,h.reduceKey(I.q,I,function(Z,Y){return Z.q=Y}))}}return u},t}();E.Calculator=p},98237:(w,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var s=function(){function d(l){this.scale=l,this.AB=0,this.AD=0,this.A2=0}return d.prototype.addVariable=function(l){var h=this.scale/l.scale,u=l.weight;this.AB+=u*h*(l.offset/l.scale),this.AD+=u*h*l.desiredPosition,this.A2+=u*h*h},d.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},d}();E.PositionStats=s;var c=function(){function d(l,h,f,u){void 0===u&&(u=!1),this.left=l,this.right=h,this.gap=f,this.equality=u,this.active=!1,this.unsatisfiable=!1,this.left=l,this.right=h,this.gap=f,this.equality=u}return d.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},d}();E.Constraint=c;var x=function(){function d(l,h,f){void 0===h&&(h=1),void 0===f&&(f=1),this.desiredPosition=l,this.weight=h,this.scale=f,this.offset=0}return d.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},d.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},d.prototype.visitNeighbours=function(l,h){var f=function(u,m){return u.active&&l!==m&&h(u,m)};this.cOut.forEach(function(u){return f(u,u.right)}),this.cIn.forEach(function(u){return f(u,u.left)})},d}();E.Variable=x;var _=function(){function d(l){this.vars=[],l.offset=0,this.ps=new s(l.scale),this.addVariable(l)}return d.prototype.addVariable=function(l){l.block=this,this.vars.push(l),this.ps.addVariable(l),this.posn=this.ps.getPosn()},d.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var l=0,h=this.vars.length;l<h;++l)this.ps.addVariable(this.vars[l]);this.posn=this.ps.getPosn()},d.prototype.compute_lm=function(l,h,f){var u=this,m=l.dfdv();return l.visitNeighbours(h,function(T,L){var I=u.compute_lm(L,l,f);L===T.right?(m+=I*T.left.scale,T.lm=I):(m+=I*T.right.scale,T.lm=-I),f(T)}),m/l.scale},d.prototype.populateSplitBlock=function(l,h){var f=this;l.visitNeighbours(h,function(u,m){m.offset=l.offset+(m===u.right?u.gap:-u.gap),f.addVariable(m),f.populateSplitBlock(m,l)})},d.prototype.traverse=function(l,h,f,u){var m=this;void 0===f&&(f=this.vars[0]),void 0===u&&(u=null),f.visitNeighbours(u,function(T,L){h.push(l(T)),m.traverse(l,h,L,f)})},d.prototype.findMinLM=function(){var l=null;return this.compute_lm(this.vars[0],null,function(h){!h.equality&&(null===l||h.lm<l.lm)&&(l=h)}),l},d.prototype.findMinLMBetween=function(l,h){this.compute_lm(l,null,function(){});var f=null;return this.findPath(l,null,h,function(u,m){!u.equality&&u.right===m&&(null===f||u.lm<f.lm)&&(f=u)}),f},d.prototype.findPath=function(l,h,f,u){var m=this,T=!1;return l.visitNeighbours(h,function(L,I){!T&&(I===f||m.findPath(I,l,f,u))&&(T=!0,u(L,I))}),T},d.prototype.isActiveDirectedPathBetween=function(l,h){if(l===h)return!0;for(var f=l.cOut.length;f--;){var u=l.cOut[f];if(u.active&&this.isActiveDirectedPathBetween(u.right,h))return!0}return!1},d.split=function(l){return l.active=!1,[d.createSplitBlock(l.left),d.createSplitBlock(l.right)]},d.createSplitBlock=function(l){var h=new d(l);return h.populateSplitBlock(l,null),h},d.prototype.splitBetween=function(l,h){var f=this.findMinLMBetween(l,h);if(null!==f){var u=d.split(f);return{constraint:f,lb:u[0],rb:u[1]}}return null},d.prototype.mergeAcross=function(l,h,f){h.active=!0;for(var u=0,m=l.vars.length;u<m;++u){var T=l.vars[u];T.offset+=f,this.addVariable(T)}this.posn=this.ps.getPosn()},d.prototype.cost=function(){for(var l=0,h=this.vars.length;h--;){var f=this.vars[h],u=f.position()-f.desiredPosition;l+=u*u*f.weight}return l},d}();E.Block=_;var g=function(){function d(l){this.vs=l;var h=l.length;for(this.list=new Array(h);h--;){var f=new _(l[h]);this.list[h]=f,f.blockInd=h}}return d.prototype.cost=function(){for(var l=0,h=this.list.length;h--;)l+=this.list[h].cost();return l},d.prototype.insert=function(l){l.blockInd=this.list.length,this.list.push(l)},d.prototype.remove=function(l){var h=this.list.length-1,f=this.list[h];this.list.length=h,l!==f&&(this.list[l.blockInd]=f,f.blockInd=l.blockInd)},d.prototype.merge=function(l){var h=l.left.block,f=l.right.block,u=l.right.offset-l.left.offset-l.gap;h.vars.length<f.vars.length?(f.mergeAcross(h,l,u),this.remove(h)):(h.mergeAcross(f,l,-u),this.remove(f))},d.prototype.forEach=function(l){this.list.forEach(l)},d.prototype.updateBlockPositions=function(){this.list.forEach(function(l){return l.updateWeightedPosition()})},d.prototype.split=function(l){var h=this;this.updateBlockPositions(),this.list.forEach(function(f){var u=f.findMinLM();null!==u&&u.lm<p.LAGRANGIAN_TOLERANCE&&(f=u.left.block,_.split(u).forEach(function(m){return h.insert(m)}),h.remove(f),l.push(u))})},d}();E.Blocks=g;var p=function(){function d(l,h){this.vs=l,this.cs=h,this.vs=l,l.forEach(function(f){f.cIn=[],f.cOut=[]}),this.cs=h,h.forEach(function(f){f.left.cOut.push(f),f.right.cIn.push(f)}),this.inactive=h.map(function(f){return f.active=!1,f}),this.bs=null}return d.prototype.cost=function(){return this.bs.cost()},d.prototype.setStartingPositions=function(l){this.inactive=this.cs.map(function(h){return h.active=!1,h}),this.bs=new g(this.vs),this.bs.forEach(function(h,f){return h.posn=l[f]})},d.prototype.setDesiredPositions=function(l){this.vs.forEach(function(h,f){return h.desiredPosition=l[f]})},d.prototype.mostViolated=function(){for(var l=Number.MAX_VALUE,h=null,f=this.inactive,u=f.length,m=u,T=0;T<u;++T){var L=f[T];if(!L.unsatisfiable){var I=L.slack();if((L.equality||I<l)&&(l=I,h=L,m=T,L.equality))break}}return m!==u&&(l<d.ZERO_UPPERBOUND&&!h.active||h.equality)&&(f[m]=f[u-1],f.length=u-1),h},d.prototype.satisfy=function(){null==this.bs&&(this.bs=new g(this.vs)),this.bs.split(this.inactive);for(var l=null;(l=this.mostViolated())&&(l.equality||l.slack()<d.ZERO_UPPERBOUND&&!l.active);){var h=l.left.block;if(h!==l.right.block)this.bs.merge(l);else{if(h.isActiveDirectedPathBetween(l.right,l.left)){l.unsatisfiable=!0;continue}var u=h.splitBetween(l.left,l.right);if(null===u){l.unsatisfiable=!0;continue}this.bs.insert(u.lb),this.bs.insert(u.rb),this.bs.remove(h),this.inactive.push(u.constraint),l.slack()>=0?this.inactive.push(l):this.bs.merge(l)}}},d.prototype.solve=function(){this.satisfy();for(var l=Number.MAX_VALUE,h=this.bs.cost();Math.abs(l-h)>1e-4;)this.satisfy(),l=h,h=this.bs.cost();return h},d.LAGRANGIAN_TOLERANCE=-1e-4,d.ZERO_UPPERBOUND=-1e-10,d}();E.Solver=p,E.removeOverlapInOneDimension=function t(d,l,h){for(var f=d.map(function(q){return new x(q.desiredCenter)}),u=[],m=d.length,T=0;T<m-1;T++)u.push(new c(f[T],f[T+1],(d[T].size+d[T+1].size)/2));var R=f[0],M=f[m-1],F=d[0].size/2,Z=d[m-1].size/2,Y=null,U=null;return l&&(Y=new x(l,1e3*R.weight),f.push(Y),u.push(new c(Y,R,F))),h&&(U=new x(h,1e3*M.weight),f.push(U),u.push(new c(M,U,Z))),new p(f,u).solve(),{newCenters:f.slice(0,d.length).map(function(q){return q.position()}),lowerBound:Y?Y.position():R.position()-F,upperBound:U?U.position():M.position()+Z}}}}]);