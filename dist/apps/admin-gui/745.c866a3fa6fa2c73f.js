(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[745],{89397:function(w,D){!function(s){"use strict";function c(X,W){return W.forEach(function(q){q&&"string"!=typeof q&&!Array.isArray(q)&&Object.keys(q).forEach(function(Y){if("default"!==Y&&!(Y in X)){var R=Object.getOwnPropertyDescriptor(q,Y);Object.defineProperty(X,Y,R.get?R:{enumerable:!0,get:function(){return q[Y]}})}})}),Object.freeze(X)}var Y,q,x={exports:{}};Y=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,q=function(R){var pt,St,E=typeof(R=R||{})<"u"?R:{};E.ready=new Promise(function(b,k){pt=b,St=k});var Et,Mt={};for(Et in E)E.hasOwnProperty(Et)&&(Mt[Et]=E[Et]);var Nt,_t,Jt="./this.program",wt="";typeof document<"u"&&document.currentScript&&(wt=document.currentScript.src),Y&&(wt=Y),wt=0!==wt.indexOf("blob:")?wt.substr(0,wt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Nt=function(b){var k=new XMLHttpRequest;return k.open("GET",b,!1),k.send(null),k.responseText},_t=function(b,k,V){var rt=new XMLHttpRequest;rt.open("GET",b,!0),rt.responseType="arraybuffer",rt.onload=function(){200==rt.status||0==rt.status&&rt.response?k(rt.response):V()},rt.onerror=V,rt.send(null)};var he,Ft=E.print||console.log.bind(console),Ht=E.printErr||console.warn.bind(console);for(Et in Mt)Mt.hasOwnProperty(Et)&&(E[Et]=Mt[Et]);Mt=null,E.thisProgram&&(Jt=E.thisProgram),E.wasmBinary&&(he=E.wasmBinary),"object"!=typeof WebAssembly&&vi("no native wasm support detected");var ke,Ie=!1;function Lt(b,k){b||vi("Assertion failed: "+k)}var Ue,Ve,rn,xe,un,jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Vt(b,k,V){for(var rt=k+V,ut=k;b[ut]&&!(ut>=rt);)++ut;if(ut-k>16&&b.subarray&&jt)return jt.decode(b.subarray(k,ut));for(var xt="";k<ut;){var Ot=b[k++];if(128&Ot){var Zt=63&b[k++];if(192!=(224&Ot)){var ae=63&b[k++];if((Ot=224==(240&Ot)?(15&Ot)<<12|Zt<<6|ae:(7&Ot)<<18|Zt<<12|ae<<6|63&b[k++])<65536)xt+=String.fromCharCode(Ot);else{var De=Ot-65536;xt+=String.fromCharCode(55296|De>>10,56320|1023&De)}}else xt+=String.fromCharCode((31&Ot)<<6|Zt)}else xt+=String.fromCharCode(Ot)}return xt}function qt(b,k){return b?Vt(rn,b,k):""}function _e(b,k,V,rt){if(!(rt>0))return 0;for(var ut=V,xt=V+rt-1,Ot=0;Ot<b.length;++Ot){var Zt=b.charCodeAt(Ot);if(Zt>=55296&&Zt<=57343&&(Zt=65536+((1023&Zt)<<10)|1023&b.charCodeAt(++Ot)),Zt<=127){if(V>=xt)break;k[V++]=Zt}else if(Zt<=2047){if(V+1>=xt)break;k[V++]=192|Zt>>6,k[V++]=128|63&Zt}else if(Zt<=65535){if(V+2>=xt)break;k[V++]=224|Zt>>12,k[V++]=128|Zt>>6&63,k[V++]=128|63&Zt}else{if(V+3>=xt)break;k[V++]=240|Zt>>18,k[V++]=128|Zt>>12&63,k[V++]=128|Zt>>6&63,k[V++]=128|63&Zt}}return k[V]=0,V-ut}function Ee(b){for(var k=0,V=0;V<b.length;++V){var rt=b.charCodeAt(V);rt>=55296&&rt<=57343&&(rt=65536+((1023&rt)<<10)|1023&b.charCodeAt(++V)),rt<=127?++k:k+=rt<=2047?2:rt<=65535?3:4}return k}function Ae(b,k){return b%k>0&&(b+=k-b%k),b}function Tt(b){Ue=b,E.HEAP8=Ve=new Int8Array(b),E.HEAP16=new Int16Array(b),E.HEAP32=xe=new Int32Array(b),E.HEAPU8=rn=new Uint8Array(b),E.HEAPU16=new Uint16Array(b),E.HEAPU32=new Uint32Array(b),E.HEAPF32=new Float32Array(b),E.HEAPF64=un=new Float64Array(b)}var Wt,le=[],me=[],ee=[];var _i=0,Si=null;function Pi(b){_i++,E.monitorRunDependencies&&E.monitorRunDependencies(_i)}function Mi(b){if(_i--,E.monitorRunDependencies&&E.monitorRunDependencies(_i),0==_i&&Si){var k=Si;Si=null,k()}}function vi(b){E.onAbort&&E.onAbort(b),Ht(b="Aborted("+b+")"),Ie=!0,b+=". Build with -s ASSERTIONS=1 for more info.";var k=new WebAssembly.RuntimeError(b);throw St(k),k}E.preloadedImages={},E.preloadedAudios={};var de;function Fi(b){return b.startsWith("data:application/octet-stream;base64,")}function En(b){try{if(b==de&&he)return new Uint8Array(he);throw"both async and sync fetching of the wasm failed"}catch(k){vi(k)}}Fi(de="expatlib.wasm")||(de=function yt(b){return E.locateFile?E.locateFile(b,wt):wt+b}(de));var _n,an,Hn={11694:function(b){var k=E.getCache(E.CExpatJS)[b];if(!k.hasOwnProperty("startElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::startElement.";k.startElement()},11912:function(b){var k=E.getCache(E.CExpatJS)[b];if(!k.hasOwnProperty("endElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::endElement.";k.endElement()},12124:function(b){var k=E.getCache(E.CExpatJS)[b];if(!k.hasOwnProperty("characterData"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::characterData.";k.characterData()}};function oi(b){for(;b.length>0;){var k=b.shift();if("function"!=typeof k){var V=k.func;"number"==typeof V?void 0===k.arg?kn(V)():kn(V)(k.arg):V(void 0===k.arg?null:k.arg)}else k(E)}}function kn(b){return Wt.get(b)}var Te={splitPath:function(b){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(b).slice(1)},normalizeArray:function(b,k){for(var V=0,rt=b.length-1;rt>=0;rt--){var ut=b[rt];"."===ut?b.splice(rt,1):".."===ut?(b.splice(rt,1),V++):V&&(b.splice(rt,1),V--)}if(k)for(;V;V--)b.unshift("..");return b},normalize:function(b){var k="/"===b.charAt(0),V="/"===b.substr(-1);return!(b=Te.normalizeArray(b.split("/").filter(function(rt){return!!rt}),!k).join("/"))&&!k&&(b="."),b&&V&&(b+="/"),(k?"/":"")+b},dirname:function(b){var k=Te.splitPath(b),V=k[0],rt=k[1];return V||rt?(rt&&(rt=rt.substr(0,rt.length-1)),V+rt):"."},basename:function(b){if("/"===b)return"/";var k=(b=(b=Te.normalize(b)).replace(/\/$/,"")).lastIndexOf("/");return-1===k?b:b.substr(k+1)},extname:function(b){return Te.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return Te.normalize(b.join("/"))},join2:function(b,k){return Te.normalize(b+"/"+k)}};var Pn={resolve:function(){for(var b="",k=!1,V=arguments.length-1;V>=-1&&!k;V--){var rt=V>=0?arguments[V]:A.cwd();if("string"!=typeof rt)throw new TypeError("Arguments to path.resolve must be strings");if(!rt)return"";b=rt+"/"+b,k="/"===rt.charAt(0)}return(k?"/":"")+(b=Te.normalizeArray(b.split("/").filter(function(ut){return!!ut}),!k).join("/"))||"."},relative:function(b,k){function V(De){for(var Qe=0;Qe<De.length&&""===De[Qe];Qe++);for(var sn=De.length-1;sn>=0&&""===De[sn];sn--);return Qe>sn?[]:De.slice(Qe,sn-Qe+1)}b=Pn.resolve(b).substr(1),k=Pn.resolve(k).substr(1);for(var rt=V(b.split("/")),ut=V(k.split("/")),xt=Math.min(rt.length,ut.length),Ot=xt,Zt=0;Zt<xt;Zt++)if(rt[Zt]!==ut[Zt]){Ot=Zt;break}var ae=[];for(Zt=Ot;Zt<rt.length;Zt++)ae.push("..");return(ae=ae.concat(ut.slice(Ot))).join("/")}},pn={ttys:[],init:function(){},shutdown:function(){},register:function(b,k){pn.ttys[b]={input:[],output:[],ops:k},A.registerDevice(b,pn.stream_ops)},stream_ops:{open:function(b){var k=pn.ttys[b.node.rdev];if(!k)throw new A.ErrnoError(43);b.tty=k,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,k,V,rt,ut){if(!b.tty||!b.tty.ops.get_char)throw new A.ErrnoError(60);for(var xt=0,Ot=0;Ot<rt;Ot++){var Zt;try{Zt=b.tty.ops.get_char(b.tty)}catch{throw new A.ErrnoError(29)}if(void 0===Zt&&0===xt)throw new A.ErrnoError(6);if(null==Zt)break;xt++,k[V+Ot]=Zt}return xt&&(b.node.timestamp=Date.now()),xt},write:function(b,k,V,rt,ut){if(!b.tty||!b.tty.ops.put_char)throw new A.ErrnoError(60);try{for(var xt=0;xt<rt;xt++)b.tty.ops.put_char(b.tty,k[V+xt])}catch{throw new A.ErrnoError(29)}return rt&&(b.node.timestamp=Date.now()),xt}},default_tty_ops:{get_char:function(b){if(!b.input.length){var k=null;if(typeof window<"u"&&"function"==typeof window.prompt?null!==(k=window.prompt("Input: "))&&(k+="\n"):"function"==typeof readline&&null!==(k=readline())&&(k+="\n"),!k)return null;b.input=pe(k,!0)}return b.input.shift()},put_char:function(b,k){null===k||10===k?(Ft(Vt(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(Ft(Vt(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,k){null===k||10===k?(Ht(Vt(b.output,0)),b.output=[]):0!=k&&b.output.push(k)},flush:function(b){b.output&&b.output.length>0&&(Ht(Vt(b.output,0)),b.output=[])}}};var Q={ops_table:null,mount:function(b){return Q.createNode(null,"/",16895,0)},createNode:function(b,k,V,rt){if(A.isBlkdev(V)||A.isFIFO(V))throw new A.ErrnoError(63);Q.ops_table||(Q.ops_table={dir:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,lookup:Q.node_ops.lookup,mknod:Q.node_ops.mknod,rename:Q.node_ops.rename,unlink:Q.node_ops.unlink,rmdir:Q.node_ops.rmdir,readdir:Q.node_ops.readdir,symlink:Q.node_ops.symlink},stream:{llseek:Q.stream_ops.llseek}},file:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:{llseek:Q.stream_ops.llseek,read:Q.stream_ops.read,write:Q.stream_ops.write,allocate:Q.stream_ops.allocate,mmap:Q.stream_ops.mmap,msync:Q.stream_ops.msync}},link:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,readlink:Q.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:A.chrdev_stream_ops}});var ut=A.createNode(b,k,V,rt);return A.isDir(ut.mode)?(ut.node_ops=Q.ops_table.dir.node,ut.stream_ops=Q.ops_table.dir.stream,ut.contents={}):A.isFile(ut.mode)?(ut.node_ops=Q.ops_table.file.node,ut.stream_ops=Q.ops_table.file.stream,ut.usedBytes=0,ut.contents=null):A.isLink(ut.mode)?(ut.node_ops=Q.ops_table.link.node,ut.stream_ops=Q.ops_table.link.stream):A.isChrdev(ut.mode)&&(ut.node_ops=Q.ops_table.chrdev.node,ut.stream_ops=Q.ops_table.chrdev.stream),ut.timestamp=Date.now(),b&&(b.contents[k]=ut,b.timestamp=ut.timestamp),ut},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage:function(b,k){var V=b.contents?b.contents.length:0;if(!(V>=k)){k=Math.max(k,V*(V<1048576?2:1.125)>>>0),0!=V&&(k=Math.max(k,256));var ut=b.contents;b.contents=new Uint8Array(k),b.usedBytes>0&&b.contents.set(ut.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,k){if(b.usedBytes!=k)if(0==k)b.contents=null,b.usedBytes=0;else{var V=b.contents;b.contents=new Uint8Array(k),V&&b.contents.set(V.subarray(0,Math.min(k,b.usedBytes))),b.usedBytes=k}},node_ops:{getattr:function(b){var k={};return k.dev=A.isChrdev(b.mode)?b.id:1,k.ino=b.id,k.mode=b.mode,k.nlink=1,k.uid=0,k.gid=0,k.rdev=b.rdev,k.size=A.isDir(b.mode)?4096:A.isFile(b.mode)?b.usedBytes:A.isLink(b.mode)?b.link.length:0,k.atime=new Date(b.timestamp),k.mtime=new Date(b.timestamp),k.ctime=new Date(b.timestamp),k.blksize=4096,k.blocks=Math.ceil(k.size/k.blksize),k},setattr:function(b,k){void 0!==k.mode&&(b.mode=k.mode),void 0!==k.timestamp&&(b.timestamp=k.timestamp),void 0!==k.size&&Q.resizeFileStorage(b,k.size)},lookup:function(b,k){throw A.genericErrors[44]},mknod:function(b,k,V,rt){return Q.createNode(b,k,V,rt)},rename:function(b,k,V){if(A.isDir(b.mode)){var rt;try{rt=A.lookupNode(k,V)}catch{}if(rt)for(var ut in rt.contents)throw new A.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=V,k.contents[V]=b,k.timestamp=b.parent.timestamp,b.parent=k},unlink:function(b,k){delete b.contents[k],b.timestamp=Date.now()},rmdir:function(b,k){var V=A.lookupNode(b,k);for(var rt in V.contents)throw new A.ErrnoError(55);delete b.contents[k],b.timestamp=Date.now()},readdir:function(b){var k=[".",".."];for(var V in b.contents)!b.contents.hasOwnProperty(V)||k.push(V);return k},symlink:function(b,k,V){var rt=Q.createNode(b,k,41471,0);return rt.link=V,rt},readlink:function(b){if(!A.isLink(b.mode))throw new A.ErrnoError(28);return b.link}},stream_ops:{read:function(b,k,V,rt,ut){var xt=b.node.contents;if(ut>=b.node.usedBytes)return 0;var Ot=Math.min(b.node.usedBytes-ut,rt);if(Ot>8&&xt.subarray)k.set(xt.subarray(ut,ut+Ot),V);else for(var Zt=0;Zt<Ot;Zt++)k[V+Zt]=xt[ut+Zt];return Ot},write:function(b,k,V,rt,ut,xt){if(k.buffer===Ve.buffer&&(xt=!1),!rt)return 0;var Ot=b.node;if(Ot.timestamp=Date.now(),k.subarray&&(!Ot.contents||Ot.contents.subarray)){if(xt)return Ot.contents=k.subarray(V,V+rt),Ot.usedBytes=rt,rt;if(0===Ot.usedBytes&&0===ut)return Ot.contents=k.slice(V,V+rt),Ot.usedBytes=rt,rt;if(ut+rt<=Ot.usedBytes)return Ot.contents.set(k.subarray(V,V+rt),ut),rt}if(Q.expandFileStorage(Ot,ut+rt),Ot.contents.subarray&&k.subarray)Ot.contents.set(k.subarray(V,V+rt),ut);else for(var Zt=0;Zt<rt;Zt++)Ot.contents[ut+Zt]=k[V+Zt];return Ot.usedBytes=Math.max(Ot.usedBytes,ut+rt),rt},llseek:function(b,k,V){var rt=k;if(1===V?rt+=b.position:2===V&&A.isFile(b.node.mode)&&(rt+=b.node.usedBytes),rt<0)throw new A.ErrnoError(28);return rt},allocate:function(b,k,V){Q.expandFileStorage(b.node,k+V),b.node.usedBytes=Math.max(b.node.usedBytes,k+V)},mmap:function(b,k,V,rt,ut,xt){if(0!==k)throw new A.ErrnoError(28);if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);var Ot,Zt,ae=b.node.contents;if(2&xt||ae.buffer!==Ue){if((rt>0||rt+V<ae.length)&&(ae=ae.subarray?ae.subarray(rt,rt+V):Array.prototype.slice.call(ae,rt,rt+V)),Zt=!0,!(Ot=function z(b){vi()}()))throw new A.ErrnoError(48);Ve.set(ae,Ot)}else Zt=!1,Ot=ae.byteOffset;return{ptr:Ot,allocated:Zt}},msync:function(b,k,V,rt,ut){if(!A.isFile(b.node.mode))throw new A.ErrnoError(43);return 2&ut||Q.stream_ops.write(b,k,0,rt,V,!1),0}}};var A={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(b,k){if(k=k||{},!(b=Pn.resolve(A.cwd(),b)))return{path:"",node:null};var V={follow_mount:!0,recurse_count:0};for(var rt in V)void 0===k[rt]&&(k[rt]=V[rt]);if(k.recurse_count>8)throw new A.ErrnoError(32);for(var ut=Te.normalizeArray(b.split("/").filter(function(we){return!!we}),!1),xt=A.root,Ot="/",Zt=0;Zt<ut.length;Zt++){var ae=Zt===ut.length-1;if(ae&&k.parent)break;if(xt=A.lookupNode(xt,ut[Zt]),Ot=Te.join2(Ot,ut[Zt]),A.isMountpoint(xt)&&(!ae||ae&&k.follow_mount)&&(xt=xt.mounted.root),!ae||k.follow)for(var De=0;A.isLink(xt.mode);){var Qe=A.readlink(Ot);if(Ot=Pn.resolve(Te.dirname(Ot),Qe),xt=A.lookupPath(Ot,{recurse_count:k.recurse_count}).node,De++>40)throw new A.ErrnoError(32)}}return{path:Ot,node:xt}},getPath:function(b){for(var k;;){if(A.isRoot(b)){var V=b.mount.mountpoint;return k?"/"!==V[V.length-1]?V+"/"+k:V+k:V}k=k?b.name+"/"+k:b.name,b=b.parent}},hashName:function(b,k){for(var V=0,rt=0;rt<k.length;rt++)V=(V<<5)-V+k.charCodeAt(rt)|0;return(b+V>>>0)%A.nameTable.length},hashAddNode:function(b){var k=A.hashName(b.parent.id,b.name);b.name_next=A.nameTable[k],A.nameTable[k]=b},hashRemoveNode:function(b){var k=A.hashName(b.parent.id,b.name);if(A.nameTable[k]===b)A.nameTable[k]=b.name_next;else for(var V=A.nameTable[k];V;){if(V.name_next===b){V.name_next=b.name_next;break}V=V.name_next}},lookupNode:function(b,k){var V=A.mayLookup(b);if(V)throw new A.ErrnoError(V,b);for(var rt=A.hashName(b.id,k),ut=A.nameTable[rt];ut;ut=ut.name_next)if(ut.parent.id===b.id&&ut.name===k)return ut;return A.lookup(b,k)},createNode:function(b,k,V,rt){var ut=new A.FSNode(b,k,V,rt);return A.hashAddNode(ut),ut},destroyNode:function(b){A.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return 32768==(61440&b)},isDir:function(b){return 16384==(61440&b)},isLink:function(b){return 40960==(61440&b)},isChrdev:function(b){return 8192==(61440&b)},isBlkdev:function(b){return 24576==(61440&b)},isFIFO:function(b){return 4096==(61440&b)},isSocket:function(b){return 49152==(49152&b)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(b){var k=A.flagModes[b];if(typeof k>"u")throw new Error("Unknown file open mode: "+b);return k},flagsToPermissionString:function(b){var k=["r","w","rw"][3&b];return 512&b&&(k+="w"),k},nodePermissions:function(b,k){return A.ignorePermissions?0:k.includes("r")&&!(292&b.mode)||k.includes("w")&&!(146&b.mode)||k.includes("x")&&!(73&b.mode)?2:0},mayLookup:function(b){return A.nodePermissions(b,"x")||(b.node_ops.lookup?0:2)},mayCreate:function(b,k){try{return A.lookupNode(b,k),20}catch{}return A.nodePermissions(b,"wx")},mayDelete:function(b,k,V){var rt;try{rt=A.lookupNode(b,k)}catch(xt){return xt.errno}var ut=A.nodePermissions(b,"wx");if(ut)return ut;if(V){if(!A.isDir(rt.mode))return 54;if(A.isRoot(rt)||A.getPath(rt)===A.cwd())return 10}else if(A.isDir(rt.mode))return 31;return 0},mayOpen:function(b,k){return b?A.isLink(b.mode)?32:A.isDir(b.mode)&&("r"!==A.flagsToPermissionString(k)||512&k)?31:A.nodePermissions(b,A.flagsToPermissionString(k)):44},MAX_OPEN_FDS:4096,nextfd:function(b,k){k=k||A.MAX_OPEN_FDS;for(var V=b=b||0;V<=k;V++)if(!A.streams[V])return V;throw new A.ErrnoError(33)},getStream:function(b){return A.streams[b]},createStream:function(b,k,V){A.FSStream||(A.FSStream=function(){},A.FSStream.prototype={object:{get:function(){return this.node},set:function(Ot){this.node=Ot}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var rt=new A.FSStream;for(var ut in b)rt[ut]=b[ut];b=rt;var xt=A.nextfd(k,V);return b.fd=xt,A.streams[xt]=b,b},closeStream:function(b){A.streams[b]=null},chrdev_stream_ops:{open:function(b){var k=A.getDevice(b.node.rdev);b.stream_ops=k.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new A.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return 255&b},makedev:function(b,k){return b<<8|k},registerDevice:function(b,k){A.devices[b]={stream_ops:k}},getDevice:function(b){return A.devices[b]},getMounts:function(b){for(var k=[],V=[b];V.length;){var rt=V.pop();k.push(rt),V.push.apply(V,rt.mounts)}return k},syncfs:function(b,k){"function"==typeof b&&(k=b,b=!1),A.syncFSRequests++,A.syncFSRequests>1&&Ht("warning: "+A.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var V=A.getMounts(A.root.mount),rt=0;function ut(Ot){return A.syncFSRequests--,k(Ot)}function xt(Ot){if(Ot)return xt.errored?void 0:(xt.errored=!0,ut(Ot));++rt>=V.length&&ut(null)}V.forEach(function(Ot){if(!Ot.type.syncfs)return xt(null);Ot.type.syncfs(Ot,b,xt)})},mount:function(b,k,V){var xt,rt="/"===V,ut=!V;if(rt&&A.root)throw new A.ErrnoError(10);if(!rt&&!ut){var Ot=A.lookupPath(V,{follow_mount:!1});if(V=Ot.path,A.isMountpoint(xt=Ot.node))throw new A.ErrnoError(10);if(!A.isDir(xt.mode))throw new A.ErrnoError(54)}var Zt={type:b,opts:k,mountpoint:V,mounts:[]},ae=b.mount(Zt);return ae.mount=Zt,Zt.root=ae,rt?A.root=ae:xt&&(xt.mounted=Zt,xt.mount&&xt.mount.mounts.push(Zt)),ae},unmount:function(b){var k=A.lookupPath(b,{follow_mount:!1});if(!A.isMountpoint(k.node))throw new A.ErrnoError(28);var V=k.node,rt=V.mounted,ut=A.getMounts(rt);Object.keys(A.nameTable).forEach(function(Ot){for(var Zt=A.nameTable[Ot];Zt;){var ae=Zt.name_next;ut.includes(Zt.mount)&&A.destroyNode(Zt),Zt=ae}}),V.mounted=null;var xt=V.mount.mounts.indexOf(rt);V.mount.mounts.splice(xt,1)},lookup:function(b,k){return b.node_ops.lookup(b,k)},mknod:function(b,k,V){var ut=A.lookupPath(b,{parent:!0}).node,xt=Te.basename(b);if(!xt||"."===xt||".."===xt)throw new A.ErrnoError(28);var Ot=A.mayCreate(ut,xt);if(Ot)throw new A.ErrnoError(Ot);if(!ut.node_ops.mknod)throw new A.ErrnoError(63);return ut.node_ops.mknod(ut,xt,k,V)},create:function(b,k){return k=void 0!==k?k:438,k&=4095,A.mknod(b,k|=32768,0)},mkdir:function(b,k){return k=void 0!==k?k:511,k&=1023,A.mknod(b,k|=16384,0)},mkdirTree:function(b,k){for(var V=b.split("/"),rt="",ut=0;ut<V.length;++ut)if(V[ut]){rt+="/"+V[ut];try{A.mkdir(rt,k)}catch(xt){if(20!=xt.errno)throw xt}}},mkdev:function(b,k,V){return typeof V>"u"&&(V=k,k=438),A.mknod(b,k|=8192,V)},symlink:function(b,k){if(!Pn.resolve(b))throw new A.ErrnoError(44);var rt=A.lookupPath(k,{parent:!0}).node;if(!rt)throw new A.ErrnoError(44);var ut=Te.basename(k),xt=A.mayCreate(rt,ut);if(xt)throw new A.ErrnoError(xt);if(!rt.node_ops.symlink)throw new A.ErrnoError(63);return rt.node_ops.symlink(rt,ut,b)},rename:function(b,k){var Zt,ae,V=Te.dirname(b),rt=Te.dirname(k),ut=Te.basename(b),xt=Te.basename(k);if(Zt=A.lookupPath(b,{parent:!0}).node,ae=A.lookupPath(k,{parent:!0}).node,!Zt||!ae)throw new A.ErrnoError(44);if(Zt.mount!==ae.mount)throw new A.ErrnoError(75);var sn,De=A.lookupNode(Zt,ut),Qe=Pn.relative(b,rt);if("."!==Qe.charAt(0))throw new A.ErrnoError(28);if("."!==(Qe=Pn.relative(k,V)).charAt(0))throw new A.ErrnoError(55);try{sn=A.lookupNode(ae,xt)}catch{}if(De!==sn){var we=A.isDir(De.mode),Pe=A.mayDelete(Zt,ut,we);if(Pe)throw new A.ErrnoError(Pe);if(Pe=sn?A.mayDelete(ae,xt,we):A.mayCreate(ae,xt))throw new A.ErrnoError(Pe);if(!Zt.node_ops.rename)throw new A.ErrnoError(63);if(A.isMountpoint(De)||sn&&A.isMountpoint(sn))throw new A.ErrnoError(10);if(ae!==Zt&&(Pe=A.nodePermissions(Zt,"w")))throw new A.ErrnoError(Pe);A.hashRemoveNode(De);try{Zt.node_ops.rename(De,ae,xt)}catch(gn){throw gn}finally{A.hashAddNode(De)}}},rmdir:function(b){var V=A.lookupPath(b,{parent:!0}).node,rt=Te.basename(b),ut=A.lookupNode(V,rt),xt=A.mayDelete(V,rt,!0);if(xt)throw new A.ErrnoError(xt);if(!V.node_ops.rmdir)throw new A.ErrnoError(63);if(A.isMountpoint(ut))throw new A.ErrnoError(10);V.node_ops.rmdir(V,rt),A.destroyNode(ut)},readdir:function(b){var V=A.lookupPath(b,{follow:!0}).node;if(!V.node_ops.readdir)throw new A.ErrnoError(54);return V.node_ops.readdir(V)},unlink:function(b){var V=A.lookupPath(b,{parent:!0}).node,rt=Te.basename(b),ut=A.lookupNode(V,rt),xt=A.mayDelete(V,rt,!1);if(xt)throw new A.ErrnoError(xt);if(!V.node_ops.unlink)throw new A.ErrnoError(63);if(A.isMountpoint(ut))throw new A.ErrnoError(10);V.node_ops.unlink(V,rt),A.destroyNode(ut)},readlink:function(b){var V=A.lookupPath(b).node;if(!V)throw new A.ErrnoError(44);if(!V.node_ops.readlink)throw new A.ErrnoError(28);return Pn.resolve(A.getPath(V.parent),V.node_ops.readlink(V))},stat:function(b,k){var rt=A.lookupPath(b,{follow:!k}).node;if(!rt)throw new A.ErrnoError(44);if(!rt.node_ops.getattr)throw new A.ErrnoError(63);return rt.node_ops.getattr(rt)},lstat:function(b){return A.stat(b,!0)},chmod:function(b,k,V){var rt;if(!(rt="string"==typeof b?A.lookupPath(b,{follow:!V}).node:b).node_ops.setattr)throw new A.ErrnoError(63);rt.node_ops.setattr(rt,{mode:4095&k|-4096&rt.mode,timestamp:Date.now()})},lchmod:function(b,k){A.chmod(b,k,!0)},fchmod:function(b,k){var V=A.getStream(b);if(!V)throw new A.ErrnoError(8);A.chmod(V.node,k)},chown:function(b,k,V,rt){var ut;if(!(ut="string"==typeof b?A.lookupPath(b,{follow:!rt}).node:b).node_ops.setattr)throw new A.ErrnoError(63);ut.node_ops.setattr(ut,{timestamp:Date.now()})},lchown:function(b,k,V){A.chown(b,k,V,!0)},fchown:function(b,k,V){var rt=A.getStream(b);if(!rt)throw new A.ErrnoError(8);A.chown(rt.node,k,V)},truncate:function(b,k){if(k<0)throw new A.ErrnoError(28);var V;if(!(V="string"==typeof b?A.lookupPath(b,{follow:!0}).node:b).node_ops.setattr)throw new A.ErrnoError(63);if(A.isDir(V.mode))throw new A.ErrnoError(31);if(!A.isFile(V.mode))throw new A.ErrnoError(28);var ut=A.nodePermissions(V,"w");if(ut)throw new A.ErrnoError(ut);V.node_ops.setattr(V,{size:k,timestamp:Date.now()})},ftruncate:function(b,k){var V=A.getStream(b);if(!V)throw new A.ErrnoError(8);if(0==(2097155&V.flags))throw new A.ErrnoError(28);A.truncate(V.node,k)},utime:function(b,k,V){var ut=A.lookupPath(b,{follow:!0}).node;ut.node_ops.setattr(ut,{timestamp:Math.max(k,V)})},open:function(b,k,V,rt,ut){if(""===b)throw new A.ErrnoError(44);var xt;if(V=typeof V>"u"?438:V,V=64&(k="string"==typeof k?A.modeStringToFlags(k):k)?4095&V|32768:0,"object"==typeof b)xt=b;else{b=Te.normalize(b);try{xt=A.lookupPath(b,{follow:!(131072&k)}).node}catch{}}var Zt=!1;if(64&k)if(xt){if(128&k)throw new A.ErrnoError(20)}else xt=A.mknod(b,V,0),Zt=!0;if(!xt)throw new A.ErrnoError(44);if(A.isChrdev(xt.mode)&&(k&=-513),65536&k&&!A.isDir(xt.mode))throw new A.ErrnoError(54);if(!Zt){var ae=A.mayOpen(xt,k);if(ae)throw new A.ErrnoError(ae)}512&k&&A.truncate(xt,0),k&=-131713;var De=A.createStream({node:xt,path:A.getPath(xt),id:xt.id,flags:k,mode:xt.mode,seekable:!0,position:0,stream_ops:xt.stream_ops,node_ops:xt.node_ops,ungotten:[],error:!1},rt,ut);return De.stream_ops.open&&De.stream_ops.open(De),E.logReadFiles&&!(1&k)&&(A.readFiles||(A.readFiles={}),b in A.readFiles||(A.readFiles[b]=1)),De},close:function(b){if(A.isClosed(b))throw new A.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(k){throw k}finally{A.closeStream(b.fd)}b.fd=null},isClosed:function(b){return null===b.fd},llseek:function(b,k,V){if(A.isClosed(b))throw new A.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new A.ErrnoError(70);if(0!=V&&1!=V&&2!=V)throw new A.ErrnoError(28);return b.position=b.stream_ops.llseek(b,k,V),b.ungotten=[],b.position},read:function(b,k,V,rt,ut){if(rt<0||ut<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(1==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.read)throw new A.ErrnoError(28);var xt=typeof ut<"u";if(xt){if(!b.seekable)throw new A.ErrnoError(70)}else ut=b.position;var Ot=b.stream_ops.read(b,k,V,rt,ut);return xt||(b.position+=Ot),Ot},write:function(b,k,V,rt,ut,xt){if(rt<0||ut<0)throw new A.ErrnoError(28);if(A.isClosed(b))throw new A.ErrnoError(8);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(A.isDir(b.node.mode))throw new A.ErrnoError(31);if(!b.stream_ops.write)throw new A.ErrnoError(28);b.seekable&&1024&b.flags&&A.llseek(b,0,2);var Ot=typeof ut<"u";if(Ot){if(!b.seekable)throw new A.ErrnoError(70)}else ut=b.position;var Zt=b.stream_ops.write(b,k,V,rt,ut,xt);return Ot||(b.position+=Zt),Zt},allocate:function(b,k,V){if(A.isClosed(b))throw new A.ErrnoError(8);if(k<0||V<=0)throw new A.ErrnoError(28);if(0==(2097155&b.flags))throw new A.ErrnoError(8);if(!A.isFile(b.node.mode)&&!A.isDir(b.node.mode))throw new A.ErrnoError(43);if(!b.stream_ops.allocate)throw new A.ErrnoError(138);b.stream_ops.allocate(b,k,V)},mmap:function(b,k,V,rt,ut,xt){if(0!=(2&ut)&&0==(2&xt)&&2!=(2097155&b.flags))throw new A.ErrnoError(2);if(1==(2097155&b.flags))throw new A.ErrnoError(2);if(!b.stream_ops.mmap)throw new A.ErrnoError(43);return b.stream_ops.mmap(b,k,V,rt,ut,xt)},msync:function(b,k,V,rt,ut){return b&&b.stream_ops.msync?b.stream_ops.msync(b,k,V,rt,ut):0},munmap:function(b){return 0},ioctl:function(b,k,V){if(!b.stream_ops.ioctl)throw new A.ErrnoError(59);return b.stream_ops.ioctl(b,k,V)},readFile:function(b,k){if((k=k||{}).flags=k.flags||0,k.encoding=k.encoding||"binary","utf8"!==k.encoding&&"binary"!==k.encoding)throw new Error('Invalid encoding type "'+k.encoding+'"');var V,rt=A.open(b,k.flags),xt=A.stat(b).size,Ot=new Uint8Array(xt);return A.read(rt,Ot,0,xt,0),"utf8"===k.encoding?V=Vt(Ot,0):"binary"===k.encoding&&(V=Ot),A.close(rt),V},writeFile:function(b,k,V){(V=V||{}).flags=V.flags||577;var rt=A.open(b,V.flags,V.mode);if("string"==typeof k){var ut=new Uint8Array(Ee(k)+1),xt=_e(k,ut,0,ut.length);A.write(rt,ut,0,xt,void 0,V.canOwn)}else{if(!ArrayBuffer.isView(k))throw new Error("Unsupported data type");A.write(rt,k,0,k.byteLength,void 0,V.canOwn)}A.close(rt)},cwd:function(){return A.currentPath},chdir:function(b){var k=A.lookupPath(b,{follow:!0});if(null===k.node)throw new A.ErrnoError(44);if(!A.isDir(k.node.mode))throw new A.ErrnoError(54);var V=A.nodePermissions(k.node,"x");if(V)throw new A.ErrnoError(V);A.currentPath=k.path},createDefaultDirectories:function(){A.mkdir("/tmp"),A.mkdir("/home"),A.mkdir("/home/web_user")},createDefaultDevices:function(){A.mkdir("/dev"),A.registerDevice(A.makedev(1,3),{read:function(){return 0},write:function(k,V,rt,ut,xt){return ut}}),A.mkdev("/dev/null",A.makedev(1,3)),pn.register(A.makedev(5,0),pn.default_tty_ops),pn.register(A.makedev(6,0),pn.default_tty1_ops),A.mkdev("/dev/tty",A.makedev(5,0)),A.mkdev("/dev/tty1",A.makedev(6,0));var b=function Ri(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var b=new Uint8Array(1);return function(){return crypto.getRandomValues(b),b[0]}}return function(){vi("randomDevice")}}();A.createDevice("/dev","random",b),A.createDevice("/dev","urandom",b),A.mkdir("/dev/shm"),A.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){A.mkdir("/proc");var b=A.mkdir("/proc/self");A.mkdir("/proc/self/fd"),A.mount({mount:function(){var k=A.createNode(b,"fd",16895,73);return k.node_ops={lookup:function(V,rt){var xt=A.getStream(+rt);if(!xt)throw new A.ErrnoError(8);var Ot={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return xt.path}}};return Ot.parent=Ot,Ot}},k}},{},"/proc/self/fd")},createStandardStreams:function(){E.stdin?A.createDevice("/dev","stdin",E.stdin):A.symlink("/dev/tty","/dev/stdin"),E.stdout?A.createDevice("/dev","stdout",null,E.stdout):A.symlink("/dev/tty","/dev/stdout"),E.stderr?A.createDevice("/dev","stderr",null,E.stderr):A.symlink("/dev/tty1","/dev/stderr"),A.open("/dev/stdin",0),A.open("/dev/stdout",1),A.open("/dev/stderr",1)},ensureErrnoError:function(){A.ErrnoError||(A.ErrnoError=function(k,V){this.node=V,this.setErrno=function(rt){this.errno=rt},this.setErrno(k),this.message="FS error"},A.ErrnoError.prototype=new Error,A.ErrnoError.prototype.constructor=A.ErrnoError,[44].forEach(function(b){A.genericErrors[b]=new A.ErrnoError(b),A.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){A.ensureErrnoError(),A.nameTable=new Array(4096),A.mount(Q,{},"/"),A.createDefaultDirectories(),A.createDefaultDevices(),A.createSpecialDirectories(),A.filesystems={MEMFS:Q}},init:function(b,k,V){A.init.initialized=!0,A.ensureErrnoError(),E.stdin=b||E.stdin,E.stdout=k||E.stdout,E.stderr=V||E.stderr,A.createStandardStreams()},quit:function(){A.init.initialized=!1;var b=E._fflush;b&&b(0);for(var k=0;k<A.streams.length;k++){var V=A.streams[k];!V||A.close(V)}},getMode:function(b,k){var V=0;return b&&(V|=365),k&&(V|=146),V},findObject:function(b,k){var V=A.analyzePath(b,k);return V.exists?V.object:null},analyzePath:function(b,k){try{b=(V=A.lookupPath(b,{follow:!k})).path}catch{}var rt={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var V=A.lookupPath(b,{parent:!0});rt.parentExists=!0,rt.parentPath=V.path,rt.parentObject=V.node,rt.name=Te.basename(b),V=A.lookupPath(b,{follow:!k}),rt.exists=!0,rt.path=V.path,rt.object=V.node,rt.name=V.node.name,rt.isRoot="/"===V.path}catch(ut){rt.error=ut.errno}return rt},createPath:function(b,k,V,rt){b="string"==typeof b?b:A.getPath(b);for(var ut=k.split("/").reverse();ut.length;){var xt=ut.pop();if(xt){var Ot=Te.join2(b,xt);try{A.mkdir(Ot)}catch{}b=Ot}}return Ot},createFile:function(b,k,V,rt,ut){var xt=Te.join2("string"==typeof b?b:A.getPath(b),k),Ot=A.getMode(rt,ut);return A.create(xt,Ot)},createDataFile:function(b,k,V,rt,ut,xt){var Ot=k?Te.join2("string"==typeof b?b:A.getPath(b),k):b,Zt=A.getMode(rt,ut),ae=A.create(Ot,Zt);if(V){if("string"==typeof V){for(var De=new Array(V.length),Qe=0,sn=V.length;Qe<sn;++Qe)De[Qe]=V.charCodeAt(Qe);V=De}A.chmod(ae,146|Zt);var we=A.open(ae,577);A.write(we,V,0,V.length,0,xt),A.close(we),A.chmod(ae,Zt)}return ae},createDevice:function(b,k,V,rt){var ut=Te.join2("string"==typeof b?b:A.getPath(b),k),xt=A.getMode(!!V,!!rt);A.createDevice.major||(A.createDevice.major=64);var Ot=A.makedev(A.createDevice.major++,0);return A.registerDevice(Ot,{open:function(Zt){Zt.seekable=!1},close:function(Zt){rt&&rt.buffer&&rt.buffer.length&&rt(10)},read:function(Zt,ae,De,Qe,sn){for(var we=0,Pe=0;Pe<Qe;Pe++){var gn;try{gn=V()}catch{throw new A.ErrnoError(29)}if(void 0===gn&&0===we)throw new A.ErrnoError(6);if(null==gn)break;we++,ae[De+Pe]=gn}return we&&(Zt.node.timestamp=Date.now()),we},write:function(Zt,ae,De,Qe,sn){for(var we=0;we<Qe;we++)try{rt(ae[De+we])}catch{throw new A.ErrnoError(29)}return Qe&&(Zt.node.timestamp=Date.now()),we}}),A.mkdev(ut,xt,Ot)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Nt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{b.contents=pe(Nt(b.url),!0),b.usedBytes=b.contents.length}catch{throw new A.ErrnoError(29)}},createLazyFile:function(b,k,V,rt,ut){function xt(){this.lengthKnown=!1,this.chunks=[]}if(xt.prototype.get=function(we){if(!(we>this.length-1||we<0)){var Pe=we%this.chunkSize;return this.getter(we/this.chunkSize|0)[Pe]}},xt.prototype.setDataGetter=function(we){this.getter=we},xt.prototype.cacheLength=function(){var we=new XMLHttpRequest;if(we.open("HEAD",V,!1),we.send(null),!(we.status>=200&&we.status<300||304===we.status))throw new Error("Couldn't load "+V+". Status: "+we.status);var gn,Pe=Number(we.getResponseHeader("Content-length")),Jn=(gn=we.getResponseHeader("Accept-Ranges"))&&"bytes"===gn,Hi=(gn=we.getResponseHeader("Content-Encoding"))&&"gzip"===gn,di=1048576;Jn||(di=Pe);var Fn=this;Fn.setDataGetter(function(pi){var er=pi*di,Gn=(pi+1)*di-1;if(Gn=Math.min(Gn,Pe-1),typeof Fn.chunks[pi]>"u"&&(Fn.chunks[pi]=function(pi,er){if(pi>er)throw new Error("invalid range ("+pi+", "+er+") or no bytes requested!");if(er>Pe-1)throw new Error("only "+Pe+" bytes available! programmer error!");var Gn=new XMLHttpRequest;if(Gn.open("GET",V,!1),Pe!==di&&Gn.setRequestHeader("Range","bytes="+pi+"-"+er),typeof Uint8Array<"u"&&(Gn.responseType="arraybuffer"),Gn.overrideMimeType&&Gn.overrideMimeType("text/plain; charset=x-user-defined"),Gn.send(null),!(Gn.status>=200&&Gn.status<300||304===Gn.status))throw new Error("Couldn't load "+V+". Status: "+Gn.status);return void 0!==Gn.response?new Uint8Array(Gn.response||[]):pe(Gn.responseText||"",!0)}(er,Gn)),typeof Fn.chunks[pi]>"u")throw new Error("doXHR failed!");return Fn.chunks[pi]}),(Hi||!Pe)&&(di=Pe=1,Pe=this.getter(0).length,di=Pe,Ft("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Pe,this._chunkSize=di,this.lengthKnown=!0},typeof XMLHttpRequest<"u")throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Zt,ae=A.createFile(b,k,Zt={isDevice:!1,url:V},rt,ut);Zt.contents?ae.contents=Zt.contents:Zt.url&&(ae.contents=null,ae.url=Zt.url),Object.defineProperties(ae,{usedBytes:{get:function(){return this.contents.length}}});var De={};return Object.keys(ae.stream_ops).forEach(function(sn){var we=ae.stream_ops[sn];De[sn]=function(){return A.forceLoadFile(ae),we.apply(null,arguments)}}),De.read=function(we,Pe,gn,Jn,Hi){A.forceLoadFile(ae);var di=we.node.contents;if(Hi>=di.length)return 0;var on=Math.min(di.length-Hi,Jn);if(di.slice)for(var Fn=0;Fn<on;Fn++)Pe[gn+Fn]=di[Hi+Fn];else for(Fn=0;Fn<on;Fn++)Pe[gn+Fn]=di.get(Hi+Fn);return on},ae.stream_ops=De,ae},createPreloadedFile:function(b,k,V,rt,ut,xt,Ot,Zt,ae,De){Browser.init();var Qe=k?Pn.resolve(Te.join2(b,k)):b;function sn(we){function Pe(Jn){De&&De(),Zt||A.createDataFile(b,k,Jn,rt,ut,ae),xt&&xt(),Mi()}var gn=!1;E.preloadPlugins.forEach(function(Jn){gn||Jn.canHandle(Qe)&&(Jn.handle(we,Qe,Pe,function(){Ot&&Ot(),Mi()}),gn=!0)}),gn||Pe(we)}Pi(),"string"==typeof V?function ct(b,k,V,rt){var ut=rt?"":"al "+b;_t(b,function(xt){Lt(xt,'Loading data file "'+b+'" failed (no arrayBuffer).'),k(new Uint8Array(xt)),ut&&Mi()},function(xt){if(!V)throw'Loading data file "'+b+'" failed.';V()}),ut&&Pi()}(V,function(we){sn(we)},Ot):sn(V)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,k,V){k=k||function(){},V=V||function(){};var rt=A.indexedDB();try{var ut=rt.open(A.DB_NAME(),A.DB_VERSION)}catch(xt){return V(xt)}ut.onupgradeneeded=function(){Ft("creating db"),ut.result.createObjectStore(A.DB_STORE_NAME)},ut.onsuccess=function(){var Zt=ut.result.transaction([A.DB_STORE_NAME],"readwrite"),ae=Zt.objectStore(A.DB_STORE_NAME),De=0,Qe=0,sn=b.length;function we(){0==Qe?k():V()}b.forEach(function(Pe){var gn=ae.put(A.analyzePath(Pe).object.contents,Pe);gn.onsuccess=function(){++De+Qe==sn&&we()},gn.onerror=function(){Qe++,De+Qe==sn&&we()}}),Zt.onerror=V},ut.onerror=V},loadFilesFromDB:function(b,k,V){k=k||function(){},V=V||function(){};var rt=A.indexedDB();try{var ut=rt.open(A.DB_NAME(),A.DB_VERSION)}catch(xt){return V(xt)}ut.onupgradeneeded=V,ut.onsuccess=function(){var Ot=ut.result;try{var Zt=Ot.transaction([A.DB_STORE_NAME],"readonly")}catch(Pe){return void V(Pe)}var ae=Zt.objectStore(A.DB_STORE_NAME),De=0,Qe=0,sn=b.length;function we(){0==Qe?k():V()}b.forEach(function(Pe){var gn=ae.get(Pe);gn.onsuccess=function(){A.analyzePath(Pe).exists&&A.unlink(Pe),A.createDataFile(Te.dirname(Pe),Te.basename(Pe),gn.result,!0,!0,!0),++De+Qe==sn&&we()},gn.onerror=function(){Qe++,De+Qe==sn&&we()}}),Zt.onerror=V},ut.onerror=V}},bt={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(b,k,V){if("/"===k[0])return k;var rt;if(-100===b)rt=A.cwd();else{var ut=A.getStream(b);if(!ut)throw new A.ErrnoError(8);rt=ut.path}if(0==k.length){if(!V)throw new A.ErrnoError(44);return rt}return Te.join2(rt,k)},doStat:function(b,k,V){try{var rt=b(k)}catch(ut){if(ut&&ut.node&&Te.normalize(k)!==Te.normalize(A.getPath(ut.node)))return-54;throw ut}return xe[V>>2]=rt.dev,xe[V+4>>2]=0,xe[V+8>>2]=rt.ino,xe[V+12>>2]=rt.mode,xe[V+16>>2]=rt.nlink,xe[V+20>>2]=rt.uid,xe[V+24>>2]=rt.gid,xe[V+28>>2]=rt.rdev,xe[V+32>>2]=0,an=[rt.size>>>0,(_n=rt.size,+Math.abs(_n)>=1?_n>0?(0|Math.min(+Math.floor(_n/4294967296),4294967295))>>>0:~~+Math.ceil((_n-+(~~_n>>>0))/4294967296)>>>0:0)],xe[V+40>>2]=an[0],xe[V+44>>2]=an[1],xe[V+48>>2]=4096,xe[V+52>>2]=rt.blocks,xe[V+56>>2]=rt.atime.getTime()/1e3|0,xe[V+60>>2]=0,xe[V+64>>2]=rt.mtime.getTime()/1e3|0,xe[V+68>>2]=0,xe[V+72>>2]=rt.ctime.getTime()/1e3|0,xe[V+76>>2]=0,an=[rt.ino>>>0,(_n=rt.ino,+Math.abs(_n)>=1?_n>0?(0|Math.min(+Math.floor(_n/4294967296),4294967295))>>>0:~~+Math.ceil((_n-+(~~_n>>>0))/4294967296)>>>0:0)],xe[V+80>>2]=an[0],xe[V+84>>2]=an[1],0},doMsync:function(b,k,V,rt,ut){var xt=rn.slice(b,b+V);A.msync(k,xt,ut,V,rt)},doMkdir:function(b,k){return"/"===(b=Te.normalize(b))[b.length-1]&&(b=b.substr(0,b.length-1)),A.mkdir(b,k,0),0},doMknod:function(b,k,V){switch(61440&k){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return A.mknod(b,k,V),0},doReadlink:function(b,k,V){if(V<=0)return-28;var rt=A.readlink(b),ut=Math.min(V,Ee(rt)),xt=Ve[k+ut];return function ye(b,k,V){return _e(b,rn,k,V)}(rt,k,V+1),Ve[k+ut]=xt,ut},doAccess:function(b,k){if(-8&k)return-28;var rt=A.lookupPath(b,{follow:!0}).node;if(!rt)return-44;var ut="";return 4&k&&(ut+="r"),2&k&&(ut+="w"),1&k&&(ut+="x"),ut&&A.nodePermissions(rt,ut)?-2:0},doDup:function(b,k,V){var rt=A.getStream(V);return rt&&A.close(rt),A.open(b,k,0,V,V).fd},doReadv:function(b,k,V,rt){for(var ut=0,xt=0;xt<V;xt++){var Zt=xe[k+(8*xt+4)>>2],ae=A.read(b,Ve,xe[k+8*xt>>2],Zt,rt);if(ae<0)return-1;if(ut+=ae,ae<Zt)break}return ut},doWritev:function(b,k,V,rt){for(var ut=0,xt=0;xt<V;xt++){var ae=A.write(b,Ve,xe[k+8*xt>>2],xe[k+(8*xt+4)>>2],rt);if(ae<0)return-1;ut+=ae}return ut},varargs:void 0,get:function(){return bt.varargs+=4,xe[bt.varargs-4>>2]},getStr:function(b){return qt(b)},getStreamFromFD:function(b){var k=A.getStream(b);if(!k)throw new A.ErrnoError(8);return k},get64:function(b,k){return b}};var Ut=[];function dt(b){try{return ke.grow(b-Ue.byteLength+65535>>>16),Tt(ke.buffer),1}catch{}}var mt={};function $t(){if(!$t.strings){var k={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Jt||"./this.program"};for(var V in mt)void 0===mt[V]?delete k[V]:k[V]=mt[V];var rt=[];for(var V in k)rt.push(V+"="+k[V]);$t.strings=rt}return $t.strings}var Me=function(b,k,V,rt){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=A.nextInode++,this.name=k,this.mode=V,this.node_ops={},this.stream_ops={},this.rdev=rt};function pe(b,k,V){var rt=V>0?V:Ee(b)+1,ut=new Array(rt),xt=_e(b,ut,0,ut.length);return k&&(ut.length=xt),ut}Object.defineProperties(Me.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(b){b?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(b){b?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return A.isDir(this.mode)}},isDevice:{get:function(){return A.isChrdev(this.mode)}}}),A.FSNode=Me,A.staticInit();var Re={h:function Dt(b,k,V){bt.varargs=V;try{var rt=bt.getStr(b),ut=V?bt.get():0;return A.open(rt,k,ut).fd}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return-Ot.errno}},b:function Pt(){vi("")},a:function Yt(b,k,V){var rt=function Kt(b,k){var V;for(Ut.length=0,k>>=2;V=rn[b++];){var rt=V<105;rt&&1&k&&k++,Ut.push(rt?un[k++>>1]:xe[k]),++k}return Ut}(k,V);return Hn[b].apply(null,rt)},k:function J(b,k,V){rn.copyWithin(b,k,k+V)},e:function ft(b){var k=rn.length,V=2147483648;if((b>>>=0)>V)return!1;for(var rt=1;rt<=4;rt*=2){var ut=k*(1+.2/rt);if(ut=Math.min(ut,b+100663296),dt(Math.min(V,Ae(Math.max(b,ut),65536))))return!0}return!1},f:function kt(b,k){var V=0;return $t().forEach(function(rt,ut){var xt=k+V;xe[b+4*ut>>2]=xt,function Oe(b,k,V){for(var rt=0;rt<b.length;++rt)Ve[k++>>0]=b.charCodeAt(rt);V||(Ve[k>>0]=0)}(rt,xt),V+=rt.length+1}),0},g:function se(b,k){var V=$t();xe[b>>2]=V.length;var rt=0;return V.forEach(function(ut){rt+=ut.length+1}),xe[k>>2]=rt,0},d:function O(b){try{var k=bt.getStreamFromFD(b);return A.close(k),0}catch(V){if(typeof A>"u"||!(V instanceof A.ErrnoError))throw V;return V.errno}},i:function re(b,k,V,rt){try{var ut=bt.getStreamFromFD(b),xt=bt.doReadv(ut,k,V);return xe[rt>>2]=xt,0}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},j:function Ce(b,k,V,rt,ut){try{var xt=bt.getStreamFromFD(b),Zt=4294967296*V+(k>>>0),ae=9007199254740992;return Zt<=-ae||Zt>=ae?-61:(A.llseek(xt,Zt,rt),an=[xt.position>>>0,(_n=xt.position,+Math.abs(_n)>=1?_n>0?(0|Math.min(+Math.floor(_n/4294967296),4294967295))>>>0:~~+Math.ceil((_n-+(~~_n>>>0))/4294967296)>>>0:0)],xe[ut>>2]=an[0],xe[ut+4>>2]=an[1],xt.getdents&&0===Zt&&0===rt&&(xt.getdents=null),0)}catch(De){if(typeof A>"u"||!(De instanceof A.ErrnoError))throw De;return De.errno}},c:function be(b,k,V,rt){try{var ut=bt.getStreamFromFD(b),xt=bt.doWritev(ut,k,V);return xe[rt>>2]=xt,0}catch(Ot){if(typeof A>"u"||!(Ot instanceof A.ErrnoError))throw Ot;return Ot.errno}},l:function Ke(b){var k=Date.now();return xe[b>>2]=k/1e3|0,xe[b+4>>2]=k%1e3*1e3|0,0}};(function On(){var b={a:Re};function k(Ot,Zt){E.asm=Ot.exports,Tt((ke=E.asm.m).buffer),Wt=E.asm.G,function Oi(b){me.unshift(b)}(E.asm.n),Mi()}function V(Ot){k(Ot.instance)}function rt(Ot){return function ji(){return he||"function"!=typeof fetch?Promise.resolve().then(function(){return En(de)}):fetch(de,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+de+"'";return b.arrayBuffer()}).catch(function(){return En(de)})}().then(function(Zt){return WebAssembly.instantiate(Zt,b)}).then(function(Zt){return Zt}).then(Ot,function(Zt){Ht("failed to asynchronously prepare wasm: "+Zt),vi(Zt)})}if(Pi(),E.instantiateWasm)try{return E.instantiateWasm(b,k)}catch(Ot){return Ht("Module.instantiateWasm callback failed with error: "+Ot),!1}return function ut(){return he||"function"!=typeof WebAssembly.instantiateStreaming||Fi(de)||"function"!=typeof fetch?rt(V):fetch(de,{credentials:"same-origin"}).then(function(Ot){return WebAssembly.instantiateStreaming(Ot,b).then(V,function(ae){return Ht("wasm streaming compile failed: "+ae),Ht("falling back to ArrayBuffer instantiation"),rt(V)})})}().catch(St),{}})(),E.___wasm_call_ctors=function(){return(E.___wasm_call_ctors=E.asm.n).apply(null,arguments)};var jn,fn=E._emscripten_bind_CExpat_CExpat_0=function(){return(fn=E._emscripten_bind_CExpat_CExpat_0=E.asm.o).apply(null,arguments)},mn=E._emscripten_bind_CExpat_version_0=function(){return(mn=E._emscripten_bind_CExpat_version_0=E.asm.p).apply(null,arguments)},je=E._emscripten_bind_CExpat_create_0=function(){return(je=E._emscripten_bind_CExpat_create_0=E.asm.q).apply(null,arguments)},Xe=E._emscripten_bind_CExpat_destroy_0=function(){return(Xe=E._emscripten_bind_CExpat_destroy_0=E.asm.r).apply(null,arguments)},wn=E._emscripten_bind_CExpat_parse_1=function(){return(wn=E._emscripten_bind_CExpat_parse_1=E.asm.s).apply(null,arguments)},Zn=E._emscripten_bind_CExpat_tag_0=function(){return(Zn=E._emscripten_bind_CExpat_tag_0=E.asm.t).apply(null,arguments)},Vn=E._emscripten_bind_CExpat_attrs_0=function(){return(Vn=E._emscripten_bind_CExpat_attrs_0=E.asm.u).apply(null,arguments)},Yn=E._emscripten_bind_CExpat_content_0=function(){return(Yn=E._emscripten_bind_CExpat_content_0=E.asm.v).apply(null,arguments)},Ni=E._emscripten_bind_CExpat_startElement_0=function(){return(Ni=E._emscripten_bind_CExpat_startElement_0=E.asm.w).apply(null,arguments)},ce=E._emscripten_bind_CExpat_endElement_0=function(){return(ce=E._emscripten_bind_CExpat_endElement_0=E.asm.x).apply(null,arguments)},$e=E._emscripten_bind_CExpat_characterData_0=function(){return($e=E._emscripten_bind_CExpat_characterData_0=E.asm.y).apply(null,arguments)},vn=E._emscripten_bind_CExpat___destroy___0=function(){return(vn=E._emscripten_bind_CExpat___destroy___0=E.asm.z).apply(null,arguments)},Cn=E._emscripten_bind_VoidPtr___destroy___0=function(){return(Cn=E._emscripten_bind_VoidPtr___destroy___0=E.asm.A).apply(null,arguments)},$n=E._emscripten_bind_CExpatJS_CExpatJS_0=function(){return($n=E._emscripten_bind_CExpatJS_CExpatJS_0=E.asm.B).apply(null,arguments)},li=E._emscripten_bind_CExpatJS_startElement_0=function(){return(li=E._emscripten_bind_CExpatJS_startElement_0=E.asm.C).apply(null,arguments)},xi=E._emscripten_bind_CExpatJS_endElement_0=function(){return(xi=E._emscripten_bind_CExpatJS_endElement_0=E.asm.D).apply(null,arguments)},Qn=E._emscripten_bind_CExpatJS_characterData_0=function(){return(Qn=E._emscripten_bind_CExpatJS_characterData_0=E.asm.E).apply(null,arguments)},Bi=E._emscripten_bind_CExpatJS___destroy___0=function(){return(Bi=E._emscripten_bind_CExpatJS___destroy___0=E.asm.F).apply(null,arguments)};function ci(b){function k(){jn||(jn=!0,E.calledRun=!0,!Ie&&(function ze(){!E.noFSInit&&!A.init.initialized&&A.init(),A.ignorePermissions=!1,oi(me)}(),pt(E),E.onRuntimeInitialized&&E.onRuntimeInitialized(),function Tn(){if(E.postRun)for("function"==typeof E.postRun&&(E.postRun=[E.postRun]);E.postRun.length;)b=E.postRun.shift(),ee.unshift(b);var b;oi(ee)}()))}_i>0||(function Ze(){if(E.preRun)for("function"==typeof E.preRun&&(E.preRun=[E.preRun]);E.preRun.length;)b=E.preRun.shift(),le.unshift(b);var b;oi(le)}(),_i>0)||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),k()},1)):k())}if(E._malloc=function(){return(E._malloc=E.asm.H).apply(null,arguments)},Si=function b(){jn||ci(),jn||(Si=b)},E.run=ci,E.preInit)for("function"==typeof E.preInit&&(E.preInit=[E.preInit]);E.preInit.length>0;)E.preInit.pop()();function He(){}function Ye(b){return(b||He).__cache__}function ui(b,k){var V=Ye(k),rt=V[b];return rt||((rt=Object.create((k||He).prototype)).ptr=b,V[b]=rt)}ci(),(He.prototype=Object.create(He.prototype)).constructor=He,He.prototype.__class__=He,He.__cache__={},E.WrapperObject=He,E.getCache=Ye,E.wrapPointer=ui,E.castObject=function Ji(b,k){return ui(b.ptr,k)},E.NULL=ui(0),E.destroy=function hi(b){if(!b.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";b.__destroy__(),delete Ye(b.__class__)[b.ptr]},E.compare=function Ui(b,k){return b.ptr===k.ptr},E.getPointer=function Mn(b){return b.ptr},E.getClass=function bi(b){return b.__class__};var cn={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(cn.needed){for(var b=0;b<cn.temps.length;b++)E._free(cn.temps[b]);cn.temps.length=0,E._free(cn.buffer),cn.buffer=0,cn.size+=cn.needed,cn.needed=0}cn.buffer||(cn.size+=128,cn.buffer=E._malloc(cn.size),Lt(cn.buffer)),cn.pos=0},alloc:function(b,k){Lt(cn.buffer);var ut,rt=b.length*k.BYTES_PER_ELEMENT;return cn.pos+(rt=rt+7&-8)>=cn.size?(Lt(rt>0),cn.needed+=rt,ut=E._malloc(rt),cn.temps.push(ut)):(ut=cn.buffer+cn.pos,cn.pos+=rt),ut},copy:function(b,k,V){switch(V>>>=0,k.BYTES_PER_ELEMENT){case 2:V>>>=1;break;case 4:V>>>=2;break;case 8:V>>>=3}for(var ut=0;ut<b.length;ut++)k[V+ut]=b[ut]}};function en(){this.ptr=fn(),Ye(en)[this.ptr]=this}function Ti(){throw"cannot construct a VoidPtr, no constructor in IDL"}function In(){this.ptr=$n(),Ye(In)[this.ptr]=this}return(en.prototype=Object.create(He.prototype)).constructor=en,en.prototype.__class__=en,en.__cache__={},E.CExpat=en,en.prototype.version=en.prototype.version=function(){return qt(mn(this.ptr))},en.prototype.create=en.prototype.create=function(){return!!je(this.ptr)},en.prototype.destroy=en.prototype.destroy=function(){Xe(this.ptr)},en.prototype.parse=en.prototype.parse=function(b){var k=this.ptr;return cn.prepare(),b=b&&"object"==typeof b?b.ptr:function zi(b){if("string"==typeof b){var k=pe(b),V=cn.alloc(k,Ve);return cn.copy(k,Ve,V),V}return b}(b),!!wn(k,b)},en.prototype.tag=en.prototype.tag=function(){return qt(Zn(this.ptr))},en.prototype.attrs=en.prototype.attrs=function(){return qt(Vn(this.ptr))},en.prototype.content=en.prototype.content=function(){return qt(Yn(this.ptr))},en.prototype.startElement=en.prototype.startElement=function(){Ni(this.ptr)},en.prototype.endElement=en.prototype.endElement=function(){ce(this.ptr)},en.prototype.characterData=en.prototype.characterData=function(){$e(this.ptr)},en.prototype.__destroy__=en.prototype.__destroy__=function(){vn(this.ptr)},(Ti.prototype=Object.create(He.prototype)).constructor=Ti,Ti.prototype.__class__=Ti,Ti.__cache__={},E.VoidPtr=Ti,Ti.prototype.__destroy__=Ti.prototype.__destroy__=function(){Cn(this.ptr)},(In.prototype=Object.create(en.prototype)).constructor=In,In.prototype.__class__=In,In.__cache__={},E.CExpatJS=In,In.prototype.startElement=In.prototype.startElement=function(){li(this.ptr)},In.prototype.endElement=In.prototype.endElement=function(){xi(this.ptr)},In.prototype.characterData=In.prototype.characterData=function(){Qn(this.ptr)},In.prototype.__destroy__=In.prototype.__destroy__=function(){Bi(this.ptr)},R.ready},x.exports=q;var m=Object.freeze(c({__proto__:null,default:x.exports},[x.exports]));var d=function p(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}().__hpcc_wasmFolder||void 0;function l(X){if(!arguments.length)return d;var W=d;return d=X,W}function u(X,W,q){var Y=X.default||X;return Y.__hpcc_promise||(Y.__hpcc_promise=Y({wasmBinary:q,locateFile:function(R,E){return"".concat(function h(X,W){for(;X.charAt(X.length-1)===W;)X=X.substring(0,X.length-1);return X}(W||l()||E||".","/"),"/").concat(function f(X,W){for(;X.charAt(0)===W;)X=X.substring(1);return X}(R,"/"))}})),Y.__hpcc_promise}var g=function(){function X(W,q){this.tag=W,this.attrs=q,this._content=""}return Object.defineProperty(X.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),X.prototype.appendContent=function(W){this._content+=W},X}(),C=function(){function X(){this._stack=[]}return X.prototype.parse=function(W,q,Y){return B(W,this,q,Y)},X.prototype.top=function(){return this._stack[this._stack.length-1]},X.prototype.startElement=function(W,q){var Y=new g(W,q);return this._stack.push(Y),Y},X.prototype.endElement=function(W){return this._stack.pop()},X.prototype.characterData=function(W){this.top().appendContent(W)},X}();function B(X,W,q,Y){return u(m,q,Y).then(function(R){var E=new R.CExpatJS;E.startElement=function(){W.startElement(this.tag(),function L(X){var W={},q=X,Y="".concat(String.fromCharCode(1)),R="".concat(Y).concat(Y);return q.split(R).filter(function(E){return!!E}).forEach(function(E){var pt=E.split(Y);W[pt[0]]=pt[1]}),W}(this.attrs()))},E.endElement=function(){W.endElement(this.tag())},E.characterData=function(){W.characterData(this.content())},E.create();var pt=E.parse(X);return E.destroy(),R.destroy(E),pt})}var M={exports:{}};!function(X,W){var q=function(){var Y=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(R){var pt,St,E=typeof(R=R||{})<"u"?R:{};E.ready=new Promise(function(y,S){pt=y,St=S});var Et,Mt={};for(Et in E)E.hasOwnProperty(Et)&&(Mt[Et]=E[Et]);var _t,Xt,Jt="./this.program",ue=function(y,S){throw S},yt="";typeof document<"u"&&document.currentScript&&(yt=document.currentScript.src),Y&&(yt=Y),yt=0!==yt.indexOf("blob:")?yt.substr(0,yt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_t=function(y){var S=new XMLHttpRequest;return S.open("GET",y,!1),S.send(null),S.responseText},Xt=function(y,S,P){var j=new XMLHttpRequest;j.open("GET",y,!0),j.responseType="arraybuffer",j.onload=function(){200==j.status||0==j.status&&j.response?S(j.response):P()},j.onerror=P,j.send(null)};var Ht=E.print||console.log.bind(console),he=E.printErr||console.warn.bind(console);for(Et in Mt)Mt.hasOwnProperty(Et)&&(E[Et]=Mt[Et]);Mt=null,E.thisProgram&&(Jt=E.thisProgram),E.quit&&(ue=E.quit);var jt,ke=0;E.wasmBinary&&(jt=E.wasmBinary);var Vt=E.noExitRuntime||!0;"object"!=typeof WebAssembly&&an("no native wasm support detected");var qt,_e=!1;function ye(y,S){y||an("Assertion failed: "+S)}var Tt,Wt,le,me,ee,Ze,Ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Oe(y,S,P){for(var j=S+P,ht=S;y[ht]&&!(ht>=j);)++ht;if(ht-S>16&&y.subarray&&Ee)return Ee.decode(y.subarray(S,ht));for(var vt="";S<ht;){var At=y[S++];if(128&At){var Bt=63&y[S++];if(192!=(224&At)){var ne=63&y[S++];if((At=224==(240&At)?(15&At)<<12|Bt<<6|ne:(7&At)<<18|Bt<<12|ne<<6|63&y[S++])<65536)vt+=String.fromCharCode(At);else{var Le=At-65536;vt+=String.fromCharCode(55296|Le>>10,56320|1023&Le)}}else vt+=String.fromCharCode((31&At)<<6|Bt)}else vt+=String.fromCharCode(At)}return vt}function Ae(y,S){return y?Oe(le,y,S):""}function Ue(y,S,P,j){if(!(j>0))return 0;for(var ht=P,vt=P+j-1,At=0;At<y.length;++At){var Bt=y.charCodeAt(At);if(Bt>=55296&&Bt<=57343&&(Bt=65536+((1023&Bt)<<10)|1023&y.charCodeAt(++At)),Bt<=127){if(P>=vt)break;S[P++]=Bt}else if(Bt<=2047){if(P+1>=vt)break;S[P++]=192|Bt>>6,S[P++]=128|63&Bt}else if(Bt<=65535){if(P+2>=vt)break;S[P++]=224|Bt>>12,S[P++]=128|Bt>>6&63,S[P++]=128|63&Bt}else{if(P+3>=vt)break;S[P++]=240|Bt>>18,S[P++]=128|Bt>>12&63,S[P++]=128|Bt>>6&63,S[P++]=128|63&Bt}}return S[P]=0,P-ht}function rn(y){for(var S=0,P=0;P<y.length;++P){var j=y.charCodeAt(P);j>=55296&&j<=57343&&(j=65536+((1023&j)<<10)|1023&y.charCodeAt(++P)),j<=127?++S:S+=j<=2047?2:j<=65535?3:4}return S}function un(y,S){return y%S>0&&(y+=S-y%S),y}function ze(y){Tt=y,E.HEAP8=Wt=new Int8Array(y),E.HEAP16=me=new Int16Array(y),E.HEAP32=ee=new Int32Array(y),E.HEAPU8=le=new Uint8Array(y),E.HEAPU16=new Uint16Array(y),E.HEAPU32=new Uint32Array(y),E.HEAPF32=new Float32Array(y),E.HEAPF64=Ze=new Float64Array(y)}var Tn,si=[],Oi=[],gi=[];var de=0,En=null;function On(y){de++,E.monitorRunDependencies&&E.monitorRunDependencies(de)}function _n(y){if(de--,E.monitorRunDependencies&&E.monitorRunDependencies(de),0==de&&En){var S=En;En=null,S()}}function an(y){E.onAbort&&E.onAbort(y),he(y="Aborted("+y+")"),_e=!0,y+=". Build with -s ASSERTIONS=1 for more info.";var S=new WebAssembly.RuntimeError(y);throw St(S),S}E.preloadedImages={},E.preloadedAudios={};var kn;function oi(y){return y.startsWith("data:application/octet-stream;base64,")}function Te(y){try{if(y==kn&&jt)return new Uint8Array(jt);throw"both async and sync fetching of the wasm failed"}catch(S){an(S)}}oi(kn="graphvizlib.wasm")||(kn=function Nt(y){return E.locateFile?E.locateFile(y,yt):yt+y}(kn));var pn,z,bt,Q={161580:function(y,S){var P=Ae(y),j=Ae(S);O.createPath("/",Yt.dirname(P)),O.writeFile(Yt.join("/",P),j)}};function ct(y){for(;y.length>0;){var S=y.shift();if("function"!=typeof S){var P=S.func;"number"==typeof P?void 0===S.arg?A(P)():A(P)(S.arg):P(void 0===S.arg?null:S.arg)}else S(E)}}function A(y){return Tn.get(y)}bt=function(){return performance.now()};function Pt(y){return ee[Ot()>>2]=y,y}var Yt={splitPath:function(y){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(y).slice(1)},normalizeArray:function(y,S){for(var P=0,j=y.length-1;j>=0;j--){var ht=y[j];"."===ht?y.splice(j,1):".."===ht?(y.splice(j,1),P++):P&&(y.splice(j,1),P--)}if(S)for(;P;P--)y.unshift("..");return y},normalize:function(y){var S="/"===y.charAt(0),P="/"===y.substr(-1);return!(y=Yt.normalizeArray(y.split("/").filter(function(j){return!!j}),!S).join("/"))&&!S&&(y="."),y&&P&&(y+="/"),(S?"/":"")+y},dirname:function(y){var S=Yt.splitPath(y),P=S[0],j=S[1];return P||j?(j&&(j=j.substr(0,j.length-1)),P+j):"."},basename:function(y){if("/"===y)return"/";var S=(y=(y=Yt.normalize(y)).replace(/\/$/,"")).lastIndexOf("/");return-1===S?y:y.substr(S+1)},extname:function(y){return Yt.splitPath(y)[3]},join:function(){var y=Array.prototype.slice.call(arguments,0);return Yt.normalize(y.join("/"))},join2:function(y,S){return Yt.normalize(y+"/"+S)}};var dt={resolve:function(){for(var y="",S=!1,P=arguments.length-1;P>=-1&&!S;P--){var j=P>=0?arguments[P]:O.cwd();if("string"!=typeof j)throw new TypeError("Arguments to path.resolve must be strings");if(!j)return"";y=j+"/"+y,S="/"===j.charAt(0)}return(S?"/":"")+(y=Yt.normalizeArray(y.split("/").filter(function(ht){return!!ht}),!S).join("/"))||"."},relative:function(y,S){function P(Le){for(var qe=0;qe<Le.length&&""===Le[qe];qe++);for(var hn=Le.length-1;hn>=0&&""===Le[hn];hn--);return qe>hn?[]:Le.slice(qe,hn-qe+1)}y=dt.resolve(y).substr(1),S=dt.resolve(S).substr(1);for(var j=P(y.split("/")),ht=P(S.split("/")),vt=Math.min(j.length,ht.length),At=vt,Bt=0;Bt<vt;Bt++)if(j[Bt]!==ht[Bt]){At=Bt;break}var ne=[];for(Bt=At;Bt<j.length;Bt++)ne.push("..");return(ne=ne.concat(ht.slice(At))).join("/")}},ft={ttys:[],init:function(){},shutdown:function(){},register:function(y,S){ft.ttys[y]={input:[],output:[],ops:S},O.registerDevice(y,ft.stream_ops)},stream_ops:{open:function(y){var S=ft.ttys[y.node.rdev];if(!S)throw new O.ErrnoError(43);y.tty=S,y.seekable=!1},close:function(y){y.tty.ops.flush(y.tty)},flush:function(y){y.tty.ops.flush(y.tty)},read:function(y,S,P,j,ht){if(!y.tty||!y.tty.ops.get_char)throw new O.ErrnoError(60);for(var vt=0,At=0;At<j;At++){var Bt;try{Bt=y.tty.ops.get_char(y.tty)}catch{throw new O.ErrnoError(29)}if(void 0===Bt&&0===vt)throw new O.ErrnoError(6);if(null==Bt)break;vt++,S[P+At]=Bt}return vt&&(y.node.timestamp=Date.now()),vt},write:function(y,S,P,j,ht){if(!y.tty||!y.tty.ops.put_char)throw new O.ErrnoError(60);try{for(var vt=0;vt<j;vt++)y.tty.ops.put_char(y.tty,S[P+vt])}catch{throw new O.ErrnoError(29)}return j&&(y.node.timestamp=Date.now()),vt}},default_tty_ops:{get_char:function(y){if(!y.input.length){var S=null;if(typeof window<"u"&&"function"==typeof window.prompt?null!==(S=window.prompt("Input: "))&&(S+="\n"):"function"==typeof readline&&null!==(S=readline())&&(S+="\n"),!S)return null;y.input=zi(S,!0)}return y.input.shift()},put_char:function(y,S){null===S||10===S?(Ht(Oe(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(Ht(Oe(y.output,0)),y.output=[])}},default_tty1_ops:{put_char:function(y,S){null===S||10===S?(he(Oe(y.output,0)),y.output=[]):0!=S&&y.output.push(S)},flush:function(y){y.output&&y.output.length>0&&(he(Oe(y.output,0)),y.output=[])}}};function $t(y){y=function zt(y,S){return Math.ceil(y/S)*S}(y,65536);var S=Qe(65536,y);return S?(function mt(y,S){le.fill(0,y,y+S)}(S,y),S):0}var kt={ops_table:null,mount:function(y){return kt.createNode(null,"/",16895,0)},createNode:function(y,S,P,j){if(O.isBlkdev(P)||O.isFIFO(P))throw new O.ErrnoError(63);kt.ops_table||(kt.ops_table={dir:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr,lookup:kt.node_ops.lookup,mknod:kt.node_ops.mknod,rename:kt.node_ops.rename,unlink:kt.node_ops.unlink,rmdir:kt.node_ops.rmdir,readdir:kt.node_ops.readdir,symlink:kt.node_ops.symlink},stream:{llseek:kt.stream_ops.llseek}},file:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr},stream:{llseek:kt.stream_ops.llseek,read:kt.stream_ops.read,write:kt.stream_ops.write,allocate:kt.stream_ops.allocate,mmap:kt.stream_ops.mmap,msync:kt.stream_ops.msync}},link:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr,readlink:kt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:kt.node_ops.getattr,setattr:kt.node_ops.setattr},stream:O.chrdev_stream_ops}});var ht=O.createNode(y,S,P,j);return O.isDir(ht.mode)?(ht.node_ops=kt.ops_table.dir.node,ht.stream_ops=kt.ops_table.dir.stream,ht.contents={}):O.isFile(ht.mode)?(ht.node_ops=kt.ops_table.file.node,ht.stream_ops=kt.ops_table.file.stream,ht.usedBytes=0,ht.contents=null):O.isLink(ht.mode)?(ht.node_ops=kt.ops_table.link.node,ht.stream_ops=kt.ops_table.link.stream):O.isChrdev(ht.mode)&&(ht.node_ops=kt.ops_table.chrdev.node,ht.stream_ops=kt.ops_table.chrdev.stream),ht.timestamp=Date.now(),y&&(y.contents[S]=ht,y.timestamp=ht.timestamp),ht},getFileDataAsTypedArray:function(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage:function(y,S){var P=y.contents?y.contents.length:0;if(!(P>=S)){S=Math.max(S,P*(P<1048576?2:1.125)>>>0),0!=P&&(S=Math.max(S,256));var ht=y.contents;y.contents=new Uint8Array(S),y.usedBytes>0&&y.contents.set(ht.subarray(0,y.usedBytes),0)}},resizeFileStorage:function(y,S){if(y.usedBytes!=S)if(0==S)y.contents=null,y.usedBytes=0;else{var P=y.contents;y.contents=new Uint8Array(S),P&&y.contents.set(P.subarray(0,Math.min(S,y.usedBytes))),y.usedBytes=S}},node_ops:{getattr:function(y){var S={};return S.dev=O.isChrdev(y.mode)?y.id:1,S.ino=y.id,S.mode=y.mode,S.nlink=1,S.uid=0,S.gid=0,S.rdev=y.rdev,S.size=O.isDir(y.mode)?4096:O.isFile(y.mode)?y.usedBytes:O.isLink(y.mode)?y.link.length:0,S.atime=new Date(y.timestamp),S.mtime=new Date(y.timestamp),S.ctime=new Date(y.timestamp),S.blksize=4096,S.blocks=Math.ceil(S.size/S.blksize),S},setattr:function(y,S){void 0!==S.mode&&(y.mode=S.mode),void 0!==S.timestamp&&(y.timestamp=S.timestamp),void 0!==S.size&&kt.resizeFileStorage(y,S.size)},lookup:function(y,S){throw O.genericErrors[44]},mknod:function(y,S,P,j){return kt.createNode(y,S,P,j)},rename:function(y,S,P){if(O.isDir(y.mode)){var j;try{j=O.lookupNode(S,P)}catch{}if(j)for(var ht in j.contents)throw new O.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=P,S.contents[P]=y,S.timestamp=y.parent.timestamp,y.parent=S},unlink:function(y,S){delete y.contents[S],y.timestamp=Date.now()},rmdir:function(y,S){var P=O.lookupNode(y,S);for(var j in P.contents)throw new O.ErrnoError(55);delete y.contents[S],y.timestamp=Date.now()},readdir:function(y){var S=[".",".."];for(var P in y.contents)!y.contents.hasOwnProperty(P)||S.push(P);return S},symlink:function(y,S,P){var j=kt.createNode(y,S,41471,0);return j.link=P,j},readlink:function(y){if(!O.isLink(y.mode))throw new O.ErrnoError(28);return y.link}},stream_ops:{read:function(y,S,P,j,ht){var vt=y.node.contents;if(ht>=y.node.usedBytes)return 0;var At=Math.min(y.node.usedBytes-ht,j);if(At>8&&vt.subarray)S.set(vt.subarray(ht,ht+At),P);else for(var Bt=0;Bt<At;Bt++)S[P+Bt]=vt[ht+Bt];return At},write:function(y,S,P,j,ht,vt){if(S.buffer===Wt.buffer&&(vt=!1),!j)return 0;var At=y.node;if(At.timestamp=Date.now(),S.subarray&&(!At.contents||At.contents.subarray)){if(vt)return At.contents=S.subarray(P,P+j),At.usedBytes=j,j;if(0===At.usedBytes&&0===ht)return At.contents=S.slice(P,P+j),At.usedBytes=j,j;if(ht+j<=At.usedBytes)return At.contents.set(S.subarray(P,P+j),ht),j}if(kt.expandFileStorage(At,ht+j),At.contents.subarray&&S.subarray)At.contents.set(S.subarray(P,P+j),ht);else for(var Bt=0;Bt<j;Bt++)At.contents[ht+Bt]=S[P+Bt];return At.usedBytes=Math.max(At.usedBytes,ht+j),j},llseek:function(y,S,P){var j=S;if(1===P?j+=y.position:2===P&&O.isFile(y.node.mode)&&(j+=y.node.usedBytes),j<0)throw new O.ErrnoError(28);return j},allocate:function(y,S,P){kt.expandFileStorage(y.node,S+P),y.node.usedBytes=Math.max(y.node.usedBytes,S+P)},mmap:function(y,S,P,j,ht,vt){if(0!==S)throw new O.ErrnoError(28);if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);var At,Bt,ne=y.node.contents;if(2&vt||ne.buffer!==Tt){if((j>0||j+P<ne.length)&&(ne=ne.subarray?ne.subarray(j,j+P):Array.prototype.slice.call(ne,j,j+P)),Bt=!0,!(At=$t(P)))throw new O.ErrnoError(48);Wt.set(ne,At)}else Bt=!1,At=ne.byteOffset;return{ptr:At,allocated:Bt}},msync:function(y,S,P,j,ht){if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);return 2&ht||kt.stream_ops.write(y,S,0,j,P,!1),0}}};var O={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(y,S){if(S=S||{},!(y=dt.resolve(O.cwd(),y)))return{path:"",node:null};var P={follow_mount:!0,recurse_count:0};for(var j in P)void 0===S[j]&&(S[j]=P[j]);if(S.recurse_count>8)throw new O.ErrnoError(32);for(var ht=Yt.normalizeArray(y.split("/").filter(function(Ne){return!!Ne}),!1),vt=O.root,At="/",Bt=0;Bt<ht.length;Bt++){var ne=Bt===ht.length-1;if(ne&&S.parent)break;if(vt=O.lookupNode(vt,ht[Bt]),At=Yt.join2(At,ht[Bt]),O.isMountpoint(vt)&&(!ne||ne&&S.follow_mount)&&(vt=vt.mounted.root),!ne||S.follow)for(var Le=0;O.isLink(vt.mode);){var qe=O.readlink(At);if(At=dt.resolve(Yt.dirname(At),qe),vt=O.lookupPath(At,{recurse_count:S.recurse_count}).node,Le++>40)throw new O.ErrnoError(32)}}return{path:At,node:vt}},getPath:function(y){for(var S;;){if(O.isRoot(y)){var P=y.mount.mountpoint;return S?"/"!==P[P.length-1]?P+"/"+S:P+S:P}S=S?y.name+"/"+S:y.name,y=y.parent}},hashName:function(y,S){for(var P=0,j=0;j<S.length;j++)P=(P<<5)-P+S.charCodeAt(j)|0;return(y+P>>>0)%O.nameTable.length},hashAddNode:function(y){var S=O.hashName(y.parent.id,y.name);y.name_next=O.nameTable[S],O.nameTable[S]=y},hashRemoveNode:function(y){var S=O.hashName(y.parent.id,y.name);if(O.nameTable[S]===y)O.nameTable[S]=y.name_next;else for(var P=O.nameTable[S];P;){if(P.name_next===y){P.name_next=y.name_next;break}P=P.name_next}},lookupNode:function(y,S){var P=O.mayLookup(y);if(P)throw new O.ErrnoError(P,y);for(var j=O.hashName(y.id,S),ht=O.nameTable[j];ht;ht=ht.name_next)if(ht.parent.id===y.id&&ht.name===S)return ht;return O.lookup(y,S)},createNode:function(y,S,P,j){var ht=new O.FSNode(y,S,P,j);return O.hashAddNode(ht),ht},destroyNode:function(y){O.hashRemoveNode(y)},isRoot:function(y){return y===y.parent},isMountpoint:function(y){return!!y.mounted},isFile:function(y){return 32768==(61440&y)},isDir:function(y){return 16384==(61440&y)},isLink:function(y){return 40960==(61440&y)},isChrdev:function(y){return 8192==(61440&y)},isBlkdev:function(y){return 24576==(61440&y)},isFIFO:function(y){return 4096==(61440&y)},isSocket:function(y){return 49152==(49152&y)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(y){var S=O.flagModes[y];if(typeof S>"u")throw new Error("Unknown file open mode: "+y);return S},flagsToPermissionString:function(y){var S=["r","w","rw"][3&y];return 512&y&&(S+="w"),S},nodePermissions:function(y,S){return O.ignorePermissions?0:S.includes("r")&&!(292&y.mode)||S.includes("w")&&!(146&y.mode)||S.includes("x")&&!(73&y.mode)?2:0},mayLookup:function(y){return O.nodePermissions(y,"x")||(y.node_ops.lookup?0:2)},mayCreate:function(y,S){try{return O.lookupNode(y,S),20}catch{}return O.nodePermissions(y,"wx")},mayDelete:function(y,S,P){var j;try{j=O.lookupNode(y,S)}catch(vt){return vt.errno}var ht=O.nodePermissions(y,"wx");if(ht)return ht;if(P){if(!O.isDir(j.mode))return 54;if(O.isRoot(j)||O.getPath(j)===O.cwd())return 10}else if(O.isDir(j.mode))return 31;return 0},mayOpen:function(y,S){return y?O.isLink(y.mode)?32:O.isDir(y.mode)&&("r"!==O.flagsToPermissionString(S)||512&S)?31:O.nodePermissions(y,O.flagsToPermissionString(S)):44},MAX_OPEN_FDS:4096,nextfd:function(y,S){S=S||O.MAX_OPEN_FDS;for(var P=y=y||0;P<=S;P++)if(!O.streams[P])return P;throw new O.ErrnoError(33)},getStream:function(y){return O.streams[y]},createStream:function(y,S,P){O.FSStream||(O.FSStream=function(){},O.FSStream.prototype={object:{get:function(){return this.node},set:function(At){this.node=At}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var j=new O.FSStream;for(var ht in y)j[ht]=y[ht];y=j;var vt=O.nextfd(S,P);return y.fd=vt,O.streams[vt]=y,y},closeStream:function(y){O.streams[y]=null},chrdev_stream_ops:{open:function(y){var S=O.getDevice(y.node.rdev);y.stream_ops=S.stream_ops,y.stream_ops.open&&y.stream_ops.open(y)},llseek:function(){throw new O.ErrnoError(70)}},major:function(y){return y>>8},minor:function(y){return 255&y},makedev:function(y,S){return y<<8|S},registerDevice:function(y,S){O.devices[y]={stream_ops:S}},getDevice:function(y){return O.devices[y]},getMounts:function(y){for(var S=[],P=[y];P.length;){var j=P.pop();S.push(j),P.push.apply(P,j.mounts)}return S},syncfs:function(y,S){"function"==typeof y&&(S=y,y=!1),O.syncFSRequests++,O.syncFSRequests>1&&he("warning: "+O.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var P=O.getMounts(O.root.mount),j=0;function ht(At){return O.syncFSRequests--,S(At)}function vt(At){if(At)return vt.errored?void 0:(vt.errored=!0,ht(At));++j>=P.length&&ht(null)}P.forEach(function(At){if(!At.type.syncfs)return vt(null);At.type.syncfs(At,y,vt)})},mount:function(y,S,P){var vt,j="/"===P,ht=!P;if(j&&O.root)throw new O.ErrnoError(10);if(!j&&!ht){var At=O.lookupPath(P,{follow_mount:!1});if(P=At.path,O.isMountpoint(vt=At.node))throw new O.ErrnoError(10);if(!O.isDir(vt.mode))throw new O.ErrnoError(54)}var Bt={type:y,opts:S,mountpoint:P,mounts:[]},ne=y.mount(Bt);return ne.mount=Bt,Bt.root=ne,j?O.root=ne:vt&&(vt.mounted=Bt,vt.mount&&vt.mount.mounts.push(Bt)),ne},unmount:function(y){var S=O.lookupPath(y,{follow_mount:!1});if(!O.isMountpoint(S.node))throw new O.ErrnoError(28);var P=S.node,j=P.mounted,ht=O.getMounts(j);Object.keys(O.nameTable).forEach(function(At){for(var Bt=O.nameTable[At];Bt;){var ne=Bt.name_next;ht.includes(Bt.mount)&&O.destroyNode(Bt),Bt=ne}}),P.mounted=null;var vt=P.mount.mounts.indexOf(j);P.mount.mounts.splice(vt,1)},lookup:function(y,S){return y.node_ops.lookup(y,S)},mknod:function(y,S,P){var ht=O.lookupPath(y,{parent:!0}).node,vt=Yt.basename(y);if(!vt||"."===vt||".."===vt)throw new O.ErrnoError(28);var At=O.mayCreate(ht,vt);if(At)throw new O.ErrnoError(At);if(!ht.node_ops.mknod)throw new O.ErrnoError(63);return ht.node_ops.mknod(ht,vt,S,P)},create:function(y,S){return S=void 0!==S?S:438,S&=4095,O.mknod(y,S|=32768,0)},mkdir:function(y,S){return S=void 0!==S?S:511,S&=1023,O.mknod(y,S|=16384,0)},mkdirTree:function(y,S){for(var P=y.split("/"),j="",ht=0;ht<P.length;++ht)if(P[ht]){j+="/"+P[ht];try{O.mkdir(j,S)}catch(vt){if(20!=vt.errno)throw vt}}},mkdev:function(y,S,P){return typeof P>"u"&&(P=S,S=438),O.mknod(y,S|=8192,P)},symlink:function(y,S){if(!dt.resolve(y))throw new O.ErrnoError(44);var j=O.lookupPath(S,{parent:!0}).node;if(!j)throw new O.ErrnoError(44);var ht=Yt.basename(S),vt=O.mayCreate(j,ht);if(vt)throw new O.ErrnoError(vt);if(!j.node_ops.symlink)throw new O.ErrnoError(63);return j.node_ops.symlink(j,ht,y)},rename:function(y,S){var Bt,ne,P=Yt.dirname(y),j=Yt.dirname(S),ht=Yt.basename(y),vt=Yt.basename(S);if(Bt=O.lookupPath(y,{parent:!0}).node,ne=O.lookupPath(S,{parent:!0}).node,!Bt||!ne)throw new O.ErrnoError(44);if(Bt.mount!==ne.mount)throw new O.ErrnoError(75);var hn,Le=O.lookupNode(Bt,ht),qe=dt.relative(y,j);if("."!==qe.charAt(0))throw new O.ErrnoError(28);if("."!==(qe=dt.relative(S,P)).charAt(0))throw new O.ErrnoError(55);try{hn=O.lookupNode(ne,vt)}catch{}if(Le!==hn){var Ne=O.isDir(Le.mode),Ge=O.mayDelete(Bt,ht,Ne);if(Ge)throw new O.ErrnoError(Ge);if(Ge=hn?O.mayDelete(ne,vt,Ne):O.mayCreate(ne,vt))throw new O.ErrnoError(Ge);if(!Bt.node_ops.rename)throw new O.ErrnoError(63);if(O.isMountpoint(Le)||hn&&O.isMountpoint(hn))throw new O.ErrnoError(10);if(ne!==Bt&&(Ge=O.nodePermissions(Bt,"w")))throw new O.ErrnoError(Ge);O.hashRemoveNode(Le);try{Bt.node_ops.rename(Le,ne,vt)}catch(bn){throw bn}finally{O.hashAddNode(Le)}}},rmdir:function(y){var P=O.lookupPath(y,{parent:!0}).node,j=Yt.basename(y),ht=O.lookupNode(P,j),vt=O.mayDelete(P,j,!0);if(vt)throw new O.ErrnoError(vt);if(!P.node_ops.rmdir)throw new O.ErrnoError(63);if(O.isMountpoint(ht))throw new O.ErrnoError(10);P.node_ops.rmdir(P,j),O.destroyNode(ht)},readdir:function(y){var P=O.lookupPath(y,{follow:!0}).node;if(!P.node_ops.readdir)throw new O.ErrnoError(54);return P.node_ops.readdir(P)},unlink:function(y){var P=O.lookupPath(y,{parent:!0}).node,j=Yt.basename(y),ht=O.lookupNode(P,j),vt=O.mayDelete(P,j,!1);if(vt)throw new O.ErrnoError(vt);if(!P.node_ops.unlink)throw new O.ErrnoError(63);if(O.isMountpoint(ht))throw new O.ErrnoError(10);P.node_ops.unlink(P,j),O.destroyNode(ht)},readlink:function(y){var P=O.lookupPath(y).node;if(!P)throw new O.ErrnoError(44);if(!P.node_ops.readlink)throw new O.ErrnoError(28);return dt.resolve(O.getPath(P.parent),P.node_ops.readlink(P))},stat:function(y,S){var j=O.lookupPath(y,{follow:!S}).node;if(!j)throw new O.ErrnoError(44);if(!j.node_ops.getattr)throw new O.ErrnoError(63);return j.node_ops.getattr(j)},lstat:function(y){return O.stat(y,!0)},chmod:function(y,S,P){var j;if(!(j="string"==typeof y?O.lookupPath(y,{follow:!P}).node:y).node_ops.setattr)throw new O.ErrnoError(63);j.node_ops.setattr(j,{mode:4095&S|-4096&j.mode,timestamp:Date.now()})},lchmod:function(y,S){O.chmod(y,S,!0)},fchmod:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);O.chmod(P.node,S)},chown:function(y,S,P,j){var ht;if(!(ht="string"==typeof y?O.lookupPath(y,{follow:!j}).node:y).node_ops.setattr)throw new O.ErrnoError(63);ht.node_ops.setattr(ht,{timestamp:Date.now()})},lchown:function(y,S,P){O.chown(y,S,P,!0)},fchown:function(y,S,P){var j=O.getStream(y);if(!j)throw new O.ErrnoError(8);O.chown(j.node,S,P)},truncate:function(y,S){if(S<0)throw new O.ErrnoError(28);var P;if(!(P="string"==typeof y?O.lookupPath(y,{follow:!0}).node:y).node_ops.setattr)throw new O.ErrnoError(63);if(O.isDir(P.mode))throw new O.ErrnoError(31);if(!O.isFile(P.mode))throw new O.ErrnoError(28);var ht=O.nodePermissions(P,"w");if(ht)throw new O.ErrnoError(ht);P.node_ops.setattr(P,{size:S,timestamp:Date.now()})},ftruncate:function(y,S){var P=O.getStream(y);if(!P)throw new O.ErrnoError(8);if(0==(2097155&P.flags))throw new O.ErrnoError(28);O.truncate(P.node,S)},utime:function(y,S,P){var ht=O.lookupPath(y,{follow:!0}).node;ht.node_ops.setattr(ht,{timestamp:Math.max(S,P)})},open:function(y,S,P,j,ht){if(""===y)throw new O.ErrnoError(44);var vt;if(P=typeof P>"u"?438:P,P=64&(S="string"==typeof S?O.modeStringToFlags(S):S)?4095&P|32768:0,"object"==typeof y)vt=y;else{y=Yt.normalize(y);try{vt=O.lookupPath(y,{follow:!(131072&S)}).node}catch{}}var Bt=!1;if(64&S)if(vt){if(128&S)throw new O.ErrnoError(20)}else vt=O.mknod(y,P,0),Bt=!0;if(!vt)throw new O.ErrnoError(44);if(O.isChrdev(vt.mode)&&(S&=-513),65536&S&&!O.isDir(vt.mode))throw new O.ErrnoError(54);if(!Bt){var ne=O.mayOpen(vt,S);if(ne)throw new O.ErrnoError(ne)}512&S&&O.truncate(vt,0),S&=-131713;var Le=O.createStream({node:vt,path:O.getPath(vt),id:vt.id,flags:S,mode:vt.mode,seekable:!0,position:0,stream_ops:vt.stream_ops,node_ops:vt.node_ops,ungotten:[],error:!1},j,ht);return Le.stream_ops.open&&Le.stream_ops.open(Le),E.logReadFiles&&!(1&S)&&(O.readFiles||(O.readFiles={}),y in O.readFiles||(O.readFiles[y]=1)),Le},close:function(y){if(O.isClosed(y))throw new O.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(S){throw S}finally{O.closeStream(y.fd)}y.fd=null},isClosed:function(y){return null===y.fd},llseek:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new O.ErrnoError(70);if(0!=P&&1!=P&&2!=P)throw new O.ErrnoError(28);return y.position=y.stream_ops.llseek(y,S,P),y.ungotten=[],y.position},read:function(y,S,P,j,ht){if(j<0||ht<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(1==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.read)throw new O.ErrnoError(28);var vt=typeof ht<"u";if(vt){if(!y.seekable)throw new O.ErrnoError(70)}else ht=y.position;var At=y.stream_ops.read(y,S,P,j,ht);return vt||(y.position+=At),At},write:function(y,S,P,j,ht,vt){if(j<0||ht<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.write)throw new O.ErrnoError(28);y.seekable&&1024&y.flags&&O.llseek(y,0,2);var At=typeof ht<"u";if(At){if(!y.seekable)throw new O.ErrnoError(70)}else ht=y.position;var Bt=y.stream_ops.write(y,S,P,j,ht,vt);return At||(y.position+=Bt),Bt},allocate:function(y,S,P){if(O.isClosed(y))throw new O.ErrnoError(8);if(S<0||P<=0)throw new O.ErrnoError(28);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(!O.isFile(y.node.mode)&&!O.isDir(y.node.mode))throw new O.ErrnoError(43);if(!y.stream_ops.allocate)throw new O.ErrnoError(138);y.stream_ops.allocate(y,S,P)},mmap:function(y,S,P,j,ht,vt){if(0!=(2&ht)&&0==(2&vt)&&2!=(2097155&y.flags))throw new O.ErrnoError(2);if(1==(2097155&y.flags))throw new O.ErrnoError(2);if(!y.stream_ops.mmap)throw new O.ErrnoError(43);return y.stream_ops.mmap(y,S,P,j,ht,vt)},msync:function(y,S,P,j,ht){return y&&y.stream_ops.msync?y.stream_ops.msync(y,S,P,j,ht):0},munmap:function(y){return 0},ioctl:function(y,S,P){if(!y.stream_ops.ioctl)throw new O.ErrnoError(59);return y.stream_ops.ioctl(y,S,P)},readFile:function(y,S){if((S=S||{}).flags=S.flags||0,S.encoding=S.encoding||"binary","utf8"!==S.encoding&&"binary"!==S.encoding)throw new Error('Invalid encoding type "'+S.encoding+'"');var P,j=O.open(y,S.flags),vt=O.stat(y).size,At=new Uint8Array(vt);return O.read(j,At,0,vt,0),"utf8"===S.encoding?P=Oe(At,0):"binary"===S.encoding&&(P=At),O.close(j),P},writeFile:function(y,S,P){(P=P||{}).flags=P.flags||577;var j=O.open(y,P.flags,P.mode);if("string"==typeof S){var ht=new Uint8Array(rn(S)+1),vt=Ue(S,ht,0,ht.length);O.write(j,ht,0,vt,void 0,P.canOwn)}else{if(!ArrayBuffer.isView(S))throw new Error("Unsupported data type");O.write(j,S,0,S.byteLength,void 0,P.canOwn)}O.close(j)},cwd:function(){return O.currentPath},chdir:function(y){var S=O.lookupPath(y,{follow:!0});if(null===S.node)throw new O.ErrnoError(44);if(!O.isDir(S.node.mode))throw new O.ErrnoError(54);var P=O.nodePermissions(S.node,"x");if(P)throw new O.ErrnoError(P);O.currentPath=S.path},createDefaultDirectories:function(){O.mkdir("/tmp"),O.mkdir("/home"),O.mkdir("/home/web_user")},createDefaultDevices:function(){O.mkdir("/dev"),O.registerDevice(O.makedev(1,3),{read:function(){return 0},write:function(S,P,j,ht,vt){return ht}}),O.mkdev("/dev/null",O.makedev(1,3)),ft.register(O.makedev(5,0),ft.default_tty_ops),ft.register(O.makedev(6,0),ft.default_tty1_ops),O.mkdev("/dev/tty",O.makedev(5,0)),O.mkdev("/dev/tty1",O.makedev(6,0));var y=function J(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var y=new Uint8Array(1);return function(){return crypto.getRandomValues(y),y[0]}}return function(){an("randomDevice")}}();O.createDevice("/dev","random",y),O.createDevice("/dev","urandom",y),O.mkdir("/dev/shm"),O.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){O.mkdir("/proc");var y=O.mkdir("/proc/self");O.mkdir("/proc/self/fd"),O.mount({mount:function(){var S=O.createNode(y,"fd",16895,73);return S.node_ops={lookup:function(P,j){var vt=O.getStream(+j);if(!vt)throw new O.ErrnoError(8);var At={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return vt.path}}};return At.parent=At,At}},S}},{},"/proc/self/fd")},createStandardStreams:function(){E.stdin?O.createDevice("/dev","stdin",E.stdin):O.symlink("/dev/tty","/dev/stdin"),E.stdout?O.createDevice("/dev","stdout",null,E.stdout):O.symlink("/dev/tty","/dev/stdout"),E.stderr?O.createDevice("/dev","stderr",null,E.stderr):O.symlink("/dev/tty1","/dev/stderr"),O.open("/dev/stdin",0),O.open("/dev/stdout",1),O.open("/dev/stderr",1)},ensureErrnoError:function(){O.ErrnoError||(O.ErrnoError=function(S,P){this.node=P,this.setErrno=function(j){this.errno=j},this.setErrno(S),this.message="FS error"},O.ErrnoError.prototype=new Error,O.ErrnoError.prototype.constructor=O.ErrnoError,[44].forEach(function(y){O.genericErrors[y]=new O.ErrnoError(y),O.genericErrors[y].stack="<generic error, no stack>"}))},staticInit:function(){O.ensureErrnoError(),O.nameTable=new Array(4096),O.mount(kt,{},"/"),O.createDefaultDirectories(),O.createDefaultDevices(),O.createSpecialDirectories(),O.filesystems={MEMFS:kt}},init:function(y,S,P){O.init.initialized=!0,O.ensureErrnoError(),E.stdin=y||E.stdin,E.stdout=S||E.stdout,E.stderr=P||E.stderr,O.createStandardStreams()},quit:function(){O.init.initialized=!1;var y=E._fflush;y&&y(0);for(var S=0;S<O.streams.length;S++){var P=O.streams[S];!P||O.close(P)}},getMode:function(y,S){var P=0;return y&&(P|=365),S&&(P|=146),P},findObject:function(y,S){var P=O.analyzePath(y,S);return P.exists?P.object:null},analyzePath:function(y,S){try{y=(P=O.lookupPath(y,{follow:!S})).path}catch{}var j={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var P=O.lookupPath(y,{parent:!0});j.parentExists=!0,j.parentPath=P.path,j.parentObject=P.node,j.name=Yt.basename(y),P=O.lookupPath(y,{follow:!S}),j.exists=!0,j.path=P.path,j.object=P.node,j.name=P.node.name,j.isRoot="/"===P.path}catch(ht){j.error=ht.errno}return j},createPath:function(y,S,P,j){y="string"==typeof y?y:O.getPath(y);for(var ht=S.split("/").reverse();ht.length;){var vt=ht.pop();if(vt){var At=Yt.join2(y,vt);try{O.mkdir(At)}catch{}y=At}}return At},createFile:function(y,S,P,j,ht){var vt=Yt.join2("string"==typeof y?y:O.getPath(y),S),At=O.getMode(j,ht);return O.create(vt,At)},createDataFile:function(y,S,P,j,ht,vt){var At=S?Yt.join2("string"==typeof y?y:O.getPath(y),S):y,Bt=O.getMode(j,ht),ne=O.create(At,Bt);if(P){if("string"==typeof P){for(var Le=new Array(P.length),qe=0,hn=P.length;qe<hn;++qe)Le[qe]=P.charCodeAt(qe);P=Le}O.chmod(ne,146|Bt);var Ne=O.open(ne,577);O.write(Ne,P,0,P.length,0,vt),O.close(Ne),O.chmod(ne,Bt)}return ne},createDevice:function(y,S,P,j){var ht=Yt.join2("string"==typeof y?y:O.getPath(y),S),vt=O.getMode(!!P,!!j);O.createDevice.major||(O.createDevice.major=64);var At=O.makedev(O.createDevice.major++,0);return O.registerDevice(At,{open:function(Bt){Bt.seekable=!1},close:function(Bt){j&&j.buffer&&j.buffer.length&&j(10)},read:function(Bt,ne,Le,qe,hn){for(var Ne=0,Ge=0;Ge<qe;Ge++){var bn;try{bn=P()}catch{throw new O.ErrnoError(29)}if(void 0===bn&&0===Ne)throw new O.ErrnoError(6);if(null==bn)break;Ne++,ne[Le+Ge]=bn}return Ne&&(Bt.node.timestamp=Date.now()),Ne},write:function(Bt,ne,Le,qe,hn){for(var Ne=0;Ne<qe;Ne++)try{j(ne[Le+Ne])}catch{throw new O.ErrnoError(29)}return qe&&(Bt.node.timestamp=Date.now()),Ne}}),O.mkdev(ht,vt,At)},forceLoadFile:function(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!_t)throw new Error("Cannot load without read() or XMLHttpRequest.");try{y.contents=zi(_t(y.url),!0),y.usedBytes=y.contents.length}catch{throw new O.ErrnoError(29)}},createLazyFile:function(y,S,P,j,ht){function vt(){this.lengthKnown=!1,this.chunks=[]}if(vt.prototype.get=function(Ne){if(!(Ne>this.length-1||Ne<0)){var Ge=Ne%this.chunkSize;return this.getter(Ne/this.chunkSize|0)[Ge]}},vt.prototype.setDataGetter=function(Ne){this.getter=Ne},vt.prototype.cacheLength=function(){var Ne=new XMLHttpRequest;if(Ne.open("HEAD",P,!1),Ne.send(null),!(Ne.status>=200&&Ne.status<300||304===Ne.status))throw new Error("Couldn't load "+P+". Status: "+Ne.status);var bn,Ge=Number(Ne.getResponseHeader("Content-length")),Ei=(bn=Ne.getResponseHeader("Accept-Ranges"))&&"bytes"===bn,gr=(bn=Ne.getResponseHeader("Content-Encoding"))&&"gzip"===bn,yi=1048576;Ei||(yi=Ge);var Wn=this;Wn.setDataGetter(function(Yi){var vr=Yi*yi,Kn=(Yi+1)*yi-1;if(Kn=Math.min(Kn,Ge-1),typeof Wn.chunks[Yi]>"u"&&(Wn.chunks[Yi]=function(Yi,vr){if(Yi>vr)throw new Error("invalid range ("+Yi+", "+vr+") or no bytes requested!");if(vr>Ge-1)throw new Error("only "+Ge+" bytes available! programmer error!");var Kn=new XMLHttpRequest;if(Kn.open("GET",P,!1),Ge!==yi&&Kn.setRequestHeader("Range","bytes="+Yi+"-"+vr),typeof Uint8Array<"u"&&(Kn.responseType="arraybuffer"),Kn.overrideMimeType&&Kn.overrideMimeType("text/plain; charset=x-user-defined"),Kn.send(null),!(Kn.status>=200&&Kn.status<300||304===Kn.status))throw new Error("Couldn't load "+P+". Status: "+Kn.status);return void 0!==Kn.response?new Uint8Array(Kn.response||[]):zi(Kn.responseText||"",!0)}(vr,Kn)),typeof Wn.chunks[Yi]>"u")throw new Error("doXHR failed!");return Wn.chunks[Yi]}),(gr||!Ge)&&(yi=Ge=1,Ge=this.getter(0).length,yi=Ge,Ht("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Ge,this._chunkSize=yi,this.lengthKnown=!0},typeof XMLHttpRequest<"u")throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Bt,ne=O.createFile(y,S,Bt={isDevice:!1,url:P},j,ht);Bt.contents?ne.contents=Bt.contents:Bt.url&&(ne.contents=null,ne.url=Bt.url),Object.defineProperties(ne,{usedBytes:{get:function(){return this.contents.length}}});var Le={};return Object.keys(ne.stream_ops).forEach(function(hn){var Ne=ne.stream_ops[hn];Le[hn]=function(){return O.forceLoadFile(ne),Ne.apply(null,arguments)}}),Le.read=function(Ne,Ge,bn,Ei,gr){O.forceLoadFile(ne);var yi=Ne.node.contents;if(gr>=yi.length)return 0;var _r=Math.min(yi.length-gr,Ei);if(yi.slice)for(var Wn=0;Wn<_r;Wn++)Ge[bn+Wn]=yi[gr+Wn];else for(Wn=0;Wn<_r;Wn++)Ge[bn+Wn]=yi.get(gr+Wn);return _r},ne.stream_ops=Le,ne},createPreloadedFile:function(y,S,P,j,ht,vt,At,Bt,ne,Le){Browser.init();var qe=S?dt.resolve(Yt.join2(y,S)):y;function hn(Ne){function Ge(Ei){Le&&Le(),Bt||O.createDataFile(y,S,Ei,j,ht,ne),vt&&vt(),_n()}var bn=!1;E.preloadPlugins.forEach(function(Ei){bn||Ei.canHandle(qe)&&(Ei.handle(Ne,qe,Ge,function(){At&&At(),_n()}),bn=!0)}),bn||Ge(Ne)}On(),"string"==typeof P?function se(y,S,P,j){var ht=j?"":"al "+y;Xt(y,function(vt){ye(vt,'Loading data file "'+y+'" failed (no arrayBuffer).'),S(new Uint8Array(vt)),ht&&_n()},function(vt){if(!P)throw'Loading data file "'+y+'" failed.';P()}),ht&&On()}(P,function(Ne){hn(Ne)},At):hn(P)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(y,S,P){S=S||function(){},P=P||function(){};var j=O.indexedDB();try{var ht=j.open(O.DB_NAME(),O.DB_VERSION)}catch(vt){return P(vt)}ht.onupgradeneeded=function(){Ht("creating db"),ht.result.createObjectStore(O.DB_STORE_NAME)},ht.onsuccess=function(){var Bt=ht.result.transaction([O.DB_STORE_NAME],"readwrite"),ne=Bt.objectStore(O.DB_STORE_NAME),Le=0,qe=0,hn=y.length;function Ne(){0==qe?S():P()}y.forEach(function(Ge){var bn=ne.put(O.analyzePath(Ge).object.contents,Ge);bn.onsuccess=function(){++Le+qe==hn&&Ne()},bn.onerror=function(){qe++,Le+qe==hn&&Ne()}}),Bt.onerror=P},ht.onerror=P},loadFilesFromDB:function(y,S,P){S=S||function(){},P=P||function(){};var j=O.indexedDB();try{var ht=j.open(O.DB_NAME(),O.DB_VERSION)}catch(vt){return P(vt)}ht.onupgradeneeded=P,ht.onsuccess=function(){var At=ht.result;try{var Bt=At.transaction([O.DB_STORE_NAME],"readonly")}catch(Ge){return void P(Ge)}var ne=Bt.objectStore(O.DB_STORE_NAME),Le=0,qe=0,hn=y.length;function Ne(){0==qe?S():P()}y.forEach(function(Ge){var bn=ne.get(Ge);bn.onsuccess=function(){O.analyzePath(Ge).exists&&O.unlink(Ge),O.createDataFile(Yt.dirname(Ge),Yt.basename(Ge),bn.result,!0,!0,!0),++Le+qe==hn&&Ne()},bn.onerror=function(){qe++,Le+qe==hn&&Ne()}}),Bt.onerror=P},ht.onerror=P}},re={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(y,S,P){if("/"===S[0])return S;var j;if(-100===y)j=O.cwd();else{var ht=O.getStream(y);if(!ht)throw new O.ErrnoError(8);j=ht.path}if(0==S.length){if(!P)throw new O.ErrnoError(44);return j}return Yt.join2(j,S)},doStat:function(y,S,P){try{var j=y(S)}catch(ht){if(ht&&ht.node&&Yt.normalize(S)!==Yt.normalize(O.getPath(ht.node)))return-54;throw ht}return ee[P>>2]=j.dev,ee[P+4>>2]=0,ee[P+8>>2]=j.ino,ee[P+12>>2]=j.mode,ee[P+16>>2]=j.nlink,ee[P+20>>2]=j.uid,ee[P+24>>2]=j.gid,ee[P+28>>2]=j.rdev,ee[P+32>>2]=0,z=[j.size>>>0,(pn=j.size,+Math.abs(pn)>=1?pn>0?(0|Math.min(+Math.floor(pn/4294967296),4294967295))>>>0:~~+Math.ceil((pn-+(~~pn>>>0))/4294967296)>>>0:0)],ee[P+40>>2]=z[0],ee[P+44>>2]=z[1],ee[P+48>>2]=4096,ee[P+52>>2]=j.blocks,ee[P+56>>2]=j.atime.getTime()/1e3|0,ee[P+60>>2]=0,ee[P+64>>2]=j.mtime.getTime()/1e3|0,ee[P+68>>2]=0,ee[P+72>>2]=j.ctime.getTime()/1e3|0,ee[P+76>>2]=0,z=[j.ino>>>0,(pn=j.ino,+Math.abs(pn)>=1?pn>0?(0|Math.min(+Math.floor(pn/4294967296),4294967295))>>>0:~~+Math.ceil((pn-+(~~pn>>>0))/4294967296)>>>0:0)],ee[P+80>>2]=z[0],ee[P+84>>2]=z[1],0},doMsync:function(y,S,P,j,ht){var vt=le.slice(y,y+P);O.msync(S,vt,ht,P,j)},doMkdir:function(y,S){return"/"===(y=Yt.normalize(y))[y.length-1]&&(y=y.substr(0,y.length-1)),O.mkdir(y,S,0),0},doMknod:function(y,S,P){switch(61440&S){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return O.mknod(y,S,P),0},doReadlink:function(y,S,P){if(P<=0)return-28;var j=O.readlink(y),ht=Math.min(P,rn(j)),vt=Wt[S+ht];return function Ve(y,S,P){return Ue(y,le,S,P)}(j,S,P+1),Wt[S+ht]=vt,ht},doAccess:function(y,S){if(-8&S)return-28;var j=O.lookupPath(y,{follow:!0}).node;if(!j)return-44;var ht="";return 4&S&&(ht+="r"),2&S&&(ht+="w"),1&S&&(ht+="x"),ht&&O.nodePermissions(j,ht)?-2:0},doDup:function(y,S,P){var j=O.getStream(P);return j&&O.close(j),O.open(y,S,0,P,P).fd},doReadv:function(y,S,P,j){for(var ht=0,vt=0;vt<P;vt++){var Bt=ee[S+(8*vt+4)>>2],ne=O.read(y,Wt,ee[S+8*vt>>2],Bt,j);if(ne<0)return-1;if(ht+=ne,ne<Bt)break}return ht},doWritev:function(y,S,P,j){for(var ht=0,vt=0;vt<P;vt++){var ne=O.write(y,Wt,ee[S+8*vt>>2],ee[S+(8*vt+4)>>2],j);if(ne<0)return-1;ht+=ne}return ht},varargs:void 0,get:function(){return re.varargs+=4,ee[re.varargs-4>>2]},getStr:function(y){return Ae(y)},getStreamFromFD:function(y){var S=O.getStream(y);if(!S)throw new O.ErrnoError(8);return S},get64:function(y,S){return y}};var Vn=[];function $e(y){try{return qt.grow(y-Tt.byteLength+65535>>>16),ze(qt.buffer),1}catch{}}var Cn={};function li(){if(!li.strings){var S={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Jt||"./this.program"};for(var P in Cn)void 0===Cn[P]?delete S[P]:S[P]=Cn[P];var j=[];for(var P in S)j.push(P+"="+S[P]);li.strings=j}return li.strings}var Mn=function(y,S,P,j){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=O.nextInode++,this.name=S,this.mode=P,this.node_ops={},this.stream_ops={},this.rdev=j};function zi(y,S,P){var j=P>0?P:rn(y)+1,ht=new Array(j),vt=Ue(y,ht,0,ht.length);return S&&(ht.length=vt),ht}Object.defineProperties(Mn.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(y){y?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(y){y?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return O.isDir(this.mode)}},isDevice:{get:function(){return O.isChrdev(this.mode)}}}),O.FSNode=Mn,O.staticInit();var en={A:function Kt(y,S){return function Ut(y,S){var P;if(0===y)P=Date.now();else{if(1!==y&&4!==y)return Pt(28),-1;P=bt()}return ee[S>>2]=P/1e3|0,ee[S+4>>2]=P%1e3*1e3*1e3|0,0}(y,S)},B:function Ce(y,S){try{return y=re.getStr(y),re.doAccess(y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},h:function be(y,S,P){re.varargs=P;try{var j=re.getStreamFromFD(y);switch(S){case 0:return(ht=re.get())<0?-28:O.open(j.path,j.flags,0,ht).fd;case 1:case 2:case 6:case 7:return 0;case 3:return j.flags;case 4:var ht=re.get();return j.flags|=ht,0;case 5:return ht=re.get(),me[ht+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Pt(28),-1}}catch(Bt){if(typeof O>"u"||!(Bt instanceof O.ErrnoError))throw Bt;return-Bt.errno}},x:function Ke(y,S){try{var P=re.getStreamFromFD(y);return re.doStat(O.stat,P.path,S)}catch(j){if(typeof O>"u"||!(j instanceof O.ErrnoError))throw j;return-j.errno}},u:function Me(y,S,P,j){try{S=re.getStr(S);var ht=256&j,vt=4096&j;return j&=-4353,S=re.calculateAt(y,S,vt),re.doStat(ht?O.lstat:O.stat,S,P)}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return-At.errno}},y:function Fe(y,S,P){re.varargs=P;try{var j=re.getStreamFromFD(y);switch(S){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return j.tty?0:-59;case 21519:if(!j.tty)return-59;var ht=re.get();return ee[ht>>2]=0,0;case 21520:return j.tty?-28:-59;case 21531:return ht=re.get(),O.ioctl(j,S,ht);default:an("bad ioctl syscall "+S)}}catch(vt){if(typeof O>"u"||!(vt instanceof O.ErrnoError))throw vt;return-vt.errno}},k:function pe(y,S,P,j,ht,vt){try{return function oe(y,S,P,j,ht,vt){vt<<=12;var At,Bt=!1;if(0!=(16&j)&&y%65536!=0)return-28;if(0!=(32&j)){if(!(At=$t(S)))return-48;Bt=!0}else{var ne=O.getStream(ht);if(!ne)return-8;var Le=O.mmap(ne,y,S,vt,P,j);At=Le.ptr,Bt=Le.allocated}return re.mappings[At]={malloc:At,len:S,allocated:Bt,fd:ht,prot:P,flags:j,offset:vt},At}(y,S,P,j,ht,vt)}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return-At.errno}},j:function fn(y,S){try{return function Re(y,S){var P=re.mappings[y];if(0===S||!P)return-28;if(S===P.len){var j=O.getStream(P.fd);j&&2&P.prot&&re.doMsync(y,j,S,P.flags,P.offset),re.mappings[y]=null,P.allocated&&xt(P.malloc)}return 0}(y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},e:function mn(y,S,P){re.varargs=P;try{var j=re.getStr(y),ht=P?re.get():0;return O.open(j,S,ht).fd}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return-At.errno}},v:function je(y,S){try{return y=re.getStr(y),re.doStat(O.stat,y,S)}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return-P.errno}},z:function Xe(y){try{return y=re.getStr(y),O.unlink(y),0}catch(S){if(typeof O>"u"||!(S instanceof O.ErrnoError))throw S;return-S.errno}},r:function wn(){throw"longjmp"},q:function Zn(){an("")},C:function Ni(y,S,P){var j=function Yn(y,S){var P;for(Vn.length=0,S>>=2;P=le[y++];){var j=P<105;j&&1&S&&S++,Vn.push(j?Ze[S++>>1]:ee[S]),++S}return Vn}(S,P);return Q[y].apply(null,j)},o:function ce(y,S,P){le.copyWithin(y,S,S+P)},p:function vn(y){var S=le.length,P=2147483648;if((y>>>=0)>P)return!1;for(var j=1;j<=4;j*=2){var ht=S*(1+.2/j);if(ht=Math.min(ht,y+100663296),$e(Math.min(P,un(Math.max(y,ht),65536))))return!0}return!1},s:function xi(y,S){var P=0;return li().forEach(function(j,ht){var vt=S+P;ee[y+4*ht>>2]=vt,function xe(y,S,P){for(var j=0;j<y.length;++j)Wt[S++>>0]=y.charCodeAt(j);P||(Wt[S>>0]=0)}(j,vt),P+=j.length+1}),0},t:function Qn(y,S){var P=li();ee[y>>2]=P.length;var j=0;return P.forEach(function(ht){j+=ht.length+1}),ee[S>>2]=j,0},a:function Bi(y){!function Hi(y,S){!function di(y){(function Si(){return Vt||!1})()||(E.onExit&&E.onExit(y),_e=!0),ue(y,new gn(y))}(y)}(y)},d:function jn(y){try{var S=re.getStreamFromFD(y);return O.close(S),0}catch(P){if(typeof O>"u"||!(P instanceof O.ErrnoError))throw P;return P.errno}},i:function ci(y,S,P,j){try{var ht=re.getStreamFromFD(y),vt=re.doReadv(ht,S,P);return ee[j>>2]=vt,0}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return At.errno}},n:function He(y,S,P,j,ht){try{var vt=re.getStreamFromFD(y),Bt=4294967296*P+(S>>>0),ne=9007199254740992;return Bt<=-ne||Bt>=ne?-61:(O.llseek(vt,Bt,j),z=[vt.position>>>0,(pn=vt.position,+Math.abs(pn)>=1?pn>0?(0|Math.min(+Math.floor(pn/4294967296),4294967295))>>>0:~~+Math.ceil((pn-+(~~pn>>>0))/4294967296)>>>0:0)],ee[ht>>2]=z[0],ee[ht+4>>2]=z[1],vt.getdents&&0===Bt&&0===j&&(vt.getdents=null),0)}catch(Le){if(typeof O>"u"||!(Le instanceof O.ErrnoError))throw Le;return Le.errno}},g:function Ye(y,S,P,j){try{var ht=re.getStreamFromFD(y),vt=re.doWritev(ht,S,P);return ee[j>>2]=vt,0}catch(At){if(typeof O>"u"||!(At instanceof O.ErrnoError))throw At;return At.errno}},c:function ui(){return ke},w:function Ji(y){var S=Date.now();return ee[y>>2]=S/1e3|0,ee[y+4>>2]=S%1e3*1e3|0,0},l:function we(y,S,P,j,ht,vt,At){var Bt=Zt();try{return A(y)(S,P,j,ht,vt,At)}catch(ne){if(ae(Bt),ne!==ne+0&&"longjmp"!==ne)throw ne;De(1,0)}},m:function sn(y,S){var P=Zt();try{A(y)(S)}catch(j){if(ae(P),j!==j+0&&"longjmp"!==j)throw j;De(1,0)}},b:function hi(y){!function(y){ke=y}(y)},f:function Ui(y){var S=Date.now()/1e3|0;return y&&(ee[y>>2]=S),S}};(function Pn(){var y={a:en};function S(At,Bt){E.asm=At.exports,ze((qt=E.asm.D).buffer),Tn=E.asm.M,function Qi(y){Oi.unshift(y)}(E.asm.E),_n()}function P(At){S(At.instance)}function j(At){return function Ri(){return jt||"function"!=typeof fetch?Promise.resolve().then(function(){return Te(kn)}):fetch(kn,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+kn+"'";return y.arrayBuffer()}).catch(function(){return Te(kn)})}().then(function(Bt){return WebAssembly.instantiate(Bt,y)}).then(function(Bt){return Bt}).then(At,function(Bt){he("failed to asynchronously prepare wasm: "+Bt),an(Bt)})}if(On(),E.instantiateWasm)try{return E.instantiateWasm(y,S)}catch(At){return he("Module.instantiateWasm callback failed with error: "+At),!1}return function ht(){return jt||"function"!=typeof WebAssembly.instantiateStreaming||oi(kn)||"function"!=typeof fetch?j(P):fetch(kn,{credentials:"same-origin"}).then(function(At){return WebAssembly.instantiateStreaming(At,y).then(P,function(ne){return he("wasm streaming compile failed: "+ne),he("falling back to ArrayBuffer instantiation"),j(P)})})}().catch(St),{}})(),E.___wasm_call_ctors=function(){return(E.___wasm_call_ctors=E.asm.E).apply(null,arguments)};var Ti=E._emscripten_bind_VoidPtr___destroy___0=function(){return(Ti=E._emscripten_bind_VoidPtr___destroy___0=E.asm.F).apply(null,arguments)},In=E._emscripten_bind_Graphviz_Graphviz_2=function(){return(In=E._emscripten_bind_Graphviz_Graphviz_2=E.asm.G).apply(null,arguments)},b=E._emscripten_bind_Graphviz_version_0=function(){return(b=E._emscripten_bind_Graphviz_version_0=E.asm.H).apply(null,arguments)},k=E._emscripten_bind_Graphviz_lastError_0=function(){return(k=E._emscripten_bind_Graphviz_lastError_0=E.asm.I).apply(null,arguments)},V=E._emscripten_bind_Graphviz_layout_3=function(){return(V=E._emscripten_bind_Graphviz_layout_3=E.asm.J).apply(null,arguments)},rt=E._emscripten_bind_Graphviz_createFile_2=function(){return(rt=E._emscripten_bind_Graphviz_createFile_2=E.asm.K).apply(null,arguments)},ut=E._emscripten_bind_Graphviz___destroy___0=function(){return(ut=E._emscripten_bind_Graphviz___destroy___0=E.asm.L).apply(null,arguments)};E._malloc=function(){return(E._malloc=E.asm.N).apply(null,arguments)};var Pe,xt=E._free=function(){return(xt=E._free=E.asm.O).apply(null,arguments)},Ot=E.___errno_location=function(){return(Ot=E.___errno_location=E.asm.P).apply(null,arguments)},Zt=E.stackSave=function(){return(Zt=E.stackSave=E.asm.Q).apply(null,arguments)},ae=E.stackRestore=function(){return(ae=E.stackRestore=E.asm.R).apply(null,arguments)},De=E._setThrew=function(){return(De=E._setThrew=E.asm.S).apply(null,arguments)},Qe=E._memalign=function(){return(Qe=E._memalign=E.asm.T).apply(null,arguments)};function gn(y){this.name="ExitStatus",this.message="Program terminated with exit("+y+")",this.status=y}function Jn(y){function S(){Pe||(Pe=!0,E.calledRun=!0,!_e&&(function Pi(){!E.noFSInit&&!O.init.initialized&&O.init(),O.ignorePermissions=!1,ct(Oi)}(),pt(E),E.onRuntimeInitialized&&E.onRuntimeInitialized(),function Mi(){if(E.postRun)for("function"==typeof E.postRun&&(E.postRun=[E.postRun]);E.postRun.length;)y=E.postRun.shift(),gi.unshift(y);var y;ct(gi)}()))}de>0||(function tr(){if(E.preRun)for("function"==typeof E.preRun&&(E.preRun=[E.preRun]);E.preRun.length;)y=E.preRun.shift(),si.unshift(y);var y;ct(si)}(),de>0)||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),S()},1)):S())}if(En=function y(){Pe||Jn(),Pe||(En=y)},E.run=Jn,E.preInit)for("function"==typeof E.preInit&&(E.preInit=[E.preInit]);E.preInit.length>0;)E.preInit.pop()();function on(){}function Fn(y){return(y||on).__cache__}function pi(y,S){var P=Fn(S),j=P[y];return j||((j=Object.create((S||on).prototype)).ptr=y,P[y]=j)}Jn(),(on.prototype=Object.create(on.prototype)).constructor=on,on.prototype.__class__=on,on.__cache__={},E.WrapperObject=on,E.getCache=Fn,E.wrapPointer=pi,E.castObject=function er(y,S){return pi(y.ptr,S)},E.NULL=pi(0),E.destroy=function Gn(y){if(!y.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";y.__destroy__(),delete Fn(y.__class__)[y.ptr]},E.compare=function _a(y,S){return y.ptr===S.ptr},E.getPointer=function za(y){return y.ptr},E.getClass=function va(y){return y.__class__};var An={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(An.needed){for(var y=0;y<An.temps.length;y++)E._free(An.temps[y]);An.temps.length=0,E._free(An.buffer),An.buffer=0,An.size+=An.needed,An.needed=0}An.buffer||(An.size+=128,An.buffer=E._malloc(An.size),ye(An.buffer)),An.pos=0},alloc:function(y,S){ye(An.buffer);var ht,j=y.length*S.BYTES_PER_ELEMENT;return An.pos+(j=j+7&-8)>=An.size?(ye(j>0),An.needed+=j,ht=E._malloc(j),An.temps.push(ht)):(ht=An.buffer+An.pos,An.pos+=j),ht},copy:function(y,S,P){switch(P>>>=0,S.BYTES_PER_ELEMENT){case 2:P>>>=1;break;case 4:P>>>=2;break;case 8:P>>>=3}for(var ht=0;ht<y.length;ht++)S[P+ht]=y[ht]}};function mr(y){if("string"==typeof y){var S=zi(y),P=An.alloc(S,Wt);return An.copy(S,Wt,P),P}return y}function Ki(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Nn(y,S){y&&"object"==typeof y&&(y=y.ptr),S&&"object"==typeof S&&(S=S.ptr),this.ptr=In(y,S),Fn(Nn)[this.ptr]=this}return(Ki.prototype=Object.create(on.prototype)).constructor=Ki,Ki.prototype.__class__=Ki,Ki.__cache__={},E.VoidPtr=Ki,Ki.prototype.__destroy__=Ki.prototype.__destroy__=function(){Ti(this.ptr)},(Nn.prototype=Object.create(on.prototype)).constructor=Nn,Nn.prototype.__class__=Nn,Nn.__cache__={},E.Graphviz=Nn,Nn.prototype.version=Nn.prototype.version=function(){return Ae(b(this.ptr))},Nn.prototype.lastError=Nn.prototype.lastError=function(){return Ae(k(this.ptr))},Nn.prototype.layout=Nn.prototype.layout=function(y,S,P){var j=this.ptr;return An.prepare(),y=y&&"object"==typeof y?y.ptr:mr(y),S=S&&"object"==typeof S?S.ptr:mr(S),P=P&&"object"==typeof P?P.ptr:mr(P),Ae(V(j,y,S,P))},Nn.prototype.createFile=Nn.prototype.createFile=function(y,S){var P=this.ptr;An.prepare(),y=y&&"object"==typeof y?y.ptr:mr(y),S=S&&"object"==typeof S?S.ptr:mr(S),rt(P,y,S)},Nn.prototype.__destroy__=Nn.prototype.__destroy__=function(){ut(this.ptr)},R.ready}}();X.exports=q}(M);var Z=Object.freeze(c({__proto__:null,default:M.exports},[M.exports])),H=function(){return H=Object.assign||function(X){for(var W,q=1,Y=arguments.length;q<Y;q++)for(var R in W=arguments[q])Object.prototype.hasOwnProperty.call(W,R)&&(X[R]=W[R]);return X},H.apply(this,arguments)},G=function(X,W,q){if(q||2===arguments.length)for(var E,Y=0,R=W.length;Y<R;Y++)(E||!(Y in W))&&(E||(E=Array.prototype.slice.call(W,0,Y)),E[Y]=W[Y]);return X.concat(E||Array.prototype.slice.call(W))};function nt(X){return{path:X.path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'.concat(X.width,'" height="').concat(X.height,'"></svg>')}}function st(X,W){var q=H({images:[],files:[]},W);G(G([],q.files,!0),function et(X){return X.map(nt)}(q.images),!0).forEach(function(Y){return X.createFile(Y.path,Y.data)})}var $={layout:function(X,W,q,Y){return void 0===W&&(W="svg"),void 0===q&&(q="dot"),X?u(Z,Y?.wasmFolder,Y?.wasmBinary).then(function(R){var E=new R.Graphviz(void 0!==Y?.yInvert&&Y?.yInvert,void 0!==Y?.nop?Y?.nop:0);st(E,Y);var pt=E.layout(X,W,q);if(R.destroy(E),!pt)throw new Error(R.Graphviz.prototype.lastError());return pt}):Promise.resolve("")},circo:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"circo",q)},dot:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"dot",q)},fdp:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"fdp",q)},sfdp:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"sfdp",q)},neato:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"neato",q)},osage:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"osage",q)},patchwork:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"patchwork",q)},twopi:function(X,W,q){return void 0===W&&(W="svg"),this.layout(X,W,"twopi",q)}},it=function(){function X(W){this._wasm=W}return X.prototype.layout=function(W,q,Y,R){if(void 0===q&&(q="svg"),void 0===Y&&(Y="dot"),!W)return"";var E=new this._wasm.Graphviz(R?.yInvert?1:0,R?.nop?R?.nop:0);st(E,R);var pt=E.layout(W,q,Y);if(this._wasm.destroy(E),!pt)throw new Error(this._wasm.Graphviz.prototype.lastError());return pt},X.prototype.circo=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"circo",Y)},X.prototype.dot=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"dot",Y)},X.prototype.fdp=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"fdp",Y)},X.prototype.sfdp=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"sfdp",Y)},X.prototype.neato=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"neato",Y)},X.prototype.osage=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"osage",Y)},X.prototype.patchwork=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"patchwork",Y)},X.prototype.twopi=function(W,q,Y){return void 0===q&&(q="svg"),this.layout(W,q,"twopi",Y)},X}();s.GraphvizSync=it,s.StackElement=g,s.StackParser=C,s.expatVersion=function I(X,W){return u(m,X,W).then(function(q){return q.CExpat.prototype.version()})},s.graphviz=$,s.graphvizSync=function at(X,W){return u(Z,X,W).then(function(q){return new it(q)})},s.graphvizVersion=function K(X,W){return u(Z,X,W).then(function(q){return q.Graphviz.prototype.version()})},s.parse=B,s.wasmFolder=l,Object.defineProperty(s,"__esModule",{value:!0})}(D)},82745:(w,D,s)=>{"use strict";s.r(D),s.d(D,{AdminModule:()=>Dy});var c={};s.r(c),s.d(c,{forceCenter:()=>ud,forceCollide:()=>Vo,forceLink:()=>Yo,forceManyBody:()=>Xo,forceRadial:()=>Rd,forceSimulation:()=>Wo,forceX:()=>Bd,forceY:()=>Zd});var x={};s.r(x),s.d(x,{dispatch:()=>ba.Z});var _={};s.r(_),s.d(_,{interval:()=>Gd,now:()=>or.zO,timeout:()=>$a.Z,timer:()=>or.HT,timerFlush:()=>or.R8});var m=s(36895),p=s(94364),t=s(94650),d=s(77968),l=s(97392),h=s(61283),f=s(4235),u=s(89383);const g=function(){return{color:"black"}};let C=(()=>{class n{constructor(e){this.sideMenuService=e}ngOnInit(){this.sideMenuService.setAdminItems([])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-page"]],decls:7,vars:5,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","admin-theme"],[1,"page-title","d-flex"],["svgIcon","perun-perun-admin",1,"perun-icon","icon-scale",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.TgZ(2,"h1",1),t._UZ(3,"mat-icon",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(4,g)),t.xp6(1),t.hij(" ",t.lcZ(5,2,"ADMIN.TITLE")," "))},dependencies:[m.PC,l.Hw,h.A,f.W,u.X$]}),n})();var L=s(71135);let I=(()=>{class n{constructor(){this.navItems=[{cssIcon:"perun-attributes",url:"/admin/attributes",label:"MENU_ITEMS.ADMIN.ATTRIBUTES",style:"admin-btn"},{cssIcon:"perun-user",url:"/admin/users",label:"MENU_ITEMS.ADMIN.USERS",style:"admin-btn"},{cssIcon:"perun-owner-grey",url:"/admin/owners",label:"MENU_ITEMS.ADMIN.OWNERS",style:"admin-btn"},{cssIcon:"perun-service",url:"/admin/services",label:"MENU_ITEMS.ADMIN.SERVICES",style:"admin-btn"},{cssIcon:"perun-preview",url:"/admin/visualizer",label:"MENU_ITEMS.ADMIN.VISUALIZER",style:"admin-btn"},{cssIcon:"perun-external-sources",url:"/admin/ext_sources",label:"MENU_ITEMS.ADMIN.EXT_SOURCES",style:"admin-btn"},{cssIcon:"perun-audit-log",url:"/admin/audit_log",label:"MENU_ITEMS.ADMIN.AUDIT_LOG",style:"admin-btn"},{cssIcon:"perun-consent-hubs",url:"/admin/consent_hubs",label:"MENU_ITEMS.ADMIN.CONSENT_HUBS",style:"admin-btn"},{cssIcon:"perun-searcher",url:"/admin/searcher",label:"MENU_ITEMS.ADMIN.SEARCHER",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.navItems)("size","small"))},dependencies:[L.L]}),n})();var B=s(95017),M=s(65412),F=s(30671),Z=s(35382),H=s(32105),G=s(4859),nt=s(51572),et=s(98380);function st(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function K(n,r){1&n&&t._UZ(0,"th",16)}function $(n,r){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function it(n,r){1&n&&t._UZ(0,"tr",18)}function at(n,r){1&n&&t._UZ(0,"tr",19)}function X(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,K,1,0,"th",11),t.YNc(10,$,2,1,"td",12),t.BQk(),t.YNc(11,it,1,0,"tr",13),t.YNc(12,at,1,0,"tr",14),t.qZA(),t.TgZ(13,"perun-web-apps-alert",15),t._uU(14),t.ALo(15,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE2")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.hij(" ",t.lcZ(15,10,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.WARNING")," ")}}let W=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.attributesManager=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.dataSource=new F.by(this.data.attributes)}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0;const e=[];for(const i of this.data.attributes)e.push(i.id);this.attributesManager.deleteAttributeDefinitions(e).subscribe(()=>{this.translate.get("DIALOGS.DELETE_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-attribute-definition-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","","data-cy","confirm-delete-attr-definition-button",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",1,"mt-3"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,st,1,0,"mat-spinner",1),t.YNc(5,X,16,12,"div",2),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onSubmit()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},dependencies:[m.O5,G.lW,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,M.uh,M.xY,M.H8,nt.Ou,et.w,u.X$]}),n})();var q=s(24006),Y=s(78372),R=s(63900),E=s(61135),pt=s(69751),St=s(38421),Mt=s(75797),Et=s(60515),Jt=s(25403),ue=s(63269);function wt(...n){const r=(0,ue.jO)(n),e=(0,Mt.k)(n);return e.length?new pt.y(i=>{let a=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{a=o=null});for(let v=0;!i.closed&&v<e.length;v++)(0,St.Xf)(e[v]).subscribe((0,Jt.x)(i,T=>{if(a[v].push(T),a.every(N=>N.length)){const N=a.map(U=>U.shift());i.next(r?r(...N):N),a.some((U,tt)=>!U.length&&o[tt])&&i.complete()}},()=>{o[v]=!0,!a[v].length&&i.complete()}));return()=>{a=o=null}}):Et.E}var yt=s(39646),Nt=s(19516),_t=s(3238),Xt=s(39349),Ft=s(59549),Ht=s(284),he=s(84385),ke=s(3848),Ie=s(23123);function Lt(n,r){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.ALo(2,"displayedRole"),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function jt(n,r){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}let Vt=(()=>{class n{constructor(e){this.attrRightsService=e,this.policyRemoved=new t.vpe,this.roles=this.attrRightsService.getRoles()}ngOnInit(){this.selectedRole=new E.X(this.policy.role),this.objects=this.selectedRole.pipe((0,R.w)(e=>this.attrRightsService.getObjects(e)))}changeRole(e){this.selectedRole.next(e.value),this.policy.object="None"}remove(){this.policyRemoved.emit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-item"]],inputs:{policy:"policy"},outputs:{policyRemoved:"policyRemoved"},decls:14,vars:14,consts:[[1,"flex-row"],[1,"grow-item"],[3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","",1,"close-button",3,"click"],["inline","true"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),t.NdJ("ngModelChange",function(o){return i.policy.role=o})("selectionChange",function(o){return i.changeRole(o)}),t.ALo(3,"translate"),t.YNc(4,Lt,3,4,"mat-option",3),t.ALo(5,"async"),t.qZA()(),t.TgZ(6,"mat-form-field")(7,"mat-select",4),t.NdJ("ngModelChange",function(o){return i.policy.object=o}),t.ALo(8,"translate"),t.YNc(9,jt,2,2,"mat-option",3),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"button",5),t.NdJ("click",function(){return i.remove()}),t.TgZ(12,"mat-icon",6),t._uU(13,"remove_circle"),t.qZA()()()),2&e&&(t.xp6(2),t.s9C("placeholder",t.lcZ(3,6,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ROLE")),t.Q6J("ngModel",i.policy.role),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,8,i.roles)),t.xp6(3),t.s9C("placeholder",t.lcZ(8,10,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.ENTITY")),t.Q6J("ngModel",i.policy.object),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,12,i.objects)))},dependencies:[m.sg,q.JJ,q.On,l.Hw,G.lW,Ft.KE,_t.ey,he.gD,m.Ov,u.X$,Ie.i],styles:[".flex-row[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;background:white;border-radius:1em;padding:1em 1em 0}.grow-item[_ngcontent-%COMP%]{flex-grow:2;margin:0 1em}.close-button[_ngcontent-%COMP%]{position:absolute;font-size:1.3em;top:-15px;right:-15px;z-index:100}"]}),n})();function qt(n,r){1&n&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.AND")," "))}function _e(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"perun-web-apps-attribute-rights-item",7),t.NdJ("policyRemoved",function(){const o=t.CHM(e).index,v=t.oxw(2);return t.KtG(v.removePolicy(o))}),t.qZA(),t.YNc(2,qt,3,3,"div",8),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw(2);t.xp6(1),t.Q6J("policy",e),t.xp6(1),t.Q6J("ngIf",i!==a.collection.policies.length-1)}}function ye(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,_e,3,2,"div",3),t.qZA(),t.TgZ(3,"div",4)(4,"button",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeCollection())}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addPolicy())}),t.TgZ(8,"mat-icon"),t._uU(9,"add_circle"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.collection.policies)}}let Ee=(()=>{class n{constructor(){this.collectionRemoved=new t.vpe}addPolicy(){this.collection.policies.push({id:-1,role:null,object:null,policyCollectionId:this.collection.id})}removePolicy(e){this.collection.policies.splice(e,1),0===this.collection.policies.length&&this.removeCollection()}removeCollection(){this.collectionRemoved.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-collection"]],inputs:{collection:"collection"},outputs:{collectionRemoved:"collectionRemoved"},decls:1,vars:1,consts:[["class","collection",4,"ngIf"],[1,"collection"],[1,"column","role-selection"],[4,"ngFor","ngForOf"],[1,"column","controls"],["mat-icon-button","",3,"click"],["color","accent","mat-icon-button","",3,"click"],[3,"policy","policyRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,i){1&e&&t.YNc(0,ye,10,1,"div",0),2&e&&t.Q6J("ngIf",i.collection)},dependencies:[m.sg,m.O5,l.Hw,G.lW,Vt,u.X$],styles:[".collection[_ngcontent-%COMP%]{background-color:#0000001a;padding:1em;border-radius:1em;margin-top:1em;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1em}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}.role-selection[_ngcontent-%COMP%]{flex-grow:2}.controls[_ngcontent-%COMP%]{align-items:flex-end;justify-content:center}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em}"]}),n})();function Oe(n,r){1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.OR")," "))}function Ae(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"perun-web-apps-attribute-rights-collection",5),t.NdJ("collectionRemoved",function(){const o=t.CHM(e).index,v=t.oxw();return t.KtG(v.removeCollection(o))}),t.qZA(),t.YNc(2,Oe,3,3,"div",6),t.qZA()}if(2&n){const e=r.$implicit,i=r.index,a=t.oxw();t.xp6(1),t.Q6J("collection",e.action===a.action?e:null),t.xp6(1),t.Q6J("ngIf",i!==a.lastIndex&&e.action===a.action)}}let Ue=(()=>{class n{ngOnChanges(){this.lastIndex=this.findLastIndex()}addCollection(){this.collections.push({id:-1,attributeId:this.attributeId,action:this.action,policies:[{id:-1,role:null,object:null,policyCollectionId:-1}]}),this.lastIndex=this.findLastIndex()}removeCollection(e){this.collections.splice(e,1),this.lastIndex=this.findLastIndex()}findLastIndex(){let e=0;for(let i=0;i<this.collections.length;i++)this.collections[i].action===this.action&&(e=i);return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-tab"]],inputs:{attributeId:"attributeId",collections:"collections",action:"action"},features:[t.TTD],decls:8,vars:4,consts:[["alert_type","info"],[4,"ngFor","ngForOf"],[1,"button-container"],["color","accent","mat-icon-button","",1,"add-button",3,"click"],["inline","true"],[3,"collection","collectionRemoved"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(e,i){1&e&&(t.TgZ(0,"perun-web-apps-alert",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Ae,3,2,"div",1),t.TgZ(4,"div",2)(5,"button",3),t.NdJ("click",function(){return i.addCollection()}),t.TgZ(6,"mat-icon",4),t._uU(7,"add_circle"),t.qZA()()()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS.INFO"),"\n"),t.xp6(2),t.Q6J("ngForOf",i.collections))},dependencies:[m.sg,m.O5,et.w,l.Hw,G.lW,Ee,u.X$],styles:[".add-button[_ngcontent-%COMP%]{font-size:2em}.divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1em;font-weight:700}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1em}"]}),n})();function Ve(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate")),2&n){const e=t.oxw().$implicit;t.hij(" ",t.lcZ(1,1,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_RIGHTS."+e)," ")}}function rn(n,r){if(1&n&&(t.TgZ(0,"mat-tab"),t.YNc(1,Ve,2,3,"ng-template",1),t._UZ(2,"perun-web-apps-attribute-rights-tab",2),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Q6J("attributeId",null==i.attDef?null:i.attDef.id)("collections",i.collections)("action",e)}}let xe=(()=>{class n{constructor(){this.collections=[],this.actionTabs=["READ","WRITE"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-rights-tab-group"]],inputs:{attDef:"attDef",collections:"collections"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matTabLabel",""],[3,"attributeId","collections","action"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group"),t.YNc(1,rn,3,3,"mat-tab",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.actionTabs))},dependencies:[m.sg,ke.SP,ke.uD,ke.uX,Ue,u.X$]}),n})();var un=s(10266),Tt=s(90455),Wt=s(4765);function le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.ALo(1,"translate"),t.TgZ(2,"mat-slide-toggle",2),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.attDef.unique=a)}),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&n){const e=r.ngIf,i=t.oxw();t.s9C("matTooltip",t.lcZ(1,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.TOOLTIP")),t.Q6J("matTooltipDisabled",!e.disable),t.xp6(2),t.Q6J("ngModel",i.attDef.unique)("disabled",e.disable),t.xp6(1),t.hij(" ",t.lcZ(4,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_UNIQUE_TOGGLE.UNIQUE")," ")}}const me=function(n){return{disable:n}};let ee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-unique-toggle"]],inputs:{attDef:"attDef"},decls:2,vars:5,consts:[["class","unique-toggle-container","matTooltipPosition","above",3,"matTooltipDisabled","matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"unique-toggle-container",3,"matTooltipDisabled","matTooltip"],["color","accent","labelPosition","before",3,"ngModel","disabled","ngModelChange"]],template:function(e,i){1&e&&(t.YNc(0,le,5,9,"div",0),t.ALo(1,"disableUniqueAttribute")),2&e&&t.Q6J("ngIf",t.VKq(3,me,t.lcZ(1,1,i.attDef)))},dependencies:[m.O5,q.JJ,q.On,un.gM,Tt.Rr,u.X$,Wt.b],styles:[".unique-toggle-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:1em 0;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;font-size:1.125rem}"]}),n})(),Ze=(()=>{class n{constructor(){this.readOperation=!1,this.writeOperation=!1,this.readOperationChanged=new t.vpe,this.writeOperationChanged=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["perun-web-apps-attribute-critical-operations-toggles"]],inputs:{readOperation:"readOperation",writeOperation:"writeOperation"},outputs:{readOperationChanged:"readOperationChanged",writeOperationChanged:"writeOperationChanged"},decls:10,vars:11,consts:[["color","accent","labelPosition","before",1,"toggle-font",3,"ngModel","ngModelChange","toggleChange"],["alert_type","info"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-slide-toggle",0),t.NdJ("ngModelChange",function(o){return i.readOperation=o})("toggleChange",function(){return i.readOperationChanged.emit(!i.readOperation)}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"mat-slide-toggle",0),t.NdJ("ngModelChange",function(o){return i.writeOperation=o})("toggleChange",function(){return i.writeOperationChanged.emit(!i.writeOperation)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"perun-web-apps-alert",1),t._uU(8),t.ALo(9,"translate"),t.qZA()),2&e&&(t.Q6J("ngModel",i.readOperation),t.xp6(1),t.hij(" ",t.lcZ(2,5,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.READ"),"\n"),t.xp6(3),t.Q6J("ngModel",i.writeOperation),t.xp6(1),t.hij(" ",t.lcZ(6,7,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.WRITE"),"\n"),t.xp6(3),t.hij(" ",t.lcZ(9,9,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTE_CRITICAL_OPERATIONS_TOGGLE.INFO"),"\n"))},dependencies:[q.JJ,q.On,et.w,Tt.Rr,u.X$],styles:[".toggle-font[_ngcontent-%COMP%]{font-size:1.125rem}"]}),n})(),ze=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(".")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"attributeTypeClean",type:n,pure:!0}),n})();function Tn(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function si(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Oi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function gi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function _i(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Si(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function tr(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function Pi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Mi(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function vi(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function Qi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"form",9)(2,"mat-form-field"),t._UZ(3,"input",10),t.ALo(4,"translate"),t.YNc(5,si,3,3,"mat-error",11),t.qZA(),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",12),t.ALo(8,"translate"),t.YNc(9,Oi,3,3,"mat-error",11),t.qZA(),t.TgZ(10,"mat-form-field")(11,"textarea",13),t.ALo(12,"translate"),t._uU(13,"        "),t.qZA(),t.YNc(14,gi,3,3,"mat-error",11),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-select",14),t.ALo(17,"translate"),t.YNc(18,_i,2,2,"mat-option",15),t.qZA(),t.YNc(19,Si,3,3,"mat-error",11),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-select",16),t.ALo(22,"translate"),t.YNc(23,tr,2,2,"mat-option",15),t.qZA(),t.YNc(24,Pi,3,3,"mat-error",11),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-select",17),t.ALo(27,"translate"),t.YNc(28,Mi,3,4,"mat-option",15),t.qZA(),t.YNc(29,vi,3,3,"mat-error",11),t.qZA()(),t._UZ(30,"perun-web-apps-attribute-unique-toggle",18),t.ALo(31,"async"),t.TgZ(32,"perun-web-apps-attribute-critical-operations-toggles",19),t.NdJ("readOperationChanged",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.finalReadOperations=a)})("writeOperationChanged",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.finalWriteOperations=a)}),t.qZA(),t._UZ(33,"perun-web-apps-attribute-rights-tab-group",20),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,18,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FRIENDLY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","friendlyName")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,20,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","displayName")),t.xp6(2),t.s9C("placeholder",t.lcZ(12,22,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(2),t.s9C("placeholder",t.lcZ(17,24,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ENTITY")),t.xp6(2),t.Q6J("ngForOf",e.entities),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","entity")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,26,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DEFINITION")),t.xp6(2),t.Q6J("ngForOf",e.definitionTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","definitionType")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,28,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VALUE_TYPE")),t.xp6(2),t.Q6J("ngForOf",e.valueTypes),t.xp6(1),t.Q6J("ngIf",e.attributeControl.hasError("required","valueType")),t.xp6(1),t.Q6J("attDef",t.lcZ(31,30,e.attDef)),t.xp6(3),t.Q6J("collections",e.collections)}}let Fi=(()=>{class n{constructor(e,i,a,o,v,T,N){this.dialogRef=e,this.formBuilder=i,this.attributeService=a,this.attributeRightsService=o,this.notificator=v,this.translate=T,this.uniqueAttPipe=N,this.loading=!1,this.attributeControl=this.formBuilder.group({friendlyName:["",q.kI.required],displayName:["",q.kI.required],description:["",q.kI.required],entity:["",q.kI.required],definitionType:["",q.kI.required],valueType:["",q.kI.required]}),this.entities=["facility","resource","group","group_resource","host","member","member_group","member_resource","user","ues","user_facility","vo","entityless"],this.definitionTypes=["def","opt","virt","core"],this.valueTypes=["java.lang.String","java.lang.Integer","java.lang.Boolean","java.util.Array","java.util.LinkedHashMap"],this.attDef=new E.X({id:0,beanName:"",namespace:"",unique:!1}),this.collections=[],this.attributeControl.valueChanges.pipe((0,Y.b)(200)).subscribe(U=>{this.setAttribute(U)})}submit(){this.loading=!0,this.attributeService.createAttributeDefinition({attribute:this.attDef.getValue()}).pipe((0,R.w)(e=>(this.attDefCreated=e,wt((0,yt.of)(e.id),(0,yt.of)(this.collections)))),this.attributeRightsService.addAttributeId(),this.attributeRightsService.filterNullInPolicy(),(0,R.w)(e=>this.attributeService.setAttributePolicyCollections({policyCollections:e})),(0,R.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalReadOperations,!1,this.attDefCreated.id,H.oW.READ)),(0,R.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalWriteOperations,!0,this.attDefCreated.id,H.oW.WRITE))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}cancel(){this.dialogRef.close(!1)}setAttribute(e){const i={id:0,beanName:"",friendlyName:e.friendlyName,displayName:e.displayName,description:e.description,type:e.valueType,namespace:this.createNamespace(e.entity,e.definitionType)};i.unique=this.attDef.getValue().unique&&!this.uniqueAttPipe.transform(i),this.attDef.next(i)}createNamespace(e,i){return"urn:perun:"+e+":attribute-def:"+i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(q.QS),t.Y36(H.H8),t.Y36(Z.eE),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Nt.bY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-attribute-definition-dialog"]],features:[t._Bn([Nt.bY])],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","create-attr-definition-button","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"dialog-container",3,"formGroup"],["matInput","","formControlName","friendlyName","data-cy","attribute-friendly-name-input","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","displayName","data-cy","attribute-display-name-input","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","data-cy","attribute-description-input","required","",3,"placeholder"],["formControlName","entity","data-cy","attribute-entity-input","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","definitionType","data-cy","attribute-definition-type-input","required","",3,"placeholder"],["formControlName","valueType","data-cy","attribute-value-type-input","required","",3,"placeholder"],[3,"attDef"],[3,"readOperationChanged","writeOperationChanged"],[3,"collections"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Tn,1,0,"mat-spinner",2),t.YNc(5,Qi,34,32,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.cancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.submit()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading||i.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},dependencies:[m.sg,m.O5,_t.ey,Xt.IC,Ft.TO,Ft.KE,Ht.Nt,q._Y,q.Fj,q.JJ,q.JL,q.Q7,q.sg,q.u,G.lW,M.uh,M.xY,M.H8,he.gD,nt.Ou,xe,ee,Ze,m.Ov,u.X$,ze]}),n})();var de=s(9244),En=s(10036);function ji(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function On(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"perun-web-apps-alert",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",10)(5,"input",11),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.value=a)}),t.ALo(6,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.IMPORT_ATTRIBUTE.INFO")," "),t.xp6(3),t.Q6J("ngModel",e.value)("placeholder",t.lcZ(6,5,"DIALOGS.IMPORT_ATTRIBUTE.HINT"))}}let _n=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.notificator=i,this.translate=a,this.attributesManager=o,this.attributesRightsService=v,this.value="",this.loading=!1}create(){this.loading=!0,this.attributeData=JSON.parse(this.value),this.attributesManager.createAttributeDefinition({attribute:this.attributeData.attributeDefinition}).pipe((0,R.w)(e=>wt((0,yt.of)(e.id),(0,yt.of)(this.attributeData.attributeRights))),this.attributesRightsService.addAttributeId(),(0,R.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e}))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.IMPORT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.H8),t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attribute-import-dialog"]],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","info"],[1,"w-100"],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,ji,1,0,"mat-spinner",2),t.YNc(5,On,7,7,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.dialogRef.close()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.create()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.IMPORT_ATTRIBUTE.TITLE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.IMPORT_ATTRIBUTE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===i.value.trim().length||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.IMPORT_ATTRIBUTE.CREATE")," "))},dependencies:[m.O5,Ft.KE,Ht.Nt,q.Fj,q.JJ,q.Q7,q.On,G.lW,M.uh,M.xY,M.H8,nt.Ou,et.w,u.X$]}),n})();var an=s(96308),Hn=s(36769),oi=s(68675),kn=s(64425),Te=s(37084),Ri=s(33604),Pn=s(56709),pn=s(43532),z=s(18750);function Q(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",22)(1,"mat-checkbox",23),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(a?o.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",24)(1,"mat-checkbox",25),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))}}function A(n,r){1&n&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.KEY")," "))}function bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"label")(2,"input",28),t.NdJ("ngModelChange",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onValueChange(o))})("ngModelChange",function(a){const v=t.CHM(e).$implicit;return t.KtG(v[0]=a)}),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngModel",e[0])}}function Dt(n,r){1&n&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.VALUE")," "))}function Pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"perun-web-apps-attribute-value",29),t.NdJ("sendEventToParent2",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onValueChange(o))}),t.qZA()()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("attribute",e[1])}}function Ut(n,r){1&n&&t._UZ(0,"tr",30)}function Kt(n,r){1&n&&t._UZ(0,"tr",31)}function Yt(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"perun-web-apps-table-wrapper",11)(2,"table",12),t.ynx(3,13),t.YNc(4,Q,2,3,"th",14),t.YNc(5,ct,2,2,"td",15),t.BQk(),t.ynx(6,16),t.YNc(7,A,3,3,"th",17),t.YNc(8,bt,3,1,"td",18),t.BQk(),t.ynx(9,19),t.YNc(10,Dt,3,3,"th",17),t.YNc(11,Pt,2,1,"td",18),t.BQk(),t.YNc(12,Ut,1,0,"tr",20),t.YNc(13,Kt,1,0,"tr",21),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("dataLength",e.dataSource.filteredData.length)("hideExport",!0)("tableId",e.tableId),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function J(n,r){1&n&&t._UZ(0,"mat-spinner",32)}function dt(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.NO_KEYS_WARNING")," "))}let ft=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.attributesManager=v,this.switchView=new t.vpe,this.records=[],this.displayedColumns=["select","key","value"],this.dataSource=new F.by,this.selection=new B.Ov(!0,[]),this.isAddButtonDisabled=!1,this.pageSizeOptions=de.f7}set matSort(e){this.sort=e}ngOnChanges(){this.ngOnInit()}ngOnInit(){this.loading=!0,this.attDef=this.data.attDef,this.attributesManager.getEntitylessKeys(this.attDef.id).subscribe(e=>{this.attributesManager.getEntitylessAttributesByName(`${this.attDef.namespace}:${this.attDef.friendlyName}`).subscribe(i=>{let a=0;this.records=[];for(const o of e)this.records.push([o,i[a]]),a++;this.dataSource=new F.by(this.records),this.setDataSource(),this.loading=!1})})}setDataSource(){!this.child||!this.child.paginator||this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator)}onSave(){this.updateMapAttributes();for(const e of this.selection.selected)this.attributesManager.setEntitylessAttribute({key:e[0],attribute:e[1]}).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.selection.clear(),this.isAddButtonDisabled=!1}onRemove(){for(const e of this.selection.selected)this.attributesManager.removeEntitylessAttribute(e[0],e[1].id).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.ngOnInit(),this.selection.clear(),this.isAddButtonDisabled=!1}onAdd(){const e=["",this.attDef];e[1].value=void 0,this.records.unshift(e),this.dataSource.data=this.records,this.setDataSource(),this.selection.clear(),this.selection.select(e),this.isAddButtonDisabled=!0}onCancel(){this.dialogRef.close(!1)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e[1].id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onValueChange(e){this.selection.select(e)}updateMapAttributes(){for(const e of this.items.toArray())"java.util.LinkedHashMap"===e.attribute.type&&e.updateMapAttribute()}ngAfterViewInit(){this.children.changes.subscribe(e=>{this.child=e.first,this.dataSource.paginator=this.child.paginator})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-entityless-attribute-keys-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(an.YE,7),t.Gf(Ri.Mw,5),t.Gf(de.l9,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.matSort=a.first),t.iGM(a=t.CRH())&&(i.items=a),t.iGM(a=t.CRH())&&(i.children=a)}},inputs:{attDef:"attDef",tableId:"tableId"},outputs:{switchView:"switchView"},features:[t.TTD],decls:19,vars:19,consts:[["mat-dialog-title",""],["mat-dialog-actions","",1,"mt-3"],["mat-stroked-button","",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"click"],["color","accent","matTooltip","save or remove new attribute first","mat-flat-button","","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltipDisabled","click"],["color","warn","mat-flat-button","",1,"ml-2",3,"click"],["mat-dialog-content","",1,"mt-3",3,"hidden"],["class","card mt-3",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn","class","mt-3",4,"ngIf"],[1,"card","mt-3"],[3,"pageSizeOptions","dataLength","hideExport","tableId"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","New key",1,"mt-2",3,"ngModel","ngModelChange"],[3,"attribute","sendEventToParent2"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],[1,"ml-auto","mr-auto"],["alert_type","warn",1,"mt-3"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return i.switchView.emit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"div",6),t.YNc(16,Yt,14,7,"div",7),t.YNc(17,J,1,0,"mat-spinner",8),t.YNc(18,dt,3,3,"perun-web-apps-alert",9),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.attDef.namespace+":"+i.attDef.friendlyName),t.xp6(3),t.hij(" ",t.lcZ(5,11,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(8,13,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE")," "),t.xp6(2),t.Q6J("disabled",i.isAddButtonDisabled)("matTooltipDisabled",!i.isAddButtonDisabled),t.xp6(1),t.hij(" ",t.lcZ(11,15,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.ADD")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE")," "),t.xp6(2),t.Q6J("hidden",i.loading),t.xp6(1),t.Q6J("ngIf",i.records&&i.records.length),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",0===i.records.length))},dependencies:[m.O5,Ht.Nt,q.Fj,q.JJ,q.On,G.lW,an.YE,an.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,Pn.oG,M.uh,M.xY,M.H8,nt.Ou,un.gM,et.w,pn.M,z.l,u.X$],styles:[".mat-cell[_ngcontent-%COMP%]{padding:8px 8px 8px 0}"]}),n})();var mt=s(60205);function zt(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function $t(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}function kt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")," "))}const se=function(){return["id","name","enabled","script"]};function O(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"form",12)(2,"mat-form-field"),t._UZ(3,"input",13),t.ALo(4,"translate"),t.YNc(5,$t,3,3,"mat-error",1),t.qZA(),t.TgZ(6,"mat-form-field")(7,"textarea",14),t.ALo(8,"translate"),t._uU(9,"          "),t.qZA(),t.YNc(10,kt,3,3,"mat-error",1),t.qZA()(),t._UZ(11,"perun-web-apps-attribute-unique-toggle",15),t.TgZ(12,"perun-web-apps-attribute-critical-operations-toggles",16),t.NdJ("readOperationChanged",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.finalReadOperations=a)})("writeOperationChanged",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.finalWriteOperations=a)}),t.qZA(),t._UZ(13,"perun-web-apps-attribute-rights-tab-group",17),t.ALo(14,"async"),t.TgZ(15,"mat-accordion")(16,"mat-expansion-panel",18)(17,"mat-expansion-panel-header")(18,"mat-panel-title"),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t._UZ(21,"app-services-list",19),t.ALo(22,"async"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.attributeControl),t.xp6(2),t.s9C("placeholder",t.lcZ(4,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.xp6(2),t.Q6J("ngIf",e.attributeControl.hasError("required","name")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,16,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.xp6(3),t.Q6J("ngIf",e.attributeControl.hasError("required","description")),t.xp6(1),t.Q6J("attDef",e.attDef),t.xp6(1),t.Q6J("readOperation",e.initReadOperations)("writeOperation",e.initWriteOperations),t.xp6(1),t.Q6J("attDef",e.attDef)("collections",t.lcZ(14,18,e.collections$)),t.xp6(6),t.hij(" ",t.lcZ(20,20,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SERVICES")," "),t.xp6(2),t.Q6J("disableRouting",!0)("displayedColumns",t.DdM(24,se))("services",t.lcZ(22,22,e.services$))}}function re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.switchShowKeys())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SHOW_KEYS")," "))}function Ce(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"h1",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,zt,1,0,"mat-spinner",3),t.YNc(5,O,23,25,"div",4),t.TgZ(6,"div",5),t.YNc(7,re,3,3,"button",6),t.TgZ(8,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCopy())}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(2),t.Q6J("ngIf","entityless"===(null==e.attDef?null:e.attDef.entity)),t.xp6(2),t.hij(" ",t.lcZ(10,10,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FOR_IMPORT")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading||e.attributeControl.invalid),t.xp6(1),t.hij(" ",t.lcZ(16,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CONFIRM")," ")}}function be(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-entityless-attribute-keys-list",21),t.NdJ("switchView",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.switchShowKeys())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("attDef",e.attDef)("tableId",e.tableId)}}let Ke=(()=>{class n{constructor(e,i,a,o,v,T,N,U,tt){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.clipboard=v,this.attributesManager=T,this.serviceService=N,this.formBuilder=U,this.attributeRightsService=tt,this.tableId=En.Wv,this.loading=!1,this.showKeys=!1,this.attDef=this.data.attDef,this.attributeControl=this.formBuilder.group({name:[this.attDef.displayName,q.kI.required],description:[this.attDef.description,q.kI.required]}),this.collections$=new E.X([]),this.services$=this.serviceService.getServicesByAttributeDefinition(this.attDef.id).pipe((0,oi.O)([]))}ngOnInit(){this.dialogRef.addPanelClass("mat-dialog-height-transition"),this.attributesManager.getAttributeRules(this.attDef.id).subscribe(e=>{this.collections$=new E.X(e.attributePolicyCollections),this.initReadOperations=e.criticalActions.includes("READ"),this.initWriteOperations=e.criticalActions.includes("WRITE")})}onSubmit(){this.loading=!0,this.updateAttribute(),this.attributesManager.updateAttributeDefinition({attributeDefinition:this.attDef}).pipe((0,R.w)(()=>(0,yt.of)(this.collections$.getValue())),this.attributeRightsService.filterNullInPolicy(),(0,R.w)(e=>this.attributesManager.setAttributePolicyCollections({policyCollections:e})),(0,R.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalReadOperations,this.initReadOperations,this.attDef.id,H.oW.READ)),(0,R.w)(()=>this.attributeRightsService.updateAttributeAction(this.finalWriteOperations,this.initWriteOperations,this.attDef.id,H.oW.WRITE))).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}switchShowKeys(){this.showKeys=!this.showKeys,this.dialogRef.updateSize(this.showKeys?"800px":"700px")}onCopy(){this.updateAttribute();const e={attributeDefinition:this.attDef,attributeRights:this.collections$.getValue()};this.clipboard.copy(JSON.stringify(e))?this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPIED")):this.notificator.showError(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FAILED"))}updateAttribute(){this.attDef.displayName=this.attributeControl.get("name").value,this.attDef.description=this.attributeControl.get("description").value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(kn.TU),t.Y36(H.H8),t.Y36(H.KK),t.Y36(q.QS),t.Y36(Z.eE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-attribute-definition-dialog"]],decls:3,vars:2,consts:[[1,"admin-theme"],[4,"ngIf"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","",1,"ml-2",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"fields-container",3,"formGroup"],["matInput","","data-cy","display-name-input","formControlName","name","required","",3,"placeholder"],["matInput","","formControlName","description","cdkTextareaAutosize","","required","",3,"placeholder"],[3,"attDef"],[3,"readOperation","writeOperation","readOperationChanged","writeOperationChanged"],[3,"attDef","collections"],[1,"mt-4","mb-4"],[3,"disableRouting","displayedColumns","services"],["mat-flat-button","",3,"click"],[3,"attDef","tableId","switchView"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ce,17,16,"div",1),t.YNc(2,be,2,2,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!i.showKeys),t.xp6(1),t.Q6J("ngIf",i.showKeys))},dependencies:[m.O5,Xt.IC,Ft.TO,Ft.KE,Ht.Nt,q._Y,q.Fj,q.JJ,q.JL,q.Q7,q.sg,q.u,Te.pp,Te.ib,Te.yz,Te.yK,G.lW,M.uh,M.xY,M.H8,nt.Ou,xe,ee,Ze,ft,mt.Q,m.Ov,u.X$],styles:[".fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],data:{animation:[Hn.SG,Hn.GH,Hn.Ls]}}),n})();var Me=s(70844),Fe=s(64597),oe=s(9185);let pe=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(":")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"nameSpaceToDef",type:n,pure:!0}),n})();function Re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",20)(1,"mat-checkbox",21),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(a?o.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("aria-label",i.checkboxLabel())("checked",i.selection.hasValue()&&e.all)("indeterminate",i.selection.hasValue()&&!e.all)}}function fn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",22)(1,"mat-checkbox",23),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.ALo(2,"multiWordDataCy"),t.ALo(3,"consentRelatedAttribute"),t.ALo(4,"translate"),t.ALo(5,"consentRelatedAttribute"),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q2q("data-cy","",t.lcZ(2,6,e.displayName),"-checkbox"),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))("disabled",t.Dn7(3,8,e.namespace,i.serviceEnabled,i.consentRequired))("matTooltip",t.lcZ(4,12,"ADMIN.ATTRIBUTES.CONSENT_RELATED_DISABLED"))("matTooltipDisabled",!t.Dn7(5,14,e.namespace,i.serviceEnabled,i.consentRequired))}}function mn(n,r){1&n&&(t.ynx(0,17),t.YNc(1,Re,2,3,"th",18),t.YNc(2,fn,6,18,"td",19),t.BQk())}function je(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ID")," "))}function Xe(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function wn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_FRIENDLY_NAME")," "))}function Zn(n,r){if(1&n&&(t.TgZ(0,"td",26),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&n){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.friendlyName),"-friendly-name"),t.xp6(2),t.hij(" ",e.friendlyName," ")}}function Vn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ENTITY")," "))}function Yn(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.entity)}}function Ni(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_DEF")," "))}function ce(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"nameSpaceToDef"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.namespace))}}function $e(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_TYPE")," "))}function vn(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.type))}}function Cn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_UNIQUE")," "))}function $n(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.unique)}}function li(n,r){1&n&&t._UZ(0,"tr",27)}function xi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.onRowClick(o))}),t.qZA()}if(2&n){const e=t.oxw();t.ekj("cursor-pointer",!e.disableRouting)}}function Qn(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.NO_ATTRIBUTES"),"\n"))}function Bi(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}const jn=function(n){return{all:n}};let ci=(()=>{class n{constructor(e,i,a,o){this.dialog=e,this.authResolver=i,this.tableCheckbox=a,this.consentRelatedPipe=o,this.selection=new B.Ov(!0,[]),this.displayedColumns=["select","id","friendlyName","entity","namespace","type","unique"],this.disableRouting=!1,this.consentRequired=!1,this.serviceEnabled=!1,this.refreshEvent=new t.vpe,this.pageSizeOptions=de.f7,this.canBeSelected=v=>!this.consentRelatedPipe.transform(v.namespace,this.serviceEnabled,this.consentRequired)}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"friendlyName":return e.friendlyName;case"entity":return e.entity;case"namespace":if(e.namespace){const a=e.namespace;return a.substring(a.lastIndexOf(":")+1,a.length)}return"";case"type":if(e.type){const a=e.type;return a.substring(a.lastIndexOf(".")+1,a.length)}return"";case"unique":return e.unique?"true":"false";default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(e=>"id"!==e)),this.dataSource=new F.by(this.definitions),this.setDataSource()}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}exportAllData(e){(0,de.O6)((0,de.Xn)(this.dataSource.filteredData,this.displayedColumns,n.getDataForColumn),e)}exportDisplayedData(e){const i=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=i+this.dataSource.paginator.pageSize;(0,de.O6)((0,de.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(i,a),this.displayedColumns,n.getDataForColumn),e)}setDataSource(){this.dataSource&&(this.dataSource.filter=this.filterValue,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,i)=>(0,de.Sd)(e,i,this.displayedColumns,n.getDataForColumn),this.dataSource.sortData=(e,i)=>(0,de.pR)(e,i,n.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource,this.canBeSelected)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!0,this.canBeSelected)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onRowClick(e){if(!this.disableRouting){const i=(0,de.kZ)();i.width="700px",i.data={attDef:e},this.dialog.open(Ke,i).afterClosed().subscribe(o=>{o&&(this.selection.clear(),this.refreshEvent.emit())})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.UA),t.Y36(Me.u))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attr-def-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(de.l9,7),t.Gf(an.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{definitions:"definitions",selection:"selection",displayedColumns:"displayedColumns",filterValue:"filterValue",tableId:"tableId",disableRouting:"disableRouting",consentRequired:"consentRequired",serviceEnabled:"serviceEnabled"},outputs:{refreshEvent:"refreshEvent"},features:[t.TTD],decls:28,vars:16,consts:[[1,"card","mt-2",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportDisplayedData","exportAllData"],[1,"overflow-auto"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","friendlyName"],["mat-cell","",4,"matCellDef"],["matColumnDef","entity"],["matColumnDef","namespace"],["matColumnDef","type"],["matColumnDef","unique"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","click",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["matTooltipPosition","left","color","primary",3,"aria-label","checked","disabled","matTooltip","matTooltipDisabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"click"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return i.exportDisplayedData(o)})("exportAllData",function(o){return i.exportAllData(o)}),t.TgZ(2,"div",2)(3,"table",3),t.YNc(4,mn,3,0,"ng-container",4),t.ALo(5,"isAllSelected"),t.ynx(6,5),t.YNc(7,je,3,3,"th",6),t.YNc(8,Xe,2,1,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,wn,3,3,"th",6),t.YNc(11,Zn,3,4,"td",9),t.BQk(),t.ynx(12,10),t.YNc(13,Vn,3,3,"th",6),t.YNc(14,Yn,2,1,"td",9),t.BQk(),t.ynx(15,11),t.YNc(16,Ni,3,3,"th",6),t.YNc(17,ce,3,3,"td",9),t.BQk(),t.ynx(18,12),t.YNc(19,$e,3,3,"th",6),t.YNc(20,vn,3,3,"td",9),t.BQk(),t.ynx(21,13),t.YNc(22,Cn,3,3,"th",6),t.YNc(23,$n,2,1,"td",9),t.BQk(),t.YNc(24,li,1,0,"tr",14),t.YNc(25,xi,1,2,"tr",15),t.qZA()()()(),t.YNc(26,Qn,3,3,"perun-web-apps-alert",16),t.YNc(27,Bi,3,3,"perun-web-apps-alert",16)),2&e&&(t.Q6J("hidden",0===i.dataSource.filteredData.length||0===i.definitions.length),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("dataLength",i.dataSource.filteredData.length)("tableId",i.tableId),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(14,jn,t.Dn7(5,10,i.dataSource,i.selection.selected.length,i.canBeSelected))),t.xp6(20),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.definitions.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.definitions.length))},dependencies:[m.O5,an.YE,an.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,Pn.oG,un.gM,et.w,z.l,u.X$,Fe.R,oe.I,ze,pe,Me.u],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var He=s(96214),Ye=s(7434);function ui(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCreate())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.CREATE")," "))}function Ji(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onImport())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.IMPORT")," "))}function hi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onDelete())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.ATTRIBUTES.DELETE")," ")}}function Ui(n,r){1&n&&t._UZ(0,"mat-spinner",11)}function Mn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",12),t.NdJ("refreshEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshTable())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("disableRouting",!e.authResolver.isPerunAdminOrObserver())("filterValue",e.filterValue)("selection",e.selected)("tableId",e.tableId)}}let bi=(()=>{class n{constructor(e,i,a){this.dialog=e,this.attributesManager=i,this.authResolver=a,this.attrDefinitions=[],this.selected=new B.Ov(!0,[]),this.filterValue="",this.tableId=En.uM}ngOnInit(){this.refreshTable()}onCreate(){const e=(0,de.kZ)();e.width="650px",this.dialog.open(Fi,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onDelete(){const e=(0,de.kZ)();e.width="450px",e.data={attributes:this.selected.selected,theme:"admin-theme"},this.dialog.open(W,e).afterClosed().subscribe(a=>{a&&(this.refreshTable(),this.selected.clear())})}refreshTable(){this.loading=!0,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}applyFilter(e){this.filterValue=e}onImport(){const e=(0,de.kZ)();e.width="700px",this.dialog.open(_n,e).afterClosed().subscribe(a=>{!0===a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(H.H8),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-attributes"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","data-cy","new-attr-definition-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","mr-2","data-cy","delete-attr-definition-button","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent",4,"ngIf"],["color","accent","data-cy","new-attr-definition-button","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","data-cy","delete-attr-definition-button","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","disableRouting","filterValue","selection","tableId","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,ui,3,3,"button",2),t.YNc(6,Ji,3,3,"button",3),t.YNc(7,hi,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(9,Ui,1,0,"mat-spinner",6),t.YNc(10,Mn,1,5,"app-attr-def-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"ADMIN.ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.ATTRIBUTES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,ci,He.t,Ye.L,u.X$]}),n})(),cn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-visualizer"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"app-animated-router-outlet")},dependencies:[h.A]}),n})();var zi=s(9921);let en=(()=>{class n{constructor(e){this.attributesManager=e}ngOnInit(){this.attributesManager.getAttributeModulesDependenciesGraphText("DOT").subscribe(e=>{const i=e.graph.replace("\\t","").replace("\\n","").replace("\\","");(0,zi.graphviz)("#dependenciesGraph",{zoom:!1}).renderDot(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-attr-modules"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:4,vars:3,consts:[[1,"page-subtitle"],["id","dependenciesGraph",1,"card"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"div",1)),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.VISUALIZER.ATTR_DEPENDENCIES.TITLE"),"\n"))},dependencies:[u.X$],styles:["#dependenciesGraph[_ngcontent-%COMP%]{overflow-y:scroll}"]}),n})(),Ti=(()=>{class n{constructor(){this.items=[{cssIcon:"perun-module-dependencies",url:"attrDependencies",label:"MENU_ITEMS.VISUALIZER.ATTR_DEPENDENCIES",style:"admin-btn"},{cssIcon:"perun-user-destination-relationship",url:"userDestinationRelationship",label:"MENU_ITEMS.VISUALIZER.USER_DESTINATION",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.items)("size","small"))},dependencies:[L.L]}),n})();var In=s(71884),b=s(18505),k=s(47957),V=s(71948),rt=s(86257);function ut(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_USER"))}function xt(n,r){1&n&&t._UZ(0,"mat-spinner",17),2&n&&t.Q6J("diameter",20)("strokeWidth",2)}function Ot(n,r){if(1&n&&(t.TgZ(0,"mat-option",18)(1,"span",19),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.firstName+" "+e.lastName),t.xp6(2),t.hij("#",e.id,""),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function Zt(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_DESTINATION"))}function ae(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_SERVICE"))}function De(n,r){if(1&n&&(t.TgZ(0,"mat-radio-button",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Qe=(()=>{class n{constructor(e,i,a,o,v,T){this.usersService=e,this.translate=i,this.facilityManager=a,this.serviceService=o,this.router=v,this.notificator=T,this.searchField=new q.p4,this.chosenService="",this.availableServices=[],this.loading=!1,this.destination=""}ngOnInit(){this.searchField.setValue(""),this.users=this.searchField.valueChanges.pipe((0,Y.b)(400),(0,In.x)(),(0,b.b)(()=>this.loading=!0),(0,R.w)(e=>this.usersService.findUsers(e)),(0,b.b)(()=>this.loading=!1)),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SELECT_NO_SERVICE").subscribe(e=>{this.noServiceText=e,this.availableServices.push(this.noServiceText)})}validateName(e){""!==this.searchField.value?this.usersService.findUsers(this.searchField.value).subscribe(i=>{for(const a of i){if((a.firstName+" "+a.lastName).toLowerCase()===this.searchField.value.toLowerCase()){this.selectedUser=a,e.selected.completed=!0,e.next();break}this.selectedUser=null}this.selectedUser||this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_NAME").subscribe(a=>{this.notificator.showError(a)})}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_NAME").subscribe(i=>{this.notificator.showError(i)})}validateDestination(e){""!==this.destination?(this.availableServices=[],this.availableServices.push(this.noServiceText),this.chosenService="",this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(i=>{if(0!==i.length){e.selected.completed=!0,e.next();for(const a of i)this.serviceService.getAllRichDestinationsForFacility(a.id).subscribe(o=>{for(const v of o)v.destination===this.destination&&(this.availableServices.includes(v.service.name)||this.availableServices.push(v.service.name))})}else this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_DESTINATION").subscribe(a=>{this.notificator.showError(a)})})):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_DESTINATION").subscribe(i=>{this.notificator.showError(i)})}getGraph(){""!==this.chosenService?this.router.navigate(["admin/visualizer/userDestinationRelationship/graph"],this.chosenService===this.noServiceText?{queryParams:{user:this.selectedUser.id,destination:this.destination,service:"noService"}}:{queryParams:{user:this.selectedUser.id,destination:this.destination,service:this.chosenService}}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NOT_CHOSEN_SERVICE").subscribe(e=>{this.notificator.showError(e)})}notCompleted(e){e.selected.completed=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(u.sK),t.Y36(H.IQ),t.Y36(H.KK),t.Y36(p.F0),t.Y36(Z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-relationship"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:46,vars:36,consts:[[1,"p-3","card","settings-card","col-12","col-xl-5"],[1,"page-subtitle"],["linear",""],["stepper",""],["completed","false"],["matStepLabel",""],[1,"w-100"],["matInput","","type","text",3,"placeholder","formControl","matAutocomplete","keydown.enter","ngModelChange"],["matSuffix","",3,"diameter","strokeWidth",4,"ngIf"],["align","start"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"mt-2",3,"click"],["matInput","","type","text",3,"placeholder","ngModel","keydown.enter","ngModelChange"],["mat-stroked-button","","matStepperPrevious","",1,"mt-2"],[1,"mb-2",3,"ngModel","ngModelChange"],["class","flex-column d-flex","color","primary",3,"value",4,"ngFor","ngForOf"],["matSuffix","",3,"diameter","strokeWidth"],[3,"value"],[1,"text-muted"],["color","primary",1,"flex-column","d-flex",3,"value"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-vertical-stepper",2,3)(6,"mat-step",4),t.YNc(7,ut,2,3,"ng-template",5),t.TgZ(8,"mat-form-field",6)(9,"input",7),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateName(v))})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.notCompleted(v))}),t.ALo(10,"translate"),t.qZA(),t.YNc(11,xt,1,2,"mat-spinner",8),t.TgZ(12,"mat-hint",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-autocomplete",null,10),t.YNc(17,Ot,4,4,"mat-option",11),t.ALo(18,"async"),t.qZA()(),t.TgZ(19,"div")(20,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateName(v))}),t._uU(21),t.ALo(22,"translate"),t.qZA()()(),t.TgZ(23,"mat-step",4),t.YNc(24,Zt,2,3,"ng-template",5),t.TgZ(25,"mat-form-field",6)(26,"input",13),t.NdJ("keydown.enter",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateDestination(v))})("ngModelChange",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.notCompleted(v))})("ngModelChange",function(v){return i.destination=v}),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"div")(29,"button",14),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"button",12),t.NdJ("click",function(){t.CHM(a);const v=t.MAs(5);return t.KtG(i.validateDestination(v))}),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.TgZ(35,"mat-step"),t.YNc(36,ae,2,3,"ng-template",5),t.TgZ(37,"mat-radio-group",15),t.NdJ("ngModelChange",function(v){return i.chosenService=v}),t.YNc(38,De,2,2,"mat-radio-button",16),t.qZA(),t.TgZ(39,"div")(40,"button",14),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"button",12),t.NdJ("click",function(){return i.getGraph()}),t._uU(44),t.ALo(45,"translate"),t.qZA()()()()()}if(2&e){const a=t.MAs(16);t.xp6(2),t.hij(" ",t.lcZ(3,16,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(10,18,"ADMIN.VISUALIZER.USER_DESTINATION.USER_EXAMPLE")),t.Q6J("formControl",i.searchField)("matAutocomplete",a),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(2),t.Oqu(t.lcZ(14,20,"ADMIN.VISUALIZER.USER_DESTINATION.USER_HINT")),t.xp6(4),t.Q6J("ngForOf",t.lcZ(18,22,i.users)),t.xp6(4),t.hij(" ",t.lcZ(22,24,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(27,26,"ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION_EXAMPLE")),t.Q6J("ngModel",i.destination),t.xp6(4),t.hij(" ",t.lcZ(31,28,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(4),t.Q6J("ngModel",i.chosenService),t.xp6(1),t.Q6J("ngForOf",i.availableServices),t.xp6(3),t.hij(" ",t.lcZ(42,32,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(45,34,"ADMIN.VISUALIZER.USER_DESTINATION.SUBMIT_BUTTON")," ")}},dependencies:[m.sg,m.O5,k.XC,k.ZL,_t.ey,Ft.KE,Ft.bx,Ft.R9,Ht.Nt,q.Fj,q.JJ,q.oH,q.On,G.lW,nt.Ou,V.VQ,V.U0,rt.C0,rt.VY,rt.Vq,rt.fd,m.Ov,u.X$]}),n})();function sn(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function we(n){this._context=n}function gn(n,r){this._basis=new we(n),this._beta=r}we.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sn(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},gn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var N,i=n[0],a=r[0],o=n[e]-i,v=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*n[T]+(1-this._beta)*(i+(N=T/e)*o),this._beta*r[T]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const Jn=function n(r){function e(i){return 1===r?new we(i):new gn(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var Hi=s(77579),di=s(70655),on=s(37340);function Fn(){}function pi(n){return null==n?Fn:function(){return this.querySelector(n)}}function Gn(){return[]}function _a(n){return null==n?Gn:function(){return this.querySelectorAll(n)}}function va(n){return function(){return this.matches(n)}}function mr(n){return new Array(n.length)}function Nn(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}function P(n,r,e,i,a,o){for(var T,v=0,N=r.length,U=o.length;v<U;++v)(T=r[v])?(T.__data__=o[v],i[v]=T):e[v]=new Nn(n,o[v]);for(;v<N;++v)(T=r[v])&&(a[v]=T)}function j(n,r,e,i,a,o,v){var T,N,Ct,U={},tt=r.length,lt=o.length,ot=new Array(tt);for(T=0;T<tt;++T)(N=r[T])&&(ot[T]=Ct="$"+v.call(N,N.__data__,T,r),Ct in U?a[T]=N:U[Ct]=N);for(T=0;T<lt;++T)(N=U[Ct="$"+v.call(n,o[T],T,o)])?(i[T]=N,N.__data__=o[T],U[Ct]=null):e[T]=new Nn(n,o[T]);for(T=0;T<tt;++T)(N=r[T])&&U[ot[T]]===N&&(a[T]=N)}function qe(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}Nn.prototype={constructor:Nn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var yi="http://www.w3.org/1999/xhtml";const _r={svg:"http://www.w3.org/2000/svg",xhtml:yi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wn(n){var r=n+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=n.slice(0,e))&&(n=n.slice(e+1)),_r.hasOwnProperty(r)?{space:_r[r],local:n}:n}function Yi(n){return function(){this.removeAttribute(n)}}function vr(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Kn(n,r){return function(){this.setAttribute(n,r)}}function yc(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function bc(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function Tc(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Gs(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function wc(n){return function(){this.style.removeProperty(n)}}function Ac(n,r,e){return function(){this.style.setProperty(n,r,e)}}function Sc(n,r,e){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function Mr(n,r){return n.style.getPropertyValue(r)||Gs(n).getComputedStyle(n,null).getPropertyValue(r)}function Dc(n){return function(){delete this[n]}}function Lc(n,r){return function(){this[n]=r}}function kc(n,r){return function(){var e=r.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Us(n){return n.trim().split(/^|\s+/)}function Ha(n){return n.classList||new zs(n)}function zs(n){this._node=n,this._names=Us(n.getAttribute("class")||"")}function Hs(n,r){for(var e=Ha(n),i=-1,a=r.length;++i<a;)e.add(r[i])}function Ys(n,r){for(var e=Ha(n),i=-1,a=r.length;++i<a;)e.remove(r[i])}function Oc(n){return function(){Hs(this,n)}}function Mc(n){return function(){Ys(this,n)}}function Nc(n,r){return function(){(r.apply(this,arguments)?Hs:Ys)(this,n)}}function Fc(){this.textContent=""}function Rc(n){return function(){this.textContent=n}}function Bc(n){return function(){var r=n.apply(this,arguments);this.textContent=r??""}}function Vc(){this.innerHTML=""}function Gc(n){return function(){this.innerHTML=n}}function Uc(n){return function(){var r=n.apply(this,arguments);this.innerHTML=r??""}}function Hc(){this.nextSibling&&this.parentNode.appendChild(this)}function Wc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $c(n){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===yi&&r.documentElement.namespaceURI===yi?r.createElement(n):r.createElementNS(e,n)}}function Qc(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Ws(n){var r=Wn(n);return(r.local?Qc:$c)(r)}function Jc(){return null}function qc(){var n=this.parentNode;n&&n.removeChild(this)}function eu(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function nu(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}zs.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Xs={},Ar=null;function su(n,r,e){return n=$s(n,r,e),function(i){var a=i.relatedTarget;(!a||a!==this&&!(8&a.compareDocumentPosition(this)))&&n.call(this,i)}}function $s(n,r,e){return function(i){var a=Ar;Ar=i;try{n.call(this,this.__data__,r,e)}finally{Ar=a}}}function ou(n){return n.trim().split(/^|\s+/).map(function(r){var e="",i=r.indexOf(".");return i>=0&&(e=r.slice(i+1),r=r.slice(0,i)),{type:r,name:e}})}function lu(n){return function(){var r=this.__on;if(r){for(var o,e=0,i=-1,a=r.length;e<a;++e)o=r[e],n.type&&o.type!==n.type||o.name!==n.name?r[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?r.length=i:delete this.__on}}}function cu(n,r,e){var i=Xs.hasOwnProperty(n.type)?su:$s;return function(a,o,v){var N,T=this.__on,U=i(r,o,v);if(T)for(var tt=0,lt=T.length;tt<lt;++tt)if((N=T[tt]).type===n.type&&N.name===n.name)return this.removeEventListener(N.type,N.listener,N.capture),this.addEventListener(N.type,N.listener=U,N.capture=e),void(N.value=r);this.addEventListener(n.type,U,e),N={type:n.type,name:n.name,value:r,listener:U,capture:e},T?T.push(N):this.__on=[N]}}function Qs(n,r,e){var i=Gs(n),a=i.CustomEvent;"function"==typeof a?a=new a(r,e):(a=i.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),n.dispatchEvent(a)}function hu(n,r){return function(){return Qs(this,n,r)}}function du(n,r){return function(){return Qs(this,n,r.apply(this,arguments))}}typeof document<"u"&&("onmouseenter"in document.documentElement||(Xs={mouseenter:"mouseover",mouseleave:"mouseout"}));var js=[null];function Zi(n,r){this._groups=n,this._parents=r}function Js(){return new Zi([[document.documentElement]],js)}Zi.prototype=Js.prototype={constructor:Zi,select:function er(n){"function"!=typeof n&&(n=pi(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,U,o=r[a],v=o.length,T=i[a]=new Array(v),tt=0;tt<v;++tt)(N=o[tt])&&(U=n.call(N,N.__data__,tt,o))&&("__data__"in N&&(U.__data__=N.__data__),T[tt]=U);return new Zi(i,this._parents)},selectAll:function za(n){"function"!=typeof n&&(n=_a(n));for(var r=this._groups,e=r.length,i=[],a=[],o=0;o<e;++o)for(var N,v=r[o],T=v.length,U=0;U<T;++U)(N=v[U])&&(i.push(n.call(N,N.__data__,U,v)),a.push(N));return new Zi(i,a)},filter:function An(n){"function"!=typeof n&&(n=va(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,T=i[a]=[],U=0;U<v;++U)(N=o[U])&&n.call(N,N.__data__,U,o)&&T.push(N);return new Zi(i,this._parents)},data:function ht(n,r){if(!n)return Ct=new Array(this.size()),U=-1,this.each(function(fe){Ct[++U]=fe}),Ct;var e=r?j:P,i=this._parents,a=this._groups;"function"!=typeof n&&(n=function y(n){return function(){return n}}(n));for(var o=a.length,v=new Array(o),T=new Array(o),N=new Array(o),U=0;U<o;++U){var tt=i[U],lt=a[U],ot=lt.length,Ct=n.call(tt,tt&&tt.__data__,U,i),It=Ct.length,Rt=T[U]=new Array(It),gt=v[U]=new Array(It);e(tt,lt,Rt,gt,N[U]=new Array(ot),Ct,r);for(var ve,Se,te=0,Qt=0;te<It;++te)if(ve=Rt[te]){for(te>=Qt&&(Qt=te+1);!(Se=gt[Qt])&&++Qt<It;);ve._next=Se||null}}return(v=new Zi(v,i))._enter=T,v._exit=N,v},enter:function Ki(){return new Zi(this._enter||this._groups.map(mr),this._parents)},exit:function vt(){return new Zi(this._exit||this._groups.map(mr),this._parents)},join:function At(n,r,e){var i=this.enter(),a=this,o=this.exit();return i="function"==typeof n?n(i):i.append(n+""),null!=r&&(a=r(a)),null==e?o.remove():e(o),i&&a?i.merge(a).order():a},merge:function Bt(n){for(var r=this._groups,e=n._groups,i=r.length,o=Math.min(i,e.length),v=new Array(i),T=0;T<o;++T)for(var ot,N=r[T],U=e[T],tt=N.length,lt=v[T]=new Array(tt),Ct=0;Ct<tt;++Ct)(ot=N[Ct]||U[Ct])&&(lt[Ct]=ot);for(;T<i;++T)v[T]=r[T];return new Zi(v,this._parents)},order:function ne(){for(var n=this._groups,r=-1,e=n.length;++r<e;)for(var v,i=n[r],a=i.length-1,o=i[a];--a>=0;)(v=i[a])&&(o&&4^v.compareDocumentPosition(o)&&o.parentNode.insertBefore(v,o),o=v);return this},sort:function Le(n){function r(lt,ot){return lt&&ot?n(lt.__data__,ot.__data__):!lt-!ot}n||(n=qe);for(var e=this._groups,i=e.length,a=new Array(i),o=0;o<i;++o){for(var U,v=e[o],T=v.length,N=a[o]=new Array(T),tt=0;tt<T;++tt)(U=v[tt])&&(N[tt]=U);N.sort(r)}return new Zi(a,this._parents).order()},call:function hn(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function Ne(){var n=new Array(this.size()),r=-1;return this.each(function(){n[++r]=this}),n},node:function Ge(){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var i=n[r],a=0,o=i.length;a<o;++a){var v=i[a];if(v)return v}return null},size:function bn(){var n=0;return this.each(function(){++n}),n},empty:function Ei(){return!this.node()},each:function gr(n){for(var r=this._groups,e=0,i=r.length;e<i;++e)for(var T,a=r[e],o=0,v=a.length;o<v;++o)(T=a[o])&&n.call(T,T.__data__,o,a);return this},attr:function Cc(n,r){var e=Wn(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==r?e.local?vr:Yi:"function"==typeof r?e.local?Tc:bc:e.local?yc:Kn)(e,r))},style:function Ec(n,r,e){return arguments.length>1?this.each((null==r?wc:"function"==typeof r?Sc:Ac)(n,r,e??"")):Mr(this.node(),n)},property:function Ic(n,r){return arguments.length>1?this.each((null==r?Dc:"function"==typeof r?kc:Lc)(n,r)):this.node()[n]},classed:function Pc(n,r){var e=Us(n+"");if(arguments.length<2){for(var i=Ha(this.node()),a=-1,o=e.length;++a<o;)if(!i.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?Nc:r?Oc:Mc)(e,r))},text:function Zc(n){return arguments.length?this.each(null==n?Fc:("function"==typeof n?Bc:Rc)(n)):this.node().textContent},html:function zc(n){return arguments.length?this.each(null==n?Vc:("function"==typeof n?Uc:Gc)(n)):this.node().innerHTML},raise:function Yc(){return this.each(Hc)},lower:function Xc(){return this.each(Wc)},append:function jc(n){var r="function"==typeof n?n:Ws(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function Kc(n,r){var e="function"==typeof n?n:Ws(n),i=null==r?Jc:"function"==typeof r?r:pi(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function tu(){return this.each(qc)},clone:function iu(n){return this.select(n?nu:eu)},datum:function ru(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function uu(n,r,e){var a,v,i=ou(n+""),o=i.length;if(!(arguments.length<2)){for(T=r?cu:lu,null==e&&(e=!1),a=0;a<o;++a)this.each(T(i[a],r,e));return this}var T=this.node().__on;if(T)for(var tt,N=0,U=T.length;N<U;++N)for(a=0,tt=T[N];a<o;++a)if((v=i[a]).type===tt.type&&v.name===tt.name)return tt.value},dispatch:function pu(n,r){return this.each(("function"==typeof r?du:hu)(n,r))}};const ea=Js;function Ks(n){return"string"==typeof n?new Zi([[document.querySelector(n)]],[document.documentElement]):new Zi([[n]],js)}function qs(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function xa(n){this._context=n}function to(n,r){this._basis=new xa(n),this._beta=r}xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qs(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},to.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var N,i=n[0],a=r[0],o=n[e]-i,v=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*n[T]+(1-this._beta)*(i+(N=T/e)*o),this._beta*r[T]+(1-this._beta)*(a+N*v));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const fu=function n(r){function e(i){return 1===r?new xa(i):new to(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var Ya=Math.PI,Wa=2*Ya,Sr=1e-6,mu=Wa-Sr;function Xa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function eo(){return new Xa}Xa.prototype=eo.prototype={constructor:Xa,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,e,i){this._+="Q"+ +n+","+ +r+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(n,r,e,i,a,o){this._+="C"+ +n+","+ +r+","+ +e+","+ +i+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(n,r,e,i,a){var o=this._x1,v=this._y1,T=(e=+e)-(n=+n),N=(i=+i)-(r=+r),U=o-n,tt=v-r,lt=U*U+tt*tt;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(lt>Sr)if(Math.abs(tt*T-N*U)>Sr&&a){var ot=e-o,Ct=i-v,It=T*T+N*N,Rt=ot*ot+Ct*Ct,gt=Math.sqrt(It),Gt=Math.sqrt(lt),te=a*Math.tan((Ya-Math.acos((It+lt-Rt)/(2*gt*Gt)))/2),Qt=te/Gt,ve=te/gt;Math.abs(Qt-1)>Sr&&(this._+="L"+(n+Qt*U)+","+(r+Qt*tt)),this._+="A"+a+","+a+",0,0,"+ +(tt*ot>U*Ct)+","+(this._x1=n+ve*T)+","+(this._y1=r+ve*N)}else this._+="L"+(this._x1=n)+","+(this._y1=r)},arc:function(n,r,e,i,a,o){n=+n,r=+r,o=!!o;var v=(e=+e)*Math.cos(i),T=e*Math.sin(i),N=n+v,U=r+T,tt=1^o,lt=o?i-a:a-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+N+","+U:(Math.abs(this._x1-N)>Sr||Math.abs(this._y1-U)>Sr)&&(this._+="L"+N+","+U),e&&(lt<0&&(lt=lt%Wa+Wa),lt>mu?this._+="A"+e+","+e+",0,1,"+tt+","+(n-v)+","+(r-T)+"A"+e+","+e+",0,1,"+tt+","+(this._x1=N)+","+(this._y1=U):lt>Sr&&(this._+="A"+e+","+e+",0,"+ +(lt>=Ya)+","+tt+","+(this._x1=n+e*Math.cos(a))+","+(this._y1=r+e*Math.sin(a))))},rect:function(n,r,e,i){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};const gu=eo;function ya(n){return function(){return n}}function no(n){this._context=n}function _u(n){return new no(n)}function vu(n){return n[0]}function xu(n){return n[1]}no.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;default:this._context.lineTo(n,r)}}};var io=Math.PI;function ao(n){return(1-Math.cos(io*n))/2}var ba=s(25922),or=s(49194),$a=s(73339),bu=(0,ba.Z)("start","end","cancel","interrupt"),Tu=[];function wa(n,r,e,i,a,o){var v=n.__transition;if(v){if(e in v)return}else n.__transition={};!function Cu(n,r,e){var a,i=n.__transition;function v(U){var tt,lt,ot,Ct;if(1!==e.state)return N();for(tt in i)if((Ct=i[tt]).name===e.name){if(3===Ct.state)return(0,$a.Z)(v);4===Ct.state?(Ct.state=6,Ct.timer.stop(),Ct.on.call("interrupt",n,n.__data__,Ct.index,Ct.group),delete i[tt]):+tt<r&&(Ct.state=6,Ct.timer.stop(),Ct.on.call("cancel",n,n.__data__,Ct.index,Ct.group),delete i[tt])}if((0,$a.Z)(function(){3===e.state&&(e.state=4,e.timer.restart(T,e.delay,e.time),T(U))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(ot=e.tween.length),tt=0,lt=-1;tt<ot;++tt)(Ct=e.tween[tt].value.call(n,n.__data__,e.index,e.group))&&(a[++lt]=Ct);a.length=lt+1}}function T(U){for(var tt=U<e.duration?e.ease.call(null,U/e.duration):(e.timer.restart(N),e.state=5,1),lt=-1,ot=a.length;++lt<ot;)a[lt].call(n,tt);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),N())}function N(){for(var U in e.state=6,e.timer.stop(),delete i[r],i)return;delete n.__transition}i[r]=e,e.timer=(0,or.HT)(function o(U){e.state=1,e.timer.restart(v,e.delay,e.time),e.delay<=U&&v(U-e.delay)},0,e.time)}(n,e,{name:r,index:i,group:a,on:bu,tween:Tu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ja(n,r){var e=qi(n,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function lr(n,r){var e=qi(n,r);if(e.state>3)throw new Error("too late; already running");return e}function qi(n,r){var e=n.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function xr(n,r){return n=+n,r=+r,function(e){return n*(1-e)+r*e}}var na,qa,ho,Aa,co=180/Math.PI,Ka={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uo(n,r,e,i,a,o){var v,T,N;return(v=Math.sqrt(n*n+r*r))&&(n/=v,r/=v),(N=n*e+r*i)&&(e-=n*N,i-=r*N),(T=Math.sqrt(e*e+i*i))&&(e/=T,i/=T,N/=T),n*i<r*e&&(n=-n,r=-r,N=-N,v=-v),{translateX:a,translateY:o,rotate:Math.atan2(r,n)*co,skewX:Math.atan(N)*co,scaleX:v,scaleY:T}}function po(n,r,e,i){function a(U){return U.length?U.pop()+" ":""}return function(U,tt){var lt=[],ot=[];return U=n(U),tt=n(tt),function o(U,tt,lt,ot,Ct,It){if(U!==lt||tt!==ot){var Rt=Ct.push("translate(",null,r,null,e);It.push({i:Rt-4,x:xr(U,lt)},{i:Rt-2,x:xr(tt,ot)})}else(lt||ot)&&Ct.push("translate("+lt+r+ot+e)}(U.translateX,U.translateY,tt.translateX,tt.translateY,lt,ot),function v(U,tt,lt,ot){U!==tt?(U-tt>180?tt+=360:tt-U>180&&(U+=360),ot.push({i:lt.push(a(lt)+"rotate(",null,i)-2,x:xr(U,tt)})):tt&&lt.push(a(lt)+"rotate("+tt+i)}(U.rotate,tt.rotate,lt,ot),function T(U,tt,lt,ot){U!==tt?ot.push({i:lt.push(a(lt)+"skewX(",null,i)-2,x:xr(U,tt)}):tt&&lt.push(a(lt)+"skewX("+tt+i)}(U.skewX,tt.skewX,lt,ot),function N(U,tt,lt,ot,Ct,It){if(U!==lt||tt!==ot){var Rt=Ct.push(a(Ct)+"scale(",null,",",null,")");It.push({i:Rt-4,x:xr(U,lt)},{i:Rt-2,x:xr(tt,ot)})}else(1!==lt||1!==ot)&&Ct.push(a(Ct)+"scale("+lt+","+ot+")")}(U.scaleX,U.scaleY,tt.scaleX,tt.scaleY,lt,ot),U=tt=null,function(Ct){for(var gt,It=-1,Rt=ot.length;++It<Rt;)lt[(gt=ot[It]).i]=gt.x(Ct);return lt.join("")}}}var Du=po(function Su(n){return"none"===n?Ka:(na||(na=document.createElement("DIV"),qa=document.documentElement,ho=document.defaultView),na.style.transform=n,n=ho.getComputedStyle(qa.appendChild(na),null).getPropertyValue("transform"),qa.removeChild(na),uo(+(n=n.slice(7,-1).split(","))[0],+n[1],+n[2],+n[3],+n[4],+n[5]))},"px, ","px)","deg)"),Lu=po(function Eu(n){return null!=n&&(Aa||(Aa=document.createElementNS("http://www.w3.org/2000/svg","g")),Aa.setAttribute("transform",n),n=Aa.transform.baseVal.consolidate())?uo((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):Ka},", ",")",")");function ku(n,r){var e,i;return function(){var a=lr(this,n),o=a.tween;if(o!==e)for(var v=0,T=(i=e=o).length;v<T;++v)if(i[v].name===r){(i=i.slice()).splice(v,1);break}a.tween=i}}function Iu(n,r,e){var i,a;if("function"!=typeof e)throw new Error;return function(){var o=lr(this,n),v=o.tween;if(v!==i){a=(i=v).slice();for(var T={name:r,value:e},N=0,U=a.length;N<U;++N)if(a[N].name===r){a[N]=T;break}N===U&&a.push(T)}o.tween=a}}function ts(n,r,e){var i=n._id;return n.each(function(){var a=lr(this,i);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return qi(a,i).value[r]}}function es(n,r,e){n.prototype=r.prototype=e,e.constructor=n}function fo(n,r){var e=Object.create(n.prototype);for(var i in r)e[i]=r[i];return e}function ia(){}var Sa=1/.7,Nr="\\s*([+-]?\\d+)\\s*",aa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mu=/^#([0-9a-f]{3,8})$/,Nu=new RegExp("^rgb\\("+[Nr,Nr,Nr]+"\\)$"),Pu=new RegExp("^rgb\\("+[nr,nr,nr]+"\\)$"),Fu=new RegExp("^rgba\\("+[Nr,Nr,Nr,aa]+"\\)$"),Ru=new RegExp("^rgba\\("+[nr,nr,nr,aa]+"\\)$"),Bu=new RegExp("^hsl\\("+[aa,nr,nr]+"\\)$"),Zu=new RegExp("^hsla\\("+[aa,nr,nr,aa]+"\\)$"),mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function go(){return this.rgb().formatHex()}function _o(){return this.rgb().formatRgb()}function sa(n){var r,e;return n=(n+"").trim().toLowerCase(),(r=Mu.exec(n))?(e=r[1].length,r=parseInt(r[1],16),6===e?vo(r):3===e?new Vi(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?Ea(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?Ea(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=Nu.exec(n))?new Vi(r[1],r[2],r[3],1):(r=Pu.exec(n))?new Vi(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=Fu.exec(n))?Ea(r[1],r[2],r[3],r[4]):(r=Ru.exec(n))?Ea(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=Bu.exec(n))?bo(r[1],r[2]/100,r[3]/100,1):(r=Zu.exec(n))?bo(r[1],r[2]/100,r[3]/100,r[4]):mo.hasOwnProperty(n)?vo(mo[n]):"transparent"===n?new Vi(NaN,NaN,NaN,0):null}function vo(n){return new Vi(n>>16&255,n>>8&255,255&n,1)}function Ea(n,r,e,i){return i<=0&&(n=r=e=NaN),new Vi(n,r,e,i)}function Gu(n){return n instanceof ia||(n=sa(n)),n?new Vi((n=n.rgb()).r,n.g,n.b,n.opacity):new Vi}function Da(n,r,e,i){return 1===arguments.length?Gu(n):new Vi(n,r,e,i??1)}function Vi(n,r,e,i){this.r=+n,this.g=+r,this.b=+e,this.opacity=+i}function xo(){return"#"+ns(this.r)+ns(this.g)+ns(this.b)}function yo(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function ns(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function bo(n,r,e,i){return i<=0?n=r=e=NaN:e<=0||e>=1?n=r=NaN:r<=0&&(n=NaN),new ir(n,r,e,i)}function To(n){if(n instanceof ir)return new ir(n.h,n.s,n.l,n.opacity);if(n instanceof ia||(n=sa(n)),!n)return new ir;if(n instanceof ir)return n;var r=(n=n.rgb()).r/255,e=n.g/255,i=n.b/255,a=Math.min(r,e,i),o=Math.max(r,e,i),v=NaN,T=o-a,N=(o+a)/2;return T?(v=r===o?(e-i)/T+6*(e<i):e===o?(i-r)/T+2:(r-e)/T+4,T/=N<.5?o+a:2-o-a,v*=60):T=N>0&&N<1?0:v,new ir(v,T,N,n.opacity)}function ir(n,r,e,i){this.h=+n,this.s=+r,this.l=+e,this.opacity=+i}function is(n,r,e){return 255*(n<60?r+(e-r)*n/60:n<180?e:n<240?r+(e-r)*(240-n)/60:r)}function Co(n,r,e,i,a){var o=n*n,v=o*n;return((1-3*n+3*o-v)*r+(4-6*o+3*v)*e+(1+3*n+3*o-3*v)*i+v*a)/6}function wo(n){return function(){return n}}function So(n,r){var e=r-n;return e?function Ao(n,r){return function(e){return n+e*r}}(n,e):wo(isNaN(n)?r:n)}es(ia,sa,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:go,formatHex:go,formatHsl:function Vu(){return To(this).formatHsl()},formatRgb:_o,toString:_o}),es(Vi,Da,fo(ia,{brighter:function(n){return n=null==n?Sa:Math.pow(Sa,n),new Vi(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Vi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xo,formatHex:xo,formatRgb:yo,toString:yo})),es(ir,function Uu(n,r,e,i){return 1===arguments.length?To(n):new ir(n,r,e,i??1)},fo(ia,{brighter:function(n){return n=null==n?Sa:Math.pow(Sa,n),new ir(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new ir(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),r=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*r,a=2*e-i;return new Vi(is(n>=240?n-240:n+120,a,i),is(n,a,i),is(n<120?n+240:n-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));const Eo=function n(r){var e=function Wu(n){return 1==(n=+n)?So:function(r,e){return e-r?function Yu(n,r,e){return n=Math.pow(n,e),r=Math.pow(r,e)-n,e=1/e,function(i){return Math.pow(n+i*r,e)}}(r,e,n):wo(isNaN(r)?e:r)}}(r);function i(a,o){var v=e((a=Da(a)).r,(o=Da(o)).r),T=e(a.g,o.g),N=e(a.b,o.b),U=So(a.opacity,o.opacity);return function(tt){return a.r=v(tt),a.g=T(tt),a.b=N(tt),a.opacity=U(tt),a+""}}return i.gamma=n,i}(1);function Do(n){return function(r){var v,T,e=r.length,i=new Array(e),a=new Array(e),o=new Array(e);for(v=0;v<e;++v)T=Da(r[v]),i[v]=T.r||0,a[v]=T.g||0,o[v]=T.b||0;return i=n(i),a=n(a),o=n(o),T.opacity=1,function(N){return T.r=i(N),T.g=a(N),T.b=o(N),T+""}}}Do(function zu(n){var r=n.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),a=n[i],o=n[i+1];return Co((e-i/r)*r,i>0?n[i-1]:2*a-o,a,o,i<r-1?n[i+2]:2*o-a)}}),Do(function Hu(n){var r=n.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*r);return Co((e-i/r)*r,n[(i+r-1)%r],n[i%r],n[(i+1)%r],n[(i+2)%r])}});var rs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,as=new RegExp(rs.source,"g");function Qu(n,r){var i,a,o,e=rs.lastIndex=as.lastIndex=0,v=-1,T=[],N=[];for(n+="",r+="";(i=rs.exec(n))&&(a=as.exec(r));)(o=a.index)>e&&(o=r.slice(e,o),T[v]?T[v]+=o:T[++v]=o),(i=i[0])===(a=a[0])?T[v]?T[v]+=a:T[++v]=a:(T[++v]=null,N.push({i:v,x:xr(i,a)})),e=as.lastIndex;return e<r.length&&(o=r.slice(e),T[v]?T[v]+=o:T[++v]=o),T.length<2?N[0]?function $u(n){return function(r){return n(r)+""}}(N[0].x):function Xu(n){return function(){return n}}(r):(r=N.length,function(U){for(var lt,tt=0;tt<r;++tt)T[(lt=N[tt]).i]=lt.x(U);return T.join("")})}function Lo(n,r){var e;return("number"==typeof r?xr:r instanceof sa?Eo:(e=sa(r))?(r=e,Eo):Qu)(n,r)}function ju(n){return function(){this.removeAttribute(n)}}function Ju(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Ku(n,r,e){var i,o,a=e+"";return function(){var v=this.getAttribute(n);return v===a?null:v===i?o:o=r(i=v,e)}}function qu(n,r,e){var i,o,a=e+"";return function(){var v=this.getAttributeNS(n.space,n.local);return v===a?null:v===i?o:o=r(i=v,e)}}function th(n,r,e){var i,a,o;return function(){var v,N,T=e(this);return null==T?void this.removeAttribute(n):(v=this.getAttribute(n))===(N=T+"")?null:v===i&&N===a?o:(a=N,o=r(i=v,T))}}function eh(n,r,e){var i,a,o;return function(){var v,N,T=e(this);return null==T?void this.removeAttributeNS(n.space,n.local):(v=this.getAttributeNS(n.space,n.local))===(N=T+"")?null:v===i&&N===a?o:(a=N,o=r(i=v,T))}}function ih(n,r){return function(e){this.setAttribute(n,r.call(this,e))}}function rh(n,r){return function(e){this.setAttributeNS(n.space,n.local,r.call(this,e))}}function ah(n,r){var e,i;function a(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&rh(n,o)),e}return a._value=r,a}function sh(n,r){var e,i;function a(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&ih(n,o)),e}return a._value=r,a}function lh(n,r){return function(){Ja(this,n).delay=+r.apply(this,arguments)}}function ch(n,r){return r=+r,function(){Ja(this,n).delay=r}}function hh(n,r){return function(){lr(this,n).duration=+r.apply(this,arguments)}}function dh(n,r){return r=+r,function(){lr(this,n).duration=r}}function fh(n,r){if("function"!=typeof r)throw new Error;return function(){lr(this,n).ease=r}}function xh(n,r,e){var i,a,o=function vh(n){return(n+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?Ja:lr;return function(){var v=o(this,n),T=v.on;T!==i&&(a=(i=T).copy()).on(r,e),v.on=a}}var Ah=ea.prototype.constructor;function ko(n){return function(){this.style.removeProperty(n)}}function Oh(n,r,e){return function(i){this.style.setProperty(n,r.call(this,i),e)}}function Mh(n,r,e){var i,a;function o(){var v=r.apply(this,arguments);return v!==a&&(i=(a=v)&&Oh(n,v,e)),i}return o._value=r,o}function Bh(n){return function(r){this.textContent=n.call(this,r)}}function Zh(n){var r,e;function i(){var a=n.apply(this,arguments);return a!==e&&(r=(e=a)&&Bh(a)),r}return i._value=n,i}var zh=0;function cr(n,r,e,i){this._groups=n,this._parents=r,this._name=e,this._id=i}function Io(){return++zh}var Pr=ea.prototype;cr.prototype=function Hh(n){return ea().transition(n)}.prototype={constructor:cr,select:function Ch(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=pi(n));for(var i=this._groups,a=i.length,o=new Array(a),v=0;v<a;++v)for(var tt,lt,T=i[v],N=T.length,U=o[v]=new Array(N),ot=0;ot<N;++ot)(tt=T[ot])&&(lt=n.call(tt,tt.__data__,ot,T))&&("__data__"in tt&&(lt.__data__=tt.__data__),U[ot]=lt,wa(U[ot],r,e,ot,U,qi(tt,e)));return new cr(o,this._parents,r,e)},selectAll:function wh(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=_a(n));for(var i=this._groups,a=i.length,o=[],v=[],T=0;T<a;++T)for(var tt,N=i[T],U=N.length,lt=0;lt<U;++lt)if(tt=N[lt]){for(var Ct,ot=n.call(tt,tt.__data__,lt,N),It=qi(tt,e),Rt=0,gt=ot.length;Rt<gt;++Rt)(Ct=ot[Rt])&&wa(Ct,r,e,Rt,ot,It);o.push(ot),v.push(tt)}return new cr(o,v,r,e)},filter:function gh(n){"function"!=typeof n&&(n=va(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var N,o=r[a],v=o.length,T=i[a]=[],U=0;U<v;++U)(N=o[U])&&n.call(N,N.__data__,U,o)&&T.push(N);return new cr(i,this._parents,this._name,this._id)},merge:function _h(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,e=n._groups,i=r.length,o=Math.min(i,e.length),v=new Array(i),T=0;T<o;++T)for(var ot,N=r[T],U=e[T],tt=N.length,lt=v[T]=new Array(tt),Ct=0;Ct<tt;++Ct)(ot=N[Ct]||U[Ct])&&(lt[Ct]=ot);for(;T<i;++T)v[T]=r[T];return new cr(v,this._parents,this._name,this._id)},selection:function Sh(){return new Ah(this._groups,this._parents)},transition:function Gh(){for(var n=this._name,r=this._id,e=Io(),i=this._groups,a=i.length,o=0;o<a;++o)for(var N,v=i[o],T=v.length,U=0;U<T;++U)if(N=v[U]){var tt=qi(N,r);wa(N,n,e,U,v,{time:tt.time+tt.delay+tt.duration,delay:0,duration:tt.duration,ease:tt.ease})}return new cr(i,this._parents,n,e)},call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:function yh(n,r){var e=this._id;return arguments.length<2?qi(this.node(),e).on.on(n):this.each(xh(e,n,r))},attr:function nh(n,r){var e=Wn(n),i="transform"===e?Lu:Lo;return this.attrTween(n,"function"==typeof r?(e.local?eh:th)(e,i,ts(this,"attr."+n,r)):null==r?(e.local?Ju:ju)(e):(e.local?qu:Ku)(e,i,r))},attrTween:function oh(n,r){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var i=Wn(n);return this.tween(e,(i.local?ah:sh)(i,r))},style:function Ih(n,r,e){var i="transform"==(n+="")?Du:Lo;return null==r?this.styleTween(n,function Eh(n,r){var e,i,a;return function(){var o=Mr(this,n),v=(this.style.removeProperty(n),Mr(this,n));return o===v?null:o===e&&v===i?a:a=r(e=o,i=v)}}(n,i)).on("end.style."+n,ko(n)):"function"==typeof r?this.styleTween(n,function Lh(n,r,e){var i,a,o;return function(){var v=Mr(this,n),T=e(this),N=T+"";return null==T&&(this.style.removeProperty(n),N=T=Mr(this,n)),v===N?null:v===i&&N===a?o:(a=N,o=r(i=v,T))}}(n,i,ts(this,"style."+n,r))).each(function kh(n,r){var e,i,a,T,o="style."+r,v="end."+o;return function(){var N=lr(this,n),U=N.on,tt=null==N.value[o]?T||(T=ko(r)):void 0;(U!==e||a!==tt)&&(i=(e=U).copy()).on(v,a=tt),N.on=i}}(this._id,n)):this.styleTween(n,function Dh(n,r,e){var i,o,a=e+"";return function(){var v=Mr(this,n);return v===a?null:v===i?o:o=r(i=v,e)}}(n,i,r),e).on("end.style."+n,null)},styleTween:function Nh(n,r,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,Mh(n,r,e??""))},text:function Rh(n){return this.tween("text","function"==typeof n?function Fh(n){return function(){var r=n(this);this.textContent=r??""}}(ts(this,"text",n)):function Ph(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function Vh(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Zh(n))},remove:function Th(){return this.on("end.remove",function bh(n){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==n)return;r&&r.removeChild(this)}}(this._id))},tween:function Ou(n,r){var e=this._id;if(n+="",arguments.length<2){for(var v,i=qi(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((v=i[a]).name===n)return v.value;return null}return this.each((null==r?ku:Iu)(e,n,r))},delay:function uh(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?lh:ch)(r,n)):qi(this.node(),r).delay},duration:function ph(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?hh:dh)(r,n)):qi(this.node(),r).duration},ease:function mh(n){var r=this._id;return arguments.length?this.each(fh(r,n)):qi(this.node(),r).ease},end:function Uh(){var n,r,e=this,i=e._id,a=e.size();return new Promise(function(o,v){var T={value:v},N={value:function(){0==--a&&o()}};e.each(function(){var U=lr(this,i),tt=U.on;tt!==n&&((r=(n=tt).copy())._.cancel.push(T),r._.interrupt.push(T),r._.end.push(N)),U.on=r})})}};var ss={time:null,delay:0,duration:250,ease:s(27065).tw};function Wh(n,r){for(var e;!(e=n.__transition)||!(e=e[r]);)if(!(n=n.parentNode))return ss.time=(0,or.zO)(),ss;return e}ea.prototype.interrupt=function Au(n){return this.each(function(){!function wu(n,r){var i,a,v,e=n.__transition,o=!0;if(e){for(v in r=null==r?null:r+"",e)(i=e[v]).name===r?(a=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[v]):o=!1;o&&delete n.__transition}}(this,n)})},ea.prototype.transition=function Xh(n){var r,e;n instanceof cr?(r=n._id,n=n._name):(r=Io(),(e=ss).time=(0,or.zO)(),n=null==n?null:n+"");for(var i=this._groups,a=i.length,o=0;o<a;++o)for(var N,v=i[o],T=v.length,U=0;U<T;++U)(N=v[U])&&wa(N,n,r,U,v,e||Wh(N,r));return new cr(i,this._parents,n,r)};var Oo=s(50727),Mo=s(54968),Qh=s(50590);function id(n){return typeof n>"u"}function od(n){if(Array.isArray(n)){for(var r=0,e=Array(n.length);r<n.length;r++)e[r]=n[r];return e}return Array.from(n)}function ld(n){return Array.isArray(n)?n:Array.from(n)}function oa(){for(var n=arguments.length,r=Array(n),e=0;e<n;e++)r[e]=arguments[e];var i=function(lt,ot){return{a:lt.a*ot.a+lt.c*ot.b,c:lt.a*ot.c+lt.c*ot.d,e:lt.a*ot.e+lt.c*ot.f+lt.e,b:lt.b*ot.a+lt.d*ot.b,d:lt.b*ot.c+lt.d*ot.d,f:lt.b*ot.e+lt.d*ot.f+lt.f}};switch((r=Array.isArray(r[0])?r[0]:r).length){case 0:throw new Error("no matrices provided");case 1:return r[0];case 2:return i(r[0],r[1]);default:var a=r,o=ld(a),v=o[0],T=o[1],N=o.slice(2),U=i(v,T);return oa.apply(void 0,[U].concat(od(N)))}}function Fo(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:n,b:0,d:1,f:r}}function La(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n)}return this}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;const Ro=Symbol("implicit");function os(){var n=new Map,r=[],e=[],i=Ro;function a(o){var v=o+"",T=n.get(v);if(!T){if(i!==Ro)return i;n.set(v,T=r.push(o))}return e[(T-1)%e.length]}return a.domain=function(o){if(!arguments.length)return r.slice();r=[],n=new Map;for(const v of o){const T=v+"";n.has(T)||n.set(T,r.push(v))}return a},a.range=function(o){return arguments.length?(e=Array.from(o),a):e.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.copy=function(){return os(r,e).unknown(i)},La.apply(a,arguments),a}var Rr=s(59695);function ud(n,r){var e;function i(){var a,v,o=e.length,T=0,N=0;for(a=0;a<o;++a)T+=(v=e[a]).x,N+=v.y;for(T=T/o-n,N=N/o-r,a=0;a<o;++a)(v=e[a]).x-=T,v.y-=N}return null==n&&(n=0),null==r&&(r=0),i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(r=+a,i):r},i}function qn(n){return function(){return n}}function yr(){return 1e-6*(Math.random()-.5)}function Bo(n,r,e,i){if(isNaN(r)||isNaN(e))return n;var a,lt,ot,Ct,It,Rt,gt,Gt,te,o=n._root,v={data:i},T=n._x0,N=n._y0,U=n._x1,tt=n._y1;if(!o)return n._root=v,n;for(;o.length;)if((Rt=r>=(lt=(T+U)/2))?T=lt:U=lt,(gt=e>=(ot=(N+tt)/2))?N=ot:tt=ot,a=o,!(o=o[Gt=gt<<1|Rt]))return a[Gt]=v,n;if(Ct=+n._x.call(null,o.data),It=+n._y.call(null,o.data),r===Ct&&e===It)return v.next=o,a?a[Gt]=v:n._root=v,n;do{a=a?a[Gt]=new Array(4):n._root=new Array(4),(Rt=r>=(lt=(T+U)/2))?T=lt:U=lt,(gt=e>=(ot=(N+tt)/2))?N=ot:tt=ot}while((Gt=gt<<1|Rt)==(te=(It>=ot)<<1|Ct>=lt));return a[te]=o,a[Gt]=v,n}function Di(n,r,e,i,a){this.node=n,this.x0=r,this.y0=e,this.x1=i,this.y1=a}function Cd(n){return n[0]}function Ad(n){return n[1]}function ls(n,r,e){var i=new cs(r??Cd,e??Ad,NaN,NaN,NaN,NaN);return null==n?i:i.addAll(n)}function cs(n,r,e,i,a,o){this._x=n,this._y=r,this._x0=e,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function Zo(n){for(var r={data:n.data},e=r;n=n.next;)e=e.next={data:n.data};return r}var Li=ls.prototype=cs.prototype;function Ed(n){return n.x+n.vx}function Dd(n){return n.y+n.vy}function Vo(n){var r,e,i=1,a=1;function o(){for(var N,tt,lt,ot,Ct,It,Rt,U=r.length,gt=0;gt<a;++gt)for(tt=ls(r,Ed,Dd).visitAfter(v),N=0;N<U;++N)Rt=(It=e[(lt=r[N]).index])*It,ot=lt.x+lt.vx,Ct=lt.y+lt.vy,tt.visit(Gt);function Gt(te,Qt,ve,Se,fe){var tn=te.data,ln=te.r,yn=It+ln;if(!tn)return Qt>ot+yn||Se<ot-yn||ve>Ct+yn||fe<Ct-yn;if(tn.index>lt.index){var Dn=ot-tn.x-tn.vx,Ln=Ct-tn.y-tn.vy,Xn=Dn*Dn+Ln*Ln;Xn<yn*yn&&(0===Dn&&(Xn+=(Dn=yr())*Dn),0===Ln&&(Xn+=(Ln=yr())*Ln),Xn=(yn-(Xn=Math.sqrt(Xn)))/Xn*i,lt.vx+=(Dn*=Xn)*(yn=(ln*=ln)/(Rt+ln)),lt.vy+=(Ln*=Xn)*yn,tn.vx-=Dn*(yn=1-yn),tn.vy-=Ln*yn)}}}function v(N){if(N.data)return N.r=e[N.data.index];for(var U=N.r=0;U<4;++U)N[U]&&N[U].r>N.r&&(N.r=N[U].r)}function T(){if(r){var N,tt,U=r.length;for(e=new Array(U),N=0;N<U;++N)e[(tt=r[N]).index]=+n(tt,N,r)}}return"function"!=typeof n&&(n=qn(null==n?1:+n)),o.initialize=function(N){r=N,T()},o.iterations=function(N){return arguments.length?(a=+N,o):a},o.strength=function(N){return arguments.length?(i=+N,o):i},o.radius=function(N){return arguments.length?(n="function"==typeof N?N:qn(+N),T(),o):n},o}Li.copy=function(){var e,i,n=new cs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Zo(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(i=r.source[a])&&(i.length?e.push({source:i,target:r.target[a]=new Array(4)}):r.target[a]=Zo(i));return n},Li.add=function hd(n){var r=+this._x.call(null,n),e=+this._y.call(null,n);return Bo(this.cover(r,e),r,e,n)},Li.addAll=function dd(n){var r,e,a,o,i=n.length,v=new Array(i),T=new Array(i),N=1/0,U=1/0,tt=-1/0,lt=-1/0;for(e=0;e<i;++e)isNaN(a=+this._x.call(null,r=n[e]))||isNaN(o=+this._y.call(null,r))||(v[e]=a,T[e]=o,a<N&&(N=a),a>tt&&(tt=a),o<U&&(U=o),o>lt&&(lt=o));if(N>tt||U>lt)return this;for(this.cover(N,U).cover(tt,lt),e=0;e<i;++e)Bo(this,v[e],T[e],n[e]);return this},Li.cover=function pd(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var e=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(e))a=(e=Math.floor(n))+1,o=(i=Math.floor(r))+1;else{for(var N,U,v=a-e,T=this._root;e>n||n>=a||i>r||r>=o;)switch(U=(r<i)<<1|n<e,N=new Array(4),N[U]=T,T=N,v*=2,U){case 0:a=e+v,o=i+v;break;case 1:e=a-v,o=i+v;break;case 2:a=e+v,i=o-v;break;case 3:e=a-v,i=o-v}this._root&&this._root.length&&(this._root=T)}return this._x0=e,this._y0=i,this._x1=a,this._y1=o,this},Li.data=function fd(){var n=[];return this.visit(function(r){if(!r.length)do{n.push(r.data)}while(r=r.next)}),n},Li.extent=function md(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Li.find=function gd(n,r,e){var i,v,T,N,U,It,Rt,a=this._x0,o=this._y0,tt=this._x1,lt=this._y1,ot=[],Ct=this._root;for(Ct&&ot.push(new Di(Ct,a,o,tt,lt)),null==e?e=1/0:(a=n-e,o=r-e,tt=n+e,lt=r+e,e*=e);It=ot.pop();)if(!(!(Ct=It.node)||(v=It.x0)>tt||(T=It.y0)>lt||(N=It.x1)<a||(U=It.y1)<o))if(Ct.length){var gt=(v+N)/2,Gt=(T+U)/2;ot.push(new Di(Ct[3],gt,Gt,N,U),new Di(Ct[2],v,Gt,gt,U),new Di(Ct[1],gt,T,N,Gt),new Di(Ct[0],v,T,gt,Gt)),(Rt=(r>=Gt)<<1|n>=gt)&&(It=ot[ot.length-1],ot[ot.length-1]=ot[ot.length-1-Rt],ot[ot.length-1-Rt]=It)}else{var te=n-+this._x.call(null,Ct.data),Qt=r-+this._y.call(null,Ct.data),ve=te*te+Qt*Qt;if(ve<e){var Se=Math.sqrt(e=ve);a=n-Se,o=r-Se,tt=n+Se,lt=r+Se,i=Ct.data}}return i},Li.remove=function _d(n){if(isNaN(tt=+this._x.call(null,n))||isNaN(lt=+this._y.call(null,n)))return this;var r,i,a,o,tt,lt,ot,Ct,It,Rt,gt,Gt,e=this._root,v=this._x0,T=this._y0,N=this._x1,U=this._y1;if(!e)return this;if(e.length)for(;;){if((It=tt>=(ot=(v+N)/2))?v=ot:N=ot,(Rt=lt>=(Ct=(T+U)/2))?T=Ct:U=Ct,r=e,!(e=e[gt=Rt<<1|It]))return this;if(!e.length)break;(r[gt+1&3]||r[gt+2&3]||r[gt+3&3])&&(i=r,Gt=gt)}for(;e.data!==n;)if(a=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,a?(o?a.next=o:delete a.next,this):r?(o?r[gt]=o:delete r[gt],(e=r[0]||r[1]||r[2]||r[3])&&e===(r[3]||r[2]||r[1]||r[0])&&!e.length&&(i?i[Gt]=e:this._root=e),this):(this._root=o,this)},Li.removeAll=function vd(n){for(var r=0,e=n.length;r<e;++r)this.remove(n[r]);return this},Li.root=function xd(){return this._root},Li.size=function yd(){var n=0;return this.visit(function(r){if(!r.length)do{++n}while(r=r.next)}),n},Li.visit=function bd(n){var e,a,o,v,T,N,r=[],i=this._root;for(i&&r.push(new Di(i,this._x0,this._y0,this._x1,this._y1));e=r.pop();)if(!n(i=e.node,o=e.x0,v=e.y0,T=e.x1,N=e.y1)&&i.length){var U=(o+T)/2,tt=(v+N)/2;(a=i[3])&&r.push(new Di(a,U,tt,T,N)),(a=i[2])&&r.push(new Di(a,o,tt,U,N)),(a=i[1])&&r.push(new Di(a,U,v,T,tt)),(a=i[0])&&r.push(new Di(a,o,v,U,tt))}return this},Li.visitAfter=function Td(n){var i,r=[],e=[];for(this._root&&r.push(new Di(this._root,this._x0,this._y0,this._x1,this._y1));i=r.pop();){var a=i.node;if(a.length){var o,v=i.x0,T=i.y0,N=i.x1,U=i.y1,tt=(v+N)/2,lt=(T+U)/2;(o=a[0])&&r.push(new Di(o,v,T,tt,lt)),(o=a[1])&&r.push(new Di(o,tt,T,N,lt)),(o=a[2])&&r.push(new Di(o,v,lt,tt,U)),(o=a[3])&&r.push(new Di(o,tt,lt,N,U))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this},Li.x=function wd(n){return arguments.length?(this._x=n,this):this._x},Li.y=function Sd(n){return arguments.length?(this._y=n,this):this._y};var Wi="$";function ka(){}function Go(n,r){var e=new ka;if(n instanceof ka)n.each(function(T,N){e.set(N,T)});else if(Array.isArray(n)){var o,i=-1,a=n.length;if(null==r)for(;++i<a;)e.set(i,n[i]);else for(;++i<a;)e.set(r(o=n[i],i,n),o)}else if(n)for(var v in n)e.set(v,n[v]);return e}ka.prototype=Go.prototype={constructor:ka,has:function(n){return Wi+n in this},get:function(n){return this[Wi+n]},set:function(n,r){return this[Wi+n]=r,this},remove:function(n){var r=Wi+n;return r in this&&delete this[r]},clear:function(){for(var n in this)n[0]===Wi&&delete this[n]},keys:function(){var n=[];for(var r in this)r[0]===Wi&&n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)r[0]===Wi&&n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)r[0]===Wi&&n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)r[0]===Wi&&++n;return n},empty:function(){for(var n in this)if(n[0]===Wi)return!1;return!0},each:function(n){for(var r in this)r[0]===Wi&&n(this[r],r.slice(1),this)}};const us=Go;function Ia(){}var Er=us.prototype;function Od(n){return n.index}function Ho(n,r){var e=n.get(r);if(!e)throw new Error("missing: "+r);return e}function Yo(n){var i,o,v,T,N,r=Od,e=function tt(Rt){return 1/Math.min(T[Rt.source.index],T[Rt.target.index])},a=qn(30),U=1;function lt(Rt){for(var gt=0,Gt=n.length;gt<U;++gt)for(var Qt,ve,Se,fe,tn,ln,yn,te=0;te<Gt;++te)fe=(Se=(Qt=n[te]).target).x+Se.vx-(ve=Qt.source).x-ve.vx||yr(),tn=Se.y+Se.vy-ve.y-ve.vy||yr(),tn*=ln=((ln=Math.sqrt(fe*fe+tn*tn))-o[te])/ln*Rt*i[te],Se.vx-=(fe*=ln)*(yn=N[te]),Se.vy-=tn*yn,ve.vx+=fe*(yn=1-yn),ve.vy+=tn*yn}function ot(){if(v){var Rt,Qt,gt=v.length,Gt=n.length,te=us(v,r);for(Rt=0,T=new Array(gt);Rt<Gt;++Rt)(Qt=n[Rt]).index=Rt,"object"!=typeof Qt.source&&(Qt.source=Ho(te,Qt.source)),"object"!=typeof Qt.target&&(Qt.target=Ho(te,Qt.target)),T[Qt.source.index]=(T[Qt.source.index]||0)+1,T[Qt.target.index]=(T[Qt.target.index]||0)+1;for(Rt=0,N=new Array(Gt);Rt<Gt;++Rt)N[Rt]=T[(Qt=n[Rt]).source.index]/(T[Qt.source.index]+T[Qt.target.index]);i=new Array(Gt),Ct(),o=new Array(Gt),It()}}function Ct(){if(v)for(var Rt=0,gt=n.length;Rt<gt;++Rt)i[Rt]=+e(n[Rt],Rt,n)}function It(){if(v)for(var Rt=0,gt=n.length;Rt<gt;++Rt)o[Rt]=+a(n[Rt],Rt,n)}return null==n&&(n=[]),lt.initialize=function(Rt){v=Rt,ot()},lt.links=function(Rt){return arguments.length?(n=Rt,ot(),lt):n},lt.id=function(Rt){return arguments.length?(r=Rt,lt):r},lt.iterations=function(Rt){return arguments.length?(U=+Rt,lt):U},lt.strength=function(Rt){return arguments.length?(e="function"==typeof Rt?Rt:qn(+Rt),Ct(),lt):e},lt.distance=function(Rt){return arguments.length?(a="function"==typeof Rt?Rt:qn(+Rt),It(),lt):a},lt}function Md(n){return n.x}function Nd(n){return n.y}Ia.prototype=function Id(n,r){var e=new Ia;if(n instanceof Ia)n.each(function(o){e.add(o)});else if(n){var i=-1,a=n.length;if(null==r)for(;++i<a;)e.add(n[i]);else for(;++i<a;)e.add(r(n[i],i,n))}return e}.prototype={constructor:Ia,has:Er.has,add:function(n){return this[Wi+(n+="")]=n,this},remove:Er.remove,clear:Er.clear,values:Er.keys,size:Er.size,empty:Er.empty,each:Er.each};var Fd=Math.PI*(3-Math.sqrt(5));function Wo(n){var r,e=1,i=.001,a=1-Math.pow(i,1/300),o=0,v=.6,T=us(),N=(0,or.HT)(tt),U=(0,ba.Z)("tick","end");function tt(){lt(),U.call("tick",r),e<i&&(N.stop(),U.call("end",r))}function lt(It){var Rt,Gt,gt=n.length;void 0===It&&(It=1);for(var te=0;te<It;++te)for(e+=(o-e)*a,T.each(function(Qt){Qt(e)}),Rt=0;Rt<gt;++Rt)null==(Gt=n[Rt]).fx?Gt.x+=Gt.vx*=v:(Gt.x=Gt.fx,Gt.vx=0),null==Gt.fy?Gt.y+=Gt.vy*=v:(Gt.y=Gt.fy,Gt.vy=0);return r}function ot(){for(var gt,It=0,Rt=n.length;It<Rt;++It){if((gt=n[It]).index=It,null!=gt.fx&&(gt.x=gt.fx),null!=gt.fy&&(gt.y=gt.fy),isNaN(gt.x)||isNaN(gt.y)){var Gt=10*Math.sqrt(It),te=It*Fd;gt.x=Gt*Math.cos(te),gt.y=Gt*Math.sin(te)}(isNaN(gt.vx)||isNaN(gt.vy))&&(gt.vx=gt.vy=0)}}function Ct(It){return It.initialize&&It.initialize(n),It}return null==n&&(n=[]),ot(),r={tick:lt,restart:function(){return N.restart(tt),r},stop:function(){return N.stop(),r},nodes:function(It){return arguments.length?(n=It,ot(),T.each(Ct),r):n},alpha:function(It){return arguments.length?(e=+It,r):e},alphaMin:function(It){return arguments.length?(i=+It,r):i},alphaDecay:function(It){return arguments.length?(a=+It,r):+a},alphaTarget:function(It){return arguments.length?(o=+It,r):o},velocityDecay:function(It){return arguments.length?(v=1-It,r):1-v},force:function(It,Rt){return arguments.length>1?(null==Rt?T.remove(It):T.set(It,Ct(Rt)),r):T.get(It)},find:function(It,Rt,gt){var Qt,ve,Se,fe,tn,Gt=0,te=n.length;for(null==gt?gt=1/0:gt*=gt,Gt=0;Gt<te;++Gt)(Se=(Qt=It-(fe=n[Gt]).x)*Qt+(ve=Rt-fe.y)*ve)<gt&&(tn=fe,gt=Se);return tn},on:function(It,Rt){return arguments.length>1?(U.on(It,Rt),r):U.on(It)}}}function Xo(){var n,r,e,a,i=qn(-30),o=1,v=1/0,T=.81;function N(ot){var Ct,It=n.length,Rt=ls(n,Md,Nd).visitAfter(tt);for(e=ot,Ct=0;Ct<It;++Ct)r=n[Ct],Rt.visit(lt)}function U(){if(n){var ot,It,Ct=n.length;for(a=new Array(Ct),ot=0;ot<Ct;++ot)a[(It=n[ot]).index]=+i(It,ot,n)}}function tt(ot){var It,Rt,Gt,te,Qt,Ct=0,gt=0;if(ot.length){for(Gt=te=Qt=0;Qt<4;++Qt)(It=ot[Qt])&&(Rt=Math.abs(It.value))&&(Ct+=It.value,gt+=Rt,Gt+=Rt*It.x,te+=Rt*It.y);ot.x=Gt/gt,ot.y=te/gt}else{(It=ot).x=It.data.x,It.y=It.data.y;do{Ct+=a[It.data.index]}while(It=It.next)}ot.value=Ct}function lt(ot,Ct,It,Rt){if(!ot.value)return!0;var gt=ot.x-r.x,Gt=ot.y-r.y,te=Rt-Ct,Qt=gt*gt+Gt*Gt;if(te*te/T<Qt)return Qt<v&&(0===gt&&(Qt+=(gt=yr())*gt),0===Gt&&(Qt+=(Gt=yr())*Gt),Qt<o&&(Qt=Math.sqrt(o*Qt)),r.vx+=gt*ot.value*e/Qt,r.vy+=Gt*ot.value*e/Qt),!0;if(!(ot.length||Qt>=v)){(ot.data!==r||ot.next)&&(0===gt&&(Qt+=(gt=yr())*gt),0===Gt&&(Qt+=(Gt=yr())*Gt),Qt<o&&(Qt=Math.sqrt(o*Qt)));do{ot.data!==r&&(r.vx+=gt*(te=a[ot.data.index]*e/Qt),r.vy+=Gt*te)}while(ot=ot.next)}}return N.initialize=function(ot){n=ot,U()},N.strength=function(ot){return arguments.length?(i="function"==typeof ot?ot:qn(+ot),U(),N):i},N.distanceMin=function(ot){return arguments.length?(o=ot*ot,N):Math.sqrt(o)},N.distanceMax=function(ot){return arguments.length?(v=ot*ot,N):Math.sqrt(v)},N.theta=function(ot){return arguments.length?(T=ot*ot,N):Math.sqrt(T)},N}function Rd(n,r,e){var i,o,v,a=qn(.1);function T(U){for(var tt=0,lt=i.length;tt<lt;++tt){var ot=i[tt],Ct=ot.x-r||1e-6,It=ot.y-e||1e-6,Rt=Math.sqrt(Ct*Ct+It*It),gt=(v[tt]-Rt)*o[tt]*U/Rt;ot.vx+=Ct*gt,ot.vy+=It*gt}}function N(){if(i){var U,tt=i.length;for(o=new Array(tt),v=new Array(tt),U=0;U<tt;++U)v[U]=+n(i[U],U,i),o[U]=isNaN(v[U])?0:+a(i[U],U,i)}}return"function"!=typeof n&&(n=qn(+n)),null==r&&(r=0),null==e&&(e=0),T.initialize=function(U){i=U,N()},T.strength=function(U){return arguments.length?(a="function"==typeof U?U:qn(+U),N(),T):a},T.radius=function(U){return arguments.length?(n="function"==typeof U?U:qn(+U),N(),T):n},T.x=function(U){return arguments.length?(r=+U,T):r},T.y=function(U){return arguments.length?(e=+U,T):e},T}function Bd(n){var e,i,a,r=qn(.1);function o(T){for(var tt,N=0,U=e.length;N<U;++N)(tt=e[N]).vx+=(a[N]-tt.x)*i[N]*T}function v(){if(e){var T,N=e.length;for(i=new Array(N),a=new Array(N),T=0;T<N;++T)i[T]=isNaN(a[T]=+n(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof n&&(n=qn(null==n?0:+n)),o.initialize=function(T){e=T,v()},o.strength=function(T){return arguments.length?(r="function"==typeof T?T:qn(+T),v(),o):r},o.x=function(T){return arguments.length?(n="function"==typeof T?T:qn(+T),v(),o):n},o}function Zd(n){var e,i,a,r=qn(.1);function o(T){for(var tt,N=0,U=e.length;N<U;++N)(tt=e[N]).vy+=(a[N]-tt.y)*i[N]*T}function v(){if(e){var T,N=e.length;for(i=new Array(N),a=new Array(N),T=0;T<N;++T)i[T]=isNaN(a[T]=+n(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof n&&(n=qn(null==n?0:+n)),o.initialize=function(T){e=T,v()},o.strength=function(T){return arguments.length?(r="function"==typeof T?T:qn(+T),v(),o):r},o.y=function(T){return arguments.length?(n="function"==typeof T?T:qn(+T),v(),o):n},o}var Vd=s(67824);function Gd(n,r,e){var i=new or.B7,a=r;return null==r?(i.restart(n,r,e),i):(r=+r,e=null==e?(0,or.zO)():+e,i.restart(function o(v){v+=a,i.restart(o,a+=r,e),n(v)},r,e),i)}const Ud=["linkTemplate"],zd=["nodeTemplate"],Hd=["clusterTemplate"],Yd=["defsTemplate"],Wd=["miniMapNodeTemplate"],Xd=["nodeElement"],$d=["linkElement"];function Qd(n,r){if(1&n&&(t.O4$(),t.GkF(0,14)),2&n){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.defsTemplate)}}function jd(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",15)),2&n){const e=r.$implicit;t.uIk("d",e.textPath)("id",e.id)}}const la=function(n){return{$implicit:n}};function Jd(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function Kd(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function qd(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onClick(o))}),t.YNc(2,Jd,1,4,"ng-container",18),t.YNc(3,Kd,4,6,"g",19),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldClusters.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!i.clusterTemplate)}}function tp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.linkTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function ep(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",26)),2&n){const e=t.oxw().$implicit;t.uIk("d",e.line)}}function np(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,tp,1,4,"ng-container",18),t.YNc(3,ep,1,1,"path",25),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.Q6J("id",e.id),t.xp6(2),t.Q6J("ngIf",i.linkTemplate),t.xp6(1),t.Q6J("ngIf",!i.linkTemplate)}}function ip(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function rp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit;t.uIk("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function ap(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw(2);return t.KtG(v.onClick(o))})("mousedown",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(T.onNodeMouseDown(a,v))}),t.YNc(2,ip,1,4,"ng-container",18),t.YNc(3,rp,1,3,"circle",29),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate)}}function sp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onTouchStart(a))})("touchend",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onTouchEnd(a))}),t.TgZ(1,"defs"),t.YNc(2,Qd,1,1,"ng-container",5),t.YNc(3,jd,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isPanning=!0)}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,qd,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,np,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,ap,4,6,"g",13),t.qZA()()}if(2&n){const e=t.oxw();t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",e.defsTemplate),t.xp6(1),t.Q6J("ngForOf",e.graph.edges),t.xp6(1),t.uIk("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function op(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function lp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,la,e))}}function cp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.uIk("cx",e.dimension.width/2/i.minimapScaleCoefficient)("cy",e.dimension.height/2/i.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function up(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,op,1,4,"ng-container",18),t.YNc(3,lp,1,4,"ng-container",18),t.YNc(4,cp,1,3,"circle",29),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.miniMapNodeTemplate&&i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate&&!i.miniMapNodeTemplate)}}function hp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",31)(1,"rect",32),t.NdJ("mousedown",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onMinimapPanTo(a))}),t.qZA(),t.TgZ(2,"g")(3,"g",33),t.YNc(4,up,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onMinimapDragMouseDown())}),t.qZA()()()}if(2&n){const e=t.oxw();t.uIk("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),t.xp6(1),t.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/e.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),t.xp6(1),t.ekj("panning",e.isMinimapPanning),t.uIk("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const dp=["*"],$o={};function ur(){let n=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return n=`a${n}`,$o[n]?ur():($o[n]=!0,n)}var Br=(()=>{return(n=Br||(Br={})).Both="both",n.Horizontal="horizontal",n.Vertical="vertical",Br;var n})(),Zr=(()=>{return(n=Zr||(Zr={})).UpperLeft="UpperLeft",n.UpperRight="UpperRight",Zr;var n})();function pp(n,r,e){e=e||{};let i,a,o,v=null,T=0;function N(){T=!1===e.leading?0:+new Date,v=null,o=n.apply(i,a)}return function(...U){const tt=+new Date;!T&&!1===e.leading&&(T=tt);const lt=r-(tt-T);return i=this,a=U,lt<=0?(clearTimeout(v),v=null,T=tt,o=n.apply(i,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,lt)),o}}function fp(n,r){return function(i,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:pp(o.value,n,r)}),this[a]}}}}const Qo=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class mp{constructor(r,e,i){"string"==typeof r&&(r=Qo.find(a=>a.name===r)),this.colorDomain=r.domain,this.domain=e,this.customColors=i,this.scale=this.generateColorScheme(r,this.domain)}generateColorScheme(r,e){return"string"==typeof r&&(r=Qo.find(i=>i.name===r)),os().range(r.domain).domain(e)}getColor(r){if(null==r)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(r);const e=r.toString();let i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),i?i.value:this.scale(r)}}let _p=(()=>{class n{constructor(e,i){this.element=e,this.zone=i,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:i,offsetWidth:a}=this.element.nativeElement;i&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),n})();var Vr=(()=>{return(n=Vr||(Vr={})).LEFT_TO_RIGHT="LR",n.RIGHT_TO_LEFT="RL",n.TOP_TO_BOTTOM="TB",n.BOTTOM_TO_TOM="BT",Vr;var n})();function Gr(n){return"string"==typeof n?{id:n,x:0,y:0}:n}function Jo(n,r){return"number"==typeof r?n[r]:r}const Ko={dagre:class vp{constructor(){this.defaultSettings={orientation:Vr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Rr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}return r}updateEdge(r,e){const i=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Rr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=ur()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreCluster:class xp{constructor(){this.defaultSettings={orientation:Vr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Rr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;const e=i=>{const a=this.dagreGraph._nodes[i.id];return{...i,position:{x:a.x,y:a.y},dimension:{width:a.width,height:a.height}}};return r.clusters=(r.clusters||[]).map(e),r.nodes=r.nodes.map(e),r}updateEdge(r,e){const i=r.nodes.find(N=>N.id===e.source),a=r.nodes.find(N=>N.id===e.target),o=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+o*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Rr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreClusters=r.clusters||[],this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=ur()),a});for(const i of this.dagreNodes)this.dagreGraph.setNode(i.id,i);for(const i of this.dagreClusters)this.dagreGraph.setNode(i.id,i),i.childNodeIds.forEach(a=>{this.dagreGraph.setParent(a,i.id)});for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreNodesOnly:class bp{constructor(){this.defaultSettings={orientation:Vr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Rr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(o=>o.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}for(const e of r.edges)this.updateEdge(r,e);return r}updateEdge(r,e){const i=r.nodes.find(It=>It.id===e.source),a=r.nodes.find(It=>It.id===e.target),o="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",v="y"===o?"x":"y",T="y"===o?"height":"width",N=i.position[o]<=a.position[o]?-1:1,U={[v]:i.position[v],[o]:i.position[o]-N*(i.dimension[T]/2)},tt={[v]:a.position[v],[o]:a.position[o]+N*(a.dimension[T]/2)},lt=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[U,{[v]:U[v],[o]:U[o]-N*lt},{[v]:tt[v],[o]:tt[o]+N*lt},tt];const Ct=r.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return Ct&&(Ct.points=e.points),r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Rr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=ur()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},d3ForceDirected:class Tp{constructor(){this.defaultSettings={force:Wo().force("charge",Xo().strength(-150)).force("collide",Vo(5)),forceLink:Yo().id(r=>r.id).distance(()=>100)},this.settings={},this.outputGraph$=new Hi.x}run(r){return this.inputGraph=r,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>({...e}))],edges:[...this.inputGraph.edges.map(e=>({...e}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.nodes(this.d3Graph.nodes).force("link",i.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(r){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>({...e,id:e.id||ur(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>({...e,source:Gr(e.source).id,target:Gr(e.target).id,points:[{x:Gr(e.source).x,y:Gr(e.source).y},{x:Gr(e.target).x,y:Gr(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){this.settings.force.alphaTarget(.3).restart();const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.draggingStart={x:e.x-i.x,y:e.y-i.y},i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDrag(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDragEnd(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.settings.force.alphaTarget(0),i.fx=void 0,i.fy=void 0)}},colaForceDirected:class Cp{constructor(){this.defaultSettings={force:(0,Vd.d3adaptor)({...x,...c,..._}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new Hi.x}run(r){return this.inputGraph=r,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>({...e,width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(i=>this.inputGraph.clusters.findIndex(a=>a.id===i)).filter(i=>i>=0),leaves:e.childNodeIds.map(i=>this.inputGraph.nodes.findIndex(a=>a.id===i)).filter(i=>i>=0)}))],links:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(-1!==i&&-1!==a)return{...e,source:i,target:a}}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(o=>e.source===o.id),a=this.inputGraph.nodes.findIndex(o=>e.target===o.id);if(!(i>=0&&a>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(r){return this.outputGraph.nodes=r.nodes.map(e=>({...e,id:e.id||ur(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=r.links.map(e=>{const i=Jo(r.nodes,e.source),a=Jo(r.nodes,e.target);return{...e,source:i.id,target:a.id,points:[i.bounds.rayIntersection(a.bounds.cx(),a.bounds.cy()),a.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy())]}}).concat(r.groupLinks.map(e=>{const i=r.nodes.find(T=>T.id===e.source),a=r.nodes.find(T=>T.id===e.target),o=i||r.groups.find(T=>T.id===e.source),v=a||r.groups.find(T=>T.id===e.target);return{...e,source:o.id,target:v.id,points:[o.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(o.bounds.cx(),o.bounds.cy())]}})),this.outputGraph.clusters=r.groups.map((e,i)=>({...this.inputGraph.clusters[i],dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(this.draggingStart={x:a.x-e.x,y:a.y-e.y},a.fixed=1,this.settings.force.start())}onDrag(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(a.x=this.draggingStart.x+e.x,a.y=this.draggingStart.y+e.y)}onDragEnd(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(o=>o.id===r.id),a=this.internalGraph.nodes[i];!a||(a.fixed=0)}}};let qo=(()=>{class n{getLayout(e){if(Ko[e])return new Ko[e];throw new Error(`Unknown layout type '${e}'`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),wp=(()=>{class n{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),o=e.wheelDelta?i<0:i>0;(e.wheelDelta?i>0:i<0)?this.mouseWheelUp.emit(e):o&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","mouseWheel",""]],hostBindings:function(e,i){1&e&&t.NdJ("mousewheel",function(o){return i.onMouseWheelChrome(o)})("DOMMouseScroll",function(o){return i.onMouseWheelFirefox(o)})("wheel",function(o){return i.onWheel(o)})("onmousewheel",function(o){return i.onMouseWheelIE(o)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),n})(),Ap=(()=>{class n{constructor(e,i,a,o){this.el=e,this.zone=i,this.cd=a,this.layoutService=o,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Br.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=Zr.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new Oo.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=v=>v.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${ur()}`}ngOnChanges(e){this.basicUpdate();const{layoutSettings:a}=e;this.setLayout(this.layout),a&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new _p(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=fu.beta(1)),this.zone.run(()=>{this.dims=function gp({width:n,height:r}){let e=n,i=r;return e=Math.max(0,e),i=Math.max(0,i),{width:Math.floor(e),height:Math.floor(i)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Oo.w0;const e=i=>(i.meta||(i.meta={}),i.id||(i.id=ur()),i.dimension?i.meta.forceDimensions=void 0===i.meta.forceDimensions||i.meta.forceDimensions:(i.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},i.meta.forceDimensions=!1),i.position={x:0,y:0},i.data=i.data?i.data:{},i);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(i=>(i.id||(i.id=ur()),i)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),i=e instanceof pt.y?e:(0,yt.of)(e);this.graphSubscription.add(i.subscribe(a=>{this.graph=a,this.tick()})),0!==this.graph.nodes.length&&i.pipe((0,Qh.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),e.add(o.id)});const i=new Set;(this.graph.clusters||[]).map(o=>{o.transform=`translate(${o.position.x-o.dimension.width/2||0}, ${o.position.y-o.dimension.height/2||0})`,o.data||(o.data={}),o.data.color=this.colors.getColor(this.groupResultsBy(o)),i.add(o.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=i},500);const a=[];for(const o in this.graph.edgeLabels){const v=this.graph.edgeLabels[o],T=o.replace(/[^\w-]*/g,""),N=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let U=this._oldLinks.find(N?Rt=>`${Rt.source}${Rt.target}${Rt.id}`===T:Rt=>`${Rt.source}${Rt.target}`===T);const tt=this.graph.edges.find(N?Rt=>`${Rt.source}${Rt.target}${Rt.id}`===T:Rt=>`${Rt.source}${Rt.target}`===T);U?U.data&&tt&&tt.data&&JSON.stringify(U.data)!==JSON.stringify(tt.data)&&(U.data=tt.data):U=tt||v,U.oldLine=U.line;const lt=v.points,ot=this.generateLine(lt),Ct=Object.assign({},U);Ct.line=ot,Ct.points=lt,this.updateMidpointOnEdge(Ct,lt);const It=lt[Math.floor(lt.length/2)];It&&(Ct.textTransform=`translate(${It.x||0},${It.y||0})`),Ct.textAngle=0,Ct.oldLine||(Ct.oldLine=Ct.line),this.calcDominantBaseline(Ct),a.push(Ct)}this.graph.edges=a,this.graph.edges&&(this._oldLinks=this.graph.edges.map(o=>{const v=Object.assign({},o);return v.oldLine=o.line,v})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case Zr.UpperLeft:return"";case Zr.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,i=-1/0,a=1/0,o=-1/0;for(let v=0;v<this.graph.nodes.length;v++){const T=this.graph.nodes[v];e=T.position.x<e?T.position.x:e,a=T.position.y<a?T.position.y:a,i=T.position.x+T.dimension.width>i?T.position.x+T.dimension.width:i,o=T.position.y+T.dimension.height>o?T.position.y+T.dimension.height:o}e-=100,a-=100,i+=100,o+=100,this.graphDims.width=i-e,this.graphDims.height=o-a,this.minimapOffsetX=e,this.minimapOffsetY=a}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const i=e.nativeElement,a=this.graph.nodes.find(v=>v.id===i.id);if(!a)return;let o;try{if(o=i.getBBox(),!o.width||!o.height)return}catch{return}if(a.dimension.height=this.nodeHeight?a.dimension.height&&a.meta.forceDimensions?a.dimension.height:this.nodeHeight:a.dimension.height&&a.meta.forceDimensions?a.dimension.height:o.height,this.nodeMaxHeight&&(a.dimension.height=Math.max(a.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(a.dimension.height=Math.min(a.dimension.height,this.nodeMinHeight)),this.nodeWidth)a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:this.nodeWidth;else if(i.getElementsByTagName("text").length){let v;try{for(const T of i.getElementsByTagName("text")){const N=T.getBBox();v?(N.width>v.width&&(v.width=N.width),N.height>v.height&&(v.height=N.height)):v=N}}catch{return}a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:v.width+20}else a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:o.width;this.nodeMaxWidth&&(a.dimension.width=Math.max(a.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(a.dimension.width=Math.min(a.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(i=>{const a=this.graph.edges.find(o=>o.id===i.nativeElement.id);a&&(Ks(i.nativeElement).select(".line").attr("d",a.oldLine).transition().ease(ao).duration(e?500:0).attr("d",a.line),Ks(this.el.nativeElement).select(`#${a.id}`).attr("d",a.oldTextPath).transition().ease(ao).duration(e?500:0).attr("d",a.textPath),this.updateMidpointOnEdge(a,a.points))})}calcDominantBaseline(e){const i=e.points[0],a=e.points[e.points.length-1];e.oldTextPath=e.textPath,a.x<i.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return function yu(){var n=vu,r=xu,e=ya(!0),i=null,a=_u,o=null;function v(T){var N,tt,ot,U=T.length,lt=!1;for(null==i&&(o=a(ot=gu())),N=0;N<=U;++N)!(N<U&&e(tt=T[N],N,T))===lt&&((lt=!lt)?o.lineStart():o.lineEnd()),lt&&o.point(+n(tt,N,T),+r(tt,N,T));if(ot)return o=null,ot+""||null}return v.x=function(T){return arguments.length?(n="function"==typeof T?T:ya(+T),v):n},v.y=function(T){return arguments.length?(r="function"==typeof T?T:ya(+T),v):r},v.defined=function(T){return arguments.length?(e="function"==typeof T?T:ya(!!T),v):e},v.curve=function(T){return arguments.length?(a=T,null!=i&&(o=a(i)),v):a},v.context=function(T){return arguments.length?(null==T?i=o=null:o=a(i=T),v):i},v}().x(a=>a.x).y(a=>a.y).curve(this.curve)(e)}onZoom(e,i){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const a=1+("in"===i?this.zoomSpeed:-this.zoomSpeed),o=this.zoomLevel*a;if(!(o<=this.minZoomLevel||o>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const v=e.clientX,T=e.clientY,N=this.el.nativeElement.querySelector("svg"),U=N.querySelector("g.chart"),tt=N.createSVGPoint();tt.x=v,tt.y=T;const lt=tt.matrixTransform(U.getScreenCTM().inverse());this.pan(lt.x,lt.y,!0),this.zoom(a),this.pan(-lt.x,-lt.y,!0)}else this.zoom(a)}pan(e,i,a=!1){const o=a?1:this.zoomLevel;this.transformationMatrix=oa(this.transformationMatrix,Fo(e/o,i/o)),this.updateTransform()}panTo(e,i){null==e||isNaN(e)||null==i||isNaN(i)||(this.transformationMatrix=oa(this.transformationMatrix,Fo((-this.panOffsetX-e*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-i*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(e){this.transformationMatrix=oa(this.transformationMatrix,function rd(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return id(r)&&(r=n),{a:n,c:0,e:0,b:0,d:r,f:0}}(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const i=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(i,e),i.position.x+=e.movementX/this.zoomLevel,i.position.y+=e.movementY/this.zoomLevel,i.transform=`translate(${i.position.x-i.dimension.width/2}, ${i.position.y-i.dimension.height/2})`;for(const v of this.graph.edges)if((v.target===i.id||v.source===i.id||v.target.id===i.id||v.source.id===i.id)&&this.layout&&"string"!=typeof this.layout){const T=this.layout.updateEdge(this.graph,v),N=T instanceof pt.y?T:(0,yt.of)(T);this.graphSubscription.add(N.subscribe(U=>{this.graph=U,this.redrawEdge(v)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const i=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=i}updateTransform(){this.transform=function sd(n){return function Po(n){return"matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")"}(n)}(function cd(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(n.a*r)/r,b:Math.round(n.b*r)/r,c:Math.round(n.c*r)/r,d:Math.round(n.d*r)/r,e:Math.round(n.e*r)/r,f:Math.round(n.f*r)/r}}(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const i=this.activeEntries.indexOf(e);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,i)=>-1!==e.indexOf(i)?e:e.concat([i]),[]).sort()}trackLinkBy(e,i){return i.id}trackNodeBy(e,i){return i.id}setColors(){this.colors=new mp(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const i=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,o=i-this._touchLastX,v=a-this._touchLastY;this._touchLastX=i,this._touchLastY=a,this.pan(o,v)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,i){!this.draggingEnabled||(this.isDragging=!0,this.draggingNode=i,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(i,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){this.panTo((e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let a=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);a<this.minZoomLevel&&(a=this.minZoomLevel),a>this.maxZoomLevel&&(a=this.maxZoomLevel),a!==this.zoomLevel&&(this.zoomLevel=a,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const i=this.graph.nodes.find(a=>a.id===e);!i||this.panTo(i.position.x,i.position.y)}panWithConstraints(e,i){let a=i.movementX,o=i.movementY;switch(this.isMinimapPanning&&(a=-this.minimapScaleCoefficient*a*this.zoomLevel,o=-this.minimapScaleCoefficient*o*this.zoomLevel),e){case Br.Horizontal:this.pan(a,0);break;case Br.Vertical:this.pan(0,o);break;default:this.pan(a,o)}}updateMidpointOnEdge(e,i){if(e&&i)if(i.length%2==1)e.midPoint=i[Math.floor(i.length/2)];else{const a=i[i.length/2],o=i[i.length/2-1];e.midPoint={x:(a.x+o.x)/2,y:(a.y+o.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,i;const a=this.el.nativeElement;if(null!==a.parentNode){const o=a.parentNode.getBoundingClientRect();e=o.width,i=o.height}return e&&i?{width:e,height:i}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const i=(0,Mo.R)(window,"resize").pipe((0,Y.b)(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(qo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-graph"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,Ud,5),t.Suo(a,zd,5),t.Suo(a,Hd,5),t.Suo(a,Yd,5),t.Suo(a,Wd,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.linkTemplate=o.first),t.iGM(o=t.CRH())&&(i.nodeTemplate=o.first),t.iGM(o=t.CRH())&&(i.clusterTemplate=o.first),t.iGM(o=t.CRH())&&(i.defsTemplate=o.first),t.iGM(o=t.CRH())&&(i.miniMapNodeTemplate=o.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(Xd,5),t.Gf($d,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.nodeElements=a),t.iGM(a=t.CRH())&&(i.linkElements=a)}},hostBindings:function(e,i){1&e&&t.NdJ("mousemove",function(o){return i.onMouseMove(o)},!1,t.evT)("mousedown",function(o){return i.onMouseDown(o)},!1,t.evT)("click",function(o){return i.graphClick(o)},!1,t.evT)("touchmove",function(o){return i.onTouchMove(o)},!1,t.evT)("mouseup",function(o){return i.onMouseUp(o)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:dp,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(o){return i.onZoom(o,"in")})("mouseWheelDown",function(o){return i.onZoom(o,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,sp,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,hp,6,15,"g",3),t.qZA()()),2&e&&(t.Udp("width",i.width,"px"),t.Q6J("@animationState","active")("@.disabled",!i.animations),t.xp6(1),t.uIk("width",i.width)("height",i.height),t.xp6(1),t.Q6J("ngIf",i.initialized&&i.graph),t.xp6(1),t.uIk("id",i.minimapClipPathId),t.xp6(1),t.uIk("width",i.graphDims.width/i.minimapScaleCoefficient)("height",i.graphDims.height/i.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",i.showMiniMap))},dependencies:[wp,m.O5,m.tP,m.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,on.X$)("animationState",[(0,on.eR)(":enter",[(0,on.oB)({opacity:0}),(0,on.jt)("500ms 100ms",(0,on.oB)({opacity:1}))])])]},changeDetection:0}),(0,di.gn)([fp(500)],n.prototype,"updateMinimap",null),n})(),Sp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[qo],imports:[[m.ez]]}),n})(),Ep=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez],Sp]}),n})();var tl=s(84080);s(52016),s(56758),s(37656),s(29132),s(18429);Math;function ca(n){return{type:n}}function ul(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function _s(n){let r=n,e=n;function i(v,T,N,U){for(null==N&&(N=0),null==U&&(U=v.length);N<U;){const tt=N+U>>>1;e(v[tt],T)<0?N=tt+1:U=tt}return N}return 1===n.length&&(r=(v,T)=>n(v)-T,e=function Bp(n){return(r,e)=>ul(n(r),e)}(n)),{left:i,center:function o(v,T,N,U){null==N&&(N=0),null==U&&(U=v.length);const tt=i(v,T,N,U-1);return tt>N&&r(v[tt-1],T)>-r(v[tt],T)?tt-1:tt},right:function a(v,T,N,U){for(null==N&&(N=0),null==U&&(U=v.length);N<U;){const tt=N+U>>>1;e(v[tt],T)>0?U=tt:N=tt+1}return N}}}["w","e"].map(ca),["n","s"].map(ca),["n","w","e","s","nw","ne","sw","se"].map(ca);var vs=Math.sqrt(50),xs=Math.sqrt(10),ys=Math.sqrt(2);function bs(n,r,e){var i=Math.abs(r-n)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/a;return o>=vs?a*=10:o>=xs?a*=5:o>=ys&&(a*=2),r<n?-a:a}const pr=1e3,Xi=6e4,fr=60*Xi,Dr=24*fr,Ts=7*Dr,dl=30*Dr,Cs=365*Dr;var ws=new Date,As=new Date;function fi(n,r,e,i){function a(o){return n(o=0===arguments.length?new Date:new Date(+o)),o}return a.floor=function(o){return n(o=new Date(+o)),o},a.ceil=function(o){return n(o=new Date(o-1)),r(o,1),n(o),o},a.round=function(o){var v=a(o),T=a.ceil(o);return o-v<T-o?v:T},a.offset=function(o,v){return r(o=new Date(+o),null==v?1:Math.floor(v)),o},a.range=function(o,v,T){var U,N=[];if(o=a.ceil(o),T=null==T?1:Math.floor(T),!(o<v&&T>0))return N;do{N.push(U=new Date(+o)),r(o,T),n(o)}while(U<o&&o<v);return N},a.filter=function(o){return fi(function(v){if(v>=v)for(;n(v),!o(v);)v.setTime(v-1)},function(v,T){if(v>=v)if(T<0)for(;++T<=0;)for(;r(v,-1),!o(v););else for(;--T>=0;)for(;r(v,1),!o(v););})},e&&(a.count=function(o,v){return ws.setTime(+o),As.setTime(+v),n(ws),n(As),Math.floor(e(ws,As))},a.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?a.filter(i?function(v){return i(v)%o==0}:function(v){return a.count(0,v)%o==0}):a:null}),a}var Na=fi(function(){},function(n,r){n.setTime(+n+r)},function(n,r){return r-n});Na.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?fi(function(r){r.setTime(Math.floor(r/n)*n)},function(r,e){r.setTime(+r+e*n)},function(r,e){return(e-r)/n}):Na:null};const Vp=Na;const ua=fi(function(n){n.setTime(n-n.getMilliseconds())},function(n,r){n.setTime(+n+r*pr)},function(n,r){return(r-n)/pr},function(n){return n.getUTCSeconds()});const ml=fi(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*pr)},function(n,r){n.setTime(+n+r*Xi)},function(n,r){return(r-n)/Xi},function(n){return n.getMinutes()});const _l=fi(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*pr-n.getMinutes()*Xi)},function(n,r){n.setTime(+n+r*fr)},function(n,r){return(r-n)/fr},function(n){return n.getHours()});const Pa=fi(n=>n.setHours(0,0,0,0),(n,r)=>n.setDate(n.getDate()+r),(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Xi)/Dr,n=>n.getDate()-1);function Lr(n){return fi(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Xi)/Ts})}var Fa=Lr(0),Ra=Lr(1),Hr=(Lr(2),Lr(3),Lr(4));const yl=(Lr(5),Lr(6),fi(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,r){n.setMonth(n.getMonth()+r)},function(n,r){return r.getMonth()-n.getMonth()+12*(r.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}));var Ss=fi(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,r){n.setFullYear(n.getFullYear()+r)},function(n,r){return r.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});Ss.every=function(n){return isFinite(n=Math.floor(n))&&n>0?fi(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*n)}):null};const kr=Ss;const Yp=fi(function(n){n.setUTCSeconds(0,0)},function(n,r){n.setTime(+n+r*Xi)},function(n,r){return(r-n)/Xi},function(n){return n.getUTCMinutes()});const Wp=fi(function(n){n.setUTCMinutes(0,0,0)},function(n,r){n.setTime(+n+r*fr)},function(n,r){return(r-n)/fr},function(n){return n.getUTCHours()});const Es=fi(function(n){n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCDate(n.getUTCDate()+r)},function(n,r){return(r-n)/Dr},function(n){return n.getUTCDate()-1});function Ir(n){return fi(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-n)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/Ts})}var Ds=Ir(0),Ba=Ir(1),Yr=(Ir(2),Ir(3),Ir(4));const Jp=(Ir(5),Ir(6),fi(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCMonth(n.getUTCMonth()+r)},function(n,r){return r.getUTCMonth()-n.getUTCMonth()+12*(r.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}));var Ls=fi(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r)},function(n,r){return r.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Ls.every=function(n){return isFinite(n=Math.floor(n))&&n>0?fi(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/n)*n),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*n)}):null};const Wr=Ls;function Al(n,r,e,i,a,o){const v=[[ua,1,pr],[ua,5,5e3],[ua,15,15e3],[ua,30,3e4],[o,1,Xi],[o,5,5*Xi],[o,15,15*Xi],[o,30,30*Xi],[a,1,fr],[a,3,3*fr],[a,6,6*fr],[a,12,12*fr],[i,1,Dr],[i,2,2*Dr],[e,1,Ts],[r,1,dl],[r,3,3*dl],[n,1,Cs]];function N(U,tt,lt){const ot=Math.abs(tt-U)/lt,Ct=_s(([,,gt])=>gt).right(v,ot);if(Ct===v.length)return n.every(bs(U/Cs,tt/Cs,lt));if(0===Ct)return Vp.every(Math.max(bs(U,tt,lt),1));const[It,Rt]=v[ot/v[Ct-1][2]<v[Ct][2]/ot?Ct-1:Ct];return It.every(Rt)}return[function T(U,tt,lt){const ot=tt<U;ot&&([U,tt]=[tt,U]);const Ct=lt&&"function"==typeof lt.range?lt:N(U,tt,lt),It=Ct?Ct.range(U,+tt+1):[];return ot?It.reverse():It},N]}const[T1,C1]=Al(Wr,Jp,Ds,Es,Wp,Yp),[Kp,qp]=Al(kr,yl,Fa,Pa,_l,ml);function ks(n){if(0<=n.y&&n.y<100){var r=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return r.setFullYear(n.y),r}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Is(n){if(0<=n.y&&n.y<100){var r=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return r.setUTCFullYear(n.y),r}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function ha(n,r,e){return{y:n,m:r,d:e,H:0,M:0,S:0,L:0}}var Sl={"-":"",_:" ",0:"0"},mi=/^\s*\d+/,ef=/^%/,nf=/[\\^$*+?|[\]().{}]/g;function xn(n,r,e){var i=n<0?"-":"",a=(i?-n:n)+"",o=a.length;return i+(o<e?new Array(e-o+1).join(r)+a:a)}function rf(n){return n.replace(nf,"\\$&")}function da(n){return new RegExp("^(?:"+n.map(rf).join("|")+")","i")}function pa(n){return new Map(n.map((r,e)=>[r.toLowerCase(),e]))}function af(n,r,e){var i=mi.exec(r.slice(e,e+1));return i?(n.w=+i[0],e+i[0].length):-1}function sf(n,r,e){var i=mi.exec(r.slice(e,e+1));return i?(n.u=+i[0],e+i[0].length):-1}function of(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.U=+i[0],e+i[0].length):-1}function lf(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.V=+i[0],e+i[0].length):-1}function cf(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.W=+i[0],e+i[0].length):-1}function El(n,r,e){var i=mi.exec(r.slice(e,e+4));return i?(n.y=+i[0],e+i[0].length):-1}function Dl(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function uf(n,r,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function hf(n,r,e){var i=mi.exec(r.slice(e,e+1));return i?(n.q=3*i[0]-3,e+i[0].length):-1}function df(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.m=i[0]-1,e+i[0].length):-1}function Ll(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.d=+i[0],e+i[0].length):-1}function pf(n,r,e){var i=mi.exec(r.slice(e,e+3));return i?(n.m=0,n.d=+i[0],e+i[0].length):-1}function kl(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.H=+i[0],e+i[0].length):-1}function ff(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.M=+i[0],e+i[0].length):-1}function mf(n,r,e){var i=mi.exec(r.slice(e,e+2));return i?(n.S=+i[0],e+i[0].length):-1}function gf(n,r,e){var i=mi.exec(r.slice(e,e+3));return i?(n.L=+i[0],e+i[0].length):-1}function _f(n,r,e){var i=mi.exec(r.slice(e,e+6));return i?(n.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function vf(n,r,e){var i=ef.exec(r.slice(e,e+1));return i?e+i[0].length:-1}function xf(n,r,e){var i=mi.exec(r.slice(e));return i?(n.Q=+i[0],e+i[0].length):-1}function yf(n,r,e){var i=mi.exec(r.slice(e));return i?(n.s=+i[0],e+i[0].length):-1}function Il(n,r){return xn(n.getDate(),r,2)}function bf(n,r){return xn(n.getHours(),r,2)}function Tf(n,r){return xn(n.getHours()%12||12,r,2)}function Cf(n,r){return xn(1+Pa.count(kr(n),n),r,3)}function Ol(n,r){return xn(n.getMilliseconds(),r,3)}function wf(n,r){return Ol(n,r)+"000"}function Af(n,r){return xn(n.getMonth()+1,r,2)}function Sf(n,r){return xn(n.getMinutes(),r,2)}function Ef(n,r){return xn(n.getSeconds(),r,2)}function Df(n){var r=n.getDay();return 0===r?7:r}function Lf(n,r){return xn(Fa.count(kr(n)-1,n),r,2)}function Ml(n){var r=n.getDay();return r>=4||0===r?Hr(n):Hr.ceil(n)}function kf(n,r){return n=Ml(n),xn(Hr.count(kr(n),n)+(4===kr(n).getDay()),r,2)}function If(n){return n.getDay()}function Of(n,r){return xn(Ra.count(kr(n)-1,n),r,2)}function Mf(n,r){return xn(n.getFullYear()%100,r,2)}function Nf(n,r){return xn((n=Ml(n)).getFullYear()%100,r,2)}function Pf(n,r){return xn(n.getFullYear()%1e4,r,4)}function Ff(n,r){var e=n.getDay();return xn((n=e>=4||0===e?Hr(n):Hr.ceil(n)).getFullYear()%1e4,r,4)}function Rf(n){var r=n.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+xn(r/60|0,"0",2)+xn(r%60,"0",2)}function Nl(n,r){return xn(n.getUTCDate(),r,2)}function Bf(n,r){return xn(n.getUTCHours(),r,2)}function Zf(n,r){return xn(n.getUTCHours()%12||12,r,2)}function Vf(n,r){return xn(1+Es.count(Wr(n),n),r,3)}function Pl(n,r){return xn(n.getUTCMilliseconds(),r,3)}function Gf(n,r){return Pl(n,r)+"000"}function Uf(n,r){return xn(n.getUTCMonth()+1,r,2)}function zf(n,r){return xn(n.getUTCMinutes(),r,2)}function Hf(n,r){return xn(n.getUTCSeconds(),r,2)}function Yf(n){var r=n.getUTCDay();return 0===r?7:r}function Wf(n,r){return xn(Ds.count(Wr(n)-1,n),r,2)}function Fl(n){var r=n.getUTCDay();return r>=4||0===r?Yr(n):Yr.ceil(n)}function Xf(n,r){return n=Fl(n),xn(Yr.count(Wr(n),n)+(4===Wr(n).getUTCDay()),r,2)}function $f(n){return n.getUTCDay()}function Qf(n,r){return xn(Ba.count(Wr(n)-1,n),r,2)}function jf(n,r){return xn(n.getUTCFullYear()%100,r,2)}function Jf(n,r){return xn((n=Fl(n)).getUTCFullYear()%100,r,2)}function Kf(n,r){return xn(n.getUTCFullYear()%1e4,r,4)}function qf(n,r){var e=n.getUTCDay();return xn((n=e>=4||0===e?Yr(n):Yr.ceil(n)).getUTCFullYear()%1e4,r,4)}function tm(){return"+0000"}function Rl(){return"%"}function Bl(n){return+n}function Zl(n){return Math.floor(+n/1e3)}!function rm(n){(function tf(n){var r=n.dateTime,e=n.date,i=n.time,a=n.periods,o=n.days,v=n.shortDays,T=n.months,N=n.shortMonths,U=da(a),tt=pa(a),lt=da(o),ot=pa(o),Ct=da(v),It=pa(v),Rt=da(T),gt=pa(T),Gt=da(N),te=pa(N),Qt={a:function ii(ge){return v[ge.getDay()]},A:function sr(ge){return o[ge.getDay()]},b:function ri(ge){return N[ge.getMonth()]},B:function ai(ge){return T[ge.getMonth()]},c:null,d:Il,e:Il,f:wf,g:Nf,G:Ff,H:bf,I:Tf,j:Cf,L:Ol,m:Af,M:Sf,p:function Un(ge){return a[+(ge.getHours()>=12)]},q:function zn(ge){return 1+~~(ge.getMonth()/3)},Q:Bl,s:Zl,S:Ef,u:Df,U:Lf,V:kf,w:If,W:Of,x:null,X:null,y:Mf,Y:Pf,Z:Rf,"%":Rl},ve={a:function ma(ge){return v[ge.getUTCDay()]},A:function Kr(ge){return o[ge.getUTCDay()]},b:function qr(ge){return N[ge.getUTCMonth()]},B:function ta(ge){return T[ge.getUTCMonth()]},c:null,d:Nl,e:Nl,f:Gf,g:Jf,G:qf,H:Bf,I:Zf,j:Vf,L:Pl,m:Uf,M:zf,p:function Ai(ge){return a[+(ge.getUTCHours()>=12)]},q:function Ua(ge){return 1+~~(ge.getUTCMonth()/3)},Q:Bl,s:Zl,S:Hf,u:Yf,U:Wf,V:Xf,w:$f,W:Qf,x:null,X:null,y:jf,Y:Kf,Z:tm,"%":Rl},Se={a:function Dn(ge,Je,dn){var ie=Ct.exec(Je.slice(dn));return ie?(ge.w=It.get(ie[0].toLowerCase()),dn+ie[0].length):-1},A:function Ln(ge,Je,dn){var ie=lt.exec(Je.slice(dn));return ie?(ge.w=ot.get(ie[0].toLowerCase()),dn+ie[0].length):-1},b:function Xn(ge,Je,dn){var ie=Gt.exec(Je.slice(dn));return ie?(ge.m=te.get(ie[0].toLowerCase()),dn+ie[0].length):-1},B:function ti(ge,Je,dn){var ie=Rt.exec(Je.slice(dn));return ie?(ge.m=gt.get(ie[0].toLowerCase()),dn+ie[0].length):-1},c:function ei(ge,Je,dn){return ln(ge,r,Je,dn)},d:Ll,e:Ll,f:_f,g:Dl,G:El,H:kl,I:kl,j:pf,L:gf,m:df,M:ff,p:function yn(ge,Je,dn){var ie=U.exec(Je.slice(dn));return ie?(ge.p=tt.get(ie[0].toLowerCase()),dn+ie[0].length):-1},q:hf,Q:xf,s:yf,S:mf,u:sf,U:of,V:lf,w:af,W:cf,x:function ar(ge,Je,dn){return ln(ge,e,Je,dn)},X:function ni(ge,Je,dn){return ln(ge,i,Je,dn)},y:Dl,Y:El,Z:uf,"%":vf};function fe(ge,Je){return function(dn){var Ii,We,Bn,ie=[],Rn=-1,Sn=0,ki=ge.length;for(dn instanceof Date||(dn=new Date(+dn));++Rn<ki;)37===ge.charCodeAt(Rn)&&(ie.push(ge.slice(Sn,Rn)),null!=(We=Sl[Ii=ge.charAt(++Rn)])?Ii=ge.charAt(++Rn):We="e"===Ii?" ":"0",(Bn=Je[Ii])&&(Ii=Bn(dn,We)),ie.push(Ii),Sn=Rn+1);return ie.push(ge.slice(Sn,Rn)),ie.join("")}}function tn(ge,Je){return function(dn){var Sn,ki,ie=ha(1900,void 0,1);if(ln(ie,ge,dn+="",0)!=dn.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(1e3*ie.s+("L"in ie?ie.L:0));if(Je&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+12*ie.p),void 0===ie.m&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(ki=(Sn=Is(ha(ie.y,0,1))).getUTCDay(),Sn=ki>4||0===ki?Ba.ceil(Sn):Ba(Sn),Sn=Es.offset(Sn,7*(ie.V-1)),ie.y=Sn.getUTCFullYear(),ie.m=Sn.getUTCMonth(),ie.d=Sn.getUTCDate()+(ie.w+6)%7):(ki=(Sn=ks(ha(ie.y,0,1))).getDay(),Sn=ki>4||0===ki?Ra.ceil(Sn):Ra(Sn),Sn=Pa.offset(Sn,7*(ie.V-1)),ie.y=Sn.getFullYear(),ie.m=Sn.getMonth(),ie.d=Sn.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ki="Z"in ie?Is(ha(ie.y,0,1)).getUTCDay():ks(ha(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+7*ie.W-(ki+5)%7:ie.w+7*ie.U-(ki+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Is(ie)):ks(ie)}}function ln(ge,Je,dn,ie){for(var Ii,We,Rn=0,Sn=Je.length,ki=dn.length;Rn<Sn;){if(ie>=ki)return-1;if(37===(Ii=Je.charCodeAt(Rn++))){if(Ii=Je.charAt(Rn++),!(We=Se[Ii in Sl?Je.charAt(Rn++):Ii])||(ie=We(ge,dn,ie))<0)return-1}else if(Ii!=dn.charCodeAt(ie++))return-1}return ie}return Qt.x=fe(e,Qt),Qt.X=fe(i,Qt),Qt.c=fe(r,Qt),ve.x=fe(e,ve),ve.X=fe(i,ve),ve.c=fe(r,ve),{format:function(ge){var Je=fe(ge+="",Qt);return Je.toString=function(){return ge},Je},parse:function(ge){var Je=tn(ge+="",!1);return Je.toString=function(){return ge},Je},utcFormat:function(ge){var Je=fe(ge+="",ve);return Je.toString=function(){return ge},Je},utcParse:function(ge){var Je=tn(ge+="",!0);return Je.toString=function(){return ge},Je}}})(n)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),_s(ul),_s(function am(n){return null===n?NaN:+n}),s(6738),s(84067),s(32517),s(38914),s(22910),s(65142),s(78986),s(16087);const Dm=["caretElm"];function Lm(n,r){}const km=function(n){return{model:n}};function Im(n,r){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Lm,0,0,"ng-template",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(2,km,e.context))}}function Om(n,r){if(1&n&&t._UZ(0,"span",6),2&n){const e=t.oxw();t.Q6J("innerHTML",e.title,t.oJD)}}function s_(n,r,e){e=e||{};let i,a,o,v=null,T=0;function N(){T=!1===e.leading?0:+new Date,v=null,o=n.apply(i,a)}return function(){const U=+new Date;!T&&!1===e.leading&&(T=U);const tt=r-(U-T);return i=this,a=arguments,tt<=0?(clearTimeout(v),v=null,T=U,o=n.apply(i,a)):!v&&!1!==e.trailing&&(v=setTimeout(N,tt)),o}}function o_(n,r){return function(i,a,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:o.enumerable,value:s_(o.value,n,r)}),this[a]}}}}var nn=(()=>{return(n=nn||(nn={})).Top="top",n.Bottom="bottom",n.Left="left",n.Right="right",n.Center="center",nn;var n})();function Jl(n,r,e){return e===nn.Top?n.top-7:e===nn.Bottom?n.top+n.height-r.height+7:e===nn.Center?n.top+n.height/2-r.height/2:void 0}function Kl(n,r,e){return e===nn.Left?n.left-7:e===nn.Right?n.left+n.width-r.width+7:e===nn.Center?n.left+n.width/2-r.width/2:void 0}class Gi{static calculateVerticalAlignment(r,e,i){let a=Jl(r,e,i);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(r,e,i,a){let o;a===nn.Top&&(o=r.height/2-i.height/2+7),a===nn.Bottom&&(o=e.height-r.height/2-i.height/2-7),a===nn.Center&&(o=e.height/2-i.height/2);const v=Jl(r,e,a);return v+e.height>window.innerHeight&&(o+=v+e.height-window.innerHeight),o}static calculateHorizontalAlignment(r,e,i){let a=Kl(r,e,i);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(r,e,i,a){let o;a===nn.Left&&(o=r.width/2-i.width/2+7),a===nn.Right&&(o=e.width-r.width/2-i.width/2-7),a===nn.Center&&(o=e.width/2-i.width/2);const v=Kl(r,e,a);return v+e.width>window.innerWidth&&(o+=v+e.width-window.innerWidth),o}static shouldFlip(r,e,i,a){let o=!1;return i===nn.Right&&r.left+r.width+e.width+a>window.innerWidth&&(o=!0),i===nn.Left&&r.left-e.width-a<0&&(o=!0),i===nn.Top&&r.top-e.height-a<0&&(o=!0),i===nn.Bottom&&r.top+r.height+e.height+a>window.innerHeight&&(o=!0),o}static positionCaret(r,e,i,a,o){let v=0,T=0;return r===nn.Right?(T=-7,v=Gi.calculateVerticalCaret(i,e,a,o)):r===nn.Left?(T=e.width,v=Gi.calculateVerticalCaret(i,e,a,o)):r===nn.Top?(v=e.height,T=Gi.calculateHorizontalCaret(i,e,a,o)):r===nn.Bottom&&(v=-7,T=Gi.calculateHorizontalCaret(i,e,a,o)),{top:v,left:T}}static positionContent(r,e,i,a,o){let v=0,T=0;return r===nn.Right?(T=i.left+i.width+a,v=Gi.calculateVerticalAlignment(i,e,o)):r===nn.Left?(T=i.left-e.width-a,v=Gi.calculateVerticalAlignment(i,e,o)):r===nn.Top?(v=i.top-e.height-a,T=Gi.calculateHorizontalAlignment(i,e,o)):r===nn.Bottom&&(v=i.top+i.height+a,T=Gi.calculateHorizontalAlignment(i,e,o)),{top:v,left:T}}static determinePlacement(r,e,i,a){if(Gi.shouldFlip(i,e,r,a)){if(r===nn.Right)return nn.Left;if(r===nn.Left)return nn.Right;if(r===nn.Top)return nn.Bottom;if(r===nn.Bottom)return nn.Top}return r}}let l_=(()=>{class n{constructor(e,i,a){this.element=e,this.renderer=i,this.platformId=a}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,m.NF)(this.platformId))return;const e=this.element.nativeElement,i=this.host.nativeElement.getBoundingClientRect();if(!i.height&&!i.width)return;const a=e.getBoundingClientRect();this.checkFlip(i,a),this.positionContent(e,i,a),this.showCaret&&this.positionCaret(i,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,i,a){const{top:o,left:v}=Gi.positionContent(this.placement,a,i,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${o}px`),this.renderer.setStyle(e,"left",`${v}px`)}positionCaret(e,i){const a=this.caretElm.nativeElement,o=a.getBoundingClientRect(),{top:v,left:T}=Gi.positionCaret(this.placement,i,e,o,this.alignment);this.renderer.setStyle(a,"top",`${v}px`),this.renderer.setStyle(a,"left",`${T}px`)}checkFlip(e,i){this.placement=Gi.determinePlacement(this.placement,i,e,this.spacing)}onWindowResize(){this.position()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.Lbi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,i){if(1&e&&t.Gf(Dm,5),2&e){let a;t.iGM(a=t.CRH())&&(i.caretElm=a.first)}},hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onWindowResize()},!1,t.Jf7),2&e&&t.Tol(i.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",0,1),t.TgZ(3,"div",2),t.YNc(4,Im,2,4,"span",3),t.YNc(5,Om,1,1,"span",4),t.qZA()()),2&e&&(t.xp6(1),t.Gre("tooltip-caret position-",i.placement,""),t.Q6J("hidden",!i.showCaret),t.xp6(3),t.Q6J("ngIf",!i.title),t.xp6(1),t.Q6J("ngIf",i.title))},dependencies:[m.O5,m.tP],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,di.gn)([o_(100)],n.prototype,"onWindowResize",null),n})(),ql=(()=>{class n{constructor(e,i,a){this.applicationRef=e,this.componentFactoryResolver=i,this.injector=a}static setGlobalRootViewContainer(e){n.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(n.globalRootViewContainer)return n.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function u_(n){return n.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,i){if(i){if(void 0!==i.inputs){const a=Object.getOwnPropertyNames(i.inputs);for(const o of a)e.instance[o]=i.inputs[o]}if(void 0!==i.outputs){const a=Object.getOwnPropertyNames(i.outputs);for(const o of a)e.instance[o]=i.outputs[o]}}return e}appendComponent(e,i={},a){a||(a=this.getRootViewContainer());const o=this.getComponentRootNode(a),v=new tl.u0(o,this.componentFactoryResolver,this.applicationRef,this.injector),T=new tl.C5(e),N=v.attach(T);return this.projectComponentBindings(N,i),N}}return n.globalRootViewContainer=null,n.\u0275fac=function(e){return new(e||n)(t.LFG(t.z2F),t.LFG(t._Vd),t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n extends class c_{constructor(r){this.injectionService=r,this.defaults={},this.components=new Map}getByType(r=this.type){return this.components.get(r)}create(r){return this.createByType(this.type,r)}createByType(r,e){e=this.assignDefaults(e);const i=this.injectComponent(r,e);return this.register(r,i),i}destroy(r){const e=this.components.get(r.componentType);if(e&&e.length){const i=e.indexOf(r);i>-1&&(e[i].destroy(),e.splice(i,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(r){const e=this.components.get(r);if(e&&e.length){let i=e.length-1;for(;i>=0;)this.destroy(e[i--])}}injectComponent(r,e){return this.injectionService.appendComponent(r,e)}assignDefaults(r){const e={...this.defaults.inputs},i={...this.defaults.outputs};return!r.inputs&&!r.outputs&&(r={inputs:r}),e&&(r.inputs={...e,...r.inputs}),i&&(r.outputs={...i,...r.outputs}),r}register(r,e){this.components.has(r)||this.components.set(r,[]),this.components.get(r).push(e)}}{constructor(e){super(e),this.type=l_}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ql))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),ac=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez]]}),n})();var Qr=(()=>{return(n=Qr||(Qr={})).popover="popover",n.tooltip="tooltip",Qr;var n})(),Cr=(()=>{return(n=Cr||(Cr={}))[n.all="all"]="all",n[n.focus="focus"]="focus",n[n.mouseover="mouseover"]="mouseover",Cr;var n})();let Rs,Ps=(()=>{class n{constructor(e,i,a){this.tooltipService=e,this.viewContainerRef=i,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=nn.Top,this.tooltipAlignment=nn.Center,this.tooltipType=Qr.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Cr.all,this.tooltipImmediateExit=!1,this.show=new t.vpe,this.hide=new t.vpe}get listensForFocus(){return this.tooltipShowEvent===Cr.all||this.tooltipShowEvent===Cr.focus}get listensForHover(){return this.tooltipShowEvent===Cr.all||this.tooltipShowEvent===Cr.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const i=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?300:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},i)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",i=>{e.contains(i.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const i=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?i():this.timeout=setTimeout(i,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ms),t.Y36(t.s_b),t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,i){1&e&&t.NdJ("focusin",function(){return i.onFocus()})("blur",function(){return i.onBlur()})("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(o){return i.onMouseLeave(o.target)})("click",function(){return i.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),n})(),sc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ql,Ms],imports:[[m.ez]]}),n})();typeof window<"u"?Rs=window:typeof global<"u"&&(Rs=global);let $i=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,ac,sc],m.ez,ac,sc]}),n})(),T_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),fc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),C_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),w_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),A_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),mc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})();Math;let Zs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),D_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i,Zs,mc]]}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),I_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i]]}),n})(),O_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$i,Zs,fc]]}),n})(),N_=(()=>{class n{constructor(){!function M_(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[$i,T_,fc,C_,w_,A_,mc,D_,k_,Zs,I_,O_]}),n})();function P_(n,r){1&n&&(t.TgZ(0,"div"),t._UZ(1,"mat-spinner",3),t.qZA())}function F_(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function R_(n,r){1&n&&(t.O4$(),t.TgZ(0,"marker",10),t._UZ(1,"path",11),t.qZA())}function B_(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",12),t._UZ(1,"rect"),t.TgZ(2,"text",13),t._uU(3),t.qZA()()),2&n){const e=r.$implicit;t.Q6J("tooltipTitle",e.tooltip)("tooltipPlacement","top")("tooltipType","tooltip"),t.xp6(1),t.uIk("fill",e.color)("height",e.dimension.height)("width",e.dimension.width),t.xp6(1),t.uIk("y",e.dimension.height/2)("x",10),t.xp6(1),t.hij(" ",e.label," ")}}function Z_(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16)(3,"textPath",17),t._uU(4),t.qZA()()()),2&n){const e=r.$implicit;t.xp6(3),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.label," ")}}const V_=function(n,r){return[n,r]};function G_(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.YNc(9,F_,5,4,"span",4),t.TgZ(10,"div",5)(11,"ngx-graph",6),t.YNc(12,R_,2,0,"ng-template",null,7,t.W1O),t.YNc(14,B_,4,9,"ng-template",null,8,t.W1O),t.YNc(16,Z_,5,2,"ng-template",null,9,t.W1O),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,12,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(6,14,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(2),t.Q6J("links",e.hierarchialGraph.links)("nodes",e.hierarchialGraph.nodes)("view",t.WLB(16,V_,e.innerWidth,e.innerHeight))("curve",e.curve)("draggingEnabled",!1)("zoomToFit$",e.zoomToFit$)}}function U_(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function z_(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.YNc(8,U_,5,4,"span",4),t._uU(9),t.ALo(10,"translate")),2&n){const e=t.oxw(2);t.hij(" ",t.lcZ(1,7,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(5,9,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(1),t.hij(" ",t.lcZ(10,11,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_4")," ")}}function H_(n,r){if(1&n&&(t.YNc(0,G_,18,19,"div",1),t.YNc(1,z_,11,13,"ng-template",null,2,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.isConnected)("ngIfElse",e)}}let Y_=(()=>{class n{constructor(e,i,a,o,v,T,N,U,tt){this.route=e,this.facilityManager=i,this.userService=a,this.membersService=o,this.serviceService=v,this.resourceManager=T,this.groupService=N,this.voService=U,this.translate=tt,this.isConnected=!1,this.loading=!0,this.hierarchialGraph={nodes:[],links:[]},this.curve=Jn,this.zoomToFit$=new Hi.x,this.idCounter=0}static findConnectedGroups(e,i){const a=[];for(const o of e)for(const v of i)o.id===v.id&&a.push(o);return a}static findConnectedResources(e,i){const a=[];for(const o of e)for(const v of i)o.id===v.id&&a.push(o);return a}onResize(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight}ngOnInit(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight,this.getLocalizedNames(),this.route.queryParams.subscribe(e=>{this.destination=String(e.destination),this.service=String(e.service),this.userService.getUserById(Number(e.user)).subscribe(i=>{this.user=i,this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(a=>{this.facilities=a,this.membersService.getMembersByUser(this.user.id).subscribe(o=>{if(this.membership=o,0===this.membership.length||0===this.facilities.length)return this.loading=!1,void(this.isConnected=!1);this.showGraph()})})})})}showGraph(){const e=""+this.id().toString(),i=this.user.firstName??" "+this.user.lastName??"",a=this.localUser,o="user: "+this.user.id.toString();this.hierarchialGraph.nodes.push({id:e,label:i,tooltip:a,color:"#FFFFCC",tip:o});const T=""+this.id().toString(),N="destination no id";this.hierarchialGraph.nodes.push("noService"===this.service?{id:T,label:this.destination,tooltip:this.localDestination+": "+this.destination,color:"#E0E0E0",tip:N}:{id:T,label:this.service+": "+this.destination,tooltip:this.localService+": "+this.service+", "+this.localDestination+": "+this.destination,color:"#E0E0E0",tip:N});for(const U of this.facilities)this.serviceService.getAllRichDestinationsForFacility(U.id).subscribe(tt=>{this.connectToService(U,tt),setTimeout(()=>{this.zoomToFit$.next(!0),this.loading=!1},2e3)})}connectToService(e,i){this.isConnectedToService(i)&&this.facilityManager.getAssignedResourcesForFacility(e.id).subscribe(a=>{for(const o of this.membership)this.connectToGroups(e,o,a)})}connectToGroups(e,i,a){this.facilityManager.getAllowedGroups(e.id,i.voId).subscribe(o=>{0!==o.length&&this.groupService.getMemberGroups(i.id).subscribe(v=>{const T=n.findConnectedGroups(o,v);if(0!==T.length)for(const N of T)this.connectToResource(e,N,a)})})}haveService(e){if("noService"===this.service)return!0;for(const i of e)if(this.service===i.name)return!0;return!1}connectToResource(e,i,a){this.resourceManager.getAssignedResourcesWithGroup(i.id).subscribe(o=>{const v=n.findConnectedResources(o,a);for(const T of v)this.resourceManager.getAssignedServicesToResource(T.id).subscribe(N=>{this.haveService(N)&&(this.isConnected=!0,this.addNodesToGraph(i.voId,i,T,e))})})}addNodesToGraph(e,i,a,o){if(-1===this.findEntityInGraph("Facility: "+o.id.toString())){const v=""+this.id().toString(),T=this.localFacility+": "+o.name,N=o.description,U="Facility: "+o.id.toString();this.hierarchialGraph.nodes.push({id:v,label:T,tooltip:N,color:"#FFCCFF",tip:U});const lt={source:v,target:this.hierarchialGraph.nodes[this.findEntityInGraph("destination no id")].id};this.hierarchialGraph.links.push(lt)}this.voService.getVoById(e).subscribe(v=>{if(-1===this.findEntityInGraph("Vo: "+v.id.toString())){const N=this.id().toString(),U=this.localVo+": "+v.shortName,tt=v.name,lt="Vo: "+v.id.toString();this.hierarchialGraph.nodes.push({id:N,label:U,tooltip:tt,color:"#E5FFCC",tip:lt});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("user: "+this.user.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct)}if(-1===this.findEntityInGraph("Group: "+i.id.toString())){const N=this.id().toString(),U=this.localGroup+": "+i.name,tt=i.description,lt="Group: "+i.id.toString();this.hierarchialGraph.nodes.push({id:N,label:U,tooltip:tt,color:"#CCE5FF",tip:lt});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Vo: "+v.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct)}const T=this.findEntityInGraph("Resource: "+a.id.toString());if(-1!==T){const N={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id.toString())].id,target:this.hierarchialGraph.nodes[T].id};this.hierarchialGraph.links.push(N)}else{const N=this.id().toString(),U=this.localResource+": "+a.name,tt=a.description,lt="Resource: "+a.id.toString();this.hierarchialGraph.nodes.push({id:N,label:U,tooltip:tt,color:"#FFCCCC",tip:lt});const Ct={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id.toString())].id,target:N};this.hierarchialGraph.links.push(Ct);const It={source:N,target:this.hierarchialGraph.nodes[this.findEntityInGraph("Facility: "+o.id.toString())].id};this.hierarchialGraph.links.push(It)}})}findEntityInGraph(e){for(let i=0;i<this.hierarchialGraph.nodes.length;i++)if(this.hierarchialGraph.nodes[i].tip===e)return i;return-1}isConnectedToService(e){for(const i of e)if(i.destination===this.destination&&(i.service.name===this.service||"noService"===this.service))return!0;return!1}id(){return this.idCounter++,this.idCounter}getLocalizedNames(){this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.USER").subscribe(e=>{this.localUser=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.VO").subscribe(e=>{this.localVo=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.GROUP").subscribe(e=>{this.localGroup=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.RESOURCE").subscribe(e=>{this.localResource=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.FACILITY").subscribe(e=>{this.localFacility=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SERVICE").subscribe(e=>{this.localService=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION").subscribe(e=>{this.localDestination=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(H.IQ),t.Y36(H.Fv),t.Y36(H.uq),t.Y36(H.KK),t.Y36(H.xk),t.Y36(H.ff),t.Y36(H.YF),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-graph"]],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(o){return i.onResize(o)},!1,t.Jf7),2&e&&t.ekj("router-component",i.true)},decls:6,vars:5,consts:[[1,"page-subtitle"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"ml-auto","mr-auto"],[4,"ngIf"],[1,"card","w-100","h-100"],[1,"chart-container",3,"links","nodes","view","curve","draggingEnabled","zoomToFit$"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","markerHeight","4","refX","8","refY","0","markerWidth","4","orient","auto","viewBox","0 -5 10 10"],["d","M0,-5L10,0L0,5",1,"arrow-head"],["ngx-tooltip","",1,"node",3,"tooltipTitle","tooltipPlacement","tooltipType"],["alignment-baseline","central"],[1,"edge"],["marker-end","url(#arrow)","stroke-width","2",1,"line"],["text-anchor","end",1,"edge-label"],["startOffset","60%",2,"fill","#000"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,P_,2,0,"div",1),t.YNc(4,H_,3,2,"ng-template",null,2,t.W1O)),2&e){const a=t.MAs(5);t.xp6(1),t.hij(" ",t.lcZ(2,3,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE"),"\n"),t.xp6(2),t.Q6J("ngIf",i.loading)("ngIfElse",a)}},dependencies:[Ap,m.O5,Ps,nt.Ou,u.X$]}),n})();var W_=s(25828),gc=s(69024),X_=s(29862),fa=s(74281),$_=s(31359);function Q_(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function j_(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"span")(1,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.editUser())}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.anonymizeUser())}),t.TgZ(5,"mat-icon"),t._uU(6,"no_accounts"),t.qZA()()()}}const J_=function(){return{color:"black"}},K_=function(n){return["/admin/users",n]};function q_(n,r){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6)(4,"div",7)(5,"a",8),t._uU(6),t.ALo(7,"userFullName"),t.qZA(),t.TgZ(8,"span",9),t._uU(9),t.qZA(),t.YNc(10,j_,7,0,"span",10),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",11),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,12,"ADMIN_USER.ENTITY")),t.Q6J("ngStyle",t.DdM(22,J_))("svgIcon",e.svgIcon),t.xp6(4),t.Q6J("routerLink",t.VKq(23,K_,e.user.id)),t.xp6(1),t.hij(" ",t.lcZ(7,14,e.user)," "),t.xp6(3),t.hij(" \xa0#",e.user.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE("",t.lcZ(13,16,"ADMIN_USER.UUID"),": ",e.user.uuid,""),t.xp6(3),t.lnq(" ",t.lcZ(16,18,"ADMIN_USER.ENTITY"),", ",t.lcZ(17,20,"ADMIN_USER.USER_TYPE"),": ",e.getUserType()," ")}}let tv=(()=>{class n{constructor(e,i,a,o,v,T,N,U){this.route=e,this.usersService=i,this.sideMenuService=a,this.sideMenuItemService=o,this.dialog=v,this.authResolver=T,this.entityStorageService=N,this.router=U,this.loading=!1,this.svgIcon="perun-user-dark"}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{const i=Number(e.userId);this.entityStorageService.setEntity({id:Number(i),beanName:"User"}),this.path=`/admin/users/${i}`,this.regex="/admin/users/\\d+",this.usersService.getUserById(i).subscribe(a=>{this.user=a,this.user.serviceUser&&(this.svgIcon="perun-service-identity");const o=this.sideMenuItemService.parseUser(a,this.path,this.regex);this.sideMenuService.setAdminItems([o]),this.loading=!1},()=>this.loading=!1)})}editUser(){const e=(0,de.kZ)();e.width="450px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(X_.x,e).afterClosed().subscribe(a=>{a&&this.usersService.getUserById(this.user.id).subscribe(o=>{this.user=o})})}getUserType(){return this.user.serviceUser?"Service":"Person"}anonymizeUser(){const e=(0,de.kZ)();e.width="550px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(fa.GI,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin","users"],{queryParamsHandling:"merge"})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(H.Fv),t.Y36(d.D),t.Y36(gc.V),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-user-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],[1,"perun-icon","perun-icon-detail",3,"ngStyle","svgIcon","matTooltip"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge","data-cy","user-name-link",1,"user-link",3,"routerLink"],[1,"text-muted"],[4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","","data-cy","edit-user-button",3,"click"],["mat-icon-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Q_,1,0,"mat-spinner",1),t.YNc(3,q_,18,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading&&void 0!==i.user))},dependencies:[m.O5,m.PC,p.yS,l.Hw,G.lW,nt.Ou,un.gM,h.A,f.W,u.X$,$_.d]}),n})();var ev=s(17755),nv=s(74837),iv=s(85985),rv=s(98973),av=s(15935);function sv(n,r){1&n&&t._UZ(0,"mat-spinner",5)}const ov=function(){return["id","name","type"]};function lv(n,r){if(1&n&&t._UZ(0,"app-ext-sources-list",6),2&n){const e=t.oxw();t.Q6J("extSources",e.extSources)("filterValue",e.filterValue)("displayedColumns",t.DdM(4,ov))("tableId",e.tableId)}}let cv=(()=>{class n{constructor(e,i,a,o){this.extSourceService=e,this.notificator=i,this.translate=a,this.authResolver=o,this.extSources=[],this.filterValue="",this.loading=!1,this.tableId=En.qy,this.translate.get("ADMIN.EXT_SOURCES.LOAD_SUCCESS").subscribe(v=>this.loadSuccess=v)}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}onLoad(){this.extSourceService.loadExtSourcesDefinitions().subscribe(()=>{this.notificator.showSuccess(this.loadSuccess),this.refreshTable()})}refreshTable(){this.loading=!0,this.extSourceService.getExtSources().subscribe(e=>{this.extSources=e,this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KG),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-ext-sources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"extSources","filterValue","displayedColumns","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"extSources","filterValue","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("click",function(){return i.onLoad()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(6,sv,1,0,"mat-spinner",3),t.YNc(7,lv,1,5,"app-ext-sources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"ADMIN.EXT_SOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","ADMIN.EXT_SOURCES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,nt.Ou,av.D,He.t,Ye.L,u.X$]}),n})();var uv=s(6097),hv=s(97453),Ga=s(54004);function dv(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function pv(n,r){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function fv(n,r){if(1&n&&(t.TgZ(0,"div")(1,"mat-form-field",8),t._UZ(2,"input",9),t.ALo(3,"translate"),t.TgZ(4,"mat-error"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"mat-form-field",8),t._UZ(8,"input",10),t.ALo(9,"translate"),t.TgZ(10,"mat-error"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-autocomplete",11,12),t.YNc(15,pv,2,2,"mat-option",13),t.ALo(16,"async"),t.qZA()()()),2&n){const e=t.MAs(14),i=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(3,9,"DIALOGS.ADD_USER_EXT_SOURCE.LOGIN")),t.Q6J("formControl",i.loginControl),t.xp6(3),t.hij(" ",t.lcZ(6,11,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_LOGIN")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,13,"DIALOGS.ADD_USER_EXT_SOURCE.EXT_SOURCE")),t.Q6J("formControl",i.extSourcesControl)("matAutocomplete",e),t.xp6(3),t.hij(" ",t.lcZ(12,15,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_EXT_SOURCE")," "),t.xp6(2),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(16,17,i.filteredExtSources))}}let mv=(()=>{class n{constructor(e,i,a,o,v,T){this.dialogRef=e,this.data=i,this.extSourcesManagerService=a,this.usersManagerService=o,this.translate=v,this.notificator=T,this.extSources=[],v.get("DIALOGS.ADD_USER_EXT_SOURCE.SUCCESS").subscribe(N=>this.successMessage=N)}ngOnInit(){this.loading=!0,this.loginControl=new q.p4("",[q.kI.required,q.kI.pattern(".*[\\S]+.*")]),this.extSourcesControl=new q.p4("",[q.kI.required]),this.loginControl.markAllAsTouched(),this.extSourcesControl.markAllAsTouched(),this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,oi.O)(""),(0,Ga.U)(e=>this._filter(e))),this.extSourcesManagerService.getExtSources().subscribe(e=>{this.extSources=e,this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,oi.O)(""),(0,Ga.U)(i=>this._filter(i))),this.loading=!1},()=>this.loading=!1)}displayFn(e){return e?e.name:null}onCancel(){this.dialogRef.close(!1)}onAdd(){this.loading=!0,this.usersManagerService.addUserExtSource({user:this.data.userId,userExtSource:{beanName:"",extSource:this.extSourcesControl.value,id:0,login:this.loginControl.value,userId:this.data.userId}}).subscribe(()=>{this.loading=!1,this.notificator.showSuccess(this.successMessage),this.dialogRef.close(!0)},()=>this.loading=!1)}_filter(e){const i="string"==typeof e?e.toLowerCase():e.name.toLowerCase();return this.extSources.filter(a=>a.name.toLowerCase().includes(i))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(H.KG),t.Y36(H.Fv),t.Y36(u.sK),t.Y36(Z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-user-ext-source-dialog"]],decls:13,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container","user-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[1,"center-self","w-100"],["matInput","","required","",3,"formControl","placeholder"],["matInput","","required","","type","text",3,"formControl","matAutocomplete","placeholder"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,dv,1,0,"mat-spinner",2),t.YNc(5,fv,17,19,"div",3),t.qZA(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onAdd()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"DIALOGS.ADD_USER_EXT_SOURCE.TITLE")),t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.ADD_USER_EXT_SOURCE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loginControl.invalid||i.extSourcesControl.invalid||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.ADD_USER_EXT_SOURCE.ADD")," "))},dependencies:[m.sg,m.O5,k.XC,k.ZL,_t.ey,Ft.TO,Ft.KE,Ht.Nt,q.Fj,q.JJ,q.Q7,q.oH,G.lW,M.uh,M.xY,M.H8,nt.Ou,m.Ov,u.X$],styles:[".column-size[_ngcontent-%COMP%]{width:10rem!important;font-weight:700}.center-self[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.auto-width[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}.auto-width[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{max-width:100%;width:auto}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),n})();var gv=s(80275);function _v(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addIdentity())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.IDENTITIES.ADD"),"\n"))}function vv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeIdentity())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.IDENTITIES.REMOVE"),"\n")}}function xv(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function yv(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-user-ext-sources-list",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("selection",e.selection)("tableId",e.tableId)("userExtSources",e.userExtSources)}}let bv=(()=>{class n{constructor(e,i,a,o,v,T){this.usersManagerService=e,this.storage=i,this.registrarManagerService=a,this.dialog=o,this.route=v,this.authResolver=T,this.userExtSources=[],this.selection=new B.Ov(!1,[]),this.displayedColumns=["select","id","extSourceName","login","lastAccess"],this.tableId=En.gG,this.filterValue=""}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId)}),this.refreshTable()}refreshTable(){this.loading=!0,this.selection.clear(),this.usersManagerService.getRichUserExtSources(this.userId).subscribe(e=>{this.userExtSources=e,this.loading=!1},()=>this.loading=!1)}addIdentity(){const e=(0,de.kZ)();e.width="1000px",e.data={userId:this.userId},this.dialog.open(mv,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeIdentity(){const e=(0,de.kZ)();e.width="450px",e.data={showSuccess:!0,theme:"user-theme",userId:this.userId,extSources:this.selection.selected},this.dialog.open(fa.Lc,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(Z.d6),t.Y36(H.tk),t.Y36(M.uw),t.Y36(p.gz),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-identities"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],[1,"admin-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","selection","tableId","userExtSources"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(4,_v,3,3,"button",2),t.YNc(5,vv,3,4,"button",3),t.TgZ(6,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,xv,1,0,"mat-spinner",6),t.qZA(),t.YNc(9,yv,2,5,"div",7)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"USER_DETAIL.IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","USER_DETAIL.IDENTITIES.FILTER_PLACEHOLDER"),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,He.t,Ye.L,gv.j,u.X$]}),n})();var Tv=s(80774),Cv=s(62109);function wv(n,r){1&n&&t._UZ(0,"mat-spinner",5)}const Av=function(){return["id","name","vo","facility","description"]};function Sv(n,r){if(1&n&&t._UZ(0,"perun-web-apps-resources-list",6),2&n){const e=t.oxw();t.Q6J("displayedColumns",t.DdM(4,Av))("resources",e.resources)("filterValue",e.filterValue)("tableId",e.tableId)}}let Ev=(()=>{class n{constructor(e,i){this.userManager=e,this.route=i,this.resources=[],this.tableId=En.kO,this.filterValue=""}ngOnInit(){this.refreshTable()}refreshTable(){this.loading=!0,this.route.parent.params.subscribe(e=>{const i=Number(e.userId);this.userManager.getAssignedRichResourcesForUser(i).subscribe(a=>{this.resources=a,this.loading=!1})})}resourceFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-resources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","resources","filterValue","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","resources","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.resourceFilter(o)}),t.qZA(),t.YNc(6,wv,1,0,"mat-spinner",3),t.YNc(7,Sv,1,5,"perun-web-apps-resources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.RESOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.RESOURCES_LIST.TABLE_SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,nt.Ou,He.t,Ye.L,Cv.C,u.X$]}),n})();var Dv=s(61365),Lv=s(71103),kv=s(53984);const Iv=["list"];function Ov(n,r){1&n&&t._UZ(0,"mat-spinner",8)}function Mv(n,r){if(1&n&&t._UZ(0,"perun-web-apps-attributes-list",9,10),2&n){const e=t.oxw();t.Q6J("selection",e.selection)("attributes",e.attributes)("tableId",e.tableId)}}let Nv=(()=>{class n{constructor(e,i,a,o){this.dialog=e,this.attributesManager=i,this.userService=a,this.route=o,this.loading=!1,this.selection=new B.Ov(!0,[]),this.tableId=En.rF,this.attributes=[]}ngOnInit(){this.route.params.subscribe(e=>{const i=Number(e.identityId);this.userService.getUserExtSourceById(i).subscribe(a=>{this.userExtSource=a,this.refreshTable()})})}refreshTable(){this.loading=!0,this.attributesManager.getUserExtSourceAttributes(this.userExtSource.id).subscribe(e=>{this.attributes=(0,de.MX)(e),this.selection.clear(),this.loading=!1})}onAdd(){const e=(0,de.kZ)();e.width="1050px",e.data={entityId:this.userExtSource.id,entity:"ues",notEmptyAttributes:this.attributes,style:"user-theme"},this.dialog.open(Lv.n,e).afterClosed().subscribe(a=>{"saved"===a&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const e=(0,de.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(fa.wA,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,de.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(Dv.k,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(H.H8),t.Y36(H.Fv),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-identity-detail"]],viewQuery:function(e,i){if(1&e&&t.Gf(Iv,5),2&e){let a;t.iGM(a=t.CRH())&&(i.list=a.first)}},decls:26,vars:32,consts:[[1,"page-subtitle"],[1,"mb-2"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","attributes","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"selection","attributes","tableId"],["list",""]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(15,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,Ov,1,0,"mat-spinner",6),t.YNc(25,Mv,2,3,"perun-web-apps-attributes-list",7),t.qZA()),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,15,"SHARED.IDENTITY_DETAIL.TITLE")," - ",i.userExtSource?i.userExtSource.extSource.name:""," "),t.xp6(3),t.AsE(" ",t.lcZ(6,17,"SHARED.IDENTITY_DETAIL.TYPE"),": ",i.userExtSource?i.userExtSource.extSource.type:""," "),t.xp6(3),t.AsE(" ",t.lcZ(9,19,"SHARED.IDENTITY_DETAIL.LOGIN"),": ",i.userExtSource?i.userExtSource.login:""," "),t.xp6(3),t.AsE(" ",t.lcZ(12,21,"SHARED.IDENTITY_DETAIL.LAST_ACCESS"),": ",i.userExtSource?t.xi3(13,23,i.userExtSource.lastAccess,"d.M.y H:mm:ss"):""," "),t.xp6(4),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(17,26,"SHARED.IDENTITY_DETAIL.SAVE")," "),t.xp6(3),t.hij(" ",t.lcZ(20,28,"SHARED.IDENTITY_DETAIL.ADD")," "),t.xp6(2),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(23,30,"SHARED.IDENTITY_DETAIL.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,He.t,kv.p,m.uU,u.X$]}),n})();var Pv=s(40009),Fv=s(90719);function Rv(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function Bv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.editService())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Zv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.removeService())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA()()}}function Vv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.evaluateConsents())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.EVALUATE_CONSENTS")," "))}const Gv=function(){return{color:"black"}},Uv=function(n){return["/admin/services",n]};function zv(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"a",10),t._uU(8),t.qZA(),t.TgZ(9,"span",11),t._uU(10),t.qZA(),t.YNc(11,Bv,3,0,"button",12),t.YNc(12,Zv,3,0,"button",13),t.qZA(),t.TgZ(13,"span",14),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"div",15)(17,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeServiceStatus())}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-slide-toggle",16),t.NdJ("toggleChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.propagationChange())}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.YNc(23,Vv,3,3,"button",17),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,14,"SERVICE_DETAIL.ENTITY")),t.Q6J("ngStyle",t.DdM(22,Gv)),t.xp6(6),t.Q6J("routerLink",t.VKq(23,Uv,e.service.id)),t.xp6(1),t.hij(" ",e.service.name," "),t.xp6(2),t.hij(" \xa0 #",e.service.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE(" ",t.lcZ(15,16,"SERVICE_DETAIL.DESCRIPTION"),": ",e.service.description," "),t.xp6(3),t.Q6J("checked",e.service.enabled),t.xp6(1),t.hij(" ",t.lcZ(19,18,"SERVICE_DETAIL.ENABLE")," "),t.xp6(2),t.Q6J("checked",e.service.useExpiredMembers),t.xp6(1),t.hij(" ",t.lcZ(22,20,"SERVICE_DETAIL.PROPAGATE")," "),t.xp6(2),t.Q6J("ngIf",e.authResolver.isPerunAdmin())}}let Hv=(()=>{class n{constructor(e,i,a,o,v,T,N,U,tt,lt,ot){this.route=e,this.router=i,this.consentsManager=a,this.serviceManager=o,this.sideMenuService=v,this.sideMenuItemService=T,this.dialog=N,this.authResolver=U,this.translate=tt,this.notificator=lt,this.entityStorageService=ot,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{this.serviceId=Number(e.serviceId),this.entityStorageService.setEntity({id:this.serviceId,beanName:"Service"}),this.refresh()})}editService(){const e=(0,de.kZ)();e.width="600px",e.data={theme:"service-theme",service:this.service},this.dialog.open(Pv.R,e).afterClosed().subscribe(a=>{a&&this.refresh()})}removeService(){const e=(0,de.kZ)();e.width="600px",e.data={theme:"service-theme",services:[this.service]},this.dialog.open(Fv.m,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin/services"])})}changeServiceStatus(){this.service.enabled=!this.service.enabled,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.STATUS_CHANGE_SUCCESS"))},()=>this.service.enabled=!this.service.enabled)}propagationChange(){this.service.useExpiredMembers=!this.service.useExpiredMembers,this.serviceManager.updateService({service:this.service}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.PROPAGATION_CHANGE_SUCCESS"))},()=>this.service.useExpiredMembers=!this.service.useExpiredMembers)}evaluateConsents(){const e=(0,de.kZ)();e.width="500px",e.data={title:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_TITLE"),theme:"service-theme",description:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_DESCRIPTION"),items:[this.service.name],type:"confirmation",showAsk:!1},this.dialog.open(fa.Ts,e).afterClosed().subscribe(a=>{a&&this.consentsManager.evaluateConsentsForService(this.service.id).subscribe(()=>this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.EVALUATION_FINISH")))})}refresh(){this.serviceManager.getServiceById(this.serviceId).subscribe(e=>{this.service=e;const i=this.sideMenuItemService.parseService(this.service);this.sideMenuService.setAdminItems([i]),this.loading=!1},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(H.WY),t.Y36(H.KK),t.Y36(d.D),t.Y36(gc.V),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(u.sK),t.Y36(Z.V6),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","service-theme"],["class","ml-auto mr-auto",4,"ngIf"],["class","page-title-headtitle detail-layout",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"page-title-headtitle","detail-layout"],["svgIcon","perun-service",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"wrap-container"],[1,"detail-info"],[1,"flex-column"],[1,"page-title-headline","d-flex","align-items-center"],["data-cy","service-name-link","queryParamsHandling","merge",1,"service-link",3,"routerLink"],[1,"text-muted"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click",4,"ngIf"],["aria-label","Remove service","mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"detail-actions"],["labelPosition","before",3,"checked","toggleChange"],["class","action-button evaluate-button","mat-stroked-button","",3,"click",4,"ngIf"],["aria-label","Edit service","data-cy","service-edit-button","mat-icon-button","",3,"click"],["aria-label","Remove service","mat-icon-button","",3,"click"],["mat-stroked-button","",1,"action-button","evaluate-button",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Rv,1,0,"mat-spinner",1),t.YNc(3,zv,24,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,m.PC,p.yS,l.Hw,G.lW,nt.Ou,un.gM,Tt.Rr,h.A,f.W,u.X$],styles:[".detail-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1.2em}.detail-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-right:1.2em}.wrap-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.3em}.detail-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid rgba(0,0,0,.2);padding-left:.5em}.evaluate-button[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}"],data:{animation:[Hn.Ji]}}),n})(),Yv=(()=>{class n{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-attributes",url:"required-attributes",label:"MENU_ITEMS.SERVICE.REQUIRED_ATTRIBUTES",style:"service-btn"},{cssIcon:"perun-service_destination",url:"destinations",label:"MENU_ITEMS.SERVICE.DESTINATIONS",style:"service-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&t._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&t.Q6J("items",i.navItems)("size","small")},dependencies:[L.L]}),n})();var Wv=s(32076),Xv=s(24351),_c=s(54482),$v=s(25032),jv=s(86099),Jv=s(57359);function qv(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function t0(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.Q6J("alert_type","warn"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ACTIVE_WARN")))}function e0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,t0,3,4,"perun-web-apps-alert",6),t.ALo(2,"async"),t.TgZ(3,"perun-web-apps-immediate-filter",7),t.NdJ("filter",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.applyFilter(a))}),t.qZA(),t._UZ(4,"app-attr-def-list",8),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,8,e.serviceEnabled$)),t.xp6(2),t.Q6J("placeholder","DIALOGS.ADD_REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("selection",e.selection)("definitions",e.attrDefinitions)("disableRouting",!0)("filterValue",e.filterValue)("serviceEnabled",t.lcZ(5,10,e.serviceEnabled$))("consentRequired",t.lcZ(6,12,e.consentRequired$))}}function n0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAdd())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ADD")," ")}}let r0=(()=>{class n{constructor(e,i,a,o,v,T,N,U){this.dialogRef=e,this.data=i,this.serviceManager=a,this.attributesManager=o,this.facilitiesService=v,this.consentHubService=T,this.notificator=N,this.translate=U,this.consentRequired$=this.facilitiesService.getAssignedFacilitiesByService(this.data.serviceId).pipe((0,Xv.b)(Wv.D),(0,Ga.U)(tt=>tt.id),function Qv(n,r){return(0,_c.e)((e,i)=>{const a=new Set;e.subscribe((0,Jt.x)(i,o=>{const v=n?n(o):o;a.has(v)||(a.add(v),i.next(o))})),r?.subscribe((0,Jt.x)(i,()=>a.clear(),$v.Z))})}(),(0,jv.z)(tt=>this.consentHubService.getConsentHubByFacility(tt)),function Kv(n,r){return(0,_c.e)((0,Jv.U)(n,r,arguments.length>=2,!1,!0))}((tt,lt)=>tt||lt.enforceConsents,!1),(0,oi.O)(!0)),this.serviceEnabled$=this.serviceManager.getServiceById(this.data.serviceId).pipe((0,Ga.U)(tt=>tt.enabled),(0,oi.O)(!0)),this.attrDefinitions=[],this.selection=new B.Ov(!0,[]),this.filterValue="",this.loading=!1}ngOnInit(){this.loading=!0,this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}onAdd(){this.loading=!0;const e=this.selection.selected.map(i=>i.id);this.serviceManager.addRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.ADD_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(H.KK),t.Y36(H.H8),t.Y36(H.IQ),t.Y36(H.WY),t.Y36(Z.V6),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-required-attributes"]],decls:7,vars:9,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],[3,"alert_type",4,"ngIf"],[3,"placeholder","filter"],[3,"selection","definitions","disableRouting","filterValue","serviceEnabled","consentRequired"],[3,"alert_type"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,qv,1,0,"mat-spinner",1),t.YNc(5,e0,7,14,"div",2),t.YNc(6,n0,7,7,"div",3),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,7,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,M.uh,M.xY,M.H8,nt.Ou,et.w,Ye.L,ci,m.Ov,u.X$]}),n})();function a0(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function s0(n,r){1&n&&t._UZ(0,"th",15)}function o0(n,r){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function l0(n,r){1&n&&t._UZ(0,"tr",17)}function c0(n,r){1&n&&t._UZ(0,"tr",18)}function u0(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,s0,1,0,"th",11),t.YNc(10,o0,2,1,"td",12),t.BQk(),t.YNc(11,l0,1,0,"tr",13),t.YNc(12,c0,1,0,"tr",14),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.DESCRIPTION")),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let h0=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.serviceManager=a,this.notificator=o,this.translate=v,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.dataSource=new F.by(this.data.attrDefinitions)}onConfirm(){this.loading=!0;const e=this.dataSource.data.map(i=>i.id);this.serviceManager.removeRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(H.KK),t.Y36(Z.V6),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-remove-required-attributes"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div"),t.YNc(4,a0,1,0,"mat-spinner",1),t.YNc(5,u0,13,9,"div",2),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onConfirm()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,9,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Tol(i.theme),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.REMOVE")," "))},dependencies:[m.O5,G.lW,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,M.uh,M.xY,M.H8,nt.Ou,u.X$]}),n})();function d0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.ADD")," "))}function p0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.REMOVE")," ")}}function f0(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function m0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",10),t.NdJ("refreshEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.refreshTable())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("definitions",e.attrDefinitions)("filterValue",e.filterValue)("selection",e.selection)("disableRouting",!e.authResolver.isPerunAdmin())("tableId",e.tableId)}}let g0=(()=>{class n{constructor(e,i,a,o){this.attributeManager=e,this.dialog=i,this.authResolver=a,this.entityStorageService=o,this.loading=!1,this.filterValue="",this.selection=new B.Ov(!0,[]),this.attrDefinitions=[],this.tableId=En.JO}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.attributeManager.getRequiredAttributesDefinition(this.service.id).subscribe(e=>{this.selection.clear(),this.attrDefinitions=e,this.loading=!1})}onAdd(){const e=(0,de.kZ)();e.width="950px",e.data={serviceId:this.service.id,theme:"service-theme"},this.dialog.open(r0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,de.kZ)();e.width="650px",e.data={serviceId:this.service.id,attrDefinitions:this.selection.selected,theme:"service-theme"},this.dialog.open(h0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.H8),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-required-attributes"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"definitions","filterValue","selection","disableRouting","tableId","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,d0,3,3,"button",2),t.YNc(6,p0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(8,f0,1,0,"mat-spinner",5),t.YNc(9,m0,1,5,"app-attr-def-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,ci,He.t,Ye.L,u.X$]}),n})();var _0=s(46597),v0=s(89466),x0=s(70242);function y0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onRemove())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.REMOVE")," ")}}function b0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onAllow())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.ALLOW")," ")}}function T0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onBlock())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.BLOCK")," ")}}function C0(n,r){1&n&&t._UZ(0,"mat-spinner",10)}const w0=function(){return["select","destinationId","facility","destination","type","status","propagationType"]};function A0(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-destination-list",11),2&n){const e=t.oxw();t.Q6J("destinations",e.destinations)("filterValue",e.filterValue)("selection",e.selection)("displayedColumns",t.DdM(5,w0))("tableId",e.tableId)}}let S0=(()=>{class n{constructor(e,i,a,o,v,T){this.serviceManager=e,this.notificator=i,this.translate=a,this.dialog=o,this.authResolver=v,this.entityStorageService=T,this.loading=!1,this.filterValue="",this.destinations=[],this.selection=new B.Ov(!0,[]),this.tableId=En.Cf}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.serviceManager.getAllRichDestinationsForService(this.service.id).subscribe(e=>{this.selection.clear(),this.filterValue="",this.destinations=e,this.loading=!1})}onBlock(){this.loading=!0,this.blockServiceOnDestinations(this.selection.selected)}onAllow(){this.loading=!0,this.allowServiceOnDestinations(this.selection.selected)}onRemove(){const e=(0,de.kZ)();e.width="500px",e.data={destinations:this.selection.selected,theme:"admin-theme"},this.dialog.open(v0.u,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}blockServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.BLOCK_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.blockServiceOnDestination(this.service.id,i.id).subscribe(()=>{this.blockServiceOnDestinations(e)},()=>this.loading=!1)}allowServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.ALLOW_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.unblockServiceOnDestinationById(this.service.id,i.id).subscribe(()=>{this.allowServiceOnDestinations(e)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KK),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(M.uw),t.Y36(Z.x4),t.Y36(Z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-destinations"]],decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["color","warn","class","mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","accent","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"destinations","filterValue","selection","displayedColumns","tableId",4,"ngIf"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"destinations","filterValue","selection","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,y0,3,4,"button",2),t.YNc(6,b0,3,4,"button",3),t.YNc(7,T0,3,4,"button",4),t.TgZ(8,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(9,C0,1,0,"mat-spinner",6),t.YNc(10,A0,1,6,"app-perun-web-apps-destination-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"SERVICE_DETAIL.DESTINATIONS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.DESTINATIONS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,x0.q,He.t,Ye.L,u.X$]}),n})();function E0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function D0(n,r){1&n&&t._UZ(0,"th",13)}function L0(n,r){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function k0(n,r){1&n&&t._UZ(0,"tr",15)}function I0(n,r){1&n&&t._UZ(0,"tr",16)}function O0(n,r){if(1&n&&(t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",7),t.ynx(8,8),t.YNc(9,D0,1,0,"th",9),t.YNc(10,L0,2,1,"td",10),t.BQk(),t.YNc(11,k0,1,0,"tr",11),t.YNc(12,I0,1,0,"tr",12),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"DIALOGS.DELETE_OWNER.DESCRIPTION")," "),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.DELETE_OWNER.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function M0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.DELETE_OWNER.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.DELETE_OWNER.DELETE")," ")}}let N0=(()=>{class n{constructor(e,i,a,o,v){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=o,this.ownersManagerService=v,this.displayedColumns=["name"],this.owners=[]}ngOnInit(){this.dataSource=new F.by(this.data),this.owners=this.data}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.owners.length?this.ownersManagerService.deleteOwner(this.owners.pop().id).subscribe(()=>{this.onSubmit()},()=>this.loading=!1):this.translate.get("DIALOGS.DELETE_OWNER.SUCCESS").subscribe(e=>{this.loading=!1,this.notificator.showSuccess(e),this.dialogRef.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.aC))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-owner-dialog"]],decls:6,vars:6,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,E0,1,0,"mat-spinner",1),t.YNc(4,O0,13,9,"div",2),t.YNc(5,M0,7,7,"div",3)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"DIALOGS.DELETE_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,M.uh,M.xY,M.H8,nt.Ou,u.X$]}),n})();function P0(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function F0(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.FILL_CONTACT")," "))}function R0(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.CONTACT_FORMAT")," "))}function B0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",5)(2,"mat-form-field"),t._UZ(3,"input",6),t.ALo(4,"translate"),t.TgZ(5,"mat-error"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.ALo(10,"translate"),t.YNc(11,F0,3,3,"mat-error",3),t.YNc(12,R0,3,3,"mat-error",3),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-select",7),t.NdJ("valueChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.type=a)}),t.TgZ(15,"mat-option",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19),t.ALo(20,"translate"),t.qZA()()()(),t.TgZ(21,"div",10)(22,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t.ALo(26,"translate"),t.TgZ(27,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.s9C("placeholder",t.lcZ(4,15,"DIALOGS.ADD_OWNER.NAME")),t.Q6J("formControl",e.nameCtrl),t.xp6(3),t.hij(" ",t.lcZ(7,17,"DIALOGS.ADD_OWNER.FILL_NAME")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(10,19,"DIALOGS.ADD_OWNER.CONTACT")),t.Q6J("formControl",e.contactCtrl),t.xp6(2),t.Q6J("ngIf",e.contactCtrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.contactCtrl.invalid&&!e.contactCtrl.hasError("required")),t.xp6(2),t.Q6J("value",e.type),t.xp6(2),t.Oqu(t.lcZ(17,21,"DIALOGS.ADD_OWNER.TYPE1")),t.xp6(3),t.Oqu(t.lcZ(20,23,"DIALOGS.ADD_OWNER.TYPE2")),t.xp6(4),t.hij(" ",t.lcZ(24,25,"DIALOGS.ADD_OWNER.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(26,27,"DIALOGS.ADD_OWNER.TOOLTIP")),t.Q6J("matTooltipDisabled",e.nameCtrl.valid&&e.contactCtrl.valid),t.xp6(2),t.Q6J("disabled",e.nameCtrl.invalid||e.contactCtrl.invalid),t.xp6(1),t.hij(" ",t.lcZ(29,29,"DIALOGS.ADD_OWNER.CREATE")," ")}}let Z0=(()=>{class n{constructor(e,i,a,o){this.dialogRef=e,this.notificator=i,this.ownersManagerService=a,this.translate=o,this.type="1",o.get("DIALOGS.ADD_OWNER.SUCCESS").subscribe(v=>this.successMessage=v)}ngOnInit(){this.nameCtrl=new q.p4(null,[q.kI.required,q.kI.pattern("^[\\w.-]+( [\\w.-]+)*$")]),this.contactCtrl=new q.p4(null,[q.kI.required,q.kI.pattern(de.B2)])}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.ownersManagerService.createOwner({name:this.nameCtrl.value,contact:this.contactCtrl.value,ownerType:Number(this.type)}).subscribe(()=>{this.notificator.showSuccess(this.successMessage),this.loading=!1,this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(Z.V6),t.Y36(H.aC),t.Y36(u.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-owner-dialog"]],decls:6,vars:5,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"formControl","placeholder"],[3,"value","valueChange"],["value","1"],["value","0"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["matTooltipPosition","above",3,"matTooltip","matTooltipDisabled"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,P0,1,0,"mat-spinner",2),t.YNc(5,B0,30,31,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"DIALOGS.ADD_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,_t.ey,Ft.TO,Ft.KE,Ht.Nt,q.Fj,q.JJ,q.Q7,q.oH,G.lW,M.uh,M.xY,M.H8,he.gD,nt.Ou,un.gM,u.X$]}),n})();var V0=s(23256);function G0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addOwner())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.OWNERS.ADD")," "))}function U0(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeOwner())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.OWNERS.DELETE")," ")}}function z0(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function H0(n,r){if(1&n&&t._UZ(0,"perun-web-apps-owners-list",10),2&n){const e=t.oxw();t.Q6J("selection",e.selected)("filterValue",e.filterValue)("owners",e.owners)("tableId",e.tableId)}}let Y0=(()=>{class n{constructor(e,i,a){this.ownersManagerService=e,this.dialog=i,this.guiAuthResolver=a,this.owners=[],this.selected=new B.Ov(!0,[]),this.filterValue="",this.tableId=En.v1}ngOnInit(){this.setAuth(),this.refreshTable()}setAuth(){this.removeAuth=this.guiAuthResolver.isAuthorized("deleteOwner_Owner_policy",[]),this.addAuth=this.guiAuthResolver.isAuthorized("createOwner_Owner_policy",[])}refreshTable(){this.loading=!0,this.ownersManagerService.getAllOwners().subscribe(e=>{this.owners=e,this.selected.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}addOwner(){const e=(0,de.kZ)();e.width="400px",e.data={},this.dialog.open(Z0,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeOwner(){const e=(0,de.kZ)();e.width="400px",e.data=this.selected.selected,this.dialog.open(N0,e).afterClosed().subscribe(a=>{a&&(this.selected.clear(),this.refreshTable())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.aC),t.Y36(M.uw),t.Y36(Z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-owners"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","filterValue","owners","tableId",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"selection","filterValue","owners","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,G0,3,3,"button",2),t.YNc(6,U0,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(8,z0,1,0,"mat-spinner",5),t.YNc(9,H0,1,4,"perun-web-apps-owners-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"ADMIN.OWNERS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.addAuth),t.xp6(1),t.Q6J("ngIf",i.removeAuth),t.xp6(1),t.Q6J("placeholder","ADMIN.OWNERS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,He.t,Ye.L,V0.Q,u.X$]}),n})();var W0=s(74010);function X0(n,r){1&n&&t._UZ(0,"mat-spinner",5)}function $0(n,r){if(1&n&&t._UZ(0,"perun-web-apps-facilities-list",6),2&n){const e=t.oxw();t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("facilities",e.facilities)("tableId",e.tableId)}}let Q0=(()=>{class n{constructor(e,i){this.facilityManager=e,this.route=i,this.facilities=[],this.filterValue="",this.tableId=En.zW,this.displayedColumns=["id","name","description"]}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.refreshTable()})}refreshTable(){this.loading=!0,this.facilityManager.getAssignedFacilitiesByUser(this.userId).subscribe(e=>{this.facilities=e.map(i=>({facility:i})),this.loading=!1})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.IQ),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-facilities"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"displayedColumns","filterValue","facilities","tableId",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","facilities","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(6,X0,1,0,"mat-spinner",3),t.YNc(7,$0,1,4,"perun-web-apps-facilities-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.FACILITIES.TITLE")),t.xp6(3),t.Q6J("placeholder","USER_DETAIL.FACILITIES.FILTER_PLACEHOLDER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,nt.Ou,He.t,Ye.L,W0.X,u.X$]}),n})();var vc=s(64080),j0=s(24179),J0=s(62707),K0=s(19191),q0=s(12651),tx=s(60526);function ex(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function nx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-vo-search-select",7),t.NdJ("voSelected",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMember(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("vos",e.vos)}}function ix(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.STATUS")," ")}function rx(n,r){1&n&&t._UZ(0,"mat-spinner",6)}const ax=function(){return["id","recent","name","description","expiration","groupStatus"]};function sx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-groups-list",16),t.NdJ("refreshTable",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.loadMember(a.selectedVo))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("groups",e.groups)("memberId",e.member.id)("memberGroupStatus",e.member.groupStatus)("displayedColumns",t.DdM(4,ax))}}const ox=function(n,r){return["/organizations",n,"members",r]};function lx(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",10)(2,"span",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",12),t._uU(6),t.qZA()(),t._UZ(7,"app-member-overview-membership",13),t.TgZ(8,"p",14),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,sx,1,5,"perun-web-apps-groups-list",15),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,7,"USER_DETAIL.ACCOUNTS.MEMBER"),":"),t.xp6(2),t.Q6J("routerLink",t.WLB(11,ox,e.selectedVo.id,e.member.id)),t.xp6(1),t.hij("",e.member.id," "),t.xp6(1),t.Q6J("member",e.member)("vo",e.selectedVo),t.xp6(2),t.Oqu(t.lcZ(10,9,"USER_DETAIL.ACCOUNTS.GROUPS")),t.xp6(2),t.Q6J("ngIf",!e.loading)}}function cx(n,r){if(1&n&&(t.YNc(0,rx,1,0,"mat-spinner",1),t.YNc(1,lx,12,14,"div",4)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function ux(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_ATT")," ")}function hx(n,r){1&n&&t._UZ(0,"mat-spinner")}function dx(n,r){if(1&n&&t._UZ(0,"app-one-entity-attribute-page",18),2&n){const e=t.oxw(3);t.Q6J("entity","member")("entityId",e.member.id)}}function px(n,r){if(1&n&&(t.YNc(0,hx,1,0,"mat-spinner",4),t.YNc(1,dx,1,2,"app-one-entity-attribute-page",17)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function fx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_GROUP_ATT")," ")}function mx(n,r){1&n&&t._UZ(0,"mat-spinner")}function gx(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","group")}}function _x(n,r){if(1&n&&(t.YNc(0,mx,1,0,"mat-spinner",4),t.YNc(1,gx,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function vx(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_RESOURCE_ATT")," ")}function xx(n,r){1&n&&t._UZ(0,"mat-spinner")}function yx(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","resource")}}function bx(n,r){if(1&n&&(t.YNc(0,xx,1,0,"mat-spinner",4),t.YNc(1,yx,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function Tx(n,r){1&n&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab"),t.YNc(2,ix,2,3,"ng-template",8),t.YNc(3,cx,2,2,"ng-template",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,ux,2,3,"ng-template",8),t.YNc(6,px,2,2,"ng-template",9),t.qZA(),t.TgZ(7,"mat-tab"),t.YNc(8,fx,2,3,"ng-template",8),t.YNc(9,_x,2,2,"ng-template",9),t.qZA(),t.TgZ(10,"mat-tab"),t.YNc(11,vx,2,3,"ng-template",8),t.YNc(12,bx,2,2,"ng-template",9),t.qZA()())}function Cx(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USER_DETAIL.ACCOUNTS.NO_VOS")))}let wx=(()=>{class n{constructor(e,i,a,o){this.route=e,this.usersService=i,this.membersService=a,this.groupService=o,this.initLoading=!1,this.loading=!1,this.vos=[],this.selectedVo=null,this.member=null,this.groups=[]}ngOnInit(){this.initLoading=!0,this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.usersService.getVosWhereUserIsMember(this.userId).subscribe(i=>{this.vos=i,this.initLoading=!1},()=>this.initLoading=!1)})}loadMember(e){this.loading=!0,this.selectedVo=e,this.membersService.getMemberByUser(this.selectedVo.id,this.userId).subscribe(i=>{this.membersService.getRichMemberWithAttributes(i.id).subscribe(a=>{this.member=a,this.groupService.getMemberRichGroupsWithAttributesByNames(this.member.id,[vc.r.MEMBER_DEF_GROUP_EXPIRATION,vc.r.MEMBER_GROUP_STATUS]).subscribe(o=>{this.groups=o,this.loading=!1},()=>this.loading=!1)},()=>this.loading=!1)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(H.Fv),t.Y36(H.uq),t.Y36(H.ff))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-accounts"]],decls:8,vars:7,consts:[[1,"page-title"],["class","ml-auto mr-auto",4,"ngIf"],[1,"d-flex"],["class","w-50",3,"vos","voSelected",4,"ngIf"],[4,"ngIf"],["alert_type","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"w-50",3,"vos","voSelected"],["matTabLabel",""],["matTabContent",""],[1,"mt-4","mb-4"],[1,"subtitle","mr-2"],["queryParamsHandling","merge",1,"member-link",3,"routerLink"],[3,"member","vo"],[1,"mt-4","subtitle"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable",4,"ngIf"],[3,"groups","memberId","memberGroupStatus","displayedColumns","refreshTable"],[3,"entity","entityId",4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,ex,1,0,"mat-spinner",1),t.TgZ(4,"div",2),t.YNc(5,nx,1,1,"perun-web-apps-vo-search-select",3),t.qZA(),t.YNc(6,Tx,13,0,"mat-tab-group",4),t.YNc(7,Cx,3,3,"perun-web-apps-alert",5)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.ACCOUNTS.TITLE")),t.xp6(2),t.Q6J("ngIf",i.initLoading),t.xp6(2),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!i.initLoading&&0===i.vos.length))},dependencies:[m.O5,p.yS,ke.SP,ke.uD,ke.uX,ke.Vc,nt.Ou,et.w,j0.W,J0.M,K0.Y,q0.t,tx.b,u.X$],styles:[".subtitle[_ngcontent-%COMP%]{font-size:1.2rem}"]}),n})(),xc=(()=>{class n{transform(e){if(e)return e.split(".").pop()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"parseEventName",type:n,pure:!0}),n})();function Ax(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.OBJECTS")," ")}function Sx(n,r){if(1&n&&t._UZ(0,"pre",9),2&n){const e=t.oxw();t.Q6J("innerHTML",e.syntaxHighlight(e.eventData),t.oJD)}}function Ex(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.MESSAGE")," ")}function Dx(n,r){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.message)}}let Lx=(()=>{class n{constructor(e,i,a){this.dialogRef=e,this.data=i,this.clipboard=a,this.tabIndex=0,this.eventData={}}ngOnInit(){const e=this.data.message.event;this.actor=this.data.message.actor,this.createdAt=this.data.message.createdAt,e.message&&(this.message=e.message,delete e.message),e.name&&(this.title=e.name,delete e.name),this.eventData=e}tabChanged(e){this.tabIndex=e.index}copyObjects(){this.clipboard.copy(JSON.stringify(this.eventData,null,2))}copyMessage(){this.clipboard.copy(this.message)}syntaxHighlight(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(i){let a="number";return i.startsWith('"')?a=i.endsWith(":")?"key":"string":/true|false/.test(i)?a="boolean":i.includes("null")&&(a="null"),'<span class="'+a+'">'+i+"</span>"})}onClose(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI),t.Y36(kn.TU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-message-detail-dialog"]],decls:26,vars:19,consts:[[1,"admin-theme"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-button","",3,"click"],[3,"innerHTML"],["data-cy","audit-message-text"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"parseEventName"),t.qZA(),t.TgZ(5,"div",2)(6,"div"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"mat-tab-group",3),t.NdJ("selectedTabChange",function(o){return i.tabChanged(o)}),t.TgZ(11,"mat-tab"),t.YNc(12,Ax,2,3,"ng-template",4),t.YNc(13,Sx,1,1,"ng-template",5),t.qZA(),t.TgZ(14,"mat-tab"),t.YNc(15,Ex,2,3,"ng-template",4),t.YNc(16,Dx,2,1,"ng-template",5),t.qZA()()(),t.TgZ(17,"div",6)(18,"button",7),t.NdJ("click",function(){return i.onClose()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){return 0===i.tabIndex?i.copyObjects():i.copyMessage()}),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"mat-icon"),t._uU(25,"content_copy"),t.qZA()()()()),2&e){let a;t.xp6(2),t.hij(" ",t.lcZ(3,7,null!==(a=t.lcZ(4,9,i.title))&&void 0!==a?a:"DIALOGS.AUDIT_MESSAGE_DETAIL.TITLE")," "),t.xp6(5),t.HOy(" ",t.lcZ(8,11,"DIALOGS.AUDIT_MESSAGE_DETAIL.ACTOR"),": ",i.actor,", ",t.lcZ(9,13,"DIALOGS.AUDIT_MESSAGE_DETAIL.CREATED_AT"),": ",i.createdAt," "),t.xp6(12),t.hij(" ",t.lcZ(20,15,"DIALOGS.AUDIT_MESSAGE_DETAIL.CLOSE")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"DIALOGS.AUDIT_MESSAGE_DETAIL.COPY")," ")}},dependencies:[l.Hw,G.lW,ke.SP,ke.uD,ke.uX,ke.Vc,M.uh,M.xY,M.H8,u.X$,xc],styles:[".key{color:brown}.string{color:green}.number{color:#ff8c00}.boolean{color:#00f}.null{color:#f0f}\n"],encapsulation:2}),n})();var kx=s(98739),Ix=s(56451),Ox=s(62383);function Mx(n,r){1&n&&(t.TgZ(0,"div",16),t._UZ(1,"mat-spinner",17),t.qZA())}function Nx(n,r){1&n&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ID")," "))}function Px(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Fx(n,r){1&n&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.TIMESTAMP")," "))}function Rx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseDate"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,!0)," ")}}function Bx(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.EVENT_NAME")))}function Zx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseEventName"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.event.name)," ")}}function Vx(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ACTOR")))}function Gx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.actor," ")}}function Ux(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.MESSAGE")))}function zx(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.event.message," ")}}function Hx(n,r){1&n&&t._UZ(0,"th",20)}function Yx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",19)(1,"button",21),t.NdJ("click",function(){const o=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.viewDetails(o))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AUDIT_MESSAGES_LIST.VIEW_DETAIL")," "))}function Wx(n,r){1&n&&t._UZ(0,"tr",22)}function Xx(n,r){1&n&&t._UZ(0,"tr",23)}function $x(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_AUDIT_MESSAGES"),"\n"))}let Qx=(()=>{class n{constructor(e,i,a){this.dialog=e,this.dynamicPaginatingService=i,this.tableConfigService=a,this.displayedColumns=["id","timestamp","name","actor","event.message","detail"],this.pageSizeOptions=de.f7}static getExportDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"timestamp":return(0,m.p6)(e.createdAt,"d.M.y H.mm.ss","en");case"name":return e.event.name.split(".").pop();case"actor":return e.actor;case"event.message":return e.event.message;default:return""}}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.child.paginator.pageIndex=0),(0,Ix.T)(this.sort.sortChange,this.child.paginator.page).pipe((0,b.b)(()=>this.loadAuditMessagesPage())).subscribe()}ngOnInit(){this.dataSource=new Z.Hy(this.dynamicPaginatingService,null),this.dataSource.loadAuditMessages(this.tableConfigService.getTablePageSize(this.tableId),0,"DESCENDING")}ngOnChanges(){this.dataSource&&(this.child.paginator.pageIndex=0,this.loadAuditMessagesPage())}loadAuditMessagesPage(){this.dataSource.loadAuditMessages(this.child.paginator.pageSize,this.child.paginator.pageIndex,"asc"===this.sort.direction?"ASCENDING":"DESCENDING")}viewDetails(e){const i=(0,de.kZ)(),a=JSON.parse(JSON.stringify(e));i.minWidth="700px",i.maxWidth="1000px",i.data={message:a},this.dialog.open(Lx,i)}exportDisplayedData(e){(0,de.O6)((0,de.Xn)(this.dataSource.getData(),this.displayedColumns.filter(i=>"detail"!==i),n.getExportDataForColumn),e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.uw),t.Y36(Z.ly),t.Y36(En.dB))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-messages-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(de.l9,7),t.Gf(an.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},inputs:{tableId:"tableId",refresh:"refresh",displayedColumns:"displayedColumns",searchString:"searchString"},features:[t._Bn([{provide:kx.ye,useClass:Z.Be}]),t.TTD],decls:28,vars:16,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","pageSizeOptions","tableId","allowExportAll","exportDisplayedData"],["class","spinner-container",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","timestamp"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actor"],["matColumnDef","event.message"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],[1,"spinner-container"],[1,"ml-auto","mr-auto"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["data-cy","audit-message-detail-button","color","accent","mat-flat-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return i.exportDisplayedData(o)}),t.YNc(3,Mx,2,0,"div",2),t.ALo(4,"async"),t.TgZ(5,"table",3),t.ynx(6,4),t.YNc(7,Nx,3,3,"th",5),t.YNc(8,Px,2,1,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,Fx,3,3,"th",5),t.YNc(11,Rx,3,4,"td",6),t.BQk(),t.ynx(12,8),t.YNc(13,Bx,3,3,"th",9),t.YNc(14,Zx,3,3,"td",6),t.BQk(),t.ynx(15,10),t.YNc(16,Vx,3,3,"th",9),t.YNc(17,Gx,2,1,"td",6),t.BQk(),t.ynx(18,11),t.YNc(19,Ux,3,3,"th",9),t.YNc(20,zx,2,1,"td",6),t.BQk(),t.ynx(21,12),t.YNc(22,Hx,1,0,"th",9),t.YNc(23,Yx,4,3,"td",6),t.BQk(),t.YNc(24,Wx,1,0,"tr",13),t.YNc(25,Xx,1,0,"tr",14),t.qZA()()(),t.YNc(26,$x,3,3,"perun-web-apps-alert",15),t.ALo(27,"async")),2&e&&(t.Q6J("hidden",0===i.dataSource.allObjectCount&&!1===t.lcZ(1,10,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataLength",i.dataSource.allObjectCount)("pageSizeOptions",i.pageSizeOptions)("tableId",i.tableId)("allowExportAll",!1),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,12,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.allObjectCount&&!1===t.lcZ(27,14,i.dataSource.loading$)))},dependencies:[m.O5,G.lW,an.YE,an.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,nt.Ou,et.w,z.l,m.Ov,u.X$,Ox.M,xc]}),n})(),jx=(()=>{class n{constructor(){this.tableId=En.yW,this.refresh=!1}refreshTable(){this.refresh=!this.refresh}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-audit-log"]],decls:5,vars:5,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"refresh","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t._UZ(4,"app-audit-messages-list",2)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,3,"ADMIN.AUDIT_LOG.TITLE")),t.xp6(3),t.Q6J("refresh",i.refresh)("tableId",i.tableId))},dependencies:[Qx,He.t,u.X$]}),n})();var Jx=s(44850);let Kx=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.so),t.Y36(M.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-edit-enforce-consents-dialog"]],decls:26,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-2","mb-2"],["alert_type","warn"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",1)(6,"p"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"mat-divider"),t.TgZ(11,"p",2),t._uU(12),t.qZA(),t._UZ(13,"mat-divider"),t.TgZ(14,"perun-web-apps-alert",3),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",6),t.NdJ("click",function(){return i.onSubmit()}),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA()()()),2&e&&(t.Tol(i.data.theme),t.xp6(2),t.hij(" ",i.data.enforceConsents?t.lcZ(3,9,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_TITLE"):t.lcZ(4,11,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_TITLE")," "),t.xp6(5),t.hij(" ",i.data.enforceConsents?t.lcZ(8,13,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_DESCRIPTION"):t.lcZ(9,15,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_DESCRIPTION")," "),t.xp6(5),t.Oqu(i.data.consentHubName),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(16,17,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BOLD_DESCRIPTION"):t.lcZ(17,19,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BOLD_DESCRIPTION")," "),t.xp6(5),t.hij(" ",t.lcZ(21,21,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.CANCEL_BUTTON")," "),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(24,23,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BUTTON"):t.lcZ(25,25,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BUTTON")," "))},dependencies:[G.lW,M.uh,M.xY,M.H8,Jx.d,et.w,u.X$]}),n})();function qx(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",17)(1,"mat-checkbox",18),t.NdJ("change",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(a?o.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("aria-label",i.checkboxLabel())("checked",i.selection.hasValue()&&e.all)("indeterminate",i.selection.hasValue()&&!e.all)}}function ty(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",19)(1,"mat-checkbox",20),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(a?T.selection.toggle(v):null)})("click",function(a){return a.stopPropagation()}),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))}}function ey(n,r){1&n&&(t.ynx(0,14),t.YNc(1,qx,2,3,"th",15),t.YNc(2,ty,2,2,"td",16),t.BQk())}function ny(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ID")," "))}function iy(n,r){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function ry(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NAME")," "))}function ay(n,r){if(1&n&&(t.TgZ(0,"td",23),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&n){const e=r.$implicit;t.Q2q("data-cy","",t.lcZ(1,2,e.name),"-name-td"),t.xp6(2),t.hij(" ",e.name," ")}}function sy(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ENFORCE_CONSENTS")," "))}function oy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"mat-slide-toggle",24),t.NdJ("change",function(a){const v=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.changeEnforceFlag(v,a))}),t.qZA()()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("checked",e.enforceConsents)}}function ly(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.FACILITIES")," "))}function cy(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",26),t._uU(3),t.qZA(),t._UZ(4,"br"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" #",e.id,"")}}function uy(n,r){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,cy,5,2,"span",25),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.facilities)}}function hy(n,r){1&n&&t._UZ(0,"tr",27)}function dy(n,r){1&n&&t._UZ(0,"tr",28)}function py(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_CONSENT_HUBS"),"\n"))}function fy(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_FILTER_RESULTS"),"\n"))}const my=function(n){return{all:n}};let gy=(()=>{class n{constructor(e,i,a,o,v){this.tableCheckbox=e,this.dialog=i,this.notificator=a,this.translate=o,this.consentsManager=v,this.filterValue="",this.displayedColumns=["select","id","name","enforceConsents","facilities"],this.selection=new B.Ov(!0,[]),this.exporting=!1,this.pageSizeOptions=de.f7}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"name":return e.name;case"enforceConsents":return e.enforceConsents?"true":"false";case"facilities":{let a="";return e.facilities.forEach(o=>a+=o.name+" #"+String(o.id)+";"),a.slice(0,-1)}default:return""}}ngOnChanges(){this.dataSource=new F.by(this.consentHubs),this.setDataSource()}exportAllData(e){(0,de.O6)((0,de.Xn)(this.dataSource.filteredData,this.displayedColumns,n.getDataForColumn),e)}exportDisplayedData(e){const i=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=i+this.dataSource.paginator.pageSize;(0,de.O6)((0,de.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(i,a),this.displayedColumns,n.getDataForColumn),e)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(e,i)=>(0,de.Sd)(e,i,this.displayedColumns,n.getDataForColumn),this.dataSource.sortData=(e,i)=>(0,de.pR)(e,i,n.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}changeEnforceFlag(e,i){i.source.checked=e.enforceConsents;const a=(0,de.kZ)();a.width="550px",a.data={theme:"admin-theme",enforceConsents:e.enforceConsents,consentHubName:e.name},this.dialog.open(Kx,a).afterClosed().subscribe(v=>{v&&(e.enforceConsents=!e.enforceConsents,this.consentsManager.updateConsentHub({consentHub:e}).subscribe(T=>{i.source.checked=T.enforceConsents,e.enforceConsents=T.enforceConsents,this.translate.get("SHARED.COMPONENTS.CONSENT_HUBS_LIST.CHANGE_ENFORCE_CONSENTS_SUCCESS").subscribe(N=>{this.notificator.showSuccess(N)})},()=>e.enforceConsents=!e.enforceConsents))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.UA),t.Y36(M.uw),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(H.WY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-consent-hubs-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(de.l9,7),t.Gf(an.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{consentHubs:"consentHubs",filterValue:"filterValue",displayedColumns:"displayedColumns",tableId:"tableId",selection:"selection"},features:[t.TTD],decls:21,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enforceConsents"],["matColumnDef","facilities"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],[3,"checked","change"],[4,"ngFor","ngForOf"],[1,"text-muted"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(o){return i.exportDisplayedData(o)})("exportAllData",function(o){return i.exportAllData(o)}),t.TgZ(2,"table",2),t.YNc(3,ey,3,0,"ng-container",3),t.ALo(4,"isAllSelected"),t.ynx(5,4),t.YNc(6,ny,3,3,"th",5),t.YNc(7,iy,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,ry,3,3,"th",5),t.YNc(10,ay,3,4,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,sy,3,3,"th",5),t.YNc(13,oy,2,1,"td",8),t.BQk(),t.ynx(14,10),t.YNc(15,ly,3,3,"th",5),t.YNc(16,uy,2,1,"td",8),t.BQk(),t.YNc(17,hy,1,0,"tr",11),t.YNc(18,dy,1,0,"tr",12),t.qZA()()(),t.YNc(19,py,3,3,"perun-web-apps-alert",13),t.YNc(20,fy,3,3,"perun-web-apps-alert",13)),2&e&&(t.Q6J("hidden",0===i.consentHubs.length||0===i.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",i.tableId)("dataLength",i.dataSource.filteredData.length)("pageSizeOptions",i.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(13,my,t.xi3(4,10,i.dataSource,i.selection.selected.length))),t.xp6(14),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.consentHubs.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.consentHubs.length))},dependencies:[m.sg,m.O5,an.YE,an.nU,F.BZ,F.fO,F.as,F.w1,F.Dz,F.nj,F.ge,F.ev,F.XQ,F.Gk,Pn.oG,Tt.Rr,et.w,z.l,u.X$,Fe.R,oe.I]}),n})();function _y(n,r){1&n&&(t.TgZ(0,"perun-web-apps-alert",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.CONSENT_HUBS.GLOBAL_DISABLED")," "))}function vy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.evaluateConsents())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.globalForceConsents||0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.CONSENT_HUBS.EVALUATE_CONSENTS")," ")}}function xy(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function yy(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-consent-hubs-list",11),2&n){const e=t.oxw();t.Q6J("consentHubs",e.consentHubs)("selection",e.selection)("filterValue",e.filterValue)("tableId",e.tableId)}}let by=(()=>{class n{constructor(e,i,a,o,v,T){this.consentsManager=e,this.authResolver=i,this.notificator=a,this.translate=o,this.store=v,this.dialog=T,this.loading=!1,this.tableId=En.HE,this.selection=new B.Ov(!0,[]),this.filterValue="",this.consentHubs=[]}ngOnInit(){this.globalForceConsents=this.store.getProperty("enforce_consents"),this.refreshTable()}applyFilter(e){this.filterValue=e}refreshTable(){this.loading=!0,this.consentsManager.getAllConsentHubs().subscribe(e=>{this.consentHubs=e,this.loading=!1})}evaluateConsents(){const e=(0,de.kZ)();e.width="500px",e.data={title:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_TITLE"),theme:"admin-theme",description:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_DESCRIPTION"),items:this.selection.selected.map(a=>a.name),type:"confirmation",showAsk:!1},this.dialog.open(fa.Ts,e).afterClosed().subscribe(a=>{a&&this.evaluateConsentsForConsentHub(0)})}evaluateConsentsForConsentHub(e){if(e===this.selection.selected.length)return this.notificator.showSuccess(this.translate.instant("ADMIN.CONSENT_HUBS.EVALUATION_FINISH")),void this.selection.clear();this.consentsManager.evaluateConsentsForConsentHub(this.selection.selected[e].id).subscribe(()=>{this.evaluateConsentsForConsentHub(++e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.WY),t.Y36(Z.x4),t.Y36(Z.V6),t.Y36(u.sK),t.Y36(Z.d6),t.Y36(M.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-admin-consent-hubs"]],decls:12,vars:12,consts:[[1,"page-subtitle"],["alert_type","warn",4,"ngIf"],[3,"refresh"],[3,"matTooltipDisabled","matTooltip"],["color","accent","class","action-button mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"consentHubs","selection","filterValue","tableId",4,"ngIf"],["alert_type","warn"],["color","accent","mat-flat-button","",1,"action-button","mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"consentHubs","selection","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,_y,3,3,"perun-web-apps-alert",1),t.TgZ(5,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(6,"span",3),t.ALo(7,"translate"),t.YNc(8,vy,3,4,"button",4),t.qZA(),t.TgZ(9,"perun-web-apps-immediate-filter",5),t.NdJ("filter",function(o){return i.applyFilter(o)}),t.qZA(),t.YNc(10,xy,1,0,"mat-spinner",6),t.YNc(11,yy,1,4,"app-perun-web-apps-consent-hubs-list",7),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,8,"ADMIN.CONSENT_HUBS.TITLE")),t.xp6(2),t.Q6J("ngIf",!i.globalForceConsents),t.xp6(2),t.s9C("matTooltip",t.lcZ(7,10,"ADMIN.CONSENT_HUBS.TOOLTIP")),t.Q6J("matTooltipDisabled",i.globalForceConsents),t.xp6(2),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.CONSENT_HUBS.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},dependencies:[m.O5,G.lW,nt.Ou,un.gM,gy,et.w,He.t,Ye.L,u.X$]}),n})();var Ty=s(57788),Vs=s(71992);const Cy=[{path:"",component:C,canActivateChild:[Vs.a],children:[{path:"",component:I,data:{animation:"AdminOverviewPage"}},{path:"attributes",component:bi,data:{animation:"AdminAttributesPage"}},{path:"users",component:W_.t,data:{animation:"AdminUsersPage"}},{path:"owners",component:Y0,data:{animation:"AdminOwnersPage"}},{path:"services",component:Tv.F,data:{animation:"AdminServicesPage"}},{path:"audit_log",component:jx,data:{animation:"AdminAuditLogPage"}},{path:"visualizer",component:cn,children:[{path:"",component:Ti,data:{animation:"VisualizerOverviewPage"}},{path:"attrDependencies",component:en,data:{animation:"VisualizerAttrModulesPage"}},{path:"userDestinationRelationship",component:Qe,data:{animation:"UserDestinationRelationshipPage"}},{path:"userDestinationRelationship/graph",component:Y_,data:{animation:"UserDestinationGraphPage"}}]},{path:"ext_sources",component:cv,data:{animation:"AdminExtSourcesPage"}},{path:"consent_hubs",component:by,data:{animation:"AdminConsentHubsPage"}},{path:"searcher",component:Ty.g,data:{animation:"AdminSearcherPage"}}]},{path:"users/:userId",component:tv,canActivateChild:[Vs.a],children:[{path:"",component:ev.Z,data:{animation:"UserOverviewPage"}},{path:"accounts",component:wx,data:{animation:"UserAccountsPage"}},{path:"attributes",component:rv.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:nv.j,data:{animation:"UserOrganizationsPage",showPrincipal:!1}},{path:"groups",component:iv.u,data:{animation:"UserGroupsPage",showPrincipal:!1}},{path:"identities",component:bv,data:{animation:"UserIdentitiesPage"}},{path:"facilities",component:Q0,data:{animation:"UserFacilitiesPage"}},{path:"resources",component:Ev,data:{animation:"UserRoles"}},{path:"identities/:identityId",component:Nv,data:{animation:"UserIdentityDetailPage"}},{path:"roles",component:uv.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:hv.R,data:{animation:"UserServiceIdentities"}},{path:"associated-users",component:_0.d,data:{animation:"AssociatedUsersPage"}}]},{path:"services/:serviceId",component:Hv,canActivateChild:[Vs.a],children:[{path:"",component:Yv,data:{animation:"ServiceOverviewPage"}},{path:"required-attributes",component:g0,data:{animation:"ServiceRequiredAttributesPage"}},{path:"destinations",component:S0,data:{animation:"ServiceDestinationsPage"}}]}];let wy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(Cy),p.Bz]}),n})();var Ay=s(14264),Sy=s(63189),Ey=s(46374);let Dy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Ep,N_,m.ez,wy,Ay.m,Sy.r,Ri.ez,Nt.d4,Ey.UsersModule]}),n})()},70242:(w,D,s)=>{"use strict";s.d(D,{q:()=>Nt});var c=s(96308),x=s(95017),_=s(30671),m=s(9244),p=s(35382),t=s(94650),d=s(36895),l=s(97392),h=s(56709),f=s(10266),u=s(98380),g=s(18750),C=s(89383),L=s(64597),I=s(9185);function B(_t,Xt){if(1&_t){const Ft=t.EpF();t.TgZ(0,"th",22)(1,"mat-checkbox",23),t.NdJ("change",function(he){t.CHM(Ft);const ke=t.oxw(2);return t.KtG(he?ke.masterToggle():null)}),t.qZA()()}if(2&_t){const Ft=t.oxw().ngIf,Ht=t.oxw();t.xp6(1),t.Q6J("aria-label",Ht.checkboxLabel())("checked",Ht.selection.hasValue()&&Ft.all)("indeterminate",Ht.selection.hasValue()&&!Ft.all)}}function M(_t,Xt){if(1&_t){const Ft=t.EpF();t.TgZ(0,"td",24)(1,"mat-checkbox",25),t.NdJ("change",function(he){const Ie=t.CHM(Ft).$implicit,Lt=t.oxw(2);return t.KtG(he?Lt.selection.toggle(Ie):null)})("click",function(he){return he.stopPropagation()}),t.qZA()()}if(2&_t){const Ft=Xt.$implicit,Ht=t.oxw(2);t.xp6(1),t.Q6J("aria-label",Ht.checkboxLabel(Ft))("checked",Ht.selection.isSelected(Ft))}}function F(_t,Xt){1&_t&&(t.ynx(0,19),t.YNc(1,B,2,3,"th",20),t.YNc(2,M,2,2,"td",21),t.BQk())}function Z(_t,Xt){1&_t&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION_ID")," "))}function H(_t,Xt){if(1&_t&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&_t){const Ft=Xt.$implicit;t.xp6(1),t.hij(" ",Ft.id," ")}}function G(_t,Xt){1&_t&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.SERVICE")," "))}function nt(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&_t){const Ft=Xt.$implicit;t.xp6(1),t.Oqu(Ft.service.name)}}function et(_t,Xt){1&_t&&t._UZ(0,"th",29)}function st(_t,Xt){1&_t&&(t.TgZ(0,"mat-icon",31),t.ALo(1,"translate"),t._uU(2," warning "),t.qZA()),2&_t&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.WARN"))}function K(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t.YNc(1,st,3,3,"mat-icon",30),t.qZA()),2&_t){const Ft=Xt.$implicit,Ht=t.oxw();t.xp6(1),t.Q6J("ngIf",!Ht.services.has(Ft.service.id))}}function $(_t,Xt){1&_t&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.FACILITY")," "))}function it(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&_t){const Ft=Xt.$implicit;t.xp6(1),t.Oqu(Ft.facility.name)}}function at(_t,Xt){1&_t&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION")," "))}function X(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t.ALo(1,"multiWordDataCy"),t._uU(2),t.qZA()),2&_t){const Ft=Xt.$implicit;t.uIk("data-cy",t.lcZ(1,2,Ft.destination)),t.xp6(2),t.hij(" ",Ft.destination," ")}}function W(_t,Xt){1&_t&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.TYPE")," "))}function q(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&_t){const Ft=Xt.$implicit;t.xp6(1),t.Oqu(Ft.type.toUpperCase())}}function Y(_t,Xt){1&_t&&t._UZ(0,"th",29)}function R(_t,Xt){1&_t&&(t.TgZ(0,"mat-icon",33),t.ALo(1,"translate"),t._uU(2," check_circle_outline "),t.qZA()),2&_t&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.ALLOWED"))}function E(_t,Xt){1&_t&&(t.TgZ(0,"mat-icon",33),t.ALo(1,"translate"),t._uU(2," block "),t.qZA()),2&_t&&t.s9C("matTooltip",t.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.BLOCKED"))}function pt(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t.YNc(1,R,3,3,"mat-icon",32),t.YNc(2,E,3,3,"mat-icon",32),t.qZA()),2&_t){const Ft=Xt.$implicit;t.xp6(1),t.Q6J("ngIf",!Ft.blocked),t.xp6(1),t.Q6J("ngIf",Ft.blocked)}}function St(_t,Xt){1&_t&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.PROPAGATION_TYPE")," "))}function Mt(_t,Xt){if(1&_t&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&_t){const Ft=Xt.$implicit;t.xp6(1),t.Oqu(Ft.propagationType)}}function Et(_t,Xt){1&_t&&t._UZ(0,"tr",34)}function Jt(_t,Xt){1&_t&&t._UZ(0,"tr",35)}function ue(_t,Xt){1&_t&&(t.TgZ(0,"perun-web-apps-alert",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}function wt(_t,Xt){1&_t&&(t.TgZ(0,"perun-web-apps-alert",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_t&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.NO_DESTINATIONS"),"\n"))}const yt=function(_t){return{all:_t}};let Nt=(()=>{class _t{constructor(Ft,Ht){this.authResolver=Ft,this.tableCheckbox=Ht,this.destinations=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.pageSizeOptions=m.f7}set matSort(Ft){this.sort=Ft,this.setDataSource()}static getDataForColumn(Ft,Ht){switch(Ht){case"destinationId":return Ft.id.toString();case"service":return Ft.service.name;case"facility":return Ft.facility.name;case"destination":return Ft.destination;case"type":return Ft.type;case"status":return Ft.blocked?"blocked":"allowed";case"propagationType":return Ft.propagationType;default:return""}}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(Ft=>"destinationId"!==Ft)),this.dataSource=new _.by(this.destinations),this.setDataSource(),this.dataSource.filter=this.filterValue.toLowerCase()}exportAllData(Ft){(0,m.O6)((0,m.Xn)(this.dataSource.filteredData,this.displayedColumns,_t.getDataForColumn),Ft)}exportDisplayedData(Ft){const Ht=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,he=Ht+this.dataSource.paginator.pageSize;(0,m.O6)((0,m.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(Ht,he),this.displayedColumns,_t.getDataForColumn),Ft)}setDataSource(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(Ft,Ht)=>(0,m.Sd)(Ft,Ht,this.displayedColumns,_t.getDataForColumn),this.dataSource.sortData=(Ft,Ht)=>(0,m.pR)(Ft,Ht,_t.getDataForColumn),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(Ft){return Ft?`${this.selection.isSelected(Ft)?"deselect":"select"} row ${Ft.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}}return _t.\u0275fac=function(Ft){return new(Ft||_t)(t.Y36(p.x4),t.Y36(p.UA))},_t.\u0275cmp=t.Xpm({type:_t,selectors:[["app-perun-web-apps-destination-list"]],viewQuery:function(Ft,Ht){if(1&Ft&&(t.Gf(m.l9,7),t.Gf(c.YE,7)),2&Ft){let he;t.iGM(he=t.CRH())&&(Ht.child=he.first),t.iGM(he=t.CRH())&&(Ht.matSort=he.first)}},inputs:{destinations:"destinations",selection:"selection",filterValue:"filterValue",tableId:"tableId",displayedColumns:"displayedColumns",services:"services"},features:[t.TTD],decls:33,vars:15,consts:[[1,"card","mt-3",3,"hidden"],[3,"pageSizeOptions","dataLength","tableId","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","destinationId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","service"],["mat-cell","",4,"matCellDef"],["matColumnDef","warn"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","facility"],["matColumnDef","destination"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","propagationType"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],["class","warn","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"warn",3,"matTooltip"],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(Ft,Ht){1&Ft&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(ke){return Ht.exportDisplayedData(ke)})("exportAllData",function(ke){return Ht.exportAllData(ke)}),t.TgZ(2,"table",2),t.YNc(3,F,3,0,"ng-container",3),t.ALo(4,"isAllSelected"),t.ynx(5,4),t.YNc(6,Z,3,3,"th",5),t.YNc(7,H,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,G,3,3,"th",5),t.YNc(10,nt,2,1,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,et,1,0,"th",10),t.YNc(13,K,2,1,"td",8),t.BQk(),t.ynx(14,11),t.YNc(15,$,3,3,"th",5),t.YNc(16,it,2,1,"td",8),t.BQk(),t.ynx(17,12),t.YNc(18,at,3,3,"th",5),t.YNc(19,X,3,4,"td",8),t.BQk(),t.ynx(20,13),t.YNc(21,W,3,3,"th",5),t.YNc(22,q,2,1,"td",8),t.BQk(),t.ynx(23,14),t.YNc(24,Y,1,0,"th",10),t.YNc(25,pt,3,2,"td",8),t.BQk(),t.ynx(26,15),t.YNc(27,St,3,3,"th",5),t.YNc(28,Mt,2,1,"td",8),t.BQk(),t.YNc(29,Et,1,0,"tr",16),t.YNc(30,Jt,1,0,"tr",17),t.qZA()()(),t.YNc(31,ue,3,3,"perun-web-apps-alert",18),t.YNc(32,wt,3,3,"perun-web-apps-alert",18)),2&Ft&&(t.Q6J("hidden",0===Ht.dataSource.filteredData.length||0===Ht.destinations.length),t.xp6(1),t.Q6J("pageSizeOptions",Ht.pageSizeOptions)("dataLength",Ht.dataSource.filteredData.length)("tableId",Ht.tableId),t.xp6(1),t.Q6J("dataSource",Ht.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(13,yt,t.xi3(4,10,Ht.dataSource,Ht.selection.selected.length))),t.xp6(26),t.Q6J("matHeaderRowDef",Ht.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",Ht.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===Ht.dataSource.filteredData.length&&0!==Ht.destinations.length),t.xp6(1),t.Q6J("ngIf",0===Ht.destinations.length))},dependencies:[d.O5,l.Hw,c.YE,c.nU,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,h.oG,f.gM,u.w,g.l,C.X$,L.R,I.I],styles:[".warn[_ngcontent-%COMP%]{color:#ebe134}"]}),_t})()},89466:(w,D,s)=>{"use strict";s.d(D,{u:()=>I});var c=s(32105),x=s(65412),_=s(30671),m=s(35382),p=s(94650),t=s(89383),d=s(36895),l=s(4859),h=s(51572),f=s(98380),u=s(70242);function g(B,M){1&B&&p._UZ(0,"mat-spinner",6)}function C(B,M){if(1&B&&p._UZ(0,"app-perun-web-apps-destination-list",11),2&B){const F=p.oxw(2);p.Q6J("destinations",F.destinations)("displayedColumns",F.displayedColumns)}}function L(B,M){if(1&B&&(p.TgZ(0,"div",7)(1,"perun-web-apps-alert",8),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"div",9),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.YNc(10,C,1,2,"app-perun-web-apps-destination-list",10),p.qZA()),2&B){const F=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,4,"DIALOGS.REMOVE_DESTINATIONS.WARNING")),p.xp6(3),p.Oqu(p.lcZ(6,6,"DIALOGS.REMOVE_DESTINATIONS.DESCRIPTION")),p.xp6(3),p.hij(" ",p.lcZ(9,8,"DIALOGS.REMOVE_DESTINATIONS.ASK")," "),p.xp6(2),p.Q6J("ngIf",!F.loading)}}let I=(()=>{class B{constructor(F,Z,H,G,nt){this.dialogRef=F,this.data=Z,this.notificator=H,this.translate=G,this.serviceManager=nt,this.displayedColumns=[],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.destinations=this.data.destinations,this.displayedColumns="admin-theme"===this.theme?["destinationId","facility","destination","type","propagationType"]:["destinationId","service","destination","type","propagationType"],this.dataSource=new _.by(this.data.destinations)}onCancel(){this.dialogRef.close(!1)}deleteDestinations(){if(0===this.destinations.length)return this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_DESTINATIONS.SUCCESS")),void this.dialogRef.close(!0);const F=this.destinations.pop();this.serviceManager.removeDestination(F.service.id,F.facility.id,F.destination,F.type).subscribe(()=>{this.deleteDestinations()},()=>this.loading=!1)}onConfirm(){this.loading=!0,this.deleteDestinations()}}return B.\u0275fac=function(F){return new(F||B)(p.Y36(x.so),p.Y36(x.WI),p.Y36(m.V6),p.Y36(t.sK),p.Y36(c.KK))},B.\u0275cmp=p.Xpm({type:B,selectors:[["app-perun-web-apps-remove-destination-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","warn"],[1,"font-weight-bold"],[3,"destinations","displayedColumns",4,"ngIf"],[3,"destinations","displayedColumns"]],template:function(F,Z){1&F&&(p.TgZ(0,"h1",0),p._uU(1),p.ALo(2,"translate"),p.qZA(),p.TgZ(3,"div"),p.YNc(4,g,1,0,"mat-spinner",1),p.YNc(5,L,11,10,"div",2),p.TgZ(6,"div",3)(7,"button",4),p.NdJ("click",function(){return Z.onCancel()}),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"button",5),p.NdJ("click",function(){return Z.onConfirm()}),p._uU(11),p.ALo(12,"translate"),p.qZA()()()),2&F&&(p.xp6(1),p.Oqu(p.lcZ(2,9,"DIALOGS.REMOVE_DESTINATIONS.TITLE")),p.xp6(2),p.Tol(Z.theme),p.xp6(1),p.Q6J("ngIf",Z.loading),p.xp6(1),p.Q6J("ngIf",!Z.loading),p.xp6(3),p.hij(" ",p.lcZ(9,11,"DIALOGS.REMOVE_DESTINATIONS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",Z.loading),p.xp6(1),p.hij(" ",p.lcZ(12,13,"DIALOGS.REMOVE_DESTINATIONS.CONFIRM")," "))},dependencies:[d.O5,l.lW,x.uh,x.xY,x.H8,h.Ou,f.w,u.q,t.X$]}),B})()},23256:(w,D,s)=>{"use strict";s.d(D,{Q:()=>X});var c=s(96308),x=s(95017),_=s(30671),m=s(9244),p=s(35382),t=s(94650),d=s(36895),l=s(56709),h=s(98380),f=s(18750),u=s(89383),g=s(9185);function C(W,q){if(1&W){const Y=t.EpF();t.TgZ(0,"th",17)(1,"mat-checkbox",18),t.NdJ("change",function(E){t.CHM(Y);const pt=t.oxw(2);return t.KtG(E?pt.masterToggle():null)}),t.qZA()()}if(2&W){const Y=t.oxw().ngIf,R=t.oxw();t.xp6(1),t.Q6J("aria-label",R.checkboxLabel())("checked",R.selection.hasValue()&&Y.all)("indeterminate",R.selection.hasValue()&&!Y.all)}}function L(W,q){if(1&W){const Y=t.EpF();t.TgZ(0,"td",19)(1,"mat-checkbox",20),t.NdJ("change",function(E){const St=t.CHM(Y).$implicit,Mt=t.oxw(2);return t.KtG(E?Mt.selection.toggle(St):null)})("click",function(E){return E.stopPropagation()}),t.qZA()()}if(2&W){const Y=q.$implicit,R=t.oxw(2);t.xp6(1),t.Q6J("aria-label",R.checkboxLabel(Y))("checked",R.selection.isSelected(Y))}}function I(W,q){1&W&&(t.ynx(0,14),t.YNc(1,C,2,3,"th",15),t.YNc(2,L,2,2,"td",16),t.BQk())}function B(W,q){1&W&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.ID")," "))}function M(W,q){if(1&W&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&W){const Y=q.$implicit;t.xp6(1),t.hij(" ",Y.id," ")}}function F(W,q){1&W&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NAME")," "))}function Z(W,q){if(1&W&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&W){const Y=q.$implicit;t.uIk("data-cy",Y.name),t.xp6(1),t.Oqu(Y.name)}}function H(W,q){1&W&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.CONTACT")," "))}function G(W,q){if(1&W&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&W){const Y=q.$implicit;t.xp6(1),t.Oqu(Y.contact)}}function nt(W,q){1&W&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.TYPE")," "))}function et(W,q){if(1&W&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&W){const Y=q.$implicit;t.xp6(1),t.Oqu(Y.type)}}function st(W,q){1&W&&t._UZ(0,"tr",24)}function K(W,q){1&W&&t._UZ(0,"tr",25)}function $(W,q){1&W&&(t.TgZ(0,"perun-web-apps-alert",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_OWNERS"),"\n"))}function it(W,q){1&W&&(t.TgZ(0,"perun-web-apps-alert",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&W&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_FILTER_OWNERS"),"\n"))}const at=function(W){return{all:W}};let X=(()=>{class W{constructor(Y,R){this.authResolver=Y,this.tableCheckbox=R,this.owners=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.displayedColumns=["select","id","name","contact","type"],this.pageSizeOptions=m.f7}set matSort(Y){this.sort=Y,this.setDataSource()}static getDataForColumn(Y,R){switch(R){case"id":return Y.id.toString();case"name":return Y.name;case"contact":return Y.contact;case"type":return Y.type;default:return""}}ngAfterViewInit(){this.setDataSource()}exportAllData(Y){(0,m.O6)((0,m.Xn)(this.dataSource.filteredData,this.displayedColumns,W.getDataForColumn),Y)}exportDisplayedData(Y){const R=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,E=R+this.dataSource.paginator.pageSize;(0,m.O6)((0,m.Xn)(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(R,E),this.displayedColumns,W.getDataForColumn),Y)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(Y,R)=>(0,m.Sd)(Y,R,this.displayedColumns,W.getDataForColumn),this.dataSource.sortData=(Y,R)=>(0,m.pR)(Y,R,W.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(Y=>"id"!==Y)),this.dataSource=new _.by(this.owners),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(Y){return Y?`${this.selection.isSelected(Y)?"deselect":"select"} row ${Y.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}}return W.\u0275fac=function(Y){return new(Y||W)(t.Y36(p.x4),t.Y36(p.UA))},W.\u0275cmp=t.Xpm({type:W,selectors:[["perun-web-apps-owners-list"]],viewQuery:function(Y,R){if(1&Y&&(t.Gf(m.l9,7),t.Gf(c.YE,7)),2&Y){let E;t.iGM(E=t.CRH())&&(R.child=E.first),t.iGM(E=t.CRH())&&(R.matSort=E.first)}},inputs:{owners:"owners",selection:"selection",tableId:"tableId",filterValue:"filterValue",displayedColumns:"displayedColumns"},features:[t.TTD],decls:21,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportDisplayedData","exportAllData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select",4,"ngIf"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","contact"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(Y,R){1&Y&&(t.TgZ(0,"div",0)(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportDisplayedData",function(pt){return R.exportDisplayedData(pt)})("exportAllData",function(pt){return R.exportAllData(pt)}),t.TgZ(2,"table",2),t.YNc(3,I,3,0,"ng-container",3),t.ALo(4,"isAllSelected"),t.ynx(5,4),t.YNc(6,B,3,3,"th",5),t.YNc(7,M,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,F,3,3,"th",5),t.YNc(10,Z,2,2,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,H,3,3,"th",5),t.YNc(13,G,2,1,"td",8),t.BQk(),t.ynx(14,10),t.YNc(15,nt,3,3,"th",5),t.YNc(16,et,2,1,"td",8),t.BQk(),t.YNc(17,st,1,0,"tr",11),t.YNc(18,K,1,0,"tr",12),t.qZA()()(),t.YNc(19,$,3,3,"perun-web-apps-alert",13),t.YNc(20,it,3,3,"perun-web-apps-alert",13)),2&Y&&(t.Q6J("hidden",0===R.owners.length||0===R.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",R.tableId)("dataLength",R.dataSource.filteredData.length)("pageSizeOptions",R.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",R.dataSource),t.xp6(1),t.Q6J("ngIf",t.VKq(13,at,t.xi3(4,10,R.dataSource,R.selection.selected.length))),t.xp6(14),t.Q6J("matHeaderRowDef",R.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",R.displayedColumns),t.xp6(1),t.Q6J("ngIf",!R.owners.length),t.xp6(1),t.Q6J("ngIf",!R.dataSource.filteredData.length&&R.owners.length))},dependencies:[d.O5,l.oG,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,c.YE,c.nU,h.w,f.l,u.X$,g.I]}),W})()},16087:(w,D,s)=>{"use strict";const c=s(34315),x=s(52872),_=s(60929);w.exports=function m(d,l){switch(x(d)){case"object":return function p(d,l){if("function"==typeof l)return l(d);if(l||_(d)){const h=new d.constructor;for(let f in d)h[f]=m(d[f],l);return h}return d}(d,l);case"array":return function t(d,l){const h=new d.constructor(d.length);for(let f=0;f<d.length;f++)h[f]=m(d[f],l);return h}(d,l);default:return c(d)}}},60929:(w,D,s)=>{"use strict";var c=s(50623);function x(_){return!0===c(_)&&"[object Object]"===Object.prototype.toString.call(_)}w.exports=function(m){var p,t;return!(!1===x(m)||(p=m.constructor,"function"!=typeof p)||(t=p.prototype,!1===x(t))||!1===t.hasOwnProperty("isPrototypeOf"))}},52786:(w,D,s)=>{"use strict";s.d(D,{B8:()=>et,Il:()=>x,J5:()=>m,SU:()=>nt,Ss:()=>st,Ym:()=>W,ZP:()=>Z,xV:()=>_});var c=s(68884);function x(){}var _=.7,m=1/_,p="\\s*([+-]?\\d+)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),f=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),u=new RegExp("^rgba\\("+[p,p,p,t]+"\\)$"),g=new RegExp("^rgba\\("+[d,d,d,t]+"\\)$"),C=new RegExp("^hsl\\("+[t,d,d]+"\\)$"),L=new RegExp("^hsla\\("+[t,d,d,t]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function B(){return this.rgb().formatHex()}function F(){return this.rgb().formatRgb()}function Z(R){var E,pt;return R=(R+"").trim().toLowerCase(),(E=l.exec(R))?(pt=E[1].length,E=parseInt(E[1],16),6===pt?H(E):3===pt?new st(E>>8&15|E>>4&240,E>>4&15|240&E,(15&E)<<4|15&E,1):8===pt?G(E>>24&255,E>>16&255,E>>8&255,(255&E)/255):4===pt?G(E>>12&15|E>>8&240,E>>8&15|E>>4&240,E>>4&15|240&E,((15&E)<<4|15&E)/255):null):(E=h.exec(R))?new st(E[1],E[2],E[3],1):(E=f.exec(R))?new st(255*E[1]/100,255*E[2]/100,255*E[3]/100,1):(E=u.exec(R))?G(E[1],E[2],E[3],E[4]):(E=g.exec(R))?G(255*E[1]/100,255*E[2]/100,255*E[3]/100,E[4]):(E=C.exec(R))?at(E[1],E[2]/100,E[3]/100,1):(E=L.exec(R))?at(E[1],E[2]/100,E[3]/100,E[4]):I.hasOwnProperty(R)?H(I[R]):"transparent"===R?new st(NaN,NaN,NaN,0):null}function H(R){return new st(R>>16&255,R>>8&255,255&R,1)}function G(R,E,pt,St){return St<=0&&(R=E=pt=NaN),new st(R,E,pt,St)}function nt(R){return R instanceof x||(R=Z(R)),R?new st((R=R.rgb()).r,R.g,R.b,R.opacity):new st}function et(R,E,pt,St){return 1===arguments.length?nt(R):new st(R,E,pt,St??1)}function st(R,E,pt,St){this.r=+R,this.g=+E,this.b=+pt,this.opacity=+St}function K(){return"#"+it(this.r)+it(this.g)+it(this.b)}function $(){var R=this.opacity;return(1===(R=isNaN(R)?1:Math.max(0,Math.min(1,R)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===R?")":", "+R+")")}function it(R){return((R=Math.max(0,Math.min(255,Math.round(R)||0)))<16?"0":"")+R.toString(16)}function at(R,E,pt,St){return St<=0?R=E=pt=NaN:pt<=0||pt>=1?R=E=NaN:E<=0&&(R=NaN),new q(R,E,pt,St)}function X(R){if(R instanceof q)return new q(R.h,R.s,R.l,R.opacity);if(R instanceof x||(R=Z(R)),!R)return new q;if(R instanceof q)return R;var E=(R=R.rgb()).r/255,pt=R.g/255,St=R.b/255,Mt=Math.min(E,pt,St),Et=Math.max(E,pt,St),Jt=NaN,ue=Et-Mt,wt=(Et+Mt)/2;return ue?(Jt=E===Et?(pt-St)/ue+6*(pt<St):pt===Et?(St-E)/ue+2:(E-pt)/ue+4,ue/=wt<.5?Et+Mt:2-Et-Mt,Jt*=60):ue=wt>0&&wt<1?0:Jt,new q(Jt,ue,wt,R.opacity)}function W(R,E,pt,St){return 1===arguments.length?X(R):new q(R,E,pt,St??1)}function q(R,E,pt,St){this.h=+R,this.s=+E,this.l=+pt,this.opacity=+St}function Y(R,E,pt){return 255*(R<60?E+(pt-E)*R/60:R<180?pt:R<240?E+(pt-E)*(240-R)/60:E)}(0,c.Z)(x,Z,{copy:function(R){return Object.assign(new this.constructor,this,R)},displayable:function(){return this.rgb().displayable()},hex:B,formatHex:B,formatHsl:function M(){return X(this).formatHsl()},formatRgb:F,toString:F}),(0,c.Z)(st,et,(0,c.l)(x,{brighter:function(R){return R=null==R?m:Math.pow(m,R),new st(this.r*R,this.g*R,this.b*R,this.opacity)},darker:function(R){return R=null==R?_:Math.pow(_,R),new st(this.r*R,this.g*R,this.b*R,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K,formatHex:K,formatRgb:$,toString:$})),(0,c.Z)(q,W,(0,c.l)(x,{brighter:function(R){return R=null==R?m:Math.pow(m,R),new q(this.h,this.s,this.l*R,this.opacity)},darker:function(R){return R=null==R?_:Math.pow(_,R),new q(this.h,this.s,this.l*R,this.opacity)},rgb:function(){var R=this.h%360+360*(this.h<0),E=isNaN(R)||isNaN(this.s)?0:this.s,pt=this.l,St=pt+(pt<.5?pt:1-pt)*E,Mt=2*pt-St;return new st(Y(R>=240?R-240:R+120,Mt,St),Y(R,Mt,St),Y(R<120?R+240:R-120,Mt,St),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var R=this.opacity;return(1===(R=isNaN(R)?1:Math.max(0,Math.min(1,R)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===R?")":", "+R+")")}}))},68884:(w,D,s)=>{"use strict";function c(_,m,p){_.prototype=m.prototype=p,p.constructor=_}function x(_,m){var p=Object.create(_.prototype);for(var t in m)p[t]=m[t];return p}s.d(D,{Z:()=>c,l:()=>x})},25922:(w,D,s)=>{"use strict";s.d(D,{Z:()=>d});var c={value:function(){}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function m(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",g=f.indexOf(".");if(g>=0&&(u=f.slice(g+1),f=f.slice(0,g)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var g,f=0,u=l.length;f<u;++f)if((g=l[f]).name===h)return g.value}function t(l,h,f){for(var u=0,g=l.length;u<g;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var g,f=this._,u=m(l+"",f),C=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<L;)if(g=(l=u[C]).type)f[g]=t(f[g],l.name,h);else if(null==h)for(g in f)f[g]=t(f[g],l.name,null);return this}for(;++C<L;)if((g=(l=u[C]).type)&&(g=p(f[g],l.name)))return g},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((g=arguments.length-2)>0)for(var g,C,f=new Array(g),u=0;u<g;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,g=(C=this._[l]).length;u<g;++u)C[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],g=0,C=u.length;g<C;++g)u[g].value.apply(h,f)}};const d=x},56758:(w,D,s)=>{"use strict";s.d(D,{Z:()=>m,D:()=>p});var c=s(52016);function _(t){t.preventDefault(),t.stopImmediatePropagation()}function m(t){var d=t.document.documentElement,l=(0,c.Z)(t).on("dragstart.drag",_,!0);"onselectstart"in d?l.on("selectstart.drag",_,!0):(d.__noselect=d.style.MozUserSelect,d.style.MozUserSelect="none")}function p(t,d){var l=t.document.documentElement,h=(0,c.Z)(t).on("dragstart.drag",null);d&&(h.on("click.drag",_,!0),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in l?h.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}},27065:(w,D,s)=>{"use strict";function _(m){return((m*=2)<=1?m*m*m:(m-=2)*m*m+2)/2}s.d(D,{tw:()=>_})},22910:(w,D,s)=>{"use strict";s.d(D,{WU:()=>_,ZP:()=>p,jH:()=>m});var x,_,m,c=s(4753);function p(t){return x=(0,c.Z)(t),_=x.format,m=x.formatPrefix,x}p({thousands:",",grouping:[3],currency:["$",""]})},68520:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(5326);function x(_){return(_=(0,c.V)(Math.abs(_)))?_[1]:NaN}},5326:(w,D,s)=>{"use strict";function c(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function x(_,m){if((p=(_=m?_.toExponential(m-1):_.toExponential()).indexOf("e"))<0)return null;var p,t=_.slice(0,p);return[t.length>1?t[0]+t.slice(2):t,+_.slice(p+1)]}s.d(D,{V:()=>x,Z:()=>c})},32517:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x,v:()=>_});var c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x(m){if(!(p=c.exec(m)))throw new Error("invalid format: "+m);var p;return new _({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function _(m){this.fill=void 0===m.fill?" ":m.fill+"",this.align=void 0===m.align?">":m.align+"",this.sign=void 0===m.sign?"-":m.sign+"",this.symbol=void 0===m.symbol?"":m.symbol+"",this.zero=!!m.zero,this.width=void 0===m.width?void 0:+m.width,this.comma=!!m.comma,this.precision=void 0===m.precision?void 0:+m.precision,this.trim=!!m.trim,this.type=void 0===m.type?"":m.type+""}x.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},41129:(w,D,s)=>{"use strict";s.r(D),s.d(D,{FormatSpecifier:()=>_.v,format:()=>c.WU,formatDefaultLocale:()=>c.ZP,formatLocale:()=>x.Z,formatPrefix:()=>c.jH,formatSpecifier:()=>_.Z,precisionFixed:()=>m.Z,precisionPrefix:()=>p.Z,precisionRound:()=>t.Z});var c=s(22910),x=s(4753),_=s(32517),m=s(78986),p=s(38914),t=s(65142)},4753:(w,D,s)=>{"use strict";s.d(D,{Z:()=>L});var d,c=s(68520),m=s(32517),t=s(5326);function h(I,B){var M=(0,t.V)(I,B);if(!M)return I+"";var F=M[0],Z=M[1];return Z<0?"0."+new Array(-Z).join("0")+F:F.length>Z+1?F.slice(0,Z+1)+"."+F.slice(Z+1):F+new Array(Z-F.length+2).join("0")}const f={"%":(I,B)=>(100*I).toFixed(B),b:I=>Math.round(I).toString(2),c:I=>I+"",d:t.Z,e:(I,B)=>I.toExponential(B),f:(I,B)=>I.toFixed(B),g:(I,B)=>I.toPrecision(B),o:I=>Math.round(I).toString(8),p:(I,B)=>h(100*I,B),r:h,s:function l(I,B){var M=(0,t.V)(I,B);if(!M)return I+"";var F=M[0],Z=M[1],H=Z-(d=3*Math.max(-8,Math.min(8,Math.floor(Z/3))))+1,G=F.length;return H===G?F:H>G?F+new Array(H-G+1).join("0"):H>0?F.slice(0,H)+"."+F.slice(H):"0."+new Array(1-H).join("0")+(0,t.V)(I,Math.max(0,B+H-1))[0]},X:I=>Math.round(I).toString(16).toUpperCase(),x:I=>Math.round(I).toString(16)};function u(I){return I}var g=Array.prototype.map,C=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function L(I){var B=void 0===I.grouping||void 0===I.thousands?u:function x(I,B){return function(M,F){for(var Z=M.length,H=[],G=0,nt=I[0],et=0;Z>0&&nt>0&&(et+nt+1>F&&(nt=Math.max(1,F-et)),H.push(M.substring(Z-=nt,Z+nt)),!((et+=nt+1)>F));)nt=I[G=(G+1)%I.length];return H.reverse().join(B)}}(g.call(I.grouping,Number),I.thousands+""),M=void 0===I.currency?"":I.currency[0]+"",F=void 0===I.currency?"":I.currency[1]+"",Z=void 0===I.decimal?".":I.decimal+"",H=void 0===I.numerals?u:function _(I){return function(B){return B.replace(/[0-9]/g,function(M){return I[+M]})}}(g.call(I.numerals,String)),G=void 0===I.percent?"%":I.percent+"",nt=void 0===I.minus?"\u2212":I.minus+"",et=void 0===I.nan?"NaN":I.nan+"";function st($){var it=($=(0,m.Z)($)).fill,at=$.align,X=$.sign,W=$.symbol,q=$.zero,Y=$.width,R=$.comma,E=$.precision,pt=$.trim,St=$.type;"n"===St?(R=!0,St="g"):f[St]||(void 0===E&&(E=12),pt=!0,St="g"),(q||"0"===it&&"="===at)&&(q=!0,it="0",at="=");var Mt="$"===W?M:"#"===W&&/[boxX]/.test(St)?"0"+St.toLowerCase():"",Et="$"===W?F:/[%p]/.test(St)?G:"",Jt=f[St],ue=/[defgprs%]/.test(St);function wt(yt){var Xt,Ft,Ht,Nt=Mt,_t=Et;if("c"===St)_t=Jt(yt)+_t,yt="";else{var he=(yt=+yt)<0||1/yt<0;if(yt=isNaN(yt)?et:Jt(Math.abs(yt),E),pt&&(yt=function p(I){t:for(var Z,B=I.length,M=1,F=-1;M<B;++M)switch(I[M]){case".":F=Z=M;break;case"0":0===F&&(F=M),Z=M;break;default:if(!+I[M])break t;F>0&&(F=0)}return F>0?I.slice(0,F)+I.slice(Z+1):I}(yt)),he&&0==+yt&&"+"!==X&&(he=!1),Nt=(he?"("===X?X:nt:"-"===X||"("===X?"":X)+Nt,_t=("s"===St?C[8+d/3]:"")+_t+(he&&"("===X?")":""),ue)for(Xt=-1,Ft=yt.length;++Xt<Ft;)if(48>(Ht=yt.charCodeAt(Xt))||Ht>57){_t=(46===Ht?Z+yt.slice(Xt+1):yt.slice(Xt))+_t,yt=yt.slice(0,Xt);break}}R&&!q&&(yt=B(yt,1/0));var ke=Nt.length+yt.length+_t.length,Ie=ke<Y?new Array(Y-ke+1).join(it):"";switch(R&&q&&(yt=B(Ie+yt,Ie.length?Y-_t.length:1/0),Ie=""),at){case"<":yt=Nt+yt+_t+Ie;break;case"=":yt=Nt+Ie+yt+_t;break;case"^":yt=Ie.slice(0,ke=Ie.length>>1)+Nt+yt+_t+Ie.slice(ke);break;default:yt=Ie+Nt+yt+_t}return H(yt)}return E=void 0===E?6:/[gprs]/.test(St)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E)),wt.toString=function(){return $+""},wt}return{format:st,formatPrefix:function K($,it){var at=st((($=(0,m.Z)($)).type="f",$)),X=3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(it)/3))),W=Math.pow(10,-X),q=C[8+X/3];return function(Y){return at(W*Y)+q}}}}},78986:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(68520);function x(_){return Math.max(0,-(0,c.Z)(Math.abs(_)))}},38914:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(68520);function x(_,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,c.Z)(m)/3)))-(0,c.Z)(Math.abs(_)))}},65142:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(68520);function x(_,m){return _=Math.abs(_),m=Math.abs(m)-_,Math.max(0,(0,c.Z)(m)-(0,c.Z)(_))+1}},9921:function(w,D,s){!function(c,x,_,m,p,t,d,l,h,f){"use strict";function u(J){if(J&&J.__esModule)return J;var dt=Object.create(null);return J&&Object.keys(J).forEach(function(ft){if("default"!==ft){var mt=Object.getOwnPropertyDescriptor(J,ft);Object.defineProperty(dt,ft,mt.get?mt:{enumerable:!0,get:function(){return J[ft]}})}}),dt.default=J,Object.freeze(dt)}var Dt,g=u(x);function C(J,dt,ft){return dt in J?Object.defineProperty(J,dt,{value:ft,enumerable:!0,configurable:!0,writable:!0}):J[dt]=ft,J}function L(J){return function I(J){if(Array.isArray(J))return F(J)}(J)||function B(J){if(typeof Symbol<"u"&&null!=J[Symbol.iterator]||null!=J["@@iterator"])return Array.from(J)}(J)||function M(J,dt){if(J){if("string"==typeof J)return F(J,dt);var ft=Object.prototype.toString.call(J).slice(8,-1);if("Object"===ft&&J.constructor&&(ft=J.constructor.name),"Map"===ft||"Set"===ft)return Array.from(J);if("Arguments"===ft||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return F(J,dt)}}(J)||function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(J,dt){(null==dt||dt>J.length)&&(dt=J.length);for(var ft=0,mt=new Array(dt);ft<dt;ft++)mt[ft]=J[ft];return mt}function H(J){var dt={},ft=J.node().nodeName;dt.tag=ft,"#text"==ft?dt.text=J.text():"#comment"==ft&&(dt.comment=J.text()),dt.attributes={};var mt=J.node().attributes;if(mt)for(var zt=0;zt<mt.length;zt++){var $t=mt[zt];dt.attributes[$t.name]=$t.value}var Ce,O=J.node().transform;if(O&&0!=O.baseVal.numberOfItems){var re=O.baseVal.consolidate().matrix;dt.translation={x:re.e,y:re.f},dt.scale=re.a}if("ellipse"==ft&&(dt.center={x:dt.attributes.cx,y:dt.attributes.cy}),"polygon"==ft){var be=(Ce=J.attr("points").split(" ")).map(function(mn){return mn.split(",")[0]}),Ke=Ce.map(function(mn){return mn.split(",")[1]}),Me=Math.min.apply(null,be),Fe=Math.max.apply(null,be),oe=Math.min.apply(null,Ke),pe=Math.max.apply(null,Ke);dt.bbox={x:Me,y:oe,width:Fe-Me,height:pe-oe},dt.center={x:(Me+Fe)/2,y:(oe+pe)/2}}return"path"==ft&&((Ce=J.attr("d").split(/[A-Z ]/)).shift(),be=Ce.map(function(ce){return+ce.split(",")[0]}),Ke=Ce.map(function(ce){return+ce.split(",")[1]}),Me=Math.min.apply(null,be),Fe=Math.max.apply(null,be),oe=Math.min.apply(null,Ke),pe=Math.max.apply(null,Ke),dt.bbox={x:Me,y:oe,width:Fe-Me,height:pe-oe},dt.center={x:(Me+Fe)/2,y:(oe+pe)/2},dt.totalLength=J.node().getTotalLength()),"text"==ft&&(dt.center={x:J.attr("x"),y:J.attr("y")}),"#text"==ft?dt.text=J.text():"#comment"==ft&&(dt.comment=J.text()),dt}function G(J){var dt=H(J);return dt.children=[],g.selectAll(J.node().childNodes).each(function(){var mt=G(g.select(this));mt.parent=dt,dt.children.push(mt)}),dt}function nt(J){return"#text"==J.tag?document.createTextNode(""):"#comment"==J.tag?document.createComment(J.comment):document.createElementNS("http://www.w3.org/2000/svg",J.tag)}function et(J){for(var dt=nt(J),ft=g.select(dt),mt=J.attributes,zt=0,$t=Object.keys(mt);zt<$t.length;zt++){var kt=$t[zt];ft.attr(kt,mt[kt])}return dt}function st(J,dt){var ft=g.select(J.node().parentNode),mt=et(dt),zt=ft.insert(function(){return mt},function(){return J.node()});return J.remove(),zt}function $(J,dt){(function K(J,dt){J.datum(dt),J.data([dt],function(ft){return ft.key})})(J,dt),g.selectAll(J.node().childNodes).each(function(mt,zt){$(g.select(this),dt.children[zt])})}function it(J,dt){var ft=J.selectAll(function(){return J.node().childNodes}),mt=(ft=ft.data(function(kt){return kt.children},function(kt){return kt.tag+"-"+dt})).enter().append(function(kt){return nt(kt)}),zt=ft.exit();zt=zt.remove(),ft=mt.merge(ft);var $t={};ft.each(function(kt){var se=kt.tag;null==$t[se]&&($t[se]=0);var O=$t[se]++;at.call(this,kt,O)})}function at(J){var dt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ft=g.select(this),mt=J.attributes,zt=ft.node().attributes;if(zt)for(var $t=0;$t<zt.length;$t++){var kt=zt[$t],se=kt.name;if("xmlns"!=se.split(":")[0]&&kt.namespaceURI){var O=kt.namespaceURI.split("/");se=O[O.length-1]+":"+se}se in mt||(mt[se]=null)}for(var Ce=0,be=Object.keys(mt);Ce<be.length;Ce++){var Ke=be[Ce];ft.attr(Ke,mt[Ke])}J.text&&ft.text(J.text),it(ft,dt)}function X(J){return Object.assign({},J)}function W(J){return Math.round(100*J)/100}function Y(){var J=this;var mt=g.select(this._selection.node().querySelector("svg"));if(0==mt.size())return this;this._zoomSelection=mt;var zt=d.zoom().scaleExtent(this._options.zoomScaleExtent).translateExtent(this._options.zoomTranslateExtent).interpolate(t.interpolate).on("zoom",function dt(kt){g.select(mt.node().querySelector("g")).attr("transform",kt.transform),J._dispatch.call("zoom",J)});this._zoomBehavior=zt;var $t=g.select(mt.node().querySelector("g"));return mt.call(zt),this._active||E.call(this,$t),this._originalTransform=d.zoomTransform(mt.node()),this}function R(J){var dt=this._translation,ft=this._scale,mt=J.datum().translation,zt=J.datum().scale,$t=d.zoomTransform(this._zoomSelection.node());return dt&&($t=($t=$t.scale(1/ft)).translate(-dt.x,-dt.y)),($t=$t.translate(mt.x,mt.y)).scale(zt)}function E(J){this._zoomBehavior.transform(this._zoomSelection,R.call(this,J)),this._translation=J.datum().translation,this._scale=J.datum().scale,this._originalTransform=d.zoomIdentity.translate(J.datum().translation.x,J.datum().translation.y).scale(J.datum().scale)}function ue(J,dt){return function(){var ft=J.map(function(mt){return t.interpolate([mt[0][0],mt[0][1]],[mt[1][0],mt[1][1]])});return function(mt){return mt<1?"M"+ft.map(function(zt){return zt(mt)}).join("L"):dt}}}function Nt(J){return"edge"==J.attributes.class||"a"==J.tag&&"g"==J.parent.tag&&"edge"==J.parent.parent.attributes.class}function _t(J){return J.parent&&Nt(J.parent)}function he(J){var dt=this._transition,ft=this._options.fade&&null!=dt,mt=this._options.tweenPaths,zt=this._options.tweenShapes,$t=this._options.convertEqualSidedPolygons,kt=this._options.growEnteringEdges&&null!=dt,se=this._attributer,O=this;function Ce(oe){var pe=g.select(this);if("svg"==oe.tag){var Re=O._options;if(null!=Re.width||null!=Re.height){var fn=Re.width,mn=Re.height;null==fn?fn=4*oe.attributes.width.replace("pt","")/3:(pe.attr("width",fn),oe.attributes.width=fn),null==mn?mn=4*oe.attributes.height.replace("pt","")/3:(pe.attr("height",mn),oe.attributes.height=mn),Re.fit||(pe.attr("viewBox","0 0 ".concat(3*fn/4/Re.scale," ").concat(3*mn/4/Re.scale)),oe.attributes.viewBox="0 0 ".concat(3*fn/4/Re.scale," ").concat(3*mn/4/Re.scale))}1!=Re.scale&&(Re.fit||null==Re.width&&null==Re.height)&&(fn=oe.attributes.viewBox.split(" ")[2],mn=oe.attributes.viewBox.split(" ")[3],pe.attr("viewBox","0 0 ".concat(fn/Re.scale," ").concat(mn/Re.scale)),oe.attributes.viewBox="0 0 ".concat(fn/Re.scale," ").concat(mn/Re.scale))}se&&pe.each(se);var je=oe.tag,Xe=oe.attributes,wn=pe.node().attributes;if(wn)for(var Zn=0;Zn<wn.length;Zn++){var Vn=wn[Zn],Yn=Vn.name;if("xmlns"!=Yn.split(":")[0]&&Vn.namespaceURI){var Ni=Vn.namespaceURI.split("/");Yn=Ni[Ni.length-1]+":"+Yn}Yn in Xe||(Xe[Yn]=null)}var $e=!1,vn=!1;if(zt&&dt){if(("polygon"==this.nodeName||"ellipse"==this.nodeName)&&oe.alternativeOld&&(vn=!0),("polygon"==je||"ellipse"==je)&&oe.alternativeNew&&($e=!0),"polygon"==this.nodeName&&"polygon"==je&&oe.alternativeOld){var Cn=H(pe);if(!$t){var li=Cn.attributes.points.split(" ").length;(xi=oe.attributes.points).split(" ").length==li&&($e=!1,vn=!1)}}if(vn){var jn=st(pe,oe.alternativeOld);jn.data([oe],function(){return oe.key}),pe=jn}$e&&(je="path",Xe=oe.alternativeNew.attributes)}var He=pe;if(dt&&(He=He.transition(dt),ft&&He.filter(function(ut){return"#"==ut.tag[0]?null:this}).style("opacity",1),He.filter(function(ut){return"#"==ut.tag[0]?null:this}).on("end",function(ut){g.select(this).attr("style",ut&&ut.attributes&&ut.attributes.style||null)})),kt&&"path"==je&&oe.offset){var ui=oe.totalLength;pe.attr("stroke-dasharray",ui+" "+ui).attr("stroke-dashoffset",ui).attr("transform","translate("+oe.offset.x+","+oe.offset.y+")"),Xe["stroke-dashoffset"]=0,Xe.transform="translate(0,0)",He.attr("stroke-dashoffset",Xe["stroke-dashoffset"]).attr("transform",Xe.transform).on("start",function(){g.select(this).style("opacity",null)}).on("end",function(){g.select(this).attr("stroke-dashoffset",null).attr("stroke-dasharray",null).attr("transform",null)})}if(kt&&"polygon"==je&&_t(oe)&&oe.offset&&"path"==oe.parent.children[3].tag){var hi=g.select(pe.node().parentNode.querySelector("path")),Ui=hi.node().getPointAtLength(0),Mn=hi.node().getPointAtLength(oe.totalLength),bi=hi.node().getPointAtLength(oe.totalLength-1),cn=180*Math.atan2(Mn.y-bi.y,Mn.x-bi.x)/Math.PI,zi=Ui.x-Mn.x+oe.offset.x,en=Ui.y-Mn.y+oe.offset.y;pe.attr("transform","translate("+zi+","+en+")"),He.attrTween("transform",function(){return function(ut){var xt=hi.node().getPointAtLength(oe.totalLength*ut),Ot=hi.node().getPointAtLength(oe.totalLength*ut+1),Zt=180*Math.atan2(Ot.y-xt.y,Ot.x-xt.x)/Math.PI-cn;return"translate("+(zi=xt.x-Mn.x+oe.offset.x*(1-ut))+","+(en=xt.y-Mn.y+oe.offset.y*(1-ut))+") rotate("+Zt+" "+Mn.x+" "+Mn.y+")"}}).on("start",function(){g.select(this).style("opacity",null)}).on("end",function(){g.select(this).attr("transform",null)})}for(var Ti=mt&&dt&&"path"==je&&null!=pe.attr("d"),In=0,b=Object.keys(Xe);In<b.length;In++){var k=b[In],V=Xe[k];if(Ti&&"d"==k){var xi;(xi=(oe.alternativeOld||oe).points)&&He.attrTween("d",ue(xi,V))}else{if("transform"==k&&oe.translation)if(dt){var rt=He.on("end");He.on("start",function(){O._zoomBehavior&&He.tween("attr.transform",function(){var ut=this;return function(xt){ut.setAttribute("transform",t.interpolateTransformSvg(d.zoomTransform(O._zoomSelection.node()).toString(),R.call(O,pe).toString())(xt))}})}).on("end",function(){rt.call(this),O._zoomBehavior&&E.call(O,pe)})}else O._zoomBehavior&&(E.call(O,pe),V=R.call(O,pe).toString());He.attr(k,V)}}$e&&He.on("end",function(ut,xt,Ot){st(jn=g.select(this),ut).data([ut],function(){return ut.key})}),oe.text&&He.text(oe.text),function re(oe){var pe=oe.selectAll(function(){return oe.node().childNodes}),Re=(pe=pe.data(function(je){return je.children},function(je){return je.key})).enter().append(function(je){var Xe=nt(je);return"#text"==je.tag&&ft&&(Xe.nodeValue=je.text),Xe});(ft||kt&&Nt(oe.datum()))&&Re.filter(function(je){return"#"==je.tag[0]?null:this}).each(function(je){for(var Xe=g.select(this),wn=0,Zn=Object.keys(je.attributes);wn<Zn.length;wn++){var Vn=Zn[wn];Xe.attr(Vn,je.attributes[Vn])}}).filter(function(je){return"svg"==je.tag||"g"==je.tag?null:this}).style("opacity",0);var mn=pe.exit();se&&mn.each(se),dt&&(mn=mn.transition(dt),ft&&mn.filter(function(je){return"#"==je.tag[0]?null:this}).style("opacity",0)),mn=mn.remove(),(pe=Re.merge(pe)).each(Ce)}(pe)}var be=this._selection;if(null!=dt){var Ke=this._jobs;if(O._active)return Ke.push(null),this;be.transition(dt).transition().duration(0).on("end",function(){O._active=!1,0!=Ke.length&&(Ke.shift(),O.render())}),this._active=!0}null!=dt&&be.transition(dt).on("start",function(){O._dispatch.call("transitionStart",O)}).on("end",function(){O._dispatch.call("transitionEnd",O)}).transition().duration(0).on("start",function(){O._dispatch.call("restoreEnd",O),O._dispatch.call("end",O),J&&J.call(O)});var Me=this._data,Fe=be.selectAll("svg").data([Me],function(oe){return oe.key});return Fe=Fe.enter().append("svg").merge(Fe),Ce.call(Fe.node(),Me),this._options.zoom&&!this._zoomBehavior&&Y.call(this),O._dispatch.call("renderEnd",O),null==dt&&(this._dispatch.call("end",this),J&&J.call(this)),this}function Ie(J,dt){if("polygon"==J.tag){(ft=X(J)).tag="path";var zt=X(mt=J.attributes),$t=mt.points;if("polygon"==dt.tag){(kt=J.bbox).cx=kt.x+kt.width/2,kt.cy=kt.y+kt.height/2;for(var O=mt.points.split(" "),re=O.map(function(Cn){var $n=Cn.split(",");return[$n[0]-kt.cx,$n[1]-kt.cy]}),Ce=re[re.length-1][0],be=re[re.length-1][1],Ke=0;Ke<re.length;Ke++,Ce=Me,be=Fe){var oe=(Me=re[Ke][0])-Ce;if(0!=(pe=(Fe=re[Ke][1])-be)&&0<=(Re=Ce-be*oe/pe)&&Re<1/0&&(Ce<=Re&&Re<=Me||Me<=Re&&Re<=Ce))break}var fn=[[kt.cx+Re,kt.cy+0].join(",")];$t=(fn=(fn=fn.concat(O.slice(Ke))).concat(O.slice(0,Ke))).join(" ")}zt.d="M"+$t+"z",delete zt.points,ft.attributes=zt}else{var ft;(ft=X(J)).tag="path",zt=X(mt=J.attributes);var mt,Me,Fe,Re,mn=mt.cx,je=mt.cy,Xe=mt.rx,wn=mt.ry;if("polygon"==dt.tag){var kt;(kt=dt.bbox).cx=kt.x+kt.width/2,kt.cy=kt.y+kt.height/2;var Zn=dt.attributes.points.split(" ")[0].split(","),pe=(oe=Zn[0]-kt.cx,Zn[1]-kt.cy),Ni=Math.sqrt(Math.pow(oe,2)+Math.pow(pe,2)),ce=oe/Ni,$e=-pe/Ni}else ce=1,$e=0;zt.d="M "+mn+" "+je+" m "+(Me=Xe*ce)+","+(Fe=-wn*$e)+" a "+Xe+","+wn+" 0 1,0 "+(oe=(Re=Xe*-ce)-Me)+","+(pe=-wn*-$e-Fe)+" a "+Xe+","+wn+" 0 1,0 "+-oe+","+-pe+"z",delete zt.cx,delete zt.cy,delete zt.rx,delete zt.ry,ft.attributes=zt}return ft}function Vt(){var J=this;try{l.graphviz.layout("","svg","dot").then(function(){l.graphvizSync().then(function(mt){J.layoutSync=mt.layout.bind(mt),null==J._worker&&J._dispatch.call("initEnd",J),J._afterInit&&J._afterInit()})})}catch{}if(null!=this._worker){var dt=this._vizURL,ft=this;this._workerPort.onmessage=function(mt){ft._workerCallbacks.shift().call(ft,mt)},dt.match(/^https?:\/\/|^\/\//i)||(dt=new window.URL(dt,document.location.href).href),qt.call(this,{type:"layout",dot:"",engine:"dot",vizURL:dt},function(mt){}),qt.call(this,{type:"version"},function(mt){"version"===mt.data.type&&(ft._graphvizVersion=mt.data.version,ft._dispatch.call("initEnd",this))})}}function qt(J,dt){this._workerCallbacks.push(dt),this._workerPort.postMessage(J)}function Ee(J,dt){var ft=this._options.keyMode,mt=this._options.tweenPaths,zt=this._options.tweenShapes;if("string"==typeof this._options.tweenPrecision&&this._options.tweenPrecision.includes("%"))var $t=+this._options.tweenPrecision.split("%")[0]/100,kt=this._options.tweenPrecision.includes("%");else $t=this._options.tweenPrecision,kt=!1;var se=this._options.growEnteringEdges,O={},re=this._dictionary||{},Ce={},be=this._nodeDictionary||{};function Ke(ce,$e){var vn=ce.tag;if("index"==ft)ce.key=$e;else if("#"!=vn[0])if("id"==ft)ce.key=ce.attributes.id;else if("title"==ft){var Cn=ce.children.find(function($n){return"title"==$n.tag});Cn&&(ce.key=Cn.children.length>0?Cn.children[0].text:"")}null==ce.key&&(zt&&("ellipse"==vn||"polygon"==vn)&&(vn="path"),ce.key=vn+"-"+$e)}function Me(ce,$e){ce.id=($e?$e.id+".":"")+ce.key}function Fe(ce){O[ce.id]=ce}function oe(ce,$e){zt&&ce.id in re&&("polygon"==$e.tag||"ellipse"==$e.tag||"path"==$e.tag)&&($e.tag!=ce.tag||"polygon"==ce.tag)&&("path"!=$e.tag&&(ce.alternativeOld=Ie($e,ce)),"path"!=ce.tag&&(ce.alternativeNew=Ie(ce,$e)))}function pe(ce,$e){if(mt&&$e&&("path"==$e.tag||ce.alternativeOld&&"path"==ce.alternativeOld.tag)){var vn=(ce.alternativeNew||ce).attributes.d;if(ce.alternativeOld)var Cn=et(ce.alternativeOld);else Cn=et($e);(ce.alternativeOld||(ce.alternativeOld={})).points=function wt(J,dt,ft,mt){for(var zt=J,$t=zt.cloneNode(),kt=zt.getTotalLength(),se=($t.setAttribute("d",dt),$t).getTotalLength(),O=[0],re=0,Ce=mt?ft:ft/Math.max(kt,se);(re+=Ce)<1;)O.push(re);return O.push(1),O.map(function(Ke){var Me=zt.getPointAtLength(Ke*kt),Fe=$t.getPointAtLength(Ke*se);return[[Me.x,Me.y],[Fe.x,Fe.y]]})}(Cn,vn,$t,kt)}}function Re(ce){var vn=arguments.length>2?arguments[2]:void 0;Ke(ce,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),Me(ce,vn);var $n=re[ce.id];Fe(ce),oe(ce,$n),pe(ce,$n);var li={};ce.children.forEach(function(xi){var Qn=xi.tag;("ellipse"==Qn||"polygon"==Qn)&&(Qn="path"),null==li[Qn]&&(li[Qn]=0),Re(xi,li[Qn]++,ce)})}function je(ce){(function fn(ce){if(se&&ce.parent&&"node"==ce.parent.attributes.class&&"title"==ce.tag){if(ce.children.length>0)var Cn=ce.children[0].text;else Cn="";Ce[Cn]=ce.parent}})(ce),function mn(ce){var vn=ce.tag;if(se&&!re[ce.id]&&ce.parent&&_t(ce)&&("path"==vn||"polygon"==vn)){if("polygon"==vn){var $n=ce.parent.children.find(function(Mn){return"path"==Mn.tag});$n&&(ce.totalLength=$n.totalLength)}var xi=function Ft(J){return function Xt(J){return"edge"==J.parent.attributes.class?J.parent:J.parent.parent.parent}(J).children.find(function(dt){return"title"==dt.tag})}(ce).children[0],Qn=xi.text.split("->");2!=Qn.length&&(Qn=xi.text.split("--"));var Bi=Qn[0],jn=Ce[Bi],ci=be[Bi];if(ci){if((Ye=jn.children.findIndex(function(Mn,bi){return"g"==Mn.tag}))>=0){var He=jn.children[Ye].children.findIndex(function(Mn,bi){return"a"==Mn.tag});jn=jn.children[Ye].children[He]}(Ye=ci.children.findIndex(function(Mn,bi){return"g"==Mn.tag}))>=0&&(He=ci.children[Ye].children.findIndex(function(bi,cn){return"a"==bi.tag}),ci=ci.children[Ye].children[He]);for(var ui=jn.children,Ye=0;Ye<ui.length;Ye++)if("polygon"==ui[Ye].tag||"ellipse"==ui[Ye].tag||"path"==ui[Ye].tag||"text"==ui[Ye].tag){var Ji=ui[Ye];break}var hi=ci.children;for(Ye=0;Ye<hi.length;Ye++)if("polygon"==hi[Ye].tag||"ellipse"==hi[Ye].tag||"path"==hi[Ye].tag||"text"==hi[Ye].tag){var Ui=hi[Ye];break}ce.offset=Ui&&Ji?{x:Ui.center.x-Ji.center.x,y:Ui.center.y-Ji.center.y}:{x:0,y:0}}}}(ce),ce.children.forEach(function($e){je($e)})}this._dispatch.call("layoutEnd",this);var Xe=g.select(document.createDocumentFragment()).append("div"),Zn=(new window.DOMParser).parseFromString(J,"image/svg+xml");Xe.append(function(){return Zn.documentElement});var Yn=G(Xe.select("svg"));this._dispatch.call("dataExtractEnd",this),Re(Yn),this._dispatch.call("dataProcessPass1End",this),je(Yn),this._dispatch.call("dataProcessPass2End",this),this._data=Yn,this._dictionary=O,this._nodeDictionary=Ce,this._extractData=function(ce,$e,vn){var Cn=G(ce);return Re(Cn,$e,vn),je(Cn),Cn},this._busy=!1,this._dispatch.call("dataProcessEnd",this),dt&&dt.call(this),this._queue.length>0&&this._queue.shift().call(this)}function Mi(J,dt,ft,mt){var zt=[J*ft-(dt=-dt)*(mt=-mt),J*mt+dt*ft];return[J=zt[0],dt=-(dt=zt[1])]}function Fi(J,dt,ft,mt,zt,$t,kt){var O=G(an.call(this,$t));J.data([O]),at.call(J.node(),O),de(J,dt,ft,mt,zt,$t,kt)}function de(J,dt,ft,mt,zt,$t,kt){var se=kt.shortening||0,be=[[0,-3.5],[10,0],[0,3.5],[0,-3.5]],Ke=mt-dt,Me=zt-ft,Fe=Math.sqrt(Ke*Ke+Me*Me);if(0==Fe)var oe=1,pe=0;else oe=Ke/Fe,pe=Me/Fe;if(mt=dt+(Fe-se-10-.1)*oe,zt=ft+(Fe-se-10-.1)*pe,$t.URL||$t.tooltip)var Re=J.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a"),fn=Re.selectWithoutDataPropagation("path"),mn=Re.selectWithoutDataPropagation("polygon");else fn=J.selectWithoutDataPropagation("path"),mn=J.selectWithoutDataPropagation("polygon");var je=f.path();je.moveTo(dt,ft),je.lineTo(mt,zt),fn.attr("d",je),mt=dt+(Fe-se-10)*oe,zt=ft+(Fe-se-10)*pe;for(var Xe=0;Xe<be.length;Xe++)be[Xe]=Mi((wn=be[Xe])[0],wn[1],oe,pe);for(Xe=0;Xe<be.length;Xe++)be[Xe]=[mt+(wn=be[Xe])[0],zt+wn[1]];var Zn=[];for(Xe=0;Xe<be.length;Xe++){var wn;Zn.push((wn=be[Xe]).join(","))}var Vn=Zn.join(" ");return mn.attr("points",Vn),this}function ji(){return this._drawnEdge?(this._drawnEdge.g.remove(),this._drawnEdge=null,this):this}function _n(){return this._drawnEdge?this._drawnEdge.g:g.select(null)}function an(J){for(var dt="",ft=0,mt=Object.keys(J);ft<mt.length;ft++){var zt=mt[ft];null!=J[zt]&&(dt+=' "'+zt+'"="'+J[zt]+'"')}var kt=this.layoutSync("digraph {a -> b ["+dt+"]}","svg","dot"),O=(new window.DOMParser).parseFromString(kt,"image/svg+xml");return g.select(document.createDocumentFragment()).append(function(){return O.documentElement}).select(".edge")}function kn(J,dt,ft,mt,zt,$t){var se=G(Q.call(this,mt,zt));return J.data([se]),at.call(J.node(),se),Te(J,dt,ft,zt),this}function Te(J,dt,ft,mt,zt){if(mt.URL||mt.tooltip)var $t=J.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");else $t=J;var kt=$t.selectAll("ellipse,polygon,path,polyline"),se=J.selectWithoutDataPropagation("text");if(0!=kt.size()){var O=kt.node().getBBox();O.cx=O.x+O.width/2,O.cy=O.y+O.height/2}else 0!=se.size()&&(O={x:+se.attr("x"),y:+se.attr("y"),width:0,height:0,cx:+se.attr("x"),cy:+se.attr("y")});return kt.each(function(re,Ce){var be=g.select(this);if(be.attr("cx"))be.attr("cx",W(dt)).attr("cy",W(ft));else if(be.attr("points")){var Ke=be.attr("points").trim();be.attr("points",function Lt($t,dt,ft){var zt,mt=(zt=$t.split(" ")).map(function(kt){return kt.split(",")});return mt=zt.map(function(kt){return[W(+dt+ +kt.split(",")[0]),W(+ft+ +kt.split(",")[1])]}),(zt=mt.map(function(kt){return kt.join(",")})).join(" ")}(Ke,dt-O.cx,ft-O.cy))}else{var Me=be.attr("d");be.attr("d",function jt(J,dt,ft){($t=J.split(/[A-Z ]/)).shift();var mt=J.split(/[^[A-Z ]+/),$t=($t.map(function(kt){return kt.split(",")}),$t.map(function(kt){return[W(+dt+ +kt.split(",")[0]),W(+ft+ +kt.split(",")[1])]}).map(function(kt){return kt.join(",")}));return mt.reduce(function(kt,se,O){return kt.concat(se,$t[O])},[]).join("")}(Me,dt-O.cx,ft-O.cy))}}),0!=se.size()&&se.attr("x",W(+se.attr("x")+dt-O.cx)).attr("y",W(+se.attr("y")+ft-O.cy)),this}function Pn(){if(!this._drawnNode)return this;var J=this._drawnNode.g;return J.empty()||J.remove(),this._drawnNode=null,this}function z(){return this._drawnNode?this._drawnNode.g:g.select(null)}function Q(J,dt){for(var ft="",mt=0,zt=Object.keys(dt);mt<zt.length;mt++){var $t=zt[mt];null!=dt[$t]&&(ft+=' "'+$t+'"="'+dt[$t]+'"')}var se=this.layoutSync('graph {"'+J+'" ['+ft+"]}","svg","dot"),re=(new window.DOMParser).parseFromString(se,"image/svg+xml");return g.select(document.createDocumentFragment()).append(function(){return re.documentElement}).select(".node")}function ct(J){self.document={},J.addEventListener("message",function(dt){var ft=self["@hpcc-js/wasm"];null==ft&&dt.data.vizURL&&(importScripts(dt.data.vizURL),(ft=self["@hpcc-js/wasm"]).wasmFolder(dt.data.vizURL.match(/.*\//)[0])),"version"!=dt.data.type?ft.graphviz.layout(dt.data.dot,"svg",dt.data.engine,dt.data.options).then(function(mt){J.postMessage(mt?{type:"done",svg:mt}:dt.data.vizURL?{type:"init"}:{type:"skip"})}).catch(function(mt){J.postMessage({type:"error",error:mt.message})}):ft.graphvizVersion().then(function(mt){J.postMessage({type:"version",version:mt})})})}function A(){ct(self)}function bt(){self.onconnect=function(J){var dt=J.ports[0];ct(dt),dt.start()}}function Pt(J,dt){var ft=this;if(this._options={useWorker:!0,useSharedWorker:!1,engine:"dot",keyMode:"title",fade:!0,tweenPaths:!0,tweenShapes:!0,convertEqualSidedPolygons:!0,tweenPrecision:1,growEnteringEdges:!0,zoom:!0,zoomScaleExtent:[.1,10],zoomTranslateExtent:[[-1/0,-1/0],[1/0,1/0]],width:null,height:null,scale:1,fit:!1},dt instanceof Object)for(var mt=0,zt=Object.keys(dt);mt<zt.length;mt++){var $t=zt[mt];this._options[$t]=dt[$t]}else"boolean"==typeof dt&&(this._options.useWorker=dt);var kt=this._options.useWorker,se=this._options.useSharedWorker;if(typeof Worker>"u"&&(kt=!1),typeof SharedWorker>"u"&&(se=!1),kt||se){var re=g.selectAll("script").filter(function(){return"javascript/worker"==g.select(this).attr("type")||g.select(this).attr("src")&&g.select(this).attr("src").match(/.*\/@hpcc-js\/wasm/)});0==re.size()?(console.warn('No script tag of type "javascript/worker" was found and "useWorker" is true. Not using web worker.'),kt=!1,se=!1):(this._vizURL=re.attr("src"),this._vizURL||(console.warn('No "src" attribute of was found on the "javascript/worker" script tag and "useWorker" is true. Not using web worker.'),kt=!1,se=!1))}if(se){var Ce="data:application/javascript;base64,"+btoa(ct.toString()+"("+bt.toString()+")()");this._worker=this._worker=new SharedWorker(Ce),this._workerPort=this._worker.port,this._workerPortClose=this._worker.port.close.bind(this._workerPort),this._worker.port.start(),this._workerCallbacks=[]}else if(kt){var be=new Blob([ct.toString()+"("+A.toString()+")()"]),Ke=window.URL.createObjectURL(be);this._worker=new Worker(Ke),this._workerPort=this._worker,this._workerPortClose=this._worker.terminate.bind(this._worker),this._workerCallbacks=[]}else l.graphvizVersion().then(function(Me){ft._graphvizVersion=Me}.bind(this));this._selection=J,this._active=!1,this._busy=!1,this._jobs=[],this._queue=[],this._keyModes=new Set(["title","id","tag-index","index"]),this._images=[],this._translation=void 0,this._scale=void 0,this._eventTypes=["initEnd","start","layoutStart","layoutEnd","dataExtractEnd","dataProcessPass1End","dataProcessPass2End","dataProcessEnd","renderStart","renderEnd","transitionStart","transitionEnd","restoreEnd","end","zoom"],this._dispatch=_.dispatch.apply(void 0,L(this._eventTypes)),Vt.call(this),J.node().__graphviz__=this}function Ut(J,dt){return g.select(J).graphviz(dt)}Pt.prototype=Ut.prototype=(C(Dt={constructor:Pt,engine:function le(J){return this._options.engine=J,this},addImage:function me(J,dt,ft){return this._images.push({path:J,width:dt,height:ft}),this},keyMode:function ee(J){if(!this._keyModes.has(J))throw Error("Illegal keyMode: "+J);if(J!=this._options.keyMode&&null!=this._data)throw Error("Too late to change keyMode");return this._options.keyMode=J,this},fade:function Ze(J){return this._options.fade=J,this},tweenPaths:function ze(J){return this._options.tweenPaths=J,this},tweenShapes:function Tn(J){return this._options.tweenShapes=J,J&&(this._options.tweenPaths=!0),this},convertEqualSidedPolygons:function si(J){return this._options.convertEqualSidedPolygons=J,this},tweenPrecision:function Oi(J){return this._options.tweenPrecision=J,this},growEnteringEdges:function gi(J){return this._options.growEnteringEdges=J,this},zoom:function q(J){return this._options.zoom=J,this._options.zoom&&!this._zoomBehavior?Y.call(this):!this._options.zoom&&this._zoomBehavior&&(this._zoomSelection.on(".zoom",null),this._zoomBehavior=null),this},resetZoom:function pt(J){var dt=this._zoomSelection;return J&&(dt=dt.transition(J)),dt.call(this._zoomBehavior.transform,this._originalTransform),this},zoomBehavior:function Et(){return this._zoomBehavior||null},zoomSelection:function Jt(){return this._zoomSelection||null},zoomScaleExtent:function St(J){return this._options.zoomScaleExtent=J,this},zoomTranslateExtent:function Mt(J){return this._options.zoomTranslateExtent=J,this},render:function Ht(J){return this._busy?(this._queue.push(this.render.bind(this,J)),this):(this._dispatch.call("renderStart",this),this._transitionFactory?p.timeout(function(){this._transition=m.transition(this._transitionFactory()),he.call(this,J)}.bind(this),0):he.call(this,J),this)},layout:function _e(J,dt,ft,mt){if(this._worker)qt.call(this,{type:"layout",dot:J,engine:dt,options:ft},function($t){mt.call(this,$t.data)});else try{var zt=this.layoutSync(J,"svg",dt,ft);mt.call(this,{type:"done",svg:zt})}catch($t){mt.call(this,{type:"error",error:$t.message})}},dot:function ye(J,dt){var ft=this,mt=this._options.engine,zt=this._images;return this._dispatch.call("start",this),this._busy=!0,this._dispatch.call("layoutStart",this),this._worker||null!=this.layoutSync?(this.layout(J,mt,{images:zt},function(kt){switch(kt.type){case"error":if(!ft._onerror)throw kt.error.message;ft._onerror(kt.error);break;case"done":Ee.call(this,kt.svg,dt)}}),this):(this._afterInit=this.dot.bind(this,J,dt),this)},data:function yt(){return this._data||null},renderDot:function Oe(J,dt){var ft=this;return this.dot(J,function mt(){ft.render(dt)}),this},transition:function Ae(J){return J instanceof Function?this._transitionFactory=J:this._transition=m.transition(J),this},active:function Ue(J){var ft=this._selection.selectWithoutDataPropagation("svg");return 0!=ft.size()?m.active(ft.node(),J):null},options:function Ve(J){if(typeof J>"u")return Object.assign({},this._options);for(var dt=0,ft=Object.keys(J);dt<ft.length;dt++){var mt=ft[dt];this._options[mt]=J[mt]}return this},width:function rn(J){return this._options.width=J,this},height:function xe(J){return this._options.height=J,this},scale:function un(J){return this._options.scale=J,this},fit:function Tt(J){return this._options.fit=J,this},attributer:function Wt(J){return this._attributer=J,this},on:function _i(J,dt){return this._dispatch.on(J,dt),this},onerror:function Si(J){return this._onerror=J,this},logEvents:function tr(J){for(var dt=this,ft=Date.now(),mt={},zt=this._eventTypes,$t=Math.max.apply(Math,L(zt.map(function(be){return be.length}))),kt=function(Ke){var Me=zt[Ke];mt[Me]=[],O=dt,dt.on(Me+".log",J?function(){var Fe=Date.now(),oe=mt[Me].length;mt[Me].push(Fe);var pe="";if(pe+="Event ",pe+=h.format(" >2")(Ke)+" ",pe+=Me+" ".repeat($t-Me.length),pe+=h.format(" >5")(Fe-ft)+" ","initEnd"!=Me&&(pe+=h.format(" >5")(Fe-mt.start[oe])),"dataProcessEnd"==Me&&(pe+=" prepare                 "+h.format(" >5")(Fe-mt.layoutEnd[oe])),"renderEnd"==Me&&O._transition&&(pe+=" transition start margin "+h.format(" >5")(O._transition.delay()-(Fe-mt.renderStart[oe])),re=O._transition.delay(),Ce=O._transition.duration()),"transitionStart"==Me){var Re=Fe-mt.renderStart[oe];pe+=" transition delay        "+h.format(" >5")(Fe-mt.renderStart[oe]),pe+=" expected "+h.format(" >5")(re),pe+=" diff "+h.format(" >5")(Re-re)}if("transitionEnd"==Me){var fn=Fe-mt.transitionStart[oe];pe+=" transition duration     "+h.format(" >5")(fn),pe+=" expected "+h.format(" >5")(Ce),pe+=" diff "+h.format(" >5")(fn-Ce)}console.log(pe),ft=Fe}:null)},se=0;se<zt.length;se++){var O,re,Ce;kt(se)}return this},destroy:function Pi(){return delete this._selection.node().__graphviz__,this._worker&&this._workerPortClose(),this},drawEdge:function vi(J,dt,ft,mt,zt){var $t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if((zt=Object.assign({},zt)).style&&zt.style.includes("invis"))var kt=g.select(null);else{var re=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),be=G(an.call(this,zt));kt=re.append("g").data([be]),at.call(kt.node(),be),Fi.call(this,kt,J,dt,ft,mt,zt,$t)}return this._drawnEdge={g:kt,x1:J,y1:dt,x2:ft,y2:mt,attributes:zt},this},updateDrawnEdge:function Qi(J,dt,ft,mt){var zt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},$t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var kt=this._drawnEdge.g;return zt=Object.assign(this._drawnEdge.attributes,zt),this._drawnEdge.x1=J,this._drawnEdge.y1=dt,this._drawnEdge.x2=ft,this._drawnEdge.y2=mt,!kt.empty()||zt.style&&zt.style.includes("invis")||(kt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnEdge.g=kt),kt.empty()||Fi.call(this,kt,J,dt,ft,mt,zt,$t),this},moveDrawnEdgeEndPoint:function En(J,dt){var ft=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var mt=this._drawnEdge.g,zt=this._drawnEdge.x1,$t=this._drawnEdge.y1,kt=this._drawnEdge.attributes;return this._drawnEdge.x2=J,this._drawnEdge.y2=dt,de(mt,zt,$t,J,dt,kt,ft),this},insertDrawnEdge:function On(J){if(!this._drawnEdge)throw Error("No edge has been drawn");var dt=this._drawnEdge.g;if(dt.empty())return this;dt.selectWithoutDataPropagation("title").text(J);var $t=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),kt=$t.datum(),se=this._extractData(dt,kt.children.length,$t.datum());return kt.children.push(se),$(dt,se),this._drawnEdge=null,this},removeDrawnEdge:ji},"removeDrawnEdge",ji),C(Dt,"drawnEdgeSelection",_n),C(Dt,"drawnEdgeSelection",_n),C(Dt,"drawNode",function Hn(J,dt,ft){var mt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},zt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((mt=Object.assign({},mt)).style&&mt.style.includes("invis"))var $t=g.select(null);else{var O=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Ce=G(Q.call(this,ft,mt));$t=O.append("g").data([Ce]),at.call($t.node(),Ce),kn.call(this,$t,J,dt,ft,mt,zt)}return this._drawnNode={g:$t,nodeId:ft,x:J,y:dt,attributes:mt},this}),C(Dt,"updateDrawnNode",function oi(J,dt,ft){var mt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},zt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._drawnNode)throw Error("No node has been drawn");var $t=this._drawnNode.g;return null==ft&&(ft=this._drawnNode.nodeId),mt=Object.assign(this._drawnNode.attributes,mt),this._drawnNode.nodeId=ft,this._drawnNode.x=J,this._drawnNode.y=dt,!$t.empty()||mt.style&&mt.style.includes("invis")||($t=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnNode.g=$t),$t.empty()||kn.call(this,$t,J,dt,ft,mt,zt),this}),C(Dt,"moveDrawnNode",function Ri(J,dt){if(!this._drawnNode)throw Error("No node has been drawn");var ft=this._drawnNode.g,mt=this._drawnNode.attributes;return this._drawnNode.x=J,this._drawnNode.y=dt,ft.empty()||Te(ft,J,dt,mt),this}),C(Dt,"insertDrawnNode",function pn(J){if(!this._drawnNode)throw Error("No node has been drawn");null==J&&(J=this._drawnNode.nodeId);var dt=this._drawnNode.g;if(dt.empty())return this;var ft=this._drawnNode.attributes;if(dt.selectWithoutDataPropagation("title").text(J),ft.URL||ft.tooltip){var $t=dt.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");$t.selectWithoutDataPropagation("ellipse,polygon,path,polyline");var kt=$t.selectWithoutDataPropagation("text")}else dt.selectWithoutDataPropagation("ellipse,polygon,path,polyline"),kt=dt.selectWithoutDataPropagation("text");kt.text(ft.label||J);var re=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Ce=re.datum(),be=this._extractData(dt,Ce.children.length,re.datum());return Ce.children.push(be),$(dt,be),this._drawnNode=null,this}),C(Dt,"removeDrawnNode",Pn),C(Dt,"removeDrawnNode",Pn),C(Dt,"drawnNodeSelection",z),C(Dt,"drawnNodeSelection",z),C(Dt,"graphvizVersion",function ke(){return this._graphvizVersion}),Dt),x.selection.prototype.graphviz=function Kt(J){var dt=this.node().__graphviz__;return dt?(dt.options(J),p.timeout(function(){dt._dispatch.call("initEnd",this)}.bind(this),0)):dt=new Pt(this,J),dt},x.selection.prototype.selectWithoutDataPropagation=function Yt(J){return g.select(this.size()>0?this.node().querySelector(J):null)},c.graphviz=Ut,Object.defineProperty(c,"__esModule",{value:!0})}(D,s(68557),s(75143),s(18429),s(65894),s(46176),s(46041),s(89397),s(41129),s(38184))},75143:(w,D,s)=>{"use strict";s.r(D),s.d(D,{dispatch:()=>d});var c={value:()=>{}};function x(){for(var u,l=0,h=arguments.length,f={};l<h;++l){if(!(u=arguments[l]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new _(f)}function _(l){this._=l}function m(l,h){return l.trim().split(/^|\s+/).map(function(f){var u="",g=f.indexOf(".");if(g>=0&&(u=f.slice(g+1),f=f.slice(0,g)),f&&!h.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}function p(l,h){for(var g,f=0,u=l.length;f<u;++f)if((g=l[f]).name===h)return g.value}function t(l,h,f){for(var u=0,g=l.length;u<g;++u)if(l[u].name===h){l[u]=c,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=f&&l.push({name:h,value:f}),l}_.prototype=x.prototype={constructor:_,on:function(l,h){var g,f=this._,u=m(l+"",f),C=-1,L=u.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<L;)if(g=(l=u[C]).type)f[g]=t(f[g],l.name,h);else if(null==h)for(g in f)f[g]=t(f[g],l.name,null);return this}for(;++C<L;)if((g=(l=u[C]).type)&&(g=p(f[g],l.name)))return g},copy:function(){var l={},h=this._;for(var f in h)l[f]=h[f].slice();return new _(l)},call:function(l,h){if((g=arguments.length-2)>0)for(var g,C,f=new Array(g),u=0;u<g;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(u=0,g=(C=this._[l]).length;u<g;++u)C[u].value.apply(h,f)},apply:function(l,h,f){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],g=0,C=u.length;g<C;++g)u[g].value.apply(h,f)}};const d=x},65894:(w,D,s)=>{"use strict";s.r(D),s.d(D,{interval:()=>nt,now:()=>g,timeout:()=>G,timer:()=>I,timerFlush:()=>B});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(et){setTimeout(et,17)};function g(){return l||(u(C),l=f.now()+h)}function C(){l=0}function L(){this._call=this._time=this._next=null}function I(et,st,K){var $=new L;return $.restart(et,st,K),$}function B(){g(),++c;for(var st,et=p;et;)(st=l-et._time)>=0&&et._call.call(null,st),et=et._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{B()}finally{c=0,function Z(){for(var et,K,st=p,$=1/0;st;)st._call?($>st._time&&($=st._time),et=st,st=st._next):(K=st._next,st._next=null,st=et?et._next=K:p=K);t=et,H($)}(),l=0}}function F(){var et=f.now(),st=et-d;st>1e3&&(h-=st,d=et)}function H(et){c||(x&&(x=clearTimeout(x)),et-l>24?(et<1/0&&(x=setTimeout(M,et-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(F,1e3)),c=1,u(M)))}function G(et,st,K){var $=new L;return $.restart(it=>{$.stop(),et(it+st)},st=null==st?0:+st,K),$}function nt(et,st,K){var $=new L,it=st;return null==st?($.restart(et,st,K),$):($._restart=$.restart,$.restart=function(at,X,W){X=+X,W=null==W?g():+W,$._restart(function q(Y){Y+=it,$._restart(q,it+=X,W),at(Y)},X,W)},$.restart(et,st,K),$)}L.prototype=I.prototype={constructor:L,restart:function(et,st,K){if("function"!=typeof et)throw new TypeError("callback is not a function");K=(null==K?g():+K)+(null==st?0:+st),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=et,this._time=K,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}}},90268:(w,D,s)=>{"use strict";s.d(D,{M:()=>m,Z:()=>_});var c=s(37656),x=s(62681);function _(p,t){return((0,x.v)(t)?x.Z:m)(p,t)}function m(p,t){var u,d=t?t.length:0,l=p?Math.min(d,p.length):0,h=new Array(l),f=new Array(d);for(u=0;u<l;++u)h[u]=(0,c.Z)(p[u],t[u]);for(;u<d;++u)f[u]=t[u];return function(g){for(u=0;u<l;++u)f[u]=h[u](g);return f}}},16712:(w,D,s)=>{"use strict";function c(_,m,p,t,d){var l=_*_,h=l*_;return((1-3*_+3*l-h)*m+(4-6*l+3*h)*p+(1+3*_+3*l-3*h)*t+h*d)/6}function x(_){var m=_.length-1;return function(p){var t=p<=0?p=0:p>=1?(p=1,m-1):Math.floor(p*m),d=_[t],l=_[t+1];return c((p-t/m)*m,t>0?_[t-1]:2*d-l,d,l,t<m-1?_[t+2]:2*l-d)}}s.d(D,{Z:()=>x,t:()=>c})},68523:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(16712);function x(_){var m=_.length;return function(p){var t=Math.floor(((p%=1)<0?++p:p)*m);return(0,c.t)((p-t/m)*m,_[(t+m-1)%m],_[t%m],_[(t+1)%m],_[(t+2)%m])}}},35147:(w,D,s)=>{"use strict";s.d(D,{ZP:()=>t,wx:()=>m,yi:()=>p});var c=s(47927);function x(d,l){return function(h){return d+h*l}}function m(d,l){var h=l-d;return h?x(d,h>180||h<-180?h-360*Math.round(h/360):h):(0,c.Z)(isNaN(d)?l:d)}function p(d){return 1==(d=+d)?t:function(l,h){return h-l?function _(d,l,h){return d=Math.pow(d,h),l=Math.pow(l,h)-d,h=1/h,function(f){return Math.pow(d+f*l,h)}}(l,h,d):(0,c.Z)(isNaN(l)?h:l)}}function t(d,l){var h=l-d;return h?x(d,h):(0,c.Z)(isNaN(d)?l:d)}},47927:(w,D,s)=>{"use strict";s.d(D,{Z:()=>c});const c=x=>()=>x},15629:(w,D,s)=>{"use strict";function c(x,_){var m=new Date;return x=+x,_=+_,function(p){return m.setTime(x*(1-p)+_*p),m}}s.d(D,{Z:()=>c})},46176:(w,D,s)=>{"use strict";s.r(D),s.d(D,{interpolate:()=>c.Z,interpolateArray:()=>x.Z,interpolateBasis:()=>_.Z,interpolateBasisClosed:()=>m.Z,interpolateCubehelix:()=>Ve,interpolateCubehelixLong:()=>rn,interpolateDate:()=>p.Z,interpolateDiscrete:()=>t,interpolateHcl:()=>Ht,interpolateHclLong:()=>he,interpolateHsl:()=>Z,interpolateHslLong:()=>H,interpolateHue:()=>l,interpolateLab:()=>Xt,interpolateNumber:()=>h.Z,interpolateNumberArray:()=>f.Z,interpolateObject:()=>u.Z,interpolateRgb:()=>B.ZP,interpolateRgbBasis:()=>B.hD,interpolateRgbBasisClosed:()=>B.YD,interpolateRound:()=>g.Z,interpolateString:()=>C.Z,interpolateTransformCss:()=>L.Y,interpolateTransformSvg:()=>L.w,interpolateZoom:()=>I.Z,piecewise:()=>xe,quantize:()=>un});var c=s(37656),x=s(90268),_=s(16712),m=s(68523),p=s(15629);function t(Tt){var Wt=Tt.length;return function(le){return Tt[Math.max(0,Math.min(Wt-1,Math.floor(le*Wt)))]}}var d=s(35147);function l(Tt,Wt){var le=(0,d.wx)(+Tt,+Wt);return function(me){var ee=le(me);return ee-360*Math.floor(ee/360)}}var h=s(6738),f=s(62681),u=s(84858),g=s(84067),C=s(23096),L=s(75349),I=s(76257),B=s(86811),M=s(52786);function F(Tt){return function(Wt,le){var me=Tt((Wt=(0,M.Ym)(Wt)).h,(le=(0,M.Ym)(le)).h),ee=(0,d.ZP)(Wt.s,le.s),Ze=(0,d.ZP)(Wt.l,le.l),ze=(0,d.ZP)(Wt.opacity,le.opacity);return function(Tn){return Wt.h=me(Tn),Wt.s=ee(Tn),Wt.l=Ze(Tn),Wt.opacity=ze(Tn),Wt+""}}}const Z=F(d.wx);var H=F(d.ZP),G=s(68884);const nt=Math.PI/180,et=180/Math.PI,K=.96422,at=4/29,X=6/29,W=3*X*X;function Y(Tt){if(Tt instanceof pt)return new pt(Tt.l,Tt.a,Tt.b,Tt.opacity);if(Tt instanceof Nt)return _t(Tt);Tt instanceof M.Ss||(Tt=(0,M.SU)(Tt));var Ze,ze,Wt=Jt(Tt.r),le=Jt(Tt.g),me=Jt(Tt.b),ee=St((.2225045*Wt+.7168786*le+.0606169*me)/1);return Wt===le&&le===me?Ze=ze=ee:(Ze=St((.4360747*Wt+.3850649*le+.1430804*me)/K),ze=St((.0139322*Wt+.0971045*le+.7141733*me)/.82521)),new pt(116*ee-16,500*(Ze-ee),200*(ee-ze),Tt.opacity)}function E(Tt,Wt,le,me){return 1===arguments.length?Y(Tt):new pt(Tt,Wt,le,me??1)}function pt(Tt,Wt,le,me){this.l=+Tt,this.a=+Wt,this.b=+le,this.opacity=+me}function St(Tt){return Tt>.008856451679035631?Math.pow(Tt,1/3):Tt/W+at}function Mt(Tt){return Tt>X?Tt*Tt*Tt:W*(Tt-at)}function Et(Tt){return 255*(Tt<=.0031308?12.92*Tt:1.055*Math.pow(Tt,1/2.4)-.055)}function Jt(Tt){return(Tt/=255)<=.04045?Tt/12.92:Math.pow((Tt+.055)/1.055,2.4)}function ue(Tt){if(Tt instanceof Nt)return new Nt(Tt.h,Tt.c,Tt.l,Tt.opacity);if(Tt instanceof pt||(Tt=Y(Tt)),0===Tt.a&&0===Tt.b)return new Nt(NaN,0<Tt.l&&Tt.l<100?0:NaN,Tt.l,Tt.opacity);var Wt=Math.atan2(Tt.b,Tt.a)*et;return new Nt(Wt<0?Wt+360:Wt,Math.sqrt(Tt.a*Tt.a+Tt.b*Tt.b),Tt.l,Tt.opacity)}function yt(Tt,Wt,le,me){return 1===arguments.length?ue(Tt):new Nt(Tt,Wt,le,me??1)}function Nt(Tt,Wt,le,me){this.h=+Tt,this.c=+Wt,this.l=+le,this.opacity=+me}function _t(Tt){if(isNaN(Tt.h))return new pt(Tt.l,0,0,Tt.opacity);var Wt=Tt.h*nt;return new pt(Tt.l,Math.cos(Wt)*Tt.c,Math.sin(Wt)*Tt.c,Tt.opacity)}function Xt(Tt,Wt){var le=(0,d.ZP)((Tt=E(Tt)).l,(Wt=E(Wt)).l),me=(0,d.ZP)(Tt.a,Wt.a),ee=(0,d.ZP)(Tt.b,Wt.b),Ze=(0,d.ZP)(Tt.opacity,Wt.opacity);return function(ze){return Tt.l=le(ze),Tt.a=me(ze),Tt.b=ee(ze),Tt.opacity=Ze(ze),Tt+""}}function Ft(Tt){return function(Wt,le){var me=Tt((Wt=yt(Wt)).h,(le=yt(le)).h),ee=(0,d.ZP)(Wt.c,le.c),Ze=(0,d.ZP)(Wt.l,le.l),ze=(0,d.ZP)(Wt.opacity,le.opacity);return function(Tn){return Wt.h=me(Tn),Wt.c=ee(Tn),Wt.l=Ze(Tn),Wt.opacity=ze(Tn),Wt+""}}}(0,G.Z)(pt,E,(0,G.l)(M.Il,{brighter:function(Tt){return new pt(this.l+18*(Tt??1),this.a,this.b,this.opacity)},darker:function(Tt){return new pt(this.l-18*(Tt??1),this.a,this.b,this.opacity)},rgb:function(){var Tt=(this.l+16)/116,Wt=isNaN(this.a)?Tt:Tt+this.a/500,le=isNaN(this.b)?Tt:Tt-this.b/200;return Wt=K*Mt(Wt),Tt=1*Mt(Tt),le=.82521*Mt(le),new M.Ss(Et(3.1338561*Wt-1.6168667*Tt-.4906146*le),Et(-.9787684*Wt+1.9161415*Tt+.033454*le),Et(.0719453*Wt-.2289914*Tt+1.4052427*le),this.opacity)}})),(0,G.Z)(Nt,yt,(0,G.l)(M.Il,{brighter:function(Tt){return new Nt(this.h,this.c,this.l+18*(Tt??1),this.opacity)},darker:function(Tt){return new Nt(this.h,this.c,this.l-18*(Tt??1),this.opacity)},rgb:function(){return _t(this).rgb()}}));const Ht=Ft(d.wx);var he=Ft(d.ZP),Ie=1.78277,Lt=-.29227,jt=-.90649,Vt=1.97294,qt=Vt*jt,_e=Vt*Ie,ye=Ie*Lt- -.14861*jt;function Ee(Tt){if(Tt instanceof Ae)return new Ae(Tt.h,Tt.s,Tt.l,Tt.opacity);Tt instanceof M.Ss||(Tt=(0,M.SU)(Tt));var le=Tt.g/255,me=Tt.b/255,ee=(ye*me+qt*(Tt.r/255)-_e*le)/(ye+qt-_e),Ze=me-ee,ze=(Vt*(le-ee)-Lt*Ze)/jt,Tn=Math.sqrt(ze*ze+Ze*Ze)/(Vt*ee*(1-ee)),si=Tn?Math.atan2(ze,Ze)*et-120:NaN;return new Ae(si<0?si+360:si,Tn,ee,Tt.opacity)}function Oe(Tt,Wt,le,me){return 1===arguments.length?Ee(Tt):new Ae(Tt,Wt,le,me??1)}function Ae(Tt,Wt,le,me){this.h=+Tt,this.s=+Wt,this.l=+le,this.opacity=+me}function Ue(Tt){return function Wt(le){function me(ee,Ze){var ze=Tt((ee=Oe(ee)).h,(Ze=Oe(Ze)).h),Tn=(0,d.ZP)(ee.s,Ze.s),si=(0,d.ZP)(ee.l,Ze.l),Oi=(0,d.ZP)(ee.opacity,Ze.opacity);return function(gi){return ee.h=ze(gi),ee.s=Tn(gi),ee.l=si(Math.pow(gi,le)),ee.opacity=Oi(gi),ee+""}}return le=+le,me.gamma=Wt,me}(1)}(0,G.Z)(Ae,Oe,(0,G.l)(M.Il,{brighter:function(Tt){return Tt=null==Tt?M.J5:Math.pow(M.J5,Tt),new Ae(this.h,this.s,this.l*Tt,this.opacity)},darker:function(Tt){return Tt=null==Tt?M.xV:Math.pow(M.xV,Tt),new Ae(this.h,this.s,this.l*Tt,this.opacity)},rgb:function(){var Tt=isNaN(this.h)?0:(this.h+120)*nt,Wt=+this.l,le=isNaN(this.s)?0:this.s*Wt*(1-Wt),me=Math.cos(Tt),ee=Math.sin(Tt);return new M.Ss(255*(Wt+le*(-.14861*me+Ie*ee)),255*(Wt+le*(Lt*me+jt*ee)),255*(Wt+le*(Vt*me)),this.opacity)}}));const Ve=Ue(d.wx);var rn=Ue(d.ZP);function xe(Tt,Wt){void 0===Wt&&(Wt=Tt,Tt=c.Z);for(var le=0,me=Wt.length-1,ee=Wt[0],Ze=new Array(me<0?0:me);le<me;)Ze[le]=Tt(ee,ee=Wt[++le]);return function(ze){var Tn=Math.max(0,Math.min(me-1,Math.floor(ze*=me)));return Ze[Tn](ze-Tn)}}function un(Tt,Wt){for(var le=new Array(Wt),me=0;me<Wt;++me)le[me]=Tt(me/(Wt-1));return le}},6738:(w,D,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(m){return x*(1-m)+_*m}}s.d(D,{Z:()=>c})},62681:(w,D,s)=>{"use strict";function c(_,m){m||(m=[]);var d,p=_?Math.min(m.length,_.length):0,t=m.slice();return function(l){for(d=0;d<p;++d)t[d]=_[d]*(1-l)+m[d]*l;return t}}function x(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}s.d(D,{Z:()=>c,v:()=>x})},84858:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(37656);function x(_,m){var d,p={},t={};for(d in(null===_||"object"!=typeof _)&&(_={}),(null===m||"object"!=typeof m)&&(m={}),m)d in _?p[d]=(0,c.Z)(_[d],m[d]):t[d]=m[d];return function(l){for(d in p)t[d]=p[d](l);return t}}},86811:(w,D,s)=>{"use strict";s.d(D,{YD:()=>l,ZP:()=>p,hD:()=>d});var c=s(52786),x=s(16712),_=s(68523),m=s(35147);const p=function h(f){var u=(0,m.yi)(f);function g(C,L){var I=u((C=(0,c.B8)(C)).r,(L=(0,c.B8)(L)).r),B=u(C.g,L.g),M=u(C.b,L.b),F=(0,m.ZP)(C.opacity,L.opacity);return function(Z){return C.r=I(Z),C.g=B(Z),C.b=M(Z),C.opacity=F(Z),C+""}}return g.gamma=h,g}(1);function t(h){return function(f){var I,B,u=f.length,g=new Array(u),C=new Array(u),L=new Array(u);for(I=0;I<u;++I)B=(0,c.B8)(f[I]),g[I]=B.r||0,C[I]=B.g||0,L[I]=B.b||0;return g=h(g),C=h(C),L=h(L),B.opacity=1,function(M){return B.r=g(M),B.g=C(M),B.b=L(M),B+""}}}var d=t(x.Z),l=t(_.Z)},84067:(w,D,s)=>{"use strict";function c(x,_){return x=+x,_=+_,function(m){return Math.round(x*(1-m)+_*m)}}s.d(D,{Z:()=>c})},23096:(w,D,s)=>{"use strict";s.d(D,{Z:()=>t});var c=s(6738),x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(x.source,"g");function t(d,l){var f,u,g,h=x.lastIndex=_.lastIndex=0,C=-1,L=[],I=[];for(d+="",l+="";(f=x.exec(d))&&(u=_.exec(l));)(g=u.index)>h&&(g=l.slice(h,g),L[C]?L[C]+=g:L[++C]=g),(f=f[0])===(u=u[0])?L[C]?L[C]+=u:L[++C]=u:(L[++C]=null,I.push({i:C,x:(0,c.Z)(f,u)})),h=_.lastIndex;return h<l.length&&(g=l.slice(h),L[C]?L[C]+=g:L[++C]=g),L.length<2?I[0]?function p(d){return function(l){return d(l)+""}}(I[0].x):function m(d){return function(){return d}}(l):(l=I.length,function(B){for(var F,M=0;M<l;++M)L[(F=I[M]).i]=F.x(B);return L.join("")})}},75349:(w,D,s)=>{"use strict";s.d(D,{Y:()=>h,w:()=>f});var p,c=s(6738),x=180/Math.PI,_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function m(u,g,C,L,I,B){var M,F,Z;return(M=Math.sqrt(u*u+g*g))&&(u/=M,g/=M),(Z=u*C+g*L)&&(C-=u*Z,L-=g*Z),(F=Math.sqrt(C*C+L*L))&&(C/=F,L/=F,Z/=F),u*L<g*C&&(u=-u,g=-g,Z=-Z,M=-M),{translateX:I,translateY:B,rotate:Math.atan2(g,u)*x,skewX:Math.atan(Z)*x,scaleX:M,scaleY:F}}function l(u,g,C,L){function I(H){return H.length?H.pop()+" ":""}return function(H,G){var nt=[],et=[];return H=u(H),G=u(G),function B(H,G,nt,et,st,K){if(H!==nt||G!==et){var $=st.push("translate(",null,g,null,C);K.push({i:$-4,x:(0,c.Z)(H,nt)},{i:$-2,x:(0,c.Z)(G,et)})}else(nt||et)&&st.push("translate("+nt+g+et+C)}(H.translateX,H.translateY,G.translateX,G.translateY,nt,et),function M(H,G,nt,et){H!==G?(H-G>180?G+=360:G-H>180&&(H+=360),et.push({i:nt.push(I(nt)+"rotate(",null,L)-2,x:(0,c.Z)(H,G)})):G&&nt.push(I(nt)+"rotate("+G+L)}(H.rotate,G.rotate,nt,et),function F(H,G,nt,et){H!==G?et.push({i:nt.push(I(nt)+"skewX(",null,L)-2,x:(0,c.Z)(H,G)}):G&&nt.push(I(nt)+"skewX("+G+L)}(H.skewX,G.skewX,nt,et),function Z(H,G,nt,et,st,K){if(H!==nt||G!==et){var $=st.push(I(st)+"scale(",null,",",null,")");K.push({i:$-4,x:(0,c.Z)(H,nt)},{i:$-2,x:(0,c.Z)(G,et)})}else(1!==nt||1!==et)&&st.push(I(st)+"scale("+nt+","+et+")")}(H.scaleX,H.scaleY,G.scaleX,G.scaleY,nt,et),H=G=null,function(st){for(var it,K=-1,$=et.length;++K<$;)nt[(it=et[K]).i]=it.x(st);return nt.join("")}}}var h=l(function t(u){const g=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(u+"");return g.isIdentity?_:m(g.a,g.b,g.c,g.d,g.e,g.f)},"px, ","px)","deg)"),f=l(function d(u){return null!=u&&(p||(p=document.createElementNS("http://www.w3.org/2000/svg","g")),p.setAttribute("transform",u),u=p.transform.baseVal.consolidate())?m((u=u.matrix).a,u.b,u.c,u.d,u.e,u.f):_},", ",")",")")},37656:(w,D,s)=>{"use strict";s.d(D,{Z:()=>f});var c=s(52786),x=s(86811),_=s(90268),m=s(15629),p=s(6738),t=s(84858),d=s(23096),l=s(47927),h=s(62681);function f(u,g){var L,C=typeof g;return null==g||"boolean"===C?(0,l.Z)(g):("number"===C?p.Z:"string"===C?(L=(0,c.ZP)(g))?(g=L,x.ZP):d.Z:g instanceof c.ZP?x.ZP:g instanceof Date?m.Z:(0,h.v)(g)?h.Z:Array.isArray(g)?_.M:"function"!=typeof g.valueOf&&"function"!=typeof g.toString||isNaN(g)?t.Z:p.Z)(u,g)}},76257:(w,D,s)=>{"use strict";function x(t){return((t=Math.exp(t))+1/t)/2}s.d(D,{Z:()=>p});const p=function t(d,l,h){function f(u,g){var nt,et,C=u[0],L=u[1],I=u[2],F=g[2],Z=g[0]-C,H=g[1]-L,G=Z*Z+H*H;if(G<1e-12)et=Math.log(F/I)/d,nt=function(X){return[C+X*Z,L+X*H,I*Math.exp(d*X*et)]};else{var st=Math.sqrt(G),K=(F*F-I*I+h*G)/(2*I*l*st),$=(F*F-I*I-h*G)/(2*F*l*st),it=Math.log(Math.sqrt(K*K+1)-K),at=Math.log(Math.sqrt($*$+1)-$);et=(at-it)/d,nt=function(X){var W=X*et,q=x(it),Y=I/(l*st)*(q*function m(t){return((t=Math.exp(2*t))-1)/(t+1)}(d*W+it)-function _(t){return((t=Math.exp(t))-1/t)/2}(it));return[C+Y*Z,L+Y*H,I*q/x(d*W+it)]}}return nt.duration=1e3*et*d/Math.SQRT2,nt}return f.rho=function(u){var g=Math.max(.001,+u),C=g*g;return t(g,C,C*C)},f}(Math.SQRT2,2,4)},38184:(w,D,s)=>{"use strict";s.r(D),s.d(D,{path:()=>d});const c=Math.PI,x=2*c,_=1e-6,m=x-_;function p(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function t(){return new p}p.prototype=t.prototype={constructor:p,moveTo:function(l,h){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(l,h){this._+="L"+(this._x1=+l)+","+(this._y1=+h)},quadraticCurveTo:function(l,h,f,u){this._+="Q"+ +l+","+ +h+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(l,h,f,u,g,C){this._+="C"+ +l+","+ +h+","+ +f+","+ +u+","+(this._x1=+g)+","+(this._y1=+C)},arcTo:function(l,h,f,u,g){var C=this._x1,L=this._y1,I=(f=+f)-(l=+l),B=(u=+u)-(h=+h),M=C-l,F=L-h,Z=M*M+F*F;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=l)+","+(this._y1=h);else if(Z>_)if(Math.abs(F*I-B*M)>_&&g){var H=f-C,G=u-L,nt=I*I+B*B,et=H*H+G*G,st=Math.sqrt(nt),K=Math.sqrt(Z),$=g*Math.tan((c-Math.acos((nt+Z-et)/(2*st*K)))/2),it=$/K,at=$/st;Math.abs(it-1)>_&&(this._+="L"+(l+it*M)+","+(h+it*F)),this._+="A"+g+","+g+",0,0,"+ +(F*H>M*G)+","+(this._x1=l+at*I)+","+(this._y1=h+at*B)}else this._+="L"+(this._x1=l)+","+(this._y1=h)},arc:function(l,h,f,u,g,C){l=+l,h=+h,C=!!C;var L=(f=+f)*Math.cos(u),I=f*Math.sin(u),B=l+L,M=h+I,F=1^C,Z=C?u-g:g-u;if(f<0)throw new Error("negative radius: "+f);null===this._x1?this._+="M"+B+","+M:(Math.abs(this._x1-B)>_||Math.abs(this._y1-M)>_)&&(this._+="L"+B+","+M),f&&(Z<0&&(Z=Z%x+x),Z>m?this._+="A"+f+","+f+",0,1,"+F+","+(l-L)+","+(h-I)+"A"+f+","+f+",0,1,"+F+","+(this._x1=B)+","+(this._y1=M):Z>_&&(this._+="A"+f+","+f+",0,"+ +(Z>=c)+","+F+","+(this._x1=l+f*Math.cos(g))+","+(this._y1=h+f*Math.sin(g))))},rect:function(l,h,f,u){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+h)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}};const d=t},34638:(w,D,s)=>{"use strict";function c(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}s.d(D,{Z:()=>c})},7500:(w,D,s)=>{"use strict";s.d(D,{Z:()=>p});var c=s(36175),x=s(53517);function _(t){return function(){var d=this.ownerDocument,l=this.namespaceURI;return l===x.P&&d.documentElement.namespaceURI===x.P?d.createElement(t):d.createElementNS(l,t)}}function m(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function p(t){var d=(0,c.Z)(t);return(d.local?m:_)(d)}},68557:(w,D,s)=>{"use strict";s.r(D),s.d(D,{create:()=>_,creator:()=>c.Z,local:()=>p,matcher:()=>d.Z,namespace:()=>l.Z,namespaces:()=>h.Z,pointer:()=>f.Z,pointers:()=>g,select:()=>x.Z,selectAll:()=>I,selection:()=>L.ZP,selector:()=>B.Z,selectorAll:()=>M.Z,style:()=>F.S,window:()=>Z.Z});var c=s(7500),x=s(52016);function _(H){return(0,x.Z)((0,c.Z)(H).call(document.documentElement))}var m=0;function p(){return new t}function t(){this._="@"+(++m).toString(36)}t.prototype=p.prototype={constructor:t,get:function(H){for(var G=this._;!(G in H);)if(!(H=H.parentNode))return;return H[G]},set:function(H,G){return H[this._]=G},remove:function(H){return this._ in H&&delete H[this._]},toString:function(){return this._}};var d=s(97905),l=s(36175),h=s(53517),f=s(29132),u=s(75819);function g(H,G){return H.target&&(H=(0,u.Z)(H),void 0===G&&(G=H.currentTarget),H=H.touches||[H]),Array.from(H,nt=>(0,f.Z)(nt,G))}var C=s(34638),L=s(37853);function I(H){return"string"==typeof H?new L.Y1([document.querySelectorAll(H)],[document.documentElement]):new L.Y1([null==H?[]:(0,C.Z)(H)],L.Jz)}var B=s(29742),M=s(32037),F=s(24476),Z=s(2442)},97905:(w,D,s)=>{"use strict";function c(_){return function(){return this.matches(_)}}function x(_){return function(m){return m.matches(_)}}s.d(D,{P:()=>x,Z:()=>c})},36175:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(53517);function x(_){var m=_+="",p=m.indexOf(":");return p>=0&&"xmlns"!==(m=_.slice(0,p))&&(_=_.slice(p+1)),c.Z.hasOwnProperty(m)?{space:c.Z[m],local:_}:_}},53517:(w,D,s)=>{"use strict";s.d(D,{P:()=>c,Z:()=>x});var c="http://www.w3.org/1999/xhtml";const x={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},29132:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(75819);function x(_,m){if(_=(0,c.Z)(_),void 0===m&&(m=_.currentTarget),m){var p=m.ownerSVGElement||m;if(p.createSVGPoint){var t=p.createSVGPoint();return t.x=_.clientX,t.y=_.clientY,[(t=t.matrixTransform(m.getScreenCTM().inverse())).x,t.y]}if(m.getBoundingClientRect){var d=m.getBoundingClientRect();return[_.clientX-d.left-m.clientLeft,_.clientY-d.top-m.clientTop]}}return[_.pageX,_.pageY]}},52016:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(37853);function x(_){return"string"==typeof _?new c.Y1([[document.querySelector(_)]],[document.documentElement]):new c.Y1([[_]],c.Jz)}},37853:(w,D,s)=>{"use strict";s.d(D,{Y1:()=>Te,ZP:()=>pn,Jz:()=>kn});var c=s(29742),_=s(34638),m=s(32037),d=s(97905),l=Array.prototype.find;function f(){return this.firstElementChild}var g=Array.prototype.filter;function C(){return this.children}function M(z){return new Array(z.length)}function Z(z,Q){this.ownerDocument=z.ownerDocument,this.namespaceURI=z.namespaceURI,this._next=null,this._parent=z,this.__data__=Q}function H(z){return function(){return z}}function G(z,Q,ct,A,bt,Dt){for(var Ut,Pt=0,Kt=Q.length,Yt=Dt.length;Pt<Yt;++Pt)(Ut=Q[Pt])?(Ut.__data__=Dt[Pt],A[Pt]=Ut):ct[Pt]=new Z(z,Dt[Pt]);for(;Pt<Kt;++Pt)(Ut=Q[Pt])&&(bt[Pt]=Ut)}function nt(z,Q,ct,A,bt,Dt,Pt){var Ut,Kt,mt,Yt=new Map,J=Q.length,dt=Dt.length,ft=new Array(J);for(Ut=0;Ut<J;++Ut)(Kt=Q[Ut])&&(ft[Ut]=mt=Pt.call(Kt,Kt.__data__,Ut,Q)+"",Yt.has(mt)?bt[Ut]=Kt:Yt.set(mt,Kt));for(Ut=0;Ut<dt;++Ut)mt=Pt.call(z,Dt[Ut],Ut,Dt)+"",(Kt=Yt.get(mt))?(A[Ut]=Kt,Kt.__data__=Dt[Ut],Yt.delete(mt)):ct[Ut]=new Z(z,Dt[Ut]);for(Ut=0;Ut<J;++Ut)(Kt=Q[Ut])&&Yt.get(ft[Ut])===Kt&&(bt[Ut]=Kt)}function et(z){return z.__data__}function W(z,Q){return z<Q?-1:z>Q?1:z>=Q?0:NaN}Z.prototype={constructor:Z,appendChild:function(z){return this._parent.insertBefore(z,this._next)},insertBefore:function(z,Q){return this._parent.insertBefore(z,Q)},querySelector:function(z){return this._parent.querySelector(z)},querySelectorAll:function(z){return this._parent.querySelectorAll(z)}};var Mt=s(36175);function Et(z){return function(){this.removeAttribute(z)}}function Jt(z){return function(){this.removeAttributeNS(z.space,z.local)}}function ue(z,Q){return function(){this.setAttribute(z,Q)}}function wt(z,Q){return function(){this.setAttributeNS(z.space,z.local,Q)}}function yt(z,Q){return function(){var ct=Q.apply(this,arguments);null==ct?this.removeAttribute(z):this.setAttribute(z,ct)}}function Nt(z,Q){return function(){var ct=Q.apply(this,arguments);null==ct?this.removeAttributeNS(z.space,z.local):this.setAttributeNS(z.space,z.local,ct)}}var Xt=s(24476);function Ft(z){return function(){delete this[z]}}function Ht(z,Q){return function(){this[z]=Q}}function he(z,Q){return function(){var ct=Q.apply(this,arguments);null==ct?delete this[z]:this[z]=ct}}function Ie(z){return z.trim().split(/^|\s+/)}function Lt(z){return z.classList||new jt(z)}function jt(z){this._node=z,this._names=Ie(z.getAttribute("class")||"")}function Vt(z,Q){for(var ct=Lt(z),A=-1,bt=Q.length;++A<bt;)ct.add(Q[A])}function qt(z,Q){for(var ct=Lt(z),A=-1,bt=Q.length;++A<bt;)ct.remove(Q[A])}function _e(z){return function(){Vt(this,z)}}function ye(z){return function(){qt(this,z)}}function Ee(z,Q){return function(){(Q.apply(this,arguments)?Vt:qt)(this,z)}}function Ae(){this.textContent=""}function Ue(z){return function(){this.textContent=z}}function Ve(z){return function(){var Q=z.apply(this,arguments);this.textContent=Q??""}}function xe(){this.innerHTML=""}function un(z){return function(){this.innerHTML=z}}function Tt(z){return function(){var Q=z.apply(this,arguments);this.innerHTML=Q??""}}function le(){this.nextSibling&&this.parentNode.appendChild(this)}function ee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}jt.prototype={add:function(z){this._names.indexOf(z)<0&&(this._names.push(z),this._node.setAttribute("class",this._names.join(" ")))},remove:function(z){var Q=this._names.indexOf(z);Q>=0&&(this._names.splice(Q,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(z){return this._names.indexOf(z)>=0}};var ze=s(7500);function si(){return null}function gi(){var z=this.parentNode;z&&z.removeChild(this)}function Si(){var z=this.cloneNode(!1),Q=this.parentNode;return Q?Q.insertBefore(z,this.nextSibling):z}function tr(){var z=this.cloneNode(!0),Q=this.parentNode;return Q?Q.insertBefore(z,this.nextSibling):z}function Qi(z){return z.trim().split(/^|\s+/).map(function(Q){var ct="",A=Q.indexOf(".");return A>=0&&(ct=Q.slice(A+1),Q=Q.slice(0,A)),{type:Q,name:ct}})}function Fi(z){return function(){var Q=this.__on;if(Q){for(var Dt,ct=0,A=-1,bt=Q.length;ct<bt;++ct)Dt=Q[ct],z.type&&Dt.type!==z.type||Dt.name!==z.name?Q[++A]=Dt:this.removeEventListener(Dt.type,Dt.listener,Dt.options);++A?Q.length=A:delete this.__on}}}function de(z,Q,ct){return function(){var bt,A=this.__on,Dt=function vi(z){return function(Q){z.call(this,Q,this.__data__)}}(Q);if(A)for(var Pt=0,Ut=A.length;Pt<Ut;++Pt)if((bt=A[Pt]).type===z.type&&bt.name===z.name)return this.removeEventListener(bt.type,bt.listener,bt.options),this.addEventListener(bt.type,bt.listener=Dt,bt.options=ct),void(bt.value=Q);this.addEventListener(z.type,Dt,ct),bt={type:z.type,name:z.name,value:Q,listener:Dt,options:ct},A?A.push(bt):this.__on=[bt]}}var ji=s(2442);function On(z,Q,ct){var A=(0,ji.Z)(z),bt=A.CustomEvent;"function"==typeof bt?bt=new bt(Q,ct):(bt=A.document.createEvent("Event"),ct?(bt.initEvent(Q,ct.bubbles,ct.cancelable),bt.detail=ct.detail):bt.initEvent(Q,!1,!1)),z.dispatchEvent(bt)}function _n(z,Q){return function(){return On(this,z,Q)}}function an(z,Q){return function(){return On(this,z,Q.apply(this,arguments))}}var kn=[null];function Te(z,Q){this._groups=z,this._parents=Q}function Ri(){return new Te([[document.documentElement]],kn)}Te.prototype=Ri.prototype={constructor:Te,select:function x(z){"function"!=typeof z&&(z=(0,c.Z)(z));for(var Q=this._groups,ct=Q.length,A=new Array(ct),bt=0;bt<ct;++bt)for(var Kt,Yt,Dt=Q[bt],Pt=Dt.length,Ut=A[bt]=new Array(Pt),J=0;J<Pt;++J)(Kt=Dt[J])&&(Yt=z.call(Kt,Kt.__data__,J,Dt))&&("__data__"in Kt&&(Yt.__data__=Kt.__data__),Ut[J]=Yt);return new Te(A,this._parents)},selectAll:function t(z){z="function"==typeof z?function p(z){return function(){var Q=z.apply(this,arguments);return null==Q?[]:(0,_.Z)(Q)}}(z):(0,m.Z)(z);for(var Q=this._groups,ct=Q.length,A=[],bt=[],Dt=0;Dt<ct;++Dt)for(var Kt,Pt=Q[Dt],Ut=Pt.length,Yt=0;Yt<Ut;++Yt)(Kt=Pt[Yt])&&(A.push(z.call(Kt,Kt.__data__,Yt,Pt)),bt.push(Kt));return new Te(A,bt)},selectChild:function u(z){return this.select(null==z?f:function h(z){return function(){return l.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},selectChildren:function I(z){return this.selectAll(null==z?C:function L(z){return function(){return g.call(this.children,z)}}("function"==typeof z?z:(0,d.P)(z)))},filter:function B(z){"function"!=typeof z&&(z=(0,d.Z)(z));for(var Q=this._groups,ct=Q.length,A=new Array(ct),bt=0;bt<ct;++bt)for(var Kt,Dt=Q[bt],Pt=Dt.length,Ut=A[bt]=[],Yt=0;Yt<Pt;++Yt)(Kt=Dt[Yt])&&z.call(Kt,Kt.__data__,Yt,Dt)&&Ut.push(Kt);return new Te(A,this._parents)},data:function st(z,Q){if(!arguments.length)return Array.from(this,et);var ct=Q?nt:G,A=this._parents,bt=this._groups;"function"!=typeof z&&(z=H(z));for(var Dt=bt.length,Pt=new Array(Dt),Ut=new Array(Dt),Kt=new Array(Dt),Yt=0;Yt<Dt;++Yt){var J=A[Yt],dt=bt[Yt],ft=dt.length,mt=(0,_.Z)(z.call(J,J&&J.__data__,Yt,A)),zt=mt.length,$t=Ut[Yt]=new Array(zt),kt=Pt[Yt]=new Array(zt),se=Kt[Yt]=new Array(ft);ct(J,dt,$t,kt,se,mt,Q);for(var Ce,be,O=0,re=0;O<zt;++O)if(Ce=$t[O]){for(O>=re&&(re=O+1);!(be=kt[re])&&++re<zt;);Ce._next=be||null}}return(Pt=new Te(Pt,A))._enter=Ut,Pt._exit=Kt,Pt},enter:function F(){return new Te(this._enter||this._groups.map(M),this._parents)},exit:function K(){return new Te(this._exit||this._groups.map(M),this._parents)},join:function $(z,Q,ct){var A=this.enter(),bt=this,Dt=this.exit();return A="function"==typeof z?z(A):A.append(z+""),null!=Q&&(bt=Q(bt)),null==ct?Dt.remove():ct(Dt),A&&bt?A.merge(bt).order():bt},merge:function it(z){if(!(z instanceof Te))throw new Error("invalid merge");for(var Q=this._groups,ct=z._groups,A=Q.length,Dt=Math.min(A,ct.length),Pt=new Array(A),Ut=0;Ut<Dt;++Ut)for(var ft,Kt=Q[Ut],Yt=ct[Ut],J=Kt.length,dt=Pt[Ut]=new Array(J),mt=0;mt<J;++mt)(ft=Kt[mt]||Yt[mt])&&(dt[mt]=ft);for(;Ut<A;++Ut)Pt[Ut]=Q[Ut];return new Te(Pt,this._parents)},selection:function Pn(){return this},order:function at(){for(var z=this._groups,Q=-1,ct=z.length;++Q<ct;)for(var Pt,A=z[Q],bt=A.length-1,Dt=A[bt];--bt>=0;)(Pt=A[bt])&&(Dt&&4^Pt.compareDocumentPosition(Dt)&&Dt.parentNode.insertBefore(Pt,Dt),Dt=Pt);return this},sort:function X(z){function Q(dt,ft){return dt&&ft?z(dt.__data__,ft.__data__):!dt-!ft}z||(z=W);for(var ct=this._groups,A=ct.length,bt=new Array(A),Dt=0;Dt<A;++Dt){for(var Yt,Pt=ct[Dt],Ut=Pt.length,Kt=bt[Dt]=new Array(Ut),J=0;J<Ut;++J)(Yt=Pt[J])&&(Kt[J]=Yt);Kt.sort(Q)}return new Te(bt,this._parents).order()},call:function q(){var z=arguments[0];return arguments[0]=this,z.apply(null,arguments),this},nodes:function Y(){return Array.from(this)},node:function R(){for(var z=this._groups,Q=0,ct=z.length;Q<ct;++Q)for(var A=z[Q],bt=0,Dt=A.length;bt<Dt;++bt){var Pt=A[bt];if(Pt)return Pt}return null},size:function E(){let z=0;for(const Q of this)++z;return z},empty:function pt(){return!this.node()},each:function St(z){for(var Q=this._groups,ct=0,A=Q.length;ct<A;++ct)for(var Ut,bt=Q[ct],Dt=0,Pt=bt.length;Dt<Pt;++Dt)(Ut=bt[Dt])&&z.call(Ut,Ut.__data__,Dt,bt);return this},attr:function _t(z,Q){var ct=(0,Mt.Z)(z);if(arguments.length<2){var A=this.node();return ct.local?A.getAttributeNS(ct.space,ct.local):A.getAttribute(ct)}return this.each((null==Q?ct.local?Jt:Et:"function"==typeof Q?ct.local?Nt:yt:ct.local?wt:ue)(ct,Q))},style:Xt.Z,property:function ke(z,Q){return arguments.length>1?this.each((null==Q?Ft:"function"==typeof Q?he:Ht)(z,Q)):this.node()[z]},classed:function Oe(z,Q){var ct=Ie(z+"");if(arguments.length<2){for(var A=Lt(this.node()),bt=-1,Dt=ct.length;++bt<Dt;)if(!A.contains(ct[bt]))return!1;return!0}return this.each(("function"==typeof Q?Ee:Q?_e:ye)(ct,Q))},text:function rn(z){return arguments.length?this.each(null==z?Ae:("function"==typeof z?Ve:Ue)(z)):this.node().textContent},html:function Wt(z){return arguments.length?this.each(null==z?xe:("function"==typeof z?Tt:un)(z)):this.node().innerHTML},raise:function me(){return this.each(le)},lower:function Ze(){return this.each(ee)},append:function Tn(z){var Q="function"==typeof z?z:(0,ze.Z)(z);return this.select(function(){return this.appendChild(Q.apply(this,arguments))})},insert:function Oi(z,Q){var ct="function"==typeof z?z:(0,ze.Z)(z),A=null==Q?si:"function"==typeof Q?Q:(0,c.Z)(Q);return this.select(function(){return this.insertBefore(ct.apply(this,arguments),A.apply(this,arguments)||null)})},remove:function _i(){return this.each(gi)},clone:function Pi(z){return this.select(z?tr:Si)},datum:function Mi(z){return arguments.length?this.property("__data__",z):this.node().__data__},on:function En(z,Q,ct){var bt,Pt,A=Qi(z+""),Dt=A.length;if(!(arguments.length<2)){for(Ut=Q?de:Fi,bt=0;bt<Dt;++bt)this.each(Ut(A[bt],Q,ct));return this}var Ut=this.node().__on;if(Ut)for(var J,Kt=0,Yt=Ut.length;Kt<Yt;++Kt)for(bt=0,J=Ut[Kt];bt<Dt;++bt)if((Pt=A[bt]).type===J.type&&Pt.name===J.name)return J.value},dispatch:function Hn(z,Q){return this.each(("function"==typeof Q?an:_n)(z,Q))},[Symbol.iterator]:function*oi(){for(var z=this._groups,Q=0,ct=z.length;Q<ct;++Q)for(var Pt,A=z[Q],bt=0,Dt=A.length;bt<Dt;++bt)(Pt=A[bt])&&(yield Pt)}};const pn=Ri},24476:(w,D,s)=>{"use strict";s.d(D,{S:()=>t,Z:()=>p});var c=s(2442);function x(d){return function(){this.style.removeProperty(d)}}function _(d,l,h){return function(){this.style.setProperty(d,l,h)}}function m(d,l,h){return function(){var f=l.apply(this,arguments);null==f?this.style.removeProperty(d):this.style.setProperty(d,f,h)}}function p(d,l,h){return arguments.length>1?this.each((null==l?x:"function"==typeof l?m:_)(d,l,h??"")):t(this.node(),d)}function t(d,l){return d.style.getPropertyValue(l)||(0,c.Z)(d).getComputedStyle(d,null).getPropertyValue(l)}},29742:(w,D,s)=>{"use strict";function c(){}function x(_){return null==_?c:function(){return this.querySelector(_)}}s.d(D,{Z:()=>x})},32037:(w,D,s)=>{"use strict";function c(){return[]}function x(_){return null==_?c:function(){return this.querySelectorAll(_)}}s.d(D,{Z:()=>x})},75819:(w,D,s)=>{"use strict";function c(x){let _;for(;_=x.sourceEvent;)x=_;return x}s.d(D,{Z:()=>c})},2442:(w,D,s)=>{"use strict";function c(x){return x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView}s.d(D,{Z:()=>c})},73339:(w,D,s)=>{"use strict";s.d(D,{Z:()=>x});var c=s(49194);function x(_,m,p){var t=new c.B7;return t.restart(function(d){t.stop(),_(d+m)},m=null==m?0:+m,p),t}},49194:(w,D,s)=>{"use strict";s.d(D,{B7:()=>L,HT:()=>I,R8:()=>B,zO:()=>g});var p,t,c=0,x=0,_=0,d=0,l=0,h=0,f="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(G){setTimeout(G,17)};function g(){return l||(u(C),l=f.now()+h)}function C(){l=0}function L(){this._call=this._time=this._next=null}function I(G,nt,et){var st=new L;return st.restart(G,nt,et),st}function B(){g(),++c;for(var nt,G=p;G;)(nt=l-G._time)>=0&&G._call.call(null,nt),G=G._next;--c}function M(){l=(d=f.now())+h,c=x=0;try{B()}finally{c=0,function Z(){for(var G,et,nt=p,st=1/0;nt;)nt._call?(st>nt._time&&(st=nt._time),G=nt,nt=nt._next):(et=nt._next,nt._next=null,nt=G?G._next=et:p=et);t=G,H(st)}(),l=0}}function F(){var G=f.now(),nt=G-d;nt>1e3&&(h-=nt,d=G)}function H(G){c||(x&&(x=clearTimeout(x)),G-l>24?(G<1/0&&(x=setTimeout(M,G-f.now()-h)),_&&(_=clearInterval(_))):(_||(d=f.now(),_=setInterval(F,1e3)),c=1,u(M)))}L.prototype=I.prototype={constructor:L,restart:function(G,nt,et){if("function"!=typeof G)throw new TypeError("callback is not a function");et=(null==et?g():+et)+(null==nt?0:+nt),!this._next&&t!==this&&(t?t._next=this:p=this,t=this),this._call=G,this._time=et,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}}},18429:(w,D,s)=>{"use strict";s.r(D),s.d(D,{active:()=>pn,interrupt:()=>Z,transition:()=>_n});var c=s(37853),x=s(25922),_=s(49194),m=s(73339),p=(0,x.Z)("start","end","cancel","interrupt"),t=[];function L(z,Q,ct,A,bt,Dt){var Pt=z.__transition;if(Pt){if(ct in Pt)return}else z.__transition={};!function F(z,Q,ct){var bt,A=z.__transition;function Pt(Yt){var J,dt,ft,mt;if(1!==ct.state)return Kt();for(J in A)if((mt=A[J]).name===ct.name){if(3===mt.state)return(0,m.Z)(Pt);4===mt.state?(mt.state=6,mt.timer.stop(),mt.on.call("interrupt",z,z.__data__,mt.index,mt.group),delete A[J]):+J<Q&&(mt.state=6,mt.timer.stop(),mt.on.call("cancel",z,z.__data__,mt.index,mt.group),delete A[J])}if((0,m.Z)(function(){3===ct.state&&(ct.state=4,ct.timer.restart(Ut,ct.delay,ct.time),Ut(Yt))}),ct.state=2,ct.on.call("start",z,z.__data__,ct.index,ct.group),2===ct.state){for(ct.state=3,bt=new Array(ft=ct.tween.length),J=0,dt=-1;J<ft;++J)(mt=ct.tween[J].value.call(z,z.__data__,ct.index,ct.group))&&(bt[++dt]=mt);bt.length=dt+1}}function Ut(Yt){for(var J=Yt<ct.duration?ct.ease.call(null,Yt/ct.duration):(ct.timer.restart(Kt),ct.state=5,1),dt=-1,ft=bt.length;++dt<ft;)bt[dt].call(z,J);5===ct.state&&(ct.on.call("end",z,z.__data__,ct.index,ct.group),Kt())}function Kt(){for(var Yt in ct.state=6,ct.timer.stop(),delete A[Q],A)return;delete z.__transition}A[Q]=ct,ct.timer=(0,_.HT)(function Dt(Yt){ct.state=1,ct.timer.restart(Pt,ct.delay,ct.time),ct.delay<=Yt&&Pt(Yt-ct.delay)},0,ct.time)}(z,ct,{name:Q,index:A,group:bt,on:p,tween:t,time:Dt.time,delay:Dt.delay,duration:Dt.duration,ease:Dt.ease,timer:null,state:0})}function I(z,Q){var ct=M(z,Q);if(ct.state>0)throw new Error("too late; already scheduled");return ct}function B(z,Q){var ct=M(z,Q);if(ct.state>3)throw new Error("too late; already running");return ct}function M(z,Q){var ct=z.__transition;if(!ct||!(ct=ct[Q]))throw new Error("transition not found");return ct}function Z(z,Q){var A,bt,Pt,ct=z.__transition,Dt=!0;if(ct){for(Pt in Q=null==Q?null:Q+"",ct)(A=ct[Pt]).name===Q?(bt=A.state>2&&A.state<5,A.state=6,A.timer.stop(),A.on.call(bt?"interrupt":"cancel",z,z.__data__,A.index,A.group),delete ct[Pt]):Dt=!1;Dt&&delete z.__transition}}var G=s(75349),nt=s(36175);function et(z,Q){var ct,A;return function(){var bt=B(this,z),Dt=bt.tween;if(Dt!==ct)for(var Pt=0,Ut=(A=ct=Dt).length;Pt<Ut;++Pt)if(A[Pt].name===Q){(A=A.slice()).splice(Pt,1);break}bt.tween=A}}function st(z,Q,ct){var A,bt;if("function"!=typeof ct)throw new Error;return function(){var Dt=B(this,z),Pt=Dt.tween;if(Pt!==A){bt=(A=Pt).slice();for(var Ut={name:Q,value:ct},Kt=0,Yt=bt.length;Kt<Yt;++Kt)if(bt[Kt].name===Q){bt[Kt]=Ut;break}Kt===Yt&&bt.push(Ut)}Dt.tween=bt}}function $(z,Q,ct){var A=z._id;return z.each(function(){var bt=B(this,A);(bt.value||(bt.value={}))[Q]=ct.apply(this,arguments)}),function(bt){return M(bt,A).value[Q]}}var it=s(52786),at=s(6738),X=s(86811),W=s(23096);function q(z,Q){var ct;return("number"==typeof Q?at.Z:Q instanceof it.ZP?X.ZP:(ct=(0,it.ZP)(Q))?(Q=ct,X.ZP):W.Z)(z,Q)}function Y(z){return function(){this.removeAttribute(z)}}function R(z){return function(){this.removeAttributeNS(z.space,z.local)}}function E(z,Q,ct){var A,Dt,bt=ct+"";return function(){var Pt=this.getAttribute(z);return Pt===bt?null:Pt===A?Dt:Dt=Q(A=Pt,ct)}}function pt(z,Q,ct){var A,Dt,bt=ct+"";return function(){var Pt=this.getAttributeNS(z.space,z.local);return Pt===bt?null:Pt===A?Dt:Dt=Q(A=Pt,ct)}}function St(z,Q,ct){var A,bt,Dt;return function(){var Pt,Kt,Ut=ct(this);return null==Ut?void this.removeAttribute(z):(Pt=this.getAttribute(z))===(Kt=Ut+"")?null:Pt===A&&Kt===bt?Dt:(bt=Kt,Dt=Q(A=Pt,Ut))}}function Mt(z,Q,ct){var A,bt,Dt;return function(){var Pt,Kt,Ut=ct(this);return null==Ut?void this.removeAttributeNS(z.space,z.local):(Pt=this.getAttributeNS(z.space,z.local))===(Kt=Ut+"")?null:Pt===A&&Kt===bt?Dt:(bt=Kt,Dt=Q(A=Pt,Ut))}}function Jt(z,Q){return function(ct){this.setAttribute(z,Q.call(this,ct))}}function ue(z,Q){return function(ct){this.setAttributeNS(z.space,z.local,Q.call(this,ct))}}function wt(z,Q){var ct,A;function bt(){var Dt=Q.apply(this,arguments);return Dt!==A&&(ct=(A=Dt)&&ue(z,Dt)),ct}return bt._value=Q,bt}function yt(z,Q){var ct,A;function bt(){var Dt=Q.apply(this,arguments);return Dt!==A&&(ct=(A=Dt)&&Jt(z,Dt)),ct}return bt._value=Q,bt}function _t(z,Q){return function(){I(this,z).delay=+Q.apply(this,arguments)}}function Xt(z,Q){return Q=+Q,function(){I(this,z).delay=Q}}function Ht(z,Q){return function(){B(this,z).duration=+Q.apply(this,arguments)}}function he(z,Q){return Q=+Q,function(){B(this,z).duration=Q}}function Ie(z,Q){if("function"!=typeof Q)throw new Error;return function(){B(this,z).ease=Q}}var qt=s(97905);function Oe(z,Q,ct){var A,bt,Dt=function Ee(z){return(z+"").trim().split(/^|\s+/).every(function(Q){var ct=Q.indexOf(".");return ct>=0&&(Q=Q.slice(0,ct)),!Q||"start"===Q})}(Q)?I:B;return function(){var Pt=Dt(this,z),Ut=Pt.on;Ut!==A&&(bt=(A=Ut).copy()).on(Q,ct),Pt.on=bt}}var rn=s(29742),un=s(32037),Wt=c.ZP.prototype.constructor,me=s(24476);function Ze(z){return function(){this.style.removeProperty(z)}}function gi(z,Q,ct){return function(A){this.style.setProperty(z,Q.call(this,A),ct)}}function _i(z,Q,ct){var A,bt;function Dt(){var Pt=Q.apply(this,arguments);return Pt!==bt&&(A=(bt=Pt)&&gi(z,Pt,ct)),A}return Dt._value=Q,Dt}function vi(z){return function(Q){this.textContent=z.call(this,Q)}}function Qi(z){var Q,ct;function A(){var bt=z.apply(this,arguments);return bt!==ct&&(Q=(ct=bt)&&vi(bt)),Q}return A._value=z,A}var ji=0;function On(z,Q,ct,A){this._groups=z,this._parents=Q,this._name=ct,this._id=A}function _n(z){return(0,c.ZP)().transition(z)}function an(){return++ji}var Hn=c.ZP.prototype;On.prototype=_n.prototype={constructor:On,select:function xe(z){var Q=this._name,ct=this._id;"function"!=typeof z&&(z=(0,rn.Z)(z));for(var A=this._groups,bt=A.length,Dt=new Array(bt),Pt=0;Pt<bt;++Pt)for(var J,dt,Ut=A[Pt],Kt=Ut.length,Yt=Dt[Pt]=new Array(Kt),ft=0;ft<Kt;++ft)(J=Ut[ft])&&(dt=z.call(J,J.__data__,ft,Ut))&&("__data__"in J&&(dt.__data__=J.__data__),Yt[ft]=dt,L(Yt[ft],Q,ct,ft,Yt,M(J,ct)));return new On(Dt,this._parents,Q,ct)},selectAll:function Tt(z){var Q=this._name,ct=this._id;"function"!=typeof z&&(z=(0,un.Z)(z));for(var A=this._groups,bt=A.length,Dt=[],Pt=[],Ut=0;Ut<bt;++Ut)for(var J,Kt=A[Ut],Yt=Kt.length,dt=0;dt<Yt;++dt)if(J=Kt[dt]){for(var mt,ft=z.call(J,J.__data__,dt,Kt),zt=M(J,ct),$t=0,kt=ft.length;$t<kt;++$t)(mt=ft[$t])&&L(mt,Q,ct,$t,ft,zt);Dt.push(ft),Pt.push(J)}return new On(Dt,Pt,Q,ct)},filter:function _e(z){"function"!=typeof z&&(z=(0,qt.Z)(z));for(var Q=this._groups,ct=Q.length,A=new Array(ct),bt=0;bt<ct;++bt)for(var Kt,Dt=Q[bt],Pt=Dt.length,Ut=A[bt]=[],Yt=0;Yt<Pt;++Yt)(Kt=Dt[Yt])&&z.call(Kt,Kt.__data__,Yt,Dt)&&Ut.push(Kt);return new On(A,this._parents,this._name,this._id)},merge:function ye(z){if(z._id!==this._id)throw new Error;for(var Q=this._groups,ct=z._groups,A=Q.length,Dt=Math.min(A,ct.length),Pt=new Array(A),Ut=0;Ut<Dt;++Ut)for(var ft,Kt=Q[Ut],Yt=ct[Ut],J=Kt.length,dt=Pt[Ut]=new Array(J),mt=0;mt<J;++mt)(ft=Kt[mt]||Yt[mt])&&(dt[mt]=ft);for(;Ut<A;++Ut)Pt[Ut]=Q[Ut];return new On(Pt,this._parents,this._name,this._id)},selection:function le(){return new Wt(this._groups,this._parents)},transition:function de(){for(var z=this._name,Q=this._id,ct=an(),A=this._groups,bt=A.length,Dt=0;Dt<bt;++Dt)for(var Kt,Pt=A[Dt],Ut=Pt.length,Yt=0;Yt<Ut;++Yt)if(Kt=Pt[Yt]){var J=M(Kt,Q);L(Kt,z,ct,Yt,Pt,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new On(A,this._parents,z,ct)},call:Hn.call,nodes:Hn.nodes,node:Hn.node,size:Hn.size,empty:Hn.empty,each:Hn.each,on:function Ae(z,Q){var ct=this._id;return arguments.length<2?M(this.node(),ct).on.on(z):this.each(Oe(ct,z,Q))},attr:function Et(z,Q){var ct=(0,nt.Z)(z),A="transform"===ct?G.w:q;return this.attrTween(z,"function"==typeof Q?(ct.local?Mt:St)(ct,A,$(this,"attr."+z,Q)):null==Q?(ct.local?R:Y)(ct):(ct.local?pt:E)(ct,A,Q))},attrTween:function Nt(z,Q){var ct="attr."+z;if(arguments.length<2)return(ct=this.tween(ct))&&ct._value;if(null==Q)return this.tween(ct,null);if("function"!=typeof Q)throw new Error;var A=(0,nt.Z)(z);return this.tween(ct,(A.local?wt:yt)(A,Q))},style:function Oi(z,Q,ct){var A="transform"==(z+="")?G.Y:q;return null==Q?this.styleTween(z,function ee(z,Q){var ct,A,bt;return function(){var Dt=(0,me.S)(this,z),Pt=(this.style.removeProperty(z),(0,me.S)(this,z));return Dt===Pt?null:Dt===ct&&Pt===A?bt:bt=Q(ct=Dt,A=Pt)}}(z,A)).on("end.style."+z,Ze(z)):"function"==typeof Q?this.styleTween(z,function Tn(z,Q,ct){var A,bt,Dt;return function(){var Pt=(0,me.S)(this,z),Ut=ct(this),Kt=Ut+"";return null==Ut&&(this.style.removeProperty(z),Kt=Ut=(0,me.S)(this,z)),Pt===Kt?null:Pt===A&&Kt===bt?Dt:(bt=Kt,Dt=Q(A=Pt,Ut))}}(z,A,$(this,"style."+z,Q))).each(function si(z,Q){var ct,A,bt,Ut,Dt="style."+Q,Pt="end."+Dt;return function(){var Kt=B(this,z),Yt=Kt.on,J=null==Kt.value[Dt]?Ut||(Ut=Ze(Q)):void 0;(Yt!==ct||bt!==J)&&(A=(ct=Yt).copy()).on(Pt,bt=J),Kt.on=A}}(this._id,z)):this.styleTween(z,function ze(z,Q,ct){var A,Dt,bt=ct+"";return function(){var Pt=(0,me.S)(this,z);return Pt===bt?null:Pt===A?Dt:Dt=Q(A=Pt,ct)}}(z,A,Q),ct).on("end.style."+z,null)},styleTween:function Si(z,Q,ct){var A="style."+(z+="");if(arguments.length<2)return(A=this.tween(A))&&A._value;if(null==Q)return this.tween(A,null);if("function"!=typeof Q)throw new Error;return this.tween(A,_i(z,Q,ct??""))},text:function Mi(z){return this.tween("text","function"==typeof z?function Pi(z){return function(){var Q=z(this);this.textContent=Q??""}}($(this,"text",z)):function tr(z){return function(){this.textContent=z}}(null==z?"":z+""))},textTween:function Fi(z){var Q="text";if(arguments.length<1)return(Q=this.tween(Q))&&Q._value;if(null==z)return this.tween(Q,null);if("function"!=typeof z)throw new Error;return this.tween(Q,Qi(z))},remove:function Ve(){return this.on("end.remove",function Ue(z){return function(){var Q=this.parentNode;for(var ct in this.__transition)if(+ct!==z)return;Q&&Q.removeChild(this)}}(this._id))},tween:function K(z,Q){var ct=this._id;if(z+="",arguments.length<2){for(var Pt,A=M(this.node(),ct).tween,bt=0,Dt=A.length;bt<Dt;++bt)if((Pt=A[bt]).name===z)return Pt.value;return null}return this.each((null==Q?et:st)(ct,z,Q))},delay:function Ft(z){var Q=this._id;return arguments.length?this.each(("function"==typeof z?_t:Xt)(Q,z)):M(this.node(),Q).delay},duration:function ke(z){var Q=this._id;return arguments.length?this.each(("function"==typeof z?Ht:he)(Q,z)):M(this.node(),Q).duration},ease:function Lt(z){var Q=this._id;return arguments.length?this.each(Ie(Q,z)):M(this.node(),Q).ease},easeVarying:function Vt(z){if("function"!=typeof z)throw new Error;return this.each(function jt(z,Q){return function(){var ct=Q.apply(this,arguments);if("function"!=typeof ct)throw new Error;B(this,z).ease=ct}}(this._id,z))},end:function En(){var z,Q,ct=this,A=ct._id,bt=ct.size();return new Promise(function(Dt,Pt){var Ut={value:Pt},Kt={value:function(){0==--bt&&Dt()}};ct.each(function(){var Yt=B(this,A),J=Yt.on;J!==z&&((Q=(z=J).copy())._.cancel.push(Ut),Q._.interrupt.push(Ut),Q._.end.push(Kt)),Yt.on=Q}),0===bt&&Dt()})},[Symbol.iterator]:Hn[Symbol.iterator]};var kn={time:null,delay:0,duration:250,ease:s(27065).tw};function Te(z,Q){for(var ct;!(ct=z.__transition)||!(ct=ct[Q]);)if(!(z=z.parentNode))throw new Error(`transition ${Q} not found`);return ct}c.ZP.prototype.interrupt=function H(z){return this.each(function(){Z(this,z)})},c.ZP.prototype.transition=function Ri(z){var Q,ct;z instanceof On?(Q=z._id,z=z._name):(Q=an(),(ct=kn).time=(0,_.zO)(),z=null==z?null:z+"");for(var A=this._groups,bt=A.length,Dt=0;Dt<bt;++Dt)for(var Kt,Pt=A[Dt],Ut=Pt.length,Yt=0;Yt<Ut;++Yt)(Kt=Pt[Yt])&&L(Kt,z,Q,Yt,Pt,ct||Te(Kt,Q));return new On(A,this._parents,z,Q)};var Pn=[null];function pn(z,Q){var A,bt,ct=z.__transition;if(ct)for(bt in Q=null==Q?null:Q+"",ct)if((A=ct[bt]).state>1&&A.name===Q)return new On([[z]],Pn,Q,+bt);return null}},46041:(w,D,s)=>{"use strict";s.r(D),s.d(D,{zoom:()=>H,zoomIdentity:()=>f,zoomTransform:()=>u});var c=s(25922),x=s(56758),_=s(76257),m=s(52016),p=s(29132),t=s(18429);const d=G=>()=>G;function l(G,{sourceEvent:nt,target:et,transform:st,dispatch:K}){Object.defineProperties(this,{type:{value:G,enumerable:!0,configurable:!0},sourceEvent:{value:nt,enumerable:!0,configurable:!0},target:{value:et,enumerable:!0,configurable:!0},transform:{value:st,enumerable:!0,configurable:!0},_:{value:K}})}function h(G,nt,et){this.k=G,this.x=nt,this.y=et}h.prototype={constructor:h,scale:function(G){return 1===G?this:new h(this.k*G,this.x,this.y)},translate:function(G,nt){return 0===G&0===nt?this:new h(this.k,this.x+this.k*G,this.y+this.k*nt)},apply:function(G){return[G[0]*this.k+this.x,G[1]*this.k+this.y]},applyX:function(G){return G*this.k+this.x},applyY:function(G){return G*this.k+this.y},invert:function(G){return[(G[0]-this.x)/this.k,(G[1]-this.y)/this.k]},invertX:function(G){return(G-this.x)/this.k},invertY:function(G){return(G-this.y)/this.k},rescaleX:function(G){return G.copy().domain(G.range().map(this.invertX,this).map(G.invert,G))},rescaleY:function(G){return G.copy().domain(G.range().map(this.invertY,this).map(G.invert,G))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var f=new h(1,0,0);function u(G){for(;!G.__zoom;)if(!(G=G.parentNode))return f;return G.__zoom}function g(G){G.stopImmediatePropagation()}function C(G){G.preventDefault(),G.stopImmediatePropagation()}function L(G){return!(G.ctrlKey&&"wheel"!==G.type||G.button)}function I(){var G=this;return G instanceof SVGElement?(G=G.ownerSVGElement||G).hasAttribute("viewBox")?[[(G=G.viewBox.baseVal).x,G.y],[G.x+G.width,G.y+G.height]]:[[0,0],[G.width.baseVal.value,G.height.baseVal.value]]:[[0,0],[G.clientWidth,G.clientHeight]]}function B(){return this.__zoom||f}function M(G){return-G.deltaY*(1===G.deltaMode?.05:G.deltaMode?1:.002)*(G.ctrlKey?10:1)}function F(){return navigator.maxTouchPoints||"ontouchstart"in this}function Z(G,nt,et){var st=G.invertX(nt[0][0])-et[0][0],K=G.invertX(nt[1][0])-et[1][0],$=G.invertY(nt[0][1])-et[0][1],it=G.invertY(nt[1][1])-et[1][1];return G.translate(K>st?(st+K)/2:Math.min(0,st)||Math.max(0,K),it>$?($+it)/2:Math.min(0,$)||Math.max(0,it))}function H(){var q,Y,R,G=L,nt=I,et=Z,st=M,K=F,$=[0,1/0],it=[[-1/0,-1/0],[1/0,1/0]],at=250,X=_.Z,W=(0,c.Z)("start","zoom","end"),E=500,St=0,Mt=10;function Et(Lt){Lt.property("__zoom",B).on("wheel.zoom",Xt).on("mousedown.zoom",Ft).on("dblclick.zoom",Ht).filter(K).on("touchstart.zoom",he).on("touchmove.zoom",ke).on("touchend.zoom touchcancel.zoom",Ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Jt(Lt,jt){return(jt=Math.max($[0],Math.min($[1],jt)))===Lt.k?Lt:new h(jt,Lt.x,Lt.y)}function ue(Lt,jt,Vt){var qt=jt[0]-Vt[0]*Lt.k,_e=jt[1]-Vt[1]*Lt.k;return qt===Lt.x&&_e===Lt.y?Lt:new h(Lt.k,qt,_e)}function wt(Lt){return[(+Lt[0][0]+ +Lt[1][0])/2,(+Lt[0][1]+ +Lt[1][1])/2]}function yt(Lt,jt,Vt,qt){Lt.on("start.zoom",function(){Nt(this,arguments).event(qt).start()}).on("interrupt.zoom end.zoom",function(){Nt(this,arguments).event(qt).end()}).tween("zoom",function(){var _e=this,ye=arguments,Ee=Nt(_e,ye).event(qt),Oe=nt.apply(_e,ye),Ae=null==Vt?wt(Oe):"function"==typeof Vt?Vt.apply(_e,ye):Vt,Ue=Math.max(Oe[1][0]-Oe[0][0],Oe[1][1]-Oe[0][1]),Ve=_e.__zoom,rn="function"==typeof jt?jt.apply(_e,ye):jt,xe=X(Ve.invert(Ae).concat(Ue/Ve.k),rn.invert(Ae).concat(Ue/rn.k));return function(un){if(1===un)un=rn;else{var Tt=xe(un),Wt=Ue/Tt[2];un=new h(Wt,Ae[0]-Tt[0]*Wt,Ae[1]-Tt[1]*Wt)}Ee.zoom(null,un)}})}function Nt(Lt,jt,Vt){return!Vt&&Lt.__zooming||new _t(Lt,jt)}function _t(Lt,jt){this.that=Lt,this.args=jt,this.active=0,this.sourceEvent=null,this.extent=nt.apply(Lt,jt),this.taps=0}function Xt(Lt,...jt){if(G.apply(this,arguments)){var Vt=Nt(this,jt).event(Lt),qt=this.__zoom,_e=Math.max($[0],Math.min($[1],qt.k*Math.pow(2,st.apply(this,arguments)))),ye=(0,p.Z)(Lt);if(Vt.wheel)(Vt.mouse[0][0]!==ye[0]||Vt.mouse[0][1]!==ye[1])&&(Vt.mouse[1]=qt.invert(Vt.mouse[0]=ye)),clearTimeout(Vt.wheel);else{if(qt.k===_e)return;Vt.mouse=[ye,qt.invert(ye)],(0,t.interrupt)(this),Vt.start()}C(Lt),Vt.wheel=setTimeout(Ee,150),Vt.zoom("mouse",et(ue(Jt(qt,_e),Vt.mouse[0],Vt.mouse[1]),Vt.extent,it))}function Ee(){Vt.wheel=null,Vt.end()}}function Ft(Lt,...jt){if(!R&&G.apply(this,arguments)){var Vt=Nt(this,jt,!0).event(Lt),qt=(0,m.Z)(Lt.view).on("mousemove.zoom",Ae,!0).on("mouseup.zoom",Ue,!0),_e=(0,p.Z)(Lt,ye),ye=Lt.currentTarget,Ee=Lt.clientX,Oe=Lt.clientY;(0,x.Z)(Lt.view),g(Lt),Vt.mouse=[_e,this.__zoom.invert(_e)],(0,t.interrupt)(this),Vt.start()}function Ae(Ve){if(C(Ve),!Vt.moved){var rn=Ve.clientX-Ee,xe=Ve.clientY-Oe;Vt.moved=rn*rn+xe*xe>St}Vt.event(Ve).zoom("mouse",et(ue(Vt.that.__zoom,Vt.mouse[0]=(0,p.Z)(Ve,ye),Vt.mouse[1]),Vt.extent,it))}function Ue(Ve){qt.on("mousemove.zoom mouseup.zoom",null),(0,x.D)(Ve.view,Vt.moved),C(Ve),Vt.event(Ve).end()}}function Ht(Lt,...jt){if(G.apply(this,arguments)){var Vt=this.__zoom,qt=(0,p.Z)(Lt.changedTouches?Lt.changedTouches[0]:Lt,this),_e=Vt.invert(qt),ye=Vt.k*(Lt.shiftKey?.5:2),Ee=et(ue(Jt(Vt,ye),qt,_e),nt.apply(this,jt),it);C(Lt),at>0?(0,m.Z)(this).transition().duration(at).call(yt,Ee,qt,Lt):(0,m.Z)(this).call(Et.transform,Ee,qt,Lt)}}function he(Lt,...jt){if(G.apply(this,arguments)){var ye,Ee,Oe,Ae,Vt=Lt.touches,qt=Vt.length,_e=Nt(this,jt,Lt.changedTouches.length===qt).event(Lt);for(g(Lt),Ee=0;Ee<qt;++Ee)Ae=[Ae=(0,p.Z)(Oe=Vt[Ee],this),this.__zoom.invert(Ae),Oe.identifier],_e.touch0?!_e.touch1&&_e.touch0[2]!==Ae[2]&&(_e.touch1=Ae,_e.taps=0):(_e.touch0=Ae,ye=!0,_e.taps=1+!!q);q&&(q=clearTimeout(q)),ye&&(_e.taps<2&&(Y=Ae[0],q=setTimeout(function(){q=null},E)),(0,t.interrupt)(this),_e.start())}}function ke(Lt,...jt){if(this.__zooming){var ye,Ee,Oe,Ae,Vt=Nt(this,jt).event(Lt),qt=Lt.changedTouches,_e=qt.length;for(C(Lt),ye=0;ye<_e;++ye)Oe=(0,p.Z)(Ee=qt[ye],this),Vt.touch0&&Vt.touch0[2]===Ee.identifier?Vt.touch0[0]=Oe:Vt.touch1&&Vt.touch1[2]===Ee.identifier&&(Vt.touch1[0]=Oe);if(Ee=Vt.that.__zoom,Vt.touch1){var Ue=Vt.touch0[0],Ve=Vt.touch0[1],rn=Vt.touch1[0],xe=Vt.touch1[1],un=(un=rn[0]-Ue[0])*un+(un=rn[1]-Ue[1])*un,Tt=(Tt=xe[0]-Ve[0])*Tt+(Tt=xe[1]-Ve[1])*Tt;Ee=Jt(Ee,Math.sqrt(un/Tt)),Oe=[(Ue[0]+rn[0])/2,(Ue[1]+rn[1])/2],Ae=[(Ve[0]+xe[0])/2,(Ve[1]+xe[1])/2]}else{if(!Vt.touch0)return;Oe=Vt.touch0[0],Ae=Vt.touch0[1]}Vt.zoom("touch",et(ue(Ee,Oe,Ae),Vt.extent,it))}}function Ie(Lt,...jt){if(this.__zooming){var ye,Ee,Vt=Nt(this,jt).event(Lt),qt=Lt.changedTouches,_e=qt.length;for(g(Lt),R&&clearTimeout(R),R=setTimeout(function(){R=null},E),ye=0;ye<_e;++ye)Ee=qt[ye],Vt.touch0&&Vt.touch0[2]===Ee.identifier?delete Vt.touch0:Vt.touch1&&Vt.touch1[2]===Ee.identifier&&delete Vt.touch1;if(Vt.touch1&&!Vt.touch0&&(Vt.touch0=Vt.touch1,delete Vt.touch1),Vt.touch0)Vt.touch0[1]=this.__zoom.invert(Vt.touch0[0]);else if(Vt.end(),2===Vt.taps&&(Ee=(0,p.Z)(Ee,this),Math.hypot(Y[0]-Ee[0],Y[1]-Ee[1])<Mt)){var Oe=(0,m.Z)(this).on("dblclick.zoom");Oe&&Oe.apply(this,arguments)}}}return Et.transform=function(Lt,jt,Vt,qt){var _e=Lt.selection?Lt.selection():Lt;_e.property("__zoom",B),Lt!==_e?yt(Lt,jt,Vt,qt):_e.interrupt().each(function(){Nt(this,arguments).event(qt).start().zoom(null,"function"==typeof jt?jt.apply(this,arguments):jt).end()})},Et.scaleBy=function(Lt,jt,Vt,qt){Et.scaleTo(Lt,function(){var _e=this.__zoom.k,ye="function"==typeof jt?jt.apply(this,arguments):jt;return _e*ye},Vt,qt)},Et.scaleTo=function(Lt,jt,Vt,qt){Et.transform(Lt,function(){var _e=nt.apply(this,arguments),ye=this.__zoom,Ee=null==Vt?wt(_e):"function"==typeof Vt?Vt.apply(this,arguments):Vt,Oe=ye.invert(Ee),Ae="function"==typeof jt?jt.apply(this,arguments):jt;return et(ue(Jt(ye,Ae),Ee,Oe),_e,it)},Vt,qt)},Et.translateBy=function(Lt,jt,Vt,qt){Et.transform(Lt,function(){return et(this.__zoom.translate("function"==typeof jt?jt.apply(this,arguments):jt,"function"==typeof Vt?Vt.apply(this,arguments):Vt),nt.apply(this,arguments),it)},null,qt)},Et.translateTo=function(Lt,jt,Vt,qt,_e){Et.transform(Lt,function(){var ye=nt.apply(this,arguments),Ee=this.__zoom,Oe=null==qt?wt(ye):"function"==typeof qt?qt.apply(this,arguments):qt;return et(f.translate(Oe[0],Oe[1]).scale(Ee.k).translate("function"==typeof jt?-jt.apply(this,arguments):-jt,"function"==typeof Vt?-Vt.apply(this,arguments):-Vt),ye,it)},qt,_e)},_t.prototype={event:function(Lt){return Lt&&(this.sourceEvent=Lt),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Lt,jt){return this.mouse&&"mouse"!==Lt&&(this.mouse[1]=jt.invert(this.mouse[0])),this.touch0&&"touch"!==Lt&&(this.touch0[1]=jt.invert(this.touch0[0])),this.touch1&&"touch"!==Lt&&(this.touch1[1]=jt.invert(this.touch1[0])),this.that.__zoom=jt,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Lt){var jt=(0,m.Z)(this.that).datum();W.call(Lt,this.that,new l(Lt,{sourceEvent:this.sourceEvent,target:Et,type:Lt,transform:this.that.__zoom,dispatch:W}),jt)}},Et.wheelDelta=function(Lt){return arguments.length?(st="function"==typeof Lt?Lt:d(+Lt),Et):st},Et.filter=function(Lt){return arguments.length?(G="function"==typeof Lt?Lt:d(!!Lt),Et):G},Et.touchable=function(Lt){return arguments.length?(K="function"==typeof Lt?Lt:d(!!Lt),Et):K},Et.extent=function(Lt){return arguments.length?(nt="function"==typeof Lt?Lt:d([[+Lt[0][0],+Lt[0][1]],[+Lt[1][0],+Lt[1][1]]]),Et):nt},Et.scaleExtent=function(Lt){return arguments.length?($[0]=+Lt[0],$[1]=+Lt[1],Et):[$[0],$[1]]},Et.translateExtent=function(Lt){return arguments.length?(it[0][0]=+Lt[0][0],it[1][0]=+Lt[1][0],it[0][1]=+Lt[0][1],it[1][1]=+Lt[1][1],Et):[[it[0][0],it[0][1]],[it[1][0],it[1][1]]]},Et.constrain=function(Lt){return arguments.length?(et=Lt,Et):et},Et.duration=function(Lt){return arguments.length?(at=+Lt,Et):at},Et.interpolate=function(Lt){return arguments.length?(X=Lt,Et):X},Et.on=function(){var Lt=W.on.apply(W,arguments);return Lt===W?Et:Lt},Et.clickDistance=function(Lt){return arguments.length?(St=(Lt=+Lt)*Lt,Et):Math.sqrt(St)},Et.tapDistance=function(Lt){return arguments.length?(Mt=+Lt,Et):Mt},Et}u.prototype=h.prototype},59695:(w,D,s)=>{w.exports={graphlib:s(36456),layout:s(14850),debug:s(71914),util:{time:s(11510).time,notime:s(11510).notime},version:s(28126)}},12234:(w,D,s)=>{"use strict";var c=s(45760),x=s(67365);w.exports={run:function _(t){var d="greedy"===t.graph().acyclicer?x(t,function l(h){return function(f){return h.edge(f).weight}}(t)):function m(t){var d=[],l={},h={};return c.forEach(t.nodes(),function f(u){c.has(h,u)||(h[u]=!0,l[u]=!0,c.forEach(t.outEdges(u),function(g){c.has(l,g.w)?d.push(g):f(g.w)}),delete l[u])}),d}(t);c.forEach(d,function(h){var f=t.edge(h);t.removeEdge(h),f.forwardName=h.name,f.reversed=!0,t.setEdge(h.w,h.v,f,c.uniqueId("rev"))})},undo:function p(t){c.forEach(t.edges(),function(d){var l=t.edge(d);if(l.reversed){t.removeEdge(d);var h=l.forwardName;delete l.reversed,delete l.forwardName,t.setEdge(d.w,d.v,l,h)}})}}},79999:(w,D,s)=>{var c=s(45760),x=s(11510);function m(p,t,d,l,h,f){var g=h[t][f-1],C=x.addDummyNode(p,"border",{width:0,height:0,rank:f,borderType:t},d);h[t][f]=C,p.setParent(C,l),g&&p.setEdge(g,C,{weight:1})}w.exports=function _(p){c.forEach(p.children(),function t(d){var l=p.children(d),h=p.node(d);if(l.length&&c.forEach(l,t),c.has(h,"minRank")){h.borderLeft=[],h.borderRight=[];for(var f=h.minRank,u=h.maxRank+1;f<u;++f)m(p,"borderLeft","_bl",d,h,f),m(p,"borderRight","_br",d,h,f)}})}},83870:(w,D,s)=>{"use strict";var c=s(45760);function m(f){c.forEach(f.nodes(),function(u){p(f.node(u))}),c.forEach(f.edges(),function(u){p(f.edge(u))})}function p(f){var u=f.width;f.width=f.height,f.height=u}function d(f){f.y=-f.y}function h(f){var u=f.x;f.x=f.y,f.y=u}w.exports={adjust:function x(f){var u=f.graph().rankdir.toLowerCase();("lr"===u||"rl"===u)&&m(f)},undo:function _(f){var u=f.graph().rankdir.toLowerCase();("bt"===u||"rl"===u)&&function t(f){c.forEach(f.nodes(),function(u){d(f.node(u))}),c.forEach(f.edges(),function(u){var g=f.edge(u);c.forEach(g.points,d),c.has(g,"y")&&d(g)})}(f),("lr"===u||"rl"===u)&&(function l(f){c.forEach(f.nodes(),function(u){h(f.node(u))}),c.forEach(f.edges(),function(u){var g=f.edge(u);c.forEach(g.points,h),c.has(g,"x")&&h(g)})}(f),m(f))}}},3226:w=>{function D(){var x={};x._next=x._prev=x,this._sentinel=x}function s(x){x._prev._next=x._next,x._next._prev=x._prev,delete x._next,delete x._prev}function c(x,_){if("_next"!==x&&"_prev"!==x)return _}w.exports=D,D.prototype.dequeue=function(){var x=this._sentinel,_=x._prev;if(_!==x)return s(_),_},D.prototype.enqueue=function(x){var _=this._sentinel;x._prev&&x._next&&s(x),x._next=_._next,_._next._prev=x,_._next=x,x._prev=_},D.prototype.toString=function(){for(var x=[],_=this._sentinel,m=_._prev;m!==_;)x.push(JSON.stringify(m,c)),m=m._prev;return"["+x.join(", ")+"]"}},71914:(w,D,s)=>{var c=s(45760),x=s(11510),_=s(36456).Graph;w.exports={debugOrdering:function m(p){var t=x.buildLayerMatrix(p),d=new _({compound:!0,multigraph:!0}).setGraph({});return c.forEach(p.nodes(),function(l){d.setNode(l,{label:l}),d.setParent(l,"layer"+p.node(l).rank)}),c.forEach(p.edges(),function(l){d.setEdge(l.v,l.w,{},l.name)}),c.forEach(t,function(l,h){d.setNode("layer"+h,{rank:"same"}),c.reduce(l,function(u,g){return d.setEdge(u,g,{style:"invis"}),g})}),d}}},36456:(w,D,s)=>{var c;try{c=s(85510)}catch{}c||(c=window.graphlib),w.exports=c},67365:(w,D,s)=>{var c=s(45760),x=s(36456).Graph,_=s(3226);w.exports=function p(f,u){if(f.nodeCount()<=1)return[];var g=function l(f,u){var g=new x,C=0,L=0;c.forEach(f.nodes(),function(M){g.setNode(M,{v:M,in:0,out:0})}),c.forEach(f.edges(),function(M){var F=g.edge(M.v,M.w)||0,Z=u(M);g.setEdge(M.v,M.w,F+Z),L=Math.max(L,g.node(M.v).out+=Z),C=Math.max(C,g.node(M.w).in+=Z)});var I=c.range(L+C+3).map(function(){return new _}),B=C+1;return c.forEach(g.nodes(),function(M){h(I,B,g.node(M))}),{graph:g,buckets:I,zeroIdx:B}}(f,u||m),C=function t(f,u,g){for(var B,C=[],L=u[u.length-1],I=u[0];f.nodeCount();){for(;B=I.dequeue();)d(f,u,g,B);for(;B=L.dequeue();)d(f,u,g,B);if(f.nodeCount())for(var M=u.length-2;M>0;--M)if(B=u[M].dequeue()){C=C.concat(d(f,u,g,B,!0));break}}return C}(g.graph,g.buckets,g.zeroIdx);return c.flatten(c.map(C,function(L){return f.outEdges(L.v,L.w)}),!0)};var m=c.constant(1);function d(f,u,g,C,L){var I=L?[]:void 0;return c.forEach(f.inEdges(C.v),function(B){var M=f.edge(B),F=f.node(B.v);L&&I.push({v:B.v,w:B.w}),F.out-=M,h(u,g,F)}),c.forEach(f.outEdges(C.v),function(B){var M=f.edge(B),Z=f.node(B.w);Z.in-=M,h(u,g,Z)}),f.removeNode(C.v),I}function h(f,u,g){g.out?g.in?f[g.out-g.in+u].enqueue(g):f[f.length-1].enqueue(g):f[0].enqueue(g)}},14850:(w,D,s)=>{"use strict";var c=s(45760),x=s(12234),_=s(91496),m=s(94124),p=s(11510).normalizeRanks,t=s(60162),d=s(11510).removeEmptyRanks,l=s(1230),h=s(79999),f=s(83870),u=s(32974),g=s(78226),C=s(11510),L=s(36456).Graph;w.exports=function I(wt,yt){var Nt=yt&&yt.debugTiming?C.time:C.notime;Nt("layout",function(){var _t=Nt("  buildLayoutGraph",function(){return function $(wt){var yt=new L({multigraph:!0,compound:!0}),Nt=ue(wt.graph());return yt.setGraph(c.merge({},Z,Jt(Nt,F),c.pick(Nt,H))),c.forEach(wt.nodes(),function(_t){var Xt=ue(wt.node(_t));yt.setNode(_t,c.defaults(Jt(Xt,G),nt)),yt.setParent(_t,wt.parent(_t))}),c.forEach(wt.edges(),function(_t){var Xt=ue(wt.edge(_t));yt.setEdge(_t,c.merge({},st,Jt(Xt,et),c.pick(Xt,K)))}),yt}(wt)});Nt("  runLayout",function(){!function B(wt,yt){yt("    makeSpaceForEdgeLabels",function(){!function it(wt){var yt=wt.graph();yt.ranksep/=2,c.forEach(wt.edges(),function(Nt){var _t=wt.edge(Nt);_t.minlen*=2,"c"!==_t.labelpos.toLowerCase()&&("TB"===yt.rankdir||"BT"===yt.rankdir?_t.width+=_t.labeloffset:_t.height+=_t.labeloffset)})}(wt)}),yt("    removeSelfEdges",function(){!function St(wt){c.forEach(wt.edges(),function(yt){if(yt.v===yt.w){var Nt=wt.node(yt.v);Nt.selfEdges||(Nt.selfEdges=[]),Nt.selfEdges.push({e:yt,label:wt.edge(yt)}),wt.removeEdge(yt)}})}(wt)}),yt("    acyclic",function(){x.run(wt)}),yt("    nestingGraph.run",function(){l.run(wt)}),yt("    rank",function(){m(C.asNonCompoundGraph(wt))}),yt("    injectEdgeLabelProxies",function(){!function at(wt){c.forEach(wt.edges(),function(yt){var Nt=wt.edge(yt);if(Nt.width&&Nt.height){var _t=wt.node(yt.v),Xt=wt.node(yt.w);C.addDummyNode(wt,"edge-proxy",{rank:(Xt.rank-_t.rank)/2+_t.rank,e:yt},"_ep")}})}(wt)}),yt("    removeEmptyRanks",function(){d(wt)}),yt("    nestingGraph.cleanup",function(){l.cleanup(wt)}),yt("    normalizeRanks",function(){p(wt)}),yt("    assignRankMinMax",function(){!function X(wt){var yt=0;c.forEach(wt.nodes(),function(Nt){var _t=wt.node(Nt);_t.borderTop&&(_t.minRank=wt.node(_t.borderTop).rank,_t.maxRank=wt.node(_t.borderBottom).rank,yt=c.max(yt,_t.maxRank))}),wt.graph().maxRank=yt}(wt)}),yt("    removeEdgeLabelProxies",function(){!function W(wt){c.forEach(wt.nodes(),function(yt){var Nt=wt.node(yt);"edge-proxy"===Nt.dummy&&(wt.edge(Nt.e).labelRank=Nt.rank,wt.removeNode(yt))})}(wt)}),yt("    normalize.run",function(){_.run(wt)}),yt("    parentDummyChains",function(){t(wt)}),yt("    addBorderSegments",function(){h(wt)}),yt("    order",function(){u(wt)}),yt("    insertSelfEdges",function(){!function Mt(wt){var yt=C.buildLayerMatrix(wt);c.forEach(yt,function(Nt){var _t=0;c.forEach(Nt,function(Xt,Ft){var Ht=wt.node(Xt);Ht.order=Ft+_t,c.forEach(Ht.selfEdges,function(he){C.addDummyNode(wt,"selfedge",{width:he.label.width,height:he.label.height,rank:Ht.rank,order:Ft+ ++_t,e:he.e,label:he.label},"_se")}),delete Ht.selfEdges})})}(wt)}),yt("    adjustCoordinateSystem",function(){f.adjust(wt)}),yt("    position",function(){g(wt)}),yt("    positionSelfEdges",function(){!function Et(wt){c.forEach(wt.nodes(),function(yt){var Nt=wt.node(yt);if("selfedge"===Nt.dummy){var _t=wt.node(Nt.e.v),Xt=_t.x+_t.width/2,Ft=_t.y,Ht=Nt.x-Xt,he=_t.height/2;wt.setEdge(Nt.e,Nt.label),wt.removeNode(yt),Nt.label.points=[{x:Xt+2*Ht/3,y:Ft-he},{x:Xt+5*Ht/6,y:Ft-he},{x:Xt+Ht,y:Ft},{x:Xt+5*Ht/6,y:Ft+he},{x:Xt+2*Ht/3,y:Ft+he}],Nt.label.x=Nt.x,Nt.label.y=Nt.y}})}(wt)}),yt("    removeBorderNodes",function(){!function pt(wt){c.forEach(wt.nodes(),function(yt){if(wt.children(yt).length){var Nt=wt.node(yt),_t=wt.node(Nt.borderTop),Xt=wt.node(Nt.borderBottom),Ft=wt.node(c.last(Nt.borderLeft)),Ht=wt.node(c.last(Nt.borderRight));Nt.width=Math.abs(Ht.x-Ft.x),Nt.height=Math.abs(Xt.y-_t.y),Nt.x=Ft.x+Nt.width/2,Nt.y=_t.y+Nt.height/2}}),c.forEach(wt.nodes(),function(yt){"border"===wt.node(yt).dummy&&wt.removeNode(yt)})}(wt)}),yt("    normalize.undo",function(){_.undo(wt)}),yt("    fixupEdgeLabelCoords",function(){!function R(wt){c.forEach(wt.edges(),function(yt){var Nt=wt.edge(yt);if(c.has(Nt,"x"))switch(("l"===Nt.labelpos||"r"===Nt.labelpos)&&(Nt.width-=Nt.labeloffset),Nt.labelpos){case"l":Nt.x-=Nt.width/2+Nt.labeloffset;break;case"r":Nt.x+=Nt.width/2+Nt.labeloffset}})}(wt)}),yt("    undoCoordinateSystem",function(){f.undo(wt)}),yt("    translateGraph",function(){!function q(wt){var yt=Number.POSITIVE_INFINITY,Nt=0,_t=Number.POSITIVE_INFINITY,Xt=0,Ft=wt.graph(),Ht=Ft.marginx||0,he=Ft.marginy||0;function ke(Ie){var Lt=Ie.x,jt=Ie.y,Vt=Ie.width,qt=Ie.height;yt=Math.min(yt,Lt-Vt/2),Nt=Math.max(Nt,Lt+Vt/2),_t=Math.min(_t,jt-qt/2),Xt=Math.max(Xt,jt+qt/2)}c.forEach(wt.nodes(),function(Ie){ke(wt.node(Ie))}),c.forEach(wt.edges(),function(Ie){var Lt=wt.edge(Ie);c.has(Lt,"x")&&ke(Lt)}),yt-=Ht,_t-=he,c.forEach(wt.nodes(),function(Ie){var Lt=wt.node(Ie);Lt.x-=yt,Lt.y-=_t}),c.forEach(wt.edges(),function(Ie){var Lt=wt.edge(Ie);c.forEach(Lt.points,function(jt){jt.x-=yt,jt.y-=_t}),c.has(Lt,"x")&&(Lt.x-=yt),c.has(Lt,"y")&&(Lt.y-=_t)}),Ft.width=Nt-yt+Ht,Ft.height=Xt-_t+he}(wt)}),yt("    assignNodeIntersects",function(){!function Y(wt){c.forEach(wt.edges(),function(yt){var Ft,Ht,Nt=wt.edge(yt),_t=wt.node(yt.v),Xt=wt.node(yt.w);Nt.points?(Ft=Nt.points[0],Ht=Nt.points[Nt.points.length-1]):(Nt.points=[],Ft=Xt,Ht=_t),Nt.points.unshift(C.intersectRect(_t,Ft)),Nt.points.push(C.intersectRect(Xt,Ht))})}(wt)}),yt("    reversePoints",function(){!function E(wt){c.forEach(wt.edges(),function(yt){var Nt=wt.edge(yt);Nt.reversed&&Nt.points.reverse()})}(wt)}),yt("    acyclic.undo",function(){x.undo(wt)})}(_t,Nt)}),Nt("  updateInputGraph",function(){!function M(wt,yt){c.forEach(wt.nodes(),function(Nt){var _t=wt.node(Nt),Xt=yt.node(Nt);_t&&(_t.x=Xt.x,_t.y=Xt.y,yt.children(Nt).length&&(_t.width=Xt.width,_t.height=Xt.height))}),c.forEach(wt.edges(),function(Nt){var _t=wt.edge(Nt),Xt=yt.edge(Nt);_t.points=Xt.points,c.has(Xt,"x")&&(_t.x=Xt.x,_t.y=Xt.y)}),wt.graph().width=yt.graph().width,wt.graph().height=yt.graph().height}(wt,_t)})})};var F=["nodesep","edgesep","ranksep","marginx","marginy"],Z={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},H=["acyclicer","ranker","rankdir","align"],G=["width","height"],nt={width:0,height:0},et=["minlen","weight","width","height","labeloffset"],st={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},K=["labelpos"];function Jt(wt,yt){return c.mapValues(c.pick(wt,yt),Number)}function ue(wt){var yt={};return c.forEach(wt,function(Nt,_t){yt[_t.toLowerCase()]=Nt}),yt}},45760:(w,D,s)=>{var c;try{c={cloneDeep:s(90733),constant:s(76684),defaults:s(28800),each:s(35474),filter:s(35281),find:s(62516),flatten:s(22274),forEach:s(89851),forIn:s(41176),has:s(54842),isUndefined:s(34235),last:s(25809),map:s(19984),mapValues:s(10203),max:s(18176),merge:s(80567),min:s(29439),minBy:s(29525),now:s(31710),pick:s(16372),range:s(90361),reduce:s(81337),sortBy:s(12906),uniqueId:s(51541),values:s(90377),zipObject:s(21617)}}catch{}c||(c=window._),w.exports=c},1230:(w,D,s)=>{var c=s(45760),x=s(11510);function m(l,h,f,u,g,C,L){var I=l.children(L);if(I.length){var B=x.addBorderNode(l,"_bt"),M=x.addBorderNode(l,"_bb"),F=l.node(L);l.setParent(B,L),F.borderTop=B,l.setParent(M,L),F.borderBottom=M,c.forEach(I,function(Z){m(l,h,f,u,g,C,Z);var H=l.node(Z),G=H.borderTop?H.borderTop:Z,nt=H.borderBottom?H.borderBottom:Z,et=H.borderTop?u:2*u,st=G!==nt?1:g-C[L]+1;l.setEdge(B,G,{weight:et,minlen:st,nestingEdge:!0}),l.setEdge(nt,M,{weight:et,minlen:st,nestingEdge:!0})}),l.parent(L)||l.setEdge(h,B,{weight:0,minlen:g+C[L]})}else L!==h&&l.setEdge(h,L,{weight:0,minlen:f})}w.exports={run:function _(l){var h=x.addDummyNode(l,"root",{},"_root"),f=function p(l){var h={};function f(u,g){var C=l.children(u);C&&C.length&&c.forEach(C,function(L){f(L,g+1)}),h[u]=g}return c.forEach(l.children(),function(u){f(u,1)}),h}(l),u=c.max(c.values(f))-1,g=2*u+1;l.graph().nestingRoot=h,c.forEach(l.edges(),function(L){l.edge(L).minlen*=g});var C=function t(l){return c.reduce(l.edges(),function(h,f){return h+l.edge(f).weight},0)}(l)+1;c.forEach(l.children(),function(L){m(l,h,g,C,u,f,L)}),l.graph().nodeRankFactor=g},cleanup:function d(l){var h=l.graph();l.removeNode(h.nestingRoot),delete h.nestingRoot,c.forEach(l.edges(),function(f){l.edge(f).nestingEdge&&l.removeEdge(f)})}}},91496:(w,D,s)=>{"use strict";var c=s(45760),x=s(11510);w.exports={run:function _(t){t.graph().dummyChains=[],c.forEach(t.edges(),function(d){!function m(t,d){var l=d.v,h=t.node(l).rank,f=d.w,u=t.node(f).rank,g=d.name,C=t.edge(d),L=C.labelRank;if(u!==h+1){var I,B,M;for(t.removeEdge(d),M=0,++h;h<u;++M,++h)C.points=[],I=x.addDummyNode(t,"edge",B={width:0,height:0,edgeLabel:C,edgeObj:d,rank:h},"_d"),h===L&&(B.width=C.width,B.height=C.height,B.dummy="edge-label",B.labelpos=C.labelpos),t.setEdge(l,I,{weight:C.weight},g),0===M&&t.graph().dummyChains.push(I),l=I;t.setEdge(l,f,{weight:C.weight},g)}}(t,d)})},undo:function p(t){c.forEach(t.graph().dummyChains,function(d){var f,l=t.node(d),h=l.edgeLabel;for(t.setEdge(l.edgeObj,h);l.dummy;)f=t.successors(d)[0],t.removeNode(d),h.points.push({x:l.x,y:l.y}),"edge-label"===l.dummy&&(h.x=l.x,h.y=l.y,h.width=l.width,h.height=l.height),l=t.node(d=f)})}}},33034:(w,D,s)=>{var c=s(45760);w.exports=function x(_,m,p){var d,t={};c.forEach(p,function(l){for(var f,u,h=_.parent(l);h;){if((f=_.parent(h))?(u=t[f],t[f]=h):(u=d,d=h),u&&u!==h)return void m.setEdge(u,h);h=f}})}},81323:(w,D,s)=>{var c=s(45760);w.exports=function x(_,m){return c.map(m,function(p){var t=_.inEdges(p);if(t.length){var d=c.reduce(t,function(l,h){var f=_.edge(h),u=_.node(h.v);return{sum:l.sum+f.weight*u.order,weight:l.weight+f.weight}},{sum:0,weight:0});return{v:p,barycenter:d.sum/d.weight,weight:d.weight}}return{v:p}})}},1686:(w,D,s)=>{var c=s(45760),x=s(36456).Graph;w.exports=function _(p,t,d){var l=function m(p){for(var t;p.hasNode(t=c.uniqueId("_root")););return t}(p),h=new x({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(f){return p.node(f)});return c.forEach(p.nodes(),function(f){var u=p.node(f),g=p.parent(f);(u.rank===t||u.minRank<=t&&t<=u.maxRank)&&(h.setNode(f),h.setParent(f,g||l),c.forEach(p[d](f),function(C){var L=C.v===f?C.w:C.v,I=h.edge(L,f),B=c.isUndefined(I)?0:I.weight;h.setEdge(L,f,{weight:p.edge(C).weight+B})}),c.has(u,"minRank")&&h.setNode(f,{borderLeft:u.borderLeft[t],borderRight:u.borderRight[t]}))}),h}},18796:(w,D,s)=>{"use strict";var c=s(45760);function _(m,p,t){for(var d=c.zipObject(t,c.map(t,function(C,L){return L})),l=c.flatten(c.map(p,function(C){return c.sortBy(c.map(m.outEdges(C),function(L){return{pos:d[L.w],weight:m.edge(L).weight}}),"pos")}),!0),h=1;h<t.length;)h<<=1;var f=2*h-1;h-=1;var u=c.map(new Array(f),function(){return 0}),g=0;return c.forEach(l.forEach(function(C){var L=C.pos+h;u[L]+=C.weight;for(var I=0;L>0;)L%2&&(I+=u[L+1]),u[L=L-1>>1]+=C.weight;g+=C.weight*I})),g}w.exports=function x(m,p){for(var t=0,d=1;d<p.length;++d)t+=_(m,p[d-1],p[d]);return t}},32974:(w,D,s)=>{"use strict";var c=s(45760),x=s(49402),_=s(18796),m=s(61057),p=s(1686),t=s(33034),d=s(36456).Graph,l=s(11510);function f(C,L,I){return c.map(L,function(B){return p(C,B,I)})}function u(C,L){var I=new d;c.forEach(C,function(B){var M=B.graph().root,F=m(B,M,I,L);c.forEach(F.vs,function(Z,H){B.node(Z).order=H}),t(B,I,F.vs)})}function g(C,L){c.forEach(L,function(I){c.forEach(I,function(B,M){C.node(B).order=M})})}w.exports=function h(C){var L=l.maxRank(C),I=f(C,c.range(1,L+1),"inEdges"),B=f(C,c.range(L-1,-1,-1),"outEdges"),M=x(C);g(C,M);for(var Z,F=Number.POSITIVE_INFINITY,H=0,G=0;G<4;++H,++G){u(H%2?I:B,H%4>=2),M=l.buildLayerMatrix(C);var nt=_(C,M);nt<F&&(G=0,Z=c.cloneDeep(M),F=nt)}g(C,Z)}},49402:(w,D,s)=>{"use strict";var c=s(45760);w.exports=function x(_){var m={},p=c.filter(_.nodes(),function(f){return!_.children(f).length}),t=c.max(c.map(p,function(f){return _.node(f).rank})),d=c.map(c.range(t+1),function(){return[]}),h=c.sortBy(p,function(f){return _.node(f).rank});return c.forEach(h,function l(f){if(!c.has(m,f)){m[f]=!0;var u=_.node(f);d[u.rank].push(f),c.forEach(_.successors(f),l)}}),d}},83826:(w,D,s)=>{"use strict";var c=s(45760);w.exports=function x(p,t){var d={};return c.forEach(p,function(h,f){var u=d[h.v]={indegree:0,in:[],out:[],vs:[h.v],i:f};c.isUndefined(h.barycenter)||(u.barycenter=h.barycenter,u.weight=h.weight)}),c.forEach(t.edges(),function(h){var f=d[h.v],u=d[h.w];!c.isUndefined(f)&&!c.isUndefined(u)&&(u.indegree++,f.out.push(d[h.w]))}),function _(p){var t=[];function d(f){return function(u){u.merged||(c.isUndefined(u.barycenter)||c.isUndefined(f.barycenter)||u.barycenter>=f.barycenter)&&function m(p,t){var d=0,l=0;p.weight&&(d+=p.barycenter*p.weight,l+=p.weight),t.weight&&(d+=t.barycenter*t.weight,l+=t.weight),p.vs=t.vs.concat(p.vs),p.barycenter=d/l,p.weight=l,p.i=Math.min(t.i,p.i),t.merged=!0}(f,u)}}function l(f){return function(u){u.in.push(f),0==--u.indegree&&p.push(u)}}for(;p.length;){var h=p.pop();t.push(h),c.forEach(h.in.reverse(),d(h)),c.forEach(h.out,l(h))}return c.map(c.filter(t,function(f){return!f.merged}),function(f){return c.pick(f,["vs","i","barycenter","weight"])})}(c.filter(d,function(h){return!h.indegree}))}},61057:(w,D,s)=>{var c=s(45760),x=s(81323),_=s(83826),m=s(93803);w.exports=function p(l,h,f,u){var g=l.children(h),C=l.node(h),L=C?C.borderLeft:void 0,I=C?C.borderRight:void 0,B={};L&&(g=c.filter(g,function(nt){return nt!==L&&nt!==I}));var M=x(l,g);c.forEach(M,function(nt){if(l.children(nt.v).length){var et=p(l,nt.v,f,u);B[nt.v]=et,c.has(et,"barycenter")&&function d(l,h){c.isUndefined(l.barycenter)?(l.barycenter=h.barycenter,l.weight=h.weight):(l.barycenter=(l.barycenter*l.weight+h.barycenter*h.weight)/(l.weight+h.weight),l.weight+=h.weight)}(nt,et)}});var F=_(M,f);!function t(l,h){c.forEach(l,function(f){f.vs=c.flatten(f.vs.map(function(u){return h[u]?h[u].vs:u}),!0)})}(F,B);var Z=m(F,u);if(L&&(Z.vs=c.flatten([L,Z.vs,I],!0),l.predecessors(L).length)){var H=l.node(l.predecessors(L)[0]),G=l.node(l.predecessors(I)[0]);c.has(Z,"barycenter")||(Z.barycenter=0,Z.weight=0),Z.barycenter=(Z.barycenter*Z.weight+H.order+G.order)/(Z.weight+2),Z.weight+=2}return Z}},93803:(w,D,s)=>{var c=s(45760),x=s(11510);function m(t,d,l){for(var h;d.length&&(h=c.last(d)).i<=l;)d.pop(),t.push(h.vs),l++;return l}w.exports=function _(t,d){var l=x.partition(t,function(B){return c.has(B,"barycenter")}),h=l.lhs,f=c.sortBy(l.rhs,function(B){return-B.i}),u=[],g=0,C=0,L=0;h.sort(function p(t){return function(d,l){return d.barycenter<l.barycenter?-1:d.barycenter>l.barycenter?1:t?l.i-d.i:d.i-l.i}}(!!d)),L=m(u,f,L),c.forEach(h,function(B){L+=B.vs.length,u.push(B.vs),g+=B.barycenter*B.weight,C+=B.weight,L=m(u,f,L)});var I={vs:c.flatten(u,!0)};return C&&(I.barycenter=g/C,I.weight=C),I}},60162:(w,D,s)=>{var c=s(45760);w.exports=function x(p){var t=function m(p){var t={},d=0;return c.forEach(p.children(),function l(h){var f=d;c.forEach(p.children(h),l),t[h]={low:f,lim:d++}}),t}(p);c.forEach(p.graph().dummyChains,function(d){for(var l=p.node(d),h=l.edgeObj,f=function _(p,t,d,l){var C,L,h=[],f=[],u=Math.min(t[d].low,t[l].low),g=Math.max(t[d].lim,t[l].lim);C=d;do{C=p.parent(C),h.push(C)}while(C&&(t[C].low>u||g>t[C].lim));for(L=C,C=l;(C=p.parent(C))!==L;)f.push(C);return{path:h.concat(f.reverse()),lca:L}}(p,t,h.v,h.w),u=f.path,g=f.lca,C=0,L=u[C],I=!0;d!==h.w;){if(l=p.node(d),I){for(;(L=u[C])!==g&&p.node(L).maxRank<l.rank;)C++;L===g&&(I=!1)}if(!I){for(;C<u.length-1&&p.node(L=u[C+1]).minRank<=l.rank;)C++;L=u[C]}p.setParent(d,L),d=p.successors(d)[0]}})}},54058:(w,D,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(11510);function m(F,Z){var H={};return c.reduce(Z,function G(nt,et){var st=0,K=0,$=nt.length,it=c.last(et);return c.forEach(et,function(at,X){var W=function t(F,Z){if(F.node(Z).dummy)return c.find(F.predecessors(Z),function(H){return F.node(H).dummy})}(F,at),q=W?F.node(W).order:$;(W||at===it)&&(c.forEach(et.slice(K,X+1),function(Y){c.forEach(F.predecessors(Y),function(R){var E=F.node(R),pt=E.order;(pt<st||q<pt)&&(!E.dummy||!F.node(Y).dummy)&&d(H,R,Y)})}),K=X+1,st=q)}),et}),H}function p(F,Z){var H={};function G(et,st,K,$,it){var at;c.forEach(c.range(st,K),function(X){F.node(at=et[X]).dummy&&c.forEach(F.predecessors(at),function(W){var q=F.node(W);q.dummy&&(q.order<$||q.order>it)&&d(H,W,at)})})}return c.reduce(Z,function nt(et,st){var $,K=-1,it=0;return c.forEach(st,function(at,X){if("border"===F.node(at).dummy){var W=F.predecessors(at);W.length&&($=F.node(W[0]).order,G(st,it,X,K,$),it=X,K=$)}G(st,it,st.length,$,et.length)}),st}),H}function d(F,Z,H){if(Z>H){var G=Z;Z=H,H=G}var nt=F[Z];nt||(F[Z]=nt={}),nt[H]=!0}function l(F,Z,H){if(Z>H){var G=Z;Z=H,H=G}return c.has(F[Z],H)}function h(F,Z,H,G){var nt={},et={},st={};return c.forEach(Z,function(K){c.forEach(K,function($,it){nt[$]=$,et[$]=$,st[$]=it})}),c.forEach(Z,function(K){var $=-1;c.forEach(K,function(it){var at=G(it);if(at.length)for(var X=((at=c.sortBy(at,function(R){return st[R]})).length-1)/2,W=Math.floor(X),q=Math.ceil(X);W<=q;++W){var Y=at[W];et[it]===it&&$<st[Y]&&!l(H,it,Y)&&(et[Y]=it,et[it]=nt[it]=nt[Y],$=st[Y])}})}),{root:nt,align:et}}function f(F,Z,H,G,nt){var et={},st=function u(F,Z,H,G){var nt=new x,et=F.graph(),st=function B(F,Z,H){return function(G,nt,et){var it,st=G.node(nt),K=G.node(et),$=0;if($+=st.width/2,c.has(st,"labelpos"))switch(st.labelpos.toLowerCase()){case"l":it=-st.width/2;break;case"r":it=st.width/2}if(it&&($+=H?it:-it),it=0,$+=(st.dummy?Z:F)/2,$+=(K.dummy?Z:F)/2,$+=K.width/2,c.has(K,"labelpos"))switch(K.labelpos.toLowerCase()){case"l":it=K.width/2;break;case"r":it=-K.width/2}return it&&($+=H?it:-it),it=0,$}}(et.nodesep,et.edgesep,G);return c.forEach(Z,function(K){var $;c.forEach(K,function(it){var at=H[it];if(nt.setNode(at),$){var X=H[$],W=nt.edge(X,at);nt.setEdge(X,at,Math.max(st(F,it,$),W||0))}$=it})}),nt}(F,Z,H,nt),K=nt?"borderLeft":"borderRight";function $(X,W){for(var q=st.nodes(),Y=q.pop(),R={};Y;)R[Y]?X(Y):(R[Y]=!0,q.push(Y),q=q.concat(W(Y))),Y=q.pop()}return $(function it(X){et[X]=st.inEdges(X).reduce(function(W,q){return Math.max(W,et[q.v]+st.edge(q))},0)},st.predecessors.bind(st)),$(function at(X){var W=st.outEdges(X).reduce(function(Y,R){return Math.min(Y,et[R.w]-st.edge(R))},Number.POSITIVE_INFINITY),q=F.node(X);W!==Number.POSITIVE_INFINITY&&q.borderType!==K&&(et[X]=Math.max(et[X],W))},st.successors.bind(st)),c.forEach(G,function(X){et[X]=et[H[X]]}),et}function g(F,Z){return c.minBy(c.values(Z),function(H){var G=Number.NEGATIVE_INFINITY,nt=Number.POSITIVE_INFINITY;return c.forIn(H,function(et,st){var K=function M(F,Z){return F.node(Z).width}(F,st)/2;G=Math.max(et+K,G),nt=Math.min(et-K,nt)}),G-nt})}function C(F,Z){var H=c.values(Z),G=c.min(H),nt=c.max(H);c.forEach(["u","d"],function(et){c.forEach(["l","r"],function(st){var it,K=et+st,$=F[K];if($!==Z){var at=c.values($);(it="l"===st?G-c.min(at):nt-c.max(at))&&(F[K]=c.mapValues($,function(X){return X+it}))}})})}function L(F,Z){return c.mapValues(F.ul,function(H,G){if(Z)return F[Z.toLowerCase()][G];var nt=c.sortBy(c.map(F,G));return(nt[1]+nt[2])/2})}w.exports={positionX:function I(F){var nt,Z=_.buildLayerMatrix(F),H=c.merge(m(F,Z),p(F,Z)),G={};c.forEach(["u","d"],function(st){nt="u"===st?Z:c.values(Z).reverse(),c.forEach(["l","r"],function(K){"r"===K&&(nt=c.map(nt,function(X){return c.values(X).reverse()}));var $=("u"===st?F.predecessors:F.successors).bind(F),it=h(0,nt,H,$),at=f(F,nt,it.root,it.align,"r"===K);"r"===K&&(at=c.mapValues(at,function(X){return-X})),G[st+K]=at})});var et=g(F,G);return C(G,et),L(G,F.graph().align)},findType1Conflicts:m,findType2Conflicts:p,addConflict:d,hasConflict:l,verticalAlignment:h,horizontalCompaction:f,alignCoordinates:C,findSmallestWidthAlignment:g,balance:L}},78226:(w,D,s)=>{"use strict";var c=s(45760),x=s(11510),_=s(54058).positionX;w.exports=function m(t){(function p(t){var d=x.buildLayerMatrix(t),l=t.graph().ranksep,h=0;c.forEach(d,function(f){var u=c.max(c.map(f,function(g){return t.node(g).height}));c.forEach(f,function(g){t.node(g).y=h+u/2}),h+=u+l})})(t=x.asNonCompoundGraph(t)),c.forEach(_(t),function(d,l){t.node(l).x=d})}},96632:(w,D,s)=>{"use strict";var c=s(45760),x=s(36456).Graph,_=s(1916).slack;function p(l,h){return c.forEach(l.nodes(),function f(u){c.forEach(h.nodeEdges(u),function(g){var C=g.v,L=u===C?g.w:C;!l.hasNode(L)&&!_(h,g)&&(l.setNode(L,{}),l.setEdge(u,L,{}),f(L))})}),l.nodeCount()}function t(l,h){return c.minBy(h.edges(),function(f){if(l.hasNode(f.v)!==l.hasNode(f.w))return _(h,f)})}function d(l,h,f){c.forEach(l.nodes(),function(u){h.node(u).rank+=f})}w.exports=function m(l){var g,C,h=new x({directed:!1}),f=l.nodes()[0],u=l.nodeCount();for(h.setNode(f,{});p(h,l)<u;)g=t(h,l),C=h.hasNode(g.v)?_(l,g):-_(l,g),d(h,l,C);return h}},94124:(w,D,s)=>{"use strict";var x=s(1916).longestPath,_=s(96632),m=s(63804);w.exports=function p(h){switch(h.graph().ranker){case"network-simplex":default:!function l(h){m(h)}(h);break;case"tight-tree":!function d(h){x(h),_(h)}(h);break;case"longest-path":t(h)}};var t=x},63804:(w,D,s)=>{"use strict";var c=s(45760),x=s(96632),_=s(1916).slack,m=s(1916).longestPath,p=s(36456).alg.preorder,t=s(36456).alg.postorder,d=s(11510).simplify;function l(H){H=d(H),m(H);var nt,G=x(H);for(g(G),h(G,H);nt=L(G);)B(G,H,nt,I(G,H,nt))}function h(H,G){var nt=t(H,H.nodes());nt=nt.slice(0,nt.length-1),c.forEach(nt,function(et){!function f(H,G,nt){var et=H.node(nt);H.edge(nt,et.parent).cutvalue=u(H,G,nt)}(H,G,et)})}function u(H,G,nt){var st=H.node(nt).parent,K=!0,$=G.edge(nt,st),it=0;return $||(K=!1,$=G.edge(st,nt)),it=$.weight,c.forEach(G.nodeEdges(nt),function(at){var X=at.v===nt,W=X?at.w:at.v;if(W!==st){var q=X===K,Y=G.edge(at).weight;if(it+=q?Y:-Y,function F(H,G,nt){return H.hasEdge(G,nt)}(H,nt,W)){var R=H.edge(nt,W).cutvalue;it+=q?-R:R}}}),it}function g(H,G){arguments.length<2&&(G=H.nodes()[0]),C(H,{},1,G)}function C(H,G,nt,et,st){var K=nt,$=H.node(et);return G[et]=!0,c.forEach(H.neighbors(et),function(it){c.has(G,it)||(nt=C(H,G,nt,it,et))}),$.low=K,$.lim=nt++,st?$.parent=st:delete $.parent,nt}function L(H){return c.find(H.edges(),function(G){return H.edge(G).cutvalue<0})}function I(H,G,nt){var et=nt.v,st=nt.w;G.hasEdge(et,st)||(et=nt.w,st=nt.v);var K=H.node(et),$=H.node(st),it=K,at=!1;K.lim>$.lim&&(it=$,at=!0);var X=c.filter(G.edges(),function(W){return at===Z(0,H.node(W.v),it)&&at!==Z(0,H.node(W.w),it)});return c.minBy(X,function(W){return _(G,W)})}function B(H,G,nt,et){H.removeEdge(nt.v,nt.w),H.setEdge(et.v,et.w,{}),g(H),h(H,G),function M(H,G){var nt=c.find(H.nodes(),function(st){return!G.node(st).parent}),et=p(H,nt);et=et.slice(1),c.forEach(et,function(st){var K=H.node(st).parent,$=G.edge(st,K),it=!1;$||($=G.edge(K,st),it=!0),G.node(st).rank=G.node(K).rank+(it?$.minlen:-$.minlen)})}(H,G)}function Z(H,G,nt){return nt.low<=G.lim&&G.lim<=nt.lim}w.exports=l,l.initLowLimValues=g,l.initCutValues=h,l.calcCutValue=u,l.leaveEdge=L,l.enterEdge=I,l.exchangeEdges=B},1916:(w,D,s)=>{"use strict";var c=s(45760);w.exports={longestPath:function x(m){var p={};c.forEach(m.sources(),function t(d){var l=m.node(d);if(c.has(p,d))return l.rank;p[d]=!0;var h=c.min(c.map(m.outEdges(d),function(f){return t(f.w)-m.edge(f).minlen}));return(h===Number.POSITIVE_INFINITY||null==h)&&(h=0),l.rank=h})},slack:function _(m,p){return m.node(p.w).rank-m.node(p.v).rank-m.edge(p).minlen}}},11510:(w,D,s)=>{"use strict";var c=s(45760),x=s(36456).Graph;function _(M,F,Z,H){var G;do{G=c.uniqueId(H)}while(M.hasNode(G));return Z.dummy=F,M.setNode(G,Z),G}function C(M){return c.max(c.map(M.nodes(),function(F){var Z=M.node(F).rank;if(!c.isUndefined(Z))return Z}))}w.exports={addDummyNode:_,simplify:function m(M){var F=(new x).setGraph(M.graph());return c.forEach(M.nodes(),function(Z){F.setNode(Z,M.node(Z))}),c.forEach(M.edges(),function(Z){var H=F.edge(Z.v,Z.w)||{weight:0,minlen:1},G=M.edge(Z);F.setEdge(Z.v,Z.w,{weight:H.weight+G.weight,minlen:Math.max(H.minlen,G.minlen)})}),F},asNonCompoundGraph:function p(M){var F=new x({multigraph:M.isMultigraph()}).setGraph(M.graph());return c.forEach(M.nodes(),function(Z){M.children(Z).length||F.setNode(Z,M.node(Z))}),c.forEach(M.edges(),function(Z){F.setEdge(Z,M.edge(Z))}),F},successorWeights:function t(M){var F=c.map(M.nodes(),function(Z){var H={};return c.forEach(M.outEdges(Z),function(G){H[G.w]=(H[G.w]||0)+M.edge(G).weight}),H});return c.zipObject(M.nodes(),F)},predecessorWeights:function d(M){var F=c.map(M.nodes(),function(Z){var H={};return c.forEach(M.inEdges(Z),function(G){H[G.v]=(H[G.v]||0)+M.edge(G).weight}),H});return c.zipObject(M.nodes(),F)},intersectRect:function l(M,F){var K,$,Z=M.x,H=M.y,G=F.x-Z,nt=F.y-H,et=M.width/2,st=M.height/2;if(!G&&!nt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(nt)*et>Math.abs(G)*st?(nt<0&&(st=-st),K=st*G/nt,$=st):(G<0&&(et=-et),K=et,$=et*nt/G),{x:Z+K,y:H+$}},buildLayerMatrix:function h(M){var F=c.map(c.range(C(M)+1),function(){return[]});return c.forEach(M.nodes(),function(Z){var H=M.node(Z),G=H.rank;c.isUndefined(G)||(F[G][H.order]=Z)}),F},normalizeRanks:function f(M){var F=c.min(c.map(M.nodes(),function(Z){return M.node(Z).rank}));c.forEach(M.nodes(),function(Z){var H=M.node(Z);c.has(H,"rank")&&(H.rank-=F)})},removeEmptyRanks:function u(M){var F=c.min(c.map(M.nodes(),function(nt){return M.node(nt).rank})),Z=[];c.forEach(M.nodes(),function(nt){var et=M.node(nt).rank-F;Z[et]||(Z[et]=[]),Z[et].push(nt)});var H=0,G=M.graph().nodeRankFactor;c.forEach(Z,function(nt,et){c.isUndefined(nt)&&et%G!=0?--H:H&&c.forEach(nt,function(st){M.node(st).rank+=H})})},addBorderNode:function g(M,F,Z,H){var G={width:0,height:0};return arguments.length>=4&&(G.rank=Z,G.order=H),_(M,"border",G,F)},maxRank:C,partition:function L(M,F){var Z={lhs:[],rhs:[]};return c.forEach(M,function(H){F(H)?Z.lhs.push(H):Z.rhs.push(H)}),Z},time:function I(M,F){var Z=c.now();try{return F()}finally{console.log(M+" time: "+(c.now()-Z)+"ms")}},notime:function B(M,F){return F()}}},28126:w=>{w.exports="0.8.5"},85510:(w,D,s)=>{var c=s(51838);w.exports={Graph:c.Graph,json:s(21088),alg:s(83430),version:c.version}},86730:(w,D,s)=>{var c=s(79138);w.exports=function x(_){var t,m={},p=[];function d(l){c.has(m,l)||(m[l]=!0,t.push(l),c.each(_.successors(l),d),c.each(_.predecessors(l),d))}return c.each(_.nodes(),function(l){t=[],d(l),t.length&&p.push(t)}),p}},22163:(w,D,s)=>{var c=s(79138);function _(m,p,t,d,l,h){c.has(d,p)||(d[p]=!0,t||h.push(p),c.each(l(p),function(f){_(m,f,t,d,l,h)}),t&&h.push(p))}w.exports=function x(m,p,t){c.isArray(p)||(p=[p]);var d=(m.isDirected()?m.successors:m.neighbors).bind(m),l=[],h={};return c.each(p,function(f){if(!m.hasNode(f))throw new Error("Graph does not have node: "+f);_(m,f,"post"===t,h,d,l)}),l}},25668:(w,D,s)=>{var c=s(61718),x=s(79138);w.exports=function _(m,p,t){return x.transform(m.nodes(),function(d,l){d[l]=c(m,l,p,t)},{})}},61718:(w,D,s)=>{var c=s(79138),x=s(31919);w.exports=function m(t,d,l,h){return function p(t,d,l,h){var g,C,f={},u=new x,L=function(I){var B=I.v!==g?I.v:I.w,M=f[B],F=l(I),Z=C.distance+F;if(F<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+I+" Weight: "+F);Z<M.distance&&(M.distance=Z,M.predecessor=g,u.decrease(B,Z))};for(t.nodes().forEach(function(I){var B=I===d?0:Number.POSITIVE_INFINITY;f[I]={distance:B},u.add(I,B)});u.size()>0&&(g=u.removeMin(),(C=f[g]).distance!==Number.POSITIVE_INFINITY);)h(g).forEach(L);return f}(t,String(d),l||_,h||function(f){return t.outEdges(f)})};var _=c.constant(1)},9611:(w,D,s)=>{var c=s(79138),x=s(73585);w.exports=function _(m){return c.filter(x(m),function(p){return p.length>1||1===p.length&&m.hasEdge(p[0],p[0])})}},22881:(w,D,s)=>{var c=s(79138);w.exports=function _(p,t,d){return function m(p,t,d){var l={},h=p.nodes();return h.forEach(function(f){l[f]={},l[f][f]={distance:0},h.forEach(function(u){f!==u&&(l[f][u]={distance:Number.POSITIVE_INFINITY})}),d(f).forEach(function(u){var g=u.v===f?u.w:u.v,C=t(u);l[f][g]={distance:C,predecessor:f}})}),h.forEach(function(f){var u=l[f];h.forEach(function(g){var C=l[g];h.forEach(function(L){var B=u[L],M=C[L],F=C[f].distance+B.distance;F<M.distance&&(M.distance=F,M.predecessor=B.predecessor)})})}),l}(p,t||x,d||function(l){return p.outEdges(l)})};var x=c.constant(1)},83430:(w,D,s)=>{w.exports={components:s(86730),dijkstra:s(61718),dijkstraAll:s(25668),findCycles:s(9611),floydWarshall:s(22881),isAcyclic:s(46693),postorder:s(46694),preorder:s(5330),prim:s(46823),tarjan:s(73585),topsort:s(52180)}},46693:(w,D,s)=>{var c=s(52180);w.exports=function x(_){try{c(_)}catch(m){if(m instanceof c.CycleException)return!1;throw m}return!0}},46694:(w,D,s)=>{var c=s(22163);w.exports=function x(_,m){return c(_,m,"post")}},5330:(w,D,s)=>{var c=s(22163);w.exports=function x(_,m){return c(_,m,"pre")}},46823:(w,D,s)=>{var c=s(79138),x=s(66568),_=s(31919);w.exports=function m(p,t){var f,d=new x,l={},h=new _;function u(C){var L=C.v===f?C.w:C.v,I=h.priority(L);if(void 0!==I){var B=t(C);B<I&&(l[L]=f,h.decrease(L,B))}}if(0===p.nodeCount())return d;c.each(p.nodes(),function(C){h.add(C,Number.POSITIVE_INFINITY),d.setNode(C)}),h.decrease(p.nodes()[0],0);for(var g=!1;h.size()>0;){if(f=h.removeMin(),c.has(l,f))d.setEdge(f,l[f]);else{if(g)throw new Error("Input graph is not connected: "+p);g=!0}p.nodeEdges(f).forEach(u)}return d}},73585:(w,D,s)=>{var c=s(79138);w.exports=function x(_){var m=0,p=[],t={},d=[];function l(h){var f=t[h]={onStack:!0,lowlink:m,index:m++};if(p.push(h),_.successors(h).forEach(function(C){c.has(t,C)?t[C].onStack&&(f.lowlink=Math.min(f.lowlink,t[C].index)):(l(C),f.lowlink=Math.min(f.lowlink,t[C].lowlink))}),f.lowlink===f.index){var g,u=[];do{g=p.pop(),t[g].onStack=!1,u.push(g)}while(h!==g);d.push(u)}}return _.nodes().forEach(function(h){c.has(t,h)||l(h)}),d}},52180:(w,D,s)=>{var c=s(79138);function x(m){var p={},t={},d=[];if(c.each(m.sinks(),function l(h){if(c.has(t,h))throw new _;c.has(p,h)||(t[h]=!0,p[h]=!0,c.each(m.predecessors(h),l),delete t[h],d.push(h))}),c.size(p)!==m.nodeCount())throw new _;return d}function _(){}w.exports=x,x.CycleException=_,_.prototype=new Error},31919:(w,D,s)=>{var c=s(79138);function x(){this._arr=[],this._keyIndices={}}w.exports=x,x.prototype.size=function(){return this._arr.length},x.prototype.keys=function(){return this._arr.map(function(_){return _.key})},x.prototype.has=function(_){return c.has(this._keyIndices,_)},x.prototype.priority=function(_){var m=this._keyIndices[_];if(void 0!==m)return this._arr[m].priority},x.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},x.prototype.add=function(_,m){var p=this._keyIndices;if(_=String(_),!c.has(p,_)){var t=this._arr,d=t.length;return p[_]=d,t.push({key:_,priority:m}),this._decrease(d),!0}return!1},x.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var _=this._arr.pop();return delete this._keyIndices[_.key],this._heapify(0),_.key},x.prototype.decrease=function(_,m){var p=this._keyIndices[_];if(m>this._arr[p].priority)throw new Error("New priority is greater than current priority. Key: "+_+" Old: "+this._arr[p].priority+" New: "+m);this._arr[p].priority=m,this._decrease(p)},x.prototype._heapify=function(_){var m=this._arr,p=2*_,t=p+1,d=_;p<m.length&&(d=m[p].priority<m[d].priority?p:d,t<m.length&&(d=m[t].priority<m[d].priority?t:d),d!==_&&(this._swap(_,d),this._heapify(d)))},x.prototype._decrease=function(_){for(var t,m=this._arr,p=m[_].priority;0!==_&&!(m[t=_>>1].priority<p);)this._swap(_,t),_=t},x.prototype._swap=function(_,m){var p=this._arr,t=this._keyIndices,d=p[_],l=p[m];p[_]=l,p[m]=d,t[l.key]=_,t[d.key]=m}},66568:(w,D,s)=>{"use strict";var c=s(79138);w.exports=p;var _="\0";function p(u){this._isDirected=!c.has(u,"directed")||u.directed,this._isMultigraph=!!c.has(u,"multigraph")&&u.multigraph,this._isCompound=!!c.has(u,"compound")&&u.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function t(u,g){u[g]?u[g]++:u[g]=1}function d(u,g){--u[g]||delete u[g]}function l(u,g,C,L){var I=""+g,B=""+C;if(!u&&I>B){var M=I;I=B,B=M}return I+"\x01"+B+"\x01"+(c.isUndefined(L)?"\0":L)}function h(u,g,C,L){var I=""+g,B=""+C;if(!u&&I>B){var M=I;I=B,B=M}var F={v:I,w:B};return L&&(F.name=L),F}function f(u,g){return l(u,g.v,g.w,g.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0,p.prototype.isDirected=function(){return this._isDirected},p.prototype.isMultigraph=function(){return this._isMultigraph},p.prototype.isCompound=function(){return this._isCompound},p.prototype.setGraph=function(u){return this._label=u,this},p.prototype.graph=function(){return this._label},p.prototype.setDefaultNodeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultNodeLabelFn=u,this},p.prototype.nodeCount=function(){return this._nodeCount},p.prototype.nodes=function(){return c.keys(this._nodes)},p.prototype.sources=function(){var u=this;return c.filter(this.nodes(),function(g){return c.isEmpty(u._in[g])})},p.prototype.sinks=function(){var u=this;return c.filter(this.nodes(),function(g){return c.isEmpty(u._out[g])})},p.prototype.setNodes=function(u,g){var C=arguments,L=this;return c.each(u,function(I){C.length>1?L.setNode(I,g):L.setNode(I)}),this},p.prototype.setNode=function(u,g){return c.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=g),this):(this._nodes[u]=arguments.length>1?g:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=_,this._children[u]={},this._children[_][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},p.prototype.node=function(u){return this._nodes[u]},p.prototype.hasNode=function(u){return c.has(this._nodes,u)},p.prototype.removeNode=function(u){var g=this;if(c.has(this._nodes,u)){var C=function(L){g.removeEdge(g._edgeObjs[L])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],c.each(this.children(u),function(L){g.setParent(L)}),delete this._children[u]),c.each(c.keys(this._in[u]),C),delete this._in[u],delete this._preds[u],c.each(c.keys(this._out[u]),C),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},p.prototype.setParent=function(u,g){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(g))g=_;else{for(var C=g+="";!c.isUndefined(C);C=this.parent(C))if(C===u)throw new Error("Setting "+g+" as parent of "+u+" would create a cycle");this.setNode(g)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=g,this._children[g][u]=!0,this},p.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},p.prototype.parent=function(u){if(this._isCompound){var g=this._parent[u];if(g!==_)return g}},p.prototype.children=function(u){if(c.isUndefined(u)&&(u=_),this._isCompound){var g=this._children[u];if(g)return c.keys(g)}else{if(u===_)return this.nodes();if(this.hasNode(u))return[]}},p.prototype.predecessors=function(u){var g=this._preds[u];if(g)return c.keys(g)},p.prototype.successors=function(u){var g=this._sucs[u];if(g)return c.keys(g)},p.prototype.neighbors=function(u){var g=this.predecessors(u);if(g)return c.union(g,this.successors(u))},p.prototype.isLeaf=function(u){return 0===(this.isDirected()?this.successors(u):this.neighbors(u)).length},p.prototype.filterNodes=function(u){var g=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});g.setGraph(this.graph());var C=this;c.each(this._nodes,function(B,M){u(M)&&g.setNode(M,B)}),c.each(this._edgeObjs,function(B){g.hasNode(B.v)&&g.hasNode(B.w)&&g.setEdge(B,C.edge(B))});var L={};function I(B){var M=C.parent(B);return void 0===M||g.hasNode(M)?(L[B]=M,M):M in L?L[M]:I(M)}return this._isCompound&&c.each(g.nodes(),function(B){g.setParent(B,I(B))}),g},p.prototype.setDefaultEdgeLabel=function(u){return c.isFunction(u)||(u=c.constant(u)),this._defaultEdgeLabelFn=u,this},p.prototype.edgeCount=function(){return this._edgeCount},p.prototype.edges=function(){return c.values(this._edgeObjs)},p.prototype.setPath=function(u,g){var C=this,L=arguments;return c.reduce(u,function(I,B){return L.length>1?C.setEdge(I,B,g):C.setEdge(I,B),B}),this},p.prototype.setEdge=function(){var u,g,C,L,I=!1,B=arguments[0];"object"==typeof B&&null!==B&&"v"in B?(u=B.v,g=B.w,C=B.name,2===arguments.length&&(L=arguments[1],I=!0)):(u=B,g=arguments[1],C=arguments[3],arguments.length>2&&(L=arguments[2],I=!0)),u=""+u,g=""+g,c.isUndefined(C)||(C=""+C);var M=l(this._isDirected,u,g,C);if(c.has(this._edgeLabels,M))return I&&(this._edgeLabels[M]=L),this;if(!c.isUndefined(C)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(g),this._edgeLabels[M]=I?L:this._defaultEdgeLabelFn(u,g,C);var F=h(this._isDirected,u,g,C);return u=F.v,g=F.w,Object.freeze(F),this._edgeObjs[M]=F,t(this._preds[g],u),t(this._sucs[u],g),this._in[g][M]=F,this._out[u][M]=F,this._edgeCount++,this},p.prototype.edge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C);return this._edgeLabels[L]},p.prototype.hasEdge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C);return c.has(this._edgeLabels,L)},p.prototype.removeEdge=function(u,g,C){var L=1===arguments.length?f(this._isDirected,arguments[0]):l(this._isDirected,u,g,C),I=this._edgeObjs[L];return I&&(u=I.v,g=I.w,delete this._edgeLabels[L],delete this._edgeObjs[L],d(this._preds[g],u),d(this._sucs[u],g),delete this._in[g][L],delete this._out[u][L],this._edgeCount--),this},p.prototype.inEdges=function(u,g){var C=this._in[u];if(C){var L=c.values(C);return g?c.filter(L,function(I){return I.v===g}):L}},p.prototype.outEdges=function(u,g){var C=this._out[u];if(C){var L=c.values(C);return g?c.filter(L,function(I){return I.w===g}):L}},p.prototype.nodeEdges=function(u,g){var C=this.inEdges(u,g);if(C)return C.concat(this.outEdges(u,g))}},51838:(w,D,s)=>{w.exports={Graph:s(66568),version:s(75089)}},21088:(w,D,s)=>{var c=s(79138),x=s(66568);function m(d){return c.map(d.nodes(),function(l){var h=d.node(l),f=d.parent(l),u={v:l};return c.isUndefined(h)||(u.value=h),c.isUndefined(f)||(u.parent=f),u})}function p(d){return c.map(d.edges(),function(l){var h=d.edge(l),f={v:l.v,w:l.w};return c.isUndefined(l.name)||(f.name=l.name),c.isUndefined(h)||(f.value=h),f})}w.exports={write:function _(d){var l={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:m(d),edges:p(d)};return c.isUndefined(d.graph())||(l.value=c.clone(d.graph())),l},read:function t(d){var l=new x(d.options).setGraph(d.value);return c.each(d.nodes,function(h){l.setNode(h.v,h.value),h.parent&&l.setParent(h.v,h.parent)}),c.each(d.edges,function(h){l.setEdge({v:h.v,w:h.w,name:h.name},h.value)}),l}}},79138:(w,D,s)=>{var c;try{c={clone:s(11094),constant:s(76684),each:s(35474),filter:s(35281),has:s(54842),isArray:s(21503),isEmpty:s(71973),isFunction:s(75946),isUndefined:s(34235),keys:s(118),map:s(19984),reduce:s(81337),size:s(55637),transform:s(89416),union:s(68921),values:s(90377)}}catch{}c||(c=window._),w.exports=c},75089:w=>{w.exports="2.1.8"},50623:w=>{"use strict";w.exports=function(s){return null!=s&&"object"==typeof s&&!1===Array.isArray(s)}},52872:w=>{var D=Object.prototype.toString;function s(h){return"function"==typeof h.constructor?h.constructor.name:null}w.exports=function(f){if(void 0===f)return"undefined";if(null===f)return"null";var u=typeof f;if("boolean"===u)return"boolean";if("string"===u)return"string";if("number"===u)return"number";if("symbol"===u)return"symbol";if("function"===u)return function p(h,f){return"GeneratorFunction"===s(h)}(f)?"generatorfunction":"function";if(function c(h){return Array.isArray?Array.isArray(h):h instanceof Array}(f))return"array";if(function l(h){return!(!h.constructor||"function"!=typeof h.constructor.isBuffer)&&h.constructor.isBuffer(h)}(f))return"buffer";if(function d(h){try{if("number"==typeof h.length&&"function"==typeof h.callee)return!0}catch(f){if(-1!==f.message.indexOf("callee"))return!0}return!1}(f))return"arguments";if(function _(h){return h instanceof Date||"function"==typeof h.toDateString&&"function"==typeof h.getDate&&"function"==typeof h.setDate}(f))return"date";if(function x(h){return h instanceof Error||"string"==typeof h.message&&h.constructor&&"number"==typeof h.constructor.stackTraceLimit}(f))return"error";if(function m(h){return h instanceof RegExp||"string"==typeof h.flags&&"boolean"==typeof h.ignoreCase&&"boolean"==typeof h.multiline&&"boolean"==typeof h.global}(f))return"regexp";switch(s(f)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function t(h){return"function"==typeof h.throw&&"function"==typeof h.return&&"function"==typeof h.next}(f))return"generator";switch(u=D.call(f)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return u.slice(8,-1).toLowerCase().replace(/\s/g,"")}},37244:(w,D,s)=>{var _=s(53436)(s(12119),"DataView");w.exports=_},54994:(w,D,s)=>{var c=s(64312),x=s(46421),_=s(15764),m=s(18685),p=s(26676);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},9215:(w,D,s)=>{var c=s(41840),x=s(34378),_=s(54981),m=s(67343),p=s(98895);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},51501:(w,D,s)=>{var _=s(53436)(s(12119),"Map");w.exports=_},99850:(w,D,s)=>{var c=s(10638),x=s(11184),_=s(70866),m=s(43771),p=s(51772);function t(d){var l=-1,h=null==d?0:d.length;for(this.clear();++l<h;){var f=d[l];this.set(f[0],f[1])}}t.prototype.clear=c,t.prototype.delete=x,t.prototype.get=_,t.prototype.has=m,t.prototype.set=p,w.exports=t},44267:(w,D,s)=>{var _=s(53436)(s(12119),"Promise");w.exports=_},46323:(w,D,s)=>{var _=s(53436)(s(12119),"Set");w.exports=_},58849:(w,D,s)=>{var c=s(99850),x=s(4600),_=s(31387);function m(p){var t=-1,d=null==p?0:p.length;for(this.__data__=new c;++t<d;)this.add(p[t])}m.prototype.add=m.prototype.push=x,m.prototype.has=_,w.exports=m},2858:(w,D,s)=>{var c=s(9215),x=s(13720),_=s(64410),m=s(45576),p=s(22247),t=s(41585);function d(l){var h=this.__data__=new c(l);this.size=h.size}d.prototype.clear=x,d.prototype.delete=_,d.prototype.get=m,d.prototype.has=p,d.prototype.set=t,w.exports=d},60443:(w,D,s)=>{var c=s(12119);w.exports=c.Symbol},73457:(w,D,s)=>{var c=s(12119);w.exports=c.Uint8Array},24243:(w,D,s)=>{var _=s(53436)(s(12119),"WeakMap");w.exports=_},26999:w=>{w.exports=function D(s,c,x){switch(x.length){case 0:return s.call(c);case 1:return s.call(c,x[0]);case 2:return s.call(c,x[0],x[1]);case 3:return s.call(c,x[0],x[1],x[2])}return s.apply(c,x)}},96837:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length;++x<_&&!1!==c(s[x],x,s););return s}},69779:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length,m=0,p=[];++x<_;){var t=s[x];c(t,x,s)&&(p[m++]=t)}return p}},61253:(w,D,s)=>{var c=s(14164);w.exports=function x(_,m){return!(null==_||!_.length)&&c(_,m,0)>-1}},37609:w=>{w.exports=function D(s,c,x){for(var _=-1,m=null==s?0:s.length;++_<m;)if(x(c,s[_]))return!0;return!1}},72271:(w,D,s)=>{var c=s(85334),x=s(77151),_=s(21503),m=s(80891),p=s(58442),t=s(48159),l=Object.prototype.hasOwnProperty;w.exports=function h(f,u){var g=_(f),C=!g&&x(f),L=!g&&!C&&m(f),I=!g&&!C&&!L&&t(f),B=g||C||L||I,M=B?c(f.length,String):[],F=M.length;for(var Z in f)(u||l.call(f,Z))&&(!B||!("length"==Z||L&&("offset"==Z||"parent"==Z)||I&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||p(Z,F)))&&M.push(Z);return M}},84633:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length,m=Array(_);++x<_;)m[x]=c(s[x],x,s);return m}},85059:w=>{w.exports=function D(s,c){for(var x=-1,_=c.length,m=s.length;++x<_;)s[m+x]=c[x];return s}},8745:w=>{w.exports=function D(s,c,x,_){var m=-1,p=null==s?0:s.length;for(_&&p&&(x=s[++m]);++m<p;)x=c(x,s[m],m,s);return x}},79503:w=>{w.exports=function D(s,c){for(var x=-1,_=null==s?0:s.length;++x<_;)if(c(s[x],x,s))return!0;return!1}},75481:(w,D,s)=>{var x=s(11847)("length");w.exports=x},49276:(w,D,s)=>{var c=s(85683),x=s(20217);w.exports=function _(m,p,t){(void 0!==t&&!x(m[p],t)||void 0===t&&!(p in m))&&c(m,p,t)}},89719:(w,D,s)=>{var c=s(85683),x=s(20217),m=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l){var h=t[d];(!m.call(t,d)||!x(h,l)||void 0===l&&!(d in t))&&c(t,d,l)}},43503:(w,D,s)=>{var c=s(20217);w.exports=function x(_,m){for(var p=_.length;p--;)if(c(_[p][0],m))return p;return-1}},94121:(w,D,s)=>{var c=s(31989),x=s(118);w.exports=function _(m,p){return m&&c(p,x(p),m)}},99287:(w,D,s)=>{var c=s(31989),x=s(16555);w.exports=function _(m,p){return m&&c(p,x(p),m)}},85683:(w,D,s)=>{var c=s(56713);w.exports=function x(_,m,p){"__proto__"==m&&c?c(_,m,{configurable:!0,enumerable:!0,value:p,writable:!0}):_[m]=p}},44462:(w,D,s)=>{var c=s(2858),x=s(96837),_=s(89719),m=s(94121),p=s(99287),t=s(19292),d=s(99454),l=s(84444),h=s(59905),f=s(47597),u=s(6967),g=s(28794),C=s(76782),L=s(37878),I=s(4264),B=s(21503),M=s(80891),F=s(13222),Z=s(25940),H=s(90799),G=s(118),nt=s(16555),$="[object Arguments]",q="[object Function]",pt="[object Object]",jt={};jt[$]=jt["[object Array]"]=jt["[object ArrayBuffer]"]=jt["[object DataView]"]=jt["[object Boolean]"]=jt["[object Date]"]=jt["[object Float32Array]"]=jt["[object Float64Array]"]=jt["[object Int8Array]"]=jt["[object Int16Array]"]=jt["[object Int32Array]"]=jt["[object Map]"]=jt["[object Number]"]=jt[pt]=jt["[object RegExp]"]=jt["[object Set]"]=jt["[object String]"]=jt["[object Symbol]"]=jt["[object Uint8Array]"]=jt["[object Uint8ClampedArray]"]=jt["[object Uint16Array]"]=jt["[object Uint32Array]"]=!0,jt["[object Error]"]=jt[q]=jt["[object WeakMap]"]=!1,w.exports=function Vt(qt,_e,ye,Ee,Oe,Ae){var Ue,Ve=1&_e,rn=2&_e,xe=4&_e;if(ye&&(Ue=Oe?ye(qt,Ee,Oe,Ae):ye(qt)),void 0!==Ue)return Ue;if(!Z(qt))return qt;var un=B(qt);if(un){if(Ue=C(qt),!Ve)return d(qt,Ue)}else{var Tt=g(qt),Wt=Tt==q||"[object GeneratorFunction]"==Tt;if(M(qt))return t(qt,Ve);if(Tt==pt||Tt==$||Wt&&!Oe){if(Ue=rn||Wt?{}:I(qt),!Ve)return rn?h(qt,p(Ue,qt)):l(qt,m(Ue,qt))}else{if(!jt[Tt])return Oe?qt:{};Ue=L(qt,Tt,Ve)}}Ae||(Ae=new c);var le=Ae.get(qt);if(le)return le;Ae.set(qt,Ue),H(qt)?qt.forEach(function(Ze){Ue.add(Vt(Ze,_e,ye,Ze,qt,Ae))}):F(qt)&&qt.forEach(function(Ze,ze){Ue.set(ze,Vt(Ze,_e,ye,ze,qt,Ae))});var ee=un?void 0:(xe?rn?u:f:rn?nt:G)(qt);return x(ee||qt,function(Ze,ze){ee&&(Ze=qt[ze=Ze]),_(Ue,ze,Vt(Ze,_e,ye,ze,qt,Ae))}),Ue}},78858:(w,D,s)=>{var c=s(25940),x=Object.create,_=function(){function m(){}return function(p){if(!c(p))return{};if(x)return x(p);m.prototype=p;var t=new m;return m.prototype=void 0,t}}();w.exports=_},43132:(w,D,s)=>{var c=s(45184),_=s(16539)(c);w.exports=_},67308:(w,D,s)=>{var c=s(44129);w.exports=function x(_,m,p){for(var t=-1,d=_.length;++t<d;){var l=_[t],h=m(l);if(null!=h&&(void 0===f?h==h&&!c(h):p(h,f)))var f=h,u=l}return u}},33609:(w,D,s)=>{var c=s(43132);w.exports=function x(_,m){var p=[];return c(_,function(t,d,l){m(t,d,l)&&p.push(t)}),p}},65317:w=>{w.exports=function D(s,c,x,_){for(var m=s.length,p=x+(_?1:-1);_?p--:++p<m;)if(c(s[p],p,s))return p;return-1}},50686:(w,D,s)=>{var c=s(85059),x=s(75039);w.exports=function _(m,p,t,d,l){var h=-1,f=m.length;for(t||(t=x),l||(l=[]);++h<f;){var u=m[h];p>0&&t(u)?p>1?_(u,p-1,t,d,l):c(l,u):d||(l[l.length]=u)}return l}},30755:(w,D,s)=>{var x=s(40456)();w.exports=x},45184:(w,D,s)=>{var c=s(30755),x=s(118);w.exports=function _(m,p){return m&&c(m,p,x)}},15456:(w,D,s)=>{var c=s(65456),x=s(68533);w.exports=function _(m,p){for(var t=0,d=(p=c(p,m)).length;null!=m&&t<d;)m=m[x(p[t++])];return t&&t==d?m:void 0}},38247:(w,D,s)=>{var c=s(85059),x=s(21503);w.exports=function _(m,p,t){var d=p(m);return x(m)?d:c(d,t(m))}},93337:(w,D,s)=>{var c=s(60443),x=s(21318),_=s(92902),t=c?c.toStringTag:void 0;w.exports=function d(l){return null==l?void 0===l?"[object Undefined]":"[object Null]":t&&t in Object(l)?x(l):_(l)}},31100:w=>{w.exports=function D(s,c){return s>c}},84781:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x,_){return null!=x&&s.call(x,_)}},69989:w=>{w.exports=function D(s,c){return null!=s&&c in Object(s)}},14164:(w,D,s)=>{var c=s(65317),x=s(70968),_=s(24977);w.exports=function m(p,t,d){return t==t?_(p,t,d):c(p,x,d)}},60186:(w,D,s)=>{var c=s(93337),x=s(72671);w.exports=function m(p){return x(p)&&"[object Arguments]"==c(p)}},85740:(w,D,s)=>{var c=s(58325),x=s(72671);w.exports=function _(m,p,t,d,l){return m===p||(null==m||null==p||!x(m)&&!x(p)?m!=m&&p!=p:c(m,p,t,d,_,l))}},58325:(w,D,s)=>{var c=s(2858),x=s(63914),_=s(78583),m=s(32286),p=s(28794),t=s(21503),d=s(80891),l=s(48159),f="[object Arguments]",u="[object Array]",g="[object Object]",L=Object.prototype.hasOwnProperty;w.exports=function I(B,M,F,Z,H,G){var nt=t(B),et=t(M),st=nt?u:p(B),K=et?u:p(M),$=(st=st==f?g:st)==g,it=(K=K==f?g:K)==g,at=st==K;if(at&&d(B)){if(!d(M))return!1;nt=!0,$=!1}if(at&&!$)return G||(G=new c),nt||l(B)?x(B,M,F,Z,H,G):_(B,M,st,F,Z,H,G);if(!(1&F)){var X=$&&L.call(B,"__wrapped__"),W=it&&L.call(M,"__wrapped__");if(X||W){var q=X?B.value():B,Y=W?M.value():M;return G||(G=new c),H(q,Y,F,Z,G)}}return!!at&&(G||(G=new c),m(B,M,F,Z,H,G))}},97021:(w,D,s)=>{var c=s(28794),x=s(72671);w.exports=function m(p){return x(p)&&"[object Map]"==c(p)}},40431:(w,D,s)=>{var c=s(2858),x=s(85740);w.exports=function p(t,d,l,h){var f=l.length,u=f,g=!h;if(null==t)return!u;for(t=Object(t);f--;){var C=l[f];if(g&&C[2]?C[1]!==t[C[0]]:!(C[0]in t))return!1}for(;++f<u;){var L=(C=l[f])[0],I=t[L],B=C[1];if(g&&C[2]){if(void 0===I&&!(L in t))return!1}else{var M=new c;if(h)var F=h(I,B,L,t,d,M);if(!(void 0===F?x(B,I,3,h,M):F))return!1}}return!0}},70968:w=>{w.exports=function D(s){return s!=s}},37304:(w,D,s)=>{var c=s(75946),x=s(91943),_=s(25940),m=s(52827),t=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");w.exports=function g(C){return!(!_(C)||x(C))&&(c(C)?u:t).test(m(C))}},771:(w,D,s)=>{var c=s(28794),x=s(72671);w.exports=function m(p){return x(p)&&"[object Set]"==c(p)}},1083:(w,D,s)=>{var c=s(93337),x=s(96231),_=s(72671),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1,w.exports=function X(W){return _(W)&&x(W.length)&&!!at[c(W)]}},96517:(w,D,s)=>{var c=s(98133),x=s(9458),_=s(32608),m=s(21503),p=s(87495);w.exports=function t(d){return"function"==typeof d?d:null==d?_:"object"==typeof d?m(d)?x(d[0],d[1]):c(d):p(d)}},81172:(w,D,s)=>{var c=s(45488),x=s(85491),m=Object.prototype.hasOwnProperty;w.exports=function p(t){if(!c(t))return x(t);var d=[];for(var l in Object(t))m.call(t,l)&&"constructor"!=l&&d.push(l);return d}},92809:(w,D,s)=>{var c=s(25940),x=s(45488),_=s(32158),p=Object.prototype.hasOwnProperty;w.exports=function t(d){if(!c(d))return _(d);var l=x(d),h=[];for(var f in d)"constructor"==f&&(l||!p.call(d,f))||h.push(f);return h}},99069:w=>{w.exports=function D(s,c){return s<c}},92046:(w,D,s)=>{var c=s(43132),x=s(56507);w.exports=function _(m,p){var t=-1,d=x(m)?Array(m.length):[];return c(m,function(l,h,f){d[++t]=p(l,h,f)}),d}},98133:(w,D,s)=>{var c=s(40431),x=s(22379),_=s(642);w.exports=function m(p){var t=x(p);return 1==t.length&&t[0][2]?_(t[0][0],t[0][1]):function(d){return d===p||c(d,p,t)}}},9458:(w,D,s)=>{var c=s(85740),x=s(8817),_=s(11172),m=s(45352),p=s(22442),t=s(642),d=s(68533);w.exports=function f(u,g){return m(u)&&p(g)?t(d(u),g):function(C){var L=x(C,u);return void 0===L&&L===g?_(C,u):c(g,L,3)}}},73842:(w,D,s)=>{var c=s(2858),x=s(49276),_=s(30755),m=s(33675),p=s(25940),t=s(16555),d=s(99351);w.exports=function l(h,f,u,g,C){h!==f&&_(f,function(L,I){if(C||(C=new c),p(L))m(h,f,I,u,l,g,C);else{var B=g?g(d(h,I),L,I+"",h,f,C):void 0;void 0===B&&(B=L),x(h,I,B)}},t)}},33675:(w,D,s)=>{var c=s(49276),x=s(19292),_=s(65208),m=s(99454),p=s(4264),t=s(77151),d=s(21503),l=s(92377),h=s(80891),f=s(75946),u=s(25940),g=s(97614),C=s(48159),L=s(99351),I=s(8067);w.exports=function B(M,F,Z,H,G,nt,et){var st=L(M,Z),K=L(F,Z),$=et.get(K);if($)c(M,Z,$);else{var it=nt?nt(st,K,Z+"",M,F,et):void 0,at=void 0===it;if(at){var X=d(K),W=!X&&h(K),q=!X&&!W&&C(K);it=K,X||W||q?d(st)?it=st:l(st)?it=m(st):W?(at=!1,it=x(K,!0)):q?(at=!1,it=_(K,!0)):it=[]:g(K)||t(K)?(it=st,t(st)?it=I(st):(!u(st)||f(st))&&(it=p(K))):at=!1}at&&(et.set(K,it),G(it,K,H,nt,et),et.delete(K)),c(M,Z,it)}}},6119:(w,D,s)=>{var c=s(84633),x=s(15456),_=s(96517),m=s(92046),p=s(42061),t=s(85647),d=s(41215),l=s(32608),h=s(21503);w.exports=function f(u,g,C){g=g.length?c(g,function(B){return h(B)?function(M){return x(M,1===B.length?B[0]:B)}:B}):[l];var L=-1;g=c(g,t(_));var I=m(u,function(B,M,F){return{criteria:c(g,function(H){return H(B)}),index:++L,value:B}});return p(I,function(B,M){return d(B,M,C)})}},83021:(w,D,s)=>{var c=s(95495),x=s(11172);w.exports=function _(m,p){return c(m,p,function(t,d){return x(m,d)})}},95495:(w,D,s)=>{var c=s(15456),x=s(55963),_=s(65456);w.exports=function m(p,t,d){for(var l=-1,h=t.length,f={};++l<h;){var u=t[l],g=c(p,u);d(g,u)&&x(f,_(u,p),g)}return f}},11847:w=>{w.exports=function D(s){return function(c){return c?.[s]}}},39222:(w,D,s)=>{var c=s(15456);w.exports=function x(_){return function(m){return c(m,_)}}},16307:w=>{var D=Math.ceil,s=Math.max;w.exports=function c(x,_,m,p){for(var t=-1,d=s(D((_-x)/(m||1)),0),l=Array(d);d--;)l[p?d:++t]=x,x+=m;return l}},13570:w=>{w.exports=function D(s,c,x,_,m){return m(s,function(p,t,d){x=_?(_=!1,p):c(x,p,t,d)}),x}},23269:(w,D,s)=>{var c=s(32608),x=s(53983),_=s(72185);w.exports=function m(p,t){return _(x(p,t,c),p+"")}},55963:(w,D,s)=>{var c=s(89719),x=s(65456),_=s(58442),m=s(25940),p=s(68533);w.exports=function t(d,l,h,f){if(!m(d))return d;for(var u=-1,g=(l=x(l,d)).length,C=g-1,L=d;null!=L&&++u<g;){var I=p(l[u]),B=h;if("__proto__"===I||"constructor"===I||"prototype"===I)return d;if(u!=C){var M=L[I];void 0===(B=f?f(M,I,L):void 0)&&(B=m(M)?M:_(l[u+1])?[]:{})}c(L,I,B),L=L[I]}return d}},69510:(w,D,s)=>{var c=s(76684),x=s(56713),_=s(32608);w.exports=x?function(p,t){return x(p,"toString",{configurable:!0,enumerable:!1,value:c(t),writable:!0})}:_},42061:w=>{w.exports=function D(s,c){var x=s.length;for(s.sort(c);x--;)s[x]=s[x].value;return s}},85334:w=>{w.exports=function D(s,c){for(var x=-1,_=Array(s);++x<s;)_[x]=c(x);return _}},93935:(w,D,s)=>{var c=s(60443),x=s(84633),_=s(21503),m=s(44129),t=c?c.prototype:void 0,d=t?t.toString:void 0;w.exports=function l(h){if("string"==typeof h)return h;if(_(h))return x(h,l)+"";if(m(h))return d?d.call(h):"";var f=h+"";return"0"==f&&1/h==-1/0?"-0":f}},83348:(w,D,s)=>{var c=s(42760),x=/^\s+/;w.exports=function _(m){return m&&m.slice(0,c(m)+1).replace(x,"")}},85647:w=>{w.exports=function D(s){return function(c){return s(c)}}},80707:(w,D,s)=>{var c=s(58849),x=s(61253),_=s(37609),m=s(25972),p=s(14575),t=s(24174);w.exports=function l(h,f,u){var g=-1,C=x,L=h.length,I=!0,B=[],M=B;if(u)I=!1,C=_;else if(L>=200){var F=f?null:p(h);if(F)return t(F);I=!1,C=m,M=new c}else M=f?[]:B;t:for(;++g<L;){var Z=h[g],H=f?f(Z):Z;if(Z=u||0!==Z?Z:0,I&&H==H){for(var G=M.length;G--;)if(M[G]===H)continue t;f&&M.push(H),B.push(Z)}else C(M,H,u)||(M!==B&&M.push(H),B.push(Z))}return B}},19179:(w,D,s)=>{var c=s(84633);w.exports=function x(_,m){return c(m,function(p){return _[p]})}},38645:w=>{w.exports=function D(s,c,x){for(var _=-1,m=s.length,p=c.length,t={};++_<m;)x(t,s[_],_<p?c[_]:void 0);return t}},25972:w=>{w.exports=function D(s,c){return s.has(c)}},21481:(w,D,s)=>{var c=s(32608);w.exports=function x(_){return"function"==typeof _?_:c}},65456:(w,D,s)=>{var c=s(21503),x=s(45352),_=s(32855),m=s(73943);w.exports=function p(t,d){return c(t)?t:x(t,d)?[t]:_(m(t))}},43362:(w,D,s)=>{var c=s(73457);w.exports=function x(_){var m=new _.constructor(_.byteLength);return new c(m).set(new c(_)),m}},19292:(w,D,s)=>{w=s.nmd(w);var c=s(12119),x=D&&!D.nodeType&&D,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x?c.Buffer:void 0,t=p?p.allocUnsafe:void 0;w.exports=function d(l,h){if(h)return l.slice();var f=l.length,u=t?t(f):new l.constructor(f);return l.copy(u),u}},17e3:(w,D,s)=>{var c=s(43362);w.exports=function x(_,m){var p=m?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.byteLength)}},74098:w=>{var D=/\w*$/;w.exports=function s(c){var x=new c.constructor(c.source,D.exec(c));return x.lastIndex=c.lastIndex,x}},62533:(w,D,s)=>{var c=s(60443),x=c?c.prototype:void 0,_=x?x.valueOf:void 0;w.exports=function m(p){return _?Object(_.call(p)):{}}},65208:(w,D,s)=>{var c=s(43362);w.exports=function x(_,m){var p=m?c(_.buffer):_.buffer;return new _.constructor(p,_.byteOffset,_.length)}},13443:(w,D,s)=>{var c=s(44129);w.exports=function x(_,m){if(_!==m){var p=void 0!==_,t=null===_,d=_==_,l=c(_),h=void 0!==m,f=null===m,u=m==m,g=c(m);if(!f&&!g&&!l&&_>m||l&&h&&u&&!f&&!g||t&&h&&u||!p&&u||!d)return 1;if(!t&&!l&&!g&&_<m||g&&p&&d&&!t&&!l||f&&p&&d||!h&&d||!u)return-1}return 0}},41215:(w,D,s)=>{var c=s(13443);w.exports=function x(_,m,p){for(var t=-1,d=_.criteria,l=m.criteria,h=d.length,f=p.length;++t<h;){var u=c(d[t],l[t]);if(u)return t>=f?u:u*("desc"==p[t]?-1:1)}return _.index-m.index}},99454:w=>{w.exports=function D(s,c){var x=-1,_=s.length;for(c||(c=Array(_));++x<_;)c[x]=s[x];return c}},31989:(w,D,s)=>{var c=s(89719),x=s(85683);w.exports=function _(m,p,t,d){var l=!t;t||(t={});for(var h=-1,f=p.length;++h<f;){var u=p[h],g=d?d(t[u],m[u],u,t,m):void 0;void 0===g&&(g=m[u]),l?x(t,u,g):c(t,u,g)}return t}},84444:(w,D,s)=>{var c=s(31989),x=s(39383);w.exports=function _(m,p){return c(m,x(m),p)}},59905:(w,D,s)=>{var c=s(31989),x=s(53051);w.exports=function _(m,p){return c(m,x(m),p)}},24610:(w,D,s)=>{var c=s(12119);w.exports=c["__core-js_shared__"]},84944:(w,D,s)=>{var c=s(23269),x=s(93342);w.exports=function _(m){return c(function(p,t){var d=-1,l=t.length,h=l>1?t[l-1]:void 0,f=l>2?t[2]:void 0;for(h=m.length>3&&"function"==typeof h?(l--,h):void 0,f&&x(t[0],t[1],f)&&(h=l<3?void 0:h,l=1),p=Object(p);++d<l;){var u=t[d];u&&m(p,u,d,h)}return p})}},16539:(w,D,s)=>{var c=s(56507);w.exports=function x(_,m){return function(p,t){if(null==p)return p;if(!c(p))return _(p,t);for(var d=p.length,l=m?d:-1,h=Object(p);(m?l--:++l<d)&&!1!==t(h[l],l,h););return p}}},40456:w=>{w.exports=function D(s){return function(c,x,_){for(var m=-1,p=Object(c),t=_(c),d=t.length;d--;){var l=t[s?d:++m];if(!1===x(p[l],l,p))break}return c}}},24653:(w,D,s)=>{var c=s(96517),x=s(56507),_=s(118);w.exports=function m(p){return function(t,d,l){var h=Object(t);if(!x(t)){var f=c(d,3);t=_(t),d=function(g){return f(h[g],g,h)}}var u=p(t,d,l);return u>-1?h[f?t[u]:u]:void 0}}},97509:(w,D,s)=>{var c=s(16307),x=s(93342),_=s(12232);w.exports=function m(p){return function(t,d,l){return l&&"number"!=typeof l&&x(t,d,l)&&(d=l=void 0),t=_(t),void 0===d?(d=t,t=0):d=_(d),l=void 0===l?t<d?1:-1:_(l),c(t,d,l,p)}}},14575:(w,D,s)=>{var c=s(46323),x=s(12552),_=s(24174),p=c&&1/_(new c([,-0]))[1]==1/0?function(t){return new c(t)}:x;w.exports=p},56713:(w,D,s)=>{var c=s(53436),x=function(){try{var _=c(Object,"defineProperty");return _({},"",{}),_}catch{}}();w.exports=x},63914:(w,D,s)=>{var c=s(58849),x=s(79503),_=s(25972);w.exports=function t(d,l,h,f,u,g){var C=1&h,L=d.length,I=l.length;if(L!=I&&!(C&&I>L))return!1;var B=g.get(d),M=g.get(l);if(B&&M)return B==l&&M==d;var F=-1,Z=!0,H=2&h?new c:void 0;for(g.set(d,l),g.set(l,d);++F<L;){var G=d[F],nt=l[F];if(f)var et=C?f(nt,G,F,l,d,g):f(G,nt,F,d,l,g);if(void 0!==et){if(et)continue;Z=!1;break}if(H){if(!x(l,function(st,K){if(!_(H,K)&&(G===st||u(G,st,h,f,g)))return H.push(K)})){Z=!1;break}}else if(G!==nt&&!u(G,nt,h,f,g)){Z=!1;break}}return g.delete(d),g.delete(l),Z}},78583:(w,D,s)=>{var c=s(60443),x=s(73457),_=s(20217),m=s(63914),p=s(83205),t=s(24174),H=c?c.prototype:void 0,G=H?H.valueOf:void 0;w.exports=function nt(et,st,K,$,it,at,X){switch(K){case"[object DataView]":if(et.byteLength!=st.byteLength||et.byteOffset!=st.byteOffset)return!1;et=et.buffer,st=st.buffer;case"[object ArrayBuffer]":return!(et.byteLength!=st.byteLength||!at(new x(et),new x(st)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+et,+st);case"[object Error]":return et.name==st.name&&et.message==st.message;case"[object RegExp]":case"[object String]":return et==st+"";case"[object Map]":var W=p;case"[object Set]":if(W||(W=t),et.size!=st.size&&!(1&$))return!1;var Y=X.get(et);if(Y)return Y==st;$|=2,X.set(et,st);var R=m(W(et),W(st),$,it,at,X);return X.delete(et),R;case"[object Symbol]":if(G)return G.call(et)==G.call(st)}return!1}},32286:(w,D,s)=>{var c=s(47597),m=Object.prototype.hasOwnProperty;w.exports=function p(t,d,l,h,f,u){var g=1&l,C=c(t),L=C.length;if(L!=c(d).length&&!g)return!1;for(var M=L;M--;){var F=C[M];if(!(g?F in d:m.call(d,F)))return!1}var Z=u.get(t),H=u.get(d);if(Z&&H)return Z==d&&H==t;var G=!0;u.set(t,d),u.set(d,t);for(var nt=g;++M<L;){var et=t[F=C[M]],st=d[F];if(h)var K=g?h(st,et,F,d,t,u):h(et,st,F,t,d,u);if(!(void 0===K?et===st||f(et,st,l,h,u):K)){G=!1;break}nt||(nt="constructor"==F)}if(G&&!nt){var $=t.constructor,it=d.constructor;$!=it&&"constructor"in t&&"constructor"in d&&!("function"==typeof $&&$ instanceof $&&"function"==typeof it&&it instanceof it)&&(G=!1)}return u.delete(t),u.delete(d),G}},3975:(w,D,s)=>{var c=s(22274),x=s(53983),_=s(72185);w.exports=function m(p){return _(x(p,void 0,c),p+"")}},79122:w=>{var D="object"==typeof global&&global&&global.Object===Object&&global;w.exports=D},47597:(w,D,s)=>{var c=s(38247),x=s(39383),_=s(118);w.exports=function m(p){return c(p,_,x)}},6967:(w,D,s)=>{var c=s(38247),x=s(53051),_=s(16555);w.exports=function m(p){return c(p,_,x)}},54537:(w,D,s)=>{var c=s(23819);w.exports=function x(_,m){var p=_.__data__;return c(m)?p["string"==typeof m?"string":"hash"]:p.map}},22379:(w,D,s)=>{var c=s(22442),x=s(118);w.exports=function _(m){for(var p=x(m),t=p.length;t--;){var d=p[t],l=m[d];p[t]=[d,l,c(l)]}return p}},53436:(w,D,s)=>{var c=s(37304),x=s(51990);w.exports=function _(m,p){var t=x(m,p);return c(t)?t:void 0}},29519:(w,D,s)=>{var x=s(69385)(Object.getPrototypeOf,Object);w.exports=x},21318:(w,D,s)=>{var c=s(60443),x=Object.prototype,_=x.hasOwnProperty,m=x.toString,p=c?c.toStringTag:void 0;w.exports=function t(d){var l=_.call(d,p),h=d[p];try{d[p]=void 0;var f=!0}catch{}var u=m.call(d);return f&&(l?d[p]=h:delete d[p]),u}},39383:(w,D,s)=>{var c=s(69779),x=s(49975),m=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols;w.exports=p?function(d){return null==d?[]:(d=Object(d),c(p(d),function(l){return m.call(d,l)}))}:x},53051:(w,D,s)=>{var c=s(85059),x=s(29519),_=s(39383),m=s(49975);w.exports=Object.getOwnPropertySymbols?function(d){for(var l=[];d;)c(l,_(d)),d=x(d);return l}:m},28794:(w,D,s)=>{var c=s(37244),x=s(51501),_=s(44267),m=s(46323),p=s(24243),t=s(93337),d=s(52827),l="[object Map]",f="[object Promise]",u="[object Set]",g="[object WeakMap]",C="[object DataView]",L=d(c),I=d(x),B=d(_),M=d(m),F=d(p),Z=t;(c&&Z(new c(new ArrayBuffer(1)))!=C||x&&Z(new x)!=l||_&&Z(_.resolve())!=f||m&&Z(new m)!=u||p&&Z(new p)!=g)&&(Z=function(H){var G=t(H),nt="[object Object]"==G?H.constructor:void 0,et=nt?d(nt):"";if(et)switch(et){case L:return C;case I:return l;case B:return f;case M:return u;case F:return g}return G}),w.exports=Z},51990:w=>{w.exports=function D(s,c){return s?.[c]}},47283:(w,D,s)=>{var c=s(65456),x=s(77151),_=s(21503),m=s(58442),p=s(96231),t=s(68533);w.exports=function d(l,h,f){for(var u=-1,g=(h=c(h,l)).length,C=!1;++u<g;){var L=t(h[u]);if(!(C=null!=l&&f(l,L)))break;l=l[L]}return C||++u!=g?C:!!(g=null==l?0:l.length)&&p(g)&&m(L,g)&&(_(l)||x(l))}},77609:w=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");w.exports=function d(l){return t.test(l)}},64312:(w,D,s)=>{var c=s(60862);w.exports=function x(){this.__data__=c?c(null):{},this.size=0}},46421:w=>{w.exports=function D(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}},15764:(w,D,s)=>{var c=s(60862),m=Object.prototype.hasOwnProperty;w.exports=function p(t){var d=this.__data__;if(c){var l=d[t];return"__lodash_hash_undefined__"===l?void 0:l}return m.call(d,t)?d[t]:void 0}},18685:(w,D,s)=>{var c=s(60862),_=Object.prototype.hasOwnProperty;w.exports=function m(p){var t=this.__data__;return c?void 0!==t[p]:_.call(t,p)}},26676:(w,D,s)=>{var c=s(60862);w.exports=function _(m,p){var t=this.__data__;return this.size+=this.has(m)?0:1,t[m]=c&&void 0===p?"__lodash_hash_undefined__":p,this}},76782:w=>{var s=Object.prototype.hasOwnProperty;w.exports=function c(x){var _=x.length,m=new x.constructor(_);return _&&"string"==typeof x[0]&&s.call(x,"index")&&(m.index=x.index,m.input=x.input),m}},37878:(w,D,s)=>{var c=s(43362),x=s(17e3),_=s(74098),m=s(62533),p=s(65208);w.exports=function K($,it,at){var X=$.constructor;switch(it){case"[object ArrayBuffer]":return c($);case"[object Boolean]":case"[object Date]":return new X(+$);case"[object DataView]":return x($,at);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return p($,at);case"[object Map]":case"[object Set]":return new X;case"[object Number]":case"[object String]":return new X($);case"[object RegExp]":return _($);case"[object Symbol]":return m($)}}},4264:(w,D,s)=>{var c=s(78858),x=s(29519),_=s(45488);w.exports=function m(p){return"function"!=typeof p.constructor||_(p)?{}:c(x(p))}},75039:(w,D,s)=>{var c=s(60443),x=s(77151),_=s(21503),m=c?c.isConcatSpreadable:void 0;w.exports=function p(t){return _(t)||x(t)||!!(m&&t&&t[m])}},58442:w=>{var s=/^(?:0|[1-9]\d*)$/;w.exports=function c(x,_){var m=typeof x;return!!(_=_??9007199254740991)&&("number"==m||"symbol"!=m&&s.test(x))&&x>-1&&x%1==0&&x<_}},93342:(w,D,s)=>{var c=s(20217),x=s(56507),_=s(58442),m=s(25940);w.exports=function p(t,d,l){if(!m(l))return!1;var h=typeof d;return!!("number"==h?x(l)&&_(d,l.length):"string"==h&&d in l)&&c(l[d],t)}},45352:(w,D,s)=>{var c=s(21503),x=s(44129),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;w.exports=function p(t,d){if(c(t))return!1;var l=typeof t;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=t&&!x(t))||m.test(t)||!_.test(t)||null!=d&&t in Object(d)}},23819:w=>{w.exports=function D(s){var c=typeof s;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==s:null===s}},91943:(w,D,s)=>{var m,c=s(24610),x=(m=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"";w.exports=function _(m){return!!x&&x in m}},45488:w=>{var D=Object.prototype;w.exports=function s(c){var x=c&&c.constructor;return c===("function"==typeof x&&x.prototype||D)}},22442:(w,D,s)=>{var c=s(25940);w.exports=function x(_){return _==_&&!c(_)}},41840:w=>{w.exports=function D(){this.__data__=[],this.size=0}},34378:(w,D,s)=>{var c=s(43503),_=Array.prototype.splice;w.exports=function m(p){var t=this.__data__,d=c(t,p);return!(d<0||(d==t.length-1?t.pop():_.call(t,d,1),--this.size,0))}},54981:(w,D,s)=>{var c=s(43503);w.exports=function x(_){var m=this.__data__,p=c(m,_);return p<0?void 0:m[p][1]}},67343:(w,D,s)=>{var c=s(43503);w.exports=function x(_){return c(this.__data__,_)>-1}},98895:(w,D,s)=>{var c=s(43503);w.exports=function x(_,m){var p=this.__data__,t=c(p,_);return t<0?(++this.size,p.push([_,m])):p[t][1]=m,this}},10638:(w,D,s)=>{var c=s(54994),x=s(9215),_=s(51501);w.exports=function m(){this.size=0,this.__data__={hash:new c,map:new(_||x),string:new c}}},11184:(w,D,s)=>{var c=s(54537);w.exports=function x(_){var m=c(this,_).delete(_);return this.size-=m?1:0,m}},70866:(w,D,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).get(_)}},43771:(w,D,s)=>{var c=s(54537);w.exports=function x(_){return c(this,_).has(_)}},51772:(w,D,s)=>{var c=s(54537);w.exports=function x(_,m){var p=c(this,_),t=p.size;return p.set(_,m),this.size+=p.size==t?0:1,this}},83205:w=>{w.exports=function D(s){var c=-1,x=Array(s.size);return s.forEach(function(_,m){x[++c]=[m,_]}),x}},642:w=>{w.exports=function D(s,c){return function(x){return null!=x&&x[s]===c&&(void 0!==c||s in Object(x))}}},15144:(w,D,s)=>{var c=s(30535);w.exports=function _(m){var p=c(m,function(d){return 500===t.size&&t.clear(),d}),t=p.cache;return p}},60862:(w,D,s)=>{var x=s(53436)(Object,"create");w.exports=x},85491:(w,D,s)=>{var x=s(69385)(Object.keys,Object);w.exports=x},32158:w=>{w.exports=function D(s){var c=[];if(null!=s)for(var x in Object(s))c.push(x);return c}},73597:(w,D,s)=>{w=s.nmd(w);var c=s(79122),x=D&&!D.nodeType&&D,_=x&&w&&!w.nodeType&&w,p=_&&_.exports===x&&c.process,t=function(){try{return _&&_.require&&_.require("util").types||p&&p.binding&&p.binding("util")}catch{}}();w.exports=t},92902:w=>{var s=Object.prototype.toString;w.exports=function c(x){return s.call(x)}},69385:w=>{w.exports=function D(s,c){return function(x){return s(c(x))}}},53983:(w,D,s)=>{var c=s(26999),x=Math.max;w.exports=function _(m,p,t){return p=x(void 0===p?m.length-1:p,0),function(){for(var d=arguments,l=-1,h=x(d.length-p,0),f=Array(h);++l<h;)f[l]=d[p+l];l=-1;for(var u=Array(p+1);++l<p;)u[l]=d[l];return u[p]=t(f),c(m,this,u)}}},12119:(w,D,s)=>{var c=s(79122),x="object"==typeof self&&self&&self.Object===Object&&self,_=c||x||Function("return this")();w.exports=_},99351:w=>{w.exports=function D(s,c){if(("constructor"!==c||"function"!=typeof s[c])&&"__proto__"!=c)return s[c]}},4600:w=>{w.exports=function s(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this}},31387:w=>{w.exports=function D(s){return this.__data__.has(s)}},24174:w=>{w.exports=function D(s){var c=-1,x=Array(s.size);return s.forEach(function(_){x[++c]=_}),x}},72185:(w,D,s)=>{var c=s(69510),_=s(10029)(c);w.exports=_},10029:w=>{var c=Date.now;w.exports=function x(_){var m=0,p=0;return function(){var t=c(),d=16-(t-p);if(p=t,d>0){if(++m>=800)return arguments[0]}else m=0;return _.apply(void 0,arguments)}}},13720:(w,D,s)=>{var c=s(9215);w.exports=function x(){this.__data__=new c,this.size=0}},64410:w=>{w.exports=function D(s){var c=this.__data__,x=c.delete(s);return this.size=c.size,x}},45576:w=>{w.exports=function D(s){return this.__data__.get(s)}},22247:w=>{w.exports=function D(s){return this.__data__.has(s)}},41585:(w,D,s)=>{var c=s(9215),x=s(51501),_=s(99850);w.exports=function p(t,d){var l=this.__data__;if(l instanceof c){var h=l.__data__;if(!x||h.length<199)return h.push([t,d]),this.size=++l.size,this;l=this.__data__=new _(h)}return l.set(t,d),this.size=l.size,this}},24977:w=>{w.exports=function D(s,c,x){for(var _=x-1,m=s.length;++_<m;)if(s[_]===c)return _;return-1}},52315:(w,D,s)=>{var c=s(75481),x=s(77609),_=s(81149);w.exports=function m(p){return x(p)?_(p):c(p)}},32855:(w,D,s)=>{var c=s(15144),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,m=c(function(p){var t=[];return 46===p.charCodeAt(0)&&t.push(""),p.replace(x,function(d,l,h,f){t.push(h?f.replace(_,"$1"):l||d)}),t});w.exports=m},68533:(w,D,s)=>{var c=s(44129);w.exports=function _(m){if("string"==typeof m||c(m))return m;var p=m+"";return"0"==p&&1/m==-1/0?"-0":p}},52827:w=>{var s=Function.prototype.toString;w.exports=function c(x){if(null!=x){try{return s.call(x)}catch{}try{return x+""}catch{}}return""}},42760:w=>{var D=/\s/;w.exports=function s(c){for(var x=c.length;x--&&D.test(c.charAt(x)););return x}},81149:w=>{var D="\\ud800-\\udfff",p="["+D+"]",t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",d="\\ud83c[\\udffb-\\udfff]",h="[^"+D+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",C="(?:"+t+"|"+d+")?",L="[\\ufe0e\\ufe0f]?",B=L+C+"(?:\\u200d(?:"+[h,f,u].join("|")+")"+L+C+")*",M="(?:"+[h+t+"?",t,f,u,p].join("|")+")",F=RegExp(d+"(?="+d+")|"+M+B,"g");w.exports=function Z(H){for(var G=F.lastIndex=0;F.test(H);)++G;return G}},11094:(w,D,s)=>{var c=s(44462);w.exports=function _(m){return c(m,4)}},90733:(w,D,s)=>{var c=s(44462);w.exports=function m(p){return c(p,5)}},76684:w=>{w.exports=function D(s){return function(){return s}}},28800:(w,D,s)=>{var c=s(23269),x=s(20217),_=s(93342),m=s(16555),p=Object.prototype,t=p.hasOwnProperty,d=c(function(l,h){l=Object(l);var f=-1,u=h.length,g=u>2?h[2]:void 0;for(g&&_(h[0],h[1],g)&&(u=1);++f<u;)for(var C=h[f],L=m(C),I=-1,B=L.length;++I<B;){var M=L[I],F=l[M];(void 0===F||x(F,p[M])&&!t.call(l,M))&&(l[M]=C[M])}return l});w.exports=d},35474:(w,D,s)=>{w.exports=s(89851)},20217:w=>{w.exports=function D(s,c){return s===c||s!=s&&c!=c}},35281:(w,D,s)=>{var c=s(69779),x=s(33609),_=s(96517),m=s(21503);w.exports=function p(t,d){return(m(t)?c:x)(t,_(d,3))}},62516:(w,D,s)=>{var _=s(24653)(s(36397));w.exports=_},36397:(w,D,s)=>{var c=s(65317),x=s(96517),_=s(44401),m=Math.max;w.exports=function p(t,d,l){var h=null==t?0:t.length;if(!h)return-1;var f=null==l?0:_(l);return f<0&&(f=m(h+f,0)),c(t,x(d,3),f)}},22274:(w,D,s)=>{var c=s(50686);w.exports=function x(_){return null!=_&&_.length?c(_,1):[]}},89851:(w,D,s)=>{var c=s(96837),x=s(43132),_=s(21481),m=s(21503);w.exports=function p(t,d){return(m(t)?c:x)(t,_(d))}},41176:(w,D,s)=>{var c=s(30755),x=s(21481),_=s(16555);w.exports=function m(p,t){return null==p?p:c(p,x(t),_)}},8817:(w,D,s)=>{var c=s(15456);w.exports=function x(_,m,p){var t=null==_?void 0:c(_,m);return void 0===t?p:t}},54842:(w,D,s)=>{var c=s(84781),x=s(47283);w.exports=function _(m,p){return null!=m&&x(m,p,c)}},11172:(w,D,s)=>{var c=s(69989),x=s(47283);w.exports=function _(m,p){return null!=m&&x(m,p,c)}},32608:w=>{w.exports=function D(s){return s}},77151:(w,D,s)=>{var c=s(60186),x=s(72671),_=Object.prototype,m=_.hasOwnProperty,p=_.propertyIsEnumerable,t=c(function(){return arguments}())?c:function(d){return x(d)&&m.call(d,"callee")&&!p.call(d,"callee")};w.exports=t},21503:w=>{w.exports=Array.isArray},56507:(w,D,s)=>{var c=s(75946),x=s(96231);w.exports=function _(m){return null!=m&&x(m.length)&&!c(m)}},92377:(w,D,s)=>{var c=s(56507),x=s(72671);w.exports=function _(m){return x(m)&&c(m)}},80891:(w,D,s)=>{w=s.nmd(w);var c=s(12119),x=s(63580),_=D&&!D.nodeType&&D,m=_&&w&&!w.nodeType&&w,t=m&&m.exports===_?c.Buffer:void 0;w.exports=(t?t.isBuffer:void 0)||x},71973:(w,D,s)=>{var c=s(81172),x=s(28794),_=s(77151),m=s(21503),p=s(56507),t=s(80891),d=s(45488),l=s(48159),g=Object.prototype.hasOwnProperty;w.exports=function C(L){if(null==L)return!0;if(p(L)&&(m(L)||"string"==typeof L||"function"==typeof L.splice||t(L)||l(L)||_(L)))return!L.length;var I=x(L);if("[object Map]"==I||"[object Set]"==I)return!L.size;if(d(L))return!c(L).length;for(var B in L)if(g.call(L,B))return!1;return!0}},75946:(w,D,s)=>{var c=s(93337),x=s(25940);w.exports=function d(l){if(!x(l))return!1;var h=c(l);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h}},96231:w=>{w.exports=function s(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991}},13222:(w,D,s)=>{var c=s(97021),x=s(85647),_=s(73597),m=_&&_.isMap,p=m?x(m):c;w.exports=p},25940:w=>{w.exports=function D(s){var c=typeof s;return null!=s&&("object"==c||"function"==c)}},72671:w=>{w.exports=function D(s){return null!=s&&"object"==typeof s}},97614:(w,D,s)=>{var c=s(93337),x=s(29519),_=s(72671),d=Function.prototype.toString,l=Object.prototype.hasOwnProperty,h=d.call(Object);w.exports=function f(u){if(!_(u)||"[object Object]"!=c(u))return!1;var g=x(u);if(null===g)return!0;var C=l.call(g,"constructor")&&g.constructor;return"function"==typeof C&&C instanceof C&&d.call(C)==h}},90799:(w,D,s)=>{var c=s(771),x=s(85647),_=s(73597),m=_&&_.isSet,p=m?x(m):c;w.exports=p},30248:(w,D,s)=>{var c=s(93337),x=s(21503),_=s(72671);w.exports=function p(t){return"string"==typeof t||!x(t)&&_(t)&&"[object String]"==c(t)}},44129:(w,D,s)=>{var c=s(93337),x=s(72671);w.exports=function m(p){return"symbol"==typeof p||x(p)&&"[object Symbol]"==c(p)}},48159:(w,D,s)=>{var c=s(1083),x=s(85647),_=s(73597),m=_&&_.isTypedArray,p=m?x(m):c;w.exports=p},34235:w=>{w.exports=function D(s){return void 0===s}},118:(w,D,s)=>{var c=s(72271),x=s(81172),_=s(56507);w.exports=function m(p){return _(p)?c(p):x(p)}},16555:(w,D,s)=>{var c=s(72271),x=s(92809),_=s(56507);w.exports=function m(p){return _(p)?c(p,!0):x(p)}},25809:w=>{w.exports=function D(s){var c=null==s?0:s.length;return c?s[c-1]:void 0}},19984:(w,D,s)=>{var c=s(84633),x=s(96517),_=s(92046),m=s(21503);w.exports=function p(t,d){return(m(t)?c:_)(t,x(d,3))}},10203:(w,D,s)=>{var c=s(85683),x=s(45184),_=s(96517);w.exports=function m(p,t){var d={};return t=_(t,3),x(p,function(l,h,f){c(d,h,t(l,h,f))}),d}},18176:(w,D,s)=>{var c=s(67308),x=s(31100),_=s(32608);w.exports=function m(p){return p&&p.length?c(p,_,x):void 0}},30535:(w,D,s)=>{var c=s(99850);function _(m,p){if("function"!=typeof m||null!=p&&"function"!=typeof p)throw new TypeError("Expected a function");var t=function(){var d=arguments,l=p?p.apply(this,d):d[0],h=t.cache;if(h.has(l))return h.get(l);var f=m.apply(this,d);return t.cache=h.set(l,f)||h,f};return t.cache=new(_.Cache||c),t}_.Cache=c,w.exports=_},80567:(w,D,s)=>{var c=s(73842),_=s(84944)(function(m,p,t){c(m,p,t)});w.exports=_},29439:(w,D,s)=>{var c=s(67308),x=s(99069),_=s(32608);w.exports=function m(p){return p&&p.length?c(p,_,x):void 0}},29525:(w,D,s)=>{var c=s(67308),x=s(96517),_=s(99069);w.exports=function m(p,t){return p&&p.length?c(p,x(t,2),_):void 0}},12552:w=>{w.exports=function D(){}},31710:(w,D,s)=>{var c=s(12119);w.exports=function(){return c.Date.now()}},16372:(w,D,s)=>{var c=s(83021),_=s(3975)(function(m,p){return null==m?{}:c(m,p)});w.exports=_},87495:(w,D,s)=>{var c=s(11847),x=s(39222),_=s(45352),m=s(68533);w.exports=function p(t){return _(t)?c(m(t)):x(t)}},90361:(w,D,s)=>{var x=s(97509)();w.exports=x},81337:(w,D,s)=>{var c=s(8745),x=s(43132),_=s(96517),m=s(13570),p=s(21503);w.exports=function t(d,l,h){var f=p(d)?c:m,u=arguments.length<3;return f(d,_(l,4),h,u,x)}},55637:(w,D,s)=>{var c=s(81172),x=s(28794),_=s(56507),m=s(30248),p=s(52315);w.exports=function l(h){if(null==h)return 0;if(_(h))return m(h)?p(h):h.length;var f=x(h);return"[object Map]"==f||"[object Set]"==f?h.size:c(h).length}},12906:(w,D,s)=>{var c=s(50686),x=s(6119),_=s(23269),m=s(93342),p=_(function(t,d){if(null==t)return[];var l=d.length;return l>1&&m(t,d[0],d[1])?d=[]:l>2&&m(d[0],d[1],d[2])&&(d=[d[0]]),x(t,c(d,1),[])});w.exports=p},49975:w=>{w.exports=function D(){return[]}},63580:w=>{w.exports=function D(){return!1}},12232:(w,D,s)=>{var c=s(51467),x=1/0;w.exports=function m(p){return p?(p=c(p))===x||p===-x?17976931348623157e292*(p<0?-1:1):p==p?p:0:0===p?p:0}},44401:(w,D,s)=>{var c=s(12232);w.exports=function x(_){var m=c(_),p=m%1;return m==m?p?m-p:m:0}},51467:(w,D,s)=>{var c=s(83348),x=s(25940),_=s(44129),p=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;w.exports=function h(f){if("number"==typeof f)return f;if(_(f))return NaN;if(x(f)){var u="function"==typeof f.valueOf?f.valueOf():f;f=x(u)?u+"":u}if("string"!=typeof f)return 0===f?f:+f;f=c(f);var g=t.test(f);return g||d.test(f)?l(f.slice(2),g?2:8):p.test(f)?NaN:+f}},8067:(w,D,s)=>{var c=s(31989),x=s(16555);w.exports=function _(m){return c(m,x(m))}},73943:(w,D,s)=>{var c=s(93935);w.exports=function x(_){return null==_?"":c(_)}},89416:(w,D,s)=>{var c=s(96837),x=s(78858),_=s(45184),m=s(96517),p=s(29519),t=s(21503),d=s(80891),l=s(75946),h=s(25940),f=s(48159);w.exports=function u(g,C,L){var I=t(g),B=I||d(g)||f(g);if(C=m(C,4),null==L){var M=g&&g.constructor;L=B?I?new M:[]:h(g)&&l(M)?x(p(g)):{}}return(B?c:_)(g,function(F,Z,H){return C(L,F,Z,H)}),L}},68921:(w,D,s)=>{var c=s(50686),x=s(23269),_=s(80707),m=s(92377),p=x(function(t){return _(c(t,1,m,!0))});w.exports=p},51541:(w,D,s)=>{var c=s(73943),x=0;w.exports=function _(m){var p=++x;return c(m)+p}},90377:(w,D,s)=>{var c=s(19179),x=s(118);w.exports=function _(m){return null==m?[]:c(m,x(m))}},21617:(w,D,s)=>{var c=s(89719),x=s(38645);w.exports=function _(m,p){return x(m||[],p||[],c)}},34315:(w,D,s)=>{"use strict";const c=Symbol.prototype.valueOf,x=s(52872);w.exports=function _(h,f){switch(x(h)){case"array":return h.slice();case"object":return Object.assign({},h);case"date":return new h.constructor(Number(h));case"map":return new Map(h);case"set":return new Set(h);case"buffer":return function d(h){const f=h.length,u=Buffer.allocUnsafe?Buffer.allocUnsafe(f):Buffer.from(f);return h.copy(u),u}(h);case"symbol":return function l(h){return c?Object(c.call(h)):{}}(h);case"arraybuffer":return function p(h){const f=new h.constructor(h.byteLength);return new Uint8Array(f).set(new Uint8Array(h)),f}(h);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function t(h,f){return new h.constructor(h.buffer,h.byteOffset,h.length)}(h);case"regexp":return function m(h){const f=void 0!==h.flags?h.flags:/\w+$/.exec(h)||void 0,u=new h.constructor(h.source,f);return u.lastIndex=h.lastIndex,u}(h);case"error":return Object.create(h);default:return h}}},67824:(w,D,s)=>{"use strict";function c(x){for(var _ in x)D.hasOwnProperty(_)||(D[_]=x[_])}Object.defineProperty(D,"__esModule",{value:!0}),c(s(95085)),c(s(26243)),c(s(91786)),c(s(30225)),c(s(76767)),c(s(30345)),c(s(15675)),c(s(86461)),c(s(58802)),c(s(33900)),c(s(88866)),c(s(94655)),c(s(4068)),c(s(33858)),c(s(98237)),c(s(83292))},95085:function(w,D,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(d){var l=p.call(this)||this,f=d;return f.trigger&&(l.trigger=f.trigger),f.kick&&(l.kick=f.kick),f.drag&&(l.drag=f.drag),f.on&&(l.on=f.on),l.dragstart=l.dragStart=x.Layout.dragStart,l.dragend=l.dragEnd=x.Layout.dragEnd,l}return c(t,p),t.prototype.trigger=function(d){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(d,l){return this},t}(x.Layout);D.LayoutAdaptor=_,D.adaptor=function m(p){return new _(p)}},83292:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(15675),x=s(76767);D.gridify=function _(t,d,l,h){t.cola.start(0,0,0,10,!1);var f=function m(t,d,l,h){t.forEach(function(u){u.routerNode={name:u.name,bounds:u.bounds.inflate(-l)}}),d.forEach(function(u){u.routerNode={bounds:u.bounds.inflate(-h),children:(typeof u.groups<"u"?u.groups.map(function(g){return t.length+g.id}):[]).concat(typeof u.leaves<"u"?u.leaves.map(function(g){return g.index}):[])}});var f=t.concat(d).map(function(u,g){return u.routerNode.id=g,u.routerNode});return new x.GridRouter(f,{getChildren:function(u){return u.children},getBounds:function(u){return u.bounds}},l-h)}(t.cola.nodes(),t.cola.groups(),l,h);return f.routeEdges(t.powerGraph.powerEdges,d,function(u){return u.source.routerNode.id},function(u){return u.target.routerNode.id})},D.powerGraphGridLayout=function p(t,d,l){var h;t.nodes.forEach(function(C,L){return C.index=L}),(new c.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(C){(h=C).groups.forEach(function(L){return L.padding=l})});var f=t.nodes.length,u=[],g=t.nodes.slice(0);return g.forEach(function(C,L){return C.index=L}),h.groups.forEach(function(C){var L=C.index=C.id+f;g.push(C),typeof C.leaves<"u"&&C.leaves.forEach(function(I){return u.push({source:L,target:I.index})}),typeof C.groups<"u"&&C.groups.forEach(function(I){return u.push({source:L,target:I.id+f})})}),h.powerEdges.forEach(function(C){u.push({source:C.source.index,target:C.target.index})}),(new c.Layout).size(d).nodes(g).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new c.Layout).convergenceThreshold(.001).size(d).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(C){(h=C).groups.forEach(function(L){L.padding=l})}).start(50,0,100,0,!1),powerGraph:h}}},26243:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(49346),x=s(22487);D.d3adaptor=function _(p){return!p||function m(p){return p.version&&null!==p.version.match(/^3\./)}(p)?new c.D3StyleLayoutAdaptor:new x.D3StyleLayoutAdaptor(p)}},49346:function(w,D,s){"use strict";var p,c=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(15675),_=function(p){function t(){var d=p.call(this)||this;d.event=d3.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=d3.behavior.drag().origin(x.Layout.dragOrigin).on("dragstart.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,d3.event),l.resume()}).on("dragend.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;this.call(f)},d}return c(t,p),t.prototype.trigger=function(d){var l={type:x.EventType[d.type],alpha:d.alpha,stress:d.stress};this.event[l.type](l)},t.prototype.kick=function(){var d=this;d3.timer(function(){return p.prototype.tick.call(d)})},t.prototype.on=function(d,l){return this.event.on("string"==typeof d?d:x.EventType[d],l),this},t}(x.Layout);D.D3StyleLayoutAdaptor=_,D.d3adaptor=function m(){return new _}},22487:function(w,D,s){"use strict";var m,c=this&&this.__extends||(m=function(p,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var h in l)l.hasOwnProperty(h)&&(d[h]=l[h])})(p,t)},function(p,t){function d(){this.constructor=p}m(p,t),p.prototype=null===t?Object.create(t):(d.prototype=t.prototype,new d)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(15675),_=function(m){function p(t){var d=m.call(this)||this;d.d3Context=t,d.event=t.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var l=d;return d.drag=function(){if(!f)var f=t.drag().subject(x.Layout.dragOrigin).on("start.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(u){x.Layout.drag(u,t.event),l.resume()}).on("end.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return f;arguments[0].call(f)},d}return c(p,m),p.prototype.trigger=function(t){var d={type:x.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(d.type,d)},p.prototype.kick=function(){var t=this,d=this.d3Context.timer(function(){return m.prototype.tick.call(t)&&d.stop()})},p.prototype.on=function(t,d){return this.event.on("string"==typeof t?t:x.EventType[t],d),this},p}(x.Layout);D.D3StyleLayoutAdaptor=_},91786:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function(){function _(){this.locks={}}return _.prototype.add=function(m,p){this.locks[m]=p},_.prototype.clear=function(){this.locks={}},_.prototype.isEmpty=function(){for(var m in this.locks)return!1;return!0},_.prototype.apply=function(m){for(var p in this.locks)m(Number(p),this.locks[p])},_}();D.Locks=s;var c=function(){function _(m,p,t){void 0===t&&(t=null),this.D=p,this.G=t,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new x,this.project=null,this.x=m,this.k=m.length;var d=this.n=m[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new s,this.minD=Number.MAX_VALUE;for(var h,l=d;l--;)for(h=d;--h>l;){var f=p[l][h];f>0&&f<this.minD&&(this.minD=f)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),l=this.k;l--;){for(this.g[l]=new Array(d),this.H[l]=new Array(d),h=d;h--;)this.H[l][h]=new Array(d);this.Hd[l]=new Array(d),this.a[l]=new Array(d),this.b[l]=new Array(d),this.c[l]=new Array(d),this.d[l]=new Array(d),this.e[l]=new Array(d),this.ia[l]=new Array(d),this.ib[l]=new Array(d),this.xtmp[l]=new Array(d)}}return _.createSquareMatrix=function(m,p){for(var t=new Array(m),d=0;d<m;++d){t[d]=new Array(m);for(var l=0;l<m;++l)t[d][l]=p(d,l)}return t},_.prototype.offsetDir=function(){for(var m=this,p=new Array(this.k),t=0,d=0;d<this.k;++d){var l=p[d]=this.random.getNextBetween(.01,1)-.5;t+=l*l}return t=Math.sqrt(t),p.map(function(h){return h*(m.minD/t)})},_.prototype.computeDerivatives=function(m){var p=this,t=this.n;if(!(t<1)){for(var d,l=new Array(this.k),h=new Array(this.k),f=new Array(this.k),u=0,g=0;g<t;++g){for(d=0;d<this.k;++d)f[d]=this.g[d][g]=0;for(var C=0;C<t;++C)if(g!==C){for(var L=t;L--;){var I=0;for(d=0;d<this.k;++d){var B=l[d]=m[d][g]-m[d][C];I+=h[d]=B*B}if(I>1e-9)break;var M=this.offsetDir();for(d=0;d<this.k;++d)m[d][C]+=M[d]}var F=Math.sqrt(I),Z=this.D[g][C],H=null!=this.G?this.G[g][C]:1;if(H>1&&F>Z||!isFinite(Z)){for(d=0;d<this.k;++d)this.H[d][g][C]=0;continue}H>1&&(H=1);var G=Z*Z,nt=2*H*(F-Z)/(G*F),et=F*F*F,st=2*-H/(G*et);for(isFinite(nt)||console.log(nt),d=0;d<this.k;++d)this.g[d][g]+=l[d]*nt,f[d]-=this.H[d][g][C]=st*(et+Z*(h[d]-I)+F*I)}for(d=0;d<this.k;++d)u=Math.max(u,this.H[d][g][g]=f[d])}var K=this.snapGridSize/2,$=this.snapGridSize,at=this.snapStrength/(K*K),X=this.numGridSnapNodes;for(g=0;g<X;++g)for(d=0;d<this.k;++d){var W=this.x[d][g],q=W/$,Y=q%1,R=q-Y;-K<(B=Math.abs(Y)<=.5?W-R*$:W>0?W-(R+1)*$:W-(R-1)*$)&&B<=K&&(this.scaleSnapByMaxH?(this.g[d][g]+=u*at*B,this.H[d][g][g]+=u*at):(this.g[d][g]+=at*B,this.H[d][g][g]+=at))}this.locks.isEmpty()||this.locks.apply(function(pt,St){for(d=0;d<p.k;++d)p.H[d][pt][pt]+=u,p.g[d][pt]-=u*(St[d]-m[d][pt])})}},_.dotProd=function(m,p){for(var t=0,d=m.length;d--;)t+=m[d]*p[d];return t},_.rightMultiply=function(m,p,t){for(var d=m.length;d--;)t[d]=_.dotProd(m[d],p)},_.prototype.computeStepSize=function(m){for(var p=0,t=0,d=0;d<this.k;++d)p+=_.dotProd(this.g[d],m[d]),_.rightMultiply(this.H[d],m[d],this.Hd[d]),t+=_.dotProd(m[d],this.Hd[d]);return 0!==t&&isFinite(t)?1*p/t:0},_.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var m=this.computeStepSize(this.g),p=0;p<this.k;++p)this.takeDescentStep(this.x[p],this.g[p],m);return this.computeStress()},_.copy=function(m,p){for(var t=m.length,d=p[0].length,l=0;l<t;++l)for(var h=0;h<d;++h)p[l][h]=m[l][h]},_.prototype.stepAndProject=function(m,p,t,d){_.copy(m,p),this.takeDescentStep(p[0],t[0],d),this.project&&this.project[0](m[0],m[1],p[0]),this.takeDescentStep(p[1],t[1],d),this.project&&this.project[1](p[0],m[1],p[1]);for(var l=2;l<this.k;l++)this.takeDescentStep(p[l],t[l],d)},_.mApply=function(m,p,t){for(var d=m;d-- >0;)for(var l=p;l-- >0;)t(d,l)},_.prototype.matrixApply=function(m){_.mApply(this.k,this.n,m)},_.prototype.computeNextPosition=function(m,p){var t=this;this.computeDerivatives(m);var d=this.computeStepSize(this.g);if(this.stepAndProject(m,p,this.g,d),this.project){this.matrixApply(function(h,f){return t.e[h][f]=m[h][f]-p[h][f]});var l=this.computeStepSize(this.e);l=Math.max(.2,Math.min(l,1)),this.stepAndProject(m,p,this.e,l)}},_.prototype.run=function(m){for(var p=Number.MAX_VALUE,t=!1;!t&&m-- >0;){var d=this.rungeKutta();t=Math.abs(p/d-1)<this.threshold,p=d}return p},_.prototype.rungeKutta=function(){var m=this;this.computeNextPosition(this.x,this.a),_.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),_.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var p=0;return this.matrixApply(function(t,d){var l=(m.a[t][d]+2*m.b[t][d]+2*m.c[t][d]+m.d[t][d])/6,h=m.x[t][d]-l;p+=h*h,m.x[t][d]=l}),p},_.mid=function(m,p,t){_.mApply(m.length,m[0].length,function(d,l){return t[d][l]=m[d][l]+(p[d][l]-m[d][l])/2})},_.prototype.takeDescentStep=function(m,p,t){for(var d=0;d<this.n;++d)m[d]=m[d]-t*p[d]},_.prototype.computeStress=function(){for(var m=0,p=0,t=this.n-1;p<t;++p)for(var d=p+1,l=this.n;d<l;++d){for(var h=0,f=0;f<this.k;++f){var u=this.x[f][p]-this.x[f][d];h+=u*u}h=Math.sqrt(h);var g=this.D[p][d];if(isFinite(g)){var C=g-h;m+=C*C/(g*g)}}return m},_.zeroDistance=1e-10,_}();D.Descent=c;var x=function(){function _(m){void 0===m&&(m=1),this.seed=m,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return _.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},_.prototype.getNextBetween=function(m,p){return m+this.getNext()*(p-m)},_}();D.PseudoRandom=x},30225:function(w,D,s){"use strict";var Y,c=this&&this.__extends||(Y=function(R,E){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,St){pt.__proto__=St}||function(pt,St){for(var Mt in St)St.hasOwnProperty(Mt)&&(pt[Mt]=St[Mt])})(R,E)},function(R,E){function pt(){this.constructor=R}Y(R,E),R.prototype=null===E?Object.create(E):(pt.prototype=E.prototype,new pt)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(4068),_=function Y(){};D.Point=_;var m=function Y(R,E,pt,St){this.x1=R,this.y1=E,this.x2=pt,this.y2=St};D.LineSegment=m;var p=function(Y){function R(){return null!==Y&&Y.apply(this,arguments)||this}return c(R,Y),R}(_);function t(Y,R,E){return(R.x-Y.x)*(E.y-Y.y)-(E.x-Y.x)*(R.y-Y.y)}function d(Y,R,E){return t(Y,R,E)>0}function l(Y,R,E){return t(Y,R,E)<0}function C(Y,R){var E=R.slice(0);return E.push(R[0]),{rtan:L(Y,E),ltan:I(Y,E)}}function L(Y,R){var pt,St,Mt,Jt,E=R.length-1;if(l(Y,R[1],R[0])&&!d(Y,R[E-1],R[0]))return 0;for(pt=0,St=E;;){if(St-pt==1)return d(Y,R[pt],R[St])?pt:St;if((Jt=l(Y,R[(Mt=Math.floor((pt+St)/2))+1],R[Mt]))&&!d(Y,R[Mt-1],R[Mt]))return Mt;d(Y,R[pt+1],R[pt])?Jt||d(Y,R[pt],R[Mt])?St=Mt:pt=Mt:Jt&&l(Y,R[pt],R[Mt])?St=Mt:pt=Mt}}function I(Y,R){var pt,St,Mt,Jt,E=R.length-1;if(d(Y,R[E-1],R[0])&&!l(Y,R[1],R[0]))return 0;for(pt=0,St=E;;){if(St-pt==1)return l(Y,R[pt],R[St])?pt:St;if(Jt=l(Y,R[(Mt=Math.floor((pt+St)/2))+1],R[Mt]),d(Y,R[Mt-1],R[Mt])&&!Jt)return Mt;l(Y,R[pt+1],R[pt])?Jt?l(Y,R[pt],R[Mt])?St=Mt:pt=Mt:St=Mt:Jt?pt=Mt:d(Y,R[pt],R[Mt])?St=Mt:pt=Mt}}function B(Y,R,E,pt,St,Mt){var Et,Jt;Jt=pt(Y[Et=E(R[0],Y)],R);for(var ue=!1;!ue;){for(ue=!0;Et===Y.length-1&&(Et=0),!St(R[Jt],Y[Et],Y[Et+1]);)++Et;for(;0===Jt&&(Jt=R.length-1),!Mt(Y[Et],R[Jt],R[Jt-1]);)--Jt,ue=!1}return{t1:Et,t2:Jt}}function F(Y,R){return B(Y,R,L,I,d,l)}D.PolyPoint=p,D.isLeft=t,D.ConvexHull=function h(Y){var pt,R=Y.slice(0).sort(function(_t,Xt){return _t.x!==Xt.x?Xt.x-_t.x:Xt.y-_t.y}),E=Y.length,Mt=R[0].x;for(pt=1;pt<E&&R[pt].x===Mt;++pt);var Et=pt-1,Jt=[];if(Jt.push(R[0]),Et===E-1)R[Et].y!==R[0].y&&Jt.push(R[Et]);else{var ue,wt=E-1,yt=R[E-1].x;for(pt=E-2;pt>=0&&R[pt].x===yt;pt--);for(ue=pt+1,pt=Et;++pt<=ue;)if(!(t(R[0],R[ue],R[pt])>=0&&pt<ue)){for(;Jt.length>1&&!(t(Jt[Jt.length-2],Jt[Jt.length-1],R[pt])>0);)Jt.length-=1;0!=pt&&Jt.push(R[pt])}wt!=ue&&Jt.push(R[wt]);var Nt=Jt.length;for(pt=ue;--pt>=Et;)if(!(t(R[wt],R[Et],R[pt])>=0&&pt>Et)){for(;Jt.length>Nt&&!(t(Jt[Jt.length-2],Jt[Jt.length-1],R[pt])>0);)Jt.length-=1;0!=pt&&Jt.push(R[pt])}}return Jt},D.clockwiseRadialSweep=function f(Y,R,E){R.slice(0).sort(function(pt,St){return Math.atan2(pt.y-Y.y,pt.x-Y.x)-Math.atan2(St.y-Y.y,St.x-Y.x)}).forEach(E)},D.tangent_PolyPolyC=B,D.LRtangent_PolyPolyC=function M(Y,R){var E=F(R,Y);return{t1:E.t2,t2:E.t1}},D.RLtangent_PolyPolyC=F,D.LLtangent_PolyPolyC=function Z(Y,R){return B(Y,R,I,I,l,l)},D.RRtangent_PolyPolyC=function H(Y,R){return B(Y,R,L,L,d,d)};var G=function Y(R,E){this.t1=R,this.t2=E};D.BiTangent=G;var nt=function Y(){};D.BiTangents=nt;var et=function(Y){function R(){return null!==Y&&Y.apply(this,arguments)||this}return c(R,Y),R}(_);D.TVGPoint=et;var st=function Y(R,E,pt,St){this.id=R,this.polyid=E,this.polyvertid=pt,this.p=St,St.vv=this};D.VisibilityVertex=st;var K=function(){function Y(R,E){this.source=R,this.target=E}return Y.prototype.length=function(){var R=this.source.p.x-this.target.p.x,E=this.source.p.y-this.target.p.y;return Math.sqrt(R*R+E*E)},Y}();D.VisibilityEdge=K;var $=function(){function Y(R,E){if(this.P=R,this.V=[],this.E=[],E)this.V=E.V.slice(0),this.E=E.E.slice(0);else{for(var pt=R.length,St=0;St<pt;St++){for(var Mt=R[St],Et=0;Et<Mt.length;++Et){var ue=new st(this.V.length,St,Et,Mt[Et]);this.V.push(ue),Et>0&&this.E.push(new K(Mt[Et-1].vv,ue))}Mt.length>1&&this.E.push(new K(Mt[0].vv,Mt[Mt.length-1].vv))}for(St=0;St<pt-1;St++){var wt=R[St];for(Et=St+1;Et<pt;Et++){var yt=R[Et],Nt=at(wt,yt);for(var _t in Nt){var Xt=Nt[_t];this.addEdgeIfVisible(wt[Xt.t1],yt[Xt.t2],St,Et)}}}}}return Y.prototype.addEdgeIfVisible=function(R,E,pt,St){this.intersectsPolys(new m(R.x,R.y,E.x,E.y),pt,St)||this.E.push(new K(R.vv,E.vv))},Y.prototype.addPoint=function(R,E){var pt=this.P.length;this.V.push(new st(this.V.length,pt,0,R));for(var St=0;St<pt;++St)if(St!==E){var Mt=this.P[St],Et=C(R,Mt);this.addEdgeIfVisible(R,Mt[Et.ltan],E,St),this.addEdgeIfVisible(R,Mt[Et.rtan],E,St)}return R.vv},Y.prototype.intersectsPolys=function(R,E,pt){for(var St=0,Mt=this.P.length;St<Mt;++St)if(St!=E&&St!=pt&&it(R,this.P[St]).length>0)return!0;return!1},Y}();function it(Y,R){for(var E=[],pt=1,St=R.length;pt<St;++pt){var Mt=x.Rectangle.lineIntersection(Y.x1,Y.y1,Y.x2,Y.y2,R[pt-1].x,R[pt-1].y,R[pt].x,R[pt].y);Mt&&E.push(Mt)}return E}function at(Y,R){for(var E=Y.length-1,pt=R.length-1,St=new nt,Mt=0;Mt<E;++Mt)for(var Et=0;Et<pt;++Et){var Jt=Y[0==Mt?E-1:Mt-1],ue=Y[Mt],wt=Y[Mt+1],yt=R[0==Et?pt-1:Et-1],Nt=R[Et],_t=R[Et+1],Xt=t(Jt,ue,Nt),Ft=t(ue,yt,Nt),Ht=t(ue,Nt,_t),he=t(yt,Nt,ue),ke=t(Nt,Jt,ue),Ie=t(Nt,ue,wt);Xt>=0&&Ft>=0&&Ht<0&&he>=0&&ke>=0&&Ie<0?St.ll=new G(Mt,Et):Xt<=0&&Ft<=0&&Ht>0&&he<=0&&ke<=0&&Ie>0?St.rr=new G(Mt,Et):Xt<=0&&Ft>0&&Ht<=0&&he>=0&&ke<0&&Ie>=0?St.rl=new G(Mt,Et):Xt>=0&&Ft<0&&Ht>=0&&he<=0&&ke>0&&Ie<=0&&(St.lr=new G(Mt,Et))}return St}function W(Y,R){return!Y.every(function(E){return!function X(Y,R){for(var E=1,pt=R.length;E<pt;++E)if(l(R[E-1],R[E],Y))return!1;return!0}(E,R)})}D.TangentVisibilityGraph=$,D.tangents=at,D.polysOverlap=function q(Y,R){if(W(Y,R)||W(R,Y))return!0;for(var E=1,pt=Y.length;E<pt;++E){var St=Y[E],Mt=Y[E-1];if(it(new m(Mt.x,Mt.y,St.x,St.y),R).length>0)return!0}return!1}},76767:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(4068),x=s(98237),_=s(33858),m=function l(h,f,u){this.id=h,this.rect=f,this.children=u,this.leaf=typeof u>"u"||0===u.length};D.NodeWrapper=m;var p=function l(h,f,u,g,C){void 0===g&&(g=null),void 0===C&&(C=null),this.id=h,this.x=f,this.y=u,this.node=g,this.line=C};D.Vert=p;var t=function(){function l(h,f){this.s=h,this.t=f;var u=l.findMatch(h,f),g=f.slice(0).reverse(),C=l.findMatch(h,g);u.length>=C.length?(this.length=u.length,this.si=u.si,this.ti=u.ti,this.reversed=!1):(this.length=C.length,this.si=C.si,this.ti=f.length-C.ti-C.length,this.reversed=!0)}return l.findMatch=function(h,f){for(var u=h.length,g=f.length,C={length:0,si:-1,ti:-1},L=new Array(u),I=0;I<u;I++){L[I]=new Array(g);for(var B=0;B<g;B++)if(h[I]===f[B]){var M=L[I][B]=0===I||0===B?1:L[I-1][B-1]+1;M>C.length&&(C.length=M,C.si=I-M+1,C.ti=B-M+1)}else L[I][B]=0}return C},l.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},l}();D.LongestCommonSubsequence=t;var d=function(){function l(h,f,u){var g=this;void 0===u&&(u=12),this.originalnodes=h,this.groupPadding=u,this.leaves=null,this.nodes=h.map(function(et,st){return new m(st,f.getBounds(et),f.getChildren(et))}),this.leaves=this.nodes.filter(function(et){return et.leaf}),this.groups=this.nodes.filter(function(et){return!et.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(et){return et.children.forEach(function(st){return g.nodes[st].parent=et})}),this.root={children:[]},this.nodes.forEach(function(et){typeof et.parent>"u"&&(et.parent=g.root,g.root.children.push(et.id)),et.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(et,st){return g.getDepth(et)-g.getDepth(st)}),this.backToFront.slice(0).reverse().filter(function(et){return!et.leaf}).forEach(function(et){var st=c.Rectangle.empty();et.children.forEach(function(K){return st=st.union(g.nodes[K].rect)}),et.rect=st.inflate(g.groupPadding)});var L=this.midPoints(this.cols.map(function(et){return et.pos})),I=this.midPoints(this.rows.map(function(et){return et.pos})),B=L[0],M=L[L.length-1],F=I[0],Z=I[I.length-1],H=this.rows.map(function(et){return{x1:B,x2:M,y1:et.pos,y2:et.pos}}).concat(I.map(function(et){return{x1:B,x2:M,y1:et,y2:et}})),G=this.cols.map(function(et){return{x1:et.pos,x2:et.pos,y1:F,y2:Z}}).concat(L.map(function(et){return{x1:et,x2:et,y1:F,y2:Z}})),nt=H.concat(G);nt.forEach(function(et){return et.verts=[]}),this.verts=[],this.edges=[],H.forEach(function(et){return G.forEach(function(st){var K=new p(g.verts.length,st.x1,et.y1);et.verts.push(K),st.verts.push(K),g.verts.push(K);for(var $=g.backToFront.length;$-- >0;){var it=g.backToFront[$],at=it.rect,X=Math.abs(K.x-at.cx()),W=Math.abs(K.y-at.cy());if(X<at.width()/2&&W<at.height()/2){K.node=it;break}}})}),nt.forEach(function(et,st){g.nodes.forEach(function(W,q){W.rect.lineIntersections(et.x1,et.y1,et.x2,et.y2).forEach(function(Y,R){var E=new p(g.verts.length,Y.x,Y.y,W,et);g.verts.push(E),et.verts.push(E),W.ports.push(E)})});var K=Math.abs(et.y1-et.y2)<.1,$=function(W,q){return K?q.x-W.x:q.y-W.y};et.verts.sort($);for(var it=1;it<et.verts.length;it++){var at=et.verts[it-1],X=et.verts[it];at.node&&at.node===X.node&&at.node.leaf||g.edges.push({source:at.id,target:X.id,length:Math.abs($(at,X))})}})}return l.prototype.avg=function(h){return h.reduce(function(f,u){return f+u})/h.length},l.prototype.getGridLines=function(h){for(var f=[],u=this.leaves.slice(0,this.leaves.length);u.length>0;){var g=u.filter(function(L){return L.rect["overlap"+h.toUpperCase()](u[0].rect)}),C={nodes:g,pos:this.avg(g.map(function(L){return L.rect["c"+h]()}))};f.push(C),C.nodes.forEach(function(L){return u.splice(u.indexOf(L),1)})}return f.sort(function(L,I){return L.pos-I.pos}),f},l.prototype.getDepth=function(h){for(var f=0;h.parent!==this.root;)f++,h=h.parent;return f},l.prototype.midPoints=function(h){for(var f=h[1]-h[0],u=[h[0]-f/2],g=1;g<h.length;g++)u.push((h[g]+h[g-1])/2);return u.push(h[h.length-1]+f/2),u},l.prototype.findLineage=function(h){var f=[h];do{f.push(h=h.parent)}while(h!==this.root);return f.reverse()},l.prototype.findAncestorPathBetween=function(h,f){for(var u=this.findLineage(h),g=this.findLineage(f),C=0;u[C]===g[C];)C++;return{commonAncestor:u[C-1],lineages:u.slice(C).concat(g.slice(C))}},l.prototype.siblingObstacles=function(h,f){var u=this,g=this.findAncestorPathBetween(h,f),C={};g.lineages.forEach(function(I){return C[I.id]={}});var L=g.commonAncestor.children.filter(function(I){return!(I in C)});return g.lineages.filter(function(I){return I.parent!==g.commonAncestor}).forEach(function(I){return L=L.concat(I.parent.children.filter(function(B){return B!==I.id}))}),L.map(function(I){return u.nodes[I]})},l.getSegmentSets=function(h,f,u){for(var g=[],C=0;C<h.length;C++)for(var L=h[C],I=0;I<L.length;I++)(B=L[I]).edgeid=C,B.i=I,Math.abs(B[1][f]-B[0][f])<.1&&g.push(B);g.sort(function(G,nt){return G[0][f]-nt[0][f]});for(var F=[],Z=null,H=0;H<g.length;H++){var B=g[H];(!Z||Math.abs(B[0][f]-Z.pos)>.1)&&F.push(Z={pos:B[0][f],segments:[]}),Z.segments.push(B)}return F},l.nudgeSegs=function(h,f,u,g,C,L){var I=g.length;if(!(I<=1)){for(var B=g.map(function(it){return new x.Variable(it[0][h])}),M=[],F=0;F<I;F++)for(var Z=0;Z<I;Z++)if(F!==Z){var H=g[F],nt=H.edgeid,et=g[Z].edgeid,st=-1,K=-1;"x"==h?C(nt,et)&&(H[0][f]<H[1][f]?(st=Z,K=F):(st=F,K=Z)):C(nt,et)&&(H[0][f]<H[1][f]?(st=F,K=Z):(st=Z,K=F)),st>=0&&M.push(new x.Constraint(B[st],B[K],L))}new x.Solver(B,M).solve(),B.forEach(function(it,at){var X=g[at],W=it.position();X[0][h]=X[1][h]=W;var q=u[X.edgeid];X.i>0&&(q[X.i-1][1][h]=W),X.i<q.length-1&&(q[X.i+1][0][h]=W)})}},l.nudgeSegments=function(h,f,u,g,C){for(var L=l.getSegmentSets(h,f,u),I=0;I<L.length;I++){for(var B=L[I],M=[],F=0;F<B.segments.length;F++){var Z=B.segments[F];M.push({type:0,s:Z,pos:Math.min(Z[0][u],Z[1][u])}),M.push({type:1,s:Z,pos:Math.max(Z[0][u],Z[1][u])})}M.sort(function(nt,et){return nt.pos-et.pos+nt.type-et.type});var H=[],G=0;M.forEach(function(nt){0===nt.type?(H.push(nt.s),G++):G--,0==G&&(l.nudgeSegs(f,u,h,H,g,C),H=[])})}},l.prototype.routeEdges=function(h,f,u,g){var C=this,L=h.map(function(M){return C.route(u(M),g(M))}),I=l.orderEdges(L),B=L.map(function(M){return l.makeSegments(M)});return l.nudgeSegments(B,"x","y",I,f),l.nudgeSegments(B,"y","x",I,f),l.unreverseEdges(B,L),B},l.unreverseEdges=function(h,f){h.forEach(function(u,g){f[g].reversed&&(u.reverse(),u.forEach(function(L){L.reverse()}))})},l.angleBetween2Lines=function(h,f){var u=Math.atan2(h[0].y-h[1].y,h[0].x-h[1].x),g=Math.atan2(f[0].y-f[1].y,f[0].x-f[1].x),C=u-g;return(C>Math.PI||C<-Math.PI)&&(C=g-u),C},l.isLeft=function(h,f,u){return(f.x-h.x)*(u.y-h.y)-(f.y-h.y)*(u.x-h.x)<=0},l.getOrder=function(h){for(var f={},u=0;u<h.length;u++){var g=h[u];typeof f[g.l]>"u"&&(f[g.l]={}),f[g.l][g.r]=!0}return function(C,L){return typeof f[C]<"u"&&f[C][L]}},l.orderEdges=function(h){for(var f=[],u=0;u<h.length-1;u++)for(var g=u+1;g<h.length;g++){var B,M,F,C=h[u],L=h[g],I=new t(C,L);if(0!==I.length){if(I.reversed&&(L.reverse(),L.reversed=!0,I=new t(C,L)),(I.si<=0||I.ti<=0)&&(I.si+I.length>=C.length||I.ti+I.length>=L.length)){f.push({l:u,r:g});continue}I.si+I.length>=C.length||I.ti+I.length>=L.length?(B=C[I.si+1],F=C[I.si-1],M=L[I.ti-1]):(B=C[I.si+I.length-2],M=C[I.si+I.length],F=L[I.ti+I.length]),l.isLeft(B,M,F)?f.push({l:g,r:u}):f.push({l:u,r:g})}}return l.getOrder(f)},l.makeSegments=function(h){function f(M){return{x:M.x,y:M.y}}for(var g=[],C=f(h[0]),L=1;L<h.length;L++){var I=f(h[L]),B=L<h.length-1?h[L+1]:null;(!B||(M=C,F=I,Z=B,!(Math.abs((F.x-M.x)*(Z.y-M.y)-(F.y-M.y)*(Z.x-M.x))<.001)))&&(g.push([C,I]),C=I)}var M,F,Z;return g},l.prototype.route=function(h,f){var u=this,g=this.nodes[h],C=this.nodes[f];this.obstacles=this.siblingObstacles(g,C);var L={};this.obstacles.forEach(function(K){return L[K.id]=K}),this.passableEdges=this.edges.filter(function(K){var $=u.verts[K.source],it=u.verts[K.target];return!($.node&&$.node.id in L||it.node&&it.node.id in L)});for(var I=1;I<g.ports.length;I++)this.passableEdges.push({source:g.ports[0].id,target:g.ports[I].id,length:0});for(I=1;I<C.ports.length;I++)this.passableEdges.push({source:C.ports[0].id,target:C.ports[I].id,length:0});var st=new _.Calculator(this.verts.length,this.passableEdges,function(K){return K.source},function(K){return K.target},function(K){return K.length}).PathFromNodeToNodeWithPrevCost(g.ports[0].id,C.ports[0].id,function(K,$,it){var at=u.verts[K],X=u.verts[$],W=u.verts[it],q=Math.abs(W.x-at.x),Y=Math.abs(W.y-at.y);return at.node===g&&at.node===X.node||X.node===C&&X.node===W.node?0:q>1&&Y>1?1e3:0}).reverse().map(function(K){return u.verts[K]});return st.push(this.nodes[C.id].ports[0]),st.filter(function(K,$){return!($<st.length-1&&st[$+1].node===g&&K.node===g||$>0&&K.node===C&&st[$-1].node===C)})},l.getRoutePath=function(h,f,u,g){var I,B,M,q,Y,C={routepath:"M "+h[0][0].x+" "+h[0][0].y+" ",arrowpath:""};if(h.length>1)for(var L=0;L<h.length;L++){var F=(B=(I=h[L])[1].x)-I[0].x,Z=(M=I[1].y)-I[0].y;if(L<h.length-1){Math.abs(F)>0?B-=F/Math.abs(F)*f:M-=Z/Math.abs(Z)*f,C.routepath+="L "+B+" "+M+" ";var H=h[L+1],G=H[0].x,nt=H[0].y;F=H[1].x-G,Z=H[1].y-nt;var $,it,K=l.angleBetween2Lines(I,H)<0?1:0;Math.abs(F)>0?($=G+F/Math.abs(F)*f,it=nt):($=G,it=nt+Z/Math.abs(Z)*f);var at=Math.abs($-B),X=Math.abs(it-M);C.routepath+="A "+at+" "+X+" 0 0 "+K+" "+$+" "+it+" "}else{var W=[B,M];Math.abs(F)>0?(q=[B-=F/Math.abs(F)*g,M+u],Y=[B,M-u]):(q=[B+u,M-=Z/Math.abs(Z)*g],Y=[B-u,M]),C.routepath+="L "+B+" "+M+" ",g>0&&(C.arrowpath="M "+W[0]+" "+W[1]+" L "+q[0]+" "+q[1]+" L "+Y[0]+" "+Y[1])}}else F=(B=(I=h[0])[1].x)-I[0].x,Z=(M=I[1].y)-I[0].y,W=[B,M],Math.abs(F)>0?(q=[B-=F/Math.abs(F)*g,M+u],Y=[B,M-u]):(q=[B+u,M-=Z/Math.abs(Z)*g],Y=[B-u,M]),C.routepath+="L "+B+" "+M+" ",g>0&&(C.arrowpath="M "+W[0]+" "+W[1]+" L "+q[0]+" "+q[1]+" L "+Y[0]+" "+Y[1]);return C},l}();D.GridRouter=d},30345:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s_GOLDEN_SECTION=(1+Math.sqrt(5))/2;D.applyPacking=function c(_,m,p,L,C,l){void 0===C&&(C=1),void 0===l&&(l=!0);var u=m,g=p,I=(C=typeof C<"u"?C:1,L=typeof L<"u"?L:0,0),B=0,M=0,F=0,Z=[];function et(it,at){Z=[],I=0,B=0,F=0;for(var X=0;X<it.length;X++)st(it[X],at);return Math.abs(function $(){return I/B}()-C)}function st(it,at){for(var X=void 0,W=0;W<Z.length;W++)if(Z[W].space_left>=it.height&&Z[W].x+Z[W].width+it.width+10-at<=1e-4){X=Z[W];break}Z.push(it),void 0!==X?(it.x=X.x+X.width+10,it.y=X.bottom,it.space_left=it.height,it.bottom=it.y,X.space_left-=it.height+10,X.bottom+=it.height+10):(it.y=F,F+=it.height+10,it.x=0,it.bottom=it.y,it.space_left=it.height),it.y+it.height-B>-1e-4&&(B=it.y+it.height-0),it.x+it.width-I>-1e-4&&(I=it.x+it.width-0)}0!=_.length&&(function H(it){it.forEach(function(X){!function at(X){var W=Number.MAX_VALUE,q=Number.MAX_VALUE,Y=0,R=0;X.array.forEach(function(E){var pt=typeof E.width<"u"?E.width:L,St=typeof E.height<"u"?E.height:L;pt/=2,St/=2,Y=Math.max(E.x+pt,Y),W=Math.min(E.x-pt,W),R=Math.max(E.y+St,R),q=Math.min(E.y-St,q)}),X.width=Y-W,X.height=R-q}(X)})}(_),function nt(it,at){var X=Number.POSITIVE_INFINITY,W=0;it.sort(function(wt,yt){return yt.height-wt.height});for(var q=Jt=M=it.reduce(function(wt,yt){return wt.width<yt.width?wt.width:yt.width}),Y=ue=function K(it){var at=0;return it.forEach(function(X){return at+=X.width+10}),at}(it),R=0,E=Number.MAX_VALUE,pt=Number.MAX_VALUE,St=-1,Mt=Number.MAX_VALUE,Et=Number.MAX_VALUE;Mt>M||Et>1e-4;){if(1!=St){var Jt=Y-(Y-q)/s_GOLDEN_SECTION;E=et(it,Jt)}if(0!=St){var ue=q+(Y-q)/s_GOLDEN_SECTION;pt=et(it,ue)}if(Mt=Math.abs(Jt-ue),Et=Math.abs(E-pt),E<X&&(X=E,W=Jt),pt<X&&(X=pt,W=ue),E>pt?(q=Jt,Jt=ue,E=pt,St=1):(Y=ue,ue=Jt,pt=E,St=0),R++>100)break}et(it,W)}(_),l&&function G(it){it.forEach(function(at){var X={x:0,y:0};at.array.forEach(function(Y){X.x+=Y.x,X.y+=Y.y}),X.x/=at.array.length,X.y/=at.array.length;var q_x=at.x-(X.x-at.width/2)+u/2-I/2,q_y=at.y-(X.y-at.height/2)+g/2-B/2;at.array.forEach(function(Y){Y.x+=q_x,Y.y+=q_y})})}(_))},D.separateGraphs=function x(_,m){for(var p={},t={},d=[],l=0,h=0;h<m.length;h++){var f=m[h],u=f.source,g=f.target;t[u.index]?t[u.index].push(g):t[u.index]=[g],t[g.index]?t[g.index].push(u):t[g.index]=[u]}for(h=0;h<_.length;h++){var C=_[h];p[C.index]||L(C,!0)}function L(I,B){if(void 0===p[I.index]){B&&(l++,d.push({array:[]})),p[I.index]=l,d[l-1].array.push(I);var M=t[I.index];if(M)for(var F=0;F<M.length;F++)L(M[F],!1)}}return d}},15675:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var l,u,c=s(33900),x=s(58802),_=s(91786),m=s(4068),p=s(33858),t=s(30225),d=s(30345);function h(u){return typeof u.leaves<"u"||typeof u.groups<"u"}(u=l=D.EventType||(D.EventType={}))[u.start=0]="start",u[u.tick=1]="tick",u[u.end=2]="end";var f=function(){function u(){var g=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:u.getSourceIndex,getTargetIndex:u.getTargetIndex,setLength:u.setLinkLength,getType:function(C){return"function"==typeof g._linkType?g._linkType(C):0}}}return u.prototype.on=function(g,C){return this.event||(this.event={}),"string"==typeof g?this.event[l[g]]=C:this.event[g]=C,this},u.prototype.trigger=function(g){this.event&&typeof this.event[g.type]<"u"&&this.event[g.type](g)},u.prototype.kick=function(){for(;!this.tick(););},u.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:l.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var L,I,g=this._nodes.length;for(this._descent.locks.clear(),I=0;I<g;++I)(L=this._nodes[I]).fixed&&((typeof L.px>"u"||typeof L.py>"u")&&(L.px=L.x,L.py=L.y),this._descent.locks.add(I,[L.px,L.py]));var M=this._descent.rungeKutta();return 0===M?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=M),this._lastStress=M,this.updateNodePositions(),this.trigger({type:l.tick,alpha:this._alpha,stress:this._lastStress}),!1},u.prototype.updateNodePositions=function(){for(var L,g=this._descent.x[0],C=this._descent.x[1],I=this._nodes.length;I--;)(L=this._nodes[I]).x=g[I],L.y=C[I]},u.prototype.nodes=function(g){if(!g){if(0===this._nodes.length&&this._links.length>0){var C=0;this._links.forEach(function(I){C=Math.max(C,I.source,I.target)}),this._nodes=new Array(++C);for(var L=0;L<C;++L)this._nodes[L]={}}return this._nodes}return this._nodes=g,this},u.prototype.groups=function(g){var C=this;return g?(this._groups=g,this._rootGroup={},this._groups.forEach(function(L){typeof L.padding>"u"&&(L.padding=1),typeof L.leaves<"u"&&L.leaves.forEach(function(I,B){"number"==typeof I&&((L.leaves[B]=C._nodes[I]).parent=L)}),typeof L.groups<"u"&&L.groups.forEach(function(I,B){"number"==typeof I&&((L.groups[B]=C._groups[I]).parent=L)})}),this._rootGroup.leaves=this._nodes.filter(function(L){return typeof L.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(L){return typeof L.parent>"u"}),this):this._groups},u.prototype.powerGraphGroups=function(g){var C=c.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(C.groups),g(C),this},u.prototype.avoidOverlaps=function(g){return arguments.length?(this._avoidOverlaps=g,this):this._avoidOverlaps},u.prototype.handleDisconnected=function(g){return arguments.length?(this._handleDisconnected=g,this):this._handleDisconnected},u.prototype.flowLayout=function(g,C){return arguments.length||(g="y"),this._directedLinkConstraints={axis:g,getMinSeparation:"number"==typeof C?function(){return C}:C},this},u.prototype.links=function(g){return arguments.length?(this._links=g,this):this._links},u.prototype.constraints=function(g){return arguments.length?(this._constraints=g,this):this._constraints},u.prototype.distanceMatrix=function(g){return arguments.length?(this._distanceMatrix=g,this):this._distanceMatrix},u.prototype.size=function(g){return g?(this._canvasSize=g,this):this._canvasSize},u.prototype.defaultNodeSize=function(g){return g?(this._defaultNodeSize=g,this):this._defaultNodeSize},u.prototype.groupCompactness=function(g){return g?(this._groupCompactness=g,this):this._groupCompactness},u.prototype.linkDistance=function(g){return g?(this._linkDistance="function"==typeof g?g:+g,this._linkLengthCalculator=null,this):this._linkDistance},u.prototype.linkType=function(g){return this._linkType=g,this},u.prototype.convergenceThreshold=function(g){return g?(this._threshold="function"==typeof g?g:+g,this):this._threshold},u.prototype.alpha=function(g){return arguments.length?(g=+g,this._alpha?this._alpha=g>0?g:0:g>0&&(this._running||(this._running=!0,this.trigger({type:l.start,alpha:this._alpha=g}),this.kick())),this):this._alpha},u.prototype.getLinkLength=function(g){return"function"==typeof this._linkDistance?+this._linkDistance(g):this._linkDistance},u.setLinkLength=function(g,C){g.length=C},u.prototype.getLinkType=function(g){return"function"==typeof this._linkType?this._linkType(g):0},u.prototype.symmetricDiffLinkLengths=function(g,C){var L=this;return void 0===C&&(C=1),this.linkDistance(function(I){return g*I.length}),this._linkLengthCalculator=function(){return x.symmetricDiffLinkLengths(L._links,L.linkAccessor,C)},this},u.prototype.jaccardLinkLengths=function(g,C){var L=this;return void 0===C&&(C=1),this.linkDistance(function(I){return g*I.length}),this._linkLengthCalculator=function(){return x.jaccardLinkLengths(L._links,L.linkAccessor,C)},this},u.prototype.start=function(g,C,L,I,B,M){var F=this;void 0===g&&(g=0),void 0===C&&(C=0),void 0===L&&(L=0),void 0===I&&(I=0),void 0===B&&(B=!0),void 0===M&&(M=!0);var W,G=this.nodes().length,nt=G+2*this._groups.length,st=this._canvasSize[0],K=this._canvasSize[1],$=new Array(nt),it=new Array(nt),at=null,X=this._avoidOverlaps;this._nodes.forEach(function(Mt,Et){Mt.index=Et,typeof Mt.x>"u"&&(Mt.x=st/2,Mt.y=K/2),$[Et]=Mt.x,it[Et]=Mt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?W=this._distanceMatrix:(W=new p.Calculator(nt,this._links,u.getSourceIndex,u.getTargetIndex,function(Mt){return F.getLinkLength(Mt)}).DistanceMatrix(),at=_.Descent.createSquareMatrix(nt,function(){return 2}),this._links.forEach(function(Mt){"number"==typeof Mt.source&&(Mt.source=F._nodes[Mt.source]),"number"==typeof Mt.target&&(Mt.target=F._nodes[Mt.target])}),this._links.forEach(function(Mt){var Et=u.getSourceIndex(Mt),Jt=u.getTargetIndex(Mt);at[Et][Jt]=at[Jt][Et]=Mt.weight||1}));var q=_.Descent.createSquareMatrix(nt,function(Mt,Et){return W[Mt][Et]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var Z=G;this._groups.forEach(function(Et){(function(Et,Jt,ue,wt){at[Et][Jt]=at[Jt][Et]=ue,q[Et][Jt]=q[Jt][Et]=.1})(Z,Z+1,F._groupCompactness),$[Z]=0,it[Z++]=0,$[Z]=0,it[Z++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var R=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,R=R.concat(x.generateDirectedEdgeConstraints(G,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new _.Descent([$,it],q),this._descent.locks.clear(),Z=0;Z<G;++Z){var E=this._nodes[Z];E.fixed&&(E.px=E.x,E.py=E.y,this._descent.locks.add(Z,[E.x,E.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(g,$,it),R.length>0&&(this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,R).projectFunctions()),this._descent.run(C),this.separateOverlappingComponents(st,K,M),this.avoidOverlaps(X),X&&(this._nodes.forEach(function(Mt,Et){Mt.x=$[Et],Mt.y=it[Et]}),this._descent.project=new m.Projection(this._nodes,this._groups,this._rootGroup,R,!0).projectFunctions(),this._nodes.forEach(function(Mt,Et){$[Et]=Mt.x,it[Et]=Mt.y})),this._descent.G=at,this._descent.run(L),I){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=G,this._descent.scaleSnapByMaxH=G!=nt;var St=_.Descent.createSquareMatrix(nt,function(Mt,Et){return Mt>=G||Et>=G?at[Mt][Et]:0});this._descent.G=St,this._descent.run(I)}return this.updateNodePositions(),this.separateOverlappingComponents(st,K,M),B?this.resume():this},u.prototype.initialLayout=function(g,C,L){if(this._groups.length>0&&g>0){var I=this._nodes.length,B=this._links.map(function(F){return{source:F.source.index,target:F.target.index}}),M=this._nodes.map(function(F){return{index:F.index}});this._groups.forEach(function(F,Z){M.push({index:F.index=I+Z})}),this._groups.forEach(function(F,Z){typeof F.leaves<"u"&&F.leaves.forEach(function(H){return B.push({source:F.index,target:H.index})}),typeof F.groups<"u"&&F.groups.forEach(function(H){return B.push({source:F.index,target:H.index})})}),(new u).size(this.size()).nodes(M).links(B).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(g,0,0,0,!1),this._nodes.forEach(function(F){C[F.index]=M[F.index].x,L[F.index]=M[F.index].y})}else this._descent.run(g)},u.prototype.separateOverlappingComponents=function(g,C,L){var I=this;if(void 0===L&&(L=!0),!this._distanceMatrix&&this._handleDisconnected){var B=this._descent.x[0],M=this._descent.x[1];this._nodes.forEach(function(Z,H){Z.x=B[H],Z.y=M[H]});var F=d.separateGraphs(this._nodes,this._links);d.applyPacking(F,g,C,this._defaultNodeSize,1,L),this._nodes.forEach(function(Z,H){I._descent.x[0][H]=Z.x,I._descent.x[1][H]=Z.y,Z.bounds&&(Z.bounds.setXCentre(Z.x),Z.bounds.setYCentre(Z.y))})}},u.prototype.resume=function(){return this.alpha(.1)},u.prototype.stop=function(){return this.alpha(0)},u.prototype.prepareEdgeRouting=function(g){void 0===g&&(g=0),this._visibilityGraph=new t.TangentVisibilityGraph(this._nodes.map(function(C){return C.bounds.inflate(-g).vertices()}))},u.prototype.routeEdge=function(g,C,L){void 0===C&&(C=5);var I=[],B=new t.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),M={x:g.source.x,y:g.source.y},F={x:g.target.x,y:g.target.y},Z=B.addPoint(M,g.source.index),H=B.addPoint(F,g.target.index);B.addEdgeIfVisible(M,F,g.source.index,g.target.index),typeof L<"u"&&L(B);var K=new p.Calculator(B.V.length,B.E,function(q){return q.source.id},function(q){return q.target.id},function(q){return q.length()}).PathFromNodeToNode(Z.id,H.id);if(1===K.length||K.length===B.V.length){var $=m.makeEdgeBetween(g.source.innerBounds,g.target.innerBounds,C);I=[$.sourceIntersection,$.arrowStart]}else{for(var it=K.length-2,at=B.V[K[it]].p,X=B.V[K[0]].p,W=(I=[g.source.innerBounds.rayIntersection(at.x,at.y)],it);W>=0;--W)I.push(B.V[K[W]].p);I.push(m.makeEdgeTo(X,g.target.innerBounds,C))}return I},u.getSourceIndex=function(g){return"number"==typeof g.source?g.source:g.source.index},u.getTargetIndex=function(g){return"number"==typeof g.target?g.target:g.target.index},u.linkId=function(g){return u.getSourceIndex(g)+"-"+u.getTargetIndex(g)},u.dragStart=function(g){h(g)?u.storeOffset(g,u.dragOrigin(g)):(u.stopNode(g),g.fixed|=2)},u.stopNode=function(g){g.px=g.x,g.py=g.y},u.storeOffset=function(g,C){typeof g.leaves<"u"&&g.leaves.forEach(function(L){L.fixed|=2,u.stopNode(L),L._dragGroupOffsetX=L.x-C.x,L._dragGroupOffsetY=L.y-C.y}),typeof g.groups<"u"&&g.groups.forEach(function(L){return u.storeOffset(L,C)})},u.dragOrigin=function(g){return h(g)?{x:g.bounds.cx(),y:g.bounds.cy()}:g},u.drag=function(g,C){h(g)?(typeof g.leaves<"u"&&g.leaves.forEach(function(L){g.bounds.setXCentre(C.x),g.bounds.setYCentre(C.y),L.px=L._dragGroupOffsetX+C.x,L.py=L._dragGroupOffsetY+C.y}),typeof g.groups<"u"&&g.groups.forEach(function(L){return u.drag(L,C)})):(g.px=C.x,g.py=C.y)},u.dragEnd=function(g){h(g)?(typeof g.leaves<"u"&&g.leaves.forEach(function(C){u.dragEnd(C),delete C._dragGroupOffsetX,delete C._dragGroupOffsetY}),typeof g.groups<"u"&&g.groups.forEach(u.dragEnd)):g.fixed&=-7},u.mouseOver=function(g){g.fixed|=4,g.px=g.x,g.py=g.y},u.mouseOut=function(g){g.fixed&=-5},u}();D.Layout=f},86461:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(33858),x=s(91786),_=s(4068),m=s(58802),p=function(){function h(f,u){this.source=f,this.target=u}return h.prototype.actualLength=function(f){var u=this;return Math.sqrt(f.reduce(function(g,C){var L=C[u.target]-C[u.source];return g+L*L},0))},h}();D.Link3D=p,D.Node3D=function h(f,u,g){void 0===f&&(f=0),void 0===u&&(u=0),void 0===g&&(g=0),this.x=f,this.y=u,this.z=g};var d=function(){function h(f,u,g){var C=this;void 0===g&&(g=1),this.nodes=f,this.links=u,this.idealLinkLength=g,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(h.k);for(var L=0;L<h.k;++L)this.result[L]=new Array(f.length);f.forEach(function(I,B){for(var M=0,F=h.dims;M<F.length;M++){var Z=F[M];typeof I[Z]>"u"&&(I[Z]=Math.random())}C.result[0][B]=I.x,C.result[1][B]=I.y,C.result[2][B]=I.z})}return h.prototype.linkLength=function(f){return f.actualLength(this.result)},h.prototype.start=function(f){var u=this;void 0===f&&(f=100);var g=this.nodes.length,C=new l;this.useJaccardLinkLengths&&m.jaccardLinkLengths(this.links,C,1.5),this.links.forEach(function(Z){return Z.length*=u.idealLinkLength});var L=new c.Calculator(g,this.links,function(Z){return Z.source},function(Z){return Z.target},function(Z){return Z.length}).DistanceMatrix(),I=x.Descent.createSquareMatrix(g,function(Z,H){return L[Z][H]}),B=x.Descent.createSquareMatrix(g,function(){return 2});this.links.forEach(function(Z){var H=Z.source,G=Z.target;return B[H][G]=B[G][H]=1}),this.descent=new x.Descent(this.result,I),this.descent.threshold=.001,this.descent.G=B,this.constraints&&(this.descent.project=new _.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var M=0;M<this.nodes.length;M++){var F=this.nodes[M];F.fixed&&this.descent.locks.add(M,[F.x,F.y,F.z])}return this.descent.run(f),this},h.prototype.tick=function(){this.descent.locks.clear();for(var f=0;f<this.nodes.length;f++){var u=this.nodes[f];u.fixed&&this.descent.locks.add(f,[u.x,u.y,u.z])}return this.descent.rungeKutta()},h.k=(h.dims=["x","y","z"]).length,h}();D.Layout3D=d;var l=function(){function h(){}return h.prototype.getSourceIndex=function(f){return f.source},h.prototype.getTargetIndex=function(f){return f.target},h.prototype.getLength=function(f){return f.length},h.prototype.setLength=function(f,u){f.length=u},h}()},58802:(w,D)=>{"use strict";function s(l,h){var f={};for(var u in l)f[u]={};for(var u in h)f[u]={};return Object.keys(f).length}function c(l,h){var f=0;for(var u in l)typeof h[u]<"u"&&++f;return f}function _(l,h,f,u){var g=function x(l,h){var f={},u=function(g,C){typeof f[g]>"u"&&(f[g]={}),f[g][C]={}};return l.forEach(function(g){var C=h.getSourceIndex(g),L=h.getTargetIndex(g);u(C,L),u(L,C)}),f}(l,u);l.forEach(function(C){var L=g[u.getSourceIndex(C)],I=g[u.getTargetIndex(C)];u.setLength(C,1+h*f(L,I))})}function d(l,h,f){var u=[],g=0,C=[],L=[];function I(K){K.index=K.lowlink=g++,C.push(K),K.onStack=!0;for(var $=0,it=K.out;$<it.length;$++){var at=it[$];typeof at.index>"u"?(I(at),K.lowlink=Math.min(K.lowlink,at.lowlink)):at.onStack&&(K.lowlink=Math.min(K.lowlink,at.index))}if(K.lowlink===K.index){for(var X=[];C.length&&((at=C.pop()).onStack=!1,X.push(at),at!==K););L.push(X.map(function(W){return W.id}))}}for(var B=0;B<l;B++)u.push({id:B,out:[]});for(var M=0,F=h;M<F.length;M++){var Z=F[M],H=u[f.getSourceIndex(Z)],G=u[f.getTargetIndex(Z)];H.out.push(G)}for(var nt=0,et=u;nt<et.length;nt++){var st=et[nt];typeof st.index>"u"&&I(st)}return L}Object.defineProperty(D,"__esModule",{value:!0}),D.symmetricDiffLinkLengths=function m(l,h,f){void 0===f&&(f=1),_(l,f,function(u,g){return Math.sqrt(s(u,g)-c(u,g))},h)},D.jaccardLinkLengths=function p(l,h,f){void 0===f&&(f=1),_(l,f,function(u,g){return Math.min(Object.keys(u).length,Object.keys(g).length)<1.1?0:c(u,g)/s(u,g)},h)},D.generateDirectedEdgeConstraints=function t(l,h,f,u){var g=d(l,h,u),C={};g.forEach(function(I,B){return I.forEach(function(M){return C[M]=B})});var L=[];return h.forEach(function(I){var B=u.getSourceIndex(I),M=u.getTargetIndex(I);C[B]!==C[M]&&L.push({axis:f,left:B,right:M,gap:u.getMinSeparation(I)})}),L},D.stronglyConnectedComponents=d},33900:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function h(f,u,g){this.source=f,this.target=u,this.type=g};D.PowerEdge=s;var c=function(){function h(f,u,g,C){var L=this;if(this.linkAccessor=g,this.modules=new Array(f),this.roots=[],C)this.initModulesFromGroup(C);else{this.roots.push(new p);for(var I=0;I<f;++I)this.roots[0].add(this.modules[I]=new _(I))}this.R=u.length,u.forEach(function(B){var M=L.modules[g.getSourceIndex(B)],F=L.modules[g.getTargetIndex(B)],Z=g.getType(B);M.outgoing.add(Z,F),F.incoming.add(Z,M)})}return h.prototype.initModulesFromGroup=function(f){var u=new p;this.roots.push(u);for(var g=0;g<f.leaves.length;++g){var C=f.leaves[g],L=new _(C.id);this.modules[C.id]=L,u.add(L)}if(f.groups)for(var I=0;I<f.groups.length;++I){var B=f.groups[I],M={};for(var F in B)"leaves"!==F&&"groups"!==F&&B.hasOwnProperty(F)&&(M[F]=B[F]);u.add(new _(-1-I,new t,new t,this.initModulesFromGroup(B),M))}return u},h.prototype.merge=function(f,u,g){void 0===g&&(g=0);var C=f.incoming.intersection(u.incoming),L=f.outgoing.intersection(u.outgoing),I=new p;I.add(f),I.add(u);var B=new _(this.modules.length,L,C,I);this.modules.push(B);var M=function(F,Z,H){F.forAll(function(G,nt){G.forAll(function(et){var st=et[Z];st.add(nt,B),st.remove(nt,f),st.remove(nt,u),f[H].remove(nt,et),u[H].remove(nt,et)})})};return M(L,"incoming","outgoing"),M(C,"outgoing","incoming"),this.R-=C.count()+L.count(),this.roots[g].remove(f),this.roots[g].remove(u),this.roots[g].add(B),B},h.prototype.rootMerges=function(f){void 0===f&&(f=0);for(var u=this.roots[f].modules(),g=u.length,C=new Array(g*(g-1)),L=0,I=0,B=g-1;I<B;++I)for(var M=I+1;M<g;++M){var F=u[I],Z=u[M];C[L]={id:L,nEdges:this.nEdges(F,Z),a:F,b:Z},L++}return C},h.prototype.greedyMerge=function(){for(var f=0;f<this.roots.length;++f)if(!(this.roots[f].modules().length<2)){var g=this.rootMerges(f).sort(function(C,L){return C.nEdges==L.nEdges?C.id-L.id:C.nEdges-L.nEdges})[0];if(!(g.nEdges>=this.R))return this.merge(g.a,g.b,f),!0}},h.prototype.nEdges=function(f,u){var g=f.incoming.intersection(u.incoming),C=f.outgoing.intersection(u.outgoing);return this.R-g.count()-C.count()},h.prototype.getGroupHierarchy=function(f){var u=this,g=[];return x(this.roots[0],{},g),this.allEdges().forEach(function(I){var B=u.modules[I.source],M=u.modules[I.target];f.push(new s(typeof B.gid>"u"?I.source:g[B.gid],typeof M.gid>"u"?I.target:g[M.gid],I.type))}),g},h.prototype.allEdges=function(){var f=[];return h.getEdges(this.roots[0],f),f},h.getEdges=function(f,u){f.forAll(function(g){g.getEdges(u),h.getEdges(g.children,u)})},h}();function x(h,f,u){h.forAll(function(g){if(g.isLeaf())f.leaves||(f.leaves=[]),f.leaves.push(g.id);else{var C=f;if(g.gid=u.length,!g.isIsland()||g.isPredefined()){if(C={id:g.gid},g.isPredefined())for(var L in g.definition)C[L]=g.definition[L];f.groups||(f.groups=[]),f.groups.push(g.gid),u.push(C)}x(g.children,C,u)}})}D.Configuration=c;var _=function(){function h(f,u,g,C,L){void 0===u&&(u=new t),void 0===g&&(g=new t),void 0===C&&(C=new p),this.id=f,this.outgoing=u,this.incoming=g,this.children=C,this.definition=L}return h.prototype.getEdges=function(f){var u=this;this.outgoing.forAll(function(g,C){g.forAll(function(L){f.push(new s(u.id,L.id,C))})})},h.prototype.isLeaf=function(){return 0===this.children.count()},h.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},h.prototype.isPredefined=function(){return typeof this.definition<"u"},h}();D.Module=_;var p=function(){function h(){this.table={}}return h.prototype.count=function(){return Object.keys(this.table).length},h.prototype.intersection=function(f){var u=new h;return u.table=function m(h,f){var u={};for(var g in h)g in f&&(u[g]=h[g]);return u}(this.table,f.table),u},h.prototype.intersectionCount=function(f){return this.intersection(f).count()},h.prototype.contains=function(f){return f in this.table},h.prototype.add=function(f){this.table[f.id]=f},h.prototype.remove=function(f){delete this.table[f.id]},h.prototype.forAll=function(f){for(var u in this.table)f(this.table[u])},h.prototype.modules=function(){var f=[];return this.forAll(function(u){u.isPredefined()||f.push(u)}),f},h}();D.ModuleSet=p;var t=function(){function h(){this.sets={},this.n=0}return h.prototype.count=function(){return this.n},h.prototype.contains=function(f){var u=!1;return this.forAllModules(function(g){!u&&g.id==f&&(u=!0)}),u},h.prototype.add=function(f,u){(f in this.sets?this.sets[f]:this.sets[f]=new p).add(u),++this.n},h.prototype.remove=function(f,u){var g=this.sets[f];g.remove(u),0===g.count()&&delete this.sets[f],--this.n},h.prototype.forAll=function(f){for(var u in this.sets)f(this.sets[u],Number(u))},h.prototype.forAllModules=function(f){this.forAll(function(u,g){return u.forAll(f)})},h.prototype.intersection=function(f){var u=new h;return this.forAll(function(g,C){if(C in f.sets){var L=g.intersection(f.sets[C]),I=L.count();I>0&&(u.sets[C]=L,u.n+=I)}}),u},h}();D.LinkSets=t,D.getGroups=function l(h,f,u,g){for(var L=new c(h.length,f,u,g);L.greedyMerge(););var I=[],B=L.getGroupHierarchy(I);return I.forEach(function(M){var F=function(Z){var H=M[Z];"number"==typeof H&&(M[Z]=h[H])};F("source"),F("target")}),{groups:B,powerEdges:I}}},88866:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function(){function x(_){this.elem=_,this.subheaps=[]}return x.prototype.toString=function(_){for(var m="",p=!1,t=0;t<this.subheaps.length;++t){var d=this.subheaps[t];d.elem?(p&&(m+=","),m+=d.toString(_),p=!0):p=!1}return""!==m&&(m="("+m+")"),(this.elem?_(this.elem):"")+m},x.prototype.forEach=function(_){this.empty()||(_(this.elem,this),this.subheaps.forEach(function(m){return m.forEach(_)}))},x.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(_,m){return _+m.count()},0)},x.prototype.min=function(){return this.elem},x.prototype.empty=function(){return null==this.elem},x.prototype.contains=function(_){if(this===_)return!0;for(var m=0;m<this.subheaps.length;m++)if(this.subheaps[m].contains(_))return!0;return!1},x.prototype.isHeap=function(_){var m=this;return this.subheaps.every(function(p){return _(m.elem,p.elem)&&p.isHeap(_)})},x.prototype.insert=function(_,m){return this.merge(new x(_),m)},x.prototype.merge=function(_,m){return this.empty()?_:_.empty()?this:m(this.elem,_.elem)?(this.subheaps.push(_),this):(_.subheaps.push(this),_)},x.prototype.removeMin=function(_){return this.empty()?null:this.mergePairs(_)},x.prototype.mergePairs=function(_){if(0==this.subheaps.length)return new x(null);if(1==this.subheaps.length)return this.subheaps[0];var m=this.subheaps.pop().merge(this.subheaps.pop(),_),p=this.mergePairs(_);return m.merge(p,_)},x.prototype.decreaseKey=function(_,m,p,t){var d=_.removeMin(t);_.elem=d.elem,_.subheaps=d.subheaps,null!==p&&null!==d.elem&&p(_.elem,_);var l=new x(m);return null!==p&&p(m,l),this.merge(l,t)},x}();D.PairingHeap=s;var c=function(){function x(_){this.lessThan=_}return x.prototype.top=function(){return this.empty()?null:this.root.elem},x.prototype.push=function(){for(var _=[],m=0;m<arguments.length;m++)_[m]=arguments[m];for(var p,d,t=0;d=_[t];++t)p=new s(d),this.root=this.empty()?p:this.root.merge(p,this.lessThan);return p},x.prototype.empty=function(){return!this.root||!this.root.elem},x.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},x.prototype.forEach=function(_){this.root.forEach(_)},x.prototype.pop=function(){if(this.empty())return null;var _=this.root.min();return this.root=this.root.removeMin(this.lessThan),_},x.prototype.reduceKey=function(_,m,p){void 0===p&&(p=null),this.root=this.root.decreaseKey(_,m,p,this.lessThan)},x.prototype.toString=function(_){return this.root.toString(_)},x.prototype.count=function(){return this.root.count()},x}();D.PriorityQueue=c},94655:function(w,D){"use strict";var p,s=this&&this.__extends||(p=function(t,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])})(t,d)},function(t,d){function l(){this.constructor=t}p(t,d),t.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0});var c=function(){function p(){this.findIter=function(t){for(var d=this._root,l=this.iterator();null!==d;){var h=this._comparator(t,d.data);if(0===h)return l._cursor=d,l;l._ancestors.push(d),d=d.get_child(h>0)}return null}}return p.prototype.clear=function(){this._root=null,this.size=0},p.prototype.find=function(t){for(var d=this._root;null!==d;){var l=this._comparator(t,d.data);if(0===l)return d.data;d=d.get_child(l>0)}return null},p.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},p.prototype.upperBound=function(t){var d=this._comparator;return this._bound(t,function l(h,f){return d(f,h)})},p.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},p.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},p.prototype.iterator=function(){return new x(this)},p.prototype.each=function(t){for(var l,d=this.iterator();null!==(l=d.next());)t(l)},p.prototype.reach=function(t){for(var l,d=this.iterator();null!==(l=d.prev());)t(l)},p.prototype._bound=function(t,d){for(var l=this._root,h=this.iterator();null!==l;){var f=this._comparator(t,l.data);if(0===f)return h._cursor=l,h;h._ancestors.push(l),l=l.get_child(f>0)}for(var u=h._ancestors.length-1;u>=0;--u)if(d(t,(l=h._ancestors[u]).data)>0)return h._cursor=l,h._ancestors.length=u,h;return h._ancestors.length=0,h},p}();D.TreeBase=c;var x=function(){function p(t){this._tree=t,this._ancestors=[],this._cursor=null}return p.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},p.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===d)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},p.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var d;do{if(d=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===d)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},p.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},p.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},p}();D.Iterator=x;var _=function(){function p(t){this.data=t,this.left=null,this.right=null,this.red=!0}return p.prototype.get_child=function(t){return t?this.right:this.left},p.prototype.set_child=function(t,d){t?this.right=d:this.left=d},p}(),m=function(p){function t(d){var l=p.call(this)||this;return l._root=null,l._comparator=d,l.size=0,l}return s(t,p),t.prototype.insert=function(d){var l=!1;if(null===this._root)this._root=new _(d),l=!0,this.size++;else{var h=new _(void 0),f=!1,u=!1,g=null,C=h,L=null,I=this._root;for(C.right=this._root;;){if(null===I?(I=new _(d),L.set_child(f,I),l=!0,this.size++):t.is_red(I.left)&&t.is_red(I.right)&&(I.red=!0,I.left.red=!1,I.right.red=!1),t.is_red(I)&&t.is_red(L)){var B=C.right===g;I===L.get_child(u)?C.set_child(B,t.single_rotate(g,!u)):C.set_child(B,t.double_rotate(g,!u))}var M=this._comparator(I.data,d);if(0===M)break;u=f,null!==g&&(C=g),g=L,L=I,I=I.get_child(f=M<0)}this._root=h.right}return this._root.red=!1,l},t.prototype.remove=function(d){if(null===this._root)return!1;var l=new _(void 0),h=l;h.right=this._root;for(var f=null,u=null,g=null,C=!0;null!==h.get_child(C);){var L=C;u=f,f=h,h=h.get_child(C);var I=this._comparator(d,h.data);if(C=I>0,0===I&&(g=h),!t.is_red(h)&&!t.is_red(h.get_child(C)))if(t.is_red(h.get_child(!C))){var B=t.single_rotate(h,C);f.set_child(L,B),f=B}else if(!t.is_red(h.get_child(!C))){var M=f.get_child(!L);if(null!==M)if(t.is_red(M.get_child(!L))||t.is_red(M.get_child(L))){var F=u.right===f;t.is_red(M.get_child(L))?u.set_child(F,t.double_rotate(f,L)):t.is_red(M.get_child(!L))&&u.set_child(F,t.single_rotate(f,L));var Z=u.get_child(F);Z.red=!0,h.red=!0,Z.left.red=!1,Z.right.red=!1}else f.red=!1,M.red=!0,h.red=!0}}return null!==g&&(g.data=h.data,f.set_child(f.right===h,h.get_child(null===h.left)),this.size--),this._root=l.right,null!==this._root&&(this._root.red=!1),null!==g},t.is_red=function(d){return null!==d&&d.red},t.single_rotate=function(d,l){var h=d.get_child(!l);return d.set_child(!l,h.get_child(l)),h.set_child(l,d),d.red=!0,h.red=!1,h},t.double_rotate=function(d,l){return d.set_child(!l,t.single_rotate(d.get_child(!l),!l)),t.single_rotate(d,l)},t}(c);D.RBTree=m},4068:function(w,D,s){"use strict";var K,c=this&&this.__extends||(K=function($,it){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,X){at.__proto__=X}||function(at,X){for(var W in X)X.hasOwnProperty(W)&&(at[W]=X[W])})($,it)},function($,it){function at(){this.constructor=$}K($,it),$.prototype=null===it?Object.create(it):(at.prototype=it.prototype,new at)});Object.defineProperty(D,"__esModule",{value:!0});var x=s(98237),_=s(94655);function m(K){return K.bounds=typeof K.leaves<"u"?K.leaves.reduce(function($,it){return it.bounds.union($)},p.empty()):p.empty(),typeof K.groups<"u"&&(K.bounds=K.groups.reduce(function($,it){return m(it).union($)},K.bounds)),K.bounds=K.bounds.inflate(K.padding),K.bounds}D.computeGroupBounds=m;var p=function(){function K($,it,at,X){this.x=$,this.X=it,this.y=at,this.Y=X}return K.empty=function(){return new K(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},K.prototype.cx=function(){return(this.x+this.X)/2},K.prototype.cy=function(){return(this.y+this.Y)/2},K.prototype.overlapX=function($){var it=this.cx(),at=$.cx();return it<=at&&$.x<this.X?this.X-$.x:at<=it&&this.x<$.X?$.X-this.x:0},K.prototype.overlapY=function($){var it=this.cy(),at=$.cy();return it<=at&&$.y<this.Y?this.Y-$.y:at<=it&&this.y<$.Y?$.Y-this.y:0},K.prototype.setXCentre=function($){var it=$-this.cx();this.x+=it,this.X+=it},K.prototype.setYCentre=function($){var it=$-this.cy();this.y+=it,this.Y+=it},K.prototype.width=function(){return this.X-this.x},K.prototype.height=function(){return this.Y-this.y},K.prototype.union=function($){return new K(Math.min(this.x,$.x),Math.max(this.X,$.X),Math.min(this.y,$.y),Math.max(this.Y,$.Y))},K.prototype.lineIntersections=function($,it,at,X){for(var W=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],q=[],Y=0;Y<4;++Y){var R=K.lineIntersection($,it,at,X,W[Y][0],W[Y][1],W[Y][2],W[Y][3]);null!==R&&q.push({x:R.x,y:R.y})}return q},K.prototype.rayIntersection=function($,it){var at=this.lineIntersections(this.cx(),this.cy(),$,it);return at.length>0?at[0]:null},K.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},K.lineIntersection=function($,it,at,X,W,q,Y,R){var E=at-$,pt=Y-W,St=X-it,Mt=R-q,Et=Mt*E-pt*St;if(0==Et)return null;var Jt=$-W,ue=it-q,yt=(pt*ue-Mt*Jt)/Et,_t=(E*ue-St*Jt)/Et;return yt>=0&&yt<=1&&_t>=0&&_t<=1?{x:$+yt*E,y:it+yt*St}:null},K.prototype.inflate=function($){return new K(this.x-$,this.X+$,this.y-$,this.Y+$)},K}();D.Rectangle=p,D.makeEdgeBetween=function t(K,$,it){var at=K.rayIntersection($.cx(),$.cy())||{x:K.cx(),y:K.cy()},X=$.rayIntersection(K.cx(),K.cy())||{x:$.cx(),y:$.cy()},W=X.x-at.x,q=X.y-at.y,Y=Math.sqrt(W*W+q*q),R=Y-it;return{sourceIntersection:at,targetIntersection:X,arrowStart:{x:at.x+R*W/Y,y:at.y+R*q/Y}}},D.makeEdgeTo=function d(K,$,it){var at=$.rayIntersection(K.x,K.y);at||(at={x:$.cx(),y:$.cy()});var X=at.x-K.x,W=at.y-K.y,q=Math.sqrt(X*X+W*W);return{x:at.x-it*X/q,y:at.y-it*W/q}};var l=function K($,it,at){this.v=$,this.r=it,this.pos=at,this.prev=u(),this.next=u()},h=function K($,it,at){this.isOpen=$,this.v=it,this.pos=at};function f(K,$){return K.pos>$.pos?1:K.pos<$.pos||K.isOpen?-1:$.isOpen?1:0}function u(){return new _.RBTree(function(K,$){return K.pos-$.pos})}var g={getCentre:function(K){return K.cx()},getOpen:function(K){return K.y},getClose:function(K){return K.Y},getSize:function(K){return K.width()},makeRect:function(K,$,it,at){return new p(it-at/2,it+at/2,K,$)},findNeighbours:function B(K,$){var it=function(at,X){for(var q,W=$.findIter(K);null!==(q=W[at]());){var Y=q.r.overlapX(K.r);if((Y<=0||Y<=q.r.overlapY(K.r))&&(K[at].insert(q),q[X].insert(K)),Y<=0)break}};it("next","prev"),it("prev","next")}},C={getCentre:function(K){return K.cy()},getOpen:function(K){return K.x},getClose:function(K){return K.X},getSize:function(K){return K.height()},makeRect:function(K,$,it,at){return new p(K,$,it-at/2,it+at/2)},findNeighbours:function M(K,$){var it=function(at,X){var W=$.findIter(K)[at]();null!==W&&W.r.overlapX(K.r)>0&&(K[at].insert(W),W[X].insert(K))};it("next","prev"),it("prev","next")}};function L(K,$,it,at){void 0===at&&(at=!1);var X=K.padding,W=typeof K.groups<"u"?K.groups.length:0,q=typeof K.leaves<"u"?K.leaves.length:0,Y=W?K.groups.reduce(function(Ft,Ht){return Ft.concat(L(Ht,$,it,!0))},[]):[],R=(at?2:0)+q+W,E=new Array(R),pt=new Array(R),St=0,Mt=function(Ft,Ht){pt[St]=Ft,E[St++]=Ht};if(at){var Et=K.bounds,Jt=$.getCentre(Et),ue=$.getSize(Et)/2,wt=$.getOpen(Et),yt=$.getClose(Et),Nt=Jt-ue+X/2,_t=Jt+ue-X/2;K.minVar.desiredPosition=Nt,Mt($.makeRect(wt,yt,Nt,X),K.minVar),K.maxVar.desiredPosition=_t,Mt($.makeRect(wt,yt,_t,X),K.maxVar)}q&&K.leaves.forEach(function(Ft){return Mt(Ft.bounds,Ft.variable)}),W&&K.groups.forEach(function(Ft){var Ht=Ft.bounds;Mt($.makeRect($.getOpen(Ht),$.getClose(Ht),$.getCentre(Ht),$.getSize(Ht)),Ft.minVar)});var Xt=I(pt,E,$,it);return W&&(E.forEach(function(Ft){Ft.cOut=[],Ft.cIn=[]}),Xt.forEach(function(Ft){Ft.left.cOut.push(Ft),Ft.right.cIn.push(Ft)}),K.groups.forEach(function(Ft){var Ht=(Ft.padding-$.getSize(Ft.bounds))/2;Ft.minVar.cIn.forEach(function(he){return he.gap+=Ht}),Ft.minVar.cOut.forEach(function(he){he.left=Ft.maxVar,he.gap+=Ht})})),Y.concat(Xt)}function I(K,$,it,at){var X,W=K.length,q=2*W;console.assert($.length>=W);var Y=new Array(q);for(X=0;X<W;++X){var R=K[X],E=new l($[X],R,it.getCentre(R));Y[X]=new h(!0,E,it.getOpen(R)),Y[X+W]=new h(!1,E,it.getClose(R))}Y.sort(f);var pt=new Array,St=u();for(X=0;X<q;++X){var Mt=Y[X];if(E=Mt.v,Mt.isOpen)St.insert(E),it.findNeighbours(E,St);else{St.remove(E);var Et=function(wt,yt){var Nt=(it.getSize(wt.r)+it.getSize(yt.r))/2+at;pt.push(new x.Constraint(wt.v,yt.v,Nt))},Jt=function(wt,yt,Nt){for(var _t,Xt=E[wt].iterator();null!==(_t=Xt[wt]());)Nt(_t,E),_t[yt].remove(E)};Jt("prev","next",function(wt,yt){return Et(wt,yt)}),Jt("next","prev",function(wt,yt){return Et(yt,wt)})}}return console.assert(0===St.size),pt}function F(K,$){return I(K,$,g,1e-6)}function Z(K,$){return I(K,$,C,1e-6)}function H(K){return L(K,g,1e-6)}function G(K){return L(K,C,1e-6)}D.generateXConstraints=F,D.generateYConstraints=Z,D.generateXGroupConstraints=H,D.generateYGroupConstraints=G,D.removeOverlaps=function nt(K){var $=K.map(function(X){return new x.Variable(X.cx())}),it=F(K,$),at=new x.Solver($,it);at.solve(),$.forEach(function(X,W){return K[W].setXCentre(X.position())}),$=K.map(function(X){return new x.Variable(X.cy())}),it=Z(K,$),(at=new x.Solver($,it)).solve(),$.forEach(function(X,W){return K[W].setYCentre(X.position())})};var et=function(K){function $(it,at){var X=K.call(this,0,at)||this;return X.index=it,X}return c($,K),$}(x.Variable);D.IndexedVariable=et;var st=function(){function K($,it,at,X,W){var q=this;if(void 0===at&&(at=null),void 0===X&&(X=null),void 0===W&&(W=!1),this.nodes=$,this.groups=it,this.rootGroup=at,this.avoidOverlaps=W,this.variables=$.map(function(R,E){return R.variable=new et(E,1)}),X&&this.createConstraints(X),W&&at&&typeof at.groups<"u"){$.forEach(function(R){if(R.width&&R.height){var E=R.width/2,pt=R.height/2;R.bounds=new p(R.x-E,R.x+E,R.y-pt,R.y+pt)}else R.bounds=new p(R.x,R.x,R.y,R.y)}),m(at);var Y=$.length;it.forEach(function(R){q.variables[Y]=R.minVar=new et(Y++,typeof R.stiffness<"u"?R.stiffness:.01),q.variables[Y]=R.maxVar=new et(Y++,typeof R.stiffness<"u"?R.stiffness:.01)})}}return K.prototype.createSeparation=function($){return new x.Constraint(this.nodes[$.left].variable,this.nodes[$.right].variable,$.gap,typeof $.equality<"u"&&$.equality)},K.prototype.makeFeasible=function($){var it=this;if(this.avoidOverlaps){var at="x",X="width";"x"===$.axis&&(at="y",X="height");var W=$.offsets.map(function(Y){return it.nodes[Y.node]}).sort(function(Y,R){return Y[at]-R[at]}),q=null;W.forEach(function(Y){if(q){var R=q[at]+q[X];R>Y[at]&&(Y[at]=R)}q=Y})}},K.prototype.createAlignment=function($){var it=this,at=this.nodes[$.offsets[0].node].variable;this.makeFeasible($);var X="x"===$.axis?this.xConstraints:this.yConstraints;$.offsets.slice(1).forEach(function(W){X.push(new x.Constraint(at,it.nodes[W.node].variable,W.offset,!0))})},K.prototype.createConstraints=function($){var it=this,at=function(X){return typeof X.type>"u"||"separation"===X.type};this.xConstraints=$.filter(function(X){return"x"===X.axis&&at(X)}).map(function(X){return it.createSeparation(X)}),this.yConstraints=$.filter(function(X){return"y"===X.axis&&at(X)}).map(function(X){return it.createSeparation(X)}),$.filter(function(X){return"alignment"===X.type}).forEach(function(X){return it.createAlignment(X)})},K.prototype.setupVariablesAndBounds=function($,it,at,X){this.nodes.forEach(function(W,q){W.fixed?(W.variable.weight=W.fixedWeight?W.fixedWeight:1e3,at[q]=X(W)):W.variable.weight=1;var Y=(W.width||0)/2,R=(W.height||0)/2,E=$[q],pt=it[q];W.bounds=new p(E-Y,E+Y,pt-R,pt+R)})},K.prototype.xProject=function($,it,at){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project($,it,$,at,function(X){return X.px},this.xConstraints,H,function(X){return X.bounds.setXCentre(at[X.variable.index]=X.variable.position())},function(X){var W=at[X.minVar.index]=X.minVar.position(),q=at[X.maxVar.index]=X.maxVar.position(),Y=X.padding/2;X.bounds.x=W-Y,X.bounds.X=q+Y})},K.prototype.yProject=function($,it,at){!this.rootGroup&&!this.yConstraints||this.project($,it,it,at,function(X){return X.py},this.yConstraints,G,function(X){return X.bounds.setYCentre(at[X.variable.index]=X.variable.position())},function(X){var W=at[X.minVar.index]=X.minVar.position(),q=at[X.maxVar.index]=X.maxVar.position(),Y=X.padding/2;X.bounds.y=W-Y,X.bounds.Y=q+Y})},K.prototype.projectFunctions=function(){var $=this;return[function(it,at,X){return $.xProject(it,at,X)},function(it,at,X){return $.yProject(it,at,X)}]},K.prototype.project=function($,it,at,X,W,q,Y,R,E){this.setupVariablesAndBounds($,it,X,W),this.rootGroup&&this.avoidOverlaps&&(m(this.rootGroup),q=q.concat(Y(this.rootGroup))),this.solve(this.variables,q,at,X),this.nodes.forEach(R),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(E),m(this.rootGroup))},K.prototype.solve=function($,it,at,X){var W=new x.Solver($,it);W.setStartingPositions(at),W.setDesiredPositions(X),W.solve()},K}();D.Projection=st},33858:(w,D,s)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var c=s(88866),x=function t(d,l){this.id=d,this.distance=l},_=function t(d){this.id=d,this.neighbours=[]},m=function t(d,l,h){this.node=d,this.prev=l,this.d=h},p=function(){function t(d,l,h,f,u){this.n=d,this.es=l,this.neighbours=new Array(this.n);for(var g=this.n;g--;)this.neighbours[g]=new _(g);for(g=this.es.length;g--;){var C=this.es[g],L=h(C),I=f(C),B=u(C);this.neighbours[L].neighbours.push(new x(I,B)),this.neighbours[I].neighbours.push(new x(L,B))}}return t.prototype.DistanceMatrix=function(){for(var d=new Array(this.n),l=0;l<this.n;++l)d[l]=this.dijkstraNeighbours(l);return d},t.prototype.DistancesFromNode=function(d){return this.dijkstraNeighbours(d)},t.prototype.PathFromNodeToNode=function(d,l){return this.dijkstraNeighbours(d,l)},t.prototype.PathFromNodeToNodeWithPrevCost=function(d,l,h){var f=new c.PriorityQueue(function(G,nt){return G.d<=nt.d}),u=this.neighbours[d],g=new m(u,null,0),C={};for(f.push(g);!f.empty()&&(u=(g=f.pop()).node).id!==l;)for(var L=u.neighbours.length;L--;){var I=u.neighbours[L],B=this.neighbours[I.id];if(!g.prev||B.id!==g.prev.node.id){var M=B.id+","+u.id;if(!(M in C&&C[M]<=g.d)){var F=g.prev?h(g.prev.node.id,u.id,B.id):0,Z=g.d+I.distance+F;C[M]=Z,f.push(new m(B,g,Z))}}}for(var H=[];g.prev;)H.push((g=g.prev).node.id);return H},t.prototype.dijkstraNeighbours=function(d,l){void 0===l&&(l=-1);for(var h=new c.PriorityQueue(function(F,Z){return F.d<=Z.d}),f=this.neighbours.length,u=new Array(f);f--;){var g=this.neighbours[f];g.d=f===d?0:Number.POSITIVE_INFINITY,g.q=h.push(g)}for(;!h.empty();){var C=h.pop();if(u[C.id]=C.d,C.id===l){for(var L=[],I=C;typeof I.prev<"u";)L.push(I.prev.id),I=I.prev;return L}for(f=C.neighbours.length;f--;){var B=C.neighbours[f],M=(I=this.neighbours[B.id],C.d+B.distance);C.d!==Number.MAX_VALUE&&I.d>M&&(I.d=M,I.prev=C,h.reduceKey(I.q,I,function(Z,H){return Z.q=H}))}}return u},t}();D.Calculator=p},98237:(w,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var s=function(){function d(l){this.scale=l,this.AB=0,this.AD=0,this.A2=0}return d.prototype.addVariable=function(l){var h=this.scale/l.scale,u=l.weight;this.AB+=u*h*(l.offset/l.scale),this.AD+=u*h*l.desiredPosition,this.A2+=u*h*h},d.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},d}();D.PositionStats=s;var c=function(){function d(l,h,f,u){void 0===u&&(u=!1),this.left=l,this.right=h,this.gap=f,this.equality=u,this.active=!1,this.unsatisfiable=!1,this.left=l,this.right=h,this.gap=f,this.equality=u}return d.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},d}();D.Constraint=c;var x=function(){function d(l,h,f){void 0===h&&(h=1),void 0===f&&(f=1),this.desiredPosition=l,this.weight=h,this.scale=f,this.offset=0}return d.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},d.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},d.prototype.visitNeighbours=function(l,h){var f=function(u,g){return u.active&&l!==g&&h(u,g)};this.cOut.forEach(function(u){return f(u,u.right)}),this.cIn.forEach(function(u){return f(u,u.left)})},d}();D.Variable=x;var _=function(){function d(l){this.vars=[],l.offset=0,this.ps=new s(l.scale),this.addVariable(l)}return d.prototype.addVariable=function(l){l.block=this,this.vars.push(l),this.ps.addVariable(l),this.posn=this.ps.getPosn()},d.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var l=0,h=this.vars.length;l<h;++l)this.ps.addVariable(this.vars[l]);this.posn=this.ps.getPosn()},d.prototype.compute_lm=function(l,h,f){var u=this,g=l.dfdv();return l.visitNeighbours(h,function(C,L){var I=u.compute_lm(L,l,f);L===C.right?(g+=I*C.left.scale,C.lm=I):(g+=I*C.right.scale,C.lm=-I),f(C)}),g/l.scale},d.prototype.populateSplitBlock=function(l,h){var f=this;l.visitNeighbours(h,function(u,g){g.offset=l.offset+(g===u.right?u.gap:-u.gap),f.addVariable(g),f.populateSplitBlock(g,l)})},d.prototype.traverse=function(l,h,f,u){var g=this;void 0===f&&(f=this.vars[0]),void 0===u&&(u=null),f.visitNeighbours(u,function(C,L){h.push(l(C)),g.traverse(l,h,L,f)})},d.prototype.findMinLM=function(){var l=null;return this.compute_lm(this.vars[0],null,function(h){!h.equality&&(null===l||h.lm<l.lm)&&(l=h)}),l},d.prototype.findMinLMBetween=function(l,h){this.compute_lm(l,null,function(){});var f=null;return this.findPath(l,null,h,function(u,g){!u.equality&&u.right===g&&(null===f||u.lm<f.lm)&&(f=u)}),f},d.prototype.findPath=function(l,h,f,u){var g=this,C=!1;return l.visitNeighbours(h,function(L,I){!C&&(I===f||g.findPath(I,l,f,u))&&(C=!0,u(L,I))}),C},d.prototype.isActiveDirectedPathBetween=function(l,h){if(l===h)return!0;for(var f=l.cOut.length;f--;){var u=l.cOut[f];if(u.active&&this.isActiveDirectedPathBetween(u.right,h))return!0}return!1},d.split=function(l){return l.active=!1,[d.createSplitBlock(l.left),d.createSplitBlock(l.right)]},d.createSplitBlock=function(l){var h=new d(l);return h.populateSplitBlock(l,null),h},d.prototype.splitBetween=function(l,h){var f=this.findMinLMBetween(l,h);if(null!==f){var u=d.split(f);return{constraint:f,lb:u[0],rb:u[1]}}return null},d.prototype.mergeAcross=function(l,h,f){h.active=!0;for(var u=0,g=l.vars.length;u<g;++u){var C=l.vars[u];C.offset+=f,this.addVariable(C)}this.posn=this.ps.getPosn()},d.prototype.cost=function(){for(var l=0,h=this.vars.length;h--;){var f=this.vars[h],u=f.position()-f.desiredPosition;l+=u*u*f.weight}return l},d}();D.Block=_;var m=function(){function d(l){this.vs=l;var h=l.length;for(this.list=new Array(h);h--;){var f=new _(l[h]);this.list[h]=f,f.blockInd=h}}return d.prototype.cost=function(){for(var l=0,h=this.list.length;h--;)l+=this.list[h].cost();return l},d.prototype.insert=function(l){l.blockInd=this.list.length,this.list.push(l)},d.prototype.remove=function(l){var h=this.list.length-1,f=this.list[h];this.list.length=h,l!==f&&(this.list[l.blockInd]=f,f.blockInd=l.blockInd)},d.prototype.merge=function(l){var h=l.left.block,f=l.right.block,u=l.right.offset-l.left.offset-l.gap;h.vars.length<f.vars.length?(f.mergeAcross(h,l,u),this.remove(h)):(h.mergeAcross(f,l,-u),this.remove(f))},d.prototype.forEach=function(l){this.list.forEach(l)},d.prototype.updateBlockPositions=function(){this.list.forEach(function(l){return l.updateWeightedPosition()})},d.prototype.split=function(l){var h=this;this.updateBlockPositions(),this.list.forEach(function(f){var u=f.findMinLM();null!==u&&u.lm<p.LAGRANGIAN_TOLERANCE&&(f=u.left.block,_.split(u).forEach(function(g){return h.insert(g)}),h.remove(f),l.push(u))})},d}();D.Blocks=m;var p=function(){function d(l,h){this.vs=l,this.cs=h,this.vs=l,l.forEach(function(f){f.cIn=[],f.cOut=[]}),this.cs=h,h.forEach(function(f){f.left.cOut.push(f),f.right.cIn.push(f)}),this.inactive=h.map(function(f){return f.active=!1,f}),this.bs=null}return d.prototype.cost=function(){return this.bs.cost()},d.prototype.setStartingPositions=function(l){this.inactive=this.cs.map(function(h){return h.active=!1,h}),this.bs=new m(this.vs),this.bs.forEach(function(h,f){return h.posn=l[f]})},d.prototype.setDesiredPositions=function(l){this.vs.forEach(function(h,f){return h.desiredPosition=l[f]})},d.prototype.mostViolated=function(){for(var l=Number.MAX_VALUE,h=null,f=this.inactive,u=f.length,g=u,C=0;C<u;++C){var L=f[C];if(!L.unsatisfiable){var I=L.slack();if((L.equality||I<l)&&(l=I,h=L,g=C,L.equality))break}}return g!==u&&(l<d.ZERO_UPPERBOUND&&!h.active||h.equality)&&(f[g]=f[u-1],f.length=u-1),h},d.prototype.satisfy=function(){null==this.bs&&(this.bs=new m(this.vs)),this.bs.split(this.inactive);for(var l=null;(l=this.mostViolated())&&(l.equality||l.slack()<d.ZERO_UPPERBOUND&&!l.active);){var h=l.left.block;if(h!==l.right.block)this.bs.merge(l);else{if(h.isActiveDirectedPathBetween(l.right,l.left)){l.unsatisfiable=!0;continue}var u=h.splitBetween(l.left,l.right);if(null===u){l.unsatisfiable=!0;continue}this.bs.insert(u.lb),this.bs.insert(u.rb),this.bs.remove(h),this.inactive.push(u.constraint),l.slack()>=0?this.inactive.push(l):this.bs.merge(l)}}},d.prototype.solve=function(){this.satisfy();for(var l=Number.MAX_VALUE,h=this.bs.cost();Math.abs(l-h)>1e-4;)this.satisfy(),l=h,h=this.bs.cost();return h},d.LAGRANGIAN_TOLERANCE=-1e-4,d.ZERO_UPPERBOUND=-1e-10,d}();D.Solver=p,D.removeOverlapInOneDimension=function t(d,l,h){for(var f=d.map(function(et){return new x(et.desiredCenter)}),u=[],g=d.length,C=0;C<g-1;C++)u.push(new c(f[C],f[C+1],(d[C].size+d[C+1].size)/2));var B=f[0],M=f[g-1],F=d[0].size/2,Z=d[g-1].size/2,H=null,G=null;return l&&(H=new x(l,1e3*B.weight),f.push(H),u.push(new c(H,B,F))),h&&(G=new x(h,1e3*M.weight),f.push(G),u.push(new c(M,G,Z))),new p(f,u).solve(),{newCenters:f.slice(0,d.length).map(function(et){return et.position()}),lowerBound:H?H.position():B.position()-F,upperBound:G?G.position():M.position()+Z}}}}]);