function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Fm3m:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("X2Q7"),r=i("Iydx"),n=i("EM62"),c=i("sEIs"),a=i("2kYt"),o=i("NU+N");function u(e,t){if(1&e&&n.Rb(0,"app-managers-page",1),2&e){var i=n.ic();n.oc("complementaryObject",i.resource)("complementaryObjectType",i.type)("theme",i.theme)("availableRoles",i.availableRoles)}}var l=function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.resourceService=i,this.availableRoles=[r.a.RESOURCEADMIN],this.type="Resource",this.theme="resource-theme"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.resourceService.getResourceById(t.resourceId).subscribe((function(t){e.resource=t}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Qb(c.a),n.Qb(s.m))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-resource-settings-managers"]],decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&n.Jc(0,u,1,4,"app-managers-page",0),2&e&&n.oc("ngIf",t.resource)},directives:[a.t,o.a],styles:[""]}),e}()},GyaY:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("TkCa"),r=i("EM62"),n=i("ma6z"),c=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&r.Rb(0,"app-animated-router-outlet")},directives:[n.a],styles:[""],data:{animation:[s.a]}}),e}()},HUrR:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var s=i("X2Q7"),r=i("EM62"),n=i("sEIs"),c=i("2kYt"),a=i("csyo"),o=i("ZG5M");function u(e,t){1&e&&r.Rb(0,"mat-spinner",2)}function l(e,t){if(1&e&&(r.Wb(0,"div"),r.Rb(1,"perun-web-apps-menu-buttons-field",3),r.Vb()),2&e){var i=r.ic();r.Cb(1),r.oc("items",i.items)("size","small")}}var b=function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.resourceManager=i,this.items=[],this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.parent.parent.params.subscribe((function(t){e.resourceManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.parent.snapshot.url[0].path),e.loading=!1}),(function(){return e.loading=!1}))}))}},{key:"initItems",value:function(e){this.items=[{cssIcon:"perun-manager",url:"".concat(e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings/managers"),label:"MENU_ITEMS.RESOURCE.MANAGERS",style:"resource-btn"}]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Qb(n.a),r.Qb(s.m))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(r.Jc(0,u,1,0,"mat-spinner",0),r.Jc(1,l,2,2,"div",1)),2&e&&(r.oc("ngIf",t.loading),r.Cb(1),r.oc("ngIf",!t.loading))},directives:[c.t,a.c,o.a],styles:[""]}),e}()},TNye:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var s=i("X2Q7"),r=i("iyZ4"),n=i("cqs0"),c=i("8clQ"),a=i("/bE8"),o=i("ESXS"),u=i("Ssnw"),l=i("EM62"),b=i("sEIs"),f=i("OZ4H"),h=i("0XDM"),d=i("2kYt"),p=i("A8Ay"),g=i("PBFl"),v=i("csyo"),m=i("gcZR"),I=i("s2Ay");function S(e,t){if(1&e){var i=l.Xb();l.Wb(0,"button",7),l.ec("click",(function(){return l.Bc(i),l.ic().addService()})),l.Lc(1),l.jc(2,"translate"),l.Vb()}2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"RESOURCE_DETAIL.ASSIGNED_SERVICES.ADD_SERVICE"),"\n"))}function E(e,t){if(1&e){var i=l.Xb();l.Wb(0,"button",8),l.ec("click",(function(){return l.Bc(i),l.ic().removeServices()})),l.Lc(1),l.jc(2,"translate"),l.Vb()}if(2&e){var s=l.ic();l.oc("disabled",0===s.selected.selected.length),l.Cb(1),l.Nc(" ",l.kc(2,2,"RESOURCE_DETAIL.ASSIGNED_SERVICES.REMOVE_SERVICE"),"\n")}}function R(e,t){1&e&&l.Rb(0,"mat-spinner",9)}var C=function(){return[]},y=function(){return["select"]};function A(e,t){if(1&e){var i=l.Xb();l.Wb(0,"app-services-list",10),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb()}if(2&e){var s=l.ic();l.oc("pageSize",s.pageSize)("services",s.assignedServices)("selection",s.selected)("filterValue",s.filterValue)("hideColumns",s.removeServiceAuth?l.sc(6,C):l.sc(7,y))("disableRouting",!s.serviceRoutingAuth)}}var k=function(){var e=function(){function e(t,i,s,c,a){_classCallCheck(this,e),this.route=t,this.resourcesManager=i,this.tableConfigService=s,this.dialog=c,this.guiAuthResolver=a,this.assignedServices=[],this.selected=new n.c(!0,[]),this.tableId=r.N,this.filterValue=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.resourcesManager.getResourceById(e.resourceId).subscribe((function(t){e.resource=t,e.getDataForAuthorization(),e.loadAllServices()}))}))}},{key:"loadAllServices",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedServicesToResource(this.resourceId).subscribe((function(t){e.assignedServices=t,e.selected.clear(),e.loading=!1}))}},{key:"addService",value:function(){var e=this,t=Object(c.k)();t.width="800px",t.data={theme:"resource-theme",resourceId:this.resourceId},this.dialog.open(a.a,t).afterClosed().subscribe((function(t){t&&e.loadAllServices()}))}},{key:"removeServices",value:function(){var e=this,t=Object(c.k)();t.width="500px",t.data={theme:"resource-theme",resourceId:this.resourceId,services:this.selected.selected},this.dialog.open(o.a,t).afterClosed().subscribe((function(t){t&&e.loadAllServices()}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){this.assignServiceAuth=this.guiAuthResolver.isAuthorized("assignServices_Resource_List<Service>_policy",[this.resource]),this.removeServiceAuth=this.guiAuthResolver.isAuthorized("removeServices_Resource_List<Service>_policy",[this.resource]),this.serviceRoutingAuth=this.guiAuthResolver.isPerunAdmin()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(b.a),l.Qb(s.m),l.Qb(r.lb),l.Qb(f.b),l.Qb(u.g))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-perun-web-apps-resource-assigned-services"]],decls:9,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","ml-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","services","selection","filterValue","hideColumns","disableRouting","page",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"pageSize","services","selection","filterValue","hideColumns","disableRouting","page"]],template:function(e,t){1&e&&(l.Wb(0,"h1",0),l.Lc(1),l.jc(2,"translate"),l.Vb(),l.Wb(3,"perun-web-apps-refresh-button",1),l.ec("refresh",(function(){return t.loadAllServices()})),l.Vb(),l.Jc(4,S,3,3,"button",2),l.Jc(5,E,3,4,"button",3),l.Wb(6,"perun-web-apps-immediate-filter",4),l.ec("filter",(function(e){return t.applyFilter(e)})),l.Vb(),l.Jc(7,R,1,0,"mat-spinner",5),l.Jc(8,A,1,8,"app-services-list",6)),2&e&&(l.Cb(1),l.Mc(l.kc(2,6,"RESOURCE_DETAIL.ASSIGNED_SERVICES.TITLE")),l.Cb(3),l.oc("ngIf",!t.loadingResource&&t.assignServiceAuth),l.Cb(1),l.oc("ngIf",!t.loadingResource&&t.removeServiceAuth),l.Cb(1),l.oc("placeholder","RESOURCE_DETAIL.ASSIGNED_SERVICES.FILTER_SERVICES"),l.Cb(1),l.oc("ngIf",t.loading),l.Cb(1),l.oc("ngIf",!t.loading))},directives:[h.a,d.t,p.a,g.b,v.c,m.a],pipes:[I.d],styles:[""]}),e}()},gxIj:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var s=i("Ssnw"),r=(i("HHEo"),i("cqs0")),n=i("mEf3"),c=i("8clQ"),a=i("X2Q7"),o=i("iyZ4"),u=i("+0js"),l=i("IDQ9"),b=i("EM62"),f=i("sEIs"),h=i("OZ4H"),d=i("s2Ay"),p=i("0XDM"),g=i("PBFl"),v=i("A8Ay"),m=i("2kYt"),I=i("csyo"),S=i("LKLE"),E=["list"];function R(e,t){1&e&&b.Rb(0,"mat-spinner",8)}function C(e,t){if(1&e){var i=b.Xb();b.Wb(0,"perun-web-apps-attributes-list",9,10),b.ec("page",(function(e){return b.Bc(i),b.ic().pageChanged(e)})),b.Vb()}if(2&e){var s=b.ic();b.oc("pageSize",s.pageSize)("filterValue",s.filterValue)("attributes",s.attributes)("selection",s.selection)}}var y=function(){var e=function(){function e(t,i,s,n,c,a){var u=this;_classCallCheck(this,e),this.attributesManager=t,this.route=i,this.dialog=s,this.notificator=n,this.tableConfigService=c,this.translate=a,this.attributes=[],this.selection=new r.c(!0,[]),this.filterValue="",this.tableId=o.n,this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(e){return u.saveSuccessMessage=e})),this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(e){return u.deleteSuccessMessage=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.refreshTable()}))}},{key:"onDelete",value:function(){var e=this,t=Object(c.k)();t.width="450px",t.data={entityId:this.resourceId,entity:"resource",attributes:this.selection.selected,theme:"resource-theme"},this.dialog.open(n.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes();var t=Object(c.k)();t.width="450px",t.data={entityId:this.resourceId,entity:"resource",attributes:this.selection.selected},this.dialog.open(u.d,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onCreate",value:function(){var e=this,t=Object(c.k)();t.width="1050px",t.data={entityId:this.resourceId,entity:"resource",notEmptyAttributes:this.attributes,style:"resource-theme"},this.dialog.open(l.a,t).afterClosed().subscribe((function(t){"saved"===t&&e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getResourceAttributes(this.resourceId).subscribe((function(t){e.attributes=t,e.selection.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(b.Qb(a.c),b.Qb(f.a),b.Qb(h.b),b.Qb(s.k),b.Qb(o.lb),b.Qb(d.e))},e.\u0275cmp=b.Kb({type:e,selectors:[["app-resource-attributes"]],viewQuery:function(e,t){var i;1&e&&b.Tc(E,!0),2&e&&b.wc(i=b.fc())&&(t.list=i.first)},hostVars:2,hostBindings:function(e,t){2&e&&b.Gb("router-component",!0)},decls:17,vars:17,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""]],template:function(e,t){1&e&&(b.Wb(0,"div"),b.Wb(1,"h1",0),b.Lc(2),b.jc(3,"translate"),b.Vb(),b.Wb(4,"perun-web-apps-refresh-button",1),b.ec("refresh",(function(){return t.refreshTable()})),b.Vb(),b.Wb(5,"button",2),b.ec("click",(function(){return t.onCreate()})),b.Lc(6),b.jc(7,"translate"),b.Vb(),b.Wb(8,"button",3),b.ec("click",(function(){return t.onSave()})),b.Lc(9),b.jc(10,"translate"),b.Vb(),b.Wb(11,"button",4),b.ec("click",(function(){return t.onDelete()})),b.Lc(12),b.jc(13,"translate"),b.Vb(),b.Wb(14,"perun-web-apps-immediate-filter",5),b.ec("filter",(function(e){return t.applyFilter(e)})),b.Vb(),b.Jc(15,R,1,0,"mat-spinner",6),b.Jc(16,C,2,4,"perun-web-apps-attributes-list",7),b.Vb()),2&e&&(b.Cb(2),b.Mc(b.kc(3,9,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),b.Cb(4),b.Nc(" ",b.kc(7,11,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),b.Cb(2),b.oc("disabled",0===t.selection.selected.length),b.Cb(1),b.Nc(" ",b.kc(10,13,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),b.Cb(2),b.oc("disabled",0===t.selection.selected.length),b.Cb(1),b.Nc(" ",b.kc(13,15,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),b.Cb(2),b.oc("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),b.Cb(1),b.oc("ngIf",t.loading),b.Cb(1),b.oc("ngIf",!t.loading))},directives:[p.a,g.b,v.a,m.t,I.c,S.a],pipes:[d.d],styles:[""]}),e}()},jblC:function(e,t,i){"use strict";i.d(t,"a",(function(){return M}));var s=i("X2Q7"),r=i("cqs0"),n=i("ILoV"),c=i("VEwN"),a=i("iyZ4"),o=i("8clQ"),u=i("Ssnw"),l=i("EM62"),b=i("sEIs"),f=i("OZ4H"),h=i("0XDM"),d=i("2kYt"),p=i("PBFl"),g=i("Y2X+"),v=i("FoxU"),m=i("csyo"),I=i("K9kF"),S=i("FcRk"),E=i("s2Ay"),R=["checkbox"];function C(e,t){if(1&e){var i=l.Xb();l.Wb(0,"button",9),l.ec("click",(function(){return l.Bc(i),l.ic().addGroup()})),l.Lc(1),l.jc(2,"translate"),l.Vb()}2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"))}function y(e,t){1&e&&l.Rb(0,"mat-spinner",10)}var A=function(e){return[e]},k=function(){return["vo","menu"]};function T(e,t){if(1&e){var i=l.Xb();l.Wb(0,"div",11),l.Wb(1,"perun-web-apps-groups-list",12),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb(),l.Vb()}if(2&e){var s=l.ic();l.Cb(1),l.oc("pageSize",s.pageSize)("groups",s.assignedGroups)("filter",s.filteredValue)("selection",s.selected)("disableMembers",!1)("disableRouting",!s.guiAuthResolver.isAuthorized("getGroupById_int_policy",l.tc(7,A,s.assignedGroups[0])))("hideColumns",l.sc(9,k))}}function _(e,t){1&e&&(l.Wb(0,"app-alert",13),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}var M=function(){var e=function(){function e(t,i,s,n,c,o){_classCallCheck(this,e),this.route=t,this.resourcesManager=i,this.vosManagerService=s,this.tableConfigService=n,this.dialog=c,this.guiAuthResolver=o,this.assignedGroups=[],this.selected=new r.c(!0,[]),this.filteredValue="",this.tableId=a.M}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.getDataForAuthorization(),e.loadAllGroups()}))}},{key:"loadAllGroups",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedGroups(this.resourceId).subscribe((function(t){e.assignedGroups=t,e.selected.clear(),e.loading=!1}))}},{key:"addGroup",value:function(){var e=this,t=Object(o.k)();t.width="800px",t.data={theme:"resource-theme",resource:this.resource},this.dialog.open(c.a,t).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"removeGroups",value:function(){var e=this,t=Object(o.k)();t.width="500px",t.data={resourceId:this.resourceId,groups:this.selected.selected,theme:"resource-theme"},this.dialog.open(n.a,t).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"canRemoveGroups",value:function(){var e=this,t=!0;return this.selected.selected.forEach((function(i){e.guiAuthResolver.isAuthorized("removeGroupsFromResource_List<Group>_Resource_policy",[e.resource,i])||(t=!1)})),t}},{key:"applyFilter",value:function(e){this.filteredValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){var e=this;this.loadingResource=!0,this.resourcesManager.getResourceById(this.resourceId).subscribe((function(t){e.resource=t,e.loadingResource=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(b.a),l.Qb(s.m),l.Qb(s.q),l.Qb(a.lb),l.Qb(f.b),l.Qb(u.g))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(e,t){var i;1&e&&l.Hc(R,!0),2&e&&l.wc(i=l.fc())&&(t.checkbox=i.first)},decls:14,vars:18,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","mat-flat-button","",1,"ml-2","mr-2",3,"disabled","click"],[3,"matTooltipDisabled","matTooltip"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["color","warn",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"pageSize","groups","filter","selection","disableMembers","disableRouting","hideColumns","page"],["color","warn"]],template:function(e,t){1&e&&(l.Wb(0,"h1",0),l.Lc(1),l.jc(2,"translate"),l.Vb(),l.Wb(3,"perun-web-apps-refresh-button",1),l.ec("refresh",(function(){return t.loadAllGroups()})),l.Vb(),l.Jc(4,C,3,3,"button",2),l.Wb(5,"button",3),l.ec("click",(function(){return t.removeGroups()})),l.Wb(6,"span",4),l.jc(7,"translate"),l.Lc(8),l.jc(9,"translate"),l.Vb(),l.Vb(),l.Wb(10,"app-debounce-filter",5),l.ec("filter",(function(e){return t.applyFilter(e)})),l.Vb(),l.Jc(11,y,1,0,"mat-spinner",6),l.Jc(12,T,2,10,"div",7),l.Jc(13,_,3,3,"app-alert",8)),2&e&&(l.Cb(1),l.Mc(l.kc(2,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),l.Cb(3),l.oc("ngIf",!t.loadingResource&&t.guiAuthResolver.isAuthorized("assignGroupsToResource_List<Group>_Resource_policy",l.tc(16,A,t.resource))),l.Cb(1),l.oc("disabled",0===t.selected.selected.length||!t.canRemoveGroups()),l.Cb(1),l.pc("matTooltip",l.kc(7,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_TOOLTIP")),l.oc("matTooltipDisabled",t.canRemoveGroups()),l.Cb(2),l.Nc(" ",l.kc(9,14,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP")," "),l.Cb(2),l.oc("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),l.Cb(1),l.oc("ngIf",t.loading),l.Cb(1),l.oc("ngIf",!t.loading&&0!==t.assignedGroups.length),l.Cb(1),l.oc("ngIf",0===t.assignedGroups.length&&!t.loading))},directives:[h.a,d.t,p.b,g.a,v.a,m.c,I.a,S.a],pipes:[E.d],styles:[""]}),e}()},lfUW:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var s=i("X2Q7"),r=i("iyZ4"),n=i("Ssnw"),c=i("EM62"),a=i("sEIs"),o=i("2kYt"),u=i("0XDM"),l=i("A8Ay"),b=i("csyo"),f=i("nz2m"),h=i("s2Ay");function d(e,t){if(1&e){var i=c.Xb();c.Wb(0,"perun-web-apps-refresh-button",5),c.ec("refresh",(function(){return c.Bc(i),c.ic().refreshTable()})),c.Vb()}}function p(e,t){if(1&e){var i=c.Xb();c.Wb(0,"perun-web-apps-immediate-filter",6),c.ec("filter",(function(e){return c.Bc(i),c.ic().applyFilter(e)})),c.Vb()}2&e&&c.oc("placeholder","RESOURCE_DETAIL.ASSIGNED_MEMBERS.FILTER")}function g(e,t){1&e&&c.Rb(0,"mat-spinner",7)}var v=function(){return["checkbox","email","status","organization","logins"]};function m(e,t){if(1&e){var i=c.Xb();c.Wb(0,"perun-web-apps-members-list",8),c.ec("page",(function(e){return c.Bc(i),c.ic().pageChanged(e)}))("updateTable",(function(){return c.Bc(i),c.ic().refreshTable()})),c.Vb()}if(2&e){var s=c.ic();c.oc("disableRouting",!s.routeAuth)("filter",s.filterValue)("hideColumns",c.sc(5,v))("members",s.members)("pageSize",s.pageSize)}}var I=function(){var e=function(){function e(t,i,s,n){_classCallCheck(this,e),this.route=t,this.resourceService=i,this.tableConfigService=s,this.authResolver=n,this.loading=!1,this.filterValue="",this.tableId=r.O}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.resourceService.getAssignedRichMembers(this.resourceId).subscribe((function(t){e.members=t,e.setAuthRights(),e.loading=!1}))}},{key:"setAuthRights",value:function(){0!==this.members.length&&(this.routeAuth=this.authResolver.isAuthorized("getMemberById_int_policy",[this.members[0]]))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Qb(a.a),c.Qb(s.m),c.Qb(r.lb),c.Qb(n.g))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-resource-assigned-members"]],decls:7,vars:7,consts:[[1,"page-subtitle"],[3,"refresh",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"disableRouting","filter","hideColumns","members","pageSize","page","updateTable",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"disableRouting","filter","hideColumns","members","pageSize","page","updateTable"]],template:function(e,t){1&e&&(c.Wb(0,"h1",0),c.Lc(1),c.jc(2,"translate"),c.Vb(),c.Jc(3,d,1,0,"perun-web-apps-refresh-button",1),c.Jc(4,p,1,1,"perun-web-apps-immediate-filter",2),c.Jc(5,g,1,0,"mat-spinner",3),c.Jc(6,m,1,6,"perun-web-apps-members-list",4)),2&e&&(c.Cb(1),c.Mc(c.kc(2,5,"RESOURCE_DETAIL.ASSIGNED_MEMBERS.TITLE")),c.Cb(2),c.oc("ngIf",!t.loading),c.Cb(1),c.oc("ngIf",!t.loading),c.Cb(1),c.oc("ngIf",t.loading),c.Cb(1),c.oc("ngIf",!t.loading))},directives:[o.t,u.a,l.a,b.c,f.a],pipes:[h.d],styles:[""]}),e}()},nSPi:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var s=i("TkCa"),r=i("4sdY"),n=i("EkAj"),c=i("X2Q7"),a=i("8clQ"),o=i("Ssnw"),u=i("t47Z"),l=i("+0js"),b=i("EM62"),f=i("sEIs"),h=i("OZ4H"),d=i("EtYo"),p=i("2kYt"),g=i("ma6z"),v=i("csyo"),m=i("bFHC"),I=i("Y2X+"),S=i("PBFl"),E=i("s2Ay");function R(e,t){1&e&&b.Rb(0,"mat-spinner",3)}function C(e,t){if(1&e){var i=b.Xb();b.Wb(0,"button",14),b.ec("click",(function(){return b.Bc(i),b.ic(2).editResource()})),b.Wb(1,"mat-icon"),b.Lc(2,"edit"),b.Vb(),b.Vb()}}var y=function(e){return["/organizations",e]};function A(e,t){if(1&e&&(b.Wb(0,"a",8),b.Lc(1),b.Vb()),2&e){var i=b.ic(2);b.oc("routerLink",b.tc(2,y,i.resource.vo.id)),b.Cb(1),b.Mc(i.resource.vo.name)}}function k(e,t){if(1&e&&(b.Wb(0,"span"),b.Lc(1),b.Vb()),2&e){var i=b.ic(2);b.Cb(1),b.Nc(" ",i.resource.vo.name," ")}}var T=function(e){return["/facilities",e]};function _(e,t){if(1&e&&(b.Wb(0,"a",8),b.Lc(1),b.Vb()),2&e){var i=b.ic(2);b.oc("routerLink",b.tc(2,T,i.resource.facilityId)),b.Cb(1),b.Mc(i.resource.facility.name)}}function M(e,t){if(1&e&&(b.Wb(0,"span"),b.Lc(1),b.Vb()),2&e){var i=b.ic(2);b.Cb(1),b.Nc(" ",i.resource.facility.name," ")}}var O=function(){return{color:"black"}},V=function(e){return[e]};function L(e,t){if(1&e&&(b.Wb(0,"div",4),b.Rb(1,"mat-icon",5),b.jc(2,"translate"),b.Wb(3,"div",6),b.Wb(4,"div",7),b.Wb(5,"a",8),b.Lc(6),b.Vb(),b.Wb(7,"span",9),b.Lc(8),b.Vb(),b.Jc(9,C,3,0,"button",10),b.Vb(),b.Wb(10,"span",11),b.Lc(11),b.jc(12,"translate"),b.jc(13,"translate"),b.Jc(14,A,2,4,"a",12),b.Jc(15,k,2,1,"span",13),b.Lc(16),b.jc(17,"translate"),b.Jc(18,_,2,4,"a",12),b.Jc(19,M,2,1,"span",13),b.Lc(20),b.jc(21,"translate"),b.Vb(),b.Vb(),b.Vb()),2&e){var i=b.ic();b.Cb(1),b.pc("matTooltip",b.kc(2,17,"RESOURCE_DETAIL.ENTITY")),b.oc("ngStyle",b.sc(27,O)),b.Cb(4),b.oc("routerLink",b.tc(28,V,i.baseUrl)),b.Cb(1),b.Nc(" ",i.resource.name," "),b.Cb(2),b.Nc(" \xa0#",i.resource.id," "),b.Cb(1),b.oc("ngIf",i.editResourceAuth),b.Cb(2),b.Oc(" ",b.kc(12,19,"RESOURCE_DETAIL.ENTITY"),", ",b.kc(13,21,"RESOURCE_DETAIL.VO"),": "),b.Cb(3),b.oc("ngIf",i.voLinkAuth),b.Cb(1),b.oc("ngIf",!i.voLinkAuth),b.Cb(1),b.Oc(" #",i.resource.voId,", ",b.kc(17,23,"RESOURCE_DETAIL.FACILITY"),": "),b.Cb(2),b.oc("ngIf",i.facilityLinkAuth),b.Cb(1),b.oc("ngIf",!i.facilityLinkAuth),b.Cb(1),b.Pc(" #",i.resource.facilityId,", ",b.kc(21,25,"RESOURCE_DETAIL.DESCRIPTION"),": ",i.resource.description," ")}}var w=function(){var e=function(){function e(t,i,s,r,n,c,a,o){_classCallCheck(this,e),this.route=t,this.facilityManager=i,this.vosManagerService=s,this.resourcesManager=r,this.sideMenuService=n,this.sideMenuItemService=c,this.dialog=a,this.guiAuthResolver=o,this.baseUrl="",this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe((function(t){e.resourcesManager.getRichResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.setAuth(),"facilities"===e.route.parent.snapshot.url[0].path?(e.baseUrl=(new u.a).transform(t,!1),e.facilityManager.getFacilityById(t.facilityId).subscribe((function(i){var s=e.sideMenuItemService.parseFacility(i),r=e.sideMenuItemService.parseResource(t,!1);e.sideMenuService.setFacilityMenuItems([s,r]),e.loading=!1}),(function(){return e.loading=!1}))):(e.baseUrl=(new u.a).transform(t,!0),e.vosManagerService.getVoById(t.voId).subscribe((function(i){var s=e.sideMenuItemService.parseVo(i),r=e.sideMenuItemService.parseResource(t,!0);e.sideMenuService.setAccessMenuItems([s,r]),e.loading=!1}),(function(){return e.loading=!1})))}))}))}},{key:"setAuth",value:function(){this.facilityLinkAuth=this.guiAuthResolver.isAuthorized("getFacilityById_int_policy",[this.resource]),this.editResourceAuth=this.guiAuthResolver.isAuthorized("updateResource_Resource_policy",[this.resource]),this.voLinkAuth=this.guiAuthResolver.isAuthorized("getVoById_int_policy",[this.resource])}},{key:"editResource",value:function(){var e,t=this;this.resourcesManager.getResourceById(this.resource.id).subscribe((function(i){e=i;var s=Object(a.k)();s.width="450px",s.data={theme:"resource-theme",resource:e,dialogType:l.f.RESOURCE},t.dialog.open(l.e,s).afterClosed().subscribe((function(e){e&&t.resourcesManager.getRichResourceById(t.resource.id).subscribe((function(e){t.resource=e}))}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(b.Qb(f.a),b.Qb(c.g),b.Qb(c.q),b.Qb(c.m),b.Qb(r.a),b.Qb(n.a),b.Qb(h.b),b.Qb(o.g))},e.\u0275cmp=b.Kb({type:e,selectors:[["app-resource-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],["class","mr-auto ml-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-resource-black",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"resource-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","","aria-label","Edit resource",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],["class","resource-link",3,"routerLink",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","aria-label","Edit resource",3,"click"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Rb(1,"perun-web-apps-back-button"),b.Jc(2,R,1,0,"mat-spinner",1),b.Jc(3,L,22,30,"div",2),b.Rb(4,"app-animated-router-outlet"),b.Vb()),2&e&&(b.Cb(2),b.oc("ngIf",t.loading),b.Cb(1),b.oc("ngIf",!t.loading&&void 0!==t.resource))},directives:[d.a,p.t,g.a,v.c,m.a,I.a,p.w,f.i,S.b],pipes:[E.d],styles:[".break-line[_ngcontent-%COMP%]{display:inline-block}"],data:{animation:[s.a]}}),e}()},"y/MV":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i("X2Q7"),r=i("Ssnw"),n=i("EM62"),c=i("sEIs"),a=i("2kYt"),o=i("csyo"),u=i("ZG5M");function l(e,t){1&e&&n.Rb(0,"mat-spinner",2)}function b(e,t){if(1&e&&(n.Wb(0,"div"),n.Rb(1,"perun-web-apps-menu-buttons-field",3),n.Vb()),2&e){var i=n.ic();n.Cb(1),n.oc("items",i.navItems)("size","small")}}var f=function(){var e=function(){function e(t,i,s){_classCallCheck(this,e),this.resourcesManager=t,this.route=i,this.guiAuthResolver=s,this.navItems=[],this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe((function(t){e.resourcesManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.snapshot.url[0].path),e.loading=!1}),(function(){return e.loading=!1}))}))}},{key:"initItems",value:function(e){var t=e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId;this.navItems=[{cssIcon:"perun-attributes",url:"".concat(t,"/resources/").concat(this.resource.id,"/attributes"),label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"}],this.guiAuthResolver.isAuthorized("getAssignedGroups_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-group",url:"".concat(t,"/resources/").concat(this.resource.id,"/groups"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedServices_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-service",url:"/".concat(t,"/resources/").concat(this.resource.id,"/services"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_SERVICES",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedMembers_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-user",url:"".concat(t,"/resources/").concat(this.resource.id,"/members"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_MEMBERS",style:"resource-btn"}),this.navItems.push({cssIcon:"perun-settings2",url:"".concat(t,"/resources/").concat(this.resource.id,"/settings"),label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Qb(s.m),n.Qb(c.a),n.Qb(r.g))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&n.Gb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(n.Jc(0,l,1,0,"mat-spinner",0),n.Jc(1,b,2,2,"div",1)),2&e&&(n.oc("ngIf",t.loading),n.Cb(1),n.oc("ngIf",!t.loading))},directives:[a.t,o.c,u.a],styles:[""]}),e}()}}]);