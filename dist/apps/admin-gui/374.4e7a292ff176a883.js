"use strict";(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[374],{54668:(B,M,n)=>{n.d(M,{l:()=>l});var C=n(48966),_=n(32105),S=n(32080),s=n(10036),e=n(20449),b=n(64080),r=n(93075),t=n(5e3),T=n(51062),E=n(67322),D=n(98833),P=n(47423),N=n(25245),Z=n(69808),v=n(64877),O=n(98380),h=n(20773);function f(o,m){if(1&o&&t._UZ(0,"app-users-list",14),2&o){const d=t.oxw(2);t.Q6J("displayedColumns",d.displayedColumns)("selection",d.selection)("tableId",d.tableId)("disableRouting",!0)("users",d.identities)}}function A(o,m){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,f,1,5,"app-users-list",13),t.qZA()),2&o){const d=t.oxw();t.xp6(1),t.Q6J("ngIf",void 0!==d.identities&&d.identities.length>0)}}function u(o,m){1&o&&(t.TgZ(0,"perun-web-apps-alert",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function p(o,m){1&o&&(t.TgZ(0,"perun-web-apps-alert",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES")," "))}function a(o,m){1&o&&t._UZ(0,"mat-spinner",17)}let l=(()=>{class o{constructor(d,U,L,x,F,Q){this.dialogRef=d,this.data=U,this.userManager=L,this.storeService=x,this.notificator=F,this.translate=Q,this.loading=!1,this.selection=new e.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=s.Iz}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new r.NI("",[r.kI.required,r.kI.pattern(".*[\\S]+.*")])}onAdd(){let d,U;this.loading=!0,this.isService?(d=this.selection.selected[0].id,U=this.userId):(d=this.userId,U=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(d,U).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid)return void this.searchCtrl.markAllAsTouched();this.loading=!0,this.firstSearchDone=!0;let d=[b.r.USER_DEF_ORGANIZATION,b.r.USER_DEF_PREFERRED_MAIL];d=d.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,d).subscribe(U=>{this.identities=this.filterIdentities(U),this.loading=!1},()=>{this.loading=!1})}onKeyInput(d){"Enter"===d.key&&this.onSearchByString()}filterIdentities(d){return d.filter(this.isService?U=>!U.serviceUser:U=>U.serviceUser)}}return o.\u0275fac=function(d){return new(d||o)(t.Y36(C.so),t.Y36(C.WI),t.Y36(_.Fv),t.Y36(S.d6),t.Y36(S.V6),t.Y36(T.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-connect-identity-dialog"]],decls:25,vars:25,consts:[[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"mr-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"placeholder","formControl"],["color","primary","mat-flat-button","",1,"mr-2","search-btn",3,"disabled","click"],[4,"ngIf"],["alert_type","info",4,"ngIf"],["alert_type","warn",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[3,"displayedColumns","selection","tableId","disableRouting","users",4,"ngIf"],[3,"displayedColumns","selection","tableId","disableRouting","users"],["alert_type","info"],["alert_type","warn"],[1,"ml-auto","mr-auto"]],template:function(d,U){1&d&&(t.TgZ(0,"div",0),t.NdJ("keyup",function(x){return U.onKeyInput(x)}),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",4),t.ALo(7,"translate"),t.TgZ(8,"mat-error"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){return U.onSearchByString()}),t.TgZ(12,"mat-icon"),t._uU(13,"search"),t.qZA(),t.qZA(),t.YNc(14,A,2,1,"div",6),t.YNc(15,u,3,3,"perun-web-apps-alert",7),t.YNc(16,p,3,3,"perun-web-apps-alert",8),t.qZA(),t.YNc(17,a,1,0,"mat-spinner",9),t.TgZ(18,"div",10),t.TgZ(19,"button",11),t.NdJ("click",function(){return U.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",12),t.NdJ("click",function(){return U.onAdd()}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.Tol(U.theme),t.xp6(2),t.Oqu(t.lcZ(3,15,"DIALOGS.CONNECT_IDENTITY.TITLE_"+U.target)),t.xp6(4),t.s9C("placeholder",t.lcZ(7,17,"DIALOGS.CONNECT_IDENTITY.SEARCH")),t.Q6J("formControl",U.searchCtrl),t.xp6(3),t.hij(" ",t.lcZ(10,19,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),t.xp6(2),t.Q6J("disabled",U.loading),t.xp6(3),t.Q6J("ngIf",!U.loading),t.xp6(1),t.Q6J("ngIf",!U.firstSearchDone),t.xp6(1),t.Q6J("ngIf",!U.loading&&U.firstSearchDone&&0===U.identities.length),t.xp6(1),t.Q6J("ngIf",U.loading),t.xp6(3),t.hij(" ",t.lcZ(21,21,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===U.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(24,23,"DIALOGS.CONNECT_IDENTITY.CONNECT")," "))},directives:[C.uh,C.xY,E.KE,D.Nt,r.Fj,r.JJ,r.oH,E.TO,P.lW,N.Hw,Z.O5,v.C,O.w,h.Ou,C.H8],pipes:[T.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]}),o})()},94814:(B,M,n)=>{n.d(M,{B:()=>h});var C=n(32105),_=n(48966),S=n(32080),s=n(32075),e=n(5e3),b=n(51062),r=n(69808),t=n(98380),T=n(47423),E=n(31359);function D(f,A){1&f&&e._UZ(0,"th",13)}function P(f,A){if(1&f&&(e.TgZ(0,"td",14),e._uU(1),e.ALo(2,"userFullName"),e.qZA()),2&f){const u=A.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,u))}}function N(f,A){1&f&&e._UZ(0,"tr",15)}function Z(f,A){1&f&&e._UZ(0,"tr",16)}function v(f,A){1&f&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&f&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function O(f,A){1&f&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&f&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}let h=(()=>{class f{constructor(u,p,a,l,o,m){this.dialogRef=u,this.data=p,this.userManager=a,this.notificator=l,this.translate=o,this.store=m,this.displayedColumns=["name"]}ngOnInit(){let u;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new s.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(u=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(u=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(u).subscribe(p=>{this.disconnectingLastOwner=1===p.length})}onConfirm(){let u,p;this.isService?(u=this.dataSource.data[0].id,p=this.userId):(u=this.userId,p=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(u,p).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}}return f.\u0275fac=function(u){return new(u||f)(e.Y36(_.so),e.Y36(_.WI),e.Y36(C.Fv),e.Y36(S.V6),e.Y36(b.sK),e.Y36(S.d6))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","font-weight-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","warn","mat-flat-button","",1,"ml-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["alert_type","warn"]],template:function(u,p){1&u&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"div",1),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",2),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"table",3),e.ynx(12,4),e.YNc(13,D,1,0,"th",5),e.YNc(14,P,3,3,"td",6),e.BQk(),e.YNc(15,N,1,0,"tr",7),e.YNc(16,Z,1,0,"tr",8),e.qZA(),e.YNc(17,v,3,3,"perun-web-apps-alert",9),e.YNc(18,O,3,3,"perun-web-apps-alert",9),e.qZA(),e.TgZ(19,"div",10),e.TgZ(20,"button",11),e.NdJ("click",function(){return p.onCancel()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return p.onConfirm()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA()),2&u&&(e.xp6(1),e.Oqu(e.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+p.targetTitle)),e.xp6(2),e.Tol(p.theme),e.xp6(3),e.Oqu(e.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+p.targetDescription)),e.xp6(3),e.hij(" ",e.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),e.xp6(2),e.Q6J("dataSource",p.dataSource),e.xp6(4),e.Q6J("matHeaderRowDef",p.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",p.displayedColumns),e.xp6(1),e.Q6J("ngIf",p.disconnectingSelf),e.xp6(1),e.Q6J("ngIf",p.disconnectingLastOwner),e.xp6(3),e.hij(" ",e.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},directives:[_.uh,_.xY,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,r.O5,t.w,_.H8,T.lW],pipes:[b.X$,E.d],styles:[""]}),f})()},29862:(B,M,n)=>{n.d(M,{x:()=>O});var C=n(32105),_=n(48966),S=n(32080),s=n(93075),e=n(5e3),b=n(51062),r=n(67322),t=n(98833),T=n(69808),E=n(47423);function D(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function P(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function N(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function Z(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function v(h,f){1&h&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}let O=(()=>{class h{constructor(A,u,p,a,l){this.dialogRef=A,this.data=u,this.userService=p,this.notificator=a,this.translateService=l,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new s.NI(this.data.user.titleBefore,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.titleAfter=new s.NI(this.data.user.titleAfter,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.firstName=new s.NI(this.data.user.firstName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.middleName=new s.NI(this.data.user.middleName,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.lastName=new s.NI(this.data.user.lastName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(A=>{this.notificator.showSuccess(A),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return h.\u0275fac=function(A){return new(A||h)(e.Y36(_.so),e.Y36(_.WI),e.Y36(C.Fv),e.Y36(S.V6),e.Y36(b.sK))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-edit-user-dialog"]],decls:32,vars:38,consts:[[1,"mat-dialog-title"],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl","placeholder"],[4,"ngIf"],["matInput","","data-cy","user-first-name-input","required","",3,"placeholder","formControl"],["matInput","","required","",3,"formControl","placeholder"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","user-save-button","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(A,u){1&A&&(e.TgZ(0,"div"),e.TgZ(1,"h1",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"mat-form-field"),e._UZ(6,"input",2),e.ALo(7,"translate"),e.YNc(8,D,3,3,"mat-error",3),e.qZA(),e.TgZ(9,"mat-form-field"),e._UZ(10,"input",2),e.ALo(11,"translate"),e.YNc(12,P,3,3,"mat-error",3),e.qZA(),e.TgZ(13,"mat-form-field"),e._UZ(14,"input",4),e.ALo(15,"translate"),e.YNc(16,N,3,3,"mat-error",3),e.qZA(),e.TgZ(17,"mat-form-field"),e._UZ(18,"input",2),e.ALo(19,"translate"),e.YNc(20,Z,3,3,"mat-error",3),e.qZA(),e.TgZ(21,"mat-form-field"),e._UZ(22,"input",5),e.ALo(23,"translate"),e.YNc(24,v,3,3,"mat-error",3),e.qZA(),e.qZA(),e.TgZ(25,"div",6),e.TgZ(26,"button",7),e.NdJ("click",function(){return u.onCancel()}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"button",8),e.NdJ("click",function(){return u.onSave()}),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.qZA(),e.qZA()),2&A&&(e.Tol(u.theme),e.xp6(2),e.Oqu(e.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),e.xp6(4),e.s9C("placeholder",e.lcZ(7,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),e.Q6J("formControl",u.titleBefore),e.xp6(2),e.Q6J("ngIf",u.titleBefore.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(11,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),e.Q6J("formControl",u.titleAfter),e.xp6(2),e.Q6J("ngIf",u.titleAfter.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(15,28,"DIALOGS.EDIT_USER.FIRST_NAME")),e.Q6J("formControl",u.firstName),e.xp6(2),e.Q6J("ngIf",u.firstName.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(19,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),e.Q6J("formControl",u.middleName),e.xp6(2),e.Q6J("ngIf",u.middleName.invalid),e.xp6(2),e.s9C("placeholder",e.lcZ(23,32,"DIALOGS.EDIT_USER.LAST_NAME")),e.Q6J("formControl",u.lastName),e.xp6(2),e.Q6J("ngIf",u.lastName.invalid),e.xp6(3),e.hij(" ",e.lcZ(28,34,"DIALOGS.EDIT_USER.CANCEL")," "),e.xp6(2),e.Q6J("disabled",u.loading||u.firstName.invalid||u.lastName.invalid||u.titleBefore.invalid||u.titleAfter.invalid||u.middleName.invalid),e.xp6(1),e.hij(" ",e.lcZ(31,36,"DIALOGS.EDIT_USER.SAVE")," "))},directives:[_.xY,r.KE,t.Nt,s.Fj,s.JJ,s.oH,T.O5,r.TO,s.Q7,_.H8,E.lW],pipes:[b.X$],styles:[""]}),h})()},98973:(B,M,n)=>{n.d(M,{u:()=>Z});var C=n(32080),_=n(5e3),S=n(36157),s=n(53251),e=n(12651),b=n(69808),r=n(19191),t=n(51062);function T(v,O){1&v&&(_._uU(0),_.ALo(1,"translate")),2&v&&_.hij(" ",_.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function E(v,O){if(1&v&&_._UZ(0,"app-one-entity-attribute-page",5),2&v){const h=_.oxw();_.Q6J("entityId",h.userId)("entity","user")}}function D(v,O){1&v&&(_._uU(0),_.ALo(1,"translate"),_.ALo(2,"translate")),2&v&&_.AsE(" ",_.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",_.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function P(v,O){if(1&v&&_._UZ(0,"app-two-entity-attribute-page",6),2&v){const h=_.oxw(2);_.Q6J("firstEntity","user")("firstEntityId",h.userId)("secondEntity","facility")}}function N(v,O){1&v&&(_.TgZ(0,"mat-tab"),_.YNc(1,D,3,6,"ng-template",2),_.YNc(2,P,1,3,"ng-template",3),_.qZA())}let Z=(()=>{class v{constructor(h,f,A){this.route=h,this.store=f,this.authResolver=A}ngOnInit(){this.route.parent.params.subscribe(h=>{this.userId=Number(h.userId),this.userId||(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}}return v.\u0275fac=function(h){return new(h||v)(_.Y36(S.gz),_.Y36(C.d6),_.Y36(C.x4))},v.\u0275cmp=_.Xpm({type:v,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(h,f){2&h&&_.ekj("router-component",f.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(h,f){1&h&&(_.TgZ(0,"h1",0),_._uU(1),_.ALo(2,"translate"),_.qZA(),_.TgZ(3,"mat-tab-group"),_.TgZ(4,"mat-tab",1),_.YNc(5,T,2,3,"ng-template",2),_.YNc(6,E,1,2,"ng-template",3),_.qZA(),_.YNc(7,N,3,0,"mat-tab",4),_.qZA()),2&h&&(_.xp6(1),_.Oqu(_.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),_.xp6(6),_.Q6J("ngIf",f.userFacilityAttAuth))},directives:[s.SP,s.uX,s.uD,s.Vc,e.t,b.O5,r.Y],pipes:[t.X$],styles:[""]}),v})()},85985:(B,M,n)=>{n.d(M,{u:()=>u});var C=n(32080),_=n(32105),S=n(10036),s=n(5e3),e=n(36157),b=n(69808),r=n(96214),t=n(7434),T=n(20773),E=n(24179),D=n(51062);function P(p,a){1&p&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&p&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function N(p,a){1&p&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&p&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function Z(p,a){1&p&&s._UZ(0,"mat-spinner",7)}const v=function(){return["id","vo","name","description"]};function O(p,a){if(1&p&&s._UZ(0,"perun-web-apps-groups-list",8),2&p){const l=s.oxw();s.Q6J("disableMembers",!1)("groups",l.membersGroups)("displayedColumns",s.DdM(5,v))("filter",l.memberFilterValue)("tableId",l.tableId)}}function h(p,a){1&p&&s._UZ(0,"mat-spinner",7)}function f(p,a){if(1&p&&s._UZ(0,"perun-web-apps-groups-list",8),2&p){const l=s.oxw(2);s.Q6J("disableMembers",!1)("groups",l.adminsGroups)("displayedColumns",s.DdM(5,v))("filter",l.adminFilterValue)("tableId",l.adminTableId)}}function A(p,a){if(1&p){const l=s.EpF();s.TgZ(0,"div",9),s.TgZ(1,"h1",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return s.CHM(l),s.oxw().refreshAdminTable()}),s.qZA(),s.TgZ(5,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(m){return s.CHM(l),s.oxw().adminFilter(m)}),s.qZA(),s.YNc(6,h,1,0,"mat-spinner",3),s.YNc(7,f,1,6,"perun-web-apps-groups-list",4),s.qZA()}if(2&p){const l=s.oxw();s.xp6(2),s.hij(" ",s.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",l.adminRefresh),s.xp6(1),s.Q6J("ngIf",!l.adminRefresh)}}let u=(()=>{class p{constructor(l,o,m,d,U){this.usersService=l,this.memberService=o,this.groupService=m,this.store=d,this.route=U,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=S.KE,this.adminTableId=S.Sb}ngOnInit(){(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(l=>this.userId=Number(l.userId)),this.refreshAdminTable(),this.refreshMemberTable()}memberFilter(l){this.memberFilterValue=l}adminFilter(l){this.adminFilterValue=l}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(l=>{this.adminsGroups=l,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(l=>{this.vos=l;for(const o of this.vos)this.memberService.getMemberByUser(o.id,this.userId).subscribe(m=>{this.groupService.getMemberGroups(m.id).subscribe(d=>{this.membersGroups=this.membersGroups.concat(d),this.vos.indexOf(o)===this.vos.length-1&&(this.memberRefresh=!1)})});0===l.length&&(this.memberRefresh=!1)})}}return p.\u0275fac=function(l){return new(l||p)(s.Y36(_.Fv),s.Y36(_.uq),s.Y36(_.ff),s.Y36(C.d6),s.Y36(e.gz))},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(l,o){2&l&&s.ekj("router-component",o.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"disableMembers","groups","displayedColumns","filter","tableId",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"disableMembers","groups","displayedColumns","filter","tableId"],[1,"mt-5"]],template:function(l,o){1&l&&(s.YNc(0,P,3,3,"h1",0),s.YNc(1,N,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return o.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(d){return o.memberFilter(d)}),s.qZA(),s.YNc(4,Z,1,0,"mat-spinner",3),s.YNc(5,O,1,6,"perun-web-apps-groups-list",4),s.YNc(6,A,8,6,"div",5)),2&l&&(s.Q6J("ngIf",o.showPrincipal),s.xp6(1),s.Q6J("ngIf",!o.showPrincipal),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",o.memberRefresh),s.xp6(1),s.Q6J("ngIf",!o.memberRefresh),s.xp6(1),s.Q6J("ngIf",!o.showPrincipal))},directives:[b.O5,r.t,t.L,T.Ou,E.W],pipes:[D.X$],styles:[""]}),p})()},74837:(B,M,n)=>{n.d(M,{j:()=>A});var C=n(32105),_=n(32080),S=n(10036),s=n(5e3),e=n(36157),b=n(69808),r=n(96214),t=n(7434),T=n(20773),E=n(87831),D=n(51062);function P(u,p){1&u&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&u&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function N(u,p){1&u&&(s.TgZ(0,"h1",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&u&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function Z(u,p){1&u&&s._UZ(0,"mat-spinner",7)}function v(u,p){if(1&u&&s._UZ(0,"perun-web-apps-vos-list",8),2&u){const a=s.oxw();s.Q6J("displayedColumns",a.displayedColumns)("tableId",a.memberTableId)("filterValue",a.memberFilterValue)("vos",a.vosWhereIsMember)}}function O(u,p){1&u&&s._UZ(0,"mat-spinner",7)}function h(u,p){if(1&u&&s._UZ(0,"perun-web-apps-vos-list",8),2&u){const a=s.oxw(2);s.Q6J("displayedColumns",a.displayedColumns)("tableId",a.adminTableId)("filterValue",a.adminFilterValue)("vos",a.vosWhereIsAdmin)}}function f(u,p){if(1&u){const a=s.EpF();s.TgZ(0,"div",9),s.TgZ(1,"h1",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return s.CHM(a),s.oxw().refreshAdminTable()}),s.qZA(),s.TgZ(5,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(o){return s.CHM(a),s.oxw().applyAdminFilter(o)}),s.qZA(),s.YNc(6,O,1,0,"mat-spinner",3),s.YNc(7,h,1,4,"perun-web-apps-vos-list",4),s.qZA()}if(2&u){const a=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",a.adminRefresh),s.xp6(1),s.Q6J("ngIf",!a.adminRefresh)}}let A=(()=>{class u{constructor(a,l,o,m){this.usersService=a,this.authResolver=l,this.store=o,this.route=m,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=S.YF,this.memberTableId=S.gc}ngOnInit(){(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(a=>this.userId=Number(a.userId)),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(a=>{this.vosWhereIsMember=a,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(a=>{this.vosWhereIsAdmin=a,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(a){this.memberFilterValue=a}applyAdminFilter(a){this.adminFilterValue=a}}return u.\u0275fac=function(a){return new(a||u)(s.Y36(C.Fv),s.Y36(_.x4),s.Y36(_.d6),s.Y36(e.gz))},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(a,l){2&a&&s.ekj("router-component",l.true)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","tableId","filterValue","vos",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(a,l){1&a&&(s.YNc(0,P,3,3,"h1",0),s.YNc(1,N,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return l.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-immediate-filter",2),s.NdJ("filter",function(m){return l.applyMemberFilter(m)}),s.qZA(),s.YNc(4,Z,1,0,"mat-spinner",3),s.YNc(5,v,1,4,"perun-web-apps-vos-list",4),s.YNc(6,f,8,6,"div",5)),2&a&&(s.Q6J("ngIf",l.isMyProfile),s.xp6(1),s.Q6J("ngIf",!l.isMyProfile),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(1),s.Q6J("ngIf",l.memberRefresh),s.xp6(1),s.Q6J("ngIf",!l.memberRefresh),s.xp6(1),s.Q6J("ngIf",!l.isMyProfile))},directives:[b.O5,r.t,t.L,T.Ou,E.Z],pipes:[D.X$],styles:[""]}),u})()},17755:(B,M,n)=>{n.d(M,{Z:()=>a});var C=n(32105),_=n(32075),S=n(32080),s=n(64080),e=n(9244),b=n(16074),r=n(5e3),t=n(36157),T=n(48966),E=n(69808),D=n(9224),P=n(47423),N=n(25245),Z=n(71135),v=n(51062);function O(l,o){1&l&&r._UZ(0,"th",12)}function h(l,o){if(1&l&&(r.TgZ(0,"td",13),r._uU(1),r.qZA()),2&l){const m=o.$implicit;r.xp6(1),r.hij(" ",m.displayName,": ")}}function f(l,o){1&l&&r._UZ(0,"th",12)}function A(l,o){if(1&l){const m=r.EpF();r.TgZ(0,"td",14),r._uU(1),r.TgZ(2,"button",15),r.NdJ("click",function(){return r.CHM(m),r.oxw(2).changeEmail()}),r.TgZ(3,"mat-icon"),r._uU(4,"edit"),r.qZA(),r.qZA(),r.qZA()}if(2&l){const m=o.$implicit;r.xp6(1),r.hij(" ",m.value," ")}}function u(l,o){1&l&&r._UZ(0,"tr",16)}function p(l,o){if(1&l&&(r.TgZ(0,"div",2),r.TgZ(1,"mat-card",3),r.TgZ(2,"mat-card-header"),r.TgZ(3,"mat-card-title"),r.TgZ(4,"h1",4),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"mat-card-content"),r.TgZ(8,"table",5),r.ynx(9,6),r.YNc(10,O,1,0,"th",7),r.YNc(11,h,2,1,"td",8),r.BQk(),r.ynx(12,9),r.YNc(13,f,1,0,"th",7),r.YNc(14,A,5,1,"td",10),r.BQk(),r.YNc(15,u,1,0,"tr",11),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&l){const m=r.oxw();r.xp6(5),r.Oqu(r.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),r.xp6(3),r.Q6J("dataSource",m.mailDataSource),r.xp6(7),r.Q6J("matRowDefColumns",m.displayedColumns)}}let a=(()=>{class l{constructor(m,d,U,L,x){this.userService=m,this.attributeService=d,this.storeService=U,this.route=L,this.dialog=x,this.navItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(m=>{m.userId?this.userService.getUserById(Number(m.userId)).subscribe(d=>{this.user=d,this.isServiceUser=d.serviceUser,this.initNavItems()}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(d=>{this.preferredMail=d,this.handleMailNotDefined(),this.mailDataSource=new _.by([this.preferredMail]),this.initNavItems()}))})}changeEmail(){const m=(0,e.kZ)();m.width="350px",m.data={userId:this.userID},this.dialog.open(b.gr,m).afterClosed().subscribe(U=>{U&&this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(L=>{this.preferredMail=L,this.handleMailNotDefined(),this.mailDataSource=new _.by([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,e.Cz)(s.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:new Object("-")})}initNavItems(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-user",url:"accounts",label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-identity",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-roles",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.navItems.push(this.isServiceUser?{cssIcon:"perun-manager",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}}return l.\u0275fac=function(m){return new(m||l)(r.Y36(C.Fv),r.Y36(C.H8),r.Y36(S.d6),r.Y36(t.gz),r.Y36(T.uw))},l.\u0275cmp=r.Xpm({type:l,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(m,d){2&m&&r.ekj("router-component",d.true)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(m,d){1&m&&(r.YNc(0,p,16,5,"div",0),r._UZ(1,"perun-web-apps-menu-buttons-field",1)),2&m&&(r.Q6J("ngIf",d.inMyProfile),r.xp6(1),r.Q6J("items",d.navItems)("size","small"))},directives:[E.O5,D.a8,D.dk,D.n5,D.dn,_.BZ,_.w1,_.fO,_.ge,_.Dz,_.ev,P.lW,N.Hw,_.nj,_.Gk,Z.L],pipes:[v.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),l})()},6097:(B,M,n)=>{n.d(M,{t:()=>b});var C=n(32105),_=n(32080),S=n(5e3),s=n(36157),e=n(34775);let b=(()=>{class r{constructor(T,E,D){this.authzResolverService=T,this.route=E,this.store=D,this.roles=new Map,this.roleNames=[],this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN","PERUNOBSERVER","MEMBERSHIP"]}ngOnInit(){this.outerLoading=!0,this.showDescription=!0,this.route.parent.params.subscribe(T=>{if(T.userId)this.userId=Number(T.userId),this.authzResolverService.getUserRoles(this.userId).subscribe(E=>{this.roleNames=Object.keys(E).map(D=>D.toUpperCase()),this.entityType="USER",this.prepareRoles(E)});else{const E=this.store.getPerunPrincipal();this.userId=E.userId,this.roleNames=Object.keys(E.roles),this.entityType="SELF",this.prepareRoles(E.roles)}})}prepareRoles(T){this.roleNames.forEach(E=>{const D=new Map;Object.keys(T[E]).forEach(N=>{D.set(N,T[E][N])}),this.roles.set(E,D)}),this.roleNames=this.roleNames.filter(E=>!this.roleFilter.includes(E)),this.outerLoading=!1}}return r.\u0275fac=function(T){return new(T||r)(S.Y36(C.Ct),S.Y36(s.gz),S.Y36(_.d6))},r.\u0275cmp=S.Xpm({type:r,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(T,E){2&T&&S.ekj("router-component",E.true)},decls:1,vars:6,consts:[[3,"outerLoading","roles","roleNames","entityId","showDescription","entityType"]],template:function(T,E){1&T&&S._UZ(0,"app-perun-web-apps-roles-page",0),2&T&&S.Q6J("outerLoading",E.outerLoading)("roles",E.roles)("roleNames",E.roleNames)("entityId",E.userId)("showDescription",E.showDescription)("entityType",E.entityType)},directives:[e._],styles:[""]}),r})()},46597:(B,M,n)=>{n.d(M,{d:()=>A});var C=n(10036),_=n(32105),S=n(20449),s=n(9244),e=n(54668),b=n(94814),r=n(32080),t=n(5e3),T=n(48966),E=n(36157),D=n(96214),P=n(47423),N=n(69808),Z=n(64877),v=n(20773),O=n(51062);function h(u,p){if(1&u&&(t._UZ(0,"app-users-list",6),t.ALo(1,"translate")),2&u){const a=t.oxw();t.Q6J("noUsersFoundLabel",t.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("disableRouting",a.disableRouting)("displayedColumns",a.displayedColumns)("selection",a.selection)("tableId",a.tableId)("users",a.associatedUsers)}}function f(u,p){1&u&&t._UZ(0,"mat-spinner",7)}let A=(()=>{class u{constructor(a,l,o,m,d){this.dialog=a,this.router=l,this.authResolver=o,this.userManager=m,this.entityStorageService=d,this.loading=!1,this.selection=new S.Ov(!1,[]),this.associatedUsers=[],this.tableId=C.It,this.displayedColumns=["select","id","user","name"]}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.userManager.getUsersBySpecificUser(this.user.id).subscribe(a=>{this.associatedUsers=a,this.setAuth(),this.loading=!1})}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).subscribe(a=>{this.associatedUsers=a,this.selection.clear(),this.loading=!1})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){const a=(0,s.kZ)();a.width="1250px",a.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(e.l,a).afterClosed().subscribe(o=>{o&&this.refreshTable()})}onRemove(){const a=(0,s.kZ)();a.width="650px",a.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(b.B,a).afterClosed().subscribe(o=>{o&&(this.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[this.user])?this.refreshTable():this.router.navigate(["/myProfile"]))})}}return u.\u0275fac=function(a){return new(a||u)(t.Y36(T.uw),t.Y36(E.F0),t.Y36(r.x4),t.Y36(_.Fv),t.Y36(r.fb))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-user-settings-associated-users"]],decls:13,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users"],[1,"mr-auto","ml-auto"]],template:function(a,l){1&a&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return l.refreshTable()}),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){return l.onAdd()}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"button",3),t.NdJ("click",function(){return l.onRemove()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,h,2,8,"app-users-list",4),t.qZA(),t.YNc(12,f,1,0,"mat-spinner",5)),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),t.xp6(4),t.hij(" ",t.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),t.xp6(2),t.Q6J("disabled",0===l.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",!l.loading),t.xp6(1),t.Q6J("ngIf",l.loading))},directives:[D.t,P.lW,N.O5,Z.C,v.Ou],pipes:[O.X$],styles:[""]}),u})()},97453:(B,M,n)=>{n.d(M,{R:()=>p});var C=n(20449),_=n(32105),S=n(10036),s=n(9244),e=n(54668),b=n(94814),r=n(32080),t=n(5e3),T=n(36157),E=n(48966),D=n(96214),P=n(69808),N=n(47423),Z=n(20773),v=n(64877),O=n(51062);function h(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(o),t.oxw().onAdd()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function f(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().onRemove()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const o=t.oxw();t.Q6J("disabled",0===o.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function A(a,l){1&a&&t._UZ(0,"mat-spinner",8)}function u(a,l){if(1&a&&(t._UZ(0,"app-users-list",9),t.ALo(1,"translate")),2&a){const o=t.oxw();t.Q6J("noUsersFoundLabel",t.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("displayedColumns",o.displayedColumns)("selection",o.selection)("tableId",o.tableId)("routeToAdmin",o.routeToAdminSection)("users",o.identities)}}let p=(()=>{class a{constructor(o,m,d,U,L,x){this.route=o,this.dialog=m,this.router=d,this.userManager=U,this.authResolver=L,this.store=x,this.loading=!1,this.selection=new C.Ov(!1,[]),this.identities=[],this.tableId=S.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(o=>{this.userId=Number(o.userId),this.userId||(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(o=>{this.identities=o,this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){const o=(0,s.kZ)();o.width="1250px",o.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(e.l,o).afterClosed().subscribe(d=>{d&&this.refreshTable()})}onRemove(){const o=(0,s.kZ)();o.width="650px",o.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(b.B,o).afterClosed().subscribe(d=>{d&&this.refreshTable()})}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(T.gz),t.Y36(E.uw),t.Y36(T.F0),t.Y36(_.Fv),t.Y36(r.x4),t.Y36(r.d6))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-user-settings-service-identities"]],decls:8,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","mr-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users"]],template:function(o,m){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return m.refreshTable()}),t.qZA(),t.YNc(4,h,3,3,"button",2),t.YNc(5,f,3,4,"button",3),t.YNc(6,A,1,0,"mat-spinner",4),t.YNc(7,u,2,8,"app-users-list",5)),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",m.addIdentity),t.xp6(1),t.Q6J("ngIf",m.removeIdentity),t.xp6(1),t.Q6J("ngIf",m.loading),t.xp6(1),t.Q6J("ngIf",!m.loading))},directives:[D.t,P.O5,N.lW,Z.Ou,v.C],pipes:[O.X$],styles:[""]}),a})()},46374:(B,M,n)=>{n.r(M),n.d(M,{UsersModule:()=>Qe});var C=n(69808),_=n(36157),S=n(74837),s=n(85985),e=n(5e3),b=n(61283);let r=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(i,g){2&i&&e.ekj("router-component",g.true)},decls:1,vars:0,template:function(i,g){1&i&&e._UZ(0,"app-animated-router-outlet")},directives:[b.A],styles:[""]}),c})();var t=n(32105),T=n(20773),E=n(71135);function D(c,I){1&c&&e._UZ(0,"mat-spinner",2)}function P(c,I){if(1&c&&(e.TgZ(0,"div"),e._UZ(1,"perun-web-apps-menu-buttons-field",3),e.qZA()),2&c){const i=e.oxw();e.xp6(1),e.Q6J("items",i.navItems)("size","small")}}let N=(()=>{class c{constructor(i,g){this.route=i,this.userManager=g,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(i=>{const g=Number(i.userId);this.userManager.getUserById(g).subscribe(R=>{this.isServiceUser=R.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings1",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(_.gz),e.Y36(t.Fv))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(i,g){2&i&&e.ekj("router-component",g.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(i,g){1&i&&(e.YNc(0,D,1,0,"mat-spinner",0),e.YNc(1,P,2,2,"div",1)),2&i&&(e.Q6J("ngIf",g.loading),e.xp6(1),e.Q6J("ngIf",!g.loading))},directives:[C.O5,T.Ou,E.L],styles:[""]}),c})();var Z=n(98973),v=n(33604),O=n(9244),h=n(6335),f=n(67322),A=n(74107),u=n(90508),p=n(51062);function a(c,I){if(1&c&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&c){const i=I.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}let l=(()=>{class c{constructor(i){this.guiConfigService=i,this.tablePageSizeOptions=O.f7}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(h.Rc)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(h.Rc,this.preferredTablePageSize)}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(h.Ng))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,g){1&i&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-select",3),e.NdJ("valueChange",function(){return g.updatePreferredTablePageSize()})("valueChange",function(y){return g.preferredTablePageSize=y}),e.YNc(9,a,2,2,"mat-option",4),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),e.xp6(5),e.Oqu(e.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),e.xp6(2),e.Q6J("value",g.preferredTablePageSize),e.xp6(1),e.Q6J("ngForOf",g.tablePageSizeOptions))},directives:[f.KE,f.hX,A.gD,C.sg,u.ey],pipes:[p.X$],styles:[""]}),c})();var o=n(17755),m=n(32080),d=n(77968),U=n(4235),L=n(25245),x=n(29772),F=n(31359);const Q=function(){return{color:"black"}},H=function(){return["/myProfile"]};function V(c,I){if(1&c&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.TgZ(2,"div",2),e._UZ(3,"mat-icon",3),e.ALo(4,"translate"),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"a",6),e._uU(8),e.ALo(9,"userFullName"),e.qZA(),e.TgZ(10,"span",7),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"span",8),e._uU(13),e.ALo(14,"translate"),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"app-animated-router-outlet"),e.qZA()),2&c){const i=e.oxw();e.xp6(3),e.s9C("matTooltip",e.lcZ(4,8,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(16,Q)),e.xp6(4),e.Q6J("routerLink",e.DdM(17,H)),e.xp6(1),e.hij(" ",e.lcZ(9,10,i.user)," "),e.xp6(3),e.hij(" \xa0#",i.user.id," "),e.xp6(2),e.lnq(" ",e.lcZ(14,12,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",i.getUserType()," ")}}let j=(()=>{class c{constructor(i,g,R){this.sideMenuService=i,this.store=g,this.router=R}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(()=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(d.D),e.Y36(m.d6),e.Y36(_.F0))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(i,g){1&i&&e.YNc(0,V,17,18,"div",0),2&i&&e.Q6J("ngIf",void 0!==g.user)},directives:[C.O5,U.W,L.Hw,x.gM,C.PC,_.yS,b.A],pipes:[p.X$,F.d],styles:[""]}),c})();var X=n(6097),$=n(97453),q=n(69024),k=n(29862),G=n(48966),K=n(47423);function ee(c,I){1&c&&e._UZ(0,"mat-spinner",11)}function te(c,I){if(1&c){const i=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).editUser()}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e.qZA()}}const se=function(){return{color:"black"}},ne=function(c){return["/myProfile/service-identities",c]};function ie(c,I){if(1&c&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.YNc(2,ee,1,0,"mat-spinner",2),e.TgZ(3,"div",3),e._UZ(4,"mat-icon",4),e.ALo(5,"translate"),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"a",7),e._uU(9),e.ALo(10,"userFullName"),e.qZA(),e.TgZ(11,"span",8),e._uU(12),e.qZA(),e.YNc(13,te,3,0,"button",9),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span",10),e._uU(18),e.ALo(19,"translate"),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e._UZ(21,"app-animated-router-outlet"),e.qZA()),2&c){const i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.loading),e.xp6(2),e.s9C("matTooltip",e.lcZ(5,12,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(22,se)),e.xp6(4),e.Q6J("routerLink",e.VKq(23,ne,i.user.id)),e.xp6(1),e.hij(" ",e.lcZ(10,14,i.user)," "),e.xp6(3),e.hij(" \xa0#",i.user.id," "),e.xp6(1),e.Q6J("ngIf",i.authResolver.isPerunAdmin()),e.xp6(2),e.AsE("",e.lcZ(16,16,"ADMIN_USER.UUID"),": ",i.user.uuid,""),e.xp6(3),e.lnq(" ",e.lcZ(19,18,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(20,20,"MENU_ITEMS.USER.USER_TYPE"),": ",i.getUserType()," ")}}let re=(()=>{class c{constructor(i,g,R,y,W,w,J){this.sideMenuService=i,this.usersService=g,this.sideMenuItemService=R,this.route=y,this.dialog=W,this.authResolver=w,this.entityStorageService=J,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(i=>{const g=Number(i.userId);this.entityStorageService.setEntity({id:g,beanName:"User"}),this.usersService.getUserById(g).subscribe(R=>{this.user=R;const y=this.sideMenuItemService.parseServiceIdentity(R);this.sideMenuService.setUserItems([y]),this.loading=!1},()=>this.loading=!1)})}getUserType(){return this.user.serviceUser?"Service":"Person"}editUser(){const i=(0,O.kZ)();i.width="450px",i.data={theme:"admin-theme",user:this.user},this.dialog.open(k.x,i).afterClosed().subscribe(R=>{R&&this.usersService.getUserById(this.user.id).subscribe(y=>{this.user=y})})}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(d.D),e.Y36(t.Fv),e.Y36(q.V),e.Y36(_.gz),e.Y36(G.uw),e.Y36(m.x4),e.Y36(m.fb))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"mr-auto","ml-auto"],["mat-icon-button","",3,"click"]],template:function(i,g){1&i&&e.YNc(0,ie,22,25,"div",0),2&i&&e.Q6J("ngIf",void 0!==g.user)},directives:[C.O5,U.W,T.Ou,L.Hw,x.gM,C.PC,_.yS,K.lW,b.A],pipes:[p.X$,F.d],styles:[""]}),c})(),ae=(()=>{class c{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-manager",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"},{cssIcon:"perun-authentication",url:"authentication",label:"MENU_ITEMS.USER.AUTHENTICATION",style:"user-btn"}]}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-service-identity-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(i,g){1&i&&e._UZ(0,"perun-web-apps-menu-buttons-field",0),2&i&&e.Q6J("items",g.navItems)("size","small")},directives:[E.L],styles:[""]}),c})();var oe=n(46597),Y=n(93075),le=n(28499),_e=n(95406);function ue(c,I){if(1&c&&(e.TgZ(0,"div",7),e._UZ(1,"app-login-password-form-with-generate-option",8),e.qZA()),2&c){const i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.formGroup)("filteredNamespace",i.data.filteredNamespaces)}}function ce(c,I){1&c&&e._UZ(0,"mat-spinner",9)}let pe=(()=>{class c{constructor(i,g,R,y,W,w,J,ze,He,Ve){this.dialogRef=i,this.data=g,this.formBuilder=R,this.usersManagerService=y,this.membersManagerService=W,this.attributesManagerService=w,this.apiRequestConfiguration=J,this.notificator=ze,this.translate=He,this.cd=Ve,this.processing=!1}ngOnInit(){this.userId=this.data.userId,this.formGroup=this.formBuilder.group({namespaceCtrl:["Not selected"],loginCtrl:["",[Y.kI.pattern("^[a-z][a-z0-9_-]+$"),Y.kI.maxLength(15),Y.kI.minLength(2)]],passwordCtrl:["",Y.kI.required,[(0,le.yT)(null,this.usersManagerService,this.apiRequestConfiguration)]],passwordAgainCtrl:[""],generatePasswordCtrl:[!0]},{validators:O.dN.passwordMatchValidator})}ngAfterViewInit(){this.cd.detectChanges()}onSetLogin(){this.processing=!0;const i=this.formGroup.get("namespaceCtrl").value.toLowerCase(),g=this.formGroup.get("loginCtrl").value;if(g)this.setLogin(i,g);else{const R=`urn:perun:user:attribute-def:def:login-namespace:${i}`;this.attributesManagerService.getUserAttributeByName(this.userId,"urn:perun:user:attribute-def:core:lastName").subscribe(y=>{this.usersManagerService.generateAccountForName(i,y.value).subscribe(w=>{this.setLogin(i,w[R])},()=>this.processing=!1)})}}setLogin(i,g){this.usersManagerService.setLogin(this.userId,g,i).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_LOGIN")),this.setPassword()},()=>{this.processing=!1})}setPassword(){const i=this.formGroup.get("namespaceCtrl").value.toLowerCase(),g=this.formGroup.get("passwordCtrl").value;if(this.formGroup.get("generatePasswordCtrl").value){if(!this.formGroup.get("loginCtrl").value)return;this.usersManagerService.reserveRandomPassword(this.userId,i).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,i).subscribe(()=>{this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}else this.usersManagerService.reservePasswordForUser({user:this.userId,namespace:i,password:g}).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,i).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_PASSWORD")),this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}onCancel(){this.dialogRef.close(!1)}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(G.so),e.Y36(G.WI),e.Y36(Y.qu),e.Y36(t.Fv),e.Y36(t.uq),e.Y36(t.H8),e.Y36(m.F5),e.Y36(m.V6),e.Y36(p.sK),e.Y36(e.sBO))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-perun-web-apps-set-login-dialog"]],decls:13,vars:12,consts:[[1,"vo-theme"],[1,"mat-dialog-title"],["class","dialog-container","mat-dialog-content","",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],["mat-dialog-content","",1,"dialog-container"],[3,"formGroup","filteredNamespace"],[1,"ml-auto","mr-auto"]],template:function(i,g){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,ue,2,2,"div",2),e.YNc(5,ce,1,0,"mat-spinner",3),e.TgZ(6,"div",4),e.TgZ(7,"button",5),e.NdJ("click",function(){return g.onCancel()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return g.onSetLogin()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"DIALOGS.SET_LOGIN.TITLE")),e.xp6(2),e.Q6J("ngIf",!g.processing),e.xp6(1),e.Q6J("ngIf",g.processing),e.xp6(3),e.hij(" ",e.lcZ(9,8,"DIALOGS.SET_LOGIN.CANCEL")," "),e.xp6(2),e.Q6J("disabled","Not selected"===g.formGroup.get("namespaceCtrl").value||g.formGroup.invalid||g.formGroup.pending||g.processing),e.xp6(1),e.hij(" ",e.lcZ(12,10,"DIALOGS.SET_LOGIN.SET_LOGIN")," "))},directives:[C.O5,G.xY,_e.r,Y.JL,Y.sg,T.Ou,G.H8,K.lW],pipes:[p.X$],styles:[""]}),c})();var me=n(96214),de=n(53599);const ge=["logins"],fe=[{path:"",component:j,children:[{path:"",component:o.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:Z.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:S.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:s.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:X.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:$.R,data:{animation:"UserServiceIdentities"}},{path:"settings",component:r,children:[{path:"",component:N,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:v.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:l,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:re,children:[{path:"",component:ae},{path:"associated-users",component:oe.d},{path:"authentication",component:(()=>{class c{constructor(i,g){this.dialog=i,this.entityStorageService=g,this.filteredNamespaces=[]}ngOnInit(){this.userId=this.entityStorageService.getEntity().id}onAdd(){const i=(0,O.kZ)();i.width="500px",i.data={userId:this.userId,filteredNamespaces:this.filteredNamespaces},this.dialog.open(pe,i).afterClosed().subscribe(R=>{R&&this.logins.refreshTable()})}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(G.uw),e.Y36(m.fb))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-perun-web-apps-user-setting-authentication"]],viewQuery:function(i,g){if(1&i&&e.Gf(ge,5),2&i){let R;e.iGM(R=e.CRH())&&(g.logins=R.first)}},decls:9,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],[3,"authenticationPage","filteredNamespaces"],["logins",""]],template:function(i,g){if(1&i){const R=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perun-web-apps-refresh-button",1),e.NdJ("refresh",function(){return e.CHM(R),e.MAs(8).refreshTable()}),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return g.onAdd()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"perun-web-apps-password-reset",3,4),e.NdJ("filteredNamespaces",function(W){return g.filteredNamespaces=W}),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"USER_DETAIL.SETTINGS.AUTHENTICATION.TITLE")),e.xp6(4),e.hij(" ",e.lcZ(6,5,"USER_DETAIL.SETTINGS.AUTHENTICATION.ADD"),"\n"),e.xp6(2),e.Q6J("authenticationPage",!0))},directives:[me.t,K.lW,de.N],pipes:[p.X$],styles:[""]}),c})()}]}];let Ee=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[_.Bz.forChild(fe)],_.Bz]}),c})();var Ie=n(91079),Te=n(98833),ve=n(2638),Ue=n(81125),Ae=n(84847),Ce=n(32075),Se=n(53251),De=n(90149),Oe=n(77446),Re=n(57261),be=n(85899),Me=n(32368),Ne=n(86856),Pe=n(79814),Ze=n(4834),Le=n(86087),z=n(9224),ye=n(92081),xe=n(44409),Be=n(26688),Ye=n(92181),We=n(29071),Ge=n(63189),Ke=n(27544),we=n(11243),Je=n(19516),Fe=n(14264);let Qe=(()=>{class c{constructor(i){this.translate=i,i.addLangs(["en","cs"])}}return c.\u0275fac=function(i){return new(i||c)(e.LFG(p.sK))},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[C.ez,Ee,Ie.Bb,Te.c,f.lN,Y.UX,Y.u5,L.Ps,ve.SJ,Ue.To,p.aw.forChild({}),K.ot,Ae.JX,Ce.p0,Se.Nh,De.dp,K.ot,Oe.p9,G.Is,A.LD,Re.ZX,T.Cq,be.Cv,x.AV,Me.rP,Ne.FA,u.XK,Pe.Fk,Ze.t,u.si,Le.TU,z.QW,ye.T5,xe._t,z.QW,Be.Hi,Ye.Tx,We.Cl,Ge.r,Ke.g,v.ez,we.r,Je.d4,Fe.m]]}),c})()}}]);