function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"pjY/":function(t,e,i){"use strict";i.r(e);var a=i("2kYt"),s=i("sEIs"),c=i("4sdY"),n=i("X2Q7"),r=i("8clQ"),o=i("EM62"),l=i("Z21x"),u=i("NNFy"),b=i("L7PR"),f=i("csyo"),d=i("iAde"),p=i("cePI"),h=i("FlRo"),m=i("+j+g"),I=i("mWkV"),g=i("bFHC"),C=i("Y2X+"),y=i("FcRk"),v=i("s2Ay"),T=i("pTCp");function E(t,e){1&t&&(o.Wb(0,"th",19),o.Lc(1),o.jc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Mc(o.kc(2,1,"FACILITY_MANAGEMENT.TABLE.ID")))}function S(t,e){if(1&t&&(o.Wb(0,"td",20),o.Lc(1),o.Vb()),2&t){var i=e.$implicit;o.Cb(1),o.Mc(i.id)}}function R(t,e){1&t&&o.Rb(0,"th",21)}function A(t,e){1&t&&(o.Wb(0,"mat-icon",24),o.jc(1,"translate"),o.Lc(2," visibility "),o.Vb()),2&t&&o.pc("matTooltip",o.kc(1,1,"VO_MANAGEMENT.TABLE.RECENT"))}function k(t,e){if(1&t&&(o.Wb(0,"td",22),o.Jc(1,A,3,3,"mat-icon",23),o.Vb()),2&t){var i=e.$implicit,a=o.ic();o.Cb(1),o.oc("ngIf",a.recentIds.indexOf(i.id)>-1)}}function L(t,e){1&t&&(o.Wb(0,"th",19),o.Lc(1),o.jc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Mc(o.kc(2,1,"FACILITY_MANAGEMENT.TABLE.NAME")))}function M(t,e){if(1&t&&(o.Wb(0,"td",22),o.Lc(1),o.Vb()),2&t){var i=e.$implicit;o.Cb(1),o.Mc(i.name)}}function V(t,e){1&t&&(o.Wb(0,"th",21),o.Lc(1),o.jc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Mc(o.kc(2,1,"FACILITY_MANAGEMENT.TABLE.DESCRIPTION")))}function _(t,e){if(1&t&&(o.Wb(0,"td",22),o.Lc(1),o.Vb()),2&t){var i=e.$implicit;o.Cb(1),o.Mc(i.description)}}function w(t,e){1&t&&(o.Wb(0,"th",21),o.Lc(1),o.jc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Mc(o.kc(2,1,"FACILITY_MANAGEMENT.TABLE.TECHNICAL_OWNERS")))}function O(t,e){if(1&t&&(o.Wb(0,"td",22),o.Lc(1),o.jc(2,"technicalOwners"),o.Vb()),2&t){var i=e.$implicit;o.Cb(1),o.Mc(o.kc(2,1,i.facilityOwners))}}function N(t,e){1&t&&o.Rb(0,"tr",25)}var G=function(t){return["/facilities",t]};function D(t,e){1&t&&o.Rb(0,"tr",26),2&t&&o.oc("routerLink",o.tc(1,G,e.$implicit.id))}function U(t,e){1&t&&o.Rb(0,"mat-spinner",27)}function W(t,e){1&t&&(o.Wb(0,"app-alert",28),o.Lc(1),o.jc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Nc(" ",o.kc(2,1,"SHARED.COMPONENTS.NO_FILTER_RESULTS_ALERT"),"\n"))}var F,B=function(){return[5,10,25]},Q=((F=function(){function t(){_classCallCheck(this,t),this.exporting=!1,this.displayedColumns=["id","recent","name","description","technicalOwners"]}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.dataSource=new h.o(this.facilities),this.setDataSource(),this.dataSource.filter=this.filterValue}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator}},{key:"setDataSource",value:function(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSource.filterPredicate=function(t,e){var i=e.trim().toLowerCase();return-1!==t.name.trim().toLowerCase().indexOf(i)||null!==t.description&&-1!==t.description.trim().toLowerCase().indexOf(i)||!!t.id.toString(10).startsWith(e)||-1!==Object(r.p)(t.facilityOwners).toLowerCase().indexOf(i)})}},{key:"matSort",set:function(t){this.sort=t,this.setDataSource()}}]),t}()).\u0275fac=function(t){return new(t||F)},F.\u0275cmp=o.Kb({type:F,selectors:[["app-facility-select-table"]],viewQuery:function(t,e){var i;1&t&&(o.Hc(p.a,!0),o.Sc(d.a,!0)),2&t&&(o.wc(i=o.fc())&&(e.matSort=i.first),o.wc(i=o.fc())&&(e.paginator=i.first))},inputs:{facilities:"facilities",recentIds:"recentIds",filterValue:"filterValue"},features:[o.Ab()],decls:25,vars:13,consts:[[1,"card","mt-3",3,"hidden"],[1,"card-body"],[3,"exporter","start","end"],["mat-table","","matTableExporter","","matSort","","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["exporter","matTableExporter"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","recent"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","technicalOwners"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","dark-hover-list-item",3,"routerLink",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["class","ml-auto mr-auto",4,"ngIf"],["color","warn",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["mat-cell",""],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"routerLink"],[1,"ml-auto","mr-auto"],["color","warn"]],template:function(t,e){if(1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"app-table-options",2),o.ec("start",(function(t){return e.exporting=!0}))("end",(function(t){return e.exporting=!1})),o.Vb(),o.Wb(3,"table",3,4),o.Ub(5,5),o.Jc(6,E,3,3,"th",6),o.Jc(7,S,2,1,"td",7),o.Tb(),o.Ub(8,8),o.Jc(9,R,1,0,"th",9),o.Jc(10,k,2,1,"td",10),o.Tb(),o.Ub(11,11),o.Jc(12,L,3,3,"th",6),o.Jc(13,M,2,1,"td",10),o.Tb(),o.Ub(14,12),o.Jc(15,V,3,3,"th",9),o.Jc(16,_,2,1,"td",10),o.Tb(),o.Ub(17,13),o.Jc(18,w,3,3,"th",9),o.Jc(19,O,3,3,"td",10),o.Tb(),o.Jc(20,N,1,0,"tr",14),o.Jc(21,D,1,3,"tr",15),o.Vb(),o.Rb(22,"mat-paginator",16),o.Vb(),o.Vb(),o.Jc(23,U,1,0,"mat-spinner",17),o.Jc(24,W,3,3,"app-alert",18)),2&t){var i=o.xc(4);o.Gb("hide-table",e.exporting),o.oc("hidden",0===e.dataSource.filteredData.length),o.Cb(2),o.oc("exporter",i),o.Cb(1),o.oc("dataSource",e.dataSource),o.Cb(17),o.oc("matHeaderRowDef",e.displayedColumns),o.Cb(1),o.oc("matRowDefColumns",e.displayedColumns),o.Cb(1),o.oc("length",e.facilities.length)("pageSize",10)("pageSizeOptions",o.sc(12,B)),o.Cb(1),o.oc("ngIf",e.exporting),o.Cb(1),o.oc("ngIf",0===e.dataSource.filteredData.length)}},directives:[m.a,h.n,I.a,p.a,h.c,h.i,h.b,h.k,h.m,d.a,a.t,h.h,p.b,h.a,g.a,C.a,h.j,h.l,s.g,f.c,y.a],pipes:[v.d,T.a],styles:[""]}),F);function j(t,e){if(1&t){var i=o.Xb();o.Wb(0,"app-refresh-button",6),o.ec("refresh",(function(t){return o.Bc(i),o.ic().refreshTable()})),o.Vb()}}function x(t,e){if(1&t){var i=o.Xb();o.Wb(0,"app-immediate-filter",7),o.ec("filter",(function(t){return o.Bc(i),o.ic().applyFilter(t)})),o.Vb()}2&t&&o.oc("placeholder","FACILITY_MANAGEMENT.FILTER_PLACEHOLDER")}function P(t,e){1&t&&o.Rb(0,"mat-spinner",8)}function J(t,e){if(1&t&&o.Rb(0,"app-facility-select-table",9),2&t){var i=o.ic();o.oc("filterValue",i.filterValue)("facilities",i.facilities)("recentIds",i.recentIds)}}var Y,z=((Y=function(){function t(e,i){_classCallCheck(this,t),this.facilityManager=e,this.sideMenuService=i,this.facilities=[],this.recentIds=[],this.filterValue=""}return _createClass(t,[{key:"ngOnInit",value:function(){this.sideMenuService.setFacilityMenuItems([]),this.refreshTable()}},{key:"refreshTable",value:function(){var t=this;this.loading=!0,this.facilityManager.getRichFacilities().subscribe((function(e){t.facilities=Object(r.h)("facilities",e),t.recentIds=Object(r.i)("facilities"),t.loading=!1}))}},{key:"applyFilter",value:function(t){this.filterValue=t}}]),t}()).\u0275fac=function(t){return new(t||Y)(o.Qb(n.f),o.Qb(c.a))},Y.\u0275cmp=o.Kb({type:Y,selectors:[["app-facility-select-page"]],decls:9,vars:7,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","facility-theme"],[1,"page-title"],[3,"refresh",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"filterValue","facilities","recentIds",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"filterValue","facilities","recentIds"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rb(1,"app-back-button"),o.Wb(2,"h1",1),o.Lc(3),o.jc(4,"translate"),o.Vb(),o.Jc(5,j,1,0,"app-refresh-button",2),o.Jc(6,x,1,1,"app-immediate-filter",3),o.Jc(7,P,1,0,"mat-spinner",4),o.Jc(8,J,1,3,"app-facility-select-table",5),o.Vb()),2&t&&(o.Cb(3),o.Mc(o.kc(4,5,"FACILITY_MANAGEMENT.TITLE")),o.Cb(2),o.oc("ngIf",!e.loading),o.Cb(1),o.oc("ngIf",!e.loading),o.Cb(1),o.oc("ngIf",e.loading),o.Cb(1),o.oc("ngIf",!e.loading))},directives:[l.a,a.t,u.a,b.a,f.c,Q],pipes:[v.d],styles:[""]}),Y),H=i("rI+q"),K=i("EkAj"),$=i("ma6z"),X=function(t){return["/facilities",t]};function q(t,e){if(1&t&&(o.Wb(0,"div",1),o.Rb(1,"app-back-button"),o.Wb(2,"h1",2),o.Lc(3),o.jc(4,"translate"),o.Wb(5,"a",3),o.Lc(6),o.Vb(),o.Wb(7,"span",4),o.Lc(8),o.Vb(),o.Vb(),o.Rb(9,"app-animated-router-outlet"),o.Vb()),2&t){var i=o.ic();o.Cb(3),o.Nc(" ",o.kc(4,4,"FACILITY_DETAIL.TITLE")," "),o.Cb(2),o.oc("routerLink",o.tc(6,X,i.facility.id)),o.Cb(1),o.Nc(" ",i.facility.name," "),o.Cb(2),o.Nc(" \xa0#",i.facility.id," ")}}var Z,tt,et=((Z=function(){function t(e,i,a,s){_classCallCheck(this,t),this.facilityManager=e,this.route=i,this.sideMenuService=a,this.sideMenuItemService=s}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){t.facilityManager.getFacilityById(e.facilityId).subscribe((function(e){t.facility=e;var i=t.sideMenuItemService.parseFacility(e);t.sideMenuService.setFacilityMenuItems([i]),Object(r.a)("facilities",t.facility)}))}))}}]),t}()).\u0275fac=function(t){return new(t||Z)(o.Qb(n.f),o.Qb(s.a),o.Qb(c.a),o.Qb(K.a))},Z.\u0275cmp=o.Kb({type:Z,selectors:[["app-facility-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 facility-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","facility-theme"],[1,"page-title"],[1,"facility-link",3,"routerLink"],[1,"text-muted"]],template:function(t,e){1&t&&o.Jc(0,q,10,8,"div",0),2&t&&o.oc("ngIf",void 0!==e.facility)},directives:[a.t,l.a,s.i,$.a],pipes:[v.d],styles:[""],data:{animation:[H.a]}}),Z),it=i("iaQy"),at=((tt=function(){function t(e,i){_classCallCheck(this,t),this.facilityManager=e,this.route=i,this.navItems=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){t.facilityManager.getFacilityById(e.facilityId).subscribe((function(e){t.facility=e,t.initItems()}))}))}},{key:"initItems",value:function(){this.navItems=[{cssIcon:"perun-manage-facility",url:"/facilities/".concat(this.facility.id,"/resources"),label:"MENU_ITEMS.FACILITY.RESOURCES",style:"facility-btn"},{cssIcon:"perun-group",url:"/facilities/".concat(this.facility.id,"/allowed-groups"),label:"MENU_ITEMS.FACILITY.ALLOWED_GROUPS",style:"facility-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.facility.id,"/settings"),label:"MENU_ITEMS.FACILITY.SETTINGS",style:"facility-btn"}]}}]),t}()).\u0275fac=function(t){return new(t||tt)(o.Qb(n.f),o.Qb(s.a))},tt.\u0275cmp=o.Kb({type:tt,selectors:[["app-facility-overview"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Rb(1,"app-menu-buttons-field",0),o.Vb()),2&t&&(o.Cb(1),o.oc("items",e.navItems)("size","small"))},directives:[it.a],styles:[""]}),tt),st=i("s8L6"),ct=i("Wq+4"),nt=function(t,e){return["/facilities",t,"resources",e]};function rt(t,e){if(1&t&&(o.Wb(0,"div",1),o.Rb(1,"app-back-button"),o.Wb(2,"h1",2),o.Lc(3),o.jc(4,"translate"),o.Wb(5,"a",3),o.Lc(6),o.Vb(),o.Wb(7,"span",4),o.Lc(8),o.Vb(),o.Vb(),o.Rb(9,"app-animated-router-outlet"),o.Vb()),2&t){var i=o.ic();o.Cb(3),o.Nc(" ",o.kc(4,4,"RESOURCE_DETAIL.TITLE")," "),o.Cb(2),o.oc("routerLink",o.uc(6,nt,i.resource.facilityId,i.resource.id)),o.Cb(1),o.Nc(" ",i.resource.name," "),o.Cb(2),o.Nc(" \xa0#",i.resource.id," ")}}var ot,lt,ut,bt,ft=((bt=function(){function t(e,i,a,s,c){_classCallCheck(this,t),this.route=e,this.facilityManager=i,this.resourcesManager=a,this.sideMenuService=s,this.sideMenuItemService=c}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){t.resourcesManager.getResourceById(e.resourceId).subscribe((function(e){t.resource=e,t.facilityManager.getFacilityById(e.facilityId).subscribe((function(i){var a=t.sideMenuItemService.parseFacility(i),s=t.sideMenuItemService.parseResource(e);t.sideMenuService.setFacilityMenuItems([a,s])}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||bt)(o.Qb(s.a),o.Qb(n.f),o.Qb(n.i),o.Qb(c.a),o.Qb(K.a))},bt.\u0275cmp=o.Kb({type:bt,selectors:[["app-resource-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 resource-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],[1,"page-title"],[1,"resource-link",3,"routerLink"],[1,"text-muted"]],template:function(t,e){1&t&&o.Jc(0,rt,10,9,"div",0),2&t&&o.oc("ngIf",void 0!==e.resource)},directives:[a.t,l.a,s.i,$.a],pipes:[v.d],styles:[""],data:{animation:[H.a]}}),bt),dt=((ut=function(){function t(e,i){_classCallCheck(this,t),this.resourcesManager=e,this.route=i,this.navItems=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){t.resourcesManager.getResourceById(e.resourceId).subscribe((function(e){t.resource=e,t.initItems()}))}))}},{key:"initItems",value:function(){this.navItems=[{cssIcon:"perun-group",url:"/facilities/".concat(this.resource.facilityId,"/resources/").concat(this.resource.id,"/groups"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings"),label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"}]}}]),t}()).\u0275fac=function(t){return new(t||ut)(o.Qb(n.i),o.Qb(s.a))},ut.\u0275cmp=o.Kb({type:ut,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Rb(1,"app-menu-buttons-field",0),o.Vb()),2&t&&(o.Cb(1),o.oc("items",e.navItems)("size","small"))},directives:[it.a],styles:[""]}),ut),pt=((lt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||lt)},lt.\u0275cmp=o.Kb({type:lt,selectors:[["app-facility-settings"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:1,vars:0,template:function(t,e){1&t&&o.Rb(0,"app-animated-router-outlet")},directives:[$.a],styles:[""],data:{animation:[H.a]}}),lt),ht=((ot=function(){function t(e,i){_classCallCheck(this,t),this.route=e,this.facilityManager=i,this.items=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.parent.parent.params.subscribe((function(e){t.facilityManager.getFacilityById(e.facilityId).subscribe((function(e){t.facility=e,t.initItems()}))}))}},{key:"initItems",value:function(){this.items=[{cssIcon:"perun-attributes",url:"/facilities/".concat(this.facility.id,"/settings/attributes"),label:"MENU_ITEMS.FACILITY.ATTRIBUTES",style:"facility-btn"}]}}]),t}()).\u0275fac=function(t){return new(t||ot)(o.Qb(s.a),o.Qb(n.f))},ot.\u0275cmp=o.Kb({type:ot,selectors:[["app-facility-settings-overview"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Rb(1,"app-menu-buttons-field",0),o.Vb()),2&t&&(o.Cb(1),o.oc("items",e.items)("size","small"))},directives:[it.a],styles:[""]}),ot),mt=i("U7JG"),It=i("EsOi"),gt=i("cqs0"),Ct=i("mEf3"),yt=i("IDQ9"),vt=i("OZ4H"),Tt=i("PBFl"),Et=["list"];function St(t,e){1&t&&o.Rb(0,"mat-spinner",8)}function Rt(t,e){if(1&t&&o.Rb(0,"app-attributes-list",9,10),2&t){var i=o.ic();o.oc("filterValue",i.filterValue)("attributes",i.attributes)("selection",i.selection)}}var At,kt,Lt,Mt=((Lt=function(){function t(e,i,a,s,c){var n=this;_classCallCheck(this,t),this.attributesManager=e,this.route=i,this.dialog=a,this.notificator=s,this.translate=c,this.attributes=[],this.selection=new gt.c(!0,[]),this.filterValue="",this.translate.get("FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(t){return n.saveSuccessMessage=t})),this.translate.get("FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(t){return n.deleteSuccessMessage=t}))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.parent.parent.params.subscribe((function(e){t.facilityId=e.facilityId,t.refreshTable()}))}},{key:"onDelete",value:function(){var t=this;this.dialog.open(Ct.a,{width:"450px",data:{entityId:this.facilityId,entity:"facility",attributes:this.selection.selected}}).afterClosed().subscribe((function(e){e&&t.refreshTable()}))}},{key:"onSave",value:function(){var t=this;this.list.updateMapAttributes(),this.attributesManager.setFacilityAttributes({facility:this.facilityId,attributes:this.selection.selected}).subscribe((function(){t.attributesManager.getFacilityAttributes(t.facilityId).subscribe((function(e){t.attributes=Object(r.d)(e),t.notificator.showSuccess(t.saveSuccessMessage),t.selection.clear()}))}))}},{key:"onCreate",value:function(){var t=this;this.dialog.open(yt.a,{width:"1050px",data:{entityId:this.facilityId,entity:"facility",notEmptyAttributes:this.attributes,style:"facility-theme"}}).afterClosed().subscribe((function(e){"saved"===e&&t.refreshTable()}))}},{key:"refreshTable",value:function(){var t=this;this.loading=!0,this.attributesManager.getFacilityAttributes(this.facilityId).subscribe((function(e){t.attributes=Object(r.d)(e),t.selection.clear(),t.loading=!1}))}},{key:"applyFilter",value:function(t){this.filterValue=t}}]),t}()).\u0275fac=function(t){return new(t||Lt)(o.Qb(n.c),o.Qb(s.a),o.Qb(vt.b),o.Qb(mt.a),o.Qb(v.e))},Lt.\u0275cmp=o.Kb({type:Lt,selectors:[["app-facility-settings-attributes"]],viewQuery:function(t,e){var i;1&t&&o.Sc(Et,!0),2&t&&o.wc(i=o.fc())&&(e.list=i.first)},hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:17,vars:17,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"filterValue","attributes","selection",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"filterValue","attributes","selection"],["list",""]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Wb(1,"h1",0),o.Lc(2),o.jc(3,"translate"),o.Vb(),o.Wb(4,"app-refresh-button",1),o.ec("refresh",(function(t){return e.refreshTable()})),o.Vb(),o.Wb(5,"button",2),o.ec("click",(function(t){return e.onCreate()})),o.Lc(6),o.jc(7,"translate"),o.Vb(),o.Wb(8,"button",3),o.ec("click",(function(t){return e.onSave()})),o.Lc(9),o.jc(10,"translate"),o.Vb(),o.Wb(11,"button",4),o.ec("click",(function(t){return e.onDelete()})),o.Lc(12),o.jc(13,"translate"),o.Vb(),o.Wb(14,"app-immediate-filter",5),o.ec("filter",(function(t){return e.applyFilter(t)})),o.Vb(),o.Jc(15,St,1,0,"mat-spinner",6),o.Jc(16,Rt,2,3,"app-attributes-list",7),o.Vb()),2&t&&(o.Cb(2),o.Mc(o.kc(3,9,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),o.Cb(4),o.Nc(" ",o.kc(7,11,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),o.Cb(2),o.oc("disabled",0===e.selection.selected.length),o.Cb(1),o.Nc(" ",o.kc(10,13,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),o.Cb(2),o.oc("disabled",0===e.selection.selected.length),o.Cb(1),o.Nc(" ",o.kc(13,15,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),o.Cb(2),o.oc("placeholder","SHARED.COMPONENTS.ATTRIBUTES_LIST.FILTER"),o.Cb(1),o.oc("ngIf",e.loading),o.Cb(1),o.oc("ngIf",!e.loading))},directives:[u.a,Tt.b,b.a,a.t,f.c,It.a],pipes:[v.d],styles:[""]}),Lt),Vt=((kt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||kt)},kt.\u0275cmp=o.Kb({type:kt,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:1,vars:0,template:function(t,e){1&t&&o.Rb(0,"app-animated-router-outlet")},directives:[$.a],styles:[""],data:{animation:[H.a]}}),kt),_t=((At=function(){function t(e,i){_classCallCheck(this,t),this.route=e,this.resourceManager=i,this.items=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.parent.parent.params.subscribe((function(e){t.resourceManager.getResourceById(e.resourceId).subscribe((function(e){t.resource=e,t.initItems()}))}))}},{key:"initItems",value:function(){this.items=[{cssIcon:"perun-attributes",url:"/facilities/".concat(this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings/attributes"),label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"}]}}]),t}()).\u0275fac=function(t){return new(t||At)(o.Qb(s.a),o.Qb(n.i))},At.\u0275cmp=o.Kb({type:At,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Rb(1,"app-menu-buttons-field",0),o.Vb()),2&t&&(o.Cb(1),o.oc("items",e.items)("size","small"))},directives:[it.a],styles:[""]}),At),wt=["list"];function Ot(t,e){1&t&&o.Rb(0,"mat-spinner",8)}function Nt(t,e){if(1&t&&o.Rb(0,"app-attributes-list",9,10),2&t){var i=o.ic();o.oc("filterValue",i.filterValue)("attributes",i.attributes)("selection",i.selection)}}var Gt,Dt=((Gt=function(){function t(e,i,a,s,c){var n=this;_classCallCheck(this,t),this.attributesManager=e,this.route=i,this.dialog=a,this.notificator=s,this.translate=c,this.attributes=[],this.selection=new gt.c(!0,[]),this.filterValue="",this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(t){return n.saveSuccessMessage=t})),this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(t){return n.deleteSuccessMessage=t}))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.parent.parent.params.subscribe((function(e){t.resourceId=e.resourceId,t.refreshTable()}))}},{key:"onDelete",value:function(){var t=this;this.dialog.open(Ct.a,{width:"450px",data:{entityId:this.resourceId,entity:"resource",attributes:this.selection.selected}}).afterClosed().subscribe((function(e){e&&t.refreshTable()}))}},{key:"onSave",value:function(){var t=this;this.list.updateMapAttributes(),this.attributesManager.setResourceAttributes({resource:this.resourceId,attributes:this.selection.selected}).subscribe((function(){t.attributesManager.getResourceAttributes(t.resourceId).subscribe((function(e){t.attributes=Object(r.d)(e),t.notificator.showSuccess(t.saveSuccessMessage),t.selection.clear()}))}))}},{key:"onCreate",value:function(){var t=this;this.dialog.open(yt.a,{width:"1050px",data:{entityId:this.resourceId,entity:"resource",notEmptyAttributes:this.attributes,style:"resource-theme"}}).afterClosed().subscribe((function(e){"saved"===e&&t.refreshTable()}))}},{key:"refreshTable",value:function(){var t=this;this.loading=!0,this.attributesManager.getResourceAttributes(this.resourceId).subscribe((function(e){t.attributes=Object(r.d)(e),t.selection.clear(),t.loading=!1}))}},{key:"applyFilter",value:function(t){this.filterValue=t}}]),t}()).\u0275fac=function(t){return new(t||Gt)(o.Qb(n.c),o.Qb(s.a),o.Qb(vt.b),o.Qb(mt.a),o.Qb(v.e))},Gt.\u0275cmp=o.Kb({type:Gt,selectors:[["app-resource-settings-attributes"]],viewQuery:function(t,e){var i;1&t&&o.Sc(wt,!0),2&t&&o.wc(i=o.fc())&&(e.list=i.first)},hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("router-component",!0)},decls:17,vars:17,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"filterValue","attributes","selection",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"filterValue","attributes","selection"],["list",""]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Wb(1,"h1",0),o.Lc(2),o.jc(3,"translate"),o.Vb(),o.Wb(4,"app-refresh-button",1),o.ec("refresh",(function(t){return e.refreshTable()})),o.Vb(),o.Wb(5,"button",2),o.ec("click",(function(t){return e.onCreate()})),o.Lc(6),o.jc(7,"translate"),o.Vb(),o.Wb(8,"button",3),o.ec("click",(function(t){return e.onSave()})),o.Lc(9),o.jc(10,"translate"),o.Vb(),o.Wb(11,"button",4),o.ec("click",(function(t){return e.onDelete()})),o.Lc(12),o.jc(13,"translate"),o.Vb(),o.Wb(14,"app-immediate-filter",5),o.ec("filter",(function(t){return e.applyFilter(t)})),o.Vb(),o.Jc(15,Ot,1,0,"mat-spinner",6),o.Jc(16,Nt,2,3,"app-attributes-list",7),o.Vb()),2&t&&(o.Cb(2),o.Mc(o.kc(3,9,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),o.Cb(4),o.Nc(" ",o.kc(7,11,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),o.Cb(2),o.oc("disabled",0===e.selection.selected.length),o.Cb(1),o.Nc(" ",o.kc(10,13,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),o.Cb(2),o.oc("disabled",0===e.selection.selected.length),o.Cb(1),o.Nc(" ",o.kc(13,15,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),o.Cb(2),o.oc("placeholder","SHARED.COMPONENTS.ATTRIBUTES_LIST.FILTER"),o.Cb(1),o.oc("ngIf",e.loading),o.Cb(1),o.oc("ngIf",!e.loading))},directives:[u.a,Tt.b,b.a,a.t,f.c,It.a],pipes:[v.d],styles:[""]}),Gt),Ut=i("ILoV"),Wt=i("VEwN"),Ft=i("FoxU"),Bt=i("L95x"),Qt=["checkbox"];function jt(t,e){1&t&&o.Rb(0,"mat-spinner",8)}var xt=function(){return["vo","menu"]};function Pt(t,e){if(1&t&&(o.Wb(0,"div",9),o.Rb(1,"app-groups-list",10),o.Vb()),2&t){var i=o.ic();o.Cb(1),o.oc("groups",i.filteredGroups)("selection",i.selected)("disableMembers",!1)("inDialog",!1)("hideColumns",o.sc(5,xt))}}function Jt(t,e){1&t&&(o.Wb(0,"app-alert",11),o.Lc(1),o.jc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Nc(" ",o.kc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}var Yt,zt,Ht=[{path:"",component:z},{path:":facilityId",component:et,children:[{path:"",component:at,data:{animation:"FacilityOverviewPage"}},{path:"resources",component:st.a,data:{animation:"FacilityResourcesPage"}},{path:"allowed-groups",component:ct.a,data:{animation:"FacilityAllowedGroupsPage"}},{path:"settings",component:pt,children:[{path:"",component:ht,data:{animation:"FacilitySettingsOverviewPage"}},{path:"attributes",component:Mt,data:{animation:"FacilitySettingsAttributesPage"}}]}]},{path:":facilityId/resources/:resourceId",component:ft,children:[{path:"",component:dt,data:{animation:"ResourceOverviewPage"}},{path:"groups",component:(Yt=function(){function t(e,i,a){_classCallCheck(this,t),this.route=e,this.resourcesManager=i,this.dialog=a,this.assignedGroups=[],this.selected=new gt.c(!0,[]),this.filteredGroups=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.parent.params.subscribe((function(e){t.resourceId=e.resourceId,t.loadAllGroups()}))}},{key:"loadAllGroups",value:function(){var t=this;this.loading=!0,this.resourcesManager.getAssignedGroups(this.resourceId).subscribe((function(e){t.assignedGroups=e,t.filteredGroups=e,t.selected.clear(),t.loading=!1}))}},{key:"addGroup",value:function(){var t=this;this.dialog.open(Wt.a,{width:"800px",data:{theme:"resource-theme",resourceId:this.resourceId}}).afterClosed().subscribe((function(e){e&&t.loadAllGroups()}))}},{key:"removeGroups",value:function(){var t=this;this.dialog.open(Ut.a,{width:"500px",data:{resourceId:this.resourceId,groups:this.selected.selected}}).afterClosed().subscribe((function(e){e&&t.loadAllGroups()}))}},{key:"applyFilter",value:function(t){this.filteredGroups=this.assignedGroups.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}}]),t}(),Yt.\u0275fac=function(t){return new(t||Yt)(o.Qb(s.a),o.Qb(n.i),o.Qb(vt.b))},Yt.\u0275cmp=o.Kb({type:Yt,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(t,e){var i;1&t&&o.Hc(Qt,!0),2&t&&o.wc(i=o.fc())&&(e.checkbox=i.first)},decls:14,vars:14,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["color","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"groups","selection","disableMembers","inDialog","hideColumns"],["color","warn"]],template:function(t,e){1&t&&(o.Wb(0,"h1",0),o.Lc(1),o.jc(2,"translate"),o.Vb(),o.Wb(3,"app-refresh-button",1),o.ec("refresh",(function(t){return e.loadAllGroups()})),o.Vb(),o.Wb(4,"button",2),o.ec("click",(function(t){return e.addGroup()})),o.Lc(5),o.jc(6,"translate"),o.Vb(),o.Wb(7,"button",3),o.ec("click",(function(t){return e.removeGroups()})),o.Lc(8),o.jc(9,"translate"),o.Vb(),o.Wb(10,"app-debounce-filter",4),o.ec("filter",(function(t){return e.applyFilter(t)})),o.Vb(),o.Jc(11,jt,1,0,"mat-spinner",5),o.Jc(12,Pt,2,6,"div",6),o.Jc(13,Jt,3,3,"app-alert",7)),2&t&&(o.Cb(1),o.Mc(o.kc(2,8,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),o.Cb(4),o.Nc(" ",o.kc(6,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"),o.Cb(2),o.oc("disabled",0===e.selected.selected.length),o.Cb(1),o.Nc(" ",o.kc(9,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP"),"\n"),o.Cb(2),o.oc("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),o.Cb(1),o.oc("ngIf",e.loading),o.Cb(1),o.oc("ngIf",!e.loading&&0!==e.assignedGroups.length),o.Cb(1),o.oc("ngIf",0===e.assignedGroups.length&&!e.loading))},directives:[u.a,Tt.b,Ft.a,a.t,f.c,Bt.a,y.a],pipes:[v.d],styles:[""]}),Yt),data:{animation:"ResourceGroupsComponent"}},{path:"settings",component:Vt,children:[{path:"",component:_t,data:{animation:"ResourceSettingsOverviewPage"}},{path:"attributes",component:Dt,data:{animation:"ResourceSettingsAttributesPage"}}]}]}],Kt=((zt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:zt}),zt.\u0275inj=o.Nb({factory:function(t){return new(t||zt)},imports:[[s.j.forChild(Ht)],s.j]}),zt),$t=i("PCNd"),Xt=i("KoHB");i.d(e,"FacilitiesModule",(function(){return Zt}));var qt,Zt=((qt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:qt}),qt.\u0275inj=o.Nb({factory:function(t){return new(t||qt)},imports:[[a.c,Kt,I.b,$t.a,Xt.a]]}),qt)}}]);