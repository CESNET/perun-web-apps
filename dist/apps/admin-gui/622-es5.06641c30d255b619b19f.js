!function(){function e(e,i){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){a&&(e=a);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(self.webpackChunkperun_web_apps=self.webpackChunkperun_web_apps||[]).push([[622],{95142:function(e,t,a){"use strict";a.d(t,{y:function(){return E}});var s=a(90474),r=a(60611),o=a(54497),c=a(31572),l=a(57629),u=a(61511),d=a(59403),g=a(91058),p=a(67806),h=a(4252),f=a(48160);function m(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"perun-web-apps-refresh-button",5),c.NdJ("refresh",function(){return c.CHM(i),c.oxw().refreshTable()}),c.qZA()}}function A(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"perun-web-apps-debounce-filter",6),c.NdJ("filter",function(e){return c.CHM(i),c.oxw().applyFilter(e)}),c.qZA()}2&e&&c.Q6J("placeholder","RESOURCE_DETAIL.ASSIGNED_MEMBERS.FILTER")}function S(e,t){1&e&&c._UZ(0,"mat-spinner",7)}var v=function(){return["id","fullName"]};function b(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"perun-web-apps-members-list",8),c.NdJ("page",function(e){return c.CHM(i),c.oxw().pageChanged(e)})("updateTable",function(){return c.CHM(i),c.oxw().refreshTable()}),c.qZA()}if(2&e){var a=c.oxw();c.Q6J("disableRouting",!a.routeAuth)("filter",a.filterValue)("displayedColumns",c.DdM(5,v))("members",a.members)("pageSize",a.pageSize)}}var E=function(){var e=function(){function e(t,a,n,s){i(this,e),this.route=t,this.resourceService=a,this.tableConfigService=n,this.authResolver=s,this.loading=!1,this.filterValue="",this.tableId=r.iQ}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe(function(t){e.resourceId=t.resourceId,e.refreshTable()})}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.resourceService.getAssignedRichMembers(this.resourceId).subscribe(function(t){e.members=t,e.setAuthRights(),e.loading=!1})}},{key:"setAuthRights",value:function(){0!==this.members.length&&(this.routeAuth=this.authResolver.isAuthorized("getMemberById_int_policy",[this.members[0]]))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.gz),c.Y36(s.xk),c.Y36(r.dB),c.Y36(o.x4))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-resource-assigned-members"]],decls:7,vars:7,consts:[[1,"page-subtitle"],[3,"refresh",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"disableRouting","filter","displayedColumns","members","pageSize","page","updateTable",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"disableRouting","filter","displayedColumns","members","pageSize","page","updateTable"]],template:function(e,t){1&e&&(c.TgZ(0,"h1",0),c._uU(1),c.ALo(2,"translate"),c.qZA(),c.YNc(3,m,1,0,"perun-web-apps-refresh-button",1),c.YNc(4,A,1,1,"perun-web-apps-debounce-filter",2),c.YNc(5,S,1,0,"mat-spinner",3),c.YNc(6,b,1,6,"perun-web-apps-members-list",4)),2&e&&(c.xp6(1),c.Oqu(c.lcZ(2,5,"RESOURCE_DETAIL.ASSIGNED_MEMBERS.TITLE")),c.xp6(2),c.Q6J("ngIf",!t.loading),c.xp6(1),c.Q6J("ngIf",!t.loading),c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngIf",!t.loading))},directives:[u.O5,d.t,g.P,p.$g,h.O],pipes:[f.X$],styles:[""]}),e}()},8705:function(t,a,s){"use strict";s.d(a,{D:function(){return Q}});var r=s(90474),o=s(60611),c=s(4230),l=s(84140),u=s(84608),d=s(54497),g=s(31572),p=s(48160),h=s(61511),f=s(15980),m=s(67806),A=s(55109),S=s(91058),v=s(91721),b=s(44973),E=function(){var e=function e(){i(this,e),this.servicePackages=[],this.selectedPackage=null,this.packageSelected=new g.vpe,this.nameFunction=function(e){return e.name},this.shortNameFunction=function(e){return e.description},this.searchFunction=function(e){return e.name+e.description}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["perun-web-apps-service-package-search-select"]],inputs:{servicePackages:"servicePackages",selectedPackage:"selectedPackage"},outputs:{packageSelected:"packageSelected"},decls:4,vars:14,consts:[[3,"entities","entity","searchFunction","mainTextFunction","secondaryTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(e,t){1&e&&(g.TgZ(0,"perun-web-apps-entity-search-select",0),g.NdJ("entitySelected",function(e){return t.packageSelected.emit(e)}),g.ALo(1,"translate"),g.ALo(2,"translate"),g.ALo(3,"translate"),g.qZA()),2&e&&g.Q6J("entities",t.servicePackages)("entity",t.selectedPackage)("searchFunction",t.searchFunction)("mainTextFunction",t.nameFunction)("secondaryTextFunction",t.shortNameFunction)("selectPlaceholder",g.lcZ(1,8,"SHARED_LIB.PERUN.COMPONENTS.SERVICE_PACKAGE_SEARCH_SELECT.SELECT_PACKAGE"))("findPlaceholder",g.lcZ(2,10,"SHARED_LIB.PERUN.COMPONENTS.SERVICE_PACKAGE_SEARCH_SELECT.FIND_PACKAGE"))("noEntriesText",g.lcZ(3,12,"SHARED_LIB.PERUN.COMPONENTS.SERVICE_PACKAGE_SEARCH_SELECT.NO_PACKAGE_FOUND"))},directives:[b.i],pipes:[p.X$],styles:[""]}),e}();function R(e,t){1&e&&g._UZ(0,"mat-spinner",6)}var T=function(){return["id","name","enabled","description"]};function Z(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"app-services-list",16),g.NdJ("page",function(e){return g.CHM(i),g.oxw(2).pageChanged(e)}),g.qZA()}if(2&e){var a=g.oxw(2);g.Q6J("disableRouting",!0)("displayedColumns",g.DdM(5,T))("pageSize",a.pageSize)("selection",a.selection)("services",a.filteredServices)}}var I=function(){return["select","id","name","enabled","description"]};function C(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",7),g.TgZ(1,"mat-tab-group",8),g.NdJ("selectedTabChange",function(){return g.CHM(i),g.oxw().tabChanged()}),g.TgZ(2,"mat-tab",9),g.ALo(3,"translate"),g.TgZ(4,"div",10),g.TgZ(5,"perun-web-apps-debounce-filter",11),g.NdJ("filter",function(e){return g.CHM(i),g.oxw().applyFilter(e)}),g.ALo(6,"translate"),g.qZA(),g.qZA(),g.TgZ(7,"app-services-list",12),g.NdJ("page",function(e){return g.CHM(i),g.oxw().pageChanged(e)}),g.qZA(),g.qZA(),g.TgZ(8,"mat-tab",9),g.ALo(9,"translate"),g.TgZ(10,"div",13),g.TgZ(11,"perun-web-apps-service-package-search-select",14),g.NdJ("packageSelected",function(e){return g.CHM(i),g.oxw().servicePackageSelected(e)}),g.qZA(),g.qZA(),g.YNc(12,Z,1,6,"app-services-list",15),g.qZA(),g.qZA(),g.qZA()}if(2&e){var a=g.oxw();g.xp6(2),g.s9C("label",g.lcZ(3,12,"DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.SELECT_SERVICE")),g.xp6(3),g.s9C("placeholder",g.lcZ(6,14,"DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.FILTER_DESCRIPTION")),g.xp6(2),g.Q6J("disableRouting",!0)("displayedColumns",g.DdM(18,I))("filterValue",a.filterValue)("pageSize",a.pageSize)("selection",a.selection)("services",a.unAssignedServices),g.xp6(1),g.s9C("label",g.lcZ(9,16,"DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.SELECT_PACKAGE")),g.xp6(3),g.Q6J("selectedPackage",a.selectedPackage)("servicePackages",a.servicePackages),g.xp6(1),g.Q6J("ngIf",-1!==a.selectedPackage.id)}}var _=function(){var t=function(){function t(e,a,n,s,r,l,u){i(this,t),this.dialogRef=e,this.data=a,this.notificator=n,this.translate=s,this.resourceManager=r,this.servicesManager=l,this.tableConfigService=u,this.loading=!1,this.unAssignedServices=[],this.filteredServices=[],this.servicePackages=[],this.selectedPackage={name:"Not selected",description:"",id:-1,beanName:"ServicePackage"},this.selection=new c.Ov(!0,[]),this.tableId=o.DR,this.filterValue=""}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.theme=this.data.theme,this.resourceManager.getAssignedServicesToResource(this.data.resourceId).subscribe(function(i){t.servicesManager.getServices().subscribe(function(a){t.servicesManager.getServicesPackages().subscribe(function(n){t.servicePackages.push(t.selectedPackage),t.servicePackages=t.servicePackages.concat(n),t.unAssignedServices=a;var s,r=e(i);try{for(r.s();!(s=r.n()).done;){var o,c=s.value,l=e(a);try{for(l.s();!(o=l.n()).done;){var u=o.value;c.id===u.id&&t.unAssignedServices.splice(t.unAssignedServices.indexOf(u),1)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){r.e(d)}finally{r.f()}t.loading=!1})})})}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"onAdd",value:function(){this.loading=!0,-1!==this.selectedPackage.id?this.addServicePackage():this.addServices()}},{key:"addServicePackage",value:function(){var e=this;this.resourceManager.assignServicesPackage(this.data.resourceId,this.selectedPackage.id).subscribe(function(){e.translate.get("DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.PACKAGE_SUCCESS_MESSAGE").subscribe(function(t){e.notificator.showSuccess(t),0!==e.selection.selected.length?e.addServices():e.dialogRef.close(!0)})},function(){return e.loading=!1})}},{key:"addServices",value:function(){var t,i=this,a=[],n=e(this.selection.selected);try{for(n.s();!(t=n.n()).done;){var s=t.value;a.push(s.id)}}catch(r){n.e(r)}finally{n.f()}this.resourceManager.assignServices(this.data.resourceId,a).subscribe(function(){i.translate.get("DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.SERVICE_SUCCESS_MESSAGE").subscribe(function(e){i.notificator.showSuccess(e),i.dialogRef.close(!0)})},function(){return i.loading=!1})}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"servicePackageSelected",value:function(e){var t=this;this.selectedPackage=e,-1!==e.id?this.servicesManager.getServicesFromServicesPackage(e.id).subscribe(function(e){t.filteredServices=e}):this.filteredServices=[]}},{key:"tabChanged",value:function(){this.selection.clear(),this.filterValue="",this.selectedPackage=this.servicePackages[0]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(u.so),g.Y36(u.WI),g.Y36(d.V6),g.Y36(p.sK),g.Y36(r.xk),g.Y36(r.KK),g.Y36(o.dB))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-perun-web-apps-assign-service-to-resource-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[3,"selectedTabChange"],[3,"label"],[1,"mt-2"],[3,"placeholder","filter"],[3,"disableRouting","displayedColumns","filterValue","pageSize","selection","services","page"],[1,"mt-3"],[3,"selectedPackage","servicePackages","packageSelected"],[3,"disableRouting","displayedColumns","pageSize","selection","services","page",4,"ngIf"],[3,"disableRouting","displayedColumns","pageSize","selection","services","page"]],template:function(e,t){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"h1",0),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.YNc(4,R,1,0,"mat-spinner",1),g.YNc(5,C,13,19,"div",2),g.TgZ(6,"div",3),g.TgZ(7,"button",4),g.NdJ("click",function(){return t.onCancel()}),g._uU(8),g.ALo(9,"translate"),g.qZA(),g.TgZ(10,"button",5),g.NdJ("click",function(){return t.onAdd()}),g._uU(11),g.ALo(12,"translate"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Tol(t.theme),g.xp6(2),g.Oqu(g.lcZ(3,9,"DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.TITLE")),g.xp6(2),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading),g.xp6(3),g.hij(" ",g.lcZ(9,11,"DIALOGS.ASSIGN_SERVICE_TO_RESOURCE.CANCEL_BUTTON")," "),g.xp6(2),g.Q6J("disabled",0===t.selection.selected.length&&-1===t.selectedPackage.id||t.loading),g.xp6(1),g.hij(" ",g.lcZ(12,13,"DIALOGS.ASSIGN_SERVICE_TO_RESOURCE."+(-1===t.selectedPackage.id?"ADD_SERVICES":"ADD_PACKAGE"))," "))},directives:[u.uh,h.O5,u.H8,f.lW,m.$g,u.xY,A.SP,A.uX,S.P,v.Q,E],pipes:[p.X$],styles:[""]}),t}(),O=s(67033);function y(e,t){1&e&&g._UZ(0,"mat-spinner",6)}function x(e,t){1&e&&g._UZ(0,"th",15)}function N(e,t){if(1&e&&(g.TgZ(0,"td",16),g._uU(1),g.qZA()),2&e){var i=t.$implicit;g.xp6(1),g.hij(" ",i.name," ")}}function U(e,t){1&e&&g._UZ(0,"tr",17)}function D(e,t){1&e&&g._UZ(0,"tr",18)}function k(e,t){if(1&e&&(g.TgZ(0,"div",7),g.TgZ(1,"p"),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.TgZ(4,"div",8),g._uU(5),g.ALo(6,"translate"),g.qZA(),g.TgZ(7,"table",9),g.ynx(8,10),g.YNc(9,x,1,0,"th",11),g.YNc(10,N,2,1,"td",12),g.BQk(),g.YNc(11,U,1,0,"tr",13),g.YNc(12,D,1,0,"tr",14),g.qZA(),g.qZA()),2&e){var i=g.oxw();g.xp6(2),g.hij(" ",g.lcZ(3,5,"DIALOGS.REMOVE_SERVICE_FROM_RESOURCE.DESCRIPTION")," "),g.xp6(3),g.hij(" ",g.lcZ(6,7,"DIALOGS.REMOVE_SERVICE_FROM_RESOURCE.ASK")," "),g.xp6(2),g.Q6J("dataSource",i.dataSource),g.xp6(4),g.Q6J("matHeaderRowDef",i.displayedColumns),g.xp6(1),g.Q6J("matRowDefColumns",i.displayedColumns)}}var L=function(){var t=function(){function t(e,a,n,s,r){i(this,t),this.dialogRef=e,this.data=a,this.notificator=n,this.translate=s,this.resourcesManager=r,this.displayedColumns=["name"]}return n(t,[{key:"ngOnInit",value:function(){this.theme=this.data.theme,this.dataSource=new O.by(this.data.services)}},{key:"onSubmit",value:function(){var t=this;this.loading=!0;var i,a=[],n=e(this.data.services);try{for(n.s();!(i=n.n()).done;){var s=i.value;a.push(s.id)}}catch(r){n.e(r)}finally{n.f()}this.resourcesManager.removeServices(this.data.resourceId,a).subscribe(function(){t.translate.get("DIALOGS.REMOVE_SERVICE_FROM_RESOURCE.SUCCESS").subscribe(function(e){t.notificator.showSuccess(e),t.dialogRef.close(!0)})},function(){return t.loading=!1})}},{key:"onCancel",value:function(){this.dialogRef.close()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(u.so),g.Y36(u.WI),g.Y36(d.V6),g.Y36(p.sK),g.Y36(r.xk))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-perun-web-apps-remove-service-from-resource-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,t){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"h1",0),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.YNc(4,y,1,0,"mat-spinner",1),g.YNc(5,k,13,9,"div",2),g.TgZ(6,"div",3),g.TgZ(7,"button",4),g.NdJ("click",function(){return t.onCancel()}),g._uU(8),g.ALo(9,"translate"),g.qZA(),g.TgZ(10,"button",5),g.NdJ("click",function(){return t.onSubmit()}),g._uU(11),g.ALo(12,"translate"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Tol(t.theme),g.xp6(2),g.Oqu(g.lcZ(3,9,"DIALOGS.REMOVE_SERVICE_FROM_RESOURCE.TITLE")),g.xp6(2),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading),g.xp6(3),g.hij(" ",g.lcZ(9,11,"DIALOGS.REMOVE_SERVICE_FROM_RESOURCE.CANCEL")," "),g.xp6(2),g.Q6J("disabled",t.loading),g.xp6(1),g.hij(" ",g.lcZ(12,13,"DIALOGS.REMOVE_SERVICE_FROM_RESOURCE.DELETE")," "))},directives:[u.uh,h.O5,u.H8,f.lW,m.$g,u.xY,O.BZ,O.w1,O.fO,O.Dz,O.as,O.nj,O.ge,O.ev,O.XQ,O.Gk],pipes:[p.X$],styles:[""]}),t}(),w=s(57629),G=s(59403),M=s(19139);function q(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",7),g.NdJ("click",function(){return g.CHM(i),g.oxw().addService()}),g._uU(1),g.ALo(2,"translate"),g.qZA()}2&e&&(g.xp6(1),g.hij(" ",g.lcZ(2,1,"RESOURCE_DETAIL.ASSIGNED_SERVICES.ADD_SERVICE"),"\n"))}function Y(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",8),g.NdJ("click",function(){return g.CHM(i),g.oxw().removeServices()}),g._uU(1),g.ALo(2,"translate"),g.qZA()}if(2&e){var a=g.oxw();g.Q6J("disabled",0===a.selected.selected.length),g.xp6(1),g.hij(" ",g.lcZ(2,2,"RESOURCE_DETAIL.ASSIGNED_SERVICES.REMOVE_SERVICE"),"\n")}}function J(e,t){1&e&&g._UZ(0,"mat-spinner",9)}function P(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"app-services-list",10),g.NdJ("page",function(e){return g.CHM(i),g.oxw().pageChanged(e)}),g.qZA()}if(2&e){var a=g.oxw();g.Q6J("pageSize",a.pageSize)("services",a.assignedServices)("selection",a.selected)("filterValue",a.filterValue)("displayedColumns",a.displayedColumns)("disableRouting",!a.serviceRoutingAuth)}}var Q=function(){var e=function(){function e(t,a,n,s,r){i(this,e),this.route=t,this.resourcesManager=a,this.tableConfigService=n,this.dialog=s,this.guiAuthResolver=r,this.assignedServices=[],this.selected=new c.Ov(!0,[]),this.tableId=o.uC,this.filterValue="",this.displayedColumns=["select","id","name","enabled","script","description"]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe(function(t){e.resourceId=t.resourceId,e.resourcesManager.getResourceById(e.resourceId).subscribe(function(t){e.resource=t,e.getDataForAuthorization(),e.loadAllServices()})})}},{key:"loadAllServices",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedServicesToResource(this.resourceId).subscribe(function(t){e.assignedServices=t,e.selected.clear(),e.loading=!1})}},{key:"addService",value:function(){var e=this,t=(0,l.kZ)();t.width="800px",t.data={theme:"resource-theme",resourceId:this.resourceId},this.dialog.open(_,t).afterClosed().subscribe(function(t){t&&e.loadAllServices()})}},{key:"removeServices",value:function(){var e=this,t=(0,l.kZ)();t.width="500px",t.data={theme:"resource-theme",resourceId:this.resourceId,services:this.selected.selected},this.dialog.open(L,t).afterClosed().subscribe(function(t){t&&e.loadAllServices()})}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){this.assignServiceAuth=this.guiAuthResolver.isAuthorized("assignServices_Resource_List<Service>_policy",[this.resource]),this.removeServiceAuth=this.guiAuthResolver.isAuthorized("removeServices_Resource_List<Service>_policy",[this.resource]),this.displayedColumns=this.removeServiceAuth?["select","id","name","enabled","script","description"]:["id","name","enabled","script","description"],this.serviceRoutingAuth=this.guiAuthResolver.isPerunAdminOrObserver()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(w.gz),g.Y36(r.xk),g.Y36(o.dB),g.Y36(u.uw),g.Y36(d.x4))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-perun-web-apps-resource-assigned-services"]],decls:9,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","ml-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","services","selection","filterValue","displayedColumns","disableRouting","page",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"pageSize","services","selection","filterValue","displayedColumns","disableRouting","page"]],template:function(e,t){1&e&&(g.TgZ(0,"h1",0),g._uU(1),g.ALo(2,"translate"),g.qZA(),g.TgZ(3,"perun-web-apps-refresh-button",1),g.NdJ("refresh",function(){return t.loadAllServices()}),g.qZA(),g.YNc(4,q,3,3,"button",2),g.YNc(5,Y,3,4,"button",3),g.TgZ(6,"perun-web-apps-immediate-filter",4),g.NdJ("filter",function(e){return t.applyFilter(e)}),g.qZA(),g.YNc(7,J,1,0,"mat-spinner",5),g.YNc(8,P,1,6,"app-services-list",6)),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,6,"RESOURCE_DETAIL.ASSIGNED_SERVICES.TITLE")),g.xp6(3),g.Q6J("ngIf",!t.loadingResource&&t.assignServiceAuth),g.xp6(1),g.Q6J("ngIf",!t.loadingResource&&t.removeServiceAuth),g.xp6(1),g.Q6J("placeholder","RESOURCE_DETAIL.ASSIGNED_SERVICES.FILTER_SERVICES"),g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading))},directives:[G.t,h.O5,M.L,f.lW,m.$g,v.Q],pipes:[p.X$],styles:[""]}),e}()},79472:function(e,t,a){"use strict";a.d(t,{X:function(){return R}});var s=a(54497),r=a(90474),o=a(31572),c=a(57629),l=a(55109),u=a(61511),d=a(541),g=a(69012),p=a(48160);function h(e,t){1&e&&(o._uU(0),o.ALo(1,"translate")),2&e&&o.hij(" ",o.lcZ(1,1,"RESOURCE_DETAIL.ENTITY")," ")}function f(e,t){if(1&e&&o._UZ(0,"app-one-entity-attribute-page",4),2&e){var i=o.oxw();o.Q6J("entity","resource")("entityId",i.resourceId)}}function m(e,t){1&e&&(o._uU(0),o.ALo(1,"translate"),o.ALo(2,"translate")),2&e&&o.AsE(" ",o.lcZ(1,2,"RESOURCE_DETAIL.ENTITY")," - ",o.lcZ(2,4,"MEMBER_DETAIL.ENTITY")," ")}function A(e,t){if(1&e&&o._UZ(0,"app-two-entity-attribute-page",5),2&e){var i=o.oxw(2);o.Q6J("firstEntity","resource")("firstEntityId",i.resourceId)("secondEntity","member")}}function S(e,t){1&e&&(o.TgZ(0,"mat-tab"),o.YNc(1,m,3,6,"ng-template",1),o.YNc(2,A,1,3,"ng-template",2),o.qZA())}function v(e,t){1&e&&(o._uU(0),o.ALo(1,"translate"),o.ALo(2,"translate")),2&e&&o.AsE(" ",o.lcZ(1,2,"RESOURCE_DETAIL.ENTITY")," - ",o.lcZ(2,4,"GROUP_DETAIL.ENTITY")," ")}function b(e,t){if(1&e&&o._UZ(0,"app-two-entity-attribute-page",5),2&e){var i=o.oxw(2);o.Q6J("firstEntity","resource")("firstEntityId",i.resourceId)("secondEntity","group")}}function E(e,t){1&e&&(o.TgZ(0,"mat-tab"),o.YNc(1,v,3,6,"ng-template",1),o.YNc(2,b,1,3,"ng-template",2),o.qZA())}var R=function(){var e=function(){function e(t,a,n){i(this,e),this.route=t,this.authResolver=a,this.resourceManager=n}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe(function(t){e.resourceId=parseInt(t.resourceId,10),e.resourceManager.getResourceById(e.resourceId).subscribe(function(t){e.resource=t,e.resourceGroupAttAuth=e.authResolver.isAuthorized("getGroupAssignments_Resource_policy",[e.resource]),e.resourceMemberAttAuth=e.authResolver.isAuthorized("getAssignedMembersWithStatus_Resource_policy",[e.resource])})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.gz),o.Y36(s.x4),o.Y36(r.xk))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-resource-attributes"]],hostVars:2,hostBindings:function(e,t){2&e&&o.ekj("router-component",t.true)},decls:10,vars:5,consts:[[1,"page-subtitle"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(o.TgZ(0,"div"),o.TgZ(1,"h1",0),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"mat-tab-group"),o.TgZ(5,"mat-tab"),o.YNc(6,h,2,3,"ng-template",1),o.YNc(7,f,1,2,"ng-template",2),o.qZA(),o.YNc(8,S,3,0,"mat-tab",3),o.YNc(9,E,3,0,"mat-tab",3),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Oqu(o.lcZ(3,3,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),o.xp6(6),o.Q6J("ngIf",t.resourceMemberAttAuth),o.xp6(1),o.Q6J("ngIf",t.resourceGroupAttAuth))},directives:[l.SP,l.uX,l.uD,l.Vc,u.O5,d.t,g.Y],pipes:[p.X$],styles:[""]}),e}()},72920:function(e,t,a){"use strict";a.d(t,{b:function(){return G}});var s=a(17),r=a(75585),o=a(90474),c=a(84140),l=a(54497),u=a(22280),d=a(6527),g=a(95909),p=a(31572),h=a(57629),f=a(48958),m=a(84608),A=a(66297),S=a(61511),v=a(67806),b=a(43691),E=a(36922),R=a(21575),T=a(15980),Z=a(48160);function I(e,t){1&e&&p._UZ(0,"mat-spinner",3)}function C(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",15),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).editResource()}),p.TgZ(1,"mat-icon"),p._uU(2,"edit"),p.qZA(),p.qZA()}}function _(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",16),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).deleteResource()}),p.TgZ(1,"mat-icon"),p._uU(2,"delete_forever"),p.qZA(),p.qZA()}}var O=function(e){return["/organizations",e]};function y(e,t){if(1&e&&(p.TgZ(0,"a",8),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.Q6J("routerLink",p.VKq(2,O,i.resource.vo.id)),p.xp6(1),p.Oqu(i.resource.vo.name)}}function x(e,t){if(1&e&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.hij(" ",i.resource.vo.name," ")}}var N=function(e){return["/facilities",e]};function U(e,t){if(1&e&&(p.TgZ(0,"a",8),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.Q6J("routerLink",p.VKq(2,N,i.resource.facilityId)),p.xp6(1),p.Oqu(i.resource.facility.name)}}function D(e,t){if(1&e&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.hij(" ",i.resource.facility.name," ")}}var k=function(){return{color:"black"}},L=function(e){return[e]};function w(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"div",4),p._UZ(2,"mat-icon",5),p.ALo(3,"translate"),p.TgZ(4,"div",6),p.TgZ(5,"div",7),p.TgZ(6,"a",8),p._uU(7),p.qZA(),p.TgZ(8,"span",9),p._uU(9),p.qZA(),p.YNc(10,C,3,0,"button",10),p.YNc(11,_,3,0,"button",11),p.qZA(),p.TgZ(12,"div"),p._uU(13),p.ALo(14,"translate"),p.qZA(),p.TgZ(15,"span",12),p._uU(16),p.ALo(17,"translate"),p.ALo(18,"translate"),p.YNc(19,y,2,4,"a",13),p.YNc(20,x,2,1,"span",2),p._uU(21),p.ALo(22,"translate"),p.YNc(23,U,2,4,"a",14),p.YNc(24,D,2,1,"span",2),p._uU(25),p.ALo(26,"translate"),p.qZA(),p.qZA(),p.qZA(),p._UZ(27,"app-animated-router-outlet"),p.qZA()),2&e){var i=p.oxw();p.xp6(2),p.s9C("matTooltip",p.lcZ(3,20,"RESOURCE_DETAIL.ENTITY")),p.Q6J("ngStyle",p.DdM(32,k)),p.xp6(4),p.Q6J("routerLink",p.VKq(33,L,i.baseUrl)),p.xp6(1),p.hij(" ",i.resource.name," "),p.xp6(2),p.hij(" \xa0#",i.resource.id," "),p.xp6(1),p.Q6J("ngIf",i.editResourceAuth),p.xp6(1),p.Q6J("ngIf",i.deleteAuth),p.xp6(2),p.AsE(" ",p.lcZ(14,22,"RESOURCE_DETAIL.UUID"),": ",i.resource.uuid," "),p.xp6(3),p.AsE(" ",p.lcZ(17,24,"RESOURCE_DETAIL.ENTITY"),", ",p.lcZ(18,26,"RESOURCE_DETAIL.VO"),": "),p.xp6(3),p.Q6J("ngIf",i.voLinkAuth),p.xp6(1),p.Q6J("ngIf",!i.voLinkAuth),p.xp6(1),p.AsE(" #",i.resource.voId,", ",p.lcZ(22,28,"RESOURCE_DETAIL.FACILITY"),": "),p.xp6(2),p.Q6J("ngIf",i.facilityLinkAuth),p.xp6(1),p.Q6J("ngIf",!i.facilityLinkAuth),p.xp6(1),p.lnq(" #",i.resource.facilityId,", ",p.lcZ(26,30,"RESOURCE_DETAIL.DESCRIPTION"),": ",i.resource.description," ")}}var G=function(){var e=function(){function e(t,a,n,s,r,o,c,l,u){i(this,e),this.route=t,this.facilityManager=a,this.vosManagerService=n,this.resourcesManager=s,this.sideMenuService=r,this.sideMenuItemService=o,this.dialog=c,this.guiAuthResolver=l,this.router=u,this.deleteAuth=!1,this.baseUrl="",this.loading=!1}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe(function(t){e.resourcesManager.getRichResourceById(t.resourceId).subscribe(function(t){e.resource=t,e.setAuth(),"facilities"===e.route.parent.snapshot.url[0].path?(e.baseUrl=(new u.r5).transform(t,!1),e.facilityManager.getFacilityById(t.facilityId).subscribe(function(i){var a=e.sideMenuItemService.parseFacility(i),n=e.sideMenuItemService.parseResource(t,!1);e.sideMenuService.setFacilityMenuItems([a,n]),e.loading=!1},function(){return e.loading=!1})):(e.baseUrl=(new u.r5).transform(t,!0),e.vosManagerService.getVoById(t.voId).subscribe(function(i){var a=e.sideMenuItemService.parseVo(i),n=e.sideMenuItemService.parseResource(t,!0);e.sideMenuService.setAccessMenuItems([a,n]),e.loading=!1},function(){return e.loading=!1})),(0,c.sF)("resources",e.resource)})})}},{key:"setAuth",value:function(){this.facilityLinkAuth=this.guiAuthResolver.isAuthorized("getFacilityById_int_policy",[this.resource]),this.editResourceAuth=this.guiAuthResolver.isAuthorized("updateResource_Resource_policy",[this.resource]),this.voLinkAuth=this.guiAuthResolver.isAuthorized("getVoById_int_policy",[this.resource]),this.deleteAuth=this.guiAuthResolver.isAuthorized("deleteResource_Resource_policy",[this.resource])}},{key:"editResource",value:function(){var e,t=this;this.resourcesManager.getResourceById(this.resource.id).subscribe(function(i){e=i;var a=(0,c.kZ)();a.width="450px",a.data={theme:"resource-theme",resource:e,dialogType:d.Eg.RESOURCE},t.dialog.open(d.rd,a).afterClosed().subscribe(function(e){e&&t.resourcesManager.getRichResourceById(t.resource.id).subscribe(function(e){t.resource=e})})})}},{key:"deleteResource",value:function(){var e=this,t=(0,c.kZ)();t.width="500px",t.data={theme:"resource-theme",resources:[this.resource]},this.dialog.open(g.f,t).afterClosed().subscribe(function(t){t&&e.router.navigate(["../"],{relativeTo:e.route})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(h.gz),p.Y36(o.IQ),p.Y36(o.YF),p.Y36(o.xk),p.Y36(f.D),p.Y36(r.V),p.Y36(m.uw),p.Y36(l.x4),p.Y36(h.F0))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-resource-detail-page"]],decls:4,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-resource-black",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"resource-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","","aria-label","Edit resource",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],["queryParamsHandling","merge","class","resource-link",3,"routerLink",4,"ngIf"],["class","resource-link","queryParamsHandling","merge",3,"routerLink",4,"ngIf"],["mat-icon-button","","aria-label","Edit resource",3,"click"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._UZ(1,"perun-web-apps-back-button"),p.YNc(2,I,1,0,"mat-spinner",1),p.YNc(3,w,28,35,"div",2),p.qZA()),2&e&&(p.xp6(2),p.Q6J("ngIf",t.loading),p.xp6(1),p.Q6J("ngIf",!t.loading&&void 0!==t.resource))},directives:[A.W,S.O5,v.$g,b.Hw,E.gM,S.PC,h.yS,R.A,T.lW],pipes:[Z.X$],styles:[".break-line[_ngcontent-%COMP%]{display:inline-block}"],data:{animation:[s.Ji]}}),e}()},42473:function(t,a,s){"use strict";s.d(a,{K:function(){return j}});var r=s(90474),o=s(4230),c=s(84608),l=s(67033),u=s(54497),d=s(31572),g=s(48160),p=s(61511),h=s(15980),f=s(67806);function m(e,t){1&e&&d._UZ(0,"mat-spinner",6)}function A(e,t){1&e&&d._UZ(0,"th",15)}function S(e,t){if(1&e&&(d.TgZ(0,"td",16),d._uU(1),d.qZA()),2&e){var i=t.$implicit;d.xp6(1),d.hij(" ",i.name," ")}}function v(e,t){1&e&&d._UZ(0,"tr",17)}function b(e,t){1&e&&d._UZ(0,"tr",18)}function E(e,t){if(1&e&&(d.TgZ(0,"div",7),d.TgZ(1,"p"),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",8),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.TgZ(7,"table",9),d.ynx(8,10),d.YNc(9,A,1,0,"th",11),d.YNc(10,S,2,1,"td",12),d.BQk(),d.YNc(11,v,1,0,"tr",13),d.YNc(12,b,1,0,"tr",14),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(2),d.hij(" ",d.lcZ(3,5,"DIALOGS.REMOVE_GROUP_FROM_RESOURCE.DESCRIPTION")," "),d.xp6(3),d.hij(" ",d.lcZ(6,7,"DIALOGS.REMOVE_GROUP_FROM_RESOURCE.ASK")," "),d.xp6(2),d.Q6J("dataSource",i.dataSource),d.xp6(4),d.Q6J("matHeaderRowDef",i.displayedColumns),d.xp6(1),d.Q6J("matRowDefColumns",i.displayedColumns)}}var R=function(){var t=function(){function t(e,a,n,s,r){i(this,t),this.dialogRef=e,this.data=a,this.notificator=n,this.translate=s,this.resourceManager=r,this.displayedColumns=["name"],this.loading=!1}return n(t,[{key:"ngOnInit",value:function(){this.theme=this.data.theme,this.dataSource=new l.by(this.data.groups)}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"onSubmit",value:function(){var t,i=this,a=[],n=e(this.data.groups);try{for(n.s();!(t=n.n()).done;){var s=t.value;a.push(s.id)}}catch(r){n.e(r)}finally{n.f()}this.loading=!0,this.resourceManager.removeGroupsFromResource(a,this.data.resourceId).subscribe(function(){i.translate.get("DIALOGS.REMOVE_GROUP_FROM_RESOURCE.SUCCESS").subscribe(function(e){i.notificator.showSuccess(e),i.dialogRef.close(!0)})},function(){return i.loading=!1})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.Y36(c.so),d.Y36(c.WI),d.Y36(u.V6),d.Y36(g.sK),d.Y36(r.xk))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-perun-web-apps-remove-group-from-resource-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,t){1&e&&(d.TgZ(0,"div"),d.TgZ(1,"h1",0),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.YNc(4,m,1,0,"mat-spinner",1),d.YNc(5,E,13,9,"div",2),d.TgZ(6,"div",3),d.TgZ(7,"button",4),d.NdJ("click",function(){return t.onCancel()}),d._uU(8),d.ALo(9,"translate"),d.qZA(),d.TgZ(10,"button",5),d.NdJ("click",function(){return t.onSubmit()}),d._uU(11),d.ALo(12,"translate"),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.Tol(t.theme),d.xp6(2),d.Oqu(d.lcZ(3,9,"DIALOGS.REMOVE_GROUP_FROM_RESOURCE.TITLE")),d.xp6(2),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",!t.loading),d.xp6(3),d.hij(" ",d.lcZ(9,11,"DIALOGS.REMOVE_GROUP_FROM_RESOURCE.CANCEL")," "),d.xp6(2),d.Q6J("disabled",t.loading),d.xp6(1),d.hij(" ",d.lcZ(12,13,"DIALOGS.REMOVE_GROUP_FROM_RESOURCE.DELETE")," "))},directives:[c.uh,p.O5,c.H8,h.lW,f.$g,c.xY,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,l.ge,l.ev,l.XQ,l.Gk],pipes:[g.X$],styles:[""]}),t}(),T=s(60611),Z=s(70663),I=s(91058),C=s(78364),_=s(27521),O=s(16073);function y(e,t){1&e&&d._UZ(0,"mat-spinner",3)}function x(e,t){1&e&&(d._uU(0),d.ALo(1,"translate")),2&e&&d.Oqu(d.lcZ(1,1,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.GROUPS"))}function N(e,t){1&e&&(d._uU(0),d.ALo(1,"translate")),2&e&&d.Oqu(d.lcZ(1,1,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.OPTIONS"))}var U=function(){return["select","id","name","description"]};function D(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"mat-horizontal-stepper",5),d.TgZ(2,"mat-step",6),d.YNc(3,x,2,3,"ng-template",7),d.TgZ(4,"perun-web-apps-debounce-filter",8),d.NdJ("filter",function(e){return d.CHM(i),d.oxw().applyFilter(e)}),d.ALo(5,"translate"),d.qZA(),d.TgZ(6,"perun-web-apps-groups-list",9),d.NdJ("page",function(e){return d.CHM(i),d.oxw().pageChanged(e)}),d.qZA(),d.TgZ(7,"div",10),d.TgZ(8,"button",11),d.NdJ("click",function(){return d.CHM(i),d.oxw().onCancel()}),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.TgZ(11,"button",12),d._uU(12),d.ALo(13,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"mat-step"),d.YNc(15,N,2,3,"ng-template",7),d.TgZ(16,"mat-slide-toggle",13),d.NdJ("toggleChange",function(){return d.CHM(i),d.oxw().changeSubgroupsMessage()})("ngModelChange",function(e){return d.CHM(i),d.oxw().autoAssignSubgroups=e}),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.TgZ(19,"div",14),d._UZ(20,"i",15),d.qZA(),d.TgZ(21,"mat-slide-toggle",13),d.NdJ("toggleChange",function(){return d.CHM(i),d.oxw().changeInactiveMessage()})("ngModelChange",function(e){return d.CHM(i),d.oxw().asActive=e}),d._uU(22),d.ALo(23,"translate"),d.qZA(),d.TgZ(24,"div",14),d._uU(25),d.qZA(),d.TgZ(26,"mat-slide-toggle",13),d.NdJ("toggleChange",function(){return d.CHM(i),d.oxw().changeAsyncMessage()})("ngModelChange",function(e){return d.CHM(i),d.oxw().async=e}),d._uU(27),d.ALo(28,"translate"),d.qZA(),d.TgZ(29,"div",14),d._uU(30),d.qZA(),d.TgZ(31,"div",10),d.TgZ(32,"button",11),d.NdJ("click",function(){return d.CHM(i),d.oxw().onCancel()}),d._uU(33),d.ALo(34,"translate"),d.qZA(),d.TgZ(35,"button",16),d._uU(36),d.ALo(37,"translate"),d.qZA(),d.TgZ(38,"button",17),d.NdJ("click",function(){return d.CHM(i),d.oxw().onAdd()}),d._uU(39),d.ALo(40,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.oxw();d.xp6(1),d.Q6J("linear",!0),d.xp6(1),d.Q6J("completed",0!==a.selection.selected.length&&a.canAddGroups()),d.xp6(2),d.s9C("placeholder",d.lcZ(5,25,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.FILTER_DESCRIPTION")),d.xp6(2),d.Q6J("pageSize",a.pageSize)("groups",a.unAssignedGroups)("selection",a.selection)("filter",a.filterValue)("displayedColumns",d.DdM(43,U))("disableRouting",!0)("disableMembers",!1),d.xp6(3),d.hij(" ",d.lcZ(10,27,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.CANCEL_BUTTON")," "),d.xp6(2),d.Q6J("disabled",0===a.selection.selected.length||!a.canAddGroups()),d.xp6(1),d.hij(" ",d.lcZ(13,29,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.NEXT")," "),d.xp6(4),d.Q6J("ngModel",a.autoAssignSubgroups),d.xp6(1),d.hij(" ",d.lcZ(18,31,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.AUTO_SUBGROUPS")," "),d.xp6(3),d.Q6J("innerHTML",a.autoAssignHint,d.oJD),d.xp6(1),d.Q6J("ngModel",a.asActive),d.xp6(1),d.hij(" ",d.lcZ(23,33,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.AS_ACTIVE")," "),d.xp6(3),d.hij(" ",a.asActiveHint," "),d.xp6(1),d.Q6J("ngModel",a.async),d.xp6(1),d.hij(" ",d.lcZ(28,35,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ASYNC_OPT")," "),d.xp6(3),d.hij(" ",a.asyncHint," "),d.xp6(3),d.hij(" ",d.lcZ(34,37,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.CANCEL_BUTTON")," "),d.xp6(3),d.hij(" ",d.lcZ(37,39,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.BACK")," "),d.xp6(3),d.hij(" ",d.lcZ(40,41,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ADD_BUTTON")," ")}}var k=function(){var t=function(){function t(e,a,n,s,r,c,l,u){i(this,t),this.dialogRef=e,this.data=a,this.notificator=n,this.translate=s,this.resourceManager=r,this.tableConfigService=c,this.groupService=l,this.guiAuthResolver=u,this.loading=!1,this.checkGroups=!1,this.async=!0,this.autoAssignSubgroups=!1,this.asActive=!0,this.selection=new o.Ov(!0,[]),this.filterValue="",this.tableId=T.cL}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.theme=this.data.theme,this.resource=this.data.resource,this.autoAssignHint=this.translate.instant("DIALOGS.ASSIGN_GROUP_TO_RESOURCE.AUTO_SUBGROUPS_OFF_HINT"),this.asActiveHint=this.translate.instant("DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ACTIVE_ON_HINT"),this.asyncHint=this.translate.instant("DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ASYNC_ON_HINT"),this.resourceManager.getAssignedGroups(this.resource.id).subscribe(function(i){t.groupService.getAllGroups(t.resource.voId).subscribe(function(a){t.unAssignedGroups=a;var n,s=e(i);try{for(s.s();!(n=s.n()).done;){var r,o=n.value,c=e(a);try{for(c.s();!(r=c.n()).done;){var l=r.value;o.id===l.id&&t.unAssignedGroups.splice(t.unAssignedGroups.indexOf(l),1)}}catch(u){c.e(u)}finally{c.f()}}}catch(u){s.e(u)}finally{s.f()}t.loading=!1},function(){return t.loading=!1})},function(){return t.loading=!1})}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"onAdd",value:function(){var t=this;if(this.checkGroups);else{this.loading=!0;var i,a=[],n=e(this.selection.selected);try{for(n.s();!(i=n.n()).done;){var s=i.value;a.push(s.id)}}catch(r){n.e(r)}finally{n.f()}this.resourceManager.assignGroupsToResource(a,this.resource.id,this.async,!this.asActive,this.autoAssignSubgroups).subscribe(function(){t.translate.get("DIALOGS.ASSIGN_GROUP_TO_RESOURCE.SUCCESS_MESSAGE").subscribe(function(e){t.notificator.showSuccess(e),t.dialogRef.close(!0)})},function(){return t.loading=!1})}}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"canAddGroups",value:function(){var e=this,t=!0;return this.selection.selected.forEach(function(i){e.guiAuthResolver.isAuthorized("assignGroupsToResource_List<Group>_Resource_policy",[e.resource,i])||(t=!1)}),t}},{key:"changeSubgroupsMessage",value:function(){this.autoAssignHint=this.translate.instant(this.autoAssignSubgroups?"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.AUTO_SUBGROUPS_OFF_HINT":"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.AUTO_SUBGROUPS_ON_HINT")}},{key:"changeInactiveMessage",value:function(){this.asActiveHint=this.translate.instant(this.asActive?"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ACTIVE_OFF_HINT":"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ACTIVE_ON_HINT")}},{key:"changeAsyncMessage",value:function(){this.asyncHint=this.translate.instant(this.async?"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ASYNC_OFF_HINT":"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.ASYNC_ON_HINT")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.Y36(c.so),d.Y36(c.WI),d.Y36(u.V6),d.Y36(g.sK),d.Y36(r.xk),d.Y36(T.dB),d.Y36(r.ff),d.Y36(u.x4))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-perun-web-apps-assign-group-to-resource-dialog"]],decls:6,vars:8,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],[3,"linear"],[3,"completed"],["matStepLabel",""],[3,"placeholder","filter"],[3,"pageSize","groups","selection","filter","displayedColumns","disableRouting","disableMembers","page"],["mat-dialog-actions",""],["mat-flat-button","",3,"click"],["mat-flat-button","","type","button","color","accent","matStepperNext","",1,"ml-auto",3,"disabled"],["labelPosition","before",1,"mt-3","slide-text",3,"ngModel","toggleChange","ngModelChange"],[1,"text-muted","new-line","mt-2"],[3,"innerHTML"],["mat-flat-button","","matStepperPrevious","",1,"ml-auto","mr-2"],["mat-flat-button","","type","button","color","accent",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div"),d.TgZ(1,"h1",0),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.YNc(4,y,1,0,"mat-spinner",1),d.YNc(5,D,41,44,"div",2),d.qZA()),2&e&&(d.Tol(t.theme),d.xp6(2),d.Oqu(d.lcZ(3,6,"DIALOGS.ASSIGN_GROUP_TO_RESOURCE.TITLE")),d.xp6(2),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",!t.loading))},directives:[c.uh,p.O5,f.$g,c.xY,Z.Vq,Z.C0,Z.VY,I.P,C.W,c.H8,h.lW,Z.Ic,_.Rr,O.JJ,O.On,Z.fd],pipes:[g.X$],styles:[".slide-text[_ngcontent-%COMP%]{font-size:1.1rem}"]}),t}(),L=s(84140),w=s(67004),G=s(57629),M=s(59403),q=s(36922),Y=s(39571),J=["checkbox"];function P(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"button",9),d.NdJ("click",function(){return d.CHM(i),d.oxw().addGroup()}),d._uU(1),d.ALo(2,"translate"),d.qZA()}2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"))}function Q(e,t){1&e&&d._UZ(0,"mat-spinner",10)}var z=function(e){return[e]},V=function(){return["select","id","indirectGroupAssigment","name","status","description"]};function F(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",11),d.TgZ(1,"perun-web-apps-groups-list",12),d.NdJ("page",function(e){return d.CHM(i),d.oxw().pageChanged(e)})("refreshTable",function(){return d.CHM(i),d.oxw().loadAllGroups()}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw();d.xp6(1),d.Q6J("disableGroups",!0)("groupsToDisableCheckbox",a.groupsToDisable)("pageSize",a.pageSize)("groups",a.assignedGroups)("filter",a.filteredValue)("selection",a.selected)("disableMembers",!1)("resourceId",a.resourceId)("disableRouting",!a.guiAuthResolver.isAuthorized("getGroupById_int_policy",d.VKq(10,z,a.assignedGroups[0])))("displayedColumns",d.DdM(12,V))}}function H(e,t){1&e&&(d.TgZ(0,"app-alert",13),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}var j=function(){var e=function(){function e(t,a,n,s,r,c){i(this,e),this.route=t,this.resourcesManager=a,this.vosManagerService=n,this.tableConfigService=s,this.dialog=r,this.guiAuthResolver=c,this.assignedGroups=[],this.selected=new o.Ov(!0,[]),this.filteredValue="",this.tableId=T.Ad}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe(function(t){e.resourceId=t.resourceId,e.getDataForAuthorization(),e.loadAllGroups()})}},{key:"loadAllGroups",value:function(){var e=this;this.loading=!0,this.resourcesManager.getGroupAssignments(this.resourceId,[w.r.GROUP_SYNC_ENABLED]).subscribe(function(t){e.assignedGroups=t.map(function(e){var t=e.enrichedGroup.group;return t.status=e.status,t.failureCause=e.failureCause,t.sourceGroupId=e.sourceGroupId,t}),e.groupsToDisable=new Set(e.assignedGroups.filter(function(e){return!!e.sourceGroupId}).map(function(e){return e.id})),e.selected.clear(),e.loading=!1})}},{key:"addGroup",value:function(){var e=this,t=(0,L.kZ)();t.width="1000px",t.data={theme:"resource-theme",resource:this.resource},this.dialog.open(k,t).afterClosed().subscribe(function(t){t&&e.loadAllGroups()})}},{key:"removeGroups",value:function(){var e=this,t=(0,L.kZ)();t.width="500px",t.data={resourceId:this.resourceId,groups:this.selected.selected,theme:"resource-theme"},this.dialog.open(R,t).afterClosed().subscribe(function(t){t&&e.loadAllGroups()})}},{key:"canRemoveGroups",value:function(){var e=this,t=!0;return this.selected.selected.forEach(function(i){e.guiAuthResolver.isAuthorized("removeGroupsFromResource_List<Group>_Resource_policy",[e.resource,i])||(t=!1)}),t}},{key:"applyFilter",value:function(e){this.filteredValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"getDataForAuthorization",value:function(){var e=this;this.loadingResource=!0,this.resourcesManager.getResourceById(this.resourceId).subscribe(function(t){e.resource=t,e.loadingResource=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(G.gz),d.Y36(r.xk),d.Y36(r.YF),d.Y36(T.dB),d.Y36(c.uw),d.Y36(u.x4))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(e,t){var i;(1&e&&d.Gf(J,7),2&e)&&(d.iGM(i=d.CRH())&&(t.checkbox=i.first))},decls:14,vars:18,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","mat-flat-button","",1,"ml-2","mr-2",3,"disabled","click"],[3,"matTooltipDisabled","matTooltip"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["alert_type","warn",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"disableGroups","groupsToDisableCheckbox","pageSize","groups","filter","selection","disableMembers","resourceId","disableRouting","displayedColumns","page","refreshTable"],["alert_type","warn"]],template:function(e,t){1&e&&(d.TgZ(0,"h1",0),d._uU(1),d.ALo(2,"translate"),d.qZA(),d.TgZ(3,"perun-web-apps-refresh-button",1),d.NdJ("refresh",function(){return t.loadAllGroups()}),d.qZA(),d.YNc(4,P,3,3,"button",2),d.TgZ(5,"button",3),d.NdJ("click",function(){return t.removeGroups()}),d.TgZ(6,"span",4),d.ALo(7,"translate"),d._uU(8),d.ALo(9,"translate"),d.qZA(),d.qZA(),d.TgZ(10,"perun-web-apps-debounce-filter",5),d.NdJ("filter",function(e){return t.applyFilter(e)}),d.qZA(),d.YNc(11,Q,1,0,"mat-spinner",6),d.YNc(12,F,2,13,"div",7),d.YNc(13,H,3,3,"app-alert",8)),2&e&&(d.xp6(1),d.Oqu(d.lcZ(2,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),d.xp6(3),d.Q6J("ngIf",!t.loadingResource&&t.guiAuthResolver.isAuthorized("assignGroupsToResource_List<Group>_Resource_policy",d.VKq(16,z,t.resource))),d.xp6(1),d.Q6J("disabled",0===t.selected.selected.length||!t.canRemoveGroups()),d.xp6(1),d.s9C("matTooltip",d.lcZ(7,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_TOOLTIP")),d.Q6J("matTooltipDisabled",t.canRemoveGroups()),d.xp6(2),d.hij(" ",d.lcZ(9,14,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP")," "),d.xp6(2),d.Q6J("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),d.xp6(1),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",!t.loading&&0!==t.assignedGroups.length),d.xp6(1),d.Q6J("ngIf",0===t.assignedGroups.length&&!t.loading))},directives:[M.t,p.O5,h.lW,q.gM,I.P,f.$g,C.W,Y.w],pipes:[g.X$],styles:[""]}),e}()},76527:function(e,t,a){"use strict";a.d(t,{H:function(){return h}});var s=a(90474),r=a(54497),o=a(31572),c=a(57629),l=a(61511),u=a(67806),d=a(8557);function g(e,t){1&e&&o._UZ(0,"mat-spinner",2)}function p(e,t){if(1&e&&(o.TgZ(0,"div"),o._UZ(1,"perun-web-apps-menu-buttons-field",3),o.qZA()),2&e){var i=o.oxw();o.xp6(1),o.Q6J("items",i.navItems)("size","small")}}var h=function(){var e=function(){function e(t,a,n){i(this,e),this.resourcesManager=t,this.route=a,this.guiAuthResolver=n,this.navItems=[],this.loading=!1}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.params.subscribe(function(t){e.resourcesManager.getResourceById(t.resourceId).subscribe(function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.snapshot.url[0].path),e.loading=!1},function(){return e.loading=!1})})}},{key:"initItems",value:function(e){var t=e?"/organizations/".concat(this.resource.voId):"/facilities/".concat(this.resource.facilityId);this.navItems=[],this.guiAuthResolver.isAuthorized("getAssignedGroups_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-group",url:"".concat(t,"/resources/").concat(this.resource.id,"/groups"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedServices_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-service",url:"/".concat(t,"/resources/").concat(this.resource.id,"/services"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_SERVICES",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAssignedMembers_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-user",url:"".concat(t,"/resources/").concat(this.resource.id,"/members"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_MEMBERS",style:"resource-btn"}),this.guiAuthResolver.isAuthorized("getAllResourcesTagsForResource_Resource_policy",[this.resource])&&this.navItems.push({cssIcon:"perun-resource-tags",url:"".concat(t,"/resources/").concat(this.resource.id,"/tags"),label:"MENU_ITEMS.RESOURCE.RESOURCE_TAGS",style:"resource-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"".concat(t,"/resources/").concat(this.resource.id,"/attributes"),label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"}),this.guiAuthResolver.isManagerPagePrivileged(this.resource)&&this.navItems.push({cssIcon:"perun-settings2",url:"".concat(t,"/resources/").concat(this.resource.id,"/settings"),label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.xk),o.Y36(c.gz),o.Y36(r.x4))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&o.ekj("router-component",t.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(o.YNc(0,g,1,0,"mat-spinner",0),o.YNc(1,p,2,2,"div",1)),2&e&&(o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngIf",!t.loading))},directives:[l.O5,u.$g,d.L],styles:[""]}),e}()},64359:function(e,t,a){"use strict";a.d(t,{O:function(){return g}});var s=a(90474),r=a(54497),o=a(31572),c=a(57629),l=a(61511),u=a(489);function d(e,t){if(1&e&&o._UZ(0,"app-managers-page",1),2&e){var i=o.oxw();o.Q6J("complementaryObject",i.resource)("complementaryObjectType",i.type)("theme",i.theme)("availableRoles",i.availableRoles)}}var g=function(){var e=function(){function e(t,a,n){i(this,e),this.route=t,this.resourceService=a,this.guiAuthResolver=n,this.availableRoles=[],this.type="Resource",this.theme="resource-theme"}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe(function(t){e.resourceService.getResourceById(t.resourceId).subscribe(function(t){e.resource=t})}),this.guiAuthResolver.assignAvailableRoles(this.availableRoles,"Resource")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.gz),o.Y36(s.xk),o.Y36(r.x4))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-resource-settings-managers"]],decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&o.YNc(0,d,1,4,"app-managers-page",0),2&e&&o.Q6J("ngIf",t.resource)},directives:[l.O5,u.s],styles:[""]}),e}()},22927:function(e,t,a){"use strict";a.d(t,{h:function(){return h}});var s=a(90474),r=a(54497),o=a(31572),c=a(57629),l=a(61511),u=a(67806),d=a(8557);function g(e,t){1&e&&o._UZ(0,"mat-spinner",2)}function p(e,t){if(1&e&&(o.TgZ(0,"div"),o._UZ(1,"perun-web-apps-menu-buttons-field",3),o.qZA()),2&e){var i=o.oxw();o.xp6(1),o.Q6J("items",i.items)("size","small")}}var h=function(){var e=function(){function e(t,a,n){i(this,e),this.route=t,this.resourceManager=a,this.authResolver=n,this.items=[],this.loading=!1}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.route.parent.parent.params.subscribe(function(t){e.resourceManager.getResourceById(t.resourceId).subscribe(function(t){e.resource=t,e.initItems("facilities"!==e.route.parent.parent.parent.snapshot.url[0].path),e.loading=!1},function(){return e.loading=!1})})}},{key:"initItems",value:function(e){this.items=[],this.authResolver.isManagerPagePrivileged(this.resource)&&this.items.push({cssIcon:"perun-manager",url:"".concat(e?"/organizations/".concat(this.resource.voId):"/facilities/".concat(this.resource.facilityId),"/resources/").concat(this.resource.id,"/settings/managers"),label:"MENU_ITEMS.RESOURCE.MANAGERS",style:"resource-btn"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.gz),o.Y36(s.xk),o.Y36(r.x4))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&o.ekj("router-component",t.true)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(o.YNc(0,g,1,0,"mat-spinner",0),o.YNc(1,p,2,2,"div",1)),2&e&&(o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngIf",!t.loading))},directives:[l.O5,u.$g,d.L],styles:[""]}),e}()},77968:function(e,t,a){"use strict";a.d(t,{t:function(){return o}});var n=a(17),s=a(31572),r=a(21575),o=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&s.ekj("router-component",t.true)},decls:1,vars:0,template:function(e,t){1&e&&s._UZ(0,"app-animated-router-outlet")},directives:[r.A],styles:[""],data:{animation:[n.Ji]}}),e}()},53134:function(e,t,a){"use strict";a.d(t,{v:function(){return x}});var s=a(90474),r=a(4230),o=a(60611),c=a(84140),l=a(54497),u=a(6527),d=a(84608),g=a(31572),p=a(61511),h=a(15980),f=a(67806),m=a(4196),A=a(48160);function S(e,t){1&e&&g._UZ(0,"mat-spinner",8)}function v(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"app-resources-tags-list",9),g.NdJ("page",function(e){return g.CHM(i),g.oxw().pageChanged(e)}),g.qZA()}if(2&e){var a=g.oxw();g.Q6J("selection",a.selection)("pageSize",a.pageSize)("resourceTags",a.resourceTags)("filterValue",a.filterValue)("displayedColumns",a.displayedColumns)("entity","resource")}}var b=function(){var e=function(){function e(t,a,n,s){i(this,e),this.dialogRef=t,this.data=a,this.tableConfigService=n,this.resourcesManager=s,this.tableId=o.g,this.selection=new r.Ov(!0,[]),this.resourceTags=[],this.displayedColumns=["select","id","name"]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.theme=this.data.theme,this.voId=this.data.voId,this.resourceId=this.data.resourceId,this.assignedTags=this.data.assignedTags,this.resourcesManager.getAllResourcesTagsForVo(this.voId).subscribe(function(t){e.resourceTags=t.filter(function(t){return e.assignedTags.map(function(e){return e.id}).indexOf(t.id)<=-1}),e.loading=!1})}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSubmit",value:function(e){var t=this;if(0===e.length)return this.dialogRef.close(!0);var i=e.pop();this.resourcesManager.assignResourceTagToResource({resource:this.resourceId,resourceTag:i}).subscribe(function(){t.onSubmit(e)})}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.so),g.Y36(d.WI),g.Y36(o.dB),g.Y36(s.xk))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-add-resource-tag-to-resource-dialog"]],decls:15,vars:15,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"overflow-hidden"],["class","mr-auto ml-auto",4,"ngIf"],[3,"selection","pageSize","resourceTags","filterValue","displayedColumns","entity","page",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"selection","pageSize","resourceTags","filterValue","displayedColumns","entity","page"]],template:function(e,t){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"h1",0),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.TgZ(4,"div",1),g.TgZ(5,"div",2),g.YNc(6,S,1,0,"mat-spinner",3),g.qZA(),g.YNc(7,v,1,6,"app-resources-tags-list",4),g.qZA(),g.TgZ(8,"div",5),g.TgZ(9,"button",6),g.NdJ("click",function(){return t.onCancel()}),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.TgZ(12,"button",7),g.NdJ("click",function(){return t.onSubmit(t.selection.selected)}),g._uU(13),g.ALo(14,"translate"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Tol(t.theme),g.xp6(2),g.Oqu(g.lcZ(3,9,"RESOURCE_DETAIL.TAGS.ADD_TAGS")),g.xp6(4),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading),g.xp6(3),g.hij(" ",g.lcZ(11,11,"RESOURCE_DETAIL.TAGS.CANCEL")," "),g.xp6(2),g.Q6J("disabled",t.loading||0===t.resourceTags.length),g.xp6(1),g.hij(" ",g.lcZ(14,13,"RESOURCE_DETAIL.TAGS.ADD_BUTTON")," "))},directives:[d.uh,d.xY,p.O5,d.H8,h.lW,f.$g,m.o],pipes:[A.X$],styles:[""]}),e}(),E=a(24923),R=a(57629),T=a(59403),Z=a(19139);function I(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",8),g.NdJ("click",function(){return g.CHM(i),g.oxw().create()}),g._uU(1),g.ALo(2,"translate"),g.qZA()}2&e&&(g.xp6(1),g.hij(" ",g.lcZ(2,1,"VO_DETAIL.RESOURCES.TAGS.CREATE_BUTTON"),"\n"))}function C(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",9),g.NdJ("click",function(){return g.CHM(i),g.oxw().addTag()}),g._uU(1),g.ALo(2,"translate"),g.qZA()}2&e&&(g.xp6(1),g.hij(" ",g.lcZ(2,1,"RESOURCE_DETAIL.TAGS.ADD_BUTTON"),"\n"))}function _(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",10),g.NdJ("click",function(){return g.CHM(i),g.oxw().removeTags()}),g._uU(1),g.ALo(2,"translate"),g.qZA()}if(2&e){var a=g.oxw();g.Q6J("disabled",0===a.selection.selected.length),g.xp6(1),g.hij(" ",g.lcZ(2,2,"RESOURCE_DETAIL.TAGS.REMOVE_BUTTON"),"\n")}}function O(e,t){1&e&&g._UZ(0,"mat-spinner",11)}function y(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"app-resources-tags-list",12),g.NdJ("page",function(e){return g.CHM(i),g.oxw().pageChanged(e)}),g.qZA()}if(2&e){var a=g.oxw();g.Q6J("selection",a.selection)("pageSize",a.pageSize)("resourceTags",a.resourceTags)("filterValue",a.filterValue)("displayedColumns",a.displayedColumns)("entity","resource")}}var x=function(){var e=function(){function e(t,a,n,s,c,l,u,d){i(this,e),this.route=t,this.authResolver=a,this.tableConfigService=n,this.resourcesManager=s,this.voService=c,this.dialog=l,this.notificator=u,this.translate=d,this.loading=!1,this.resourceTags=[],this.selection=new r.Ov(!0,[]),this.tableId=o.M8,this.displayedColumns=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe(function(t){e.resourceId=t.resourceId,e.resourcesManager.getResourceById(e.resourceId).subscribe(function(t){e.resource=t,e.updateData()})})}},{key:"removeTags",value:function(){var e=this,t=(0,c.kZ)();t.width="450px",t.data={items:this.selection.selected.map(function(e){return e.tagName}),title:"RESOURCE_DETAIL.TAGS.REMOVE_TAGS_DIALOG_TITLE",description:"RESOURCE_DETAIL.TAGS.REMOVE_TAGS_DIALOG_DESCRIPTION",theme:"resource-theme"},this.dialog.open(u.Tf,t).afterClosed().subscribe(function(t){t&&e.removeTag(e.selection.selected)})}},{key:"removeTag",value:function(e){var t=this;if(0===e.length)return this.notificator.showSuccess(this.translate.instant("RESOURCE_DETAIL.TAGS.REMOVED_SUCCESSFULLY")),this.updateData();var i=e.pop();this.resourcesManager.removeResourceTagFromResource({resource:this.resourceId,resourceTag:i}).subscribe(function(){t.removeTag(e)})}},{key:"addTag",value:function(){var e=this,t=(0,c.kZ)();t.width="600px",t.data={voId:this.resource.voId,resourceId:this.resourceId,assignedTags:this.resourceTags,theme:"resource-theme"},this.dialog.open(b,t).afterClosed().subscribe(function(t){t&&(e.notificator.showSuccess(e.translate.instant("RESOURCE_DETAIL.TAGS.ADDED_SUCCESSFULLY")),e.updateData())})}},{key:"create",value:function(){var e=this,t=(0,c.kZ)();t.width="450px",t.data={voId:this.resource.voId,theme:"resource-theme"},this.dialog.open(E.p,t).afterClosed().subscribe(function(t){t&&(e.translate.get("VO_DETAIL.RESOURCES.TAGS.CREATE_SUCCESS").subscribe(function(t){e.notificator.showSuccess(t)}),e.updateData())})}},{key:"updateData",value:function(){var e=this;this.loading=!0,this.selection.clear(),this.resourcesManager.getAllResourcesTagsForResource(this.resourceId).subscribe(function(t){e.resourceTags=t,e.selection.clear(),e.setAuthRights(),e.loading=!1})}},{key:"setAuthRights",value:function(){var e={id:this.resource.voId,beanName:"Vo"};this.displayedColumns=[],this.createAuth=this.authResolver.isAuthorized("createResourceTag_ResourceTag_Vo_policy",[e]),this.addAuth=this.authResolver.isAuthorized("assignResourceTagToResource_ResourceTag_Resource_policy",[this.resource]),this.removeAuth=this.authResolver.isAuthorized("removeResourceTagFromResource_ResourceTag_Resource_policy",[this.resource]),this.displayedColumns=this.removeAuth?["select","id","name"]:["id","name"]}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(R.gz),g.Y36(l.x4),g.Y36(o.dB),g.Y36(s.xk),g.Y36(s.YF),g.Y36(d.uw),g.Y36(l.V6),g.Y36(A.sK))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-perun-web-apps-resource-tags"]],decls:10,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["mat-flat-button","","class","mr-2","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"selection","pageSize","resourceTags","filterValue","displayedColumns","entity","page",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","warn",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"selection","pageSize","resourceTags","filterValue","displayedColumns","entity","page"]],template:function(e,t){1&e&&(g.TgZ(0,"h1",0),g._uU(1),g.ALo(2,"translate"),g.qZA(),g.TgZ(3,"perun-web-apps-refresh-button",1),g.NdJ("refresh",function(){return t.updateData()}),g.qZA(),g.YNc(4,I,3,3,"button",2),g.YNc(5,C,3,3,"button",3),g.YNc(6,_,3,4,"button",4),g.TgZ(7,"perun-web-apps-immediate-filter",5),g.NdJ("filter",function(e){return t.applyFilter(e)}),g.qZA(),g.YNc(8,O,1,0,"mat-spinner",6),g.YNc(9,y,1,6,"app-resources-tags-list",7)),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,7,"RESOURCE_DETAIL.TAGS.TITLE")),g.xp6(3),g.Q6J("ngIf",t.createAuth),g.xp6(1),g.Q6J("ngIf",t.addAuth),g.xp6(1),g.Q6J("ngIf",t.removeAuth),g.xp6(1),g.Q6J("placeholder","RESOURCE_DETAIL.TAGS.SEARCH"),g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading))},directives:[T.t,p.O5,Z.L,h.lW,f.$g,m.o],pipes:[A.X$],styles:[""]}),e}()},24923:function(e,t,a){"use strict";a.d(t,{p:function(){return A}});var s=a(84608),r=a(90474),o=a(31572),c=a(61511),l=a(15980),u=a(67806),d=a(66283),g=a(80340),p=a(16073),h=a(48160);function f(e,t){1&e&&o._UZ(0,"mat-spinner",6)}function m(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",7),o.TgZ(1,"mat-form-field"),o.TgZ(2,"input",8),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().name=e}),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"mat-error"),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA(),o.qZA()}if(2&e){var a=o.oxw();o.xp6(2),o.s9C("placeholder",o.lcZ(3,3,"DIALOGS.CREATE_RESOURCE_TAG.NAME")),o.Q6J("ngModel",a.name),o.xp6(3),o.Oqu(o.lcZ(6,5,"DIALOGS.CREATE_RESOURCE_TAG.EMPTY_NAME"))}}var A=function(){var e=function(){function e(t,a,n){i(this,e),this.dialogRef=t,this.data=a,this.resourceManager=n,this.name="",this.loading=!1}return n(e,[{key:"ngOnInit",value:function(){this.theme=this.data.theme}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSubmit",value:function(){var e=this;""!==this.name&&(this.loading=!0,this.resourceManager.createResourceTagWithTagName(this.name,this.data.voId).subscribe(function(){e.dialogRef.close(!0)},function(){return e.loading=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.so),o.Y36(s.WI),o.Y36(r.xk))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-create-resource-tag-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"placeholder","ngModel","ngModelChange"]],template:function(e,t){1&e&&(o.TgZ(0,"div"),o.TgZ(1,"h1",0),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,f,1,0,"mat-spinner",1),o.YNc(5,m,7,7,"div",2),o.TgZ(6,"div",3),o.TgZ(7,"button",4),o.NdJ("click",function(){return t.onCancel()}),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.TgZ(10,"button",5),o.NdJ("click",function(){return t.onSubmit()}),o._uU(11),o.ALo(12,"translate"),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.Tol(t.theme),o.xp6(2),o.Oqu(o.lcZ(3,9,"DIALOGS.CREATE_RESOURCE_TAG.TITLE")),o.xp6(2),o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngIf",!t.loading),o.xp6(3),o.hij(" ",o.lcZ(9,11,"DIALOGS.CREATE_RESOURCE_TAG.CANCEL")," "),o.xp6(2),o.Q6J("disabled",t.loading),o.xp6(1),o.hij(" ",o.lcZ(12,13,"DIALOGS.CREATE_RESOURCE_TAG.CREATE")," "))},directives:[s.uh,c.O5,s.H8,l.lW,u.$g,s.xY,d.KE,g.Nt,p.Fj,p.Q7,p.JJ,p.On,d.TO],pipes:[h.X$],styles:[""]}),e}()},489:function(t,a,s){"use strict";s.d(a,{s:function(){return ke}});var r=s(4230),o=s(84608),c=s(54497),l=s(90474),u=s(60611),d=s(67004),g=s(16073),p=s(31572),h=s(48160),f=s(57629),m=s(66283),A=s(4786),S=s(61511),v=s(80340),b=s(15980),E=s(71522),R=s(67806),T=s(39571),Z=s(77889),I=function(){var e=function(){function e(t){i(this,e),this.translate=t,this.prefix="ROLES."}return n(e,[{key:"transform",value:function(e){var t=this.prefix.concat(e);return this.translate.instant(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(h.sK,16))},e.\u0275pipe=p.Yjl({name:"displayedRole",type:e,pure:!0}),e}();function C(e,t){if(1&e&&(p.TgZ(0,"mat-option",15),p._uU(1),p.ALo(2,"displayedRole"),p.qZA()),2&e){var i=t.$implicit;p.Q6J("value",i),p.xp6(1),p.Oqu(p.lcZ(2,2,i))}}function _(e,t){1&e&&p._UZ(0,"mat-spinner",16)}function O(e,t){1&e&&(p.TgZ(0,"app-alert",20),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,1,"DIALOGS.ADD_MANAGERS.NO_USERS_FOUND")," "))}var y=function(){return["select","id","name","email","logins","organization"]};function x(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"app-users-list",21),p.NdJ("page",function(e){return p.CHM(i),p.oxw(2).pageChanged(e)}),p.qZA()}if(2&e){var a=p.oxw(2);p.Q6J("pageSize",a.pageSize)("disableRouting",!0)("selection",a.selection)("displayedColumns",p.DdM(5,y))("users",a.users)}}function N(e,t){if(1&e&&(p.TgZ(0,"div",17),p.YNc(1,O,3,3,"app-alert",18),p.YNc(2,x,1,6,"app-users-list",19),p.qZA()),2&e){var i=p.oxw();p.xp6(1),p.Q6J("ngIf",0===i.users.length&&i.firstSearchDone),p.xp6(1),p.Q6J("ngIf",0!==i.users.length)}}var U=function(){var e=function(){function e(t,a,n,s,o,c,l,d,g,p){var h=this;i(this,e),this.dialogRef=t,this.data=a,this.authzService=n,this.usersService=s,this.translate=o,this.notificator=c,this.storeService=l,this.route=d,this.router=g,this.tableConfigService=p,this.selection=new r.Ov(!0,[]),this.users=[],this.firstSearchDone=!1,this.tableId=u.H2,o.get("DIALOGS.ADD_MANAGERS.TITLE").subscribe(function(e){return h.title=e}),o.get("DIALOGS.ADD_MANAGERS.SUCCESS").subscribe(function(e){return h.successMessage=e})}return n(e,[{key:"ngOnInit",value:function(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.theme=this.data.theme,this.availableRoles=this.data.availableRoles,this.selectedRole=this.data.selectedRole,this.searchCtrl=new g.NI("",[g.kI.required,g.kI.pattern(".*[\\S]+.*")])}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSubmit",value:function(){var e=this;this.loading=!0,this.authzService.setRoleWithUserComplementaryObject({role:this.selectedRole,users:this.selection.selected.map(function(e){return e.id}),complementaryObject:this.data.complementaryObject}).subscribe(function(){e.notificator.showSuccess(e.successMessage),e.loading=!1,e.dialogRef.close(!0)},function(){return e.loading=!1})}},{key:"onSearchByString",value:function(){var e=this;if(this.searchCtrl.invalid)this.searchCtrl.markAllAsTouched();else{this.loading=!0,this.selection.clear();var t=[d.r.USER_DEF_ORGANIZATION,d.r.USER_DEF_PREFERRED_MAIL];t=t.concat(this.storeService.getLoginAttributeNames()),this.usersService.findRichUsersWithAttributes(this.searchCtrl.value,t).subscribe(function(t){e.users=t,e.loading=!1,e.firstSearchDone=!0},function(){return e.loading=!1})}}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(o.so),p.Y36(o.WI),p.Y36(l.Ct),p.Y36(l.Fv),p.Y36(h.sK),p.Y36(c.V6),p.Y36(c.d6),p.Y36(f.gz),p.Y36(f.F0),p.Y36(u.dB))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-add-manager-dialog"]],decls:32,vars:31,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"inline-dialog-items"],[1,"mr-2"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-2","w-100"],["matInput","","autocomplete","false",3,"placeholder","formControl","keyup.enter"],["mat-flat-button","","color","accent",1,"ml-auto",3,"disabled","click"],[1,"overflow-hidden"],["class","mr-auto ml-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[3,"value"],[1,"mr-auto","ml-auto"],[1,"mt-3"],["alert_type","warn",4,"ngIf"],[3,"pageSize","disableRouting","selection","displayedColumns","users","page",4,"ngIf"],["alert_type","warn"],[3,"pageSize","disableRouting","selection","displayedColumns","users","page"]],template:function(e,t){1&e&&(p.TgZ(0,"div"),p.TgZ(1,"h1",0),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"div",1),p.TgZ(5,"div",2),p.TgZ(6,"mat-form-field",3),p.TgZ(7,"mat-label"),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"mat-select",4),p.NdJ("valueChange",function(e){return t.selectedRole=e}),p.YNc(11,C,3,4,"mat-option",5),p.qZA(),p.qZA(),p.TgZ(12,"mat-form-field",6),p.TgZ(13,"label"),p.TgZ(14,"input",7),p.NdJ("keyup.enter",function(){return t.onSearchByString()}),p.ALo(15,"translate"),p.qZA(),p.qZA(),p.TgZ(16,"mat-error"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(19,"button",8),p.NdJ("click",function(){return t.onSearchByString()}),p._uU(20),p.ALo(21,"translate"),p.qZA(),p.TgZ(22,"div",9),p.YNc(23,_,1,0,"mat-spinner",10),p.qZA(),p.YNc(24,N,3,2,"div",11),p.qZA(),p.TgZ(25,"div",12),p.TgZ(26,"button",13),p.NdJ("click",function(){return t.onCancel()}),p._uU(27),p.ALo(28,"translate"),p.qZA(),p.TgZ(29,"button",14),p.NdJ("click",function(){return t.onSubmit()}),p._uU(30),p.ALo(31,"translate"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.Tol(t.theme),p.xp6(2),p.Oqu(p.lcZ(3,17,"DIALOGS.ADD_MANAGERS.TITLE")),p.xp6(6),p.Oqu(p.lcZ(9,19,"SHARED.COMPONENTS.MANAGERS_PAGE.SELECT_ROLE")),p.xp6(2),p.Q6J("value",t.selectedRole),p.xp6(1),p.Q6J("ngForOf",t.availableRoles),p.xp6(3),p.s9C("placeholder",p.lcZ(15,21,"DIALOGS.ADD_MANAGERS.DESCRIPTION")),p.Q6J("formControl",t.searchCtrl),p.xp6(3),p.hij(" ",p.lcZ(18,23,"DIALOGS.ADD_MANAGERS.EMPTY_SEARCH_MESSAGE")," "),p.xp6(2),p.Q6J("disabled",t.loading),p.xp6(1),p.hij(" ",p.lcZ(21,25,"DIALOGS.ADD_MANAGERS.SEARCH")," "),p.xp6(3),p.Q6J("ngIf",t.loading),p.xp6(1),p.Q6J("ngIf",null!==t.users&&!t.loading),p.xp6(3),p.hij(" ",p.lcZ(28,27,"DIALOGS.ADD_MANAGERS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",0===t.selection.selected.length||void 0===t.selectedRole||t.loading),p.xp6(1),p.hij(" ",p.lcZ(31,29,"DIALOGS.ADD_MANAGERS.CREATE")," "))},directives:[o.uh,o.xY,m.KE,m.hX,A.gD,S.sg,v.Nt,g.Fj,g.JJ,g.oH,m.TO,b.lW,S.O5,o.H8,E.ey,R.$g,T.w,Z.C],pipes:[h.X$,I],styles:[".inline-dialog-items[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]}),e}(),D=s(67033);function k(e,t){1&e&&p._UZ(0,"th",14)}function L(e,t){if(1&e&&(p.TgZ(0,"td",15),p._uU(1),p.qZA()),2&e){var i=t.$implicit;p.xp6(1),p.AsE(" ",i.firstName," ",i.lastName,"")}}function w(e,t){1&e&&p._UZ(0,"tr",16)}function G(e,t){1&e&&p._UZ(0,"tr",17)}function M(e,t){if(1&e&&(p.TgZ(0,"div",6),p.TgZ(1,"p"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"div",7),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"table",8),p.ynx(8,9),p.YNc(9,k,1,0,"th",10),p.YNc(10,L,2,2,"td",11),p.BQk(),p.YNc(11,w,1,0,"tr",12),p.YNc(12,G,1,0,"tr",13),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(2),p.hij(" ",p.lcZ(3,5,"DIALOGS.REMOVE_MANAGERS.DESCRIPTION")," "),p.xp6(3),p.hij(" ",p.lcZ(6,7,"DIALOGS.REMOVE_MANAGERS.ASK")," "),p.xp6(2),p.Q6J("dataSource",i.dataSource),p.xp6(4),p.Q6J("matHeaderRowDef",i.displayedColumns),p.xp6(1),p.Q6J("matRowDefColumns",i.displayedColumns)}}function q(e,t){1&e&&p._UZ(0,"mat-spinner",18)}var Y=function(){var e=function(){function e(t,a,n,s,r){i(this,e),this.dialogRef=t,this.data=a,this.notificator=n,this.translate=s,this.authzService=r,this.displayedColumns=["name"]}return n(e,[{key:"ngOnInit",value:function(){this.dataSource=new D.by(this.data.managers),this.theme=this.data.theme}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSubmit",value:function(){var e=this;this.loading=!0,this.authzService.unsetRoleWithUserComplementaryObject({role:this.data.role,users:this.data.managers.map(function(e){return e.id}),complementaryObject:this.data.complementaryObject}).subscribe(function(){e.translate.get("DIALOGS.REMOVE_MANAGERS.SUCCESS").subscribe(function(t){e.notificator.showSuccess(t),e.loading=!1,e.dialogRef.close(!0)},function(){return e.loading=!1})},function(){return e.loading=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(o.so),p.Y36(o.WI),p.Y36(c.V6),p.Y36(h.sK),p.Y36(l.Ct))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-remove-manager-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["mat-dialog-content","",4,"ngIf"],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],[1,"mr-auto","ml-auto"]],template:function(e,t){1&e&&(p.TgZ(0,"div"),p.TgZ(1,"h1",0),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.YNc(4,M,13,9,"div",1),p.YNc(5,q,1,0,"mat-spinner",2),p.TgZ(6,"div",3),p.TgZ(7,"button",4),p.NdJ("click",function(){return t.onCancel()}),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"button",5),p.NdJ("click",function(){return t.onSubmit()}),p._uU(11),p.ALo(12,"translate"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.Tol(t.theme),p.xp6(2),p.Oqu(p.lcZ(3,9,"DIALOGS.REMOVE_MANAGERS.TITLE")),p.xp6(2),p.Q6J("ngIf",!t.loading),p.xp6(1),p.Q6J("ngIf",t.loading),p.xp6(3),p.hij(" ",p.lcZ(9,11,"DIALOGS.REMOVE_MANAGERS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",t.loading),p.xp6(1),p.hij(" ",p.lcZ(12,13,"DIALOGS.REMOVE_MANAGERS.DELETE")," "))},directives:[o.uh,S.O5,o.H8,b.lW,o.xY,D.BZ,D.w1,D.fO,D.Dz,D.as,D.nj,D.ge,D.ev,D.XQ,D.Gk,R.$g],pipes:[h.X$],styles:[""]}),e}();function J(e,t){1&e&&p._UZ(0,"mat-spinner",6)}function P(e,t){1&e&&p._UZ(0,"th",15)}function Q(e,t){if(1&e&&(p.TgZ(0,"td",16),p._uU(1),p.qZA()),2&e){var i=t.$implicit;p.xp6(1),p.hij(" ",i.name,"")}}function z(e,t){1&e&&p._UZ(0,"tr",17)}function V(e,t){1&e&&p._UZ(0,"tr",18)}function F(e,t){if(1&e&&(p.TgZ(0,"div",7),p.TgZ(1,"p"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"div",8),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"table",9),p.ynx(8,10),p.YNc(9,P,1,0,"th",11),p.YNc(10,Q,2,1,"td",12),p.BQk(),p.YNc(11,z,1,0,"tr",13),p.YNc(12,V,1,0,"tr",14),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(2),p.hij(" ",p.lcZ(3,5,"DIALOGS.REMOVE_GROUPS.DESCRIPTION")," "),p.xp6(3),p.hij(" ",p.lcZ(6,7,"DIALOGS.REMOVE_GROUPS.ASK")," "),p.xp6(2),p.Q6J("dataSource",i.dataSource),p.xp6(4),p.Q6J("matHeaderRowDef",i.displayedColumns),p.xp6(1),p.Q6J("matRowDefColumns",i.displayedColumns)}}var H=function(){var e=function(){function e(t,a,n,s,r){i(this,e),this.dialogRef=t,this.data=a,this.notificator=n,this.translate=s,this.authzService=r,this.displayedColumns=["name"]}return n(e,[{key:"ngOnInit",value:function(){this.dataSource=new D.by(this.data.groups),this.theme=this.data.theme}},{key:"onCancel",value:function(){this.dialogRef.close(!1)}},{key:"onSubmit",value:function(){var e=this;this.loading=!0,this.authzService.unsetRoleWithGroupComplementaryObject({role:this.data.role,authorizedGroups:this.data.groups.map(function(e){return e.id}),complementaryObject:this.data.complementaryObject}).subscribe(function(){e.translate.get("DIALOGS.REMOVE_GROUPS.SUCCESS").subscribe(function(t){e.notificator.showSuccess(t),e.loading=!1,e.dialogRef.close(!0)},function(){return e.loading=!1})},function(){return e.loading=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(o.so),p.Y36(o.WI),p.Y36(c.V6),p.Y36(h.sK),p.Y36(l.Ct))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-remove-group-manager-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,t){1&e&&(p.TgZ(0,"div"),p.TgZ(1,"h1",0),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.YNc(4,J,1,0,"mat-spinner",1),p.YNc(5,F,13,9,"div",2),p.TgZ(6,"div",3),p.TgZ(7,"button",4),p.NdJ("click",function(){return t.onCancel()}),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"button",5),p.NdJ("click",function(){return t.onSubmit()}),p._uU(11),p.ALo(12,"translate"),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.Tol(t.theme),p.xp6(2),p.Oqu(p.lcZ(3,9,"DIALOGS.REMOVE_GROUPS.TITLE")),p.xp6(2),p.Q6J("ngIf",t.loading),p.xp6(1),p.Q6J("ngIf",!t.loading),p.xp6(3),p.hij(" ",p.lcZ(9,11,"DIALOGS.REMOVE_GROUPS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",t.loading),p.xp6(1),p.hij(" ",p.lcZ(12,13,"DIALOGS.REMOVE_GROUPS.DELETE")," "))},directives:[o.uh,S.O5,o.H8,b.lW,R.$g,o.xY,D.BZ,D.w1,D.fO,D.Dz,D.as,D.nj,D.ge,D.ev,D.XQ,D.Gk],pipes:[h.X$],styles:[""]}),e}(),j=s(56238),B=s(79996),$=s(40084),X=s(91058),W=s(78364);function K(e,t){if(1&e&&(p.TgZ(0,"mat-option",17),p._uU(1),p.ALo(2,"displayedRole"),p.qZA()),2&e){var i=t.$implicit;p.Q6J("value",i),p.xp6(1),p.Oqu(p.lcZ(2,2,i))}}function ee(e,t){if(1&e&&(p.TgZ(0,"mat-option",17),p._uU(1),p.qZA()),2&e){var i=t.$implicit;p.Q6J("value",i),p.xp6(1),p.hij(" ",i.name," ")}}function te(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"perun-web-apps-debounce-filter",18),p.NdJ("filter",function(e){return p.CHM(i),p.oxw().applyFilter(e)}),p.ALo(1,"translate"),p.qZA()}2&e&&p.s9C("placeholder",p.lcZ(1,1,"DIALOGS.ADD_GROUPS.FILTER_GROUPS"))}function ie(e,t){1&e&&p._UZ(0,"mat-spinner",19)}var ae=function(){return["select","id","name","description"]};function ne(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",20),p.TgZ(1,"perun-web-apps-groups-list",21),p.NdJ("page",function(e){return p.CHM(i),p.oxw().pageChanged(e)}),p.qZA(),p.qZA()}if(2&e){var a=p.oxw();p.xp6(1),p.Q6J("pageSize",a.pageSize)("disableRouting",!0)("displayedColumns",p.DdM(7,ae))("selection",a.selection)("filter",a.filterValue)("groups",a.groups)("disableMembers",!1)}}var se=function(){var e=function(){function e(t,a,n,s,o,c,l,d,p,h){var f=this;i(this,e),this.dialogRef=t,this.data=a,this.authzService=n,this.voService=s,this.groupService=o,this.translate=c,this.notificator=l,this.route=d,this.tableConfigService=p,this.router=h,this.searchString="",this.selection=new r.Ov(!0,[]),this.groups=[],this.vos=[],this.filterValue="",this.myControl=new g.NI,this.firstSearchDone=!1,this.tableId=u.kZ,c.get("DIALOGS.ADD_GROUPS.TITLE").subscribe(function(e){return f.title=e}),c.get("DIALOGS.ADD_GROUPS.SUCCESS").subscribe(function(e){return f.successMessage=e})}return n(e,[{key:"displayFn",value:function(e){return e?e.name:null}},{key:"onCancel",value:function(){this.dialogRef.close()}},{key:"onSubmit",value:function(){var e=this;this.loading=!0,this.authzService.setRoleWithGroupComplementaryObject({role:this.selectedRole,authorizedGroups:this.selection.selected.map(function(e){return e.id}),complementaryObject:this.data.complementaryObject}).subscribe(function(){e.notificator.showSuccess(e.successMessage),e.loading=!1,e.dialogRef.close()},function(){return e.loading=!1})}},{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.availableRoles=this.data.availableRoles,this.selectedRole=this.data.selectedRole,this.theme=this.data.theme,this.voService.getMyVos().subscribe(function(t){e.filteredOptions=e.myControl.valueChanges.pipe((0,j.O)(""),(0,B.U)(function(t){return e._filter(t)})),e.vos=t,e.loading=!1},function(){return e.loading=!1})}},{key:"_filter",value:function(e){var t="string"==typeof e?e.toLowerCase():e.name.toLowerCase;return this.vos.filter(function(e){return e.name.toLowerCase().includes(t)})}},{key:"showVoGroups",value:function(e){var t=this;this.loading=!0,this.groupService.getAllGroups(e.option.value.id).subscribe(function(e){t.groups=e,t.loading=!1,t.firstSearchDone=!0},function(){return t.loading=!1})}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"applyFilter",value:function(e){this.filterValue=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(o.so),p.Y36(o.WI),p.Y36(l.Ct),p.Y36(l.YF),p.Y36(l.ff),p.Y36(h.sK),p.Y36(c.V6),p.Y36(f.gz),p.Y36(u.dB),p.Y36(f.F0))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-add-group-manager-dialog"]],decls:33,vars:33,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"inline-dialog-items"],[1,"mr-2"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-2","w-75"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"placeholder","filter",4,"ngIf"],[1,"overflow-hidden"],["class","mr-auto ml-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[3,"value"],[3,"placeholder","filter"],[1,"mr-auto","ml-auto"],[1,"mt-3"],[3,"pageSize","disableRouting","displayedColumns","selection","filter","groups","disableMembers","page"]],template:function(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"h1",0),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"div",1),p.TgZ(5,"div",2),p.TgZ(6,"mat-form-field",3),p.TgZ(7,"mat-label"),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"mat-select",4),p.NdJ("valueChange",function(e){return t.selectedRole=e}),p.YNc(11,K,3,4,"mat-option",5),p.qZA(),p.qZA(),p.TgZ(12,"mat-form-field",6),p.TgZ(13,"mat-label"),p._uU(14),p.ALo(15,"translate"),p.qZA(),p._UZ(16,"input",7),p.ALo(17,"translate"),p.TgZ(18,"mat-autocomplete",8,9),p.NdJ("optionSelected",function(e){return t.showVoGroups(e)}),p.YNc(20,ee,2,2,"mat-option",5),p.ALo(21,"async"),p.qZA(),p.qZA(),p.qZA(),p.YNc(22,te,2,3,"perun-web-apps-debounce-filter",10),p.TgZ(23,"div",11),p.YNc(24,ie,1,0,"mat-spinner",12),p.qZA(),p.YNc(25,ne,2,8,"div",13),p.qZA(),p.TgZ(26,"div",14),p.TgZ(27,"button",15),p.NdJ("click",function(){return t.onCancel()}),p._uU(28),p.ALo(29,"translate"),p.qZA(),p.TgZ(30,"button",16),p.NdJ("click",function(){return t.onSubmit()}),p._uU(31),p.ALo(32,"translate"),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.MAs(19);p.Tol(t.theme),p.xp6(2),p.Oqu(p.lcZ(3,19,"DIALOGS.ADD_GROUPS.TITLE")),p.xp6(6),p.Oqu(p.lcZ(9,21,"SHARED.COMPONENTS.MANAGERS_PAGE.SELECT_ROLE")),p.xp6(2),p.Q6J("value",t.selectedRole),p.xp6(1),p.Q6J("ngForOf",t.availableRoles),p.xp6(3),p.Oqu(p.lcZ(15,23,"DIALOGS.ADD_GROUPS.SELECT_VO")),p.xp6(2),p.s9C("placeholder",p.lcZ(17,25,"DIALOGS.ADD_GROUPS.SELECT_VO")),p.Q6J("formControl",t.myControl)("matAutocomplete",i),p.xp6(2),p.Q6J("displayWith",t.displayFn),p.xp6(2),p.Q6J("ngForOf",p.lcZ(21,27,t.filteredOptions)),p.xp6(2),p.Q6J("ngIf",null!==t.groups&&t.groups.length>0&&!t.loading),p.xp6(2),p.Q6J("ngIf",t.loading),p.xp6(1),p.Q6J("ngIf",null!==t.groups&&!t.loading),p.xp6(3),p.hij(" ",p.lcZ(29,29,"DIALOGS.ADD_MANAGERS.CANCEL")," "),p.xp6(2),p.Q6J("disabled",0===t.selection.selected.length||t.loading),p.xp6(1),p.hij(" ",p.lcZ(32,31,"DIALOGS.ADD_MANAGERS.CREATE")," ")}},directives:[o.uh,o.xY,m.KE,m.hX,A.gD,S.sg,v.Nt,g.Fj,$.ZL,g.JJ,g.oH,$.XC,S.O5,o.H8,b.lW,E.ey,X.P,R.$g,W.W],pipes:[h.X$,S.Ov,I],styles:[""]}),e}(),re=s(84140),oe=s(55109),ce=s(59403);function le(e,t){1&e&&(p._uU(0),p.ALo(1,"translate")),2&e&&p.hij(" ",p.lcZ(1,1,"SHARED.COMPONENTS.MANAGERS_PAGE.USER")," ")}function ue(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"perun-web-apps-refresh-button",11),p.NdJ("refresh",function(){return p.CHM(i),p.oxw(2).refreshUsers()}),p.qZA()}}function de(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).addManager()}),p._uU(1),p.ALo(2,"translate"),p.qZA()}2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,1,"SHARED.COMPONENTS.MANAGERS_PAGE.ADD")," "))}function ge(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",13),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).removeManager()}),p._uU(1),p.ALo(2,"translate"),p.qZA()}if(2&e){var a=p.oxw(2);p.Q6J("disabled",0===a.selectionUsers.selected.length),p.xp6(1),p.hij(" ",p.lcZ(2,2,"SHARED.COMPONENTS.MANAGERS_PAGE.REMOVE")," ")}}function pe(e,t){if(1&e&&(p.TgZ(0,"mat-option",17),p._uU(1),p.ALo(2,"displayedRole"),p.qZA()),2&e){var i=t.$implicit;p.Q6J("value",i),p.xp6(1),p.Oqu(p.lcZ(2,2,i))}}function he(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"mat-form-field",14),p.TgZ(1,"mat-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"mat-select",15),p.NdJ("valueChange",function(e){return p.CHM(i),p.oxw(2).selectedRole=e})("selectionChange",function(){return p.CHM(i),p.oxw(2).refreshUsers()}),p.YNc(5,pe,3,4,"mat-option",16),p.qZA(),p.qZA()}if(2&e){var a=p.oxw(2);p.xp6(2),p.Oqu(p.lcZ(3,3,"SHARED.COMPONENTS.MANAGERS_PAGE.SELECT_ROLE")),p.xp6(2),p.Q6J("value",a.selectedRole),p.xp6(1),p.Q6J("ngForOf",a.availableRoles)}}function fe(e,t){1&e&&p._UZ(0,"mat-spinner",18)}var me=function(){return["select","id","name","email","logins","organization"]},Ae=function(){return["id","name","email","logins","organization"]};function Se(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"app-users-list",20),p.NdJ("page",function(e){return p.CHM(i),p.oxw(3).pageChanged(e)}),p.qZA()}if(2&e){var a=p.oxw(3);p.Q6J("pageSize",a.pageSize)("users",a.managers)("disableRouting",!a.routeAuth)("displayedColumns",a.manageAuth?p.DdM(5,me):p.DdM(6,Ae))("selection",a.selectionUsers)}}function ve(e,t){if(1&e&&(p.TgZ(0,"div"),p.YNc(1,Se,1,7,"app-users-list",19),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.Q6J("ngIf",i.managers)}}function be(e,t){if(1&e&&(p.YNc(0,ue,1,0,"perun-web-apps-refresh-button",5),p.YNc(1,de,3,3,"button",6),p.YNc(2,ge,3,4,"button",7),p.YNc(3,he,6,5,"mat-form-field",8),p.YNc(4,fe,1,0,"mat-spinner",9),p.YNc(5,ve,2,1,"div",10)),2&e){var i=p.oxw();p.Q6J("ngIf",!i.loading),p.xp6(1),p.Q6J("ngIf",!i.loading&&i.manageAuth),p.xp6(1),p.Q6J("ngIf",!i.loading&&i.manageAuth),p.xp6(1),p.Q6J("ngIf",!i.loading),p.xp6(1),p.Q6J("ngIf",i.loading),p.xp6(1),p.Q6J("ngIf",!i.loading)}}function Ee(e,t){1&e&&(p._uU(0),p.ALo(1,"translate")),2&e&&p.hij(" ",p.lcZ(1,1,"SHARED.COMPONENTS.MANAGERS_PAGE.GROUP")," ")}function Re(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"perun-web-apps-refresh-button",11),p.NdJ("refresh",function(){return p.CHM(i),p.oxw(2).refreshGroups()}),p.qZA()}}function Te(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).addGroup()}),p._uU(1),p.ALo(2,"translate"),p.qZA()}2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,1,"SHARED.COMPONENTS.MANAGERS_PAGE.ADD")," "))}function Ze(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",13),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).removeGroup()}),p._uU(1),p.ALo(2,"translate"),p.qZA()}if(2&e){var a=p.oxw(2);p.Q6J("disabled",0===a.selectionGroups.selected.length),p.xp6(1),p.hij(" ",p.lcZ(2,2,"SHARED.COMPONENTS.MANAGERS_PAGE.REMOVE")," ")}}function Ie(e,t){if(1&e&&(p.TgZ(0,"mat-option",17),p._uU(1),p.ALo(2,"displayedRole"),p.qZA()),2&e){var i=t.$implicit;p.Q6J("value",i),p.xp6(1),p.Oqu(p.lcZ(2,2,i))}}function Ce(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"mat-form-field",14),p.TgZ(1,"mat-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"mat-select",15),p.NdJ("valueChange",function(e){return p.CHM(i),p.oxw(2).selectedRole=e})("selectionChange",function(){return p.CHM(i),p.oxw(2).refreshGroups()}),p.YNc(5,Ie,3,4,"mat-option",16),p.qZA(),p.qZA()}if(2&e){var a=p.oxw(2);p.xp6(2),p.Oqu(p.lcZ(3,3,"SHARED.COMPONENTS.MANAGERS_PAGE.SELECT_ROLE")),p.xp6(2),p.Q6J("value",a.selectedRole),p.xp6(1),p.Q6J("ngForOf",a.availableRoles)}}function _e(e,t){1&e&&p._UZ(0,"mat-spinner",18)}var Oe=function(){return["select","id","vo","name","description"]},ye=function(){return["id","vo","name","description"]};function xe(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"perun-web-apps-groups-list",22),p.NdJ("page",function(e){return p.CHM(i),p.oxw(3).pageChanged(e)}),p.qZA()}if(2&e){var a=p.oxw(3);p.Q6J("pageSize",a.pageSize)("displayedColumns",a.manageAuth?p.DdM(5,Oe):p.DdM(6,ye))("groups",a.groups)("selection",a.selectionGroups)("disableMembers",!1)}}function Ne(e,t){if(1&e&&(p.TgZ(0,"div"),p.YNc(1,xe,1,7,"perun-web-apps-groups-list",21),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.Q6J("ngIf",i.groups)}}function Ue(e,t){if(1&e&&(p.YNc(0,Re,1,0,"perun-web-apps-refresh-button",5),p.YNc(1,Te,3,3,"button",6),p.YNc(2,Ze,3,4,"button",7),p.YNc(3,Ce,6,5,"mat-form-field",8),p.YNc(4,_e,1,0,"mat-spinner",9),p.YNc(5,Ne,2,1,"div",10)),2&e){var i=p.oxw();p.Q6J("ngIf",!i.loading),p.xp6(1),p.Q6J("ngIf",!i.loading&&i.manageAuth),p.xp6(1),p.Q6J("ngIf",!i.loading&&i.manageAuth),p.xp6(1),p.Q6J("ngIf",!i.loading),p.xp6(1),p.Q6J("ngIf",i.loading),p.xp6(1),p.Q6J("ngIf",!i.loading)}}function De(e,t){1&e&&(p.TgZ(0,"app-alert",23),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,1,"SHARED.COMPONENTS.MANAGERS_PAGE.NO_AVAILABLE_ROLES"),"\n"))}var ke=function(){var t=function(){function t(e,a,n,s,o){i(this,t),this.dialog=e,this.tableConfigService=a,this.authzService=n,this.storeService=s,this.guiAuthResolver=o,this.groups=null,this.managers=null,this.selectionUsers=new r.Ov(!0,[]),this.selectionGroups=new r.Ov(!0,[]),this.selectedMode="",this.loading=!1,this.tableId=u.HC,this.availableRolesPrivileges=new Map}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.guiAuthResolver.getRolesAuthorization(this.availableRoles,this.complementaryObject,this.availableRolesPrivileges),this.availableRoles=this.availableRoles.filter(function(t){return e.availableRolesPrivileges.get(t).readAuth}),0!==this.availableRoles.length&&(this.selectedRole=this.availableRoles[0]),this.routeAuth=this.guiAuthResolver.isPerunAdminOrObserver(),this.refreshUsers()}},{key:"changeRolePrivileges",value:function(){this.manageAuth=this.availableRolesPrivileges.get(this.selectedRole).manageAuth,this.roleModes=this.availableRolesPrivileges.get(this.selectedRole).modes;var t,i=!1,a=e(this.roleModes);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(this.selectedMode===n.toLowerCase()){i=!0;break}}}catch(s){a.e(s)}finally{a.f()}i||(this.selectedMode=this.roleModes[0].toLowerCase())}},{key:"tabChanged",value:function(e){this.loading=!0,0===e.index?(this.selectedMode="user",this.refreshUsers()):(this.selectedMode="group",this.refreshGroups())}},{key:"refreshUsers",value:function(){var e=this;this.loading=!0,this.changeRolePrivileges();var t=[d.r.USER_DEF_ORGANIZATION,d.r.USER_DEF_PREFERRED_MAIL];t=t.concat(this.storeService.getLoginAttributeNames()),this.authzService.getAuthzRichAdmins(this.selectedRole,this.complementaryObject.id,this.complementaryObjectType,t,!1,!0).subscribe(function(t){e.managers=t,e.selectionUsers.clear(),e.loading=!1},function(){e.loading=!1})}},{key:"refreshGroups",value:function(){var e=this;this.loading=!0,this.changeRolePrivileges(),this.authzService.getAuthzAdminGroups(this.selectedRole,this.complementaryObject.id,this.complementaryObjectType).subscribe(function(t){e.groups=t,e.selectionGroups.clear(),e.loading=!1},function(){e.loading=!1})}},{key:"addManager",value:function(){var e=this,t=(0,re.kZ)();t.width="1000px",t.data={complementaryObject:this.complementaryObject,theme:this.theme,availableRoles:this.availableRoles,selectedRole:this.selectedRole},this.dialog.open(U,t).afterClosed().subscribe(function(t){t&&e.refreshUsers()})}},{key:"removeManager",value:function(){var e=this,t=(0,re.kZ)();t.width="450px",t.data={managers:this.selectionUsers.selected,complementaryObject:this.complementaryObject,role:this.selectedRole,theme:this.theme},this.dialog.open(Y,t).afterClosed().subscribe(function(t){t&&e.refreshUsers()})}},{key:"removeGroup",value:function(){var e=this,t=(0,re.kZ)();t.width="450px",t.data={groups:this.selectionGroups.selected,complementaryObject:this.complementaryObject,role:this.selectedRole,theme:this.theme},this.dialog.open(H,t).afterClosed().subscribe(function(t){t&&e.refreshGroups()})}},{key:"addGroup",value:function(){var e=this,t=(0,re.kZ)();t.width="1000px",t.data={complementaryObject:this.complementaryObject,availableRoles:this.availableRoles,theme:this.theme,selectedRole:this.selectedRole},this.dialog.open(se,t).afterClosed().subscribe(function(t){t&&e.refreshGroups()})}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(o.uw),p.Y36(u.dB),p.Y36(l.Ct),p.Y36(c.d6),p.Y36(c.x4))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-managers-page"]],hostVars:2,hostBindings:function(e,t){2&e&&p.ekj("router-component",t.true)},inputs:{complementaryObject:"complementaryObject",availableRoles:"availableRoles",complementaryObjectType:"complementaryObjectType",theme:"theme"},decls:11,vars:4,consts:[[1,"page-subtitle"],[3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["alert_type","warn",4,"ngIf"],["class","mt-2",3,"refresh",4,"ngIf"],["mat-flat-button","","color","accent","class","mr-2 mt-2",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","mr-2 mt-2",3,"disabled","click",4,"ngIf"],["class","mr-2 mt-2",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"mt-2",3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"click"],["mat-flat-button","","color","warn",1,"mr-2","mt-2",3,"disabled","click"],[1,"mr-2","mt-2"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ml-auto","mr-auto"],[3,"pageSize","users","disableRouting","displayedColumns","selection","page",4,"ngIf"],[3,"pageSize","users","disableRouting","displayedColumns","selection","page"],[3,"pageSize","displayedColumns","groups","selection","disableMembers","page",4,"ngIf"],[3,"pageSize","displayedColumns","groups","selection","disableMembers","page"],["alert_type","warn"]],template:function(e,t){1&e&&(p.TgZ(0,"h1",0),p._uU(1),p.ALo(2,"translate"),p.qZA(),p.TgZ(3,"mat-tab-group",1),p.NdJ("selectedTabChange",function(e){return t.tabChanged(e)}),p.TgZ(4,"mat-tab"),p.YNc(5,le,2,3,"ng-template",2),p.YNc(6,be,6,6,"ng-template",3),p.qZA(),p.TgZ(7,"mat-tab"),p.YNc(8,Ee,2,3,"ng-template",2),p.YNc(9,Ue,6,6,"ng-template",3),p.qZA(),p.qZA(),p.YNc(10,De,3,3,"app-alert",4)),2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,2,"SHARED.COMPONENTS.MANAGERS_PAGE.TITLE"),"\n"),p.xp6(9),p.Q6J("ngIf",0===t.availableRoles.length))},directives:[oe.SP,oe.uX,oe.uD,oe.Vc,S.O5,ce.t,b.lW,m.KE,m.hX,A.gD,S.sg,E.ey,R.$g,Z.C,W.W,T.w],pipes:[h.X$,I],styles:[""]}),t}()},4196:function(e,t,a){"use strict";a.d(t,{o:function(){return q}});var s=a(31572),r=a(58623),o=a(67033),c=a(4230),l=a(54497),u=a(90474),d=a(84140),g=a(48160),p=a(82819),h=a(61511),f=a(29236),m=a(66283),A=a(80340),S=a(16073),v=a(15980),b=a(36922),E=a(43691),R=a(39571);function T(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"th",14),s.TgZ(1,"mat-checkbox",15),s.NdJ("change",function(e){s.CHM(i);var t=s.oxw();return e?t.masterToggle():null}),s.qZA(),s.qZA()}if(2&e){var a=s.oxw();s.xp6(1),s.Q6J("aria-label",a.checkboxLabel())("checked",a.selection.hasValue()&&a.isAllSelected())("indeterminate",a.selection.hasValue()&&!a.isAllSelected())}}function Z(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"td",16),s.TgZ(1,"mat-checkbox",17),s.NdJ("change",function(e){var t=s.CHM(i).$implicit,a=s.oxw();return e?a.selection.toggle(t):null})("click",function(e){return e.stopPropagation()}),s.qZA(),s.qZA()}if(2&e){var a=t.$implicit,n=s.oxw();s.xp6(1),s.Q6J("aria-label",n.checkboxLabel(a))("checked",n.selection.isSelected(a))}}function I(e,t){1&e&&(s.TgZ(0,"th",18),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"VO_DETAIL.RESOURCES.TAGS.TAG_ID")))}function C(e,t){if(1&e&&(s.TgZ(0,"td",16),s._uU(1),s.qZA()),2&e){var i=t.$implicit;s.xp6(1),s.Oqu(i.id)}}function _(e,t){1&e&&(s.TgZ(0,"th",14),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"VO_DETAIL.RESOURCES.TAGS.TAG_NAME")))}function O(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&e){var i=s.oxw().$implicit;s.xp6(1),s.hij(" ",i.tagName," ")}}function y(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"mat-form-field"),s.TgZ(2,"input",21),s.NdJ("ngModelChange",function(e){return s.CHM(i),s.oxw().$implicit.tagName=e}),s.qZA(),s.qZA(),s.qZA()}if(2&e){var a=s.oxw().$implicit;s.xp6(2),s.Q6J("ngModel",a.tagName)}}function x(e,t){if(1&e&&(s.TgZ(0,"td",19),s.YNc(1,O,2,1,"div",20),s.YNc(2,y,3,1,"div",20),s.qZA()),2&e){var i=t.$implicit,a=s.oxw();s.xp6(1),s.Q6J("ngIf",!a.isChanging.isSelected(i)),s.xp6(1),s.Q6J("ngIf",a.isChanging.isSelected(i))}}function N(e,t){1&e&&s._UZ(0,"th",14)}function U(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"button",24),s.NdJ("click",function(){s.CHM(i);var e=s.oxw().$implicit;return s.oxw().edit(e)}),s.ALo(1,"translate"),s.TgZ(2,"mat-icon"),s._uU(3,"edit"),s.qZA(),s.qZA()}2&e&&s.s9C("matTooltip",s.lcZ(1,1,"VO_DETAIL.RESOURCES.TAGS.EDIT_BUTTON"))}function D(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"button",24),s.NdJ("click",function(){s.CHM(i);var e=s.oxw().$implicit;return s.oxw().save(e)}),s.ALo(1,"translate"),s.TgZ(2,"mat-icon"),s._uU(3,"save"),s.qZA(),s.qZA()}2&e&&s.s9C("matTooltip",s.lcZ(1,1,"VO_DETAIL.RESOURCES.TAGS.SAVE_BUTTON"))}function k(e,t){if(1&e&&(s.TgZ(0,"td",19),s.TgZ(1,"div",22),s.YNc(2,U,4,3,"button",23),s.YNc(3,D,4,3,"button",23),s.qZA(),s.qZA()),2&e){var i=t.$implicit,a=s.oxw();s.xp6(2),s.Q6J("ngIf",!a.isChanging.isSelected(i)),s.xp6(1),s.Q6J("ngIf",a.isChanging.isSelected(i))}}function L(e,t){1&e&&s._UZ(0,"tr",25)}function w(e,t){1&e&&s._UZ(0,"tr",26)}function G(e,t){if(1&e&&(s.TgZ(0,"app-alert",27),s._uU(1),s.ALo(2,"translate"),s.ALo(3,"translate"),s.qZA()),2&e){var i=s.oxw();s.xp6(1),s.hij(" ","vo"===i.entity?s.lcZ(2,1,"VO_DETAIL.RESOURCES.TAGS.NO_TAGS"):s.lcZ(3,3,"RESOURCE_DETAIL.TAGS.NO_TAGS"),"\n")}}function M(e,t){1&e&&(s.TgZ(0,"app-alert",27),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}var q=function(){var e=function(){function e(t,a,n,r,o){i(this,e),this.resourceManager=t,this.notificator=a,this.translator=n,this.authResolver=r,this.tableCheckbox=o,this.resourceTags=[],this.selection=new c.Ov(!0,[]),this.pageSize=10,this.displayedColumns=["select","id","name","edit"],this.page=new s.vpe,this.isChanging=new c.Ov(!0,[]),this.pageSizeOptions=d.f7}return n(e,[{key:"matSort",set:function(e){this.sort=e,this.setDataSource()}},{key:"ngOnChanges",value:function(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(function(e){return"id"!==e})),this.dataSource=new o.by(this.resourceTags),this.setDataSource()}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.child.paginator}},{key:"getDataForColumn",value:function(e,t){switch(t){case"id":return e.id.toString();case"name":return e.tagName;default:return""}}},{key:"exportData",value:function(e){(0,d.O6)((0,d.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getDataForColumn,this),e)}},{key:"setDataSource",value:function(){var e=this;this.dataSource&&(this.dataSource.filterPredicate=function(t,i){return(0,d.Sd)(t,i,e.displayedColumns,e.getDataForColumn,e)},this.dataSource.sortData=function(t,i){return(0,d.pR)(t,i,e.getDataForColumn,e)},this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}},{key:"isAllSelected",value:function(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}},{key:"masterToggle",value:function(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.pageSize,this.child.paginator.pageIndex,!1)}},{key:"checkboxLabel",value:function(e){return e?"".concat(this.selection.isSelected(e)?"deselect":"select"," row ").concat(e.id+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"save",value:function(e){var t=this;this.resourceManager.updateResourceTag({resourceTag:e}).subscribe(function(){t.translator.get("SHARED.COMPONENTS.RESOURCES_TAGS_LIST.EDIT_SUCCESS").subscribe(function(e){t.notificator.showSuccess(e)}),t.isChanging.deselect(e)})}},{key:"edit",value:function(e){this.isChanging.select(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.xk),s.Y36(l.V6),s.Y36(g.sK),s.Y36(l.x4),s.Y36(l.UA))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-resources-tags-list"]],viewQuery:function(e,t){var i;(1&e&&(s.Gf(r.YE,7),s.Gf(d.l9,7)),2&e)&&(s.iGM(i=s.CRH())&&(t.matSort=i.first),s.iGM(i=s.CRH())&&(t.child=i.first))},inputs:{resourceTags:"resourceTags",filterValue:"filterValue",selection:"selection",pageSize:"pageSize",displayedColumns:"displayedColumns",entity:"entity"},outputs:{page:"page"},features:[s.TTD],decls:19,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","pageSizeOptions","pageSize","exportData","page"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell",""],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["matInput","",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matTooltip","click"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"perun-web-apps-table-wrapper",1),s.NdJ("exportData",function(e){return t.exportData(e)})("page",function(e){return t.page.emit(e)}),s.TgZ(2,"table",2),s.ynx(3,3),s.YNc(4,T,2,3,"th",4),s.YNc(5,Z,2,2,"td",5),s.BQk(),s.ynx(6,6),s.YNc(7,I,3,3,"th",7),s.YNc(8,C,2,1,"td",5),s.BQk(),s.ynx(9,8),s.YNc(10,_,3,3,"th",4),s.YNc(11,x,3,2,"td",9),s.BQk(),s.ynx(12,10),s.YNc(13,N,1,0,"th",4),s.YNc(14,k,4,2,"td",9),s.BQk(),s.YNc(15,L,1,0,"tr",11),s.YNc(16,w,1,0,"tr",12),s.qZA(),s.qZA(),s.qZA(),s.YNc(17,G,4,5,"app-alert",13),s.YNc(18,M,3,3,"app-alert",13)),2&e&&(s.Q6J("hidden",0===t.resourceTags.length||0===t.dataSource.filteredData.length),s.xp6(1),s.Q6J("dataLength",t.dataSource.filteredData.length)("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),s.xp6(1),s.Q6J("dataSource",t.dataSource),s.xp6(13),s.Q6J("matHeaderRowDef",t.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",t.displayedColumns),s.xp6(1),s.Q6J("ngIf",0===t.resourceTags.length),s.xp6(1),s.Q6J("ngIf",0===t.dataSource.filteredData.length&&0!==t.resourceTags.length))},directives:[p.l,o.BZ,r.YE,o.w1,o.fO,o.Dz,o.as,o.nj,h.O5,o.ge,f.oG,o.ev,r.nU,m.KE,A.Nt,S.Fj,S.JJ,S.On,v.lW,b.gM,E.Hw,o.XQ,o.Gk,R.w],pipes:[g.X$],styles:[""]}),e}()},91721:function(e,t,a){"use strict";a.d(t,{Q:function(){return q}});var s=a(31572),r=a(58623),o=a(67033),c=a(4230),l=a(84140),u=a(54497),d=a(82819),g=a(61511),p=a(29236),h=a(43691),f=a(36922),m=a(84534),A=a(57629),S=a(39571),v=a(48160);function b(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"th",16),s.TgZ(1,"mat-checkbox",17),s.NdJ("change",function(e){s.CHM(i);var t=s.oxw();return e?t.masterToggle():null}),s.qZA(),s.qZA()}if(2&e){var a=s.oxw();s.xp6(1),s.Q6J("aria-label",a.checkboxLabel())("checked",a.selection.hasValue()&&a.isAllSelected())("indeterminate",a.selection.hasValue()&&!a.isAllSelected())}}function E(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"td",18),s.TgZ(1,"mat-checkbox",19),s.NdJ("change",function(e){var t=s.CHM(i).$implicit,a=s.oxw();return e?a.selection.toggle(t):null})("click",function(e){return e.stopPropagation()}),s.qZA(),s.qZA()}if(2&e){var a=t.$implicit,n=s.oxw();s.xp6(1),s.Q6J("aria-label",n.checkboxLabel(a))("checked",n.selection.isSelected(a))}}function R(e,t){1&e&&(s.TgZ(0,"th",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"SHARED.COMPONENTS.SERVICES_LIST.ID")))}function T(e,t){if(1&e&&(s.TgZ(0,"td",18),s._uU(1),s.qZA()),2&e){var i=t.$implicit;s.xp6(1),s.Oqu(i.id)}}function Z(e,t){1&e&&(s.TgZ(0,"th",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"SHARED.COMPONENTS.SERVICES_LIST.NAME")))}function I(e,t){if(1&e&&(s.TgZ(0,"td",21),s._uU(1),s.qZA()),2&e){var i=t.$implicit;s.xp6(1),s.Oqu(i.name)}}function C(e,t){1&e&&s._UZ(0,"th",16)}function _(e,t){1&e&&(s.TgZ(0,"mat-icon",23),s.ALo(1,"translate"),s._uU(2," check_circle_outline "),s.qZA()),2&e&&s.s9C("matTooltip",s.lcZ(1,1,"SHARED.COMPONENTS.SERVICES_LIST.ENABLED"))}function O(e,t){1&e&&(s.TgZ(0,"mat-icon",23),s.ALo(1,"translate"),s._uU(2," block "),s.qZA()),2&e&&s.s9C("matTooltip",s.lcZ(1,1,"SHARED.COMPONENTS.SERVICES_LIST.DISABLED"))}function y(e,t){if(1&e&&(s.TgZ(0,"td",21),s.YNc(1,_,3,3,"mat-icon",22),s.YNc(2,O,3,3,"mat-icon",22),s.qZA()),2&e){var i=t.$implicit;s.xp6(1),s.Q6J("ngIf",i.enabled),s.xp6(1),s.Q6J("ngIf",!i.enabled)}}function x(e,t){1&e&&(s.TgZ(0,"th",16),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"SHARED.COMPONENTS.SERVICES_LIST.SCRIPT")))}function N(e,t){if(1&e&&(s.TgZ(0,"td",21),s._uU(1),s.qZA()),2&e){var i=t.$implicit;s.xp6(1),s.Oqu(i.script)}}function U(e,t){1&e&&(s.TgZ(0,"th",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"SHARED.COMPONENTS.SERVICES_LIST.DESCRIPTION")))}function D(e,t){if(1&e&&(s.TgZ(0,"td",21),s._uU(1),s.qZA()),2&e){var i=t.$implicit;s.xp6(1),s.Oqu(i.description)}}function k(e,t){1&e&&s._UZ(0,"tr",24)}var L=function(e){return["/admin/services",e]};function w(e,t){if(1&e&&s._UZ(0,"tr",25),2&e){var i=t.$implicit,a=s.oxw();s.ekj("cursor-pointer",!a.disableRouting)("disable-outline",a.disableRouting),s.Q6J("perunWebAppsMiddleClickRouterLink",a.disableRouting?null:s.VKq(6,L,i.id))("routerLink",a.disableRouting?null:s.VKq(8,L,i.id))}}function G(e,t){1&e&&(s.TgZ(0,"app-alert",26),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}function M(e,t){1&e&&(s.TgZ(0,"app-alert",26),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.SERVICES_LIST.NO_SERVICES_WARNING"),"\n"))}var q=function(){var e=function(){function e(t,a){i(this,e),this.authResolver=t,this.tableCheckbox=a,this.services=[],this.filterValue="",this.pageSize=10,this.displayedColumns=["select","id","name","enabled","script","description"],this.selection=new c.Ov(!0,[]),this.disableRouting=!1,this.page=new s.vpe,this.pageSizeOptions=l.f7}return n(e,[{key:"matSort",set:function(e){this.sort=e,this.setDataSource()}},{key:"ngOnChanges",value:function(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(function(e){return"id"!==e})),this.dataSource=new o.by(this.services),this.setDataSource()}},{key:"getDataForColumn",value:function(e,t){switch(t){case"id":return e.id.toString();case"name":return e.name;case"enabled":return e.enabled?"true":"false";case"script":return e.script;case"description":return e.description;default:return""}}},{key:"exportData",value:function(e){(0,l.O6)((0,l.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getDataForColumn,this),e)}},{key:"setDataSource",value:function(){var e=this;this.dataSource&&(this.dataSource.filterPredicate=function(t,i){return(0,l.Sd)(t,i,e.displayedColumns,e.getDataForColumn,e)},this.dataSource.sortData=function(t,i){return(0,l.pR)(t,i,e.getDataForColumn,e)},this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}},{key:"isAllSelected",value:function(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}},{key:"masterToggle",value:function(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.pageSize,this.child.paginator.pageIndex,!1)}},{key:"checkboxLabel",value:function(e){return e?"".concat(this.selection.isSelected(e)?"deselect":"select"," row ").concat(e.id+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.child.paginator}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.x4),s.Y36(u.UA))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-services-list"]],viewQuery:function(e,t){var i;(1&e&&(s.Gf(r.YE,7),s.Gf(l.l9,7)),2&e)&&(s.iGM(i=s.CRH())&&(t.matSort=i.first),s.iGM(i=s.CRH())&&(t.child=i.first))},inputs:{services:"services",filterValue:"filterValue",pageSize:"pageSize",displayedColumns:"displayedColumns",selection:"selection",disableRouting:"disableRouting"},outputs:{page:"page"},features:[s.TTD],decls:25,vars:9,consts:[[1,"card","mt-3",3,"hidden"],[3,"dataLength","pageSizeOptions","pageSize","exportData","page"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enabled"],["matColumnDef","script"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","disable-outline","perunWebAppsMiddleClickRouterLink","routerLink",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell",""],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"perunWebAppsMiddleClickRouterLink","routerLink"],["alert_type","warn"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"perun-web-apps-table-wrapper",1),s.NdJ("exportData",function(e){return t.exportData(e)})("page",function(e){return t.page.emit(e)}),s.TgZ(2,"table",2),s.ynx(3,3),s.YNc(4,b,2,3,"th",4),s.YNc(5,E,2,2,"td",5),s.BQk(),s.ynx(6,6),s.YNc(7,R,3,3,"th",7),s.YNc(8,T,2,1,"td",5),s.BQk(),s.ynx(9,8),s.YNc(10,Z,3,3,"th",7),s.YNc(11,I,2,1,"td",9),s.BQk(),s.ynx(12,10),s.YNc(13,C,1,0,"th",4),s.YNc(14,y,3,2,"td",9),s.BQk(),s.ynx(15,11),s.YNc(16,x,3,3,"th",4),s.YNc(17,N,2,1,"td",9),s.BQk(),s.ynx(18,12),s.YNc(19,U,3,3,"th",7),s.YNc(20,D,2,1,"td",9),s.BQk(),s.YNc(21,k,1,0,"tr",13),s.YNc(22,w,1,10,"tr",14),s.qZA(),s.qZA(),s.qZA(),s.YNc(23,G,3,3,"app-alert",15),s.YNc(24,M,3,3,"app-alert",15)),2&e&&(s.Q6J("hidden",void 0===t.services||0===t.services.length||0===t.dataSource.filteredData.length),s.xp6(1),s.Q6J("dataLength",t.dataSource.filteredData.length)("pageSizeOptions",t.pageSizeOptions)("pageSize",t.pageSize),s.xp6(1),s.Q6J("dataSource",t.dataSource),s.xp6(19),s.Q6J("matHeaderRowDef",t.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",t.displayedColumns),s.xp6(1),s.Q6J("ngIf",0===t.dataSource.filteredData.length&&void 0!==t.services&&0!==t.services.length),s.xp6(1),s.Q6J("ngIf",void 0===t.services||0===t.services.length))},directives:[d.l,o.BZ,r.YE,o.w1,o.fO,o.Dz,o.as,o.nj,g.O5,o.ge,p.oG,o.ev,r.nU,h.Hw,f.gM,o.XQ,o.Gk,m.YH,A.rH,S.w],pipes:[v.X$],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.disable-outline[_ngcontent-%COMP%]{outline:none!important}"]}),e}()}}])}();