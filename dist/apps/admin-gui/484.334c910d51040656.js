(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[484],{89397:function(w,k){!function(o){"use strict";function u(Y,K){return K.forEach(function(ut){ut&&"string"!=typeof ut&&!Array.isArray(ut)&&Object.keys(ut).forEach(function(it){if("default"!==it&&!(it in Y)){var G=Object.getOwnPropertyDescriptor(ut,it);Object.defineProperty(Y,it,G.get?G:{enumerable:!0,get:function(){return ut[it]}})}})}),Object.freeze(Y)}var it,ut,x={exports:{}};it="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,ut=function(G){var ft,It,M=void 0!==(G=G||{})?G:{};M.ready=new Promise(function(b,I){ft=b,It=I});var zt,Zt={};for(zt in M)M.hasOwnProperty(zt)&&(Zt[zt]=M[zt]);var Nt,Jt,ne="./this.program",xt="";"undefined"!=typeof document&&document.currentScript&&(xt=document.currentScript.src),it&&(xt=it),xt=0!==xt.indexOf("blob:")?xt.substr(0,xt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Nt=function(b){var I=new XMLHttpRequest;return I.open("GET",b,!1),I.send(null),I.responseText},Jt=function(b,I,U){var Q=new XMLHttpRequest;Q.open("GET",b,!0),Q.responseType="arraybuffer",Q.onload=function(){200==Q.status||0==Q.status&&Q.response?I(Q.response):U()},Q.onerror=U,Q.send(null)};var Re,_e=M.print||console.log.bind(console),Te=M.printErr||console.warn.bind(console);for(zt in Zt)Zt.hasOwnProperty(zt)&&(M[zt]=Zt[zt]);Zt=null,M.thisProgram&&(ne=M.thisProgram),M.wasmBinary&&(Re=M.wasmBinary),"object"!=typeof WebAssembly&&Dn("no native wasm support detected");var Tn,Fe=!1;function gn(b,I){b||Dn("Assertion failed: "+I)}var je,sn,En,Be,ci,Ve="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Mn(b,I,U){for(var Q=I+U,ct=I;b[ct]&&!(ct>=Q);)++ct;if(ct-I>16&&b.subarray&&Ve)return Ve.decode(b.subarray(I,ct));for(var yt="";I<ct;){var kt=b[I++];if(128&kt){var Pt=63&b[I++];if(192!=(224&kt)){var ae=63&b[I++];if((kt=224==(240&kt)?(15&kt)<<12|Pt<<6|ae:(7&kt)<<18|Pt<<12|ae<<6|63&b[I++])<65536)yt+=String.fromCharCode(kt);else{var Se=kt-65536;yt+=String.fromCharCode(55296|Se>>10,56320|1023&Se)}}else yt+=String.fromCharCode((31&kt)<<6|Pt)}else yt+=String.fromCharCode(kt)}return yt}function oe(b,I){return b?Mn(En,b,I):""}function fn(b,I,U,Q){if(!(Q>0))return 0;for(var ct=U,yt=U+Q-1,kt=0;kt<b.length;++kt){var Pt=b.charCodeAt(kt);if(Pt>=55296&&Pt<=57343&&(Pt=65536+((1023&Pt)<<10)|1023&b.charCodeAt(++kt)),Pt<=127){if(U>=yt)break;I[U++]=Pt}else if(Pt<=2047){if(U+1>=yt)break;I[U++]=192|Pt>>6,I[U++]=128|63&Pt}else if(Pt<=65535){if(U+2>=yt)break;I[U++]=224|Pt>>12,I[U++]=128|Pt>>6&63,I[U++]=128|63&Pt}else{if(U+3>=yt)break;I[U++]=240|Pt>>18,I[U++]=128|Pt>>12&63,I[U++]=128|Pt>>6&63,I[U++]=128|63&Pt}}return I[U]=0,U-ct}function ni(b){for(var I=0,U=0;U<b.length;++U){var Q=b.charCodeAt(U);Q>=55296&&Q<=57343&&(Q=65536+((1023&Q)<<10)|1023&b.charCodeAt(++U)),Q<=127?++I:I+=Q<=2047?2:Q<=65535?3:4}return I}function an(b,I){return b%I>0&&(b+=I-b%I),b}function Rn(b){je=b,M.HEAP8=sn=new Int8Array(b),M.HEAP16=new Int16Array(b),M.HEAP32=Be=new Int32Array(b),M.HEAPU8=En=new Uint8Array(b),M.HEAPU16=new Uint16Array(b),M.HEAPU32=new Uint32Array(b),M.HEAPF32=new Float32Array(b),M.HEAPF64=ci=new Float64Array(b)}var _n,Yn=[],ti=[],Me=[];var ve=0,Ze=null;function nn(b){ve++,M.monitorRunDependencies&&M.monitorRunDependencies(ve)}function Zn(b){if(ve--,M.monitorRunDependencies&&M.monitorRunDependencies(ve),0==ve&&Ze){var I=Ze;Ze=null,I()}}function Dn(b){M.onAbort&&M.onAbort(b),Te(b="Aborted("+b+")"),Fe=!0,b+=". Build with -s ASSERTIONS=1 for more info.";var I=new WebAssembly.RuntimeError(b);throw It(I),I}M.preloadedImages={},M.preloadedAudios={};var vn;function Di(b){return b.startsWith("data:application/octet-stream;base64,")}function ei(b){try{if(b==vn&&Re)return new Uint8Array(Re);throw"both async and sync fetching of the wasm failed"}catch(I){Dn(I)}}Di(vn="expatlib.wasm")||(vn=function pt(b){return M.locateFile?M.locateFile(b,xt):xt+b}(vn));var un,bn,Kn={11694:function(b){var I=M.getCache(M.CExpatJS)[b];if(!I.hasOwnProperty("startElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::startElement.";I.startElement()},11912:function(b){var I=M.getCache(M.CExpatJS)[b];if(!I.hasOwnProperty("endElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::endElement.";I.endElement()},12124:function(b){var I=M.getCache(M.CExpatJS)[b];if(!I.hasOwnProperty("characterData"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::characterData.";I.characterData()}};function ui(b){for(;b.length>0;){var I=b.shift();if("function"!=typeof I){var U=I.func;"number"==typeof U?void 0===I.arg?Nn(U)():Nn(U)(I.arg):U(void 0===I.arg?null:I.arg)}else I(M)}}function Nn(b){return _n.get(b)}var De={splitPath:function(b){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(b).slice(1)},normalizeArray:function(b,I){for(var U=0,Q=b.length-1;Q>=0;Q--){var ct=b[Q];"."===ct?b.splice(Q,1):".."===ct?(b.splice(Q,1),U++):U&&(b.splice(Q,1),U--)}if(I)for(;U;U--)b.unshift("..");return b},normalize:function(b){var I="/"===b.charAt(0),U="/"===b.substr(-1);return!(b=De.normalizeArray(b.split("/").filter(function(Q){return!!Q}),!I).join("/"))&&!I&&(b="."),b&&U&&(b+="/"),(I?"/":"")+b},dirname:function(b){var I=De.splitPath(b),U=I[0],Q=I[1];return U||Q?(Q&&(Q=Q.substr(0,Q.length-1)),U+Q):"."},basename:function(b){if("/"===b)return"/";var I=(b=(b=De.normalize(b)).replace(/\/$/,"")).lastIndexOf("/");return-1===I?b:b.substr(I+1)},extname:function(b){return De.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return De.normalize(b.join("/"))},join2:function(b,I){return De.normalize(b+"/"+I)}};var Bn={resolve:function(){for(var b="",I=!1,U=arguments.length-1;U>=-1&&!I;U--){var Q=U>=0?arguments[U]:S.cwd();if("string"!=typeof Q)throw new TypeError("Arguments to path.resolve must be strings");if(!Q)return"";b=Q+"/"+b,I="/"===Q.charAt(0)}return(I?"/":"")+(b=De.normalizeArray(b.split("/").filter(function(ct){return!!ct}),!I).join("/"))||"."},relative:function(b,I){function U(Se){for(var Ge=0;Ge<Se.length&&""===Se[Ge];Ge++);for(var Ke=Se.length-1;Ke>=0&&""===Se[Ke];Ke--);return Ge>Ke?[]:Se.slice(Ge,Ke-Ge+1)}b=Bn.resolve(b).substr(1),I=Bn.resolve(I).substr(1);for(var Q=U(b.split("/")),ct=U(I.split("/")),yt=Math.min(Q.length,ct.length),kt=yt,Pt=0;Pt<yt;Pt++)if(Q[Pt]!==ct[Pt]){kt=Pt;break}var ae=[];for(Pt=kt;Pt<Q.length;Pt++)ae.push("..");return(ae=ae.concat(ct.slice(kt))).join("/")}},pn={ttys:[],init:function(){},shutdown:function(){},register:function(b,I){pn.ttys[b]={input:[],output:[],ops:I},S.registerDevice(b,pn.stream_ops)},stream_ops:{open:function(b){var I=pn.ttys[b.node.rdev];if(!I)throw new S.ErrnoError(43);b.tty=I,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,I,U,Q,ct){if(!b.tty||!b.tty.ops.get_char)throw new S.ErrnoError(60);for(var yt=0,kt=0;kt<Q;kt++){var Pt;try{Pt=b.tty.ops.get_char(b.tty)}catch(ae){throw new S.ErrnoError(29)}if(void 0===Pt&&0===yt)throw new S.ErrnoError(6);if(null==Pt)break;yt++,I[U+kt]=Pt}return yt&&(b.node.timestamp=Date.now()),yt},write:function(b,I,U,Q,ct){if(!b.tty||!b.tty.ops.put_char)throw new S.ErrnoError(60);try{for(var yt=0;yt<Q;yt++)b.tty.ops.put_char(b.tty,I[U+yt])}catch(kt){throw new S.ErrnoError(29)}return Q&&(b.node.timestamp=Date.now()),yt}},default_tty_ops:{get_char:function(b){if(!b.input.length){var I=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(I=window.prompt("Input: "))&&(I+="\n"):"function"==typeof readline&&null!==(I=readline())&&(I+="\n"),!I)return null;b.input=ye(I,!0)}return b.input.shift()},put_char:function(b,I){null===I||10===I?(_e(Mn(b.output,0)),b.output=[]):0!=I&&b.output.push(I)},flush:function(b){b.output&&b.output.length>0&&(_e(Mn(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,I){null===I||10===I?(Te(Mn(b.output,0)),b.output=[]):0!=I&&b.output.push(I)},flush:function(b){b.output&&b.output.length>0&&(Te(Mn(b.output,0)),b.output=[])}}};var X={ops_table:null,mount:function(b){return X.createNode(null,"/",16895,0)},createNode:function(b,I,U,Q){if(S.isBlkdev(U)||S.isFIFO(U))throw new S.ErrnoError(63);X.ops_table||(X.ops_table={dir:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr,lookup:X.node_ops.lookup,mknod:X.node_ops.mknod,rename:X.node_ops.rename,unlink:X.node_ops.unlink,rmdir:X.node_ops.rmdir,readdir:X.node_ops.readdir,symlink:X.node_ops.symlink},stream:{llseek:X.stream_ops.llseek}},file:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr},stream:{llseek:X.stream_ops.llseek,read:X.stream_ops.read,write:X.stream_ops.write,allocate:X.stream_ops.allocate,mmap:X.stream_ops.mmap,msync:X.stream_ops.msync}},link:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr,readlink:X.node_ops.readlink},stream:{}},chrdev:{node:{getattr:X.node_ops.getattr,setattr:X.node_ops.setattr},stream:S.chrdev_stream_ops}});var ct=S.createNode(b,I,U,Q);return S.isDir(ct.mode)?(ct.node_ops=X.ops_table.dir.node,ct.stream_ops=X.ops_table.dir.stream,ct.contents={}):S.isFile(ct.mode)?(ct.node_ops=X.ops_table.file.node,ct.stream_ops=X.ops_table.file.stream,ct.usedBytes=0,ct.contents=null):S.isLink(ct.mode)?(ct.node_ops=X.ops_table.link.node,ct.stream_ops=X.ops_table.link.stream):S.isChrdev(ct.mode)&&(ct.node_ops=X.ops_table.chrdev.node,ct.stream_ops=X.ops_table.chrdev.stream),ct.timestamp=Date.now(),b&&(b.contents[I]=ct,b.timestamp=ct.timestamp),ct},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage:function(b,I){var U=b.contents?b.contents.length:0;if(!(U>=I)){I=Math.max(I,U*(U<1048576?2:1.125)>>>0),0!=U&&(I=Math.max(I,256));var ct=b.contents;b.contents=new Uint8Array(I),b.usedBytes>0&&b.contents.set(ct.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,I){if(b.usedBytes!=I)if(0==I)b.contents=null,b.usedBytes=0;else{var U=b.contents;b.contents=new Uint8Array(I),U&&b.contents.set(U.subarray(0,Math.min(I,b.usedBytes))),b.usedBytes=I}},node_ops:{getattr:function(b){var I={};return I.dev=S.isChrdev(b.mode)?b.id:1,I.ino=b.id,I.mode=b.mode,I.nlink=1,I.uid=0,I.gid=0,I.rdev=b.rdev,I.size=S.isDir(b.mode)?4096:S.isFile(b.mode)?b.usedBytes:S.isLink(b.mode)?b.link.length:0,I.atime=new Date(b.timestamp),I.mtime=new Date(b.timestamp),I.ctime=new Date(b.timestamp),I.blksize=4096,I.blocks=Math.ceil(I.size/I.blksize),I},setattr:function(b,I){void 0!==I.mode&&(b.mode=I.mode),void 0!==I.timestamp&&(b.timestamp=I.timestamp),void 0!==I.size&&X.resizeFileStorage(b,I.size)},lookup:function(b,I){throw S.genericErrors[44]},mknod:function(b,I,U,Q){return X.createNode(b,I,U,Q)},rename:function(b,I,U){if(S.isDir(b.mode)){var Q;try{Q=S.lookupNode(I,U)}catch(yt){}if(Q)for(var ct in Q.contents)throw new S.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=U,I.contents[U]=b,I.timestamp=b.parent.timestamp,b.parent=I},unlink:function(b,I){delete b.contents[I],b.timestamp=Date.now()},rmdir:function(b,I){var U=S.lookupNode(b,I);for(var Q in U.contents)throw new S.ErrnoError(55);delete b.contents[I],b.timestamp=Date.now()},readdir:function(b){var I=[".",".."];for(var U in b.contents)!b.contents.hasOwnProperty(U)||I.push(U);return I},symlink:function(b,I,U){var Q=X.createNode(b,I,41471,0);return Q.link=U,Q},readlink:function(b){if(!S.isLink(b.mode))throw new S.ErrnoError(28);return b.link}},stream_ops:{read:function(b,I,U,Q,ct){var yt=b.node.contents;if(ct>=b.node.usedBytes)return 0;var kt=Math.min(b.node.usedBytes-ct,Q);if(kt>8&&yt.subarray)I.set(yt.subarray(ct,ct+kt),U);else for(var Pt=0;Pt<kt;Pt++)I[U+Pt]=yt[ct+Pt];return kt},write:function(b,I,U,Q,ct,yt){if(I.buffer===sn.buffer&&(yt=!1),!Q)return 0;var kt=b.node;if(kt.timestamp=Date.now(),I.subarray&&(!kt.contents||kt.contents.subarray)){if(yt)return kt.contents=I.subarray(U,U+Q),kt.usedBytes=Q,Q;if(0===kt.usedBytes&&0===ct)return kt.contents=I.slice(U,U+Q),kt.usedBytes=Q,Q;if(ct+Q<=kt.usedBytes)return kt.contents.set(I.subarray(U,U+Q),ct),Q}if(X.expandFileStorage(kt,ct+Q),kt.contents.subarray&&I.subarray)kt.contents.set(I.subarray(U,U+Q),ct);else for(var Pt=0;Pt<Q;Pt++)kt.contents[ct+Pt]=I[U+Pt];return kt.usedBytes=Math.max(kt.usedBytes,ct+Q),Q},llseek:function(b,I,U){var Q=I;if(1===U?Q+=b.position:2===U&&S.isFile(b.node.mode)&&(Q+=b.node.usedBytes),Q<0)throw new S.ErrnoError(28);return Q},allocate:function(b,I,U){X.expandFileStorage(b.node,I+U),b.node.usedBytes=Math.max(b.node.usedBytes,I+U)},mmap:function(b,I,U,Q,ct,yt){if(0!==I)throw new S.ErrnoError(28);if(!S.isFile(b.node.mode))throw new S.ErrnoError(43);var kt,Pt,ae=b.node.contents;if(2&yt||ae.buffer!==je){if((Q>0||Q+U<ae.length)&&(ae=ae.subarray?ae.subarray(Q,Q+U):Array.prototype.slice.call(ae,Q,Q+U)),Pt=!0,!(kt=function V(b){Dn()}()))throw new S.ErrnoError(48);sn.set(ae,kt)}else Pt=!1,kt=ae.byteOffset;return{ptr:kt,allocated:Pt}},msync:function(b,I,U,Q,ct){if(!S.isFile(b.node.mode))throw new S.ErrnoError(43);return 2&ct||X.stream_ops.write(b,I,0,Q,U,!1),0}}};var S={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(b,I){if(I=I||{},!(b=Bn.resolve(S.cwd(),b)))return{path:"",node:null};var U={follow_mount:!0,recurse_count:0};for(var Q in U)void 0===I[Q]&&(I[Q]=U[Q]);if(I.recurse_count>8)throw new S.ErrnoError(32);for(var ct=De.normalizeArray(b.split("/").filter(function(Pe){return!!Pe}),!1),yt=S.root,kt="/",Pt=0;Pt<ct.length;Pt++){var ae=Pt===ct.length-1;if(ae&&I.parent)break;if(yt=S.lookupNode(yt,ct[Pt]),kt=De.join2(kt,ct[Pt]),S.isMountpoint(yt)&&(!ae||ae&&I.follow_mount)&&(yt=yt.mounted.root),!ae||I.follow)for(var Se=0;S.isLink(yt.mode);){var Ge=S.readlink(kt);if(kt=Bn.resolve(De.dirname(kt),Ge),yt=S.lookupPath(kt,{recurse_count:I.recurse_count}).node,Se++>40)throw new S.ErrnoError(32)}}return{path:kt,node:yt}},getPath:function(b){for(var I;;){if(S.isRoot(b)){var U=b.mount.mountpoint;return I?"/"!==U[U.length-1]?U+"/"+I:U+I:U}I=I?b.name+"/"+I:b.name,b=b.parent}},hashName:function(b,I){for(var U=0,Q=0;Q<I.length;Q++)U=(U<<5)-U+I.charCodeAt(Q)|0;return(b+U>>>0)%S.nameTable.length},hashAddNode:function(b){var I=S.hashName(b.parent.id,b.name);b.name_next=S.nameTable[I],S.nameTable[I]=b},hashRemoveNode:function(b){var I=S.hashName(b.parent.id,b.name);if(S.nameTable[I]===b)S.nameTable[I]=b.name_next;else for(var U=S.nameTable[I];U;){if(U.name_next===b){U.name_next=b.name_next;break}U=U.name_next}},lookupNode:function(b,I){var U=S.mayLookup(b);if(U)throw new S.ErrnoError(U,b);for(var Q=S.hashName(b.id,I),ct=S.nameTable[Q];ct;ct=ct.name_next)if(ct.parent.id===b.id&&ct.name===I)return ct;return S.lookup(b,I)},createNode:function(b,I,U,Q){var ct=new S.FSNode(b,I,U,Q);return S.hashAddNode(ct),ct},destroyNode:function(b){S.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return 32768==(61440&b)},isDir:function(b){return 16384==(61440&b)},isLink:function(b){return 40960==(61440&b)},isChrdev:function(b){return 8192==(61440&b)},isBlkdev:function(b){return 24576==(61440&b)},isFIFO:function(b){return 4096==(61440&b)},isSocket:function(b){return 49152==(49152&b)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(b){var I=S.flagModes[b];if(void 0===I)throw new Error("Unknown file open mode: "+b);return I},flagsToPermissionString:function(b){var I=["r","w","rw"][3&b];return 512&b&&(I+="w"),I},nodePermissions:function(b,I){return S.ignorePermissions?0:I.includes("r")&&!(292&b.mode)||I.includes("w")&&!(146&b.mode)||I.includes("x")&&!(73&b.mode)?2:0},mayLookup:function(b){return S.nodePermissions(b,"x")||(b.node_ops.lookup?0:2)},mayCreate:function(b,I){try{return S.lookupNode(b,I),20}catch(Q){}return S.nodePermissions(b,"wx")},mayDelete:function(b,I,U){var Q;try{Q=S.lookupNode(b,I)}catch(yt){return yt.errno}var ct=S.nodePermissions(b,"wx");if(ct)return ct;if(U){if(!S.isDir(Q.mode))return 54;if(S.isRoot(Q)||S.getPath(Q)===S.cwd())return 10}else if(S.isDir(Q.mode))return 31;return 0},mayOpen:function(b,I){return b?S.isLink(b.mode)?32:S.isDir(b.mode)&&("r"!==S.flagsToPermissionString(I)||512&I)?31:S.nodePermissions(b,S.flagsToPermissionString(I)):44},MAX_OPEN_FDS:4096,nextfd:function(b,I){I=I||S.MAX_OPEN_FDS;for(var U=b=b||0;U<=I;U++)if(!S.streams[U])return U;throw new S.ErrnoError(33)},getStream:function(b){return S.streams[b]},createStream:function(b,I,U){S.FSStream||(S.FSStream=function(){},S.FSStream.prototype={object:{get:function(){return this.node},set:function(kt){this.node=kt}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var Q=new S.FSStream;for(var ct in b)Q[ct]=b[ct];b=Q;var yt=S.nextfd(I,U);return b.fd=yt,S.streams[yt]=b,b},closeStream:function(b){S.streams[b]=null},chrdev_stream_ops:{open:function(b){var I=S.getDevice(b.node.rdev);b.stream_ops=I.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new S.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return 255&b},makedev:function(b,I){return b<<8|I},registerDevice:function(b,I){S.devices[b]={stream_ops:I}},getDevice:function(b){return S.devices[b]},getMounts:function(b){for(var I=[],U=[b];U.length;){var Q=U.pop();I.push(Q),U.push.apply(U,Q.mounts)}return I},syncfs:function(b,I){"function"==typeof b&&(I=b,b=!1),S.syncFSRequests++,S.syncFSRequests>1&&Te("warning: "+S.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var U=S.getMounts(S.root.mount),Q=0;function ct(kt){return S.syncFSRequests--,I(kt)}function yt(kt){if(kt)return yt.errored?void 0:(yt.errored=!0,ct(kt));++Q>=U.length&&ct(null)}U.forEach(function(kt){if(!kt.type.syncfs)return yt(null);kt.type.syncfs(kt,b,yt)})},mount:function(b,I,U){var yt,Q="/"===U,ct=!U;if(Q&&S.root)throw new S.ErrnoError(10);if(!Q&&!ct){var kt=S.lookupPath(U,{follow_mount:!1});if(U=kt.path,S.isMountpoint(yt=kt.node))throw new S.ErrnoError(10);if(!S.isDir(yt.mode))throw new S.ErrnoError(54)}var Pt={type:b,opts:I,mountpoint:U,mounts:[]},ae=b.mount(Pt);return ae.mount=Pt,Pt.root=ae,Q?S.root=ae:yt&&(yt.mounted=Pt,yt.mount&&yt.mount.mounts.push(Pt)),ae},unmount:function(b){var I=S.lookupPath(b,{follow_mount:!1});if(!S.isMountpoint(I.node))throw new S.ErrnoError(28);var U=I.node,Q=U.mounted,ct=S.getMounts(Q);Object.keys(S.nameTable).forEach(function(kt){for(var Pt=S.nameTable[kt];Pt;){var ae=Pt.name_next;ct.includes(Pt.mount)&&S.destroyNode(Pt),Pt=ae}}),U.mounted=null;var yt=U.mount.mounts.indexOf(Q);U.mount.mounts.splice(yt,1)},lookup:function(b,I){return b.node_ops.lookup(b,I)},mknod:function(b,I,U){var ct=S.lookupPath(b,{parent:!0}).node,yt=De.basename(b);if(!yt||"."===yt||".."===yt)throw new S.ErrnoError(28);var kt=S.mayCreate(ct,yt);if(kt)throw new S.ErrnoError(kt);if(!ct.node_ops.mknod)throw new S.ErrnoError(63);return ct.node_ops.mknod(ct,yt,I,U)},create:function(b,I){return I=void 0!==I?I:438,I&=4095,S.mknod(b,I|=32768,0)},mkdir:function(b,I){return I=void 0!==I?I:511,I&=1023,S.mknod(b,I|=16384,0)},mkdirTree:function(b,I){for(var U=b.split("/"),Q="",ct=0;ct<U.length;++ct)if(U[ct]){Q+="/"+U[ct];try{S.mkdir(Q,I)}catch(yt){if(20!=yt.errno)throw yt}}},mkdev:function(b,I,U){return void 0===U&&(U=I,I=438),S.mknod(b,I|=8192,U)},symlink:function(b,I){if(!Bn.resolve(b))throw new S.ErrnoError(44);var Q=S.lookupPath(I,{parent:!0}).node;if(!Q)throw new S.ErrnoError(44);var ct=De.basename(I),yt=S.mayCreate(Q,ct);if(yt)throw new S.ErrnoError(yt);if(!Q.node_ops.symlink)throw new S.ErrnoError(63);return Q.node_ops.symlink(Q,ct,b)},rename:function(b,I){var Pt,ae,U=De.dirname(b),Q=De.dirname(I),ct=De.basename(b),yt=De.basename(I);if(Pt=S.lookupPath(b,{parent:!0}).node,ae=S.lookupPath(I,{parent:!0}).node,!Pt||!ae)throw new S.ErrnoError(44);if(Pt.mount!==ae.mount)throw new S.ErrnoError(75);var Ke,Se=S.lookupNode(Pt,ct),Ge=Bn.relative(b,Q);if("."!==Ge.charAt(0))throw new S.ErrnoError(28);if("."!==(Ge=Bn.relative(I,U)).charAt(0))throw new S.ErrnoError(55);try{Ke=S.lookupNode(ae,yt)}catch(Cn){}if(Se!==Ke){var Pe=S.isDir(Se.mode),Xe=S.mayDelete(Pt,ct,Pe);if(Xe)throw new S.ErrnoError(Xe);if(Xe=Ke?S.mayDelete(ae,yt,Pe):S.mayCreate(ae,yt))throw new S.ErrnoError(Xe);if(!Pt.node_ops.rename)throw new S.ErrnoError(63);if(S.isMountpoint(Se)||Ke&&S.isMountpoint(Ke))throw new S.ErrnoError(10);if(ae!==Pt&&(Xe=S.nodePermissions(Pt,"w")))throw new S.ErrnoError(Xe);S.hashRemoveNode(Se);try{Pt.node_ops.rename(Se,ae,yt)}catch(Cn){throw Cn}finally{S.hashAddNode(Se)}}},rmdir:function(b){var U=S.lookupPath(b,{parent:!0}).node,Q=De.basename(b),ct=S.lookupNode(U,Q),yt=S.mayDelete(U,Q,!0);if(yt)throw new S.ErrnoError(yt);if(!U.node_ops.rmdir)throw new S.ErrnoError(63);if(S.isMountpoint(ct))throw new S.ErrnoError(10);U.node_ops.rmdir(U,Q),S.destroyNode(ct)},readdir:function(b){var U=S.lookupPath(b,{follow:!0}).node;if(!U.node_ops.readdir)throw new S.ErrnoError(54);return U.node_ops.readdir(U)},unlink:function(b){var U=S.lookupPath(b,{parent:!0}).node,Q=De.basename(b),ct=S.lookupNode(U,Q),yt=S.mayDelete(U,Q,!1);if(yt)throw new S.ErrnoError(yt);if(!U.node_ops.unlink)throw new S.ErrnoError(63);if(S.isMountpoint(ct))throw new S.ErrnoError(10);U.node_ops.unlink(U,Q),S.destroyNode(ct)},readlink:function(b){var U=S.lookupPath(b).node;if(!U)throw new S.ErrnoError(44);if(!U.node_ops.readlink)throw new S.ErrnoError(28);return Bn.resolve(S.getPath(U.parent),U.node_ops.readlink(U))},stat:function(b,I){var Q=S.lookupPath(b,{follow:!I}).node;if(!Q)throw new S.ErrnoError(44);if(!Q.node_ops.getattr)throw new S.ErrnoError(63);return Q.node_ops.getattr(Q)},lstat:function(b){return S.stat(b,!0)},chmod:function(b,I,U){var Q;if(!(Q="string"==typeof b?S.lookupPath(b,{follow:!U}).node:b).node_ops.setattr)throw new S.ErrnoError(63);Q.node_ops.setattr(Q,{mode:4095&I|-4096&Q.mode,timestamp:Date.now()})},lchmod:function(b,I){S.chmod(b,I,!0)},fchmod:function(b,I){var U=S.getStream(b);if(!U)throw new S.ErrnoError(8);S.chmod(U.node,I)},chown:function(b,I,U,Q){var ct;if(!(ct="string"==typeof b?S.lookupPath(b,{follow:!Q}).node:b).node_ops.setattr)throw new S.ErrnoError(63);ct.node_ops.setattr(ct,{timestamp:Date.now()})},lchown:function(b,I,U){S.chown(b,I,U,!0)},fchown:function(b,I,U){var Q=S.getStream(b);if(!Q)throw new S.ErrnoError(8);S.chown(Q.node,I,U)},truncate:function(b,I){if(I<0)throw new S.ErrnoError(28);var U;if(!(U="string"==typeof b?S.lookupPath(b,{follow:!0}).node:b).node_ops.setattr)throw new S.ErrnoError(63);if(S.isDir(U.mode))throw new S.ErrnoError(31);if(!S.isFile(U.mode))throw new S.ErrnoError(28);var ct=S.nodePermissions(U,"w");if(ct)throw new S.ErrnoError(ct);U.node_ops.setattr(U,{size:I,timestamp:Date.now()})},ftruncate:function(b,I){var U=S.getStream(b);if(!U)throw new S.ErrnoError(8);if(0==(2097155&U.flags))throw new S.ErrnoError(28);S.truncate(U.node,I)},utime:function(b,I,U){var ct=S.lookupPath(b,{follow:!0}).node;ct.node_ops.setattr(ct,{timestamp:Math.max(I,U)})},open:function(b,I,U,Q,ct){if(""===b)throw new S.ErrnoError(44);var yt;if(U=void 0===U?438:U,U=64&(I="string"==typeof I?S.modeStringToFlags(I):I)?4095&U|32768:0,"object"==typeof b)yt=b;else{b=De.normalize(b);try{yt=S.lookupPath(b,{follow:!(131072&I)}).node}catch(Ge){}}var Pt=!1;if(64&I)if(yt){if(128&I)throw new S.ErrnoError(20)}else yt=S.mknod(b,U,0),Pt=!0;if(!yt)throw new S.ErrnoError(44);if(S.isChrdev(yt.mode)&&(I&=-513),65536&I&&!S.isDir(yt.mode))throw new S.ErrnoError(54);if(!Pt){var ae=S.mayOpen(yt,I);if(ae)throw new S.ErrnoError(ae)}512&I&&S.truncate(yt,0),I&=-131713;var Se=S.createStream({node:yt,path:S.getPath(yt),id:yt.id,flags:I,mode:yt.mode,seekable:!0,position:0,stream_ops:yt.stream_ops,node_ops:yt.node_ops,ungotten:[],error:!1},Q,ct);return Se.stream_ops.open&&Se.stream_ops.open(Se),M.logReadFiles&&!(1&I)&&(S.readFiles||(S.readFiles={}),b in S.readFiles||(S.readFiles[b]=1)),Se},close:function(b){if(S.isClosed(b))throw new S.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(I){throw I}finally{S.closeStream(b.fd)}b.fd=null},isClosed:function(b){return null===b.fd},llseek:function(b,I,U){if(S.isClosed(b))throw new S.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new S.ErrnoError(70);if(0!=U&&1!=U&&2!=U)throw new S.ErrnoError(28);return b.position=b.stream_ops.llseek(b,I,U),b.ungotten=[],b.position},read:function(b,I,U,Q,ct){if(Q<0||ct<0)throw new S.ErrnoError(28);if(S.isClosed(b))throw new S.ErrnoError(8);if(1==(2097155&b.flags))throw new S.ErrnoError(8);if(S.isDir(b.node.mode))throw new S.ErrnoError(31);if(!b.stream_ops.read)throw new S.ErrnoError(28);var yt=void 0!==ct;if(yt){if(!b.seekable)throw new S.ErrnoError(70)}else ct=b.position;var kt=b.stream_ops.read(b,I,U,Q,ct);return yt||(b.position+=kt),kt},write:function(b,I,U,Q,ct,yt){if(Q<0||ct<0)throw new S.ErrnoError(28);if(S.isClosed(b))throw new S.ErrnoError(8);if(0==(2097155&b.flags))throw new S.ErrnoError(8);if(S.isDir(b.node.mode))throw new S.ErrnoError(31);if(!b.stream_ops.write)throw new S.ErrnoError(28);b.seekable&&1024&b.flags&&S.llseek(b,0,2);var kt=void 0!==ct;if(kt){if(!b.seekable)throw new S.ErrnoError(70)}else ct=b.position;var Pt=b.stream_ops.write(b,I,U,Q,ct,yt);return kt||(b.position+=Pt),Pt},allocate:function(b,I,U){if(S.isClosed(b))throw new S.ErrnoError(8);if(I<0||U<=0)throw new S.ErrnoError(28);if(0==(2097155&b.flags))throw new S.ErrnoError(8);if(!S.isFile(b.node.mode)&&!S.isDir(b.node.mode))throw new S.ErrnoError(43);if(!b.stream_ops.allocate)throw new S.ErrnoError(138);b.stream_ops.allocate(b,I,U)},mmap:function(b,I,U,Q,ct,yt){if(0!=(2&ct)&&0==(2&yt)&&2!=(2097155&b.flags))throw new S.ErrnoError(2);if(1==(2097155&b.flags))throw new S.ErrnoError(2);if(!b.stream_ops.mmap)throw new S.ErrnoError(43);return b.stream_ops.mmap(b,I,U,Q,ct,yt)},msync:function(b,I,U,Q,ct){return b&&b.stream_ops.msync?b.stream_ops.msync(b,I,U,Q,ct):0},munmap:function(b){return 0},ioctl:function(b,I,U){if(!b.stream_ops.ioctl)throw new S.ErrnoError(59);return b.stream_ops.ioctl(b,I,U)},readFile:function(b,I){if((I=I||{}).flags=I.flags||0,I.encoding=I.encoding||"binary","utf8"!==I.encoding&&"binary"!==I.encoding)throw new Error('Invalid encoding type "'+I.encoding+'"');var U,Q=S.open(b,I.flags),yt=S.stat(b).size,kt=new Uint8Array(yt);return S.read(Q,kt,0,yt,0),"utf8"===I.encoding?U=Mn(kt,0):"binary"===I.encoding&&(U=kt),S.close(Q),U},writeFile:function(b,I,U){(U=U||{}).flags=U.flags||577;var Q=S.open(b,U.flags,U.mode);if("string"==typeof I){var ct=new Uint8Array(ni(I)+1),yt=fn(I,ct,0,ct.length);S.write(Q,ct,0,yt,void 0,U.canOwn)}else{if(!ArrayBuffer.isView(I))throw new Error("Unsupported data type");S.write(Q,I,0,I.byteLength,void 0,U.canOwn)}S.close(Q)},cwd:function(){return S.currentPath},chdir:function(b){var I=S.lookupPath(b,{follow:!0});if(null===I.node)throw new S.ErrnoError(44);if(!S.isDir(I.node.mode))throw new S.ErrnoError(54);var U=S.nodePermissions(I.node,"x");if(U)throw new S.ErrnoError(U);S.currentPath=I.path},createDefaultDirectories:function(){S.mkdir("/tmp"),S.mkdir("/home"),S.mkdir("/home/web_user")},createDefaultDevices:function(){S.mkdir("/dev"),S.registerDevice(S.makedev(1,3),{read:function(){return 0},write:function(I,U,Q,ct,yt){return ct}}),S.mkdev("/dev/null",S.makedev(1,3)),pn.register(S.makedev(5,0),pn.default_tty_ops),pn.register(S.makedev(6,0),pn.default_tty1_ops),S.mkdev("/dev/tty",S.makedev(5,0)),S.mkdev("/dev/tty1",S.makedev(6,0));var b=function Mi(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var b=new Uint8Array(1);return function(){return crypto.getRandomValues(b),b[0]}}return function(){Dn("randomDevice")}}();S.createDevice("/dev","random",b),S.createDevice("/dev","urandom",b),S.mkdir("/dev/shm"),S.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){S.mkdir("/proc");var b=S.mkdir("/proc/self");S.mkdir("/proc/self/fd"),S.mount({mount:function(){var I=S.createNode(b,"fd",16895,73);return I.node_ops={lookup:function(U,Q){var yt=S.getStream(+Q);if(!yt)throw new S.ErrnoError(8);var kt={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return yt.path}}};return kt.parent=kt,kt}},I}},{},"/proc/self/fd")},createStandardStreams:function(){M.stdin?S.createDevice("/dev","stdin",M.stdin):S.symlink("/dev/tty","/dev/stdin"),M.stdout?S.createDevice("/dev","stdout",null,M.stdout):S.symlink("/dev/tty","/dev/stdout"),M.stderr?S.createDevice("/dev","stderr",null,M.stderr):S.symlink("/dev/tty1","/dev/stderr"),S.open("/dev/stdin",0),S.open("/dev/stdout",1),S.open("/dev/stderr",1)},ensureErrnoError:function(){S.ErrnoError||(S.ErrnoError=function(I,U){this.node=U,this.setErrno=function(Q){this.errno=Q},this.setErrno(I),this.message="FS error"},S.ErrnoError.prototype=new Error,S.ErrnoError.prototype.constructor=S.ErrnoError,[44].forEach(function(b){S.genericErrors[b]=new S.ErrnoError(b),S.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){S.ensureErrnoError(),S.nameTable=new Array(4096),S.mount(X,{},"/"),S.createDefaultDirectories(),S.createDefaultDevices(),S.createSpecialDirectories(),S.filesystems={MEMFS:X}},init:function(b,I,U){S.init.initialized=!0,S.ensureErrnoError(),M.stdin=b||M.stdin,M.stdout=I||M.stdout,M.stderr=U||M.stderr,S.createStandardStreams()},quit:function(){S.init.initialized=!1;var b=M._fflush;b&&b(0);for(var I=0;I<S.streams.length;I++){var U=S.streams[I];!U||S.close(U)}},getMode:function(b,I){var U=0;return b&&(U|=365),I&&(U|=146),U},findObject:function(b,I){var U=S.analyzePath(b,I);return U.exists?U.object:null},analyzePath:function(b,I){try{b=(U=S.lookupPath(b,{follow:!I})).path}catch(ct){}var Q={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var U=S.lookupPath(b,{parent:!0});Q.parentExists=!0,Q.parentPath=U.path,Q.parentObject=U.node,Q.name=De.basename(b),U=S.lookupPath(b,{follow:!I}),Q.exists=!0,Q.path=U.path,Q.object=U.node,Q.name=U.node.name,Q.isRoot="/"===U.path}catch(ct){Q.error=ct.errno}return Q},createPath:function(b,I,U,Q){b="string"==typeof b?b:S.getPath(b);for(var ct=I.split("/").reverse();ct.length;){var yt=ct.pop();if(yt){var kt=De.join2(b,yt);try{S.mkdir(kt)}catch(Pt){}b=kt}}return kt},createFile:function(b,I,U,Q,ct){var yt=De.join2("string"==typeof b?b:S.getPath(b),I),kt=S.getMode(Q,ct);return S.create(yt,kt)},createDataFile:function(b,I,U,Q,ct,yt){var kt=I?De.join2("string"==typeof b?b:S.getPath(b),I):b,Pt=S.getMode(Q,ct),ae=S.create(kt,Pt);if(U){if("string"==typeof U){for(var Se=new Array(U.length),Ge=0,Ke=U.length;Ge<Ke;++Ge)Se[Ge]=U.charCodeAt(Ge);U=Se}S.chmod(ae,146|Pt);var Pe=S.open(ae,577);S.write(Pe,U,0,U.length,0,yt),S.close(Pe),S.chmod(ae,Pt)}return ae},createDevice:function(b,I,U,Q){var ct=De.join2("string"==typeof b?b:S.getPath(b),I),yt=S.getMode(!!U,!!Q);S.createDevice.major||(S.createDevice.major=64);var kt=S.makedev(S.createDevice.major++,0);return S.registerDevice(kt,{open:function(Pt){Pt.seekable=!1},close:function(Pt){Q&&Q.buffer&&Q.buffer.length&&Q(10)},read:function(Pt,ae,Se,Ge,Ke){for(var Pe=0,Xe=0;Xe<Ge;Xe++){var Cn;try{Cn=U()}catch(di){throw new S.ErrnoError(29)}if(void 0===Cn&&0===Pe)throw new S.ErrnoError(6);if(null==Cn)break;Pe++,ae[Se+Xe]=Cn}return Pe&&(Pt.node.timestamp=Date.now()),Pe},write:function(Pt,ae,Se,Ge,Ke){for(var Pe=0;Pe<Ge;Pe++)try{Q(ae[Se+Pe])}catch(Xe){throw new S.ErrnoError(29)}return Ge&&(Pt.node.timestamp=Date.now()),Pe}}),S.mkdev(ct,yt,kt)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Nt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{b.contents=ye(Nt(b.url),!0),b.usedBytes=b.contents.length}catch(I){throw new S.ErrnoError(29)}},createLazyFile:function(b,I,U,Q,ct){function yt(){this.lengthKnown=!1,this.chunks=[]}if(yt.prototype.get=function(Pe){if(!(Pe>this.length-1||Pe<0)){var Xe=Pe%this.chunkSize;return this.getter(Pe/this.chunkSize|0)[Xe]}},yt.prototype.setDataGetter=function(Pe){this.getter=Pe},yt.prototype.cacheLength=function(){var Pe=new XMLHttpRequest;if(Pe.open("HEAD",U,!1),Pe.send(null),!(Pe.status>=200&&Pe.status<300||304===Pe.status))throw new Error("Couldn't load "+U+". Status: "+Pe.status);var Cn,Xe=Number(Pe.getResponseHeader("Content-length")),di=(Cn=Pe.getResponseHeader("Accept-Ranges"))&&"bytes"===Cn,qi=(Cn=Pe.getResponseHeader("Content-Encoding"))&&"gzip"===Cn,ki=1048576;di||(ki=Xe);var ii=this;ii.setDataGetter(function(Oi){var ar=Oi*ki,si=(Oi+1)*ki-1;if(si=Math.min(si,Xe-1),void 0===ii.chunks[Oi]&&(ii.chunks[Oi]=function(Oi,ar){if(Oi>ar)throw new Error("invalid range ("+Oi+", "+ar+") or no bytes requested!");if(ar>Xe-1)throw new Error("only "+Xe+" bytes available! programmer error!");var si=new XMLHttpRequest;if(si.open("GET",U,!1),Xe!==ki&&si.setRequestHeader("Range","bytes="+Oi+"-"+ar),"undefined"!=typeof Uint8Array&&(si.responseType="arraybuffer"),si.overrideMimeType&&si.overrideMimeType("text/plain; charset=x-user-defined"),si.send(null),!(si.status>=200&&si.status<300||304===si.status))throw new Error("Couldn't load "+U+". Status: "+si.status);return void 0!==si.response?new Uint8Array(si.response||[]):ye(si.responseText||"",!0)}(ar,si)),void 0===ii.chunks[Oi])throw new Error("doXHR failed!");return ii.chunks[Oi]}),(qi||!Xe)&&(ki=Xe=1,Xe=this.getter(0).length,ki=Xe,_e("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Xe,this._chunkSize=ki,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Pt,ae=S.createFile(b,I,Pt={isDevice:!1,url:U},Q,ct);Pt.contents?ae.contents=Pt.contents:Pt.url&&(ae.contents=null,ae.url=Pt.url),Object.defineProperties(ae,{usedBytes:{get:function(){return this.contents.length}}});var Se={};return Object.keys(ae.stream_ops).forEach(function(Ke){var Pe=ae.stream_ops[Ke];Se[Ke]=function(){return S.forceLoadFile(ae),Pe.apply(null,arguments)}}),Se.read=function(Pe,Xe,Cn,di,qi){S.forceLoadFile(ae);var ki=Pe.node.contents;if(qi>=ki.length)return 0;var fi=Math.min(ki.length-qi,di);if(ki.slice)for(var ii=0;ii<fi;ii++)Xe[Cn+ii]=ki[qi+ii];else for(ii=0;ii<fi;ii++)Xe[Cn+ii]=ki.get(qi+ii);return fi},ae.stream_ops=Se,ae},createPreloadedFile:function(b,I,U,Q,ct,yt,kt,Pt,ae,Se){Browser.init();var Ge=I?Bn.resolve(De.join2(b,I)):b;function Ke(Pe){function Xe(di){Se&&Se(),Pt||S.createDataFile(b,I,di,Q,ct,ae),yt&&yt(),Zn()}var Cn=!1;M.preloadPlugins.forEach(function(di){Cn||di.canHandle(Ge)&&(di.handle(Pe,Ge,Xe,function(){kt&&kt(),Zn()}),Cn=!0)}),Cn||Xe(Pe)}nn(),"string"==typeof U?function ht(b,I,U,Q){var ct=Q?"":"al "+b;Jt(b,function(yt){gn(yt,'Loading data file "'+b+'" failed (no arrayBuffer).'),I(new Uint8Array(yt)),ct&&Zn()},function(yt){if(!U)throw'Loading data file "'+b+'" failed.';U()}),ct&&nn()}(U,function(Pe){Ke(Pe)},kt):Ke(U)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,I,U){I=I||function(){},U=U||function(){};var Q=S.indexedDB();try{var ct=Q.open(S.DB_NAME(),S.DB_VERSION)}catch(yt){return U(yt)}ct.onupgradeneeded=function(){_e("creating db"),ct.result.createObjectStore(S.DB_STORE_NAME)},ct.onsuccess=function(){var Pt=ct.result.transaction([S.DB_STORE_NAME],"readwrite"),ae=Pt.objectStore(S.DB_STORE_NAME),Se=0,Ge=0,Ke=b.length;function Pe(){0==Ge?I():U()}b.forEach(function(Xe){var Cn=ae.put(S.analyzePath(Xe).object.contents,Xe);Cn.onsuccess=function(){++Se+Ge==Ke&&Pe()},Cn.onerror=function(){Ge++,Se+Ge==Ke&&Pe()}}),Pt.onerror=U},ct.onerror=U},loadFilesFromDB:function(b,I,U){I=I||function(){},U=U||function(){};var Q=S.indexedDB();try{var ct=Q.open(S.DB_NAME(),S.DB_VERSION)}catch(yt){return U(yt)}ct.onupgradeneeded=U,ct.onsuccess=function(){var kt=ct.result;try{var Pt=kt.transaction([S.DB_STORE_NAME],"readonly")}catch(Xe){return void U(Xe)}var ae=Pt.objectStore(S.DB_STORE_NAME),Se=0,Ge=0,Ke=b.length;function Pe(){0==Ge?I():U()}b.forEach(function(Xe){var Cn=ae.get(Xe);Cn.onsuccess=function(){S.analyzePath(Xe).exists&&S.unlink(Xe),S.createDataFile(De.dirname(Xe),De.basename(Xe),Cn.result,!0,!0,!0),++Se+Ge==Ke&&Pe()},Cn.onerror=function(){Ge++,Se+Ge==Ke&&Pe()}}),Pt.onerror=U},ct.onerror=U}},wt={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(b,I,U){if("/"===I[0])return I;var Q;if(-100===b)Q=S.cwd();else{var ct=S.getStream(b);if(!ct)throw new S.ErrnoError(8);Q=ct.path}if(0==I.length){if(!U)throw new S.ErrnoError(44);return Q}return De.join2(Q,I)},doStat:function(b,I,U){try{var Q=b(I)}catch(ct){if(ct&&ct.node&&De.normalize(I)!==De.normalize(S.getPath(ct.node)))return-54;throw ct}return Be[U>>2]=Q.dev,Be[U+4>>2]=0,Be[U+8>>2]=Q.ino,Be[U+12>>2]=Q.mode,Be[U+16>>2]=Q.nlink,Be[U+20>>2]=Q.uid,Be[U+24>>2]=Q.gid,Be[U+28>>2]=Q.rdev,Be[U+32>>2]=0,bn=[Q.size>>>0,(un=Q.size,+Math.abs(un)>=1?un>0?(0|Math.min(+Math.floor(un/4294967296),4294967295))>>>0:~~+Math.ceil((un-+(~~un>>>0))/4294967296)>>>0:0)],Be[U+40>>2]=bn[0],Be[U+44>>2]=bn[1],Be[U+48>>2]=4096,Be[U+52>>2]=Q.blocks,Be[U+56>>2]=Q.atime.getTime()/1e3|0,Be[U+60>>2]=0,Be[U+64>>2]=Q.mtime.getTime()/1e3|0,Be[U+68>>2]=0,Be[U+72>>2]=Q.ctime.getTime()/1e3|0,Be[U+76>>2]=0,bn=[Q.ino>>>0,(un=Q.ino,+Math.abs(un)>=1?un>0?(0|Math.min(+Math.floor(un/4294967296),4294967295))>>>0:~~+Math.ceil((un-+(~~un>>>0))/4294967296)>>>0:0)],Be[U+80>>2]=bn[0],Be[U+84>>2]=bn[1],0},doMsync:function(b,I,U,Q,ct){var yt=En.slice(b,b+U);S.msync(I,yt,ct,U,Q)},doMkdir:function(b,I){return"/"===(b=De.normalize(b))[b.length-1]&&(b=b.substr(0,b.length-1)),S.mkdir(b,I,0),0},doMknod:function(b,I,U){switch(61440&I){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return S.mknod(b,I,U),0},doReadlink:function(b,I,U){if(U<=0)return-28;var Q=S.readlink(b),ct=Math.min(U,ni(Q)),yt=sn[I+ct];return function Wn(b,I,U){return fn(b,En,I,U)}(Q,I,U+1),sn[I+ct]=yt,ct},doAccess:function(b,I){if(-8&I)return-28;var Q=S.lookupPath(b,{follow:!0}).node;if(!Q)return-44;var ct="";return 4&I&&(ct+="r"),2&I&&(ct+="w"),1&I&&(ct+="x"),ct&&S.nodePermissions(Q,ct)?-2:0},doDup:function(b,I,U){var Q=S.getStream(U);return Q&&S.close(Q),S.open(b,I,0,U,U).fd},doReadv:function(b,I,U,Q){for(var ct=0,yt=0;yt<U;yt++){var Pt=Be[I+(8*yt+4)>>2],ae=S.read(b,sn,Be[I+8*yt>>2],Pt,Q);if(ae<0)return-1;if(ct+=ae,ae<Pt)break}return ct},doWritev:function(b,I,U,Q){for(var ct=0,yt=0;yt<U;yt++){var ae=S.write(b,sn,Be[I+8*yt>>2],Be[I+(8*yt+4)>>2],Q);if(ae<0)return-1;ct+=ae}return ct},varargs:void 0,get:function(){return wt.varargs+=4,Be[wt.varargs-4>>2]},getStr:function(b){return oe(b)},getStreamFromFD:function(b){var I=S.getStream(b);if(!I)throw new S.ErrnoError(8);return I},get64:function(b,I){return b}};var Yt=[];function mt(b){try{return Tn.grow(b-je.byteLength+65535>>>16),Rn(Tn.buffer),1}catch(I){}}var At={};function te(){if(!te.strings){var I={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ne||"./this.program"};for(var U in At)void 0===At[U]?delete I[U]:I[U]=At[U];var Q=[];for(var U in I)Q.push(U+"="+I[U]);te.strings=Q}return te.strings}var ze=function(b,I,U,Q){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=S.nextInode++,this.name=I,this.mode=U,this.node_ops={},this.stream_ops={},this.rdev=Q};function ye(b,I,U){var Q=U>0?U:ni(b)+1,ct=new Array(Q),yt=fn(b,ct,0,ct.length);return I&&(ct.length=yt),ct}Object.defineProperties(ze.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(b){b?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(b){b?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return S.isDir(this.mode)}},isDevice:{get:function(){return S.isChrdev(this.mode)}}}),S.FSNode=ze,S.staticInit();var Ye={h:function Ot(b,I,U){wt.varargs=U;try{var Q=wt.getStr(b),ct=U?wt.get():0;return S.open(Q,I,ct).fd}catch(kt){if(void 0===S||!(kt instanceof S.ErrnoError))throw kt;return-kt.errno}},b:function Bt(){Dn("")},a:function qt(b,I,U){var Q=function re(b,I){var U;for(Yt.length=0,I>>=2;U=En[b++];){var Q=U<105;Q&&1&I&&I++,Yt.push(Q?ci[I++>>1]:Be[I]),++I}return Yt}(I,U);return Kn[b].apply(null,Q)},k:function j(b,I,U){En.copyWithin(b,I,I+U)},e:function Ct(b){var I=En.length,U=2147483648;if((b>>>=0)>U)return!1;for(var Q=1;Q<=4;Q*=2){var ct=I*(1+.2/Q);if(ct=Math.min(ct,b+100663296),mt(Math.min(U,an(Math.max(b,ct),65536))))return!0}return!1},f:function Dt(b,I){var U=0;return te().forEach(function(Q,ct){var yt=I+U;Be[b+4*ct>>2]=yt,function zn(b,I,U){for(var Q=0;Q<b.length;++Q)sn[I++>>0]=b.charCodeAt(Q);U||(sn[I>>0]=0)}(Q,yt),U+=Q.length+1}),0},g:function de(b,I){var U=te();Be[b>>2]=U.length;var Q=0;return U.forEach(function(ct){Q+=ct.length+1}),Be[I>>2]=Q,0},d:function O(b){try{var I=wt.getStreamFromFD(b);return S.close(I),0}catch(U){if(void 0===S||!(U instanceof S.ErrnoError))throw U;return U.errno}},i:function le(b,I,U,Q){try{var ct=wt.getStreamFromFD(b),yt=wt.doReadv(ct,I,U);return Be[Q>>2]=yt,0}catch(kt){if(void 0===S||!(kt instanceof S.ErrnoError))throw kt;return kt.errno}},j:function Le(b,I,U,Q,ct){try{var yt=wt.getStreamFromFD(b),Pt=4294967296*U+(I>>>0),ae=9007199254740992;return Pt<=-ae||Pt>=ae?-61:(S.llseek(yt,Pt,Q),bn=[yt.position>>>0,(un=yt.position,+Math.abs(un)>=1?un>0?(0|Math.min(+Math.floor(un/4294967296),4294967295))>>>0:~~+Math.ceil((un-+(~~un>>>0))/4294967296)>>>0:0)],Be[ct>>2]=bn[0],Be[ct+4>>2]=bn[1],yt.getdents&&0===Pt&&0===Q&&(yt.getdents=null),0)}catch(Se){if(void 0===S||!(Se instanceof S.ErrnoError))throw Se;return Se.errno}},c:function ke(b,I,U,Q){try{var ct=wt.getStreamFromFD(b),yt=wt.doWritev(ct,I,U);return Be[Q>>2]=yt,0}catch(kt){if(void 0===S||!(kt instanceof S.ErrnoError))throw kt;return kt.errno}},l:function rn(b){var I=Date.now();return Be[b>>2]=I/1e3|0,Be[b+4>>2]=I%1e3*1e3|0,0}};(function On(){var b={a:Ye};function I(kt,Pt){M.asm=kt.exports,Rn((Tn=M.asm.m).buffer),_n=M.asm.G,function se(b){ti.unshift(b)}(M.asm.n),Zn()}function U(kt){I(kt.instance)}function Q(kt){return function Ai(){return Re||"function"!=typeof fetch?Promise.resolve().then(function(){return ei(vn)}):fetch(vn,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+vn+"'";return b.arrayBuffer()}).catch(function(){return ei(vn)})}().then(function(Pt){return WebAssembly.instantiate(Pt,b)}).then(function(Pt){return Pt}).then(kt,function(Pt){Te("failed to asynchronously prepare wasm: "+Pt),Dn(Pt)})}if(nn(),M.instantiateWasm)try{return M.instantiateWasm(b,I)}catch(kt){return Te("Module.instantiateWasm callback failed with error: "+kt),!1}return function ct(){return Re||"function"!=typeof WebAssembly.instantiateStreaming||Di(vn)||"function"!=typeof fetch?Q(U):fetch(vn,{credentials:"same-origin"}).then(function(kt){return WebAssembly.instantiateStreaming(kt,b).then(U,function(ae){return Te("wasm streaming compile failed: "+ae),Te("falling back to ArrayBuffer instantiation"),Q(U)})})}().catch(It),{}})(),M.___wasm_call_ctors=function(){return(M.___wasm_call_ctors=M.asm.n).apply(null,arguments)};var qe,nt=M._emscripten_bind_CExpat_CExpat_0=function(){return(nt=M._emscripten_bind_CExpat_CExpat_0=M.asm.o).apply(null,arguments)},_t=M._emscripten_bind_CExpat_version_0=function(){return(_t=M._emscripten_bind_CExpat_version_0=M.asm.p).apply(null,arguments)},gt=M._emscripten_bind_CExpat_create_0=function(){return(gt=M._emscripten_bind_CExpat_create_0=M.asm.q).apply(null,arguments)},St=M._emscripten_bind_CExpat_destroy_0=function(){return(St=M._emscripten_bind_CExpat_destroy_0=M.asm.r).apply(null,arguments)},Ht=M._emscripten_bind_CExpat_parse_1=function(){return(Ht=M._emscripten_bind_CExpat_parse_1=M.asm.s).apply(null,arguments)},ee=M._emscripten_bind_CExpat_tag_0=function(){return(ee=M._emscripten_bind_CExpat_tag_0=M.asm.t).apply(null,arguments)},Qt=M._emscripten_bind_CExpat_attrs_0=function(){return(Qt=M._emscripten_bind_CExpat_attrs_0=M.asm.u).apply(null,arguments)},me=M._emscripten_bind_CExpat_content_0=function(){return(me=M._emscripten_bind_CExpat_content_0=M.asm.v).apply(null,arguments)},xe=M._emscripten_bind_CExpat_startElement_0=function(){return(xe=M._emscripten_bind_CExpat_startElement_0=M.asm.w).apply(null,arguments)},Wt=M._emscripten_bind_CExpat_endElement_0=function(){return(Wt=M._emscripten_bind_CExpat_endElement_0=M.asm.x).apply(null,arguments)},ce=M._emscripten_bind_CExpat_characterData_0=function(){return(ce=M._emscripten_bind_CExpat_characterData_0=M.asm.y).apply(null,arguments)},Ie=M._emscripten_bind_CExpat___destroy___0=function(){return(Ie=M._emscripten_bind_CExpat___destroy___0=M.asm.z).apply(null,arguments)},Ee=M._emscripten_bind_VoidPtr___destroy___0=function(){return(Ee=M._emscripten_bind_VoidPtr___destroy___0=M.asm.A).apply(null,arguments)},Ue=M._emscripten_bind_CExpatJS_CExpatJS_0=function(){return(Ue=M._emscripten_bind_CExpatJS_CExpatJS_0=M.asm.B).apply(null,arguments)},Jn=M._emscripten_bind_CExpatJS_startElement_0=function(){return(Jn=M._emscripten_bind_CExpatJS_startElement_0=M.asm.C).apply(null,arguments)},Ln=M._emscripten_bind_CExpatJS_endElement_0=function(){return(Ln=M._emscripten_bind_CExpatJS_endElement_0=M.asm.D).apply(null,arguments)},kn=M._emscripten_bind_CExpatJS_characterData_0=function(){return(kn=M._emscripten_bind_CExpatJS_characterData_0=M.asm.E).apply(null,arguments)},He=M._emscripten_bind_CExpatJS___destroy___0=function(){return(He=M._emscripten_bind_CExpatJS___destroy___0=M.asm.F).apply(null,arguments)};function Qn(b){function I(){qe||(qe=!0,M.calledRun=!0,!Fe&&(function $n(){!M.noFSInit&&!S.init.initialized&&S.init(),S.ignorePermissions=!1,ui(ti)}(),ft(M),M.onRuntimeInitialized&&M.onRuntimeInitialized(),function Tt(){if(M.postRun)for("function"==typeof M.postRun&&(M.postRun=[M.postRun]);M.postRun.length;)b=M.postRun.shift(),Me.unshift(b);var b;ui(Me)}()))}ve>0||(function Xn(){if(M.preRun)for("function"==typeof M.preRun&&(M.preRun=[M.preRun]);M.preRun.length;)b=M.preRun.shift(),Yn.unshift(b);var b;ui(Yn)}(),ve>0)||(M.setStatus?(M.setStatus("Running..."),setTimeout(function(){setTimeout(function(){M.setStatus("")},1),I()},1)):I())}if(M._malloc=function(){return(M._malloc=M.asm.H).apply(null,arguments)},Ze=function b(){qe||Qn(),qe||(Ze=b)},M.run=Qn,M.preInit)for("function"==typeof M.preInit&&(M.preInit=[M.preInit]);M.preInit.length>0;)M.preInit.pop()();function on(){}function cn(b){return(b||on).__cache__}function Un(b,I){var U=cn(I),Q=U[b];return Q||((Q=Object.create((I||on).prototype)).ptr=b,U[b]=Q)}Qn(),(on.prototype=Object.create(on.prototype)).constructor=on,on.prototype.__class__=on,on.__cache__={},M.WrapperObject=on,M.getCache=cn,M.wrapPointer=Un,M.castObject=function Hi(b,I){return Un(b.ptr,I)},M.NULL=Un(0),M.destroy=function hi(b){if(!b.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";b.__destroy__(),delete cn(b.__class__)[b.ptr]},M.compare=function zi(b,I){return b.ptr===I.ptr},M.getPointer=function jn(b){return b.ptr},M.getClass=function gi(b){return b.__class__};var xn={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(xn.needed){for(var b=0;b<xn.temps.length;b++)M._free(xn.temps[b]);xn.temps.length=0,M._free(xn.buffer),xn.buffer=0,xn.size+=xn.needed,xn.needed=0}xn.buffer||(xn.size+=128,xn.buffer=M._malloc(xn.size),gn(xn.buffer)),xn.pos=0},alloc:function(b,I){gn(xn.buffer);var ct,Q=b.length*I.BYTES_PER_ELEMENT;return xn.pos+(Q=Q+7&-8)>=xn.size?(gn(Q>0),xn.needed+=Q,ct=M._malloc(Q),xn.temps.push(ct)):(ct=xn.buffer+xn.pos,xn.pos+=Q),ct},copy:function(b,I,U){switch(U>>>=0,I.BYTES_PER_ELEMENT){case 2:U>>>=1;break;case 4:U>>>=2;break;case 8:U>>>=3}for(var ct=0;ct<b.length;ct++)I[U+ct]=b[ct]}};function Ft(){this.ptr=nt(),cn(Ft)[this.ptr]=this}function be(){throw"cannot construct a VoidPtr, no constructor in IDL"}function jt(){this.ptr=Ue(),cn(jt)[this.ptr]=this}return(Ft.prototype=Object.create(on.prototype)).constructor=Ft,Ft.prototype.__class__=Ft,Ft.__cache__={},M.CExpat=Ft,Ft.prototype.version=Ft.prototype.version=function(){return oe(_t(this.ptr))},Ft.prototype.create=Ft.prototype.create=function(){return!!gt(this.ptr)},Ft.prototype.destroy=Ft.prototype.destroy=function(){St(this.ptr)},Ft.prototype.parse=Ft.prototype.parse=function(b){var I=this.ptr;return xn.prepare(),b=b&&"object"==typeof b?b.ptr:function Li(b){if("string"==typeof b){var I=ye(b),U=xn.alloc(I,sn);return xn.copy(I,sn,U),U}return b}(b),!!Ht(I,b)},Ft.prototype.tag=Ft.prototype.tag=function(){return oe(ee(this.ptr))},Ft.prototype.attrs=Ft.prototype.attrs=function(){return oe(Qt(this.ptr))},Ft.prototype.content=Ft.prototype.content=function(){return oe(me(this.ptr))},Ft.prototype.startElement=Ft.prototype.startElement=function(){xe(this.ptr)},Ft.prototype.endElement=Ft.prototype.endElement=function(){Wt(this.ptr)},Ft.prototype.characterData=Ft.prototype.characterData=function(){ce(this.ptr)},Ft.prototype.__destroy__=Ft.prototype.__destroy__=function(){Ie(this.ptr)},(be.prototype=Object.create(on.prototype)).constructor=be,be.prototype.__class__=be,be.__cache__={},M.VoidPtr=be,be.prototype.__destroy__=be.prototype.__destroy__=function(){Ee(this.ptr)},(jt.prototype=Object.create(Ft.prototype)).constructor=jt,jt.prototype.__class__=jt,jt.__cache__={},M.CExpatJS=jt,jt.prototype.startElement=jt.prototype.startElement=function(){Jn(this.ptr)},jt.prototype.endElement=jt.prototype.endElement=function(){Ln(this.ptr)},jt.prototype.characterData=jt.prototype.characterData=function(){kn(this.ptr)},jt.prototype.__destroy__=jt.prototype.__destroy__=function(){He(this.ptr)},G.ready},x.exports=ut;var _=Object.freeze(u({__proto__:null,default:x.exports},[x.exports]));var t=function m(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}().__hpcc_wasmFolder||void 0;function c(Y){if(!arguments.length)return t;var K=t;return t=Y,K}function f(Y,K,ut){var it=Y.default||Y;return it.__hpcc_promise||(it.__hpcc_promise=it({wasmBinary:ut,locateFile:function(G,M){return"".concat(function h(Y,K){for(;Y.charAt(Y.length-1)===K;)Y=Y.substring(0,Y.length-1);return Y}(K||c()||M||".","/"),"/").concat(function g(Y,K){for(;Y.charAt(0)===K;)Y=Y.substring(1);return Y}(G,"/"))}})),it.__hpcc_promise}var p=function(){function Y(K,ut){this.tag=K,this.attrs=ut,this._content=""}return Object.defineProperty(Y.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Y.prototype.appendContent=function(K){this._content+=K},Y}(),C=function(){function Y(){this._stack=[]}return Y.prototype.parse=function(K,ut,it){return N(K,this,ut,it)},Y.prototype.top=function(){return this._stack[this._stack.length-1]},Y.prototype.startElement=function(K,ut){var it=new p(K,ut);return this._stack.push(it),it},Y.prototype.endElement=function(K){return this._stack.pop()},Y.prototype.characterData=function(K){this.top().appendContent(K)},Y}();function N(Y,K,ut,it){return f(_,ut,it).then(function(G){var M=new G.CExpatJS;M.startElement=function(){K.startElement(this.tag(),function A(Y){var K={},ut=Y,it="".concat(String.fromCharCode(1)),G="".concat(it).concat(it);return ut.split(G).filter(function(M){return!!M}).forEach(function(M){var ft=M.split(it);K[ft[0]]=ft[1]}),K}(this.attrs()))},M.endElement=function(){K.endElement(this.tag())},M.characterData=function(){K.characterData(this.content())},M.create();var ft=M.parse(Y);return M.destroy(),G.destroy(M),ft})}var P={exports:{}};!function(Y,K){var ut=function(){var it="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(G){var ft,It,M=void 0!==(G=G||{})?G:{};M.ready=new Promise(function(y,D){ft=y,It=D});var zt,Zt={};for(zt in M)M.hasOwnProperty(zt)&&(Zt[zt]=M[zt]);var Jt,ge,ne="./this.program",Ut=function(y,D){throw D},pt="";"undefined"!=typeof document&&document.currentScript&&(pt=document.currentScript.src),it&&(pt=it),pt=0!==pt.indexOf("blob:")?pt.substr(0,pt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Jt=function(y){var D=new XMLHttpRequest;return D.open("GET",y,!1),D.send(null),D.responseText},ge=function(y,D,B){var $=new XMLHttpRequest;$.open("GET",y,!0),$.responseType="arraybuffer",$.onload=function(){200==$.status||0==$.status&&$.response?D($.response):B()},$.onerror=B,$.send(null)};var Te=M.print||console.log.bind(console),Re=M.printErr||console.warn.bind(console);for(zt in Zt)Zt.hasOwnProperty(zt)&&(M[zt]=Zt[zt]);Zt=null,M.thisProgram&&(ne=M.thisProgram),M.quit&&(Ut=M.quit);var Ve,Tn=0;M.wasmBinary&&(Ve=M.wasmBinary);var Mn=M.noExitRuntime||!0;"object"!=typeof WebAssembly&&bn("no native wasm support detected");var oe,fn=!1;function Wn(y,D){y||bn("Assertion failed: "+D)}var Rn,_n,Yn,ti,Me,Xn,ni="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function zn(y,D,B){for(var $=D+B,dt=D;y[dt]&&!(dt>=$);)++dt;if(dt-D>16&&y.subarray&&ni)return ni.decode(y.subarray(D,dt));for(var Et="";D<dt;){var Lt=y[D++];if(128&Lt){var Vt=63&y[D++];if(192!=(224&Lt)){var ue=63&y[D++];if((Lt=224==(240&Lt)?(15&Lt)<<12|Vt<<6|ue:(7&Lt)<<18|Vt<<12|ue<<6|63&y[D++])<65536)Et+=String.fromCharCode(Lt);else{var We=Lt-65536;Et+=String.fromCharCode(55296|We>>10,56320|1023&We)}}else Et+=String.fromCharCode((31&Lt)<<6|Vt)}else Et+=String.fromCharCode(Lt)}return Et}function an(y,D){return y?zn(Yn,y,D):""}function je(y,D,B,$){if(!($>0))return 0;for(var dt=B,Et=B+$-1,Lt=0;Lt<y.length;++Lt){var Vt=y.charCodeAt(Lt);if(Vt>=55296&&Vt<=57343&&(Vt=65536+((1023&Vt)<<10)|1023&y.charCodeAt(++Lt)),Vt<=127){if(B>=Et)break;D[B++]=Vt}else if(Vt<=2047){if(B+1>=Et)break;D[B++]=192|Vt>>6,D[B++]=128|63&Vt}else if(Vt<=65535){if(B+2>=Et)break;D[B++]=224|Vt>>12,D[B++]=128|Vt>>6&63,D[B++]=128|63&Vt}else{if(B+3>=Et)break;D[B++]=240|Vt>>18,D[B++]=128|Vt>>12&63,D[B++]=128|Vt>>6&63,D[B++]=128|63&Vt}}return D[B]=0,B-dt}function En(y){for(var D=0,B=0;B<y.length;++B){var $=y.charCodeAt(B);$>=55296&&$<=57343&&($=65536+((1023&$)<<10)|1023&y.charCodeAt(++B)),$<=127?++D:D+=$<=2047?2:$<=65535?3:4}return D}function ci(y,D){return y%D>0&&(y+=D-y%D),y}function $n(y){Rn=y,M.HEAP8=_n=new Int8Array(y),M.HEAP16=ti=new Int16Array(y),M.HEAP32=Me=new Int32Array(y),M.HEAPU8=Yn=new Uint8Array(y),M.HEAPU16=new Uint16Array(y),M.HEAPU32=new Uint32Array(y),M.HEAPF32=new Float32Array(y),M.HEAPF64=Xn=new Float64Array(y)}var Tt,Gt=[],se=[],pe=[];var vn=0,ei=null;function On(y){vn++,M.monitorRunDependencies&&M.monitorRunDependencies(vn)}function un(y){if(vn--,M.monitorRunDependencies&&M.monitorRunDependencies(vn),0==vn&&ei){var D=ei;ei=null,D()}}function bn(y){M.onAbort&&M.onAbort(y),Re(y="Aborted("+y+")"),fn=!0,y+=". Build with -s ASSERTIONS=1 for more info.";var D=new WebAssembly.RuntimeError(y);throw It(D),D}M.preloadedImages={},M.preloadedAudios={};var Nn;function ui(y){return y.startsWith("data:application/octet-stream;base64,")}function De(y){try{if(y==Nn&&Ve)return new Uint8Array(Ve);throw"both async and sync fetching of the wasm failed"}catch(D){bn(D)}}ui(Nn="graphvizlib.wasm")||(Nn=function Nt(y){return M.locateFile?M.locateFile(y,pt):pt+y}(Nn));var pn,V,wt,X={161580:function(y,D){var B=an(y),$=an(D);O.createPath("/",qt.dirname(B)),O.writeFile(qt.join("/",B),$)}};function ht(y){for(;y.length>0;){var D=y.shift();if("function"!=typeof D){var B=D.func;"number"==typeof B?void 0===D.arg?S(B)():S(B)(D.arg):B(void 0===D.arg?null:D.arg)}else D(M)}}function S(y){return Tt.get(y)}wt=function(){return performance.now()};function Bt(y){return Me[kt()>>2]=y,y}var qt={splitPath:function(y){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(y).slice(1)},normalizeArray:function(y,D){for(var B=0,$=y.length-1;$>=0;$--){var dt=y[$];"."===dt?y.splice($,1):".."===dt?(y.splice($,1),B++):B&&(y.splice($,1),B--)}if(D)for(;B;B--)y.unshift("..");return y},normalize:function(y){var D="/"===y.charAt(0),B="/"===y.substr(-1);return!(y=qt.normalizeArray(y.split("/").filter(function($){return!!$}),!D).join("/"))&&!D&&(y="."),y&&B&&(y+="/"),(D?"/":"")+y},dirname:function(y){var D=qt.splitPath(y),B=D[0],$=D[1];return B||$?($&&($=$.substr(0,$.length-1)),B+$):"."},basename:function(y){if("/"===y)return"/";var D=(y=(y=qt.normalize(y)).replace(/\/$/,"")).lastIndexOf("/");return-1===D?y:y.substr(D+1)},extname:function(y){return qt.splitPath(y)[3]},join:function(){var y=Array.prototype.slice.call(arguments,0);return qt.normalize(y.join("/"))},join2:function(y,D){return qt.normalize(y+"/"+D)}};var mt={resolve:function(){for(var y="",D=!1,B=arguments.length-1;B>=-1&&!D;B--){var $=B>=0?arguments[B]:O.cwd();if("string"!=typeof $)throw new TypeError("Arguments to path.resolve must be strings");if(!$)return"";y=$+"/"+y,D="/"===$.charAt(0)}return(D?"/":"")+(y=qt.normalizeArray(y.split("/").filter(function(dt){return!!dt}),!D).join("/"))||"."},relative:function(y,D){function B(We){for(var hn=0;hn<We.length&&""===We[hn];hn++);for(var wn=We.length-1;wn>=0&&""===We[wn];wn--);return hn>wn?[]:We.slice(hn,wn-hn+1)}y=mt.resolve(y).substr(1),D=mt.resolve(D).substr(1);for(var $=B(y.split("/")),dt=B(D.split("/")),Et=Math.min($.length,dt.length),Lt=Et,Vt=0;Vt<Et;Vt++)if($[Vt]!==dt[Vt]){Lt=Vt;break}var ue=[];for(Vt=Lt;Vt<$.length;Vt++)ue.push("..");return(ue=ue.concat(dt.slice(Lt))).join("/")}},Ct={ttys:[],init:function(){},shutdown:function(){},register:function(y,D){Ct.ttys[y]={input:[],output:[],ops:D},O.registerDevice(y,Ct.stream_ops)},stream_ops:{open:function(y){var D=Ct.ttys[y.node.rdev];if(!D)throw new O.ErrnoError(43);y.tty=D,y.seekable=!1},close:function(y){y.tty.ops.flush(y.tty)},flush:function(y){y.tty.ops.flush(y.tty)},read:function(y,D,B,$,dt){if(!y.tty||!y.tty.ops.get_char)throw new O.ErrnoError(60);for(var Et=0,Lt=0;Lt<$;Lt++){var Vt;try{Vt=y.tty.ops.get_char(y.tty)}catch(ue){throw new O.ErrnoError(29)}if(void 0===Vt&&0===Et)throw new O.ErrnoError(6);if(null==Vt)break;Et++,D[B+Lt]=Vt}return Et&&(y.node.timestamp=Date.now()),Et},write:function(y,D,B,$,dt){if(!y.tty||!y.tty.ops.put_char)throw new O.ErrnoError(60);try{for(var Et=0;Et<$;Et++)y.tty.ops.put_char(y.tty,D[B+Et])}catch(Lt){throw new O.ErrnoError(29)}return $&&(y.node.timestamp=Date.now()),Et}},default_tty_ops:{get_char:function(y){if(!y.input.length){var D=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(D=window.prompt("Input: "))&&(D+="\n"):"function"==typeof readline&&null!==(D=readline())&&(D+="\n"),!D)return null;y.input=Li(D,!0)}return y.input.shift()},put_char:function(y,D){null===D||10===D?(Te(zn(y.output,0)),y.output=[]):0!=D&&y.output.push(D)},flush:function(y){y.output&&y.output.length>0&&(Te(zn(y.output,0)),y.output=[])}},default_tty1_ops:{put_char:function(y,D){null===D||10===D?(Re(zn(y.output,0)),y.output=[]):0!=D&&y.output.push(D)},flush:function(y){y.output&&y.output.length>0&&(Re(zn(y.output,0)),y.output=[])}}};function te(y){y=function Xt(y,D){return Math.ceil(y/D)*D}(y,65536);var D=Ge(65536,y);return D?(function At(y,D){Yn.fill(0,y,y+D)}(D,y),D):0}var Dt={ops_table:null,mount:function(y){return Dt.createNode(null,"/",16895,0)},createNode:function(y,D,B,$){if(O.isBlkdev(B)||O.isFIFO(B))throw new O.ErrnoError(63);Dt.ops_table||(Dt.ops_table={dir:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr,lookup:Dt.node_ops.lookup,mknod:Dt.node_ops.mknod,rename:Dt.node_ops.rename,unlink:Dt.node_ops.unlink,rmdir:Dt.node_ops.rmdir,readdir:Dt.node_ops.readdir,symlink:Dt.node_ops.symlink},stream:{llseek:Dt.stream_ops.llseek}},file:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr},stream:{llseek:Dt.stream_ops.llseek,read:Dt.stream_ops.read,write:Dt.stream_ops.write,allocate:Dt.stream_ops.allocate,mmap:Dt.stream_ops.mmap,msync:Dt.stream_ops.msync}},link:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr,readlink:Dt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Dt.node_ops.getattr,setattr:Dt.node_ops.setattr},stream:O.chrdev_stream_ops}});var dt=O.createNode(y,D,B,$);return O.isDir(dt.mode)?(dt.node_ops=Dt.ops_table.dir.node,dt.stream_ops=Dt.ops_table.dir.stream,dt.contents={}):O.isFile(dt.mode)?(dt.node_ops=Dt.ops_table.file.node,dt.stream_ops=Dt.ops_table.file.stream,dt.usedBytes=0,dt.contents=null):O.isLink(dt.mode)?(dt.node_ops=Dt.ops_table.link.node,dt.stream_ops=Dt.ops_table.link.stream):O.isChrdev(dt.mode)&&(dt.node_ops=Dt.ops_table.chrdev.node,dt.stream_ops=Dt.ops_table.chrdev.stream),dt.timestamp=Date.now(),y&&(y.contents[D]=dt,y.timestamp=dt.timestamp),dt},getFileDataAsTypedArray:function(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage:function(y,D){var B=y.contents?y.contents.length:0;if(!(B>=D)){D=Math.max(D,B*(B<1048576?2:1.125)>>>0),0!=B&&(D=Math.max(D,256));var dt=y.contents;y.contents=new Uint8Array(D),y.usedBytes>0&&y.contents.set(dt.subarray(0,y.usedBytes),0)}},resizeFileStorage:function(y,D){if(y.usedBytes!=D)if(0==D)y.contents=null,y.usedBytes=0;else{var B=y.contents;y.contents=new Uint8Array(D),B&&y.contents.set(B.subarray(0,Math.min(D,y.usedBytes))),y.usedBytes=D}},node_ops:{getattr:function(y){var D={};return D.dev=O.isChrdev(y.mode)?y.id:1,D.ino=y.id,D.mode=y.mode,D.nlink=1,D.uid=0,D.gid=0,D.rdev=y.rdev,D.size=O.isDir(y.mode)?4096:O.isFile(y.mode)?y.usedBytes:O.isLink(y.mode)?y.link.length:0,D.atime=new Date(y.timestamp),D.mtime=new Date(y.timestamp),D.ctime=new Date(y.timestamp),D.blksize=4096,D.blocks=Math.ceil(D.size/D.blksize),D},setattr:function(y,D){void 0!==D.mode&&(y.mode=D.mode),void 0!==D.timestamp&&(y.timestamp=D.timestamp),void 0!==D.size&&Dt.resizeFileStorage(y,D.size)},lookup:function(y,D){throw O.genericErrors[44]},mknod:function(y,D,B,$){return Dt.createNode(y,D,B,$)},rename:function(y,D,B){if(O.isDir(y.mode)){var $;try{$=O.lookupNode(D,B)}catch(Et){}if($)for(var dt in $.contents)throw new O.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=B,D.contents[B]=y,D.timestamp=y.parent.timestamp,y.parent=D},unlink:function(y,D){delete y.contents[D],y.timestamp=Date.now()},rmdir:function(y,D){var B=O.lookupNode(y,D);for(var $ in B.contents)throw new O.ErrnoError(55);delete y.contents[D],y.timestamp=Date.now()},readdir:function(y){var D=[".",".."];for(var B in y.contents)!y.contents.hasOwnProperty(B)||D.push(B);return D},symlink:function(y,D,B){var $=Dt.createNode(y,D,41471,0);return $.link=B,$},readlink:function(y){if(!O.isLink(y.mode))throw new O.ErrnoError(28);return y.link}},stream_ops:{read:function(y,D,B,$,dt){var Et=y.node.contents;if(dt>=y.node.usedBytes)return 0;var Lt=Math.min(y.node.usedBytes-dt,$);if(Lt>8&&Et.subarray)D.set(Et.subarray(dt,dt+Lt),B);else for(var Vt=0;Vt<Lt;Vt++)D[B+Vt]=Et[dt+Vt];return Lt},write:function(y,D,B,$,dt,Et){if(D.buffer===_n.buffer&&(Et=!1),!$)return 0;var Lt=y.node;if(Lt.timestamp=Date.now(),D.subarray&&(!Lt.contents||Lt.contents.subarray)){if(Et)return Lt.contents=D.subarray(B,B+$),Lt.usedBytes=$,$;if(0===Lt.usedBytes&&0===dt)return Lt.contents=D.slice(B,B+$),Lt.usedBytes=$,$;if(dt+$<=Lt.usedBytes)return Lt.contents.set(D.subarray(B,B+$),dt),$}if(Dt.expandFileStorage(Lt,dt+$),Lt.contents.subarray&&D.subarray)Lt.contents.set(D.subarray(B,B+$),dt);else for(var Vt=0;Vt<$;Vt++)Lt.contents[dt+Vt]=D[B+Vt];return Lt.usedBytes=Math.max(Lt.usedBytes,dt+$),$},llseek:function(y,D,B){var $=D;if(1===B?$+=y.position:2===B&&O.isFile(y.node.mode)&&($+=y.node.usedBytes),$<0)throw new O.ErrnoError(28);return $},allocate:function(y,D,B){Dt.expandFileStorage(y.node,D+B),y.node.usedBytes=Math.max(y.node.usedBytes,D+B)},mmap:function(y,D,B,$,dt,Et){if(0!==D)throw new O.ErrnoError(28);if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);var Lt,Vt,ue=y.node.contents;if(2&Et||ue.buffer!==Rn){if(($>0||$+B<ue.length)&&(ue=ue.subarray?ue.subarray($,$+B):Array.prototype.slice.call(ue,$,$+B)),Vt=!0,!(Lt=te(B)))throw new O.ErrnoError(48);_n.set(ue,Lt)}else Vt=!1,Lt=ue.byteOffset;return{ptr:Lt,allocated:Vt}},msync:function(y,D,B,$,dt){if(!O.isFile(y.node.mode))throw new O.ErrnoError(43);return 2&dt||Dt.stream_ops.write(y,D,0,$,B,!1),0}}};var O={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(y,D){if(D=D||{},!(y=mt.resolve(O.cwd(),y)))return{path:"",node:null};var B={follow_mount:!0,recurse_count:0};for(var $ in B)void 0===D[$]&&(D[$]=B[$]);if(D.recurse_count>8)throw new O.ErrnoError(32);for(var dt=qt.normalizeArray(y.split("/").filter(function($e){return!!$e}),!1),Et=O.root,Lt="/",Vt=0;Vt<dt.length;Vt++){var ue=Vt===dt.length-1;if(ue&&D.parent)break;if(Et=O.lookupNode(Et,dt[Vt]),Lt=qt.join2(Lt,dt[Vt]),O.isMountpoint(Et)&&(!ue||ue&&D.follow_mount)&&(Et=Et.mounted.root),!ue||D.follow)for(var We=0;O.isLink(Et.mode);){var hn=O.readlink(Lt);if(Lt=mt.resolve(qt.dirname(Lt),hn),Et=O.lookupPath(Lt,{recurse_count:D.recurse_count}).node,We++>40)throw new O.ErrnoError(32)}}return{path:Lt,node:Et}},getPath:function(y){for(var D;;){if(O.isRoot(y)){var B=y.mount.mountpoint;return D?"/"!==B[B.length-1]?B+"/"+D:B+D:B}D=D?y.name+"/"+D:y.name,y=y.parent}},hashName:function(y,D){for(var B=0,$=0;$<D.length;$++)B=(B<<5)-B+D.charCodeAt($)|0;return(y+B>>>0)%O.nameTable.length},hashAddNode:function(y){var D=O.hashName(y.parent.id,y.name);y.name_next=O.nameTable[D],O.nameTable[D]=y},hashRemoveNode:function(y){var D=O.hashName(y.parent.id,y.name);if(O.nameTable[D]===y)O.nameTable[D]=y.name_next;else for(var B=O.nameTable[D];B;){if(B.name_next===y){B.name_next=y.name_next;break}B=B.name_next}},lookupNode:function(y,D){var B=O.mayLookup(y);if(B)throw new O.ErrnoError(B,y);for(var $=O.hashName(y.id,D),dt=O.nameTable[$];dt;dt=dt.name_next)if(dt.parent.id===y.id&&dt.name===D)return dt;return O.lookup(y,D)},createNode:function(y,D,B,$){var dt=new O.FSNode(y,D,B,$);return O.hashAddNode(dt),dt},destroyNode:function(y){O.hashRemoveNode(y)},isRoot:function(y){return y===y.parent},isMountpoint:function(y){return!!y.mounted},isFile:function(y){return 32768==(61440&y)},isDir:function(y){return 16384==(61440&y)},isLink:function(y){return 40960==(61440&y)},isChrdev:function(y){return 8192==(61440&y)},isBlkdev:function(y){return 24576==(61440&y)},isFIFO:function(y){return 4096==(61440&y)},isSocket:function(y){return 49152==(49152&y)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(y){var D=O.flagModes[y];if(void 0===D)throw new Error("Unknown file open mode: "+y);return D},flagsToPermissionString:function(y){var D=["r","w","rw"][3&y];return 512&y&&(D+="w"),D},nodePermissions:function(y,D){return O.ignorePermissions?0:D.includes("r")&&!(292&y.mode)||D.includes("w")&&!(146&y.mode)||D.includes("x")&&!(73&y.mode)?2:0},mayLookup:function(y){return O.nodePermissions(y,"x")||(y.node_ops.lookup?0:2)},mayCreate:function(y,D){try{return O.lookupNode(y,D),20}catch($){}return O.nodePermissions(y,"wx")},mayDelete:function(y,D,B){var $;try{$=O.lookupNode(y,D)}catch(Et){return Et.errno}var dt=O.nodePermissions(y,"wx");if(dt)return dt;if(B){if(!O.isDir($.mode))return 54;if(O.isRoot($)||O.getPath($)===O.cwd())return 10}else if(O.isDir($.mode))return 31;return 0},mayOpen:function(y,D){return y?O.isLink(y.mode)?32:O.isDir(y.mode)&&("r"!==O.flagsToPermissionString(D)||512&D)?31:O.nodePermissions(y,O.flagsToPermissionString(D)):44},MAX_OPEN_FDS:4096,nextfd:function(y,D){D=D||O.MAX_OPEN_FDS;for(var B=y=y||0;B<=D;B++)if(!O.streams[B])return B;throw new O.ErrnoError(33)},getStream:function(y){return O.streams[y]},createStream:function(y,D,B){O.FSStream||(O.FSStream=function(){},O.FSStream.prototype={object:{get:function(){return this.node},set:function(Lt){this.node=Lt}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var $=new O.FSStream;for(var dt in y)$[dt]=y[dt];y=$;var Et=O.nextfd(D,B);return y.fd=Et,O.streams[Et]=y,y},closeStream:function(y){O.streams[y]=null},chrdev_stream_ops:{open:function(y){var D=O.getDevice(y.node.rdev);y.stream_ops=D.stream_ops,y.stream_ops.open&&y.stream_ops.open(y)},llseek:function(){throw new O.ErrnoError(70)}},major:function(y){return y>>8},minor:function(y){return 255&y},makedev:function(y,D){return y<<8|D},registerDevice:function(y,D){O.devices[y]={stream_ops:D}},getDevice:function(y){return O.devices[y]},getMounts:function(y){for(var D=[],B=[y];B.length;){var $=B.pop();D.push($),B.push.apply(B,$.mounts)}return D},syncfs:function(y,D){"function"==typeof y&&(D=y,y=!1),O.syncFSRequests++,O.syncFSRequests>1&&Re("warning: "+O.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var B=O.getMounts(O.root.mount),$=0;function dt(Lt){return O.syncFSRequests--,D(Lt)}function Et(Lt){if(Lt)return Et.errored?void 0:(Et.errored=!0,dt(Lt));++$>=B.length&&dt(null)}B.forEach(function(Lt){if(!Lt.type.syncfs)return Et(null);Lt.type.syncfs(Lt,y,Et)})},mount:function(y,D,B){var Et,$="/"===B,dt=!B;if($&&O.root)throw new O.ErrnoError(10);if(!$&&!dt){var Lt=O.lookupPath(B,{follow_mount:!1});if(B=Lt.path,O.isMountpoint(Et=Lt.node))throw new O.ErrnoError(10);if(!O.isDir(Et.mode))throw new O.ErrnoError(54)}var Vt={type:y,opts:D,mountpoint:B,mounts:[]},ue=y.mount(Vt);return ue.mount=Vt,Vt.root=ue,$?O.root=ue:Et&&(Et.mounted=Vt,Et.mount&&Et.mount.mounts.push(Vt)),ue},unmount:function(y){var D=O.lookupPath(y,{follow_mount:!1});if(!O.isMountpoint(D.node))throw new O.ErrnoError(28);var B=D.node,$=B.mounted,dt=O.getMounts($);Object.keys(O.nameTable).forEach(function(Lt){for(var Vt=O.nameTable[Lt];Vt;){var ue=Vt.name_next;dt.includes(Vt.mount)&&O.destroyNode(Vt),Vt=ue}}),B.mounted=null;var Et=B.mount.mounts.indexOf($);B.mount.mounts.splice(Et,1)},lookup:function(y,D){return y.node_ops.lookup(y,D)},mknod:function(y,D,B){var dt=O.lookupPath(y,{parent:!0}).node,Et=qt.basename(y);if(!Et||"."===Et||".."===Et)throw new O.ErrnoError(28);var Lt=O.mayCreate(dt,Et);if(Lt)throw new O.ErrnoError(Lt);if(!dt.node_ops.mknod)throw new O.ErrnoError(63);return dt.node_ops.mknod(dt,Et,D,B)},create:function(y,D){return D=void 0!==D?D:438,D&=4095,O.mknod(y,D|=32768,0)},mkdir:function(y,D){return D=void 0!==D?D:511,D&=1023,O.mknod(y,D|=16384,0)},mkdirTree:function(y,D){for(var B=y.split("/"),$="",dt=0;dt<B.length;++dt)if(B[dt]){$+="/"+B[dt];try{O.mkdir($,D)}catch(Et){if(20!=Et.errno)throw Et}}},mkdev:function(y,D,B){return void 0===B&&(B=D,D=438),O.mknod(y,D|=8192,B)},symlink:function(y,D){if(!mt.resolve(y))throw new O.ErrnoError(44);var $=O.lookupPath(D,{parent:!0}).node;if(!$)throw new O.ErrnoError(44);var dt=qt.basename(D),Et=O.mayCreate($,dt);if(Et)throw new O.ErrnoError(Et);if(!$.node_ops.symlink)throw new O.ErrnoError(63);return $.node_ops.symlink($,dt,y)},rename:function(y,D){var Vt,ue,B=qt.dirname(y),$=qt.dirname(D),dt=qt.basename(y),Et=qt.basename(D);if(Vt=O.lookupPath(y,{parent:!0}).node,ue=O.lookupPath(D,{parent:!0}).node,!Vt||!ue)throw new O.ErrnoError(44);if(Vt.mount!==ue.mount)throw new O.ErrnoError(75);var wn,We=O.lookupNode(Vt,dt),hn=mt.relative(y,$);if("."!==hn.charAt(0))throw new O.ErrnoError(28);if("."!==(hn=mt.relative(D,B)).charAt(0))throw new O.ErrnoError(55);try{wn=O.lookupNode(ue,Et)}catch(In){}if(We!==wn){var $e=O.isDir(We.mode),tn=O.mayDelete(Vt,dt,$e);if(tn)throw new O.ErrnoError(tn);if(tn=wn?O.mayDelete(ue,Et,$e):O.mayCreate(ue,Et))throw new O.ErrnoError(tn);if(!Vt.node_ops.rename)throw new O.ErrnoError(63);if(O.isMountpoint(We)||wn&&O.isMountpoint(wn))throw new O.ErrnoError(10);if(ue!==Vt&&(tn=O.nodePermissions(Vt,"w")))throw new O.ErrnoError(tn);O.hashRemoveNode(We);try{Vt.node_ops.rename(We,ue,Et)}catch(In){throw In}finally{O.hashAddNode(We)}}},rmdir:function(y){var B=O.lookupPath(y,{parent:!0}).node,$=qt.basename(y),dt=O.lookupNode(B,$),Et=O.mayDelete(B,$,!0);if(Et)throw new O.ErrnoError(Et);if(!B.node_ops.rmdir)throw new O.ErrnoError(63);if(O.isMountpoint(dt))throw new O.ErrnoError(10);B.node_ops.rmdir(B,$),O.destroyNode(dt)},readdir:function(y){var B=O.lookupPath(y,{follow:!0}).node;if(!B.node_ops.readdir)throw new O.ErrnoError(54);return B.node_ops.readdir(B)},unlink:function(y){var B=O.lookupPath(y,{parent:!0}).node,$=qt.basename(y),dt=O.lookupNode(B,$),Et=O.mayDelete(B,$,!1);if(Et)throw new O.ErrnoError(Et);if(!B.node_ops.unlink)throw new O.ErrnoError(63);if(O.isMountpoint(dt))throw new O.ErrnoError(10);B.node_ops.unlink(B,$),O.destroyNode(dt)},readlink:function(y){var B=O.lookupPath(y).node;if(!B)throw new O.ErrnoError(44);if(!B.node_ops.readlink)throw new O.ErrnoError(28);return mt.resolve(O.getPath(B.parent),B.node_ops.readlink(B))},stat:function(y,D){var $=O.lookupPath(y,{follow:!D}).node;if(!$)throw new O.ErrnoError(44);if(!$.node_ops.getattr)throw new O.ErrnoError(63);return $.node_ops.getattr($)},lstat:function(y){return O.stat(y,!0)},chmod:function(y,D,B){var $;if(!($="string"==typeof y?O.lookupPath(y,{follow:!B}).node:y).node_ops.setattr)throw new O.ErrnoError(63);$.node_ops.setattr($,{mode:4095&D|-4096&$.mode,timestamp:Date.now()})},lchmod:function(y,D){O.chmod(y,D,!0)},fchmod:function(y,D){var B=O.getStream(y);if(!B)throw new O.ErrnoError(8);O.chmod(B.node,D)},chown:function(y,D,B,$){var dt;if(!(dt="string"==typeof y?O.lookupPath(y,{follow:!$}).node:y).node_ops.setattr)throw new O.ErrnoError(63);dt.node_ops.setattr(dt,{timestamp:Date.now()})},lchown:function(y,D,B){O.chown(y,D,B,!0)},fchown:function(y,D,B){var $=O.getStream(y);if(!$)throw new O.ErrnoError(8);O.chown($.node,D,B)},truncate:function(y,D){if(D<0)throw new O.ErrnoError(28);var B;if(!(B="string"==typeof y?O.lookupPath(y,{follow:!0}).node:y).node_ops.setattr)throw new O.ErrnoError(63);if(O.isDir(B.mode))throw new O.ErrnoError(31);if(!O.isFile(B.mode))throw new O.ErrnoError(28);var dt=O.nodePermissions(B,"w");if(dt)throw new O.ErrnoError(dt);B.node_ops.setattr(B,{size:D,timestamp:Date.now()})},ftruncate:function(y,D){var B=O.getStream(y);if(!B)throw new O.ErrnoError(8);if(0==(2097155&B.flags))throw new O.ErrnoError(28);O.truncate(B.node,D)},utime:function(y,D,B){var dt=O.lookupPath(y,{follow:!0}).node;dt.node_ops.setattr(dt,{timestamp:Math.max(D,B)})},open:function(y,D,B,$,dt){if(""===y)throw new O.ErrnoError(44);var Et;if(B=void 0===B?438:B,B=64&(D="string"==typeof D?O.modeStringToFlags(D):D)?4095&B|32768:0,"object"==typeof y)Et=y;else{y=qt.normalize(y);try{Et=O.lookupPath(y,{follow:!(131072&D)}).node}catch(hn){}}var Vt=!1;if(64&D)if(Et){if(128&D)throw new O.ErrnoError(20)}else Et=O.mknod(y,B,0),Vt=!0;if(!Et)throw new O.ErrnoError(44);if(O.isChrdev(Et.mode)&&(D&=-513),65536&D&&!O.isDir(Et.mode))throw new O.ErrnoError(54);if(!Vt){var ue=O.mayOpen(Et,D);if(ue)throw new O.ErrnoError(ue)}512&D&&O.truncate(Et,0),D&=-131713;var We=O.createStream({node:Et,path:O.getPath(Et),id:Et.id,flags:D,mode:Et.mode,seekable:!0,position:0,stream_ops:Et.stream_ops,node_ops:Et.node_ops,ungotten:[],error:!1},$,dt);return We.stream_ops.open&&We.stream_ops.open(We),M.logReadFiles&&!(1&D)&&(O.readFiles||(O.readFiles={}),y in O.readFiles||(O.readFiles[y]=1)),We},close:function(y){if(O.isClosed(y))throw new O.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(D){throw D}finally{O.closeStream(y.fd)}y.fd=null},isClosed:function(y){return null===y.fd},llseek:function(y,D,B){if(O.isClosed(y))throw new O.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new O.ErrnoError(70);if(0!=B&&1!=B&&2!=B)throw new O.ErrnoError(28);return y.position=y.stream_ops.llseek(y,D,B),y.ungotten=[],y.position},read:function(y,D,B,$,dt){if($<0||dt<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(1==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.read)throw new O.ErrnoError(28);var Et=void 0!==dt;if(Et){if(!y.seekable)throw new O.ErrnoError(70)}else dt=y.position;var Lt=y.stream_ops.read(y,D,B,$,dt);return Et||(y.position+=Lt),Lt},write:function(y,D,B,$,dt,Et){if($<0||dt<0)throw new O.ErrnoError(28);if(O.isClosed(y))throw new O.ErrnoError(8);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(O.isDir(y.node.mode))throw new O.ErrnoError(31);if(!y.stream_ops.write)throw new O.ErrnoError(28);y.seekable&&1024&y.flags&&O.llseek(y,0,2);var Lt=void 0!==dt;if(Lt){if(!y.seekable)throw new O.ErrnoError(70)}else dt=y.position;var Vt=y.stream_ops.write(y,D,B,$,dt,Et);return Lt||(y.position+=Vt),Vt},allocate:function(y,D,B){if(O.isClosed(y))throw new O.ErrnoError(8);if(D<0||B<=0)throw new O.ErrnoError(28);if(0==(2097155&y.flags))throw new O.ErrnoError(8);if(!O.isFile(y.node.mode)&&!O.isDir(y.node.mode))throw new O.ErrnoError(43);if(!y.stream_ops.allocate)throw new O.ErrnoError(138);y.stream_ops.allocate(y,D,B)},mmap:function(y,D,B,$,dt,Et){if(0!=(2&dt)&&0==(2&Et)&&2!=(2097155&y.flags))throw new O.ErrnoError(2);if(1==(2097155&y.flags))throw new O.ErrnoError(2);if(!y.stream_ops.mmap)throw new O.ErrnoError(43);return y.stream_ops.mmap(y,D,B,$,dt,Et)},msync:function(y,D,B,$,dt){return y&&y.stream_ops.msync?y.stream_ops.msync(y,D,B,$,dt):0},munmap:function(y){return 0},ioctl:function(y,D,B){if(!y.stream_ops.ioctl)throw new O.ErrnoError(59);return y.stream_ops.ioctl(y,D,B)},readFile:function(y,D){if((D=D||{}).flags=D.flags||0,D.encoding=D.encoding||"binary","utf8"!==D.encoding&&"binary"!==D.encoding)throw new Error('Invalid encoding type "'+D.encoding+'"');var B,$=O.open(y,D.flags),Et=O.stat(y).size,Lt=new Uint8Array(Et);return O.read($,Lt,0,Et,0),"utf8"===D.encoding?B=zn(Lt,0):"binary"===D.encoding&&(B=Lt),O.close($),B},writeFile:function(y,D,B){(B=B||{}).flags=B.flags||577;var $=O.open(y,B.flags,B.mode);if("string"==typeof D){var dt=new Uint8Array(En(D)+1),Et=je(D,dt,0,dt.length);O.write($,dt,0,Et,void 0,B.canOwn)}else{if(!ArrayBuffer.isView(D))throw new Error("Unsupported data type");O.write($,D,0,D.byteLength,void 0,B.canOwn)}O.close($)},cwd:function(){return O.currentPath},chdir:function(y){var D=O.lookupPath(y,{follow:!0});if(null===D.node)throw new O.ErrnoError(44);if(!O.isDir(D.node.mode))throw new O.ErrnoError(54);var B=O.nodePermissions(D.node,"x");if(B)throw new O.ErrnoError(B);O.currentPath=D.path},createDefaultDirectories:function(){O.mkdir("/tmp"),O.mkdir("/home"),O.mkdir("/home/web_user")},createDefaultDevices:function(){O.mkdir("/dev"),O.registerDevice(O.makedev(1,3),{read:function(){return 0},write:function(D,B,$,dt,Et){return dt}}),O.mkdev("/dev/null",O.makedev(1,3)),Ct.register(O.makedev(5,0),Ct.default_tty_ops),Ct.register(O.makedev(6,0),Ct.default_tty1_ops),O.mkdev("/dev/tty",O.makedev(5,0)),O.mkdev("/dev/tty1",O.makedev(6,0));var y=function j(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var y=new Uint8Array(1);return function(){return crypto.getRandomValues(y),y[0]}}return function(){bn("randomDevice")}}();O.createDevice("/dev","random",y),O.createDevice("/dev","urandom",y),O.mkdir("/dev/shm"),O.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){O.mkdir("/proc");var y=O.mkdir("/proc/self");O.mkdir("/proc/self/fd"),O.mount({mount:function(){var D=O.createNode(y,"fd",16895,73);return D.node_ops={lookup:function(B,$){var Et=O.getStream(+$);if(!Et)throw new O.ErrnoError(8);var Lt={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return Et.path}}};return Lt.parent=Lt,Lt}},D}},{},"/proc/self/fd")},createStandardStreams:function(){M.stdin?O.createDevice("/dev","stdin",M.stdin):O.symlink("/dev/tty","/dev/stdin"),M.stdout?O.createDevice("/dev","stdout",null,M.stdout):O.symlink("/dev/tty","/dev/stdout"),M.stderr?O.createDevice("/dev","stderr",null,M.stderr):O.symlink("/dev/tty1","/dev/stderr"),O.open("/dev/stdin",0),O.open("/dev/stdout",1),O.open("/dev/stderr",1)},ensureErrnoError:function(){O.ErrnoError||(O.ErrnoError=function(D,B){this.node=B,this.setErrno=function($){this.errno=$},this.setErrno(D),this.message="FS error"},O.ErrnoError.prototype=new Error,O.ErrnoError.prototype.constructor=O.ErrnoError,[44].forEach(function(y){O.genericErrors[y]=new O.ErrnoError(y),O.genericErrors[y].stack="<generic error, no stack>"}))},staticInit:function(){O.ensureErrnoError(),O.nameTable=new Array(4096),O.mount(Dt,{},"/"),O.createDefaultDirectories(),O.createDefaultDevices(),O.createSpecialDirectories(),O.filesystems={MEMFS:Dt}},init:function(y,D,B){O.init.initialized=!0,O.ensureErrnoError(),M.stdin=y||M.stdin,M.stdout=D||M.stdout,M.stderr=B||M.stderr,O.createStandardStreams()},quit:function(){O.init.initialized=!1;var y=M._fflush;y&&y(0);for(var D=0;D<O.streams.length;D++){var B=O.streams[D];!B||O.close(B)}},getMode:function(y,D){var B=0;return y&&(B|=365),D&&(B|=146),B},findObject:function(y,D){var B=O.analyzePath(y,D);return B.exists?B.object:null},analyzePath:function(y,D){try{y=(B=O.lookupPath(y,{follow:!D})).path}catch(dt){}var $={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var B=O.lookupPath(y,{parent:!0});$.parentExists=!0,$.parentPath=B.path,$.parentObject=B.node,$.name=qt.basename(y),B=O.lookupPath(y,{follow:!D}),$.exists=!0,$.path=B.path,$.object=B.node,$.name=B.node.name,$.isRoot="/"===B.path}catch(dt){$.error=dt.errno}return $},createPath:function(y,D,B,$){y="string"==typeof y?y:O.getPath(y);for(var dt=D.split("/").reverse();dt.length;){var Et=dt.pop();if(Et){var Lt=qt.join2(y,Et);try{O.mkdir(Lt)}catch(Vt){}y=Lt}}return Lt},createFile:function(y,D,B,$,dt){var Et=qt.join2("string"==typeof y?y:O.getPath(y),D),Lt=O.getMode($,dt);return O.create(Et,Lt)},createDataFile:function(y,D,B,$,dt,Et){var Lt=D?qt.join2("string"==typeof y?y:O.getPath(y),D):y,Vt=O.getMode($,dt),ue=O.create(Lt,Vt);if(B){if("string"==typeof B){for(var We=new Array(B.length),hn=0,wn=B.length;hn<wn;++hn)We[hn]=B.charCodeAt(hn);B=We}O.chmod(ue,146|Vt);var $e=O.open(ue,577);O.write($e,B,0,B.length,0,Et),O.close($e),O.chmod(ue,Vt)}return ue},createDevice:function(y,D,B,$){var dt=qt.join2("string"==typeof y?y:O.getPath(y),D),Et=O.getMode(!!B,!!$);O.createDevice.major||(O.createDevice.major=64);var Lt=O.makedev(O.createDevice.major++,0);return O.registerDevice(Lt,{open:function(Vt){Vt.seekable=!1},close:function(Vt){$&&$.buffer&&$.buffer.length&&$(10)},read:function(Vt,ue,We,hn,wn){for(var $e=0,tn=0;tn<hn;tn++){var In;try{In=B()}catch(Ri){throw new O.ErrnoError(29)}if(void 0===In&&0===$e)throw new O.ErrnoError(6);if(null==In)break;$e++,ue[We+tn]=In}return $e&&(Vt.node.timestamp=Date.now()),$e},write:function(Vt,ue,We,hn,wn){for(var $e=0;$e<hn;$e++)try{$(ue[We+$e])}catch(tn){throw new O.ErrnoError(29)}return hn&&(Vt.node.timestamp=Date.now()),$e}}),O.mkdev(dt,Et,Lt)},forceLoadFile:function(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Jt)throw new Error("Cannot load without read() or XMLHttpRequest.");try{y.contents=Li(Jt(y.url),!0),y.usedBytes=y.contents.length}catch(D){throw new O.ErrnoError(29)}},createLazyFile:function(y,D,B,$,dt){function Et(){this.lengthKnown=!1,this.chunks=[]}if(Et.prototype.get=function($e){if(!($e>this.length-1||$e<0)){var tn=$e%this.chunkSize;return this.getter($e/this.chunkSize|0)[tn]}},Et.prototype.setDataGetter=function($e){this.getter=$e},Et.prototype.cacheLength=function(){var $e=new XMLHttpRequest;if($e.open("HEAD",B,!1),$e.send(null),!($e.status>=200&&$e.status<300||304===$e.status))throw new Error("Couldn't load "+B+". Status: "+$e.status);var In,tn=Number($e.getResponseHeader("Content-length")),Ri=(In=$e.getResponseHeader("Accept-Ranges"))&&"bytes"===In,Tr=(In=$e.getResponseHeader("Content-Encoding"))&&"gzip"===In,Zi=1048576;Ri||(Zi=tn);var Ii=this;Ii.setDataGetter(function($i){var br=$i*Zi,_i=($i+1)*Zi-1;if(_i=Math.min(_i,tn-1),void 0===Ii.chunks[$i]&&(Ii.chunks[$i]=function($i,br){if($i>br)throw new Error("invalid range ("+$i+", "+br+") or no bytes requested!");if(br>tn-1)throw new Error("only "+tn+" bytes available! programmer error!");var _i=new XMLHttpRequest;if(_i.open("GET",B,!1),tn!==Zi&&_i.setRequestHeader("Range","bytes="+$i+"-"+br),"undefined"!=typeof Uint8Array&&(_i.responseType="arraybuffer"),_i.overrideMimeType&&_i.overrideMimeType("text/plain; charset=x-user-defined"),_i.send(null),!(_i.status>=200&&_i.status<300||304===_i.status))throw new Error("Couldn't load "+B+". Status: "+_i.status);return void 0!==_i.response?new Uint8Array(_i.response||[]):Li(_i.responseText||"",!0)}(br,_i)),void 0===Ii.chunks[$i])throw new Error("doXHR failed!");return Ii.chunks[$i]}),(Tr||!tn)&&(Zi=tn=1,tn=this.getter(0).length,Zi=tn,Te("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=tn,this._chunkSize=Zi,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Vt,ue=O.createFile(y,D,Vt={isDevice:!1,url:B},$,dt);Vt.contents?ue.contents=Vt.contents:Vt.url&&(ue.contents=null,ue.url=Vt.url),Object.defineProperties(ue,{usedBytes:{get:function(){return this.contents.length}}});var We={};return Object.keys(ue.stream_ops).forEach(function(wn){var $e=ue.stream_ops[wn];We[wn]=function(){return O.forceLoadFile(ue),$e.apply(null,arguments)}}),We.read=function($e,tn,In,Ri,Tr){O.forceLoadFile(ue);var Zi=$e.node.contents;if(Tr>=Zi.length)return 0;var kr=Math.min(Zi.length-Tr,Ri);if(Zi.slice)for(var Ii=0;Ii<kr;Ii++)tn[In+Ii]=Zi[Tr+Ii];else for(Ii=0;Ii<kr;Ii++)tn[In+Ii]=Zi.get(Tr+Ii);return kr},ue.stream_ops=We,ue},createPreloadedFile:function(y,D,B,$,dt,Et,Lt,Vt,ue,We){Browser.init();var hn=D?mt.resolve(qt.join2(y,D)):y;function wn($e){function tn(Ri){We&&We(),Vt||O.createDataFile(y,D,Ri,$,dt,ue),Et&&Et(),un()}var In=!1;M.preloadPlugins.forEach(function(Ri){In||Ri.canHandle(hn)&&(Ri.handle($e,hn,tn,function(){Lt&&Lt(),un()}),In=!0)}),In||tn($e)}On(),"string"==typeof B?function de(y,D,B,$){var dt=$?"":"al "+y;ge(y,function(Et){Wn(Et,'Loading data file "'+y+'" failed (no arrayBuffer).'),D(new Uint8Array(Et)),dt&&un()},function(Et){if(!B)throw'Loading data file "'+y+'" failed.';B()}),dt&&On()}(B,function($e){wn($e)},Lt):wn(B)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(y,D,B){D=D||function(){},B=B||function(){};var $=O.indexedDB();try{var dt=$.open(O.DB_NAME(),O.DB_VERSION)}catch(Et){return B(Et)}dt.onupgradeneeded=function(){Te("creating db"),dt.result.createObjectStore(O.DB_STORE_NAME)},dt.onsuccess=function(){var Vt=dt.result.transaction([O.DB_STORE_NAME],"readwrite"),ue=Vt.objectStore(O.DB_STORE_NAME),We=0,hn=0,wn=y.length;function $e(){0==hn?D():B()}y.forEach(function(tn){var In=ue.put(O.analyzePath(tn).object.contents,tn);In.onsuccess=function(){++We+hn==wn&&$e()},In.onerror=function(){hn++,We+hn==wn&&$e()}}),Vt.onerror=B},dt.onerror=B},loadFilesFromDB:function(y,D,B){D=D||function(){},B=B||function(){};var $=O.indexedDB();try{var dt=$.open(O.DB_NAME(),O.DB_VERSION)}catch(Et){return B(Et)}dt.onupgradeneeded=B,dt.onsuccess=function(){var Lt=dt.result;try{var Vt=Lt.transaction([O.DB_STORE_NAME],"readonly")}catch(tn){return void B(tn)}var ue=Vt.objectStore(O.DB_STORE_NAME),We=0,hn=0,wn=y.length;function $e(){0==hn?D():B()}y.forEach(function(tn){var In=ue.get(tn);In.onsuccess=function(){O.analyzePath(tn).exists&&O.unlink(tn),O.createDataFile(qt.dirname(tn),qt.basename(tn),In.result,!0,!0,!0),++We+hn==wn&&$e()},In.onerror=function(){hn++,We+hn==wn&&$e()}}),Vt.onerror=B},dt.onerror=B}},le={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(y,D,B){if("/"===D[0])return D;var $;if(-100===y)$=O.cwd();else{var dt=O.getStream(y);if(!dt)throw new O.ErrnoError(8);$=dt.path}if(0==D.length){if(!B)throw new O.ErrnoError(44);return $}return qt.join2($,D)},doStat:function(y,D,B){try{var $=y(D)}catch(dt){if(dt&&dt.node&&qt.normalize(D)!==qt.normalize(O.getPath(dt.node)))return-54;throw dt}return Me[B>>2]=$.dev,Me[B+4>>2]=0,Me[B+8>>2]=$.ino,Me[B+12>>2]=$.mode,Me[B+16>>2]=$.nlink,Me[B+20>>2]=$.uid,Me[B+24>>2]=$.gid,Me[B+28>>2]=$.rdev,Me[B+32>>2]=0,V=[$.size>>>0,(pn=$.size,+Math.abs(pn)>=1?pn>0?(0|Math.min(+Math.floor(pn/4294967296),4294967295))>>>0:~~+Math.ceil((pn-+(~~pn>>>0))/4294967296)>>>0:0)],Me[B+40>>2]=V[0],Me[B+44>>2]=V[1],Me[B+48>>2]=4096,Me[B+52>>2]=$.blocks,Me[B+56>>2]=$.atime.getTime()/1e3|0,Me[B+60>>2]=0,Me[B+64>>2]=$.mtime.getTime()/1e3|0,Me[B+68>>2]=0,Me[B+72>>2]=$.ctime.getTime()/1e3|0,Me[B+76>>2]=0,V=[$.ino>>>0,(pn=$.ino,+Math.abs(pn)>=1?pn>0?(0|Math.min(+Math.floor(pn/4294967296),4294967295))>>>0:~~+Math.ceil((pn-+(~~pn>>>0))/4294967296)>>>0:0)],Me[B+80>>2]=V[0],Me[B+84>>2]=V[1],0},doMsync:function(y,D,B,$,dt){var Et=Yn.slice(y,y+B);O.msync(D,Et,dt,B,$)},doMkdir:function(y,D){return"/"===(y=qt.normalize(y))[y.length-1]&&(y=y.substr(0,y.length-1)),O.mkdir(y,D,0),0},doMknod:function(y,D,B){switch(61440&D){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return O.mknod(y,D,B),0},doReadlink:function(y,D,B){if(B<=0)return-28;var $=O.readlink(y),dt=Math.min(B,En($)),Et=_n[D+dt];return function sn(y,D,B){return je(y,Yn,D,B)}($,D,B+1),_n[D+dt]=Et,dt},doAccess:function(y,D){if(-8&D)return-28;var $=O.lookupPath(y,{follow:!0}).node;if(!$)return-44;var dt="";return 4&D&&(dt+="r"),2&D&&(dt+="w"),1&D&&(dt+="x"),dt&&O.nodePermissions($,dt)?-2:0},doDup:function(y,D,B){var $=O.getStream(B);return $&&O.close($),O.open(y,D,0,B,B).fd},doReadv:function(y,D,B,$){for(var dt=0,Et=0;Et<B;Et++){var Vt=Me[D+(8*Et+4)>>2],ue=O.read(y,_n,Me[D+8*Et>>2],Vt,$);if(ue<0)return-1;if(dt+=ue,ue<Vt)break}return dt},doWritev:function(y,D,B,$){for(var dt=0,Et=0;Et<B;Et++){var ue=O.write(y,_n,Me[D+8*Et>>2],Me[D+(8*Et+4)>>2],$);if(ue<0)return-1;dt+=ue}return dt},varargs:void 0,get:function(){return le.varargs+=4,Me[le.varargs-4>>2]},getStr:function(y){return an(y)},getStreamFromFD:function(y){var D=O.getStream(y);if(!D)throw new O.ErrnoError(8);return D},get64:function(y,D){return y}};var Qt=[];function ce(y){try{return oe.grow(y-Rn.byteLength+65535>>>16),$n(oe.buffer),1}catch(D){}}var Ee={};function Jn(){if(!Jn.strings){var D={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ne||"./this.program"};for(var B in Ee)void 0===Ee[B]?delete D[B]:D[B]=Ee[B];var $=[];for(var B in D)$.push(B+"="+D[B]);Jn.strings=$}return Jn.strings}var jn=function(y,D,B,$){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=O.nextInode++,this.name=D,this.mode=B,this.node_ops={},this.stream_ops={},this.rdev=$};function Li(y,D,B){var $=B>0?B:En(y)+1,dt=new Array($),Et=je(y,dt,0,dt.length);return D&&(dt.length=Et),dt}Object.defineProperties(jn.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(y){y?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(y){y?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return O.isDir(this.mode)}},isDevice:{get:function(){return O.isChrdev(this.mode)}}}),O.FSNode=jn,O.staticInit();var Ft={A:function re(y,D){return function Yt(y,D){var B;if(0===y)B=Date.now();else{if(1!==y&&4!==y)return Bt(28),-1;B=wt()}return Me[D>>2]=B/1e3|0,Me[D+4>>2]=B%1e3*1e3*1e3|0,0}(y,D)},B:function Le(y,D){try{return y=le.getStr(y),le.doAccess(y,D)}catch(B){if(void 0===O||!(B instanceof O.ErrnoError))throw B;return-B.errno}},h:function ke(y,D,B){le.varargs=B;try{var $=le.getStreamFromFD(y);switch(D){case 0:return(dt=le.get())<0?-28:O.open($.path,$.flags,0,dt).fd;case 1:case 2:case 6:case 7:return 0;case 3:return $.flags;case 4:var dt=le.get();return $.flags|=dt,0;case 5:return dt=le.get(),ti[dt+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Bt(28),-1}}catch(Vt){if(void 0===O||!(Vt instanceof O.ErrnoError))throw Vt;return-Vt.errno}},x:function rn(y,D){try{var B=le.getStreamFromFD(y);return le.doStat(O.stat,B.path,D)}catch($){if(void 0===O||!($ instanceof O.ErrnoError))throw $;return-$.errno}},u:function ze(y,D,B,$){try{D=le.getStr(D);var dt=256&$,Et=4096&$;return $&=-4353,D=le.calculateAt(y,D,Et),le.doStat(dt?O.lstat:O.stat,D,B)}catch(Lt){if(void 0===O||!(Lt instanceof O.ErrnoError))throw Lt;return-Lt.errno}},y:function Je(y,D,B){le.varargs=B;try{var $=le.getStreamFromFD(y);switch(D){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return $.tty?0:-59;case 21519:if(!$.tty)return-59;var dt=le.get();return Me[dt>>2]=0,0;case 21520:return $.tty?-28:-59;case 21531:return dt=le.get(),O.ioctl($,D,dt);default:bn("bad ioctl syscall "+D)}}catch(Et){if(void 0===O||!(Et instanceof O.ErrnoError))throw Et;return-Et.errno}},k:function ye(y,D,B,$,dt,Et){try{return function fe(y,D,B,$,dt,Et){Et<<=12;var Lt,Vt=!1;if(0!=(16&$)&&y%65536!=0)return-28;if(0!=(32&$)){if(!(Lt=te(D)))return-48;Vt=!0}else{var ue=O.getStream(dt);if(!ue)return-8;var We=O.mmap(ue,y,D,Et,B,$);Lt=We.ptr,Vt=We.allocated}return le.mappings[Lt]={malloc:Lt,len:D,allocated:Vt,fd:dt,prot:B,flags:$,offset:Et},Lt}(y,D,B,$,dt,Et)}catch(Lt){if(void 0===O||!(Lt instanceof O.ErrnoError))throw Lt;return-Lt.errno}},j:function nt(y,D){try{return function Ye(y,D){var B=le.mappings[y];if(0===D||!B)return-28;if(D===B.len){var $=O.getStream(B.fd);$&&2&B.prot&&le.doMsync(y,$,D,B.flags,B.offset),le.mappings[y]=null,B.allocated&&yt(B.malloc)}return 0}(y,D)}catch(B){if(void 0===O||!(B instanceof O.ErrnoError))throw B;return-B.errno}},e:function _t(y,D,B){le.varargs=B;try{var $=le.getStr(y),dt=B?le.get():0;return O.open($,D,dt).fd}catch(Lt){if(void 0===O||!(Lt instanceof O.ErrnoError))throw Lt;return-Lt.errno}},v:function gt(y,D){try{return y=le.getStr(y),le.doStat(O.stat,y,D)}catch(B){if(void 0===O||!(B instanceof O.ErrnoError))throw B;return-B.errno}},z:function St(y){try{return y=le.getStr(y),O.unlink(y),0}catch(D){if(void 0===O||!(D instanceof O.ErrnoError))throw D;return-D.errno}},r:function Ht(){throw"longjmp"},q:function ee(){bn("")},C:function xe(y,D,B){var $=function me(y,D){var B;for(Qt.length=0,D>>=2;B=Yn[y++];){var $=B<105;$&&1&D&&D++,Qt.push($?Xn[D++>>1]:Me[D]),++D}return Qt}(D,B);return X[y].apply(null,$)},o:function Wt(y,D,B){Yn.copyWithin(y,D,D+B)},p:function Ie(y){var D=Yn.length,B=2147483648;if((y>>>=0)>B)return!1;for(var $=1;$<=4;$*=2){var dt=D*(1+.2/$);if(dt=Math.min(dt,y+100663296),ce(Math.min(B,ci(Math.max(y,dt),65536))))return!0}return!1},s:function Ln(y,D){var B=0;return Jn().forEach(function($,dt){var Et=D+B;Me[y+4*dt>>2]=Et,function Be(y,D,B){for(var $=0;$<y.length;++$)_n[D++>>0]=y.charCodeAt($);B||(_n[D>>0]=0)}($,Et),B+=$.length+1}),0},t:function kn(y,D){var B=Jn();Me[y>>2]=B.length;var $=0;return B.forEach(function(dt){$+=dt.length+1}),Me[D>>2]=$,0},a:function He(y){!function qi(y,D){!function ki(y){(function Ze(){return Mn||!1})()||(M.onExit&&M.onExit(y),fn=!0),Ut(y,new Cn(y))}(y)}(y)},d:function qe(y){try{var D=le.getStreamFromFD(y);return O.close(D),0}catch(B){if(void 0===O||!(B instanceof O.ErrnoError))throw B;return B.errno}},i:function Qn(y,D,B,$){try{var dt=le.getStreamFromFD(y),Et=le.doReadv(dt,D,B);return Me[$>>2]=Et,0}catch(Lt){if(void 0===O||!(Lt instanceof O.ErrnoError))throw Lt;return Lt.errno}},n:function on(y,D,B,$,dt){try{var Et=le.getStreamFromFD(y),Vt=4294967296*B+(D>>>0),ue=9007199254740992;return Vt<=-ue||Vt>=ue?-61:(O.llseek(Et,Vt,$),V=[Et.position>>>0,(pn=Et.position,+Math.abs(pn)>=1?pn>0?(0|Math.min(+Math.floor(pn/4294967296),4294967295))>>>0:~~+Math.ceil((pn-+(~~pn>>>0))/4294967296)>>>0:0)],Me[dt>>2]=V[0],Me[dt+4>>2]=V[1],Et.getdents&&0===Vt&&0===$&&(Et.getdents=null),0)}catch(We){if(void 0===O||!(We instanceof O.ErrnoError))throw We;return We.errno}},g:function cn(y,D,B,$){try{var dt=le.getStreamFromFD(y),Et=le.doWritev(dt,D,B);return Me[$>>2]=Et,0}catch(Lt){if(void 0===O||!(Lt instanceof O.ErrnoError))throw Lt;return Lt.errno}},c:function Un(){return Tn},w:function Hi(y){var D=Date.now();return Me[y>>2]=D/1e3|0,Me[y+4>>2]=D%1e3*1e3|0,0},l:function Pe(y,D,B,$,dt,Et,Lt){var Vt=Pt();try{return S(y)(D,B,$,dt,Et,Lt)}catch(ue){if(ae(Vt),ue!==ue+0&&"longjmp"!==ue)throw ue;Se(1,0)}},m:function Ke(y,D){var B=Pt();try{S(y)(D)}catch($){if(ae(B),$!==$+0&&"longjmp"!==$)throw $;Se(1,0)}},b:function hi(y){!function(y){Tn=y}(y)},f:function zi(y){var D=Date.now()/1e3|0;return y&&(Me[y>>2]=D),D}};(function Bn(){var y={a:Ft};function D(Lt,Vt){M.asm=Lt.exports,$n((oe=M.asm.D).buffer),Tt=M.asm.M,function qn(y){se.unshift(y)}(M.asm.E),un()}function B(Lt){D(Lt.instance)}function $(Lt){return function Mi(){return Ve||"function"!=typeof fetch?Promise.resolve().then(function(){return De(Nn)}):fetch(Nn,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+Nn+"'";return y.arrayBuffer()}).catch(function(){return De(Nn)})}().then(function(Vt){return WebAssembly.instantiate(Vt,y)}).then(function(Vt){return Vt}).then(Lt,function(Vt){Re("failed to asynchronously prepare wasm: "+Vt),bn(Vt)})}if(On(),M.instantiateWasm)try{return M.instantiateWasm(y,D)}catch(Lt){return Re("Module.instantiateWasm callback failed with error: "+Lt),!1}return function dt(){return Ve||"function"!=typeof WebAssembly.instantiateStreaming||ui(Nn)||"function"!=typeof fetch?$(B):fetch(Nn,{credentials:"same-origin"}).then(function(Lt){return WebAssembly.instantiateStreaming(Lt,y).then(B,function(ue){return Re("wasm streaming compile failed: "+ue),Re("falling back to ArrayBuffer instantiation"),$(B)})})}().catch(It),{}})(),M.___wasm_call_ctors=function(){return(M.___wasm_call_ctors=M.asm.E).apply(null,arguments)};var be=M._emscripten_bind_VoidPtr___destroy___0=function(){return(be=M._emscripten_bind_VoidPtr___destroy___0=M.asm.F).apply(null,arguments)},jt=M._emscripten_bind_Graphviz_Graphviz_2=function(){return(jt=M._emscripten_bind_Graphviz_Graphviz_2=M.asm.G).apply(null,arguments)},b=M._emscripten_bind_Graphviz_version_0=function(){return(b=M._emscripten_bind_Graphviz_version_0=M.asm.H).apply(null,arguments)},I=M._emscripten_bind_Graphviz_lastError_0=function(){return(I=M._emscripten_bind_Graphviz_lastError_0=M.asm.I).apply(null,arguments)},U=M._emscripten_bind_Graphviz_layout_3=function(){return(U=M._emscripten_bind_Graphviz_layout_3=M.asm.J).apply(null,arguments)},Q=M._emscripten_bind_Graphviz_createFile_2=function(){return(Q=M._emscripten_bind_Graphviz_createFile_2=M.asm.K).apply(null,arguments)},ct=M._emscripten_bind_Graphviz___destroy___0=function(){return(ct=M._emscripten_bind_Graphviz___destroy___0=M.asm.L).apply(null,arguments)};M._malloc=function(){return(M._malloc=M.asm.N).apply(null,arguments)};var Xe,yt=M._free=function(){return(yt=M._free=M.asm.O).apply(null,arguments)},kt=M.___errno_location=function(){return(kt=M.___errno_location=M.asm.P).apply(null,arguments)},Pt=M.stackSave=function(){return(Pt=M.stackSave=M.asm.Q).apply(null,arguments)},ae=M.stackRestore=function(){return(ae=M.stackRestore=M.asm.R).apply(null,arguments)},Se=M._setThrew=function(){return(Se=M._setThrew=M.asm.S).apply(null,arguments)},Ge=M._memalign=function(){return(Ge=M._memalign=M.asm.T).apply(null,arguments)};function Cn(y){this.name="ExitStatus",this.message="Program terminated with exit("+y+")",this.status=y}function di(y){function D(){Xe||(Xe=!0,M.calledRun=!0,!fn&&(function nn(){!M.noFSInit&&!O.init.initialized&&O.init(),O.ignorePermissions=!1,ht(se)}(),ft(M),M.onRuntimeInitialized&&M.onRuntimeInitialized(),function Zn(){if(M.postRun)for("function"==typeof M.postRun&&(M.postRun=[M.postRun]);M.postRun.length;)y=M.postRun.shift(),pe.unshift(y);var y;ht(pe)}()))}vn>0||(function Oe(){if(M.preRun)for("function"==typeof M.preRun&&(M.preRun=[M.preRun]);M.preRun.length;)y=M.preRun.shift(),Gt.unshift(y);var y;ht(Gt)}(),vn>0)||(M.setStatus?(M.setStatus("Running..."),setTimeout(function(){setTimeout(function(){M.setStatus("")},1),D()},1)):D())}if(ei=function y(){Xe||di(),Xe||(ei=y)},M.run=di,M.preInit)for("function"==typeof M.preInit&&(M.preInit=[M.preInit]);M.preInit.length>0;)M.preInit.pop()();function fi(){}function ii(y){return(y||fi).__cache__}function Oi(y,D){var B=ii(D),$=B[y];return $||(($=Object.create((D||fi).prototype)).ptr=y,B[y]=$)}di(),(fi.prototype=Object.create(fi.prototype)).constructor=fi,fi.prototype.__class__=fi,fi.__cache__={},M.WrapperObject=fi,M.getCache=ii,M.wrapPointer=Oi,M.castObject=function ar(y,D){return Oi(y.ptr,D)},M.NULL=Oi(0),M.destroy=function si(y){if(!y.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";y.__destroy__(),delete ii(y.__class__)[y.ptr]},M.compare=function ls(y,D){return y.ptr===D.ptr},M.getPointer=function Sa(y){return y.ptr},M.getClass=function cs(y){return y.__class__};var Fn={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Fn.needed){for(var y=0;y<Fn.temps.length;y++)M._free(Fn.temps[y]);Fn.temps.length=0,M._free(Fn.buffer),Fn.buffer=0,Fn.size+=Fn.needed,Fn.needed=0}Fn.buffer||(Fn.size+=128,Fn.buffer=M._malloc(Fn.size),Wn(Fn.buffer)),Fn.pos=0},alloc:function(y,D){Wn(Fn.buffer);var dt,$=y.length*D.BYTES_PER_ELEMENT;return Fn.pos+($=$+7&-8)>=Fn.size?(Wn($>0),Fn.needed+=$,dt=M._malloc($),Fn.temps.push(dt)):(dt=Fn.buffer+Fn.pos,Fn.pos+=$),dt},copy:function(y,D,B){switch(B>>>=0,D.BYTES_PER_ELEMENT){case 2:B>>>=1;break;case 4:B>>>=2;break;case 8:B>>>=3}for(var dt=0;dt<y.length;dt++)D[B+dt]=y[dt]}};function Lr(y){if("string"==typeof y){var D=Li(y),B=Fn.alloc(D,_n);return Fn.copy(D,_n,B),B}return y}function Ki(){throw"cannot construct a VoidPtr, no constructor in IDL"}function pi(y,D){y&&"object"==typeof y&&(y=y.ptr),D&&"object"==typeof D&&(D=D.ptr),this.ptr=jt(y,D),ii(pi)[this.ptr]=this}return(Ki.prototype=Object.create(fi.prototype)).constructor=Ki,Ki.prototype.__class__=Ki,Ki.__cache__={},M.VoidPtr=Ki,Ki.prototype.__destroy__=Ki.prototype.__destroy__=function(){be(this.ptr)},(pi.prototype=Object.create(fi.prototype)).constructor=pi,pi.prototype.__class__=pi,pi.__cache__={},M.Graphviz=pi,pi.prototype.version=pi.prototype.version=function(){return an(b(this.ptr))},pi.prototype.lastError=pi.prototype.lastError=function(){return an(I(this.ptr))},pi.prototype.layout=pi.prototype.layout=function(y,D,B){var $=this.ptr;return Fn.prepare(),y=y&&"object"==typeof y?y.ptr:Lr(y),D=D&&"object"==typeof D?D.ptr:Lr(D),B=B&&"object"==typeof B?B.ptr:Lr(B),an(U($,y,D,B))},pi.prototype.createFile=pi.prototype.createFile=function(y,D){var B=this.ptr;Fn.prepare(),y=y&&"object"==typeof y?y.ptr:Lr(y),D=D&&"object"==typeof D?D.ptr:Lr(D),Q(B,y,D)},pi.prototype.__destroy__=pi.prototype.__destroy__=function(){ct(this.ptr)},G.ready}}();Y.exports=ut}(P);var Z=Object.freeze(u({__proto__:null,default:P.exports},[P.exports])),z=function(){return z=Object.assign||function(Y){for(var K,ut=1,it=arguments.length;ut<it;ut++)for(var G in K=arguments[ut])Object.prototype.hasOwnProperty.call(K,G)&&(Y[G]=K[G]);return Y},z.apply(this,arguments)},H=function(Y,K,ut){if(ut||2===arguments.length)for(var M,it=0,G=K.length;it<G;it++)(M||!(it in K))&&(M||(M=Array.prototype.slice.call(K,0,it)),M[it]=K[it]);return Y.concat(M||Array.prototype.slice.call(K))};function tt(Y){return{path:Y.path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'.concat(Y.width,'" height="').concat(Y.height,'"></svg>')}}function ot(Y,K){var ut=z({images:[],files:[]},K);H(H([],ut.files,!0),function rt(Y){return Y.map(tt)}(ut.images),!0).forEach(function(it){return Y.createFile(it.path,it.data)})}var et={layout:function(Y,K,ut,it){return void 0===K&&(K="svg"),void 0===ut&&(ut="dot"),Y?f(Z,null==it?void 0:it.wasmFolder,null==it?void 0:it.wasmBinary).then(function(G){var M=new G.Graphviz(void 0!==(null==it?void 0:it.yInvert)&&(null==it?void 0:it.yInvert),void 0!==(null==it?void 0:it.nop)?null==it?void 0:it.nop:0);ot(M,it);var ft=M.layout(Y,K,ut);if(G.destroy(M),!ft)throw new Error(G.Graphviz.prototype.lastError());return ft}):Promise.resolve("")},circo:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"circo",ut)},dot:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"dot",ut)},fdp:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"fdp",ut)},sfdp:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"sfdp",ut)},neato:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"neato",ut)},osage:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"osage",ut)},patchwork:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"patchwork",ut)},twopi:function(Y,K,ut){return void 0===K&&(K="svg"),this.layout(Y,K,"twopi",ut)}},q=function(){function Y(K){this._wasm=K}return Y.prototype.layout=function(K,ut,it,G){if(void 0===ut&&(ut="svg"),void 0===it&&(it="dot"),!K)return"";var M=new this._wasm.Graphviz((null==G?void 0:G.yInvert)?1:0,(null==G?void 0:G.nop)?null==G?void 0:G.nop:0);ot(M,G);var ft=M.layout(K,ut,it);if(this._wasm.destroy(M),!ft)throw new Error(this._wasm.Graphviz.prototype.lastError());return ft},Y.prototype.circo=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"circo",it)},Y.prototype.dot=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"dot",it)},Y.prototype.fdp=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"fdp",it)},Y.prototype.sfdp=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"sfdp",it)},Y.prototype.neato=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"neato",it)},Y.prototype.osage=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"osage",it)},Y.prototype.patchwork=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"patchwork",it)},Y.prototype.twopi=function(K,ut,it){return void 0===ut&&(ut="svg"),this.layout(K,ut,"twopi",it)},Y}();o.GraphvizSync=q,o.StackElement=p,o.StackParser=C,o.expatVersion=function L(Y,K){return f(_,Y,K).then(function(ut){return ut.CExpat.prototype.version()})},o.graphviz=et,o.graphvizSync=function at(Y,K){return f(Z,Y,K).then(function(ut){return new q(ut)})},o.graphvizVersion=function J(Y,K){return f(Z,Y,K).then(function(ut){return ut.Graphviz.prototype.version()})},o.parse=N,o.wasmFolder=c,Object.defineProperty(o,"__esModule",{value:!0})}(k)},68484:(w,k,o)=>{"use strict";o.r(k),o.d(k,{AdminModule:()=>zb});var u={};o.r(u),o.d(u,{forceCenter:()=>Hf,forceCollide:()=>dl,forceLink:()=>_l,forceManyBody:()=>xl,forceRadial:()=>gp,forceSimulation:()=>vl,forceX:()=>_p,forceY:()=>vp});var x={};o.r(x),o.d(x,{dispatch:()=>ca.Z});var v={};o.r(v),o.d(v,{interval:()=>yp,now:()=>er.zO,timeout:()=>ua.Z,timer:()=>er.HT,timerFlush:()=>er.R8});var _=o(69808),m=o(11735),l=o(69024),t=o(5e3),c=o(77968),h=o(4235),g=o(25245),f=o(61283),p=o(51062);const C=function(){return{color:"black"}};let A=(()=>{class n{constructor(e,i){this.sideMenuService=e,this.sideMenuItemService=i}ngOnInit(){this.sideMenuService.setAdminItems([])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.D),t.Y36(l.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-page"]],decls:7,vars:5,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","admin-theme"],[1,"page-title","d-flex"],["svgIcon","perun-perun-admin",1,"perun-icon","icon-scale",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.TgZ(2,"h1",1),t._UZ(3,"mat-icon",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(4,C)),t.xp6(1),t.hij(" ",t.lcZ(5,2,"ADMIN.TITLE")," "))},directives:[h.W,g.Hw,_.PC,f.A],pipes:[p.X$],styles:[""]}),n})();var L=o(71135);let N=(()=>{class n{constructor(){this.navItems=[{cssIcon:"perun-attributes",url:"/admin/attributes",label:"MENU_ITEMS.ADMIN.ATTRIBUTES",style:"admin-btn"},{cssIcon:"perun-user",url:"/admin/users",label:"MENU_ITEMS.ADMIN.USERS",style:"admin-btn"},{cssIcon:"perun-owner-grey",url:"/admin/owners",label:"MENU_ITEMS.ADMIN.OWNERS",style:"admin-btn"},{cssIcon:"perun-service",url:"/admin/services",label:"MENU_ITEMS.ADMIN.SERVICES",style:"admin-btn"},{cssIcon:"perun-preview",url:"/admin/visualizer",label:"MENU_ITEMS.ADMIN.VISUALIZER",style:"admin-btn"},{cssIcon:"perun-external-sources",url:"/admin/ext_sources",label:"MENU_ITEMS.ADMIN.EXT_SOURCES",style:"admin-btn"},{cssIcon:"perun-audit-log",url:"/admin/audit_log",label:"MENU_ITEMS.ADMIN.AUDIT_LOG",style:"admin-btn"},{cssIcon:"perun-consent-hubs",url:"/admin/consent_hubs",label:"MENU_ITEMS.ADMIN.CONSENT_HUBS",style:"admin-btn"},{cssIcon:"perun-searcher",url:"/admin/searcher",label:"MENU_ITEMS.ADMIN.SEARCHER",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.navItems)("size","small"))},directives:[L.L],styles:[""]}),n})();var P=o(20449),R=o(48966),Z=o(32075),z=o(36908),H=o(112),tt=o(20773),rt=o(98380),ot=o(47423);function J(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function et(n,r){1&n&&t._UZ(0,"th",16)}function q(n,r){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function at(n,r){1&n&&t._UZ(0,"tr",18)}function Y(n,r){1&n&&t._UZ(0,"tr",19)}function K(n,r){if(1&n&&(t.TgZ(0,"div",7),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,et,1,0,"th",11),t.YNc(10,q,2,1,"td",12),t.BQk(),t.YNc(11,at,1,0,"tr",13),t.YNc(12,Y,1,0,"tr",14),t.qZA(),t.TgZ(13,"app-alert",15),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TEXT_LINE2")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.hij(" ",t.lcZ(15,10,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.WARNING")," ")}}let ut=(()=>{class n{constructor(e,i,a,s,d){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=s,this.attributesManager=d,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.dataSource=new Z.by(this.data.attributes)}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0;const e=[];for(const i of this.data.attributes)e.push(i.id);this.attributesManager.deleteAttributeDefinitions(e).subscribe(()=>{this.translate.get("DIALOGS.DELETE_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.dialogRef.close(!0)})},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(z.V6),t.Y36(p.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-attribute-definition-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",1,"mt-3"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,J,1,0,"mat-spinner",1),t.YNc(5,K,16,12,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onSubmit()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},directives:[R.uh,_.O5,tt.$g,R.xY,Z.BZ,Z.w1,Z.fO,Z.ge,Z.Dz,Z.ev,Z.as,Z.XQ,Z.nj,Z.Gk,rt.w,R.H8,ot.lW],pipes:[p.X$],styles:[""]}),n})();var it=o(45323),G=o(67322),M=o(98833),ft=o(93075),It=o(74533),Zt=o(74107),zt=o(90508),ne=o(32368),Ut=o(29772),xt=o(77446);function pt(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function Nt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")))}function Jt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")))}function ge(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")))}function _e(n,r){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Te(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_SELECT_SOMETHING")))}function Re(n,r){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Tn(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_SELECT_SOMETHING")))}function Fe(n,r){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function gn(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ERROR_SELECT_SOMETHING")))}function Ve(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"mat-form-field",9),t.TgZ(2,"label"),t.TgZ(3,"input",10),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().attDef.friendlyName=a}),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.YNc(5,Nt,3,3,"mat-error",11),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"mat-form-field",9),t.TgZ(8,"label"),t.TgZ(9,"input",10),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().attDef.displayName=a}),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.YNc(11,Jt,3,3,"mat-error",11),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"mat-form-field",9),t.TgZ(14,"label"),t.TgZ(15,"textarea",12),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().attDef.description=a}),t.ALo(16,"translate"),t._uU(17,"        "),t.qZA(),t.qZA(),t.YNc(18,ge,3,3,"mat-error",11),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"mat-form-field",9),t.TgZ(21,"mat-placeholder"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-select",13),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().entity=a}),t.YNc(25,_e,2,2,"mat-option",14),t.qZA(),t.YNc(26,Te,3,3,"mat-error",11),t.qZA(),t._UZ(27,"br"),t.TgZ(28,"mat-form-field",9),t.TgZ(29,"mat-placeholder"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"mat-select",13),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().definitionType=a}),t.YNc(33,Re,2,2,"mat-option",14),t.qZA(),t.YNc(34,Tn,3,3,"mat-error",11),t.qZA(),t._UZ(35,"br"),t.TgZ(36,"mat-form-field",9),t.TgZ(37,"mat-placeholder"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"mat-select",13),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().valueType=a}),t.YNc(41,Fe,2,2,"mat-option",14),t.qZA(),t.YNc(42,gn,3,3,"mat-error",11),t.qZA(),t._UZ(43,"br"),t.TgZ(44,"div",15),t.TgZ(45,"p"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"p",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().attDef.unique=!1}),t._uU(49,"OFF"),t.qZA(),t.TgZ(50,"mat-slide-toggle",17),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().attDef.unique=a}),t.ALo(51,"translate"),t._uU(52," ON "),t.qZA(),t.qZA(),t.TgZ(53,"div",18),t.TgZ(54,"p",19),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"p",20),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.qZA(),t.TgZ(60,"div",21),t.TgZ(61,"p",22),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"mat-checkbox",23),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().readSelf=a}),t.qZA(),t.TgZ(65,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().writeSelf=a}),t.qZA(),t.qZA(),t.TgZ(66,"div",21),t.TgZ(67,"p",22),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().readSelfPublic=a}),t.qZA(),t.TgZ(71,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().writeSelfPublic=a}),t.qZA(),t.qZA(),t.TgZ(72,"div",21),t.TgZ(73,"p",22),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"mat-checkbox",26),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().readSelfVo=a}),t.qZA(),t.TgZ(77,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().writeSelfVo=a}),t.qZA(),t.qZA(),t.TgZ(78,"div",21),t.TgZ(79,"p",22),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"mat-checkbox",27),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().readVo=a}),t.qZA(),t.TgZ(83,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().writeVo=a}),t.qZA(),t.qZA(),t.TgZ(84,"div",21),t.TgZ(85,"p",22),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"mat-checkbox",28),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().readGroup=a}),t.qZA(),t.TgZ(89,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().writeGroup=a}),t.qZA(),t.qZA(),t.TgZ(90,"div",21),t.TgZ(91,"p",22),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"mat-checkbox",26),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().readFacility=a}),t.qZA(),t.TgZ(95,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().writeFacility=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.s9C("placeholder",t.lcZ(4,46,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FRIENDLY_NAME")),t.Q6J("ngModel",e.attDef.friendlyName),t.xp6(2),t.Q6J("ngIf",""===e.attDef.friendlyName),t.xp6(4),t.s9C("placeholder",t.lcZ(10,48,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.Q6J("ngModel",e.attDef.displayName),t.xp6(2),t.Q6J("ngIf",""===e.attDef.displayName),t.xp6(4),t.s9C("placeholder",t.lcZ(16,50,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.Q6J("ngModel",e.attDef.description),t.xp6(3),t.Q6J("ngIf",""===e.attDef.description),t.xp6(4),t.Oqu(t.lcZ(23,52,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.ENTITY")),t.xp6(2),t.Q6J("ngModel",e.entity),t.xp6(1),t.Q6J("ngForOf",e.entities),t.xp6(1),t.Q6J("ngIf",""===e.attDef.entity),t.xp6(4),t.Oqu(t.lcZ(31,54,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.DEFINITION")),t.xp6(2),t.Q6J("ngModel",e.definitionType),t.xp6(1),t.Q6J("ngForOf",e.definitionTypes),t.xp6(1),t.Q6J("ngIf",""===e.definitionType),t.xp6(4),t.Oqu(t.lcZ(39,56,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VALUE_TYPE")),t.xp6(2),t.Q6J("ngModel",e.valueType),t.xp6(1),t.Q6J("ngForOf",e.valueTypes),t.xp6(1),t.Q6J("ngIf",""===e.valueType),t.xp6(4),t.Oqu(t.lcZ(47,58,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.UNIQUE")),t.xp6(4),t.s9C("matTooltip",t.lcZ(51,60,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TOOLTIP_UNIQUE")),t.Q6J("matTooltipDisabled",!e.disableUniqueToggle())("disabled",e.disableUniqueToggle())("ngModel",e.attDef.unique),t.xp6(5),t.Oqu(t.lcZ(56,62,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.READ")),t.xp6(3),t.Oqu(t.lcZ(59,64,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.WRITE")),t.xp6(4),t.Oqu(t.lcZ(63,66,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SELF")),t.xp6(2),t.Q6J("ngModel",e.readSelf),t.xp6(1),t.Q6J("ngModel",e.writeSelf),t.xp6(3),t.Oqu(t.lcZ(69,68,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SELF_PUBLIC")),t.xp6(2),t.Q6J("ngModel",e.readSelfPublic),t.xp6(1),t.Q6J("ngModel",e.writeSelfPublic),t.xp6(3),t.Oqu(t.lcZ(75,70,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SELF_VO")),t.xp6(2),t.Q6J("ngModel",e.readSelfVo),t.xp6(1),t.Q6J("ngModel",e.writeSelfVo),t.xp6(3),t.Oqu(t.lcZ(81,72,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VO")),t.xp6(2),t.Q6J("ngModel",e.readVo),t.xp6(1),t.Q6J("ngModel",e.writeVo),t.xp6(3),t.Oqu(t.lcZ(87,74,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.GROUP")),t.xp6(2),t.Q6J("ngModel",e.readGroup),t.xp6(1),t.Q6J("ngModel",e.writeGroup),t.xp6(3),t.Oqu(t.lcZ(93,76,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FACILITY")),t.xp6(2),t.Q6J("ngModel",e.readFacility),t.xp6(1),t.Q6J("ngModel",e.writeFacility)}}let Mn=(()=>{class n{constructor(e,i,a,s){this.dialogRef=e,this.notificator=i,this.translate=a,this.attributesManager=s,this.loading=!1,this.entities=["facility","resource","group","group_resource","host","member","member_group","member_resource","user","user_ext_source","user_facility","vo","entityless"],this.definitionTypes=["def","opt","virt","core"],this.definitionType="",this.valueTypes=["String","Integer","Boolean","Array","LinkedHashMap"],this.valueType="",this.readSelf=!1,this.readSelfPublic=!1,this.readSelfVo=!1,this.readVo=!1,this.readGroup=!1,this.readFacility=!1,this.writeSelf=!1,this.writeSelfPublic=!1,this.writeSelfVo=!1,this.writeVo=!1,this.writeGroup=!1,this.writeFacility=!1}ngOnInit(){this.attDef={beanName:"",description:"",displayName:"",entity:"",friendlyName:"",id:void 0,namespace:"",type:"",unique:!1,writable:!1}}onSubmit(){this.loading=!0,this.attDef.namespace="urn:perun:"+this.entity+":attribute-def:"+this.definitionType,this.readValueType(),this.attributesManager.createAttributeDefinition({attribute:this.attDef}).subscribe(e=>{this.attDef=e,this.attributesManager.setAttributeRights({rights:this.readRights()}).subscribe(()=>{this.translate.get("DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.dialogRef.close(!0)})},()=>this.loading=!1)},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}readRights(){const e=[],i={};i.attributeId=this.attDef.id,i.role=it.u.SELF,i.rights=[],this.readSelf&&i.rights.push("READ"),this.readSelfPublic&&i.rights.push("READ_PUBLIC"),this.readSelfVo&&i.rights.push("READ_VO"),this.writeSelf&&i.rights.push("WRITE"),this.writeSelfPublic&&i.rights.push("WRITE_PUBLIC"),this.writeSelfVo&&i.rights.push("WRITE_VO"),e.push(i);const a={};a.attributeId=this.attDef.id,a.role=it.u.VOADMIN,a.rights=[],this.readVo&&a.rights.push(H.Us.READ),this.writeVo&&a.rights.push(H.Us.WRITE),e.push(a);const s={};s.attributeId=this.attDef.id,s.role=it.u.GROUPADMIN,s.rights=[],this.readGroup&&s.rights.push(H.Us.READ),this.writeGroup&&s.rights.push(H.Us.WRITE),e.push(s);const d={};return d.attributeId=this.attDef.id,d.role=it.u.FACILITYADMIN,d.rights=[],this.readFacility&&d.rights.push(H.Us.READ),this.writeFacility&&d.rights.push(H.Us.WRITE),e.push(d),e}readValueType(){switch(this.valueType){case"String":this.attDef.type="java.lang.String";break;case"Integer":this.attDef.type="java.lang.Integer";break;case"Boolean":this.attDef.type="java.lang.Boolean";break;case"Array":this.attDef.type="java.util.ArrayList";break;case"LinkedHashMap":this.attDef.type="java.util.LinkedHashMap"}}disableConfirmButton(){return""===this.attDef.friendlyName||""===this.attDef.displayName||""===this.attDef.description||""===this.entity||""===this.definitionType||""===this.valueType||this.loading}disableUniqueToggle(){return("virt"===this.definitionType||"entityless"===this.entity)&&(this.attDef.unique=!1,!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(z.V6),t.Y36(p.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-attribute-definition-dialog"]],decls:14,vars:16,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltip","matTooltipDisabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"form-field-width"],["matInput","","required","",1,"form-field-width",3,"ngModel","placeholder","ngModelChange"],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","required","",1,"form-field-width",3,"ngModel","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","mt-3"],[1,"pointer","ml-4",3,"click"],["color","accent","matTooltipPosition","above",1,"ml-2",3,"matTooltip","matTooltipDisabled","disabled","ngModel","ngModelChange"],[1,"d-flex","flex-row","mt-2"],[1,"ml-5","pl-4"],[1,"ml-4"],[1,"d-flex","flex-row"],[1,""],[1,"ml-5","pl-3",3,"ngModel","ngModelChange"],[1,"ml-5",3,"ngModel","ngModelChange"],[1,"ml-3",3,"ngModel","ngModelChange"],[1,"ml-4","pl-3",3,"ngModel","ngModelChange"],[1,"ml-5","pl-4",3,"ngModel","ngModelChange"],[1,"ml-4","pl-4",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,pt,1,0,"mat-spinner",2),t.YNc(5,Ve,96,78,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onSubmit()}),t.ALo(11,"translate"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,8,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,10,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(11,12,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.TOOLTIP_CONFIRM")),t.Q6J("disabled",i.disableConfirmButton())("matTooltipDisabled",!i.disableConfirmButton()),t.xp6(2),t.hij(" ",t.lcZ(13,14,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.CONFIRM")," "))},directives:[R.uh,_.O5,tt.$g,R.xY,G.KE,M.Nt,ft.Fj,ft.Q7,ft.JJ,ft.On,G.TO,It.IC,G.UY,Zt.gD,_.sg,zt.ey,ne.Rr,Ut.gM,xt.oG,R.H8,ot.lW],pipes:[p.X$],styles:[".unique-toggle-label[_ngcontent-%COMP%]{font-size:1.125rem}.form-field-width[_ngcontent-%COMP%]{width:450px}.pointer[_ngcontent-%COMP%]{cursor:pointer}textarea[cdktextareaautosize].mat-input-element[_ngcontent-%COMP%]{overflow:hidden}"]}),n})();var oe=o(9244),fn=o(10036);function Wn(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function ni(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"app-alert",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",10),t.TgZ(5,"input",11),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().value=a}),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.IMPORT_ATTRIBUTE.INFO")," "),t.xp6(3),t.Q6J("ngModel",e.value)("placeholder",t.lcZ(6,5,"DIALOGS.IMPORT_ATTRIBUTE.HINT"))}}let zn=(()=>{class n{constructor(e,i,a,s){this.dialogRef=e,this.notificator=i,this.translate=a,this.attributesManager=s,this.value="",this.loading=!1}create(){try{this.loading=!0,this.attributeData=JSON.parse(this.value),this.attributesManager.createAttributeDefinition({attribute:this.attributeData.attributeDefinition}).subscribe(e=>{for(let i=0;i<this.attributeData.attributeRights.length;i++)this.attributeData.attributeRights[i].attributeId=e.id;this.attributesManager.setAttributeRights({rights:this.attributeData.attributeRights}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.IMPORT_ATTRIBUTE_DEFINITION.SUCCESS")),this.dialogRef.close(!0)})},()=>this.loading=!1)}catch(e){console.log(e),this.notificator.showError(e),this.loading=!1}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(z.V6),t.Y36(p.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attribute-import-dialog"]],decls:13,vars:12,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","info"],[1,"w-100"],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Wn,1,0,"mat-spinner",2),t.YNc(5,ni,7,7,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.dialogRef.close()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.create()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,6,"DIALOGS.IMPORT_ATTRIBUTE.TITLE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.IMPORT_ATTRIBUTE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===i.value.trim().length||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.IMPORT_ATTRIBUTE.CREATE")," "))},directives:[R.uh,_.O5,tt.$g,R.xY,rt.w,G.KE,M.Nt,ft.Fj,ft.Q7,ft.JJ,ft.On,R.H8,ot.lW],pipes:[p.X$],styles:[""]}),n})();var an=o(96214),je=o(7434),sn=o(84847),En=o(36769),Be=o(69287),ci=o(60205),Rn=o(80255),_n=o(18750),Yn=o(43532);function ti(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",22),t.TgZ(1,"mat-checkbox",23),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw(2);return a?s.masterToggle():null}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Me(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",24),t.TgZ(1,"mat-checkbox",25),t.NdJ("change",function(a){const d=t.CHM(e).$implicit,T=t.oxw(2);return a?T.selection.toggle(d):null})("click",function(a){return a.stopPropagation()}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))}}function Xn(n,r){1&n&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.KEY")," "))}function $n(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"label"),t.TgZ(2,"input",28),t.NdJ("ngModelChange",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onValueChange(s)})("ngModelChange",function(a){return t.CHM(e).$implicit[0]=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngModel",e[0])}}function Tt(n,r){1&n&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.VALUE")," "))}function Gt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"perun-web-apps-attribute-value",29),t.NdJ("sendEventToParent2",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onValueChange(s)}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("attribute",e[1])}}function se(n,r){1&n&&t._UZ(0,"tr",30)}function pe(n,r){1&n&&t._UZ(0,"tr",31)}function ve(n,r){if(1&n&&(t.TgZ(0,"div",10),t.TgZ(1,"perun-web-apps-table-wrapper",11),t.TgZ(2,"table",12),t.ynx(3,13),t.YNc(4,ti,2,3,"th",14),t.YNc(5,Me,2,2,"td",15),t.BQk(),t.ynx(6,16),t.YNc(7,Xn,3,3,"th",17),t.YNc(8,$n,3,1,"td",18),t.BQk(),t.ynx(9,19),t.YNc(10,Tt,3,3,"th",17),t.YNc(11,Gt,2,1,"td",18),t.BQk(),t.YNc(12,se,1,0,"tr",20),t.YNc(13,pe,1,0,"tr",21),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("tableId",e.tableId)("dataLength",e.dataSource.filteredData.length)("hideExport",!0)("pageSizeOptions",e.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function Ze(n,r){1&n&&t._UZ(0,"mat-spinner",32)}function Oe(n,r){1&n&&(t.TgZ(0,"app-alert",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.NO_KEYS_WARNING")," "))}let nn=(()=>{class n{constructor(e,i,a,s,d){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=s,this.attributesManager=d,this.switchView=new t.vpe,this.records=[],this.displayedColumns=["select","key","value"],this.dataSource=new Z.by,this.selection=new P.Ov(!0,[]),this.isAddButtonDisabled=!1,this.pageSizeOptions=oe.f7}set matSort(e){this.sort=e}ngOnChanges(){this.ngOnInit()}ngOnInit(){this.loading=!0,this.attDef=this.data.attDef,this.attributesManager.getEntitylessKeys(this.attDef.id).subscribe(e=>{this.attributesManager.getEntitylessAttributesByName(`${this.attDef.namespace}:${this.attDef.friendlyName}`).subscribe(i=>{let a=0;this.records=[];for(const s of e)this.records.push([s,i[a]]),a++;this.dataSource=new Z.by(this.records),this.setDataSource(),this.loading=!1})})}setDataSource(){!this.child||!this.child.paginator||this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator)}onSave(){this.updateMapAttributes();for(const e of this.selection.selected)this.attributesManager.setEntitylessAttribute({key:e[0],attribute:e[1]}).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.selection.clear(),this.isAddButtonDisabled=!1}onRemove(){for(const e of this.selection.selected)this.attributesManager.removeEntitylessAttribute(e[0],e[1].id).subscribe(()=>{this.translate.get("SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE_SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.ngOnInit()})});this.ngOnInit(),this.selection.clear(),this.isAddButtonDisabled=!1}onAdd(){const e=["",this.attDef];e[1].value=void 0,this.records.unshift(e),this.dataSource.data=this.records,this.setDataSource(),this.selection.clear(),this.selection.select(e),this.isAddButtonDisabled=!0}onCancel(){this.dialogRef.close(!1)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e[1].id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onValueChange(e){this.selection.select(e)}updateMapAttributes(){for(const e of this.items.toArray())"java.util.LinkedHashMap"===e.attribute.type&&e.updateMapAttribute()}ngAfterViewInit(){this.children.changes.subscribe(e=>{this.child=e.first,this.dataSource.paginator=this.child.paginator})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(z.V6),t.Y36(p.sK),t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-entityless-attribute-keys-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(sn.YE,7),t.Gf(oe.l9,5),t.Gf(Rn.Mw,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.matSort=a.first),t.iGM(a=t.CRH())&&(i.children=a),t.iGM(a=t.CRH())&&(i.items=a)}},inputs:{attDef:"attDef",tableId:"tableId"},outputs:{switchView:"switchView"},features:[t.TTD],decls:19,vars:19,consts:[["mat-dialog-title",""],["mat-dialog-actions","",1,"mt-3"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"click"],["mat-flat-button","","color","accent","matTooltip","save or remove new attribute first","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltipDisabled","click"],["mat-flat-button","","color","warn",1,"ml-2",3,"click"],["mat-dialog-content","",1,"mt-3",3,"hidden"],["class","card mt-3",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn","class","mt-3",4,"ngIf"],[1,"card","mt-3"],[3,"tableId","dataLength","hideExport","pageSizeOptions"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","key"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matInput","","placeholder","New key",1,"mt-2",3,"ngModel","ngModelChange"],[3,"attribute","sendEventToParent2"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],[1,"ml-auto","mr-auto"],["alert_type","warn",1,"mt-3"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.switchView.emit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",6),t.YNc(16,ve,14,7,"div",7),t.YNc(17,Ze,1,0,"mat-spinner",8),t.YNc(18,Oe,3,3,"app-alert",9),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.attDef.namespace+":"+i.attDef.friendlyName),t.xp6(3),t.hij(" ",t.lcZ(5,11,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(8,13,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.SAVE")," "),t.xp6(2),t.Q6J("disabled",i.isAddButtonDisabled)("matTooltipDisabled",!i.isAddButtonDisabled),t.xp6(1),t.hij(" ",t.lcZ(11,15,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.ADD")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"SHARED.COMPONENTS.ENTITYLESS_ATTRIBUTES_LIST.REMOVE")," "),t.xp6(2),t.Q6J("hidden",i.loading),t.xp6(1),t.Q6J("ngIf",i.records&&i.records.length),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",0===i.records.length))},directives:[R.uh,R.H8,ot.lW,Ut.gM,R.xY,_.O5,_n.l,Z.BZ,sn.YE,Z.w1,Z.fO,Z.ge,xt.oG,Z.Dz,Z.ev,sn.nU,M.Nt,ft.Fj,ft.JJ,ft.On,Yn.M,Z.as,Z.XQ,Z.nj,Z.Gk,tt.$g,rt.w],pipes:[p.X$],styles:[".mat-cell[_ngcontent-%COMP%]{padding:8px 8px 8px 0}"]}),n})();const Zn=["copiedTooltip"];function Dn(n,r){1&n&&t._UZ(0,"mat-spinner",12)}function qn(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")))}function Di(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.ERROR_FIELD_EMPTY")))}const vn=function(){return["id","name","enabled","script"]};function ei(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"mat-form-field",3),t.TgZ(2,"label"),t.TgZ(3,"input",14),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).attDef.displayName=a}),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.YNc(5,qn,3,3,"mat-error",2),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"mat-form-field",3),t.TgZ(8,"label"),t.TgZ(9,"textarea",15),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).attDef.description=a}),t.ALo(10,"translate"),t._uU(11,"              "),t.qZA(),t.qZA(),t.YNc(12,Di,3,3,"mat-error",2),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"div",16),t.TgZ(15,"p"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"p",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).attDef.unique=!1}),t._uU(19,"OFF"),t.qZA(),t.TgZ(20,"mat-slide-toggle",18),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).attDef.unique=a}),t.ALo(21,"translate"),t._uU(22," ON "),t.qZA(),t.qZA(),t.TgZ(23,"div",19),t.TgZ(24,"p",20),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"p",21),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"div",22),t.TgZ(31,"p",23),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"mat-checkbox",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).readSelf=a}),t.qZA(),t.TgZ(35,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).writeSelf=a}),t.qZA(),t.qZA(),t.TgZ(36,"div",22),t.TgZ(37,"p",23),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"mat-checkbox",26),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).readSelfPublic=a}),t.qZA(),t.TgZ(41,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).writeSelfPublic=a}),t.qZA(),t.qZA(),t.TgZ(42,"div",22),t.TgZ(43,"p",23),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"mat-checkbox",27),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).readSelfVo=a}),t.qZA(),t.TgZ(47,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).writeSelfVo=a}),t.qZA(),t.qZA(),t.TgZ(48,"div",22),t.TgZ(49,"p",23),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-checkbox",28),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).readVo=a}),t.qZA(),t.TgZ(53,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).writeVo=a}),t.qZA(),t.qZA(),t.TgZ(54,"div",22),t.TgZ(55,"p",23),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"mat-checkbox",29),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).readGroup=a}),t.qZA(),t.TgZ(59,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).writeGroup=a}),t.qZA(),t.qZA(),t.TgZ(60,"div",22),t.TgZ(61,"p",23),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"mat-checkbox",27),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).readFacility=a}),t.qZA(),t.TgZ(65,"mat-checkbox",25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).writeFacility=a}),t.qZA(),t.qZA(),t.TgZ(66,"div",30),t.TgZ(67,"p"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"app-services-list",31),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(3),t.s9C("placeholder",t.lcZ(4,35,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DISPLAY_NAME")),t.Q6J("ngModel",e.attDef.displayName),t.xp6(2),t.Q6J("ngIf",""===e.attDef.displayName),t.xp6(4),t.s9C("placeholder",t.lcZ(10,37,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.DESCRIPTION")),t.Q6J("ngModel",e.attDef.description),t.xp6(3),t.Q6J("ngIf",""===e.attDef.description),t.xp6(4),t.Oqu(t.lcZ(17,39,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.UNIQUE")),t.xp6(4),t.s9C("matTooltip",t.lcZ(21,41,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.TOOLTIP_UNIQUE")),t.Q6J("matTooltipDisabled",!e.disableUniqueToggle())("disabled",e.disableUniqueToggle())("ngModel",e.attDef.unique),t.xp6(5),t.Oqu(t.lcZ(26,43,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.READ")),t.xp6(3),t.Oqu(t.lcZ(29,45,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.WRITE")),t.xp6(4),t.Oqu(t.lcZ(33,47,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SELF")),t.xp6(2),t.Q6J("ngModel",e.readSelf),t.xp6(1),t.Q6J("ngModel",e.writeSelf),t.xp6(3),t.Oqu(t.lcZ(39,49,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SELF_PUBLIC")),t.xp6(2),t.Q6J("ngModel",e.readSelfPublic),t.xp6(1),t.Q6J("ngModel",e.writeSelfPublic),t.xp6(3),t.Oqu(t.lcZ(45,51,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.SELF_VO")),t.xp6(2),t.Q6J("ngModel",e.readSelfVo),t.xp6(1),t.Q6J("ngModel",e.writeSelfVo),t.xp6(3),t.Oqu(t.lcZ(51,53,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.VO")),t.xp6(2),t.Q6J("ngModel",e.readVo),t.xp6(1),t.Q6J("ngModel",e.writeVo),t.xp6(3),t.Oqu(t.lcZ(57,55,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.GROUP")),t.xp6(2),t.Q6J("ngModel",e.readGroup),t.xp6(1),t.Q6J("ngModel",e.writeGroup),t.xp6(3),t.Oqu(t.lcZ(63,57,"DIALOGS.CREATE_ATTRIBUTE_DEFINITION.FACILITY")),t.xp6(2),t.Q6J("ngModel",e.readFacility),t.xp6(1),t.Q6J("ngModel",e.writeFacility),t.xp6(3),t.Oqu(t.lcZ(69,59,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SERVICES")),t.xp6(2),t.Q6J("services",e.services)("displayedColumns",t.DdM(61,vn))("disableRouting",!0)}}function Ai(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).switchShowKeys()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SHOW_KEYS")," "))}function On(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",3),t.TgZ(2,"h1",4),t._uU(3),t.qZA(),t.YNc(4,Dn,1,0,"mat-spinner",5),t.YNc(5,ei,71,62,"div",6),t.TgZ(6,"div",7),t.YNc(7,Ai,3,3,"button",8),t.TgZ(8,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCopy()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t.ALo(15,"translate"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.attDef.namespace+":"+e.attDef.friendlyName),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(2),t.Q6J("ngIf","entityless"===e.attDef.entity),t.xp6(2),t.hij(" ",t.lcZ(10,10,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FOR_IMPORT")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(15,14,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.TOOLTIP_CONFIRM")),t.Q6J("disabled",e.disableConfirmButton()||e.loading)("matTooltipDisabled",!e.disableConfirmButton()),t.xp6(2),t.hij(" ",t.lcZ(17,16,"DIALOGS.EDIT_ATTRIBUTE_DEFINITION.CONFIRM")," ")}}function un(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-entityless-attribute-keys-list",33),t.NdJ("switchView",function(){return t.CHM(e),t.oxw().switchShowKeys()}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("tableId",e.tableId)("attDef",e.attDef)}}let bn=(()=>{class n{constructor(e,i,a,s,d,T,E,F){this.dialog=e,this.dialogRef=i,this.data=a,this.notificator=s,this.translate=d,this.clipboard=T,this.attributesManager=E,this.serviceService=F,this.showKeys=!1,this.activatedComponent="Edit",this.readSelf=!1,this.readSelfPublic=!1,this.readSelfVo=!1,this.readVo=!1,this.readGroup=!1,this.readFacility=!1,this.writeSelf=!1,this.writeSelfPublic=!1,this.writeSelfVo=!1,this.writeVo=!1,this.writeGroup=!1,this.writeFacility=!1,this.tableId=fn.Wv,this.loading=!1}ngOnInit(){this.loading=!0,this.dialogRef.addPanelClass("mat-dialog-height-transition"),this.attDef=this.data.attDef,this.serviceService.getServicesByAttributeDefinition(this.attDef.id).subscribe(e=>{this.services=e,this.attributesManager.getAttributeRights(this.attDef.id).subscribe(i=>{this.fromRightsToCheckboxes(i),this.loading=!1},()=>this.loading=!1)},()=>this.loading=!1)}disableConfirmButton(){return""===this.attDef.displayName||""===this.attDef.description}disableUniqueToggle(){return this.attDef.namespace.includes("virt")||this.attDef.namespace.includes("core")||"entityless"===this.attDef.entity}onSubmit(){this.loading=!0,this.attributesManager.updateAttributeDefinition({attributeDefinition:this.attDef}).subscribe(e=>{this.attDef=e,this.attributesManager.setAttributeRights({rights:this.fromCheckboxesToRights()}).subscribe(()=>{this.translate.get("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.SUCCESS").subscribe(i=>{this.notificator.showSuccess(i),this.dialogRef.close(!0)})},()=>this.loading=!1)},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}fromCheckboxesToRights(){const e=[],i={};i.attributeId=this.attDef.id,i.role=it.u.SELF,i.rights=[],this.readSelf&&i.rights.push("READ"),this.readSelfPublic&&i.rights.push("READ_PUBLIC"),this.readSelfVo&&i.rights.push("READ_VO"),this.writeSelf&&i.rights.push("WRITE"),this.writeSelfPublic&&i.rights.push("WRITE_PUBLIC"),this.writeSelfVo&&i.rights.push("WRITE_VO"),e.push(i);const a={};a.attributeId=this.attDef.id,a.role=it.u.VOADMIN,a.rights=[],this.readVo&&a.rights.push("READ"),this.writeVo&&a.rights.push("WRITE"),e.push(a);const s={};s.attributeId=this.attDef.id,s.role=it.u.GROUPADMIN,s.rights=[],this.readGroup&&s.rights.push(H.Us.READ),this.writeGroup&&s.rights.push("WRITE"),e.push(s);const d={};return d.attributeId=this.attDef.id,d.role=it.u.FACILITYADMIN,d.rights=[],this.readFacility&&d.rights.push("READ"),this.writeFacility&&d.rights.push("WRITE"),e.push(d),e}fromRightsToCheckboxes(e){for(const i of e)switch(i.role){case it.u.SELF:i.rights.includes("READ")&&(this.readSelf=!0),i.rights.includes("READ_PUBLIC")&&(this.readSelfPublic=!0),i.rights.includes("READ_VO")&&(this.readSelfVo=!0),i.rights.includes("WRITE")&&(this.writeSelf=!0),i.rights.includes("WRITE_PUBLIC")&&(this.writeSelfPublic=!0),i.rights.includes("WRITE_VO")&&(this.writeSelfVo=!0);break;case it.u.GROUPADMIN:i.rights.includes("READ")&&(this.readGroup=!0),i.rights.includes("WRITE")&&(this.writeGroup=!0);break;case it.u.FACILITYADMIN:i.rights.includes("READ")&&(this.readFacility=!0),i.rights.includes("WRITE")&&(this.writeFacility=!0);break;case it.u.VOADMIN:i.rights.includes("READ")&&(this.readVo=!0),i.rights.includes("WRITE")&&(this.writeVo=!0)}}switchShowKeys(){this.showKeys=!this.showKeys,this.showKeys?(this.dialogRef.updateSize("800px"),this.activatedComponent="Entityless"):(this.dialogRef.updateSize("700px"),this.activatedComponent="Edit")}onCopy(){const e={attributeDefinition:this.attDef,attributeRights:this.fromCheckboxesToRights()};this.clipboard.copy(JSON.stringify(e))?this.notificator.showSuccess(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPIED")):this.notificator.showError(this.translate.instant("DIALOGS.EDIT_ATTRIBUTE_DEFINITION.COPY_FAILED"))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.uw),t.Y36(R.so),t.Y36(R.WI),t.Y36(z.V6),t.Y36(p.sK),t.Y36(Be.TU),t.Y36(H.H8),t.Y36(H.KK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-attribute-definition-dialog"]],viewQuery:function(e,i){if(1&e&&t.Gf(Zn,5),2&e){let a;t.iGM(a=t.CRH())&&(i.copiedToolTip=a.first)}},decls:4,vars:2,consts:[[1,"admin-theme"],[1,"parent"],[4,"ngIf"],[1,"width-650"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",1,"mt-3"],["mat-flat-button","","class","ml-0",3,"click",4,"ngIf"],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","",1,"ml-2",3,"click"],["mat-flat-button","","color","accent","matTooltipPosition","above",1,"ml-2",3,"disabled","matTooltip","matTooltipDisabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],["matInput","","required","",1,"width-650",3,"ngModel","placeholder","ngModelChange"],["matInput","","cdkTextareaAutosize","","required","",1,"width-650",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","flex-row","mt-3"],[1,"pointer","ml-4",3,"click"],["color","accent","matTooltipPosition","above",1,"ml-2",3,"matTooltip","matTooltipDisabled","disabled","ngModel","ngModelChange"],[1,"d-flex","flex-row","mt-2"],[1,"ml-5","pl-4"],[1,"ml-4"],[1,"d-flex","flex-row"],[1,""],[1,"ml-5","pl-3",3,"ngModel","ngModelChange"],[1,"ml-5",3,"ngModel","ngModelChange"],[1,"ml-3",3,"ngModel","ngModelChange"],[1,"ml-4","pl-3",3,"ngModel","ngModelChange"],[1,"ml-5","pl-4",3,"ngModel","ngModelChange"],[1,"ml-4","pl-4",3,"ngModel","ngModelChange"],[1,"mt-4"],[3,"services","displayedColumns","disableRouting"],["mat-flat-button","",1,"ml-0",3,"click"],[3,"tableId","attDef","switchView"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,On,18,18,"div",2),t.YNc(3,un,2,2,"div",2),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",!i.showKeys),t.xp6(1),t.Q6J("ngIf",i.showKeys))},directives:[_.O5,R.uh,tt.$g,R.xY,G.KE,M.Nt,ft.Fj,ft.Q7,ft.JJ,ft.On,G.TO,It.IC,ne.Rr,Ut.gM,xt.oG,ci.Q,R.H8,ot.lW,nn],pipes:[p.X$],styles:[".unique-toggle-label[_ngcontent-%COMP%]{font-size:1.125rem}.width-650[_ngcontent-%COMP%]{width:650px!important}.pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]{overflow:hidden}.parent[_ngcontent-%COMP%]{display:flex}.parent[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}textarea[cdktextareaautosize].mat-input-element[_ngcontent-%COMP%]{overflow:hidden}"],data:{animation:[En.SG,En.GH,En.Ls]}}),n})();var Kn=o(70844);let ui=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(":")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"nameSpaceToDef",type:n,pure:!0}),n})(),Nn=(()=>{class n{transform(e){if(null===e)return null;const i=e;return i.substring(i.lastIndexOf(".")+1,i.length)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"attributeTypeClean",type:n,pure:!0}),n})();function De(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",19),t.TgZ(1,"mat-checkbox",20),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw();return a?s.masterToggle():null}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function Mi(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",21),t.TgZ(1,"mat-checkbox",22),t.NdJ("change",function(a){const d=t.CHM(e).$implicit,T=t.oxw();return a?T.selection.toggle(d):null})("click",function(a){return a.stopPropagation()}),t.ALo(2,"consentRelatedAttribute"),t.ALo(3,"translate"),t.ALo(4,"consentRelatedAttribute"),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))("disabled",t.Dn7(2,5,e.namespace,i.serviceEnabled,i.consentRequired))("matTooltip",t.lcZ(3,9,"ADMIN.ATTRIBUTES.CONSENT_RELATED_DISABLED"))("matTooltipDisabled",!t.Dn7(4,11,e.namespace,i.serviceEnabled,i.consentRequired))}}function Bn(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ID")," "))}function pn(n,r){if(1&n&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function V(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_FRIENDLY_NAME")," "))}function X(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function ht(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_ENTITY")," "))}function S(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.entity)}}function wt(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_DEF")," "))}function Ot(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"nameSpaceToDef"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.namespace))}}function Bt(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_TYPE")," "))}function Yt(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"attributeTypeClean"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.type))}}function re(n,r){1&n&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.TABLE_ATTR_UNIQUE")," "))}function qt(n,r){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.unique)}}function j(n,r){1&n&&t._UZ(0,"tr",26)}function mt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().onRowClick(s)}),t.qZA()}if(2&n){const e=t.oxw();t.ekj("cursor-pointer",!e.disableRouting)}}function Ct(n,r){1&n&&(t.TgZ(0,"app-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.NO_ATTRIBUTES"),"\n"))}function At(n,r){1&n&&(t.TgZ(0,"app-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}let Xt=(()=>{class n{constructor(e,i,a,s){this.dialog=e,this.authResolver=i,this.tableCheckbox=a,this.consentRelatedPipe=s,this.selection=new P.Ov(!0,[]),this.displayedColumns=["select","id","friendlyName","entity","namespace","type","unique"],this.disableRouting=!1,this.consentRequired=!1,this.serviceEnabled=!1,this.refreshEvent=new t.vpe,this.pageSizeOptions=oe.f7,this.canBeSelected=d=>!this.consentRelatedPipe.transform(d.namespace,this.serviceEnabled,this.consentRequired)}set matSort(e){this.sort=e,this.setDataSource()}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(e=>"id"!==e)),this.dataSource=new Z.by(this.definitions),this.setDataSource()}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"friendlyName":return e.friendlyName;case"entity":return e.entity;case"namespace":if(e.namespace){const a=e.namespace;return a.substring(a.lastIndexOf(":")+1,a.length)}return"";case"type":if(e.type){const a=e.type;return a.substring(a.lastIndexOf(".")+1,a.length)}return"";case"unique":return e.unique?"true":"false";default:return""}}exportData(e){(0,oe.O6)((0,oe.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getDataForColumn,this),e)}setDataSource(){this.dataSource&&(this.dataSource.filter=this.filterValue,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,i)=>(0,oe.Sd)(e,i,this.displayedColumns,this.getDataForColumn,this),this.dataSource.sortData=(e,i)=>(0,oe.pR)(e,i,this.getDataForColumn,this),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelectedWithDisabledCheckbox(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.child.paginator.pageIndex,this.dataSource,this.sort,this.canBeSelected)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!0,this.canBeSelected)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}onRowClick(e){if(!this.disableRouting){const i=(0,oe.kZ)();i.width="700px",i.data={attDef:e},this.dialog.open(bn,i).afterClosed().subscribe(s=>{s&&(this.selection.clear(),this.refreshEvent.emit())})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.uw),t.Y36(z.x4),t.Y36(z.UA),t.Y36(Kn.u))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attr-def-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(sn.YE,7),t.Gf(oe.l9,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.matSort=a.first),t.iGM(a=t.CRH())&&(i.child=a.first)}},inputs:{definitions:"definitions",selection:"selection",displayedColumns:"displayedColumns",filterValue:"filterValue",tableId:"tableId",disableRouting:"disableRouting",consentRequired:"consentRequired",serviceEnabled:"serviceEnabled"},outputs:{refreshEvent:"refreshEvent"},features:[t.TTD],decls:29,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportData"],[1,"overflow-auto"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","friendlyName"],["mat-cell","",4,"matCellDef"],["matColumnDef","entity"],["matColumnDef","namespace"],["matColumnDef","type"],["matColumnDef","unique"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","click",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["matTooltipPosition","left","color","primary",3,"aria-label","checked","disabled","matTooltip","matTooltipDisabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"click"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(s){return i.exportData(s)}),t.TgZ(2,"div",2),t.TgZ(3,"table",3),t.ynx(4,4),t.YNc(5,De,2,3,"th",5),t.YNc(6,Mi,5,15,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,Bn,3,3,"th",8),t.YNc(9,pn,2,1,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,V,3,3,"th",8),t.YNc(12,X,2,1,"td",11),t.BQk(),t.ynx(13,12),t.YNc(14,ht,3,3,"th",8),t.YNc(15,S,2,1,"td",11),t.BQk(),t.ynx(16,13),t.YNc(17,wt,3,3,"th",8),t.YNc(18,Ot,3,3,"td",11),t.BQk(),t.ynx(19,14),t.YNc(20,Bt,3,3,"th",8),t.YNc(21,Yt,3,3,"td",11),t.BQk(),t.ynx(22,15),t.YNc(23,re,3,3,"th",8),t.YNc(24,qt,2,1,"td",11),t.BQk(),t.YNc(25,j,1,0,"tr",16),t.YNc(26,mt,1,2,"tr",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,Ct,3,3,"app-alert",18),t.YNc(28,At,3,3,"app-alert",18)),2&e&&(t.Q6J("hidden",0===i.dataSource.filteredData.length||0===i.definitions.length),t.xp6(1),t.Q6J("tableId",i.tableId)("dataLength",i.dataSource.filteredData.length)("pageSizeOptions",i.pageSizeOptions),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.definitions.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.definitions.length))},directives:[_n.l,Z.BZ,sn.YE,Z.w1,Z.fO,Z.ge,xt.oG,Z.Dz,Z.ev,Ut.gM,sn.nU,Z.as,Z.XQ,Z.nj,Z.Gk,_.O5,rt.w],pipes:[Kn.u,p.X$,ui,Nn],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function te(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCreate()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.CREATE")," "))}function Dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onImport()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.ATTRIBUTES.IMPORT")," "))}function de(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDelete()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.ATTRIBUTES.DELETE")," ")}}function O(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",10),t.NdJ("refreshEvent",function(){return t.CHM(e),t.oxw().refreshTable()}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("definitions",e.attrDefinitions)("selection",e.selected)("filterValue",e.filterValue)("disableRouting",!e.authResolver.isPerunAdmin())}}let Le=(()=>{class n{constructor(e,i,a){this.dialog=e,this.attributesManager=i,this.authResolver=a,this.attrDefinitions=[],this.selected=new P.Ov(!0,[]),this.filterValue="",this.tableId=fn.uM}ngOnInit(){this.refreshTable()}onCreate(){const e=(0,oe.kZ)();e.width="500px",this.dialog.open(Mn,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onDelete(){const e=(0,oe.kZ)();e.width="450px",e.data={attributes:this.selected.selected,theme:"admin-theme"},this.dialog.open(ut,e).afterClosed().subscribe(a=>{a&&(this.refreshTable(),this.selected.clear())})}refreshTable(){this.loading=!0,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}applyFilter(e){this.filterValue=e}onImport(){const e=(0,oe.kZ)();e.width="700px",this.dialog.open(zn,e).afterClosed().subscribe(a=>{!0===a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.uw),t.Y36(H.H8),t.Y36(z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-attributes"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent","class","mr-2 action-button",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","mr-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","definitions","selection","filterValue","disableRouting","refreshEvent",4,"ngIf"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"tableId","definitions","selection","filterValue","disableRouting","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,te,3,3,"button",2),t.YNc(6,Dt,3,3,"button",2),t.YNc(7,de,3,4,"button",3),t.TgZ(8,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(9,O,1,0,"mat-spinner",5),t.YNc(10,le,1,5,"app-attr-def-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"ADMIN.ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.ATTRIBUTES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,Xt],pipes:[p.X$],styles:[""]}),n})(),ke=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-visualizer"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"app-animated-router-outlet")},directives:[f.A],styles:[""]}),n})();var rn=o(9921);let ze=(()=>{class n{constructor(e){this.attributesManager=e}ngOnInit(){this.attributesManager.getAttributeModulesDependenciesGraphText("DOT").subscribe(e=>{const i=e.graph.replace("\\t","").replace("\\n","").replace("\\","");(0,rn.graphviz)("#dependenciesGraph",{zoom:!1}).renderDot(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.H8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-attr-modules"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:4,vars:3,consts:[[1,"page-subtitle"],["id","dependenciesGraph",1,"card"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"div",1)),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.VISUALIZER.ATTR_DEPENDENCIES.TITLE"),"\n"))},pipes:[p.X$],styles:["#dependenciesGraph[_ngcontent-%COMP%]{overflow-y:scroll}"]}),n})(),Je=(()=>{class n{constructor(){this.items=[{cssIcon:"perun-module-dependencies",url:"attrDependencies",label:"MENU_ITEMS.VISUALIZER.ATTR_DEPENDENCIES",style:"admin-btn"},{cssIcon:"perun-user-destination-relationship",url:"userDestinationRelationship",label:"MENU_ITEMS.VISUALIZER.USER_DESTINATION",style:"admin-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-visualizer-overview"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-menu-buttons-field",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("items",i.items)("size","small"))},directives:[L.L],styles:[""]}),n})();var fe=o(80013),ye=o(75778),Ye=o(22868),nt=o(87545),_t=o(92081),gt=o(91079),St=o(79814);function Ht(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_USER"))}function ee(n,r){1&n&&t._UZ(0,"mat-spinner",17),2&n&&t.Q6J("diameter",20)("strokeWidth",2)}function Qt(n,r){if(1&n&&(t.TgZ(0,"mat-option",18),t.TgZ(1,"span",19),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.firstName+" "+e.lastName),t.xp6(2),t.hij("#",e.id,""),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function me(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_DESTINATION"))}function xe(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"ADMIN.VISUALIZER.USER_DESTINATION.SELECT_SERVICE"))}function Wt(n,r){if(1&n&&(t.TgZ(0,"mat-radio-button",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let ce=(()=>{class n{constructor(e,i,a,s,d,T){this.usersService=e,this.translate=i,this.facilityManager=a,this.serviceService=s,this.router=d,this.notificator=T,this.searchField=new ft.NI,this.chosenService="",this.availableServices=[],this.loading=!1,this.destination=""}ngOnInit(){this.searchField.setValue(""),this.users=this.searchField.valueChanges.pipe((0,fe.b)(400),(0,ye.x)(),(0,Ye.b)(()=>this.loading=!0),(0,nt.w)(e=>this.usersService.findUsers(e)),(0,Ye.b)(()=>this.loading=!1)),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SELECT_NO_SERVICE").subscribe(e=>{this.noServiceText=e,this.availableServices.push(this.noServiceText)})}validateName(e){""!==this.searchField.value?this.usersService.findUsers(this.searchField.value).subscribe(i=>{for(const a of i){if((a.firstName+" "+a.lastName).toLowerCase()===this.searchField.value.toLowerCase()){this.selectedUser=a,e.selected.completed=!0,e.next();break}this.selectedUser=null}this.selectedUser||this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_NAME").subscribe(a=>{this.notificator.showError(a)})}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_NAME").subscribe(i=>{this.notificator.showError(i)})}validateDestination(e){""!==this.destination?(this.availableServices=[],this.availableServices.push(this.noServiceText),this.chosenService="",this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(i=>{if(0!==i.length){e.selected.completed=!0,e.next();for(const a of i)this.serviceService.getAllRichDestinationsForFacility(a.id).subscribe(s=>{for(const d of s)d.destination===this.destination&&-1===this.availableServices.indexOf(d.service.name)&&this.availableServices.push(d.service.name)})}else this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_WRONG_DESTINATION").subscribe(a=>{this.notificator.showError(a)})})):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NO_DESTINATION").subscribe(i=>{this.notificator.showError(i)})}getGraph(){""!==this.chosenService?this.router.navigate(["admin/visualizer/userDestinationRelationship/graph"],this.chosenService===this.noServiceText?{queryParams:{user:this.selectedUser.id,destination:this.destination,service:"noService"}}:{queryParams:{user:this.selectedUser.id,destination:this.destination,service:this.chosenService}}):this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.ERROR_NOT_CHOSEN_SERVICE").subscribe(e=>{this.notificator.showError(e)})}notCompleted(e){e.selected.completed=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(p.sK),t.Y36(H.IQ),t.Y36(H.KK),t.Y36(m.F0),t.Y36(z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-relationship"]],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("router-component",i.true)},decls:46,vars:36,consts:[[1,"p-3","card","settings-card","col-12","col-xl-5"],[1,"page-subtitle"],["linear",""],["stepper",""],["completed","false"],["matStepLabel",""],[1,"w-100"],["matInput","","type","text",3,"placeholder","formControl","matAutocomplete","ngModelChange","keydown.enter"],["matSuffix","",3,"diameter","strokeWidth",4,"ngIf"],["align","start"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"mt-2",3,"click"],["matInput","","type","text",3,"placeholder","ngModel","ngModelChange","keydown.enter"],["mat-stroked-button","","matStepperPrevious","",1,"mt-2"],[1,"mb-2",3,"ngModel","ngModelChange"],["class","flex-column d-flex","color","primary",3,"value",4,"ngFor","ngForOf"],["matSuffix","",3,"diameter","strokeWidth"],[3,"value"],[1,"text-muted"],["color","primary",1,"flex-column","d-flex",3,"value"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-vertical-stepper",2,3),t.TgZ(6,"mat-step",4),t.YNc(7,Ht,2,3,"ng-template",5),t.TgZ(8,"mat-form-field",6),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(){t.CHM(a);const d=t.MAs(5);return i.notCompleted(d)})("keydown.enter",function(){t.CHM(a);const d=t.MAs(5);return i.validateName(d)}),t.ALo(10,"translate"),t.qZA(),t.YNc(11,ee,1,2,"mat-spinner",8),t.TgZ(12,"mat-hint",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-autocomplete",null,10),t.YNc(17,Qt,4,4,"mat-option",11),t.ALo(18,"async"),t.qZA(),t.qZA(),t.TgZ(19,"div"),t.TgZ(20,"button",12),t.NdJ("click",function(){t.CHM(a);const d=t.MAs(5);return i.validateName(d)}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"mat-step",4),t.YNc(24,me,2,3,"ng-template",5),t.TgZ(25,"mat-form-field",6),t.TgZ(26,"input",13),t.NdJ("ngModelChange",function(d){return i.destination=d})("ngModelChange",function(){t.CHM(a);const d=t.MAs(5);return i.notCompleted(d)})("keydown.enter",function(){t.CHM(a);const d=t.MAs(5);return i.validateDestination(d)}),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div"),t.TgZ(29,"button",14),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"button",12),t.NdJ("click",function(){t.CHM(a);const d=t.MAs(5);return i.validateDestination(d)}),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"mat-step"),t.YNc(36,xe,2,3,"ng-template",5),t.TgZ(37,"mat-radio-group",15),t.NdJ("ngModelChange",function(d){return i.chosenService=d}),t.YNc(38,Wt,2,2,"mat-radio-button",16),t.qZA(),t.TgZ(39,"div"),t.TgZ(40,"button",14),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"button",12),t.NdJ("click",function(){return i.getGraph()}),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.MAs(16);t.xp6(2),t.hij(" ",t.lcZ(3,16,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE")," "),t.xp6(7),t.s9C("placeholder",t.lcZ(10,18,"ADMIN.VISUALIZER.USER_DESTINATION.USER_EXAMPLE")),t.Q6J("formControl",i.searchField)("matAutocomplete",a),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(2),t.Oqu(t.lcZ(14,20,"ADMIN.VISUALIZER.USER_DESTINATION.USER_HINT")),t.xp6(4),t.Q6J("ngForOf",t.lcZ(18,22,i.users)),t.xp6(4),t.hij(" ",t.lcZ(22,24,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(27,26,"ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION_EXAMPLE")),t.Q6J("ngModel",i.destination),t.xp6(4),t.hij(" ",t.lcZ(31,28,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_NEXT")," "),t.xp6(4),t.Q6J("ngModel",i.chosenService),t.xp6(1),t.Q6J("ngForOf",i.availableServices),t.xp6(3),t.hij(" ",t.lcZ(42,32,"ADMIN.VISUALIZER.USER_DESTINATION.BUTTON_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(45,34,"ADMIN.VISUALIZER.USER_DESTINATION.SUBMIT_BUTTON")," ")}},directives:[_t.Vq,_t.C0,_t.VY,G.KE,M.Nt,ft.Fj,gt.ZL,ft.JJ,ft.oH,_.O5,tt.$g,G.R9,G.bx,gt.XC,_.sg,zt.ey,ot.lW,ft.On,_t.fd,St.VQ,St.U0],pipes:[p.X$,_.Ov],styles:[""]}),n})();var Ie=o(70655);function Ee(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function Ue(n){this._context=n}function Ln(n,r){this._basis=new Ue(n),this._beta=r}Ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ee(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ee(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},Ln.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var E,i=n[0],a=r[0],s=n[e]-i,d=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*n[T]+(1-this._beta)*(i+(E=T/e)*s),this._beta*r[T]+(1-this._beta)*(a+E*d));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const kn=function n(r){function e(i){return 1===r?new Ue(i):new Ln(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var He=o(8929),qe=o(41777);function Qn(){}function on(n){return null==n?Qn:function(){return this.querySelector(n)}}function Un(){return[]}function gi(n){return new Array(n.length)}function Li(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}function jt(n,r,e,i,a,s){for(var T,d=0,E=r.length,F=s.length;d<F;++d)(T=r[d])?(T.__data__=s[d],i[d]=T):e[d]=new Li(n,s[d]);for(;d<E;++d)(T=r[d])&&(a[d]=T)}function b(n,r,e,i,a,s,d){var T,E,vt,F={},W=r.length,lt=s.length,st=new Array(W);for(T=0;T<W;++T)(E=r[T])&&(st[T]=vt="$"+d.call(E,E.__data__,T,r),vt in F?a[T]=E:F[vt]=E);for(T=0;T<lt;++T)(E=F[vt="$"+d.call(n,s[T],T,s)])?(i[T]=E,E.__data__=s[T],F[vt]=null):e[T]=new Li(n,s[T]);for(T=0;T<W;++T)(E=r[T])&&F[st[T]]===E&&(a[T]=E)}function Pt(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}Li.prototype={constructor:Li,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Cn="http://www.w3.org/1999/xhtml";const di={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qi(n){var r=n+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=n.slice(0,e))&&(n=n.slice(e+1)),di.hasOwnProperty(r)?{space:di[r],local:n}:n}function ki(n){return function(){this.removeAttribute(n)}}function fi(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ii(n,r){return function(){this.setAttribute(n,r)}}function Oi(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function ar(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function si(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Sa(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function cs(n){return function(){this.style.removeProperty(n)}}function Fn(n,r,e){return function(){this.style.setProperty(n,r,e)}}function Lr(n,r,e){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function pi(n,r){return n.style.getPropertyValue(r)||Sa(n).getComputedStyle(n,null).getPropertyValue(r)}function y(n){return function(){delete this[n]}}function D(n,r){return function(){this[n]=r}}function B(n,r){return function(){var e=r.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function dt(n){return n.trim().split(/^|\s+/)}function Et(n){return n.classList||new Lt(n)}function Lt(n){this._node=n,this._names=dt(n.getAttribute("class")||"")}function Vt(n,r){for(var e=Et(n),i=-1,a=r.length;++i<a;)e.add(r[i])}function ue(n,r){for(var e=Et(n),i=-1,a=r.length;++i<a;)e.remove(r[i])}function We(n){return function(){Vt(this,n)}}function hn(n){return function(){ue(this,n)}}function wn(n,r){return function(){(r.apply(this,arguments)?Vt:ue)(this,n)}}function tn(){this.textContent=""}function In(n){return function(){this.textContent=n}}function Ri(n){return function(){var r=n.apply(this,arguments);this.textContent=null==r?"":r}}function Zi(){this.innerHTML=""}function kr(n){return function(){this.innerHTML=n}}function Ii(n){return function(){var r=n.apply(this,arguments);this.innerHTML=null==r?"":r}}function br(){this.nextSibling&&this.parentNode.appendChild(this)}function Au(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Su(n){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===Cn&&r.documentElement.namespaceURI===Cn?r.createElement(n):r.createElementNS(e,n)}}function Du(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function xo(n){var r=qi(n);return(r.local?Du:Su)(r)}function ku(){return null}function Mu(){var n=this.parentNode;n&&n.removeChild(this)}function Nu(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function Fu(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}Lt.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var yo={},Ir=null;function Bu(n,r,e){return n=To(n,r,e),function(i){var a=i.relatedTarget;(!a||a!==this&&!(8&a.compareDocumentPosition(this)))&&n.call(this,i)}}function To(n,r,e){return function(i){var a=Ir;Ir=i;try{n.call(this,this.__data__,r,e)}finally{Ir=a}}}function Uu(n){return n.trim().split(/^|\s+/).map(function(r){var e="",i=r.indexOf(".");return i>=0&&(e=r.slice(i+1),r=r.slice(0,i)),{type:r,name:e}})}function Gu(n){return function(){var r=this.__on;if(r){for(var s,e=0,i=-1,a=r.length;e<a;++e)s=r[e],n.type&&s.type!==n.type||s.name!==n.name?r[++i]=s:this.removeEventListener(s.type,s.listener,s.capture);++i?r.length=i:delete this.__on}}}function Vu(n,r,e){var i=yo.hasOwnProperty(n.type)?Bu:To;return function(a,s,d){var E,T=this.__on,F=i(r,s,d);if(T)for(var W=0,lt=T.length;W<lt;++W)if((E=T[W]).type===n.type&&E.name===n.name)return this.removeEventListener(E.type,E.listener,E.capture),this.addEventListener(E.type,E.listener=F,E.capture=e),void(E.value=r);this.addEventListener(n.type,F,e),E={type:n.type,name:n.name,value:r,listener:F,capture:e},T?T.push(E):this.__on=[E]}}function bo(n,r,e){var i=Sa(n),a=i.CustomEvent;"function"==typeof a?a=new a(r,e):(a=i.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),n.dispatchEvent(a)}function zu(n,r){return function(){return bo(this,n,r)}}function Yu(n,r){return function(){return bo(this,n,r.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(yo={mouseenter:"mouseover",mouseleave:"mouseout"}));var Co=[null];function Yi(n,r){this._groups=n,this._parents=r}function wo(n){return"string"==typeof n?new Yi([[document.querySelector(n)]],[document.documentElement]):new Yi([[n]],Co)}function Ao(n,r,e){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+r)/6,(n._y0+4*n._y1+e)/6)}function Da(n){this._context=n}function Eo(n,r){this._basis=new Da(n),this._beta=r}Yi.prototype=function Xu(){return new Yi([[document.documentElement]],Co)}.prototype={constructor:Yi,select:function cn(n){"function"!=typeof n&&(n=on(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var E,F,s=r[a],d=s.length,T=i[a]=new Array(d),W=0;W<d;++W)(E=s[W])&&(F=n.call(E,E.__data__,W,s))&&("__data__"in E&&(F.__data__=E.__data__),T[W]=F);return new Yi(i,this._parents)},selectAll:function hi(n){"function"!=typeof n&&(n=function Hi(n){return null==n?Un:function(){return this.querySelectorAll(n)}}(n));for(var r=this._groups,e=r.length,i=[],a=[],s=0;s<e;++s)for(var E,d=r[s],T=d.length,F=0;F<T;++F)(E=d[F])&&(i.push(n.call(E,E.__data__,F,d)),a.push(E));return new Yi(i,a)},filter:function jn(n){"function"!=typeof n&&(n=function zi(n){return function(){return this.matches(n)}}(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var E,s=r[a],d=s.length,T=i[a]=[],F=0;F<d;++F)(E=s[F])&&n.call(E,E.__data__,F,s)&&T.push(E);return new Yi(i,this._parents)},data:function I(n,r){if(!n)return vt=new Array(this.size()),F=-1,this.each(function(Ce){vt[++F]=Ce}),vt;var e=r?b:jt,i=this._parents,a=this._groups;"function"!=typeof n&&(n=function Ft(n){return function(){return n}}(n));for(var s=a.length,d=new Array(s),T=new Array(s),E=new Array(s),F=0;F<s;++F){var W=i[F],lt=a[F],st=lt.length,vt=n.call(W,W&&W.__data__,F,i),Mt=vt.length,Rt=T[F]=new Array(Mt),bt=d[F]=new Array(Mt);e(W,lt,Rt,bt,E[F]=new Array(st),vt,r);for(var Ae,Ne,ie=0,Kt=0;ie<Mt;++ie)if(Ae=Rt[ie]){for(ie>=Kt&&(Kt=ie+1);!(Ne=bt[Kt])&&++Kt<Mt;);Ae._next=Ne||null}}return(d=new Yi(d,i))._enter=T,d._exit=E,d},enter:function xn(){return new Yi(this._enter||this._groups.map(gi),this._parents)},exit:function U(){return new Yi(this._exit||this._groups.map(gi),this._parents)},join:function Q(n,r,e){var i=this.enter(),a=this,s=this.exit();return i="function"==typeof n?n(i):i.append(n+""),null!=r&&(a=r(a)),null==e?s.remove():e(s),i&&a?i.merge(a).order():a},merge:function ct(n){for(var r=this._groups,e=n._groups,i=r.length,s=Math.min(i,e.length),d=new Array(i),T=0;T<s;++T)for(var st,E=r[T],F=e[T],W=E.length,lt=d[T]=new Array(W),vt=0;vt<W;++vt)(st=E[vt]||F[vt])&&(lt[vt]=st);for(;T<i;++T)d[T]=r[T];return new Yi(d,this._parents)},order:function yt(){for(var n=this._groups,r=-1,e=n.length;++r<e;)for(var d,i=n[r],a=i.length-1,s=i[a];--a>=0;)(d=i[a])&&(s&&4^d.compareDocumentPosition(s)&&s.parentNode.insertBefore(d,s),s=d);return this},sort:function kt(n){function r(lt,st){return lt&&st?n(lt.__data__,st.__data__):!lt-!st}n||(n=Pt);for(var e=this._groups,i=e.length,a=new Array(i),s=0;s<i;++s){for(var F,d=e[s],T=d.length,E=a[s]=new Array(T),W=0;W<T;++W)(F=d[W])&&(E[W]=F);E.sort(r)}return new Yi(a,this._parents).order()},call:function ae(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function Se(){var n=new Array(this.size()),r=-1;return this.each(function(){n[++r]=this}),n},node:function Ge(){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var i=n[r],a=0,s=i.length;a<s;++a){var d=i[a];if(d)return d}return null},size:function Ke(){var n=0;return this.each(function(){++n}),n},empty:function Pe(){return!this.node()},each:function Xe(n){for(var r=this._groups,e=0,i=r.length;e<i;++e)for(var T,a=r[e],s=0,d=a.length;s<d;++s)(T=a[s])&&n.call(T,T.__data__,s,a);return this},attr:function ls(n,r){var e=qi(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==r?e.local?fi:ki:"function"==typeof r?e.local?si:ar:e.local?Oi:ii)(e,r))},style:function Ki(n,r,e){return arguments.length>1?this.each((null==r?cs:"function"==typeof r?Lr:Fn)(n,r,null==e?"":e)):pi(this.node(),n)},property:function $(n,r){return arguments.length>1?this.each((null==r?y:"function"==typeof r?B:D)(n,r)):this.node()[n]},classed:function $e(n,r){var e=dt(n+"");if(arguments.length<2){for(var i=Et(this.node()),a=-1,s=e.length;++a<s;)if(!i.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?wn:r?We:hn)(e,r))},text:function Tr(n){return arguments.length?this.each(null==n?tn:("function"==typeof n?Ri:In)(n)):this.node().textContent},html:function $i(n){return arguments.length?this.each(null==n?Zi:("function"==typeof n?Ii:kr)(n)):this.node().innerHTML},raise:function _i(){return this.each(br)},lower:function Eu(){return this.each(Au)},append:function Lu(n){var r="function"==typeof n?n:xo(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function Iu(n,r){var e="function"==typeof n?n:xo(n),i=null==r?ku:"function"==typeof r?r:on(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function Ou(){return this.each(Mu)},clone:function Pu(n){return this.select(n?Fu:Nu)},datum:function Ru(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function Hu(n,r,e){var a,d,i=Uu(n+""),s=i.length;if(!(arguments.length<2)){for(T=r?Vu:Gu,null==e&&(e=!1),a=0;a<s;++a)this.each(T(i[a],r,e));return this}var T=this.node().__on;if(T)for(var W,E=0,F=T.length;E<F;++E)for(a=0,W=T[E];a<s;++a)if((d=i[a]).type===W.type&&d.name===W.name)return W.value},dispatch:function Wu(n,r){return this.each(("function"==typeof r?Yu:zu)(n,r))}},Da.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ao(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ao(this,n,r)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r}},Eo.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,r=this._y,e=n.length-1;if(e>0)for(var E,i=n[0],a=r[0],s=n[e]-i,d=r[e]-a,T=-1;++T<=e;)this._basis.point(this._beta*n[T]+(1-this._beta)*(i+(E=T/e)*s),this._beta*r[T]+(1-this._beta)*(a+E*d));this._x=this._y=null,this._basis.lineEnd()},point:function(n,r){this._x.push(+n),this._y.push(+r)}};const $u=function n(r){function e(i){return 1===r?new Da(i):new Eo(i,r)}return e.beta=function(i){return n(+i)},e}(.85);var us=Math.PI,hs=2*us,Mr=1e-6,Ju=hs-Mr;function ds(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function So(){return new ds}ds.prototype=So.prototype={constructor:ds,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,e,i){this._+="Q"+ +n+","+ +r+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(n,r,e,i,a,s){this._+="C"+ +n+","+ +r+","+ +e+","+ +i+","+(this._x1=+a)+","+(this._y1=+s)},arcTo:function(n,r,e,i,a){var s=this._x1,d=this._y1,T=(e=+e)-(n=+n),E=(i=+i)-(r=+r),F=s-n,W=d-r,lt=F*F+W*W;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(lt>Mr)if(Math.abs(W*T-E*F)>Mr&&a){var st=e-s,vt=i-d,Mt=T*T+E*E,Rt=st*st+vt*vt,bt=Math.sqrt(Mt),$t=Math.sqrt(lt),ie=a*Math.tan((us-Math.acos((Mt+lt-Rt)/(2*bt*$t)))/2),Kt=ie/$t,Ae=ie/bt;Math.abs(Kt-1)>Mr&&(this._+="L"+(n+Kt*F)+","+(r+Kt*W)),this._+="A"+a+","+a+",0,0,"+ +(W*st>F*vt)+","+(this._x1=n+Ae*T)+","+(this._y1=r+Ae*E)}else this._+="L"+(this._x1=n)+","+(this._y1=r)},arc:function(n,r,e,i,a,s){n=+n,r=+r,s=!!s;var d=(e=+e)*Math.cos(i),T=e*Math.sin(i),E=n+d,F=r+T,W=1^s,lt=s?i-a:a-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+E+","+F:(Math.abs(this._x1-E)>Mr||Math.abs(this._y1-F)>Mr)&&(this._+="L"+E+","+F),e&&(lt<0&&(lt=lt%hs+hs),lt>Ju?this._+="A"+e+","+e+",0,1,"+W+","+(n-d)+","+(r-T)+"A"+e+","+e+",0,1,"+W+","+(this._x1=E)+","+(this._y1=F):lt>Mr&&(this._+="A"+e+","+e+",0,"+ +(lt>=us)+","+W+","+(this._x1=n+e*Math.cos(a))+","+(this._y1=r+e*Math.sin(a))))},rect:function(n,r,e,i){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};const Qu=So;function La(n){return function(){return n}}function Do(n){this._context=n}function ju(n){return new Do(n)}function qu(n){return n[0]}function Ku(n){return n[1]}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,r){switch(n=+n,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 1:this._point=2;default:this._context.lineTo(n,r)}}};var Lo=Math.PI;function Io(n){return(1-Math.cos(Lo*n))/2}function eh(){}function fs(n){return null==n?eh:function(){return this.querySelector(n)}}function ih(){return[]}function Mo(n){return null==n?ih:function(){return this.querySelectorAll(n)}}function Oo(n){return function(){return this.matches(n)}}function No(n){return new Array(n.length)}function ka(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}function lh(n,r,e,i,a,s){for(var T,d=0,E=r.length,F=s.length;d<F;++d)(T=r[d])?(T.__data__=s[d],i[d]=T):e[d]=new ka(n,s[d]);for(;d<E;++d)(T=r[d])&&(a[d]=T)}function ch(n,r,e,i,a,s,d){var T,E,vt,F={},W=r.length,lt=s.length,st=new Array(W);for(T=0;T<W;++T)(E=r[T])&&(st[T]=vt="$"+d.call(E,E.__data__,T,r),vt in F?a[T]=E:F[vt]=E);for(T=0;T<lt;++T)(E=F[vt="$"+d.call(n,s[T],T,s)])?(i[T]=E,E.__data__=s[T],F[vt]=null):e[T]=new ka(n,s[T]);for(T=0;T<W;++T)(E=r[T])&&F[st[T]]===E&&(a[T]=E)}function gh(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}ka.prototype={constructor:ka,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var ps="http://www.w3.org/1999/xhtml";const Po={svg:"http://www.w3.org/2000/svg",xhtml:ps,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ia(n){var r=n+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=n.slice(0,e))&&(n=n.slice(e+1)),Po.hasOwnProperty(r)?{space:Po[r],local:n}:n}function Ch(n){return function(){this.removeAttribute(n)}}function wh(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Ah(n,r){return function(){this.setAttribute(n,r)}}function Eh(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function Sh(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function Dh(n,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function Ro(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function kh(n){return function(){this.style.removeProperty(n)}}function Ih(n,r,e){return function(){this.style.setProperty(n,r,e)}}function Mh(n,r,e){return function(){var i=r.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function Hr(n,r){return n.style.getPropertyValue(r)||Ro(n).getComputedStyle(n,null).getPropertyValue(r)}function Nh(n){return function(){delete this[n]}}function Fh(n,r){return function(){this[n]=r}}function Ph(n,r){return function(){var e=r.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function Zo(n){return n.trim().split(/^|\s+/)}function ms(n){return n.classList||new Bo(n)}function Bo(n){this._node=n,this._names=Zo(n.getAttribute("class")||"")}function Uo(n,r){for(var e=ms(n),i=-1,a=r.length;++i<a;)e.add(r[i])}function Go(n,r){for(var e=ms(n),i=-1,a=r.length;++i<a;)e.remove(r[i])}function Zh(n){return function(){Uo(this,n)}}function Bh(n){return function(){Go(this,n)}}function Uh(n,r){return function(){(r.apply(this,arguments)?Uo:Go)(this,n)}}function Vh(){this.textContent=""}function Hh(n){return function(){this.textContent=n}}function zh(n){return function(){var r=n.apply(this,arguments);this.textContent=null==r?"":r}}function Wh(){this.innerHTML=""}function Xh(n){return function(){this.innerHTML=n}}function $h(n){return function(){var r=n.apply(this,arguments);this.innerHTML=null==r?"":r}}function Qh(){this.nextSibling&&this.parentNode.appendChild(this)}function qh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function td(n){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===ps&&r.documentElement.namespaceURI===ps?r.createElement(n):r.createElementNS(e,n)}}function ed(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Vo(n){var r=Ia(n);return(r.local?ed:td)(r)}function id(){return null}function ad(){var n=this.parentNode;n&&n.removeChild(this)}function od(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function ld(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}Bo.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Ho={},Or=null;function dd(n,r,e){return n=zo(n,r,e),function(i){var a=i.relatedTarget;(!a||a!==this&&!(8&a.compareDocumentPosition(this)))&&n.call(this,i)}}function zo(n,r,e){return function(i){var a=Or;Or=i;try{n.call(this,this.__data__,r,e)}finally{Or=a}}}function fd(n){return n.trim().split(/^|\s+/).map(function(r){var e="",i=r.indexOf(".");return i>=0&&(e=r.slice(i+1),r=r.slice(0,i)),{type:r,name:e}})}function pd(n){return function(){var r=this.__on;if(r){for(var s,e=0,i=-1,a=r.length;e<a;++e)s=r[e],n.type&&s.type!==n.type||s.name!==n.name?r[++i]=s:this.removeEventListener(s.type,s.listener,s.capture);++i?r.length=i:delete this.__on}}}function md(n,r,e){var i=Ho.hasOwnProperty(n.type)?dd:zo;return function(a,s,d){var E,T=this.__on,F=i(r,s,d);if(T)for(var W=0,lt=T.length;W<lt;++W)if((E=T[W]).type===n.type&&E.name===n.name)return this.removeEventListener(E.type,E.listener,E.capture),this.addEventListener(E.type,E.listener=F,E.capture=e),void(E.value=r);this.addEventListener(n.type,F,e),E={type:n.type,name:n.name,value:r,listener:F,capture:e},T?T.push(E):this.__on=[E]}}function Yo(n,r,e){var i=Ro(n),a=i.CustomEvent;"function"==typeof a?a=new a(r,e):(a=i.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),n.dispatchEvent(a)}function _d(n,r){return function(){return Yo(this,n,r)}}function vd(n,r){return function(){return Yo(this,n,r.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ho={mouseenter:"mouseover",mouseleave:"mouseout"}));var yd=[null];function tr(n,r){this._groups=n,this._parents=r}function Wo(){return new tr([[document.documentElement]],yd)}tr.prototype=Wo.prototype={constructor:tr,select:function nh(n){"function"!=typeof n&&(n=fs(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var E,F,s=r[a],d=s.length,T=i[a]=new Array(d),W=0;W<d;++W)(E=s[W])&&(F=n.call(E,E.__data__,W,s))&&("__data__"in E&&(F.__data__=E.__data__),T[W]=F);return new tr(i,this._parents)},selectAll:function rh(n){"function"!=typeof n&&(n=Mo(n));for(var r=this._groups,e=r.length,i=[],a=[],s=0;s<e;++s)for(var E,d=r[s],T=d.length,F=0;F<T;++F)(E=d[F])&&(i.push(n.call(E,E.__data__,F,d)),a.push(E));return new tr(i,a)},filter:function ah(n){"function"!=typeof n&&(n=Oo(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var E,s=r[a],d=s.length,T=i[a]=[],F=0;F<d;++F)(E=s[F])&&n.call(E,E.__data__,F,s)&&T.push(E);return new tr(i,this._parents)},data:function uh(n,r){if(!n)return vt=new Array(this.size()),F=-1,this.each(function(Ce){vt[++F]=Ce}),vt;var e=r?ch:lh,i=this._parents,a=this._groups;"function"!=typeof n&&(n=function oh(n){return function(){return n}}(n));for(var s=a.length,d=new Array(s),T=new Array(s),E=new Array(s),F=0;F<s;++F){var W=i[F],lt=a[F],st=lt.length,vt=n.call(W,W&&W.__data__,F,i),Mt=vt.length,Rt=T[F]=new Array(Mt),bt=d[F]=new Array(Mt);e(W,lt,Rt,bt,E[F]=new Array(st),vt,r);for(var Ae,Ne,ie=0,Kt=0;ie<Mt;++ie)if(Ae=Rt[ie]){for(ie>=Kt&&(Kt=ie+1);!(Ne=bt[Kt])&&++Kt<Mt;);Ae._next=Ne||null}}return(d=new tr(d,i))._enter=T,d._exit=E,d},enter:function sh(){return new tr(this._enter||this._groups.map(No),this._parents)},exit:function hh(){return new tr(this._exit||this._groups.map(No),this._parents)},join:function dh(n,r,e){var i=this.enter(),a=this,s=this.exit();return i="function"==typeof n?n(i):i.append(n+""),null!=r&&(a=r(a)),null==e?s.remove():e(s),i&&a?i.merge(a).order():a},merge:function fh(n){for(var r=this._groups,e=n._groups,i=r.length,s=Math.min(i,e.length),d=new Array(i),T=0;T<s;++T)for(var st,E=r[T],F=e[T],W=E.length,lt=d[T]=new Array(W),vt=0;vt<W;++vt)(st=E[vt]||F[vt])&&(lt[vt]=st);for(;T<i;++T)d[T]=r[T];return new tr(d,this._parents)},order:function ph(){for(var n=this._groups,r=-1,e=n.length;++r<e;)for(var d,i=n[r],a=i.length-1,s=i[a];--a>=0;)(d=i[a])&&(s&&4^d.compareDocumentPosition(s)&&s.parentNode.insertBefore(d,s),s=d);return this},sort:function mh(n){function r(lt,st){return lt&&st?n(lt.__data__,st.__data__):!lt-!st}n||(n=gh);for(var e=this._groups,i=e.length,a=new Array(i),s=0;s<i;++s){for(var F,d=e[s],T=d.length,E=a[s]=new Array(T),W=0;W<T;++W)(F=d[W])&&(E[W]=F);E.sort(r)}return new tr(a,this._parents).order()},call:function _h(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function vh(){var n=new Array(this.size()),r=-1;return this.each(function(){n[++r]=this}),n},node:function xh(){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var i=n[r],a=0,s=i.length;a<s;++a){var d=i[a];if(d)return d}return null},size:function yh(){var n=0;return this.each(function(){++n}),n},empty:function Th(){return!this.node()},each:function bh(n){for(var r=this._groups,e=0,i=r.length;e<i;++e)for(var T,a=r[e],s=0,d=a.length;s<d;++s)(T=a[s])&&n.call(T,T.__data__,s,a);return this},attr:function Lh(n,r){var e=Ia(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==r?e.local?wh:Ch:"function"==typeof r?e.local?Dh:Sh:e.local?Eh:Ah)(e,r))},style:function Oh(n,r,e){return arguments.length>1?this.each((null==r?kh:"function"==typeof r?Mh:Ih)(n,r,null==e?"":e)):Hr(this.node(),n)},property:function Rh(n,r){return arguments.length>1?this.each((null==r?Nh:"function"==typeof r?Ph:Fh)(n,r)):this.node()[n]},classed:function Gh(n,r){var e=Zo(n+"");if(arguments.length<2){for(var i=ms(this.node()),a=-1,s=e.length;++a<s;)if(!i.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?Uh:r?Zh:Bh)(e,r))},text:function Yh(n){return arguments.length?this.each(null==n?Vh:("function"==typeof n?zh:Hh)(n)):this.node().textContent},html:function Jh(n){return arguments.length?this.each(null==n?Wh:("function"==typeof n?$h:Xh)(n)):this.node().innerHTML},raise:function jh(){return this.each(Qh)},lower:function Kh(){return this.each(qh)},append:function nd(n){var r="function"==typeof n?n:Vo(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function rd(n,r){var e="function"==typeof n?n:Vo(n),i=null==r?id:"function"==typeof r?r:fs(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function sd(){return this.each(ad)},clone:function cd(n){return this.select(n?ld:od)},datum:function ud(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function gd(n,r,e){var a,d,i=fd(n+""),s=i.length;if(!(arguments.length<2)){for(T=r?md:pd,null==e&&(e=!1),a=0;a<s;++a)this.each(T(i[a],r,e));return this}var T=this.node().__on;if(T)for(var W,E=0,F=T.length;E<F;++E)for(a=0,W=T[E];a<s;++a)if((d=i[a]).type===W.type&&d.name===W.name)return W.value},dispatch:function xd(n,r){return this.each(("function"==typeof r?vd:_d)(n,r))}};const la=Wo;var ca=o(25922),er=o(49194),ua=o(73339),Td=(0,ca.Z)("start","end","cancel","interrupt"),bd=[];function Na(n,r,e,i,a,s){var d=n.__transition;if(d){if(e in d)return}else n.__transition={};!function Cd(n,r,e){var a,i=n.__transition;function d(F){var W,lt,st,vt;if(1!==e.state)return E();for(W in i)if((vt=i[W]).name===e.name){if(3===vt.state)return(0,ua.Z)(d);4===vt.state?(vt.state=6,vt.timer.stop(),vt.on.call("interrupt",n,n.__data__,vt.index,vt.group),delete i[W]):+W<r&&(vt.state=6,vt.timer.stop(),vt.on.call("cancel",n,n.__data__,vt.index,vt.group),delete i[W])}if((0,ua.Z)(function(){3===e.state&&(e.state=4,e.timer.restart(T,e.delay,e.time),T(F))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(st=e.tween.length),W=0,lt=-1;W<st;++W)(vt=e.tween[W].value.call(n,n.__data__,e.index,e.group))&&(a[++lt]=vt);a.length=lt+1}}function T(F){for(var W=F<e.duration?e.ease.call(null,F/e.duration):(e.timer.restart(E),e.state=5,1),lt=-1,st=a.length;++lt<st;)a[lt].call(n,W);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),E())}function E(){for(var F in e.state=6,e.timer.stop(),delete i[r],i)return;delete n.__transition}i[r]=e,e.timer=(0,er.HT)(function s(F){e.state=1,e.timer.restart(d,e.delay,e.time),e.delay<=F&&d(F-e.delay)},0,e.time)}(n,e,{name:r,index:i,group:a,on:Td,tween:bd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function vs(n,r){var e=nr(n,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function fr(n,r){var e=nr(n,r);if(e.state>3)throw new Error("too late; already running");return e}function nr(n,r){var e=n.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}var Qo=o(75349);function Ed(n,r){var e,i;return function(){var a=fr(this,n),s=a.tween;if(s!==e)for(var d=0,T=(i=e=s).length;d<T;++d)if(i[d].name===r){(i=i.slice()).splice(d,1);break}a.tween=i}}function Sd(n,r,e){var i,a;if("function"!=typeof e)throw new Error;return function(){var s=fr(this,n),d=s.tween;if(d!==i){a=(i=d).slice();for(var T={name:r,value:e},E=0,F=a.length;E<F;++E)if(a[E].name===r){a[E]=T;break}E===F&&a.push(T)}s.tween=a}}function xs(n,r,e){var i=n._id;return n.each(function(){var a=fr(this,i);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return nr(a,i).value[r]}}var Fa=o(52786),Pa=o(6738),Ra=o(23534),jo=o(23096);function qo(n,r){var e;return("number"==typeof r?Pa.Z:r instanceof Fa.ZP?Ra.ZP:(e=(0,Fa.ZP)(r))?(r=e,Ra.ZP):jo.Z)(n,r)}function Ld(n){return function(){this.removeAttribute(n)}}function kd(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Id(n,r,e){var i,s,a=e+"";return function(){var d=this.getAttribute(n);return d===a?null:d===i?s:s=r(i=d,e)}}function Md(n,r,e){var i,s,a=e+"";return function(){var d=this.getAttributeNS(n.space,n.local);return d===a?null:d===i?s:s=r(i=d,e)}}function Od(n,r,e){var i,a,s;return function(){var d,E,T=e(this);return null==T?void this.removeAttribute(n):(d=this.getAttribute(n))===(E=T+"")?null:d===i&&E===a?s:(a=E,s=r(i=d,T))}}function Nd(n,r,e){var i,a,s;return function(){var d,E,T=e(this);return null==T?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local))===(E=T+"")?null:d===i&&E===a?s:(a=E,s=r(i=d,T))}}function Pd(n,r){return function(e){this.setAttribute(n,r.call(this,e))}}function Rd(n,r){return function(e){this.setAttributeNS(n.space,n.local,r.call(this,e))}}function Zd(n,r){var e,i;function a(){var s=r.apply(this,arguments);return s!==i&&(e=(i=s)&&Rd(n,s)),e}return a._value=r,a}function Bd(n,r){var e,i;function a(){var s=r.apply(this,arguments);return s!==i&&(e=(i=s)&&Pd(n,s)),e}return a._value=r,a}function Gd(n,r){return function(){vs(this,n).delay=+r.apply(this,arguments)}}function Vd(n,r){return r=+r,function(){vs(this,n).delay=r}}function zd(n,r){return function(){fr(this,n).duration=+r.apply(this,arguments)}}function Yd(n,r){return r=+r,function(){fr(this,n).duration=r}}function Xd(n,r){if("function"!=typeof r)throw new Error;return function(){fr(this,n).ease=r}}function qd(n,r,e){var i,a,s=function jd(n){return(n+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?vs:fr;return function(){var d=s(this,n),T=d.on;T!==i&&(a=(i=T).copy()).on(r,e),d.on=a}}var af=la.prototype.constructor;function Ko(n){return function(){this.style.removeProperty(n)}}function df(n,r,e){return function(i){this.style.setProperty(n,r.call(this,i),e)}}function ff(n,r,e){var i,a;function s(){var d=r.apply(this,arguments);return d!==a&&(i=(a=d)&&df(n,d,e)),i}return s._value=r,s}function vf(n){return function(r){this.textContent=n.call(this,r)}}function xf(n){var r,e;function i(){var a=n.apply(this,arguments);return a!==e&&(r=(e=a)&&vf(a)),r}return i._value=n,i}var Cf=0;function pr(n,r,e,i){this._groups=n,this._parents=r,this._name=e,this._id=i}function tl(){return++Cf}var zr=la.prototype;pr.prototype=function wf(n){return la().transition(n)}.prototype={constructor:pr,select:function nf(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=fs(n));for(var i=this._groups,a=i.length,s=new Array(a),d=0;d<a;++d)for(var W,lt,T=i[d],E=T.length,F=s[d]=new Array(E),st=0;st<E;++st)(W=T[st])&&(lt=n.call(W,W.__data__,st,T))&&("__data__"in W&&(lt.__data__=W.__data__),F[st]=lt,Na(F[st],r,e,st,F,nr(W,e)));return new pr(s,this._parents,r,e)},selectAll:function rf(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=Mo(n));for(var i=this._groups,a=i.length,s=[],d=[],T=0;T<a;++T)for(var W,E=i[T],F=E.length,lt=0;lt<F;++lt)if(W=E[lt]){for(var vt,st=n.call(W,W.__data__,lt,E),Mt=nr(W,e),Rt=0,bt=st.length;Rt<bt;++Rt)(vt=st[Rt])&&Na(vt,r,e,Rt,st,Mt);s.push(st),d.push(W)}return new pr(s,d,r,e)},filter:function Jd(n){"function"!=typeof n&&(n=Oo(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var E,s=r[a],d=s.length,T=i[a]=[],F=0;F<d;++F)(E=s[F])&&n.call(E,E.__data__,F,s)&&T.push(E);return new pr(i,this._parents,this._name,this._id)},merge:function Qd(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,e=n._groups,i=r.length,s=Math.min(i,e.length),d=new Array(i),T=0;T<s;++T)for(var st,E=r[T],F=e[T],W=E.length,lt=d[T]=new Array(W),vt=0;vt<W;++vt)(st=E[vt]||F[vt])&&(lt[vt]=st);for(;T<i;++T)d[T]=r[T];return new pr(d,this._parents,this._name,this._id)},selection:function sf(){return new af(this._groups,this._parents)},transition:function Tf(){for(var n=this._name,r=this._id,e=tl(),i=this._groups,a=i.length,s=0;s<a;++s)for(var E,d=i[s],T=d.length,F=0;F<T;++F)if(E=d[F]){var W=nr(E,r);Na(E,n,e,F,d,{time:W.time+W.delay+W.duration,delay:0,duration:W.duration,ease:W.ease})}return new pr(i,this._parents,n,e)},call:zr.call,nodes:zr.nodes,node:zr.node,size:zr.size,empty:zr.empty,each:zr.each,on:function Kd(n,r){var e=this._id;return arguments.length<2?nr(this.node(),e).on.on(n):this.each(qd(e,n,r))},attr:function Fd(n,r){var e=Ia(n),i="transform"===e?Qo.w:qo;return this.attrTween(n,"function"==typeof r?(e.local?Nd:Od)(e,i,xs(this,"attr."+n,r)):null==r?(e.local?kd:Ld)(e):(e.local?Md:Id)(e,i,r))},attrTween:function Ud(n,r){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var i=Ia(n);return this.tween(e,(i.local?Zd:Bd)(i,r))},style:function hf(n,r,e){var i="transform"==(n+="")?Qo.Y:qo;return null==r?this.styleTween(n,function of(n,r){var e,i,a;return function(){var s=Hr(this,n),d=(this.style.removeProperty(n),Hr(this,n));return s===d?null:s===e&&d===i?a:a=r(e=s,i=d)}}(n,i)).on("end.style."+n,Ko(n)):"function"==typeof r?this.styleTween(n,function cf(n,r,e){var i,a,s;return function(){var d=Hr(this,n),T=e(this),E=T+"";return null==T&&(this.style.removeProperty(n),E=T=Hr(this,n)),d===E?null:d===i&&E===a?s:(a=E,s=r(i=d,T))}}(n,i,xs(this,"style."+n,r))).each(function uf(n,r){var e,i,a,T,s="style."+r,d="end."+s;return function(){var E=fr(this,n),F=E.on,W=null==E.value[s]?T||(T=Ko(r)):void 0;(F!==e||a!==W)&&(i=(e=F).copy()).on(d,a=W),E.on=i}}(this._id,n)):this.styleTween(n,function lf(n,r,e){var i,s,a=e+"";return function(){var d=Hr(this,n);return d===a?null:d===i?s:s=r(i=d,e)}}(n,i,r),e).on("end.style."+n,null)},styleTween:function pf(n,r,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,ff(n,r,null==e?"":e))},text:function _f(n){return this.tween("text","function"==typeof n?function gf(n){return function(){var r=n(this);this.textContent=null==r?"":r}}(xs(this,"text",n)):function mf(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function yf(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,xf(n))},remove:function ef(){return this.on("end.remove",function tf(n){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==n)return;r&&r.removeChild(this)}}(this._id))},tween:function Dd(n,r){var e=this._id;if(n+="",arguments.length<2){for(var d,i=nr(this.node(),e).tween,a=0,s=i.length;a<s;++a)if((d=i[a]).name===n)return d.value;return null}return this.each((null==r?Ed:Sd)(e,n,r))},delay:function Hd(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?Gd:Vd)(r,n)):nr(this.node(),r).delay},duration:function Wd(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?zd:Yd)(r,n)):nr(this.node(),r).duration},ease:function $d(n){var r=this._id;return arguments.length?this.each(Xd(r,n)):nr(this.node(),r).ease},end:function bf(){var n,r,e=this,i=e._id,a=e.size();return new Promise(function(s,d){var T={value:d},E={value:function(){0==--a&&s()}};e.each(function(){var F=fr(this,i),W=F.on;W!==n&&((r=(n=W).copy())._.cancel.push(T),r._.interrupt.push(T),r._.end.push(E)),F.on=r})})}};var el=o(27065),ys={time:null,delay:0,duration:250,ease:el.tw};function Af(n,r){for(var e;!(e=n.__transition)||!(e=e[r]);)if(!(n=n.parentNode))return ys.time=(0,er.zO)(),ys;return e}la.prototype.interrupt=function Ad(n){return this.each(function(){!function wd(n,r){var i,a,d,e=n.__transition,s=!0;if(e){for(d in r=null==r?null:r+"",e)(i=e[d]).name===r?(a=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[d]):s=!1;s&&delete n.__transition}}(this,n)})},la.prototype.transition=function Ef(n){var r,e;n instanceof pr?(r=n._id,n=n._name):(r=tl(),(e=ys).time=(0,er.zO)(),n=null==n?null:n+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var E,d=i[s],T=d.length,F=0;F<T;++F)(E=d[F])&&Na(E,n,r,F,d,e||Af(E,r));return new pr(i,this._parents,n,r)};var nl=o(42654),il=o(56498),rl=o(21086),al=o(23753),Df=o(87224);function Pf(n){return void 0===n}function Uf(n){if(Array.isArray(n)){for(var r=0,e=Array(n.length);r<n.length;r++)e[r]=n[r];return e}return Array.from(n)}function Gf(n){return Array.isArray(n)?n:Array.from(n)}function ha(){for(var n=arguments.length,r=Array(n),e=0;e<n;e++)r[e]=arguments[e];var i=function(lt,st){return{a:lt.a*st.a+lt.c*st.b,c:lt.a*st.c+lt.c*st.d,e:lt.a*st.e+lt.c*st.f+lt.e,b:lt.b*st.a+lt.d*st.b,d:lt.b*st.c+lt.d*st.d,f:lt.b*st.e+lt.d*st.f+lt.f}};switch((r=Array.isArray(r[0])?r[0]:r).length){case 0:throw new Error("no matrices provided");case 1:return r[0];case 2:return i(r[0],r[1]);default:var a=r,s=Gf(a),d=s[0],T=s[1],E=s.slice(2),F=i(d,T);return ha.apply(void 0,[F].concat(Uf(E)))}}function ll(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:n,b:0,d:1,f:r}}function Za(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n)}return this}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;const cl=Symbol("implicit");function Ts(){var n=new Map,r=[],e=[],i=cl;function a(s){var d=s+"",T=n.get(d);if(!T){if(i!==cl)return i;n.set(d,T=r.push(s))}return e[(T-1)%e.length]}return a.domain=function(s){if(!arguments.length)return r.slice();r=[],n=new Map;for(const d of s){const T=d+"";n.has(T)||n.set(T,r.push(d))}return a},a.range=function(s){return arguments.length?(e=Array.from(s),a):e.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return Ts(r,e).unknown(i)},Za.apply(a,arguments),a}var Wr=o(59695);function Hf(n,r){var e;function i(){var a,d,s=e.length,T=0,E=0;for(a=0;a<s;++a)T+=(d=e[a]).x,E+=d.y;for(T=T/s-n,E=E/s-r,a=0;a<s;++a)(d=e[a]).x-=T,d.y-=E}return null==n&&(n=0),null==r&&(r=0),i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(r=+a,i):r},i}function vi(n){return function(){return n}}function Cr(){return 1e-6*(Math.random()-.5)}function ul(n,r,e,i){if(isNaN(r)||isNaN(e))return n;var a,lt,st,vt,Mt,Rt,bt,$t,ie,s=n._root,d={data:i},T=n._x0,E=n._y0,F=n._x1,W=n._y1;if(!s)return n._root=d,n;for(;s.length;)if((Rt=r>=(lt=(T+F)/2))?T=lt:F=lt,(bt=e>=(st=(E+W)/2))?E=st:W=st,a=s,!(s=s[$t=bt<<1|Rt]))return a[$t]=d,n;if(vt=+n._x.call(null,s.data),Mt=+n._y.call(null,s.data),r===vt&&e===Mt)return d.next=s,a?a[$t]=d:n._root=d,n;do{a=a?a[$t]=new Array(4):n._root=new Array(4),(Rt=r>=(lt=(T+F)/2))?T=lt:F=lt,(bt=e>=(st=(E+W)/2))?E=st:W=st}while(($t=bt<<1|Rt)==(ie=(Mt>=st)<<1|vt>=lt));return a[ie]=s,a[$t]=d,n}function Bi(n,r,e,i,a){this.node=n,this.x0=r,this.y0=e,this.x1=i,this.y1=a}function np(n){return n[0]}function rp(n){return n[1]}function bs(n,r,e){var i=new Cs(null==r?np:r,null==e?rp:e,NaN,NaN,NaN,NaN);return null==n?i:i.addAll(n)}function Cs(n,r,e,i,a,s){this._x=n,this._y=r,this._x0=e,this._y0=i,this._x1=a,this._y1=s,this._root=void 0}function hl(n){for(var r={data:n.data},e=r;n=n.next;)e=e.next={data:n.data};return r}var Ui=bs.prototype=Cs.prototype;function sp(n){return n.x+n.vx}function op(n){return n.y+n.vy}function dl(n){var r,e,i=1,a=1;function s(){for(var E,W,lt,st,vt,Mt,Rt,F=r.length,bt=0;bt<a;++bt)for(W=bs(r,sp,op).visitAfter(d),E=0;E<F;++E)Rt=(Mt=e[(lt=r[E]).index])*Mt,st=lt.x+lt.vx,vt=lt.y+lt.vy,W.visit($t);function $t(ie,Kt,Ae,Ne,Ce){var dn=ie.data,yn=ie.r,Sn=Mt+yn;if(!dn)return Kt>st+Sn||Ne<st-Sn||Ae>vt+Sn||Ce<vt-Sn;if(dn.index>lt.index){var Vn=st-dn.x-dn.vx,Hn=vt-dn.y-dn.vy,mi=Vn*Vn+Hn*Hn;mi<Sn*Sn&&(0===Vn&&(mi+=(Vn=Cr())*Vn),0===Hn&&(mi+=(Hn=Cr())*Hn),mi=(Sn-(mi=Math.sqrt(mi)))/mi*i,lt.vx+=(Vn*=mi)*(Sn=(yn*=yn)/(Rt+yn)),lt.vy+=(Hn*=mi)*Sn,dn.vx-=Vn*(Sn=1-Sn),dn.vy-=Hn*Sn)}}}function d(E){if(E.data)return E.r=e[E.data.index];for(var F=E.r=0;F<4;++F)E[F]&&E[F].r>E.r&&(E.r=E[F].r)}function T(){if(r){var E,W,F=r.length;for(e=new Array(F),E=0;E<F;++E)e[(W=r[E]).index]=+n(W,E,r)}}return"function"!=typeof n&&(n=vi(null==n?1:+n)),s.initialize=function(E){r=E,T()},s.iterations=function(E){return arguments.length?(a=+E,s):a},s.strength=function(E){return arguments.length?(i=+E,s):i},s.radius=function(E){return arguments.length?(n="function"==typeof E?E:vi(+E),T(),s):n},s}Ui.copy=function(){var e,i,n=new Cs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=hl(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(i=r.source[a])&&(i.length?e.push({source:i,target:r.target[a]=new Array(4)}):r.target[a]=hl(i));return n},Ui.add=function zf(n){var r=+this._x.call(null,n),e=+this._y.call(null,n);return ul(this.cover(r,e),r,e,n)},Ui.addAll=function Yf(n){var r,e,a,s,i=n.length,d=new Array(i),T=new Array(i),E=1/0,F=1/0,W=-1/0,lt=-1/0;for(e=0;e<i;++e)isNaN(a=+this._x.call(null,r=n[e]))||isNaN(s=+this._y.call(null,r))||(d[e]=a,T[e]=s,a<E&&(E=a),a>W&&(W=a),s<F&&(F=s),s>lt&&(lt=s));if(E>W||F>lt)return this;for(this.cover(E,F).cover(W,lt),e=0;e<i;++e)ul(this,d[e],T[e],n[e]);return this},Ui.cover=function Wf(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var e=this._x0,i=this._y0,a=this._x1,s=this._y1;if(isNaN(e))a=(e=Math.floor(n))+1,s=(i=Math.floor(r))+1;else{for(var E,F,d=a-e,T=this._root;e>n||n>=a||i>r||r>=s;)switch(F=(r<i)<<1|n<e,E=new Array(4),E[F]=T,T=E,d*=2,F){case 0:a=e+d,s=i+d;break;case 1:e=a-d,s=i+d;break;case 2:a=e+d,i=s-d;break;case 3:e=a-d,i=s-d}this._root&&this._root.length&&(this._root=T)}return this._x0=e,this._y0=i,this._x1=a,this._y1=s,this},Ui.data=function Xf(){var n=[];return this.visit(function(r){if(!r.length)do{n.push(r.data)}while(r=r.next)}),n},Ui.extent=function $f(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ui.find=function Jf(n,r,e){var i,d,T,E,F,Mt,Rt,a=this._x0,s=this._y0,W=this._x1,lt=this._y1,st=[],vt=this._root;for(vt&&st.push(new Bi(vt,a,s,W,lt)),null==e?e=1/0:(a=n-e,s=r-e,W=n+e,lt=r+e,e*=e);Mt=st.pop();)if(!(!(vt=Mt.node)||(d=Mt.x0)>W||(T=Mt.y0)>lt||(E=Mt.x1)<a||(F=Mt.y1)<s))if(vt.length){var bt=(d+E)/2,$t=(T+F)/2;st.push(new Bi(vt[3],bt,$t,E,F),new Bi(vt[2],d,$t,bt,F),new Bi(vt[1],bt,T,E,$t),new Bi(vt[0],d,T,bt,$t)),(Rt=(r>=$t)<<1|n>=bt)&&(Mt=st[st.length-1],st[st.length-1]=st[st.length-1-Rt],st[st.length-1-Rt]=Mt)}else{var ie=n-+this._x.call(null,vt.data),Kt=r-+this._y.call(null,vt.data),Ae=ie*ie+Kt*Kt;if(Ae<e){var Ne=Math.sqrt(e=Ae);a=n-Ne,s=r-Ne,W=n+Ne,lt=r+Ne,i=vt.data}}return i},Ui.remove=function Qf(n){if(isNaN(W=+this._x.call(null,n))||isNaN(lt=+this._y.call(null,n)))return this;var r,i,a,s,W,lt,st,vt,Mt,Rt,bt,$t,e=this._root,d=this._x0,T=this._y0,E=this._x1,F=this._y1;if(!e)return this;if(e.length)for(;;){if((Mt=W>=(st=(d+E)/2))?d=st:E=st,(Rt=lt>=(vt=(T+F)/2))?T=vt:F=vt,r=e,!(e=e[bt=Rt<<1|Mt]))return this;if(!e.length)break;(r[bt+1&3]||r[bt+2&3]||r[bt+3&3])&&(i=r,$t=bt)}for(;e.data!==n;)if(a=e,!(e=e.next))return this;return(s=e.next)&&delete e.next,a?(s?a.next=s:delete a.next,this):r?(s?r[bt]=s:delete r[bt],(e=r[0]||r[1]||r[2]||r[3])&&e===(r[3]||r[2]||r[1]||r[0])&&!e.length&&(i?i[$t]=e:this._root=e),this):(this._root=s,this)},Ui.removeAll=function jf(n){for(var r=0,e=n.length;r<e;++r)this.remove(n[r]);return this},Ui.root=function qf(){return this._root},Ui.size=function Kf(){var n=0;return this.visit(function(r){if(!r.length)do{++n}while(r=r.next)}),n},Ui.visit=function tp(n){var e,a,s,d,T,E,r=[],i=this._root;for(i&&r.push(new Bi(i,this._x0,this._y0,this._x1,this._y1));e=r.pop();)if(!n(i=e.node,s=e.x0,d=e.y0,T=e.x1,E=e.y1)&&i.length){var F=(s+T)/2,W=(d+E)/2;(a=i[3])&&r.push(new Bi(a,F,W,T,E)),(a=i[2])&&r.push(new Bi(a,s,W,F,E)),(a=i[1])&&r.push(new Bi(a,F,d,T,W)),(a=i[0])&&r.push(new Bi(a,s,d,F,W))}return this},Ui.visitAfter=function ep(n){var i,r=[],e=[];for(this._root&&r.push(new Bi(this._root,this._x0,this._y0,this._x1,this._y1));i=r.pop();){var a=i.node;if(a.length){var s,d=i.x0,T=i.y0,E=i.x1,F=i.y1,W=(d+E)/2,lt=(T+F)/2;(s=a[0])&&r.push(new Bi(s,d,T,W,lt)),(s=a[1])&&r.push(new Bi(s,W,T,E,lt)),(s=a[2])&&r.push(new Bi(s,d,lt,W,F)),(s=a[3])&&r.push(new Bi(s,W,lt,E,F))}e.push(i)}for(;i=e.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this},Ui.x=function ip(n){return arguments.length?(this._x=n,this):this._x},Ui.y=function ap(n){return arguments.length?(this._y=n,this):this._y};var Ji="$";function Ba(){}function fl(n,r){var e=new Ba;if(n instanceof Ba)n.each(function(T,E){e.set(E,T)});else if(Array.isArray(n)){var s,i=-1,a=n.length;if(null==r)for(;++i<a;)e.set(i,n[i]);else for(;++i<a;)e.set(r(s=n[i],i,n),s)}else if(n)for(var d in n)e.set(d,n[d]);return e}Ba.prototype=fl.prototype={constructor:Ba,has:function(n){return Ji+n in this},get:function(n){return this[Ji+n]},set:function(n,r){return this[Ji+n]=r,this},remove:function(n){var r=Ji+n;return r in this&&delete this[r]},clear:function(){for(var n in this)n[0]===Ji&&delete this[n]},keys:function(){var n=[];for(var r in this)r[0]===Ji&&n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)r[0]===Ji&&n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)r[0]===Ji&&n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)r[0]===Ji&&++n;return n},empty:function(){for(var n in this)if(n[0]===Ji)return!1;return!0},each:function(n){for(var r in this)r[0]===Ji&&n(this[r],r.slice(1),this)}};const ws=fl;function Ua(){}var Nr=ws.prototype;function hp(n){return n.index}function gl(n,r){var e=n.get(r);if(!e)throw new Error("missing: "+r);return e}function _l(n){var i,s,d,T,E,r=hp,e=function W(Rt){return 1/Math.min(T[Rt.source.index],T[Rt.target.index])},a=vi(30),F=1;function lt(Rt){for(var bt=0,$t=n.length;bt<F;++bt)for(var Kt,Ae,Ne,Ce,dn,yn,Sn,ie=0;ie<$t;++ie)Ce=(Ne=(Kt=n[ie]).target).x+Ne.vx-(Ae=Kt.source).x-Ae.vx||Cr(),dn=Ne.y+Ne.vy-Ae.y-Ae.vy||Cr(),dn*=yn=((yn=Math.sqrt(Ce*Ce+dn*dn))-s[ie])/yn*Rt*i[ie],Ne.vx-=(Ce*=yn)*(Sn=E[ie]),Ne.vy-=dn*Sn,Ae.vx+=Ce*(Sn=1-Sn),Ae.vy+=dn*Sn}function st(){if(d){var Rt,Kt,bt=d.length,$t=n.length,ie=ws(d,r);for(Rt=0,T=new Array(bt);Rt<$t;++Rt)(Kt=n[Rt]).index=Rt,"object"!=typeof Kt.source&&(Kt.source=gl(ie,Kt.source)),"object"!=typeof Kt.target&&(Kt.target=gl(ie,Kt.target)),T[Kt.source.index]=(T[Kt.source.index]||0)+1,T[Kt.target.index]=(T[Kt.target.index]||0)+1;for(Rt=0,E=new Array($t);Rt<$t;++Rt)E[Rt]=T[(Kt=n[Rt]).source.index]/(T[Kt.source.index]+T[Kt.target.index]);i=new Array($t),vt(),s=new Array($t),Mt()}}function vt(){if(d)for(var Rt=0,bt=n.length;Rt<bt;++Rt)i[Rt]=+e(n[Rt],Rt,n)}function Mt(){if(d)for(var Rt=0,bt=n.length;Rt<bt;++Rt)s[Rt]=+a(n[Rt],Rt,n)}return null==n&&(n=[]),lt.initialize=function(Rt){d=Rt,st()},lt.links=function(Rt){return arguments.length?(n=Rt,st(),lt):n},lt.id=function(Rt){return arguments.length?(r=Rt,lt):r},lt.iterations=function(Rt){return arguments.length?(F=+Rt,lt):F},lt.strength=function(Rt){return arguments.length?(e="function"==typeof Rt?Rt:vi(+Rt),vt(),lt):e},lt.distance=function(Rt){return arguments.length?(a="function"==typeof Rt?Rt:vi(+Rt),Mt(),lt):a},lt}function dp(n){return n.x}function fp(n){return n.y}Ua.prototype=function up(n,r){var e=new Ua;if(n instanceof Ua)n.each(function(s){e.add(s)});else if(n){var i=-1,a=n.length;if(null==r)for(;++i<a;)e.add(n[i]);else for(;++i<a;)e.add(r(n[i],i,n))}return e}.prototype={constructor:Ua,has:Nr.has,add:function(n){return this[Ji+(n+="")]=n,this},remove:Nr.remove,clear:Nr.clear,values:Nr.keys,size:Nr.size,empty:Nr.empty,each:Nr.each};var mp=Math.PI*(3-Math.sqrt(5));function vl(n){var r,e=1,i=.001,a=1-Math.pow(i,1/300),s=0,d=.6,T=ws(),E=(0,er.HT)(W),F=(0,ca.Z)("tick","end");function W(){lt(),F.call("tick",r),e<i&&(E.stop(),F.call("end",r))}function lt(Mt){var Rt,$t,bt=n.length;void 0===Mt&&(Mt=1);for(var ie=0;ie<Mt;++ie)for(e+=(s-e)*a,T.each(function(Kt){Kt(e)}),Rt=0;Rt<bt;++Rt)null==($t=n[Rt]).fx?$t.x+=$t.vx*=d:($t.x=$t.fx,$t.vx=0),null==$t.fy?$t.y+=$t.vy*=d:($t.y=$t.fy,$t.vy=0);return r}function st(){for(var bt,Mt=0,Rt=n.length;Mt<Rt;++Mt){if((bt=n[Mt]).index=Mt,null!=bt.fx&&(bt.x=bt.fx),null!=bt.fy&&(bt.y=bt.fy),isNaN(bt.x)||isNaN(bt.y)){var $t=10*Math.sqrt(Mt),ie=Mt*mp;bt.x=$t*Math.cos(ie),bt.y=$t*Math.sin(ie)}(isNaN(bt.vx)||isNaN(bt.vy))&&(bt.vx=bt.vy=0)}}function vt(Mt){return Mt.initialize&&Mt.initialize(n),Mt}return null==n&&(n=[]),st(),r={tick:lt,restart:function(){return E.restart(W),r},stop:function(){return E.stop(),r},nodes:function(Mt){return arguments.length?(n=Mt,st(),T.each(vt),r):n},alpha:function(Mt){return arguments.length?(e=+Mt,r):e},alphaMin:function(Mt){return arguments.length?(i=+Mt,r):i},alphaDecay:function(Mt){return arguments.length?(a=+Mt,r):+a},alphaTarget:function(Mt){return arguments.length?(s=+Mt,r):s},velocityDecay:function(Mt){return arguments.length?(d=1-Mt,r):1-d},force:function(Mt,Rt){return arguments.length>1?(null==Rt?T.remove(Mt):T.set(Mt,vt(Rt)),r):T.get(Mt)},find:function(Mt,Rt,bt){var Kt,Ae,Ne,Ce,dn,$t=0,ie=n.length;for(null==bt?bt=1/0:bt*=bt,$t=0;$t<ie;++$t)(Ne=(Kt=Mt-(Ce=n[$t]).x)*Kt+(Ae=Rt-Ce.y)*Ae)<bt&&(dn=Ce,bt=Ne);return dn},on:function(Mt,Rt){return arguments.length>1?(F.on(Mt,Rt),r):F.on(Mt)}}}function xl(){var n,r,e,a,i=vi(-30),s=1,d=1/0,T=.81;function E(st){var vt,Mt=n.length,Rt=bs(n,dp,fp).visitAfter(W);for(e=st,vt=0;vt<Mt;++vt)r=n[vt],Rt.visit(lt)}function F(){if(n){var st,Mt,vt=n.length;for(a=new Array(vt),st=0;st<vt;++st)a[(Mt=n[st]).index]=+i(Mt,st,n)}}function W(st){var Mt,Rt,$t,ie,Kt,vt=0,bt=0;if(st.length){for($t=ie=Kt=0;Kt<4;++Kt)(Mt=st[Kt])&&(Rt=Math.abs(Mt.value))&&(vt+=Mt.value,bt+=Rt,$t+=Rt*Mt.x,ie+=Rt*Mt.y);st.x=$t/bt,st.y=ie/bt}else{(Mt=st).x=Mt.data.x,Mt.y=Mt.data.y;do{vt+=a[Mt.data.index]}while(Mt=Mt.next)}st.value=vt}function lt(st,vt,Mt,Rt){if(!st.value)return!0;var bt=st.x-r.x,$t=st.y-r.y,ie=Rt-vt,Kt=bt*bt+$t*$t;if(ie*ie/T<Kt)return Kt<d&&(0===bt&&(Kt+=(bt=Cr())*bt),0===$t&&(Kt+=($t=Cr())*$t),Kt<s&&(Kt=Math.sqrt(s*Kt)),r.vx+=bt*st.value*e/Kt,r.vy+=$t*st.value*e/Kt),!0;if(!(st.length||Kt>=d)){(st.data!==r||st.next)&&(0===bt&&(Kt+=(bt=Cr())*bt),0===$t&&(Kt+=($t=Cr())*$t),Kt<s&&(Kt=Math.sqrt(s*Kt)));do{st.data!==r&&(r.vx+=bt*(ie=a[st.data.index]*e/Kt),r.vy+=$t*ie)}while(st=st.next)}}return E.initialize=function(st){n=st,F()},E.strength=function(st){return arguments.length?(i="function"==typeof st?st:vi(+st),F(),E):i},E.distanceMin=function(st){return arguments.length?(s=st*st,E):Math.sqrt(s)},E.distanceMax=function(st){return arguments.length?(d=st*st,E):Math.sqrt(d)},E.theta=function(st){return arguments.length?(T=st*st,E):Math.sqrt(T)},E}function gp(n,r,e){var i,s,d,a=vi(.1);function T(F){for(var W=0,lt=i.length;W<lt;++W){var st=i[W],vt=st.x-r||1e-6,Mt=st.y-e||1e-6,Rt=Math.sqrt(vt*vt+Mt*Mt),bt=(d[W]-Rt)*s[W]*F/Rt;st.vx+=vt*bt,st.vy+=Mt*bt}}function E(){if(i){var F,W=i.length;for(s=new Array(W),d=new Array(W),F=0;F<W;++F)d[F]=+n(i[F],F,i),s[F]=isNaN(d[F])?0:+a(i[F],F,i)}}return"function"!=typeof n&&(n=vi(+n)),null==r&&(r=0),null==e&&(e=0),T.initialize=function(F){i=F,E()},T.strength=function(F){return arguments.length?(a="function"==typeof F?F:vi(+F),E(),T):a},T.radius=function(F){return arguments.length?(n="function"==typeof F?F:vi(+F),E(),T):n},T.x=function(F){return arguments.length?(r=+F,T):r},T.y=function(F){return arguments.length?(e=+F,T):e},T}function _p(n){var e,i,a,r=vi(.1);function s(T){for(var W,E=0,F=e.length;E<F;++E)(W=e[E]).vx+=(a[E]-W.x)*i[E]*T}function d(){if(e){var T,E=e.length;for(i=new Array(E),a=new Array(E),T=0;T<E;++T)i[T]=isNaN(a[T]=+n(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof n&&(n=vi(null==n?0:+n)),s.initialize=function(T){e=T,d()},s.strength=function(T){return arguments.length?(r="function"==typeof T?T:vi(+T),d(),s):r},s.x=function(T){return arguments.length?(n="function"==typeof T?T:vi(+T),d(),s):n},s}function vp(n){var e,i,a,r=vi(.1);function s(T){for(var W,E=0,F=e.length;E<F;++E)(W=e[E]).vy+=(a[E]-W.y)*i[E]*T}function d(){if(e){var T,E=e.length;for(i=new Array(E),a=new Array(E),T=0;T<E;++T)i[T]=isNaN(a[T]=+n(e[T],T,e))?0:+r(e[T],T,e)}}return"function"!=typeof n&&(n=vi(null==n?0:+n)),s.initialize=function(T){e=T,d()},s.strength=function(T){return arguments.length?(r="function"==typeof T?T:vi(+T),d(),s):r},s.y=function(T){return arguments.length?(n="function"==typeof T?T:vi(+T),d(),s):n},s}var xp=o(67824);function yp(n,r,e){var i=new er.B7,a=r;return null==r?(i.restart(n,r,e),i):(r=+r,e=null==e?(0,er.zO)():+e,i.restart(function s(d){d+=a,i.restart(s,a+=r,e),n(d)},r,e),i)}const Tp=["linkTemplate"],bp=["nodeTemplate"],Cp=["clusterTemplate"],wp=["defsTemplate"],Ap=["miniMapNodeTemplate"],Ep=["nodeElement"],Sp=["linkElement"];function Dp(n,r){if(1&n&&(t.O4$(),t.GkF(0,14)),2&n){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.defsTemplate)}}function Lp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",15)),2&n){const e=r.$implicit;t.uIk("d",e.textPath)("id",e.id)}}const da=function(n){return{$implicit:n}};function kp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,da,e))}}function Ip(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function Mp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onClick(s)}),t.YNc(2,kp,1,4,"ng-container",18),t.YNc(3,Ip,4,6,"g",19),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldClusters.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!i.clusterTemplate)}}function Op(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.linkTemplate)("ngTemplateOutletContext",t.VKq(2,da,e))}}function Np(n,r){if(1&n&&(t.O4$(),t._UZ(0,"path",26)),2&n){const e=t.oxw().$implicit;t.uIk("d",e.line)}}function Fp(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,Op,1,4,"ng-container",18),t.YNc(3,Np,1,1,"path",25),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.Q6J("id",e.id),t.xp6(2),t.Q6J("ngIf",i.linkTemplate),t.xp6(1),t.Q6J("ngIf",!i.linkTemplate)}}function Pp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,da,e))}}function Rp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit;t.uIk("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function Zp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onClick(s)})("mousedown",function(a){const d=t.CHM(e).$implicit;return t.oxw(2).onNodeMouseDown(a,d)}),t.YNc(2,Pp,1,4,"ng-container",18),t.YNc(3,Rp,1,3,"circle",29),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate)}}function Bp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(a){return t.CHM(e),t.oxw().onTouchStart(a)})("touchend",function(a){return t.CHM(e),t.oxw().onTouchEnd(a)}),t.TgZ(1,"defs"),t.YNc(2,Dp,1,1,"ng-container",5),t.YNc(3,Lp,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){return t.CHM(e),t.oxw().isPanning=!0}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,Mp,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,Fp,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,Zp,4,6,"g",13),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",e.defsTemplate),t.xp6(1),t.Q6J("ngForOf",e.graph.edges),t.xp6(1),t.uIk("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function Up(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,da,e))}}function Gp(n,r){if(1&n&&(t.O4$(),t.GkF(0,20)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngTemplateOutlet",i.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,da,e))}}function Vp(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",30)),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.uIk("cx",e.dimension.width/2/i.minimapScaleCoefficient)("cy",e.dimension.height/2/i.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function Hp(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,Up,1,4,"ng-container",18),t.YNc(3,Gp,1,4,"ng-container",18),t.YNc(4,Vp,1,3,"circle",29),t.qZA()),2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("old-node",i.animate&&i.oldNodes.has(e.id)),t.Q6J("id",e.id),t.uIk("transform",e.transform),t.xp6(2),t.Q6J("ngIf",i.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.miniMapNodeTemplate&&i.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!i.nodeTemplate&&!i.miniMapNodeTemplate)}}function zp(n,r){if(1&n){const e=t.EpF();t.O4$(),t.TgZ(0,"g",31),t.TgZ(1,"rect",32),t.NdJ("mousedown",function(a){return t.CHM(e),t.oxw().onMinimapPanTo(a)}),t.qZA(),t.TgZ(2,"g"),t.TgZ(3,"g",33),t.YNc(4,Hp,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){return t.CHM(e),t.oxw().onMinimapDragMouseDown()}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.uIk("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),t.xp6(1),t.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/e.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),t.xp6(1),t.ekj("panning",e.isMinimapPanning),t.uIk("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const Yp=["*"],yl={};function mr(){let n=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return n=`a${n}`,yl[n]?mr():(yl[n]=!0,n)}var Xr=(()=>{return(n=Xr||(Xr={})).Both="both",n.Horizontal="horizontal",n.Vertical="vertical",Xr;var n})(),$r=(()=>{return(n=$r||($r={})).UpperLeft="UpperLeft",n.UpperRight="UpperRight",$r;var n})();function Wp(n,r,e){e=e||{};let i,a,s,d=null,T=0;function E(){T=!1===e.leading?0:+new Date,d=null,s=n.apply(i,a)}return function(){const F=+new Date;!T&&!1===e.leading&&(T=F);const W=r-(F-T);return i=this,a=arguments,W<=0?(clearTimeout(d),d=null,T=F,s=n.apply(i,a)):!d&&!1!==e.trailing&&(d=setTimeout(E,W)),s}}function Xp(n,r){return function(i,a,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:s.enumerable,value:Wp(s.value,n,r)}),this[a]}}}}let Tl=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class $p{constructor(r,e,i){"string"==typeof r&&(r=Tl.find(a=>a.name===r)),this.colorDomain=r.domain,this.domain=e,this.customColors=i,this.scale=this.generateColorScheme(r,this.domain)}generateColorScheme(r,e){return"string"==typeof r&&(r=Tl.find(i=>i.name===r)),Ts().range(r.domain).domain(e)}getColor(r){if(null==r)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(r);const e=r.toString();let i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),i?i.value:this.scale(r)}}let Qp=(()=>{class n{constructor(e,i){this.element=e,this.zone=i,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:i,offsetWidth:a}=this.element.nativeElement;i&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),n})();var Jr=(()=>{return(n=Jr||(Jr={})).LEFT_TO_RIGHT="LR",n.RIGHT_TO_LEFT="RL",n.TOP_TO_BOTTOM="TB",n.BOTTOM_TO_TOM="BT",Jr;var n})();function Qr(n){return"string"==typeof n?{id:n,x:0,y:0}:n}function Cl(n,r){return"number"==typeof r?n[r]:r}const wl={dagre:class jp{constructor(){this.defaultSettings={orientation:Jr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Wr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(s=>s.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}return r}updateEdge(r,e){const i=r.nodes.find(E=>E.id===e.source),a=r.nodes.find(E=>E.id===e.target),s=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-s*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+s*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Wr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=mr()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreCluster:class qp{constructor(){this.defaultSettings={orientation:Jr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Wr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;const e=i=>{const a=this.dagreGraph._nodes[i.id];return Object.assign(Object.assign({},i),{position:{x:a.x,y:a.y},dimension:{width:a.width,height:a.height}})};return r.clusters=(r.clusters||[]).map(e),r.nodes=r.nodes.map(e),r}updateEdge(r,e){const i=r.nodes.find(E=>E.id===e.source),a=r.nodes.find(E=>E.id===e.target),s=i.position.y<=a.position.y?-1:1;return e.points=[{x:i.position.x,y:i.position.y-s*(i.dimension.height/2)},{x:a.position.x,y:a.position.y+s*(a.dimension.height/2)}],r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Wr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreClusters=r.clusters||[],this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=mr()),a});for(const i of this.dagreNodes)this.dagreGraph.setNode(i.id,i);for(const i of this.dagreClusters)this.dagreGraph.setNode(i.id,i),i.childNodeIds.forEach(a=>{this.dagreGraph.setParent(a,i.id)});for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},dagreNodesOnly:class tm{constructor(){this.defaultSettings={orientation:Jr.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(r){this.createDagreGraph(r),Wr.layout(this.dagreGraph),r.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[e],a=r.nodes.find(s=>s.id===i.id);a.position={x:i.x,y:i.y},a.dimension={width:i.width,height:i.height}}for(const e of r.edges)this.updateEdge(r,e);return r}updateEdge(r,e){const i=r.nodes.find(Mt=>Mt.id===e.source),a=r.nodes.find(Mt=>Mt.id===e.target),s="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",d="y"===s?"x":"y",T="y"===s?"height":"width",E=i.position[s]<=a.position[s]?-1:1,F={[d]:i.position[d],[s]:i.position[s]-E*(i.dimension[T]/2)},W={[d]:a.position[d],[s]:a.position[s]+E*(a.dimension[T]/2)},lt=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[F,{[d]:F[d],[s]:F[s]-E*lt},{[d]:W[d],[s]:W[s]+E*lt},W];const vt=r.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return vt&&(vt.points=e.points),r}createDagreGraph(r){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Wr.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=r.nodes.map(i=>{const a=Object.assign({},i);return a.width=i.dimension.width,a.height=i.dimension.height,a.x=i.position.x,a.y=i.position.y,a}),this.dagreEdges=r.edges.map(i=>{const a=Object.assign({},i);return a.id||(a.id=mr()),a});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}},d3ForceDirected:class em{constructor(){this.defaultSettings={force:vl().force("charge",xl().strength(-150)).force("collide",dl(5)),forceLink:_l().id(r=>r.id).distance(()=>100)},this.settings={},this.outputGraph$=new He.xQ}run(r){return this.inputGraph=r,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign({},e))],edges:[...this.inputGraph.edges.map(e=>Object.assign({},e))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.nodes(this.d3Graph.nodes).force("link",i.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(r){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||mr(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>Object.assign(Object.assign({},e),{source:Qr(e.source).id,target:Qr(e.target).id,points:[{x:Qr(e.source).x,y:Qr(e.source).y},{x:Qr(e.target).x,y:Qr(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){this.settings.force.alphaTarget(.3).restart();const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.draggingStart={x:e.x-i.x,y:e.y-i.y},i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDrag(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(i.fx=e.x-this.draggingStart.x,i.fy=e.y-this.draggingStart.y)}onDragEnd(r,e){if(!r)return;const i=this.d3Graph.nodes.find(a=>a.id===r.id);!i||(this.settings.force.alphaTarget(0),i.fx=void 0,i.fy=void 0)}},colaForceDirected:class nm{constructor(){this.defaultSettings={force:(0,xp.d3adaptor)(Object.assign(Object.assign(Object.assign({},x),u),v)).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new He.xQ}run(r){return this.inputGraph=r,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign(Object.assign({},e),{width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(i=>this.inputGraph.clusters.findIndex(a=>a.id===i)).filter(i=>i>=0),leaves:e.childNodeIds.map(i=>this.inputGraph.nodes.findIndex(a=>a.id===i)).filter(i=>i>=0)}))],links:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(s=>e.source===s.id),a=this.inputGraph.nodes.findIndex(s=>e.target===s.id);if(-1!==i&&-1!==a)return Object.assign(Object.assign({},e),{source:i,target:a})}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const i=this.inputGraph.nodes.findIndex(s=>e.source===s.id),a=this.inputGraph.nodes.findIndex(s=>e.target===s.id);if(!(i>=0&&a>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(r,e){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(r){return this.outputGraph.nodes=r.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||mr(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=r.links.map(e=>{const i=Cl(r.nodes,e.source),a=Cl(r.nodes,e.target);return Object.assign(Object.assign({},e),{source:i.id,target:a.id,points:[i.bounds.rayIntersection(a.bounds.cx(),a.bounds.cy()),a.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy())]})}).concat(r.groupLinks.map(e=>{const i=r.nodes.find(T=>T.id===e.source),a=r.nodes.find(T=>T.id===e.target),s=i||r.groups.find(T=>T.id===e.source),d=a||r.groups.find(T=>T.id===e.target);return Object.assign(Object.assign({},e),{source:s.id,target:d.id,points:[s.bounds.rayIntersection(d.bounds.cx(),d.bounds.cy()),d.bounds.rayIntersection(s.bounds.cx(),s.bounds.cy())]})})),this.outputGraph.clusters=r.groups.map((e,i)=>Object.assign(Object.assign({},this.inputGraph.clusters[i]),{dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(r,e){const i=this.outputGraph.nodes.findIndex(s=>s.id===r.id),a=this.internalGraph.nodes[i];!a||(this.draggingStart={x:a.x-e.x,y:a.y-e.y},a.fixed=1,this.settings.force.start())}onDrag(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(s=>s.id===r.id),a=this.internalGraph.nodes[i];!a||(a.x=this.draggingStart.x+e.x,a.y=this.draggingStart.y+e.y)}onDragEnd(r,e){if(!r)return;const i=this.outputGraph.nodes.findIndex(s=>s.id===r.id),a=this.internalGraph.nodes[i];!a||(a.fixed=0)}}};let Al=(()=>{class n{getLayout(e){if(wl[e])return new wl[e];throw new Error(`Unknown layout type '${e}'`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),im=(()=>{class n{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),s=e.wheelDelta?i<0:i>0;(e.wheelDelta?i>0:i<0)?this.mouseWheelUp.emit(e):s&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","mouseWheel",""]],hostBindings:function(e,i){1&e&&t.NdJ("mousewheel",function(s){return i.onMouseWheelChrome(s)})("DOMMouseScroll",function(s){return i.onMouseWheelFirefox(s)})("wheel",function(s){return i.onWheel(s)})("onmousewheel",function(s){return i.onMouseWheelIE(s)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),n})(),rm=(()=>{class n{constructor(e,i,a,s){this.el=e,this.zone=i,this.cd=a,this.layoutService=s,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Xr.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=$r.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new nl.w,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=d=>d.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${mr()}`}ngOnChanges(e){this.basicUpdate();const{layoutSettings:a}=e;this.setLayout(this.layout),a&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Qp(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=$u.beta(1)),this.zone.run(()=>{this.dims=function Jp({width:n,height:r}){let e=n,i=r;return e=Math.max(0,e),i=Math.max(0,i),{width:Math.floor(e),height:Math.floor(i)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new nl.w;const e=i=>(i.meta||(i.meta={}),i.id||(i.id=mr()),i.dimension?i.meta.forceDimensions=void 0===i.meta.forceDimensions||i.meta.forceDimensions:(i.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},i.meta.forceDimensions=!1),i.position={x:0,y:0},i.data=i.data?i.data:{},i);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(i=>(i.id||(i.id=mr()),i)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),i=e instanceof il.y?e:(0,rl.of)(e);this.graphSubscription.add(i.subscribe(a=>{this.graph=a,this.tick()})),0!==this.graph.nodes.length&&i.pipe((0,Df.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(s=>{s.transform=`translate(${s.position.x-s.dimension.width/2||0}, ${s.position.y-s.dimension.height/2||0})`,s.data||(s.data={}),s.data.color=this.colors.getColor(this.groupResultsBy(s)),e.add(s.id)});const i=new Set;(this.graph.clusters||[]).map(s=>{s.transform=`translate(${s.position.x-s.dimension.width/2||0}, ${s.position.y-s.dimension.height/2||0})`,s.data||(s.data={}),s.data.color=this.colors.getColor(this.groupResultsBy(s)),i.add(s.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=i},500);const a=[];for(const s in this.graph.edgeLabels){const d=this.graph.edgeLabels[s],T=s.replace(/[^\w-]*/g,""),E=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let F=this._oldLinks.find(E?Rt=>`${Rt.source}${Rt.target}${Rt.id}`===T:Rt=>`${Rt.source}${Rt.target}`===T);const W=this.graph.edges.find(E?Rt=>`${Rt.source}${Rt.target}${Rt.id}`===T:Rt=>`${Rt.source}${Rt.target}`===T);F?F.data&&W&&W.data&&JSON.stringify(F.data)!==JSON.stringify(W.data)&&(F.data=W.data):F=W||d,F.oldLine=F.line;const lt=d.points,st=this.generateLine(lt),vt=Object.assign({},F);vt.line=st,vt.points=lt,this.updateMidpointOnEdge(vt,lt);const Mt=lt[Math.floor(lt.length/2)];Mt&&(vt.textTransform=`translate(${Mt.x||0},${Mt.y||0})`),vt.textAngle=0,vt.oldLine||(vt.oldLine=vt.line),this.calcDominantBaseline(vt),a.push(vt)}this.graph.edges=a,this.graph.edges&&(this._oldLinks=this.graph.edges.map(s=>{const d=Object.assign({},s);return d.oldLine=s.line,d})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case $r.UpperLeft:return"";case $r.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,i=-1/0,a=1/0,s=-1/0;for(let d=0;d<this.graph.nodes.length;d++){const T=this.graph.nodes[d];e=T.position.x<e?T.position.x:e,a=T.position.y<a?T.position.y:a,i=T.position.x+T.dimension.width>i?T.position.x+T.dimension.width:i,s=T.position.y+T.dimension.height>s?T.position.y+T.dimension.height:s}e-=100,a-=100,i+=100,s+=100,this.graphDims.width=i-e,this.graphDims.height=s-a,this.minimapOffsetX=e,this.minimapOffsetY=a}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const i=e.nativeElement,a=this.graph.nodes.find(d=>d.id===i.id);if(!a)return;let s;try{if(s=i.getBBox(),!s.width||!s.height)return}catch(d){return}if(a.dimension.height=this.nodeHeight?a.dimension.height&&a.meta.forceDimensions?a.dimension.height:this.nodeHeight:a.dimension.height&&a.meta.forceDimensions?a.dimension.height:s.height,this.nodeMaxHeight&&(a.dimension.height=Math.max(a.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(a.dimension.height=Math.min(a.dimension.height,this.nodeMinHeight)),this.nodeWidth)a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:this.nodeWidth;else if(i.getElementsByTagName("text").length){let d;try{for(const T of i.getElementsByTagName("text")){const E=T.getBBox();d?(E.width>d.width&&(d.width=E.width),E.height>d.height&&(d.height=E.height)):d=E}}catch(T){return}a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:d.width+20}else a.dimension.width=a.dimension.width&&a.meta.forceDimensions?a.dimension.width:s.width;this.nodeMaxWidth&&(a.dimension.width=Math.max(a.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(a.dimension.width=Math.min(a.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(i=>{const a=this.graph.edges.find(s=>s.id===i.nativeElement.id);a&&(wo(i.nativeElement).select(".line").attr("d",a.oldLine).transition().ease(Io).duration(e?500:0).attr("d",a.line),wo(this.el.nativeElement).select(`#${a.id}`).attr("d",a.oldTextPath).transition().ease(Io).duration(e?500:0).attr("d",a.textPath),this.updateMidpointOnEdge(a,a.points))})}calcDominantBaseline(e){const i=e.points[0],a=e.points[e.points.length-1];e.oldTextPath=e.textPath,a.x<i.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return function th(){var n=qu,r=Ku,e=La(!0),i=null,a=ju,s=null;function d(T){var E,W,st,F=T.length,lt=!1;for(null==i&&(s=a(st=Qu())),E=0;E<=F;++E)!(E<F&&e(W=T[E],E,T))===lt&&((lt=!lt)?s.lineStart():s.lineEnd()),lt&&s.point(+n(W,E,T),+r(W,E,T));if(st)return s=null,st+""||null}return d.x=function(T){return arguments.length?(n="function"==typeof T?T:La(+T),d):n},d.y=function(T){return arguments.length?(r="function"==typeof T?T:La(+T),d):r},d.defined=function(T){return arguments.length?(e="function"==typeof T?T:La(!!T),d):e},d.curve=function(T){return arguments.length?(a=T,null!=i&&(s=a(i)),d):a},d.context=function(T){return arguments.length?(null==T?i=s=null:s=a(i=T),d):i},d}().x(a=>a.x).y(a=>a.y).curve(this.curve)(e)}onZoom(e,i){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const a=1+("in"===i?this.zoomSpeed:-this.zoomSpeed),s=this.zoomLevel*a;if(!(s<=this.minZoomLevel||s>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const d=e.clientX,T=e.clientY,E=this.el.nativeElement.querySelector("svg"),F=E.querySelector("g.chart"),W=E.createSVGPoint();W.x=d,W.y=T;const lt=W.matrixTransform(F.getScreenCTM().inverse());this.pan(lt.x,lt.y,!0),this.zoom(a),this.pan(-lt.x,-lt.y,!0)}else this.zoom(a)}pan(e,i,a=!1){const s=a?1:this.zoomLevel;this.transformationMatrix=ha(this.transformationMatrix,ll(e/s,i/s)),this.updateTransform()}panTo(e,i){null==e||isNaN(e)||null==i||isNaN(i)||(this.transformationMatrix=ha(this.transformationMatrix,ll((-this.panOffsetX-e*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-i*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(e){this.transformationMatrix=ha(this.transformationMatrix,function Rf(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Pf(r)&&(r=n),{a:n,c:0,e:0,b:0,d:r,f:0}}(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const i=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(i,e),i.position.x+=e.movementX/this.zoomLevel,i.position.y+=e.movementY/this.zoomLevel,i.transform=`translate(${i.position.x-i.dimension.width/2}, ${i.position.y-i.dimension.height/2})`;for(const d of this.graph.edges)if((d.target===i.id||d.source===i.id||d.target.id===i.id||d.source.id===i.id)&&this.layout&&"string"!=typeof this.layout){const T=this.layout.updateEdge(this.graph,d),E=T instanceof il.y?T:(0,rl.of)(T);this.graphSubscription.add(E.subscribe(F=>{this.graph=F,this.redrawEdge(d)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const i=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=i}updateTransform(){this.transform=function Bf(n){return function ol(n){return"matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")"}(n)}(function Vf(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(n.a*r)/r,b:Math.round(n.b*r)/r,c:Math.round(n.c*r)/r,d:Math.round(n.d*r)/r,e:Math.round(n.e*r)/r,f:Math.round(n.f*r)/r}}(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const i=this.activeEntries.indexOf(e);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,i)=>-1!==e.indexOf(i)?e:e.concat([i]),[]).sort()}trackLinkBy(e,i){return i.id}trackNodeBy(e,i){return i.id}setColors(){this.colors=new $p(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const i=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,s=i-this._touchLastX,d=a-this._touchLastY;this._touchLastX=i,this._touchLastY=a,this.pan(s,d)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,i){!this.draggingEnabled||(this.isDragging=!0,this.draggingNode=i,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(i,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){this.panTo((e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let a=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);a<this.minZoomLevel&&(a=this.minZoomLevel),a>this.maxZoomLevel&&(a=this.maxZoomLevel),a!==this.zoomLevel&&(this.zoomLevel=a,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const i=this.graph.nodes.find(a=>a.id===e);!i||this.panTo(i.position.x,i.position.y)}panWithConstraints(e,i){let a=i.movementX,s=i.movementY;switch(this.isMinimapPanning&&(a=-this.minimapScaleCoefficient*a*this.zoomLevel,s=-this.minimapScaleCoefficient*s*this.zoomLevel),e){case Xr.Horizontal:this.pan(a,0);break;case Xr.Vertical:this.pan(0,s);break;default:this.pan(a,s)}}updateMidpointOnEdge(e,i){if(e&&i)if(i.length%2==1)e.midPoint=i[Math.floor(i.length/2)];else{const a=i[i.length/2],s=i[i.length/2-1];e.midPoint={x:(a.x+s.x)/2,y:(a.y+s.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,i;const a=this.el.nativeElement;if(null!==a.parentNode){const s=a.parentNode.getBoundingClientRect();e=s.width,i=s.height}return e&&i?{width:e,height:i}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const i=(0,al.R)(window,"resize").pipe((0,fe.b)(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(Al))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-graph"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,Tp,5),t.Suo(a,bp,5),t.Suo(a,Cp,5),t.Suo(a,wp,5),t.Suo(a,Ap,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.linkTemplate=s.first),t.iGM(s=t.CRH())&&(i.nodeTemplate=s.first),t.iGM(s=t.CRH())&&(i.clusterTemplate=s.first),t.iGM(s=t.CRH())&&(i.defsTemplate=s.first),t.iGM(s=t.CRH())&&(i.miniMapNodeTemplate=s.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(Ep,5),t.Gf(Sp,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.nodeElements=a),t.iGM(a=t.CRH())&&(i.linkElements=a)}},hostBindings:function(e,i){1&e&&t.NdJ("mousemove",function(s){return i.onMouseMove(s)},!1,t.evT)("mousedown",function(s){return i.onMouseDown(s)},!1,t.evT)("click",function(s){return i.graphClick(s)},!1,t.evT)("touchmove",function(s){return i.onTouchMove(s)},!1,t.evT)("mouseup",function(s){return i.onMouseUp(s)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:Yp,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(s){return i.onZoom(s,"in")})("mouseWheelDown",function(s){return i.onZoom(s,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,Bp,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,zp,6,15,"g",3),t.qZA(),t.qZA()),2&e&&(t.Udp("width",i.width,"px"),t.Q6J("@animationState","active")("@.disabled",!i.animations),t.xp6(1),t.uIk("width",i.width)("height",i.height),t.xp6(1),t.Q6J("ngIf",i.initialized&&i.graph),t.xp6(1),t.uIk("id",i.minimapClipPathId),t.xp6(1),t.uIk("width",i.graphDims.width/i.minimapScaleCoefficient)("height",i.graphDims.height/i.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",i.showMiniMap))},directives:[im,_.O5,_.tP,_.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,qe.X$)("animationState",[(0,qe.eR)(":enter",[(0,qe.oB)({opacity:0}),(0,qe.jt)("500ms 100ms",(0,qe.oB)({opacity:1}))])])]},changeDetection:0}),(0,Ie.gn)([Xp(500)],n.prototype,"updateMinimap",null),n})(),am=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Al],imports:[[_.ez]]}),n})(),sm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.ez],am]}),n})();var El=o(47429);function Es(n,r,e){n.prototype=r.prototype=e,e.constructor=n}function Sl(n,r){var e=Object.create(n.prototype);for(var i in r)e[i]=r[i];return e}function fa(){}o(52016);var Ga=1/.7,jr="\\s*([+-]?\\d+)\\s*",ma="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cm=/^#([0-9a-f]{3,8})$/,um=new RegExp("^rgb\\("+[jr,jr,jr]+"\\)$"),hm=new RegExp("^rgb\\("+[sr,sr,sr]+"\\)$"),dm=new RegExp("^rgba\\("+[jr,jr,jr,ma]+"\\)$"),fm=new RegExp("^rgba\\("+[sr,sr,sr,ma]+"\\)$"),pm=new RegExp("^hsl\\("+[ma,sr,sr]+"\\)$"),mm=new RegExp("^hsla\\("+[ma,sr,sr,ma]+"\\)$"),Dl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ll(){return this.rgb().formatHex()}function kl(){return this.rgb().formatRgb()}function Fr(n){var r,e;return n=(n+"").trim().toLowerCase(),(r=cm.exec(n))?(e=r[1].length,r=parseInt(r[1],16),6===e?Il(r):3===e?new Wi(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?Va(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?Va(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=um.exec(n))?new Wi(r[1],r[2],r[3],1):(r=hm.exec(n))?new Wi(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=dm.exec(n))?Va(r[1],r[2],r[3],r[4]):(r=fm.exec(n))?Va(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=pm.exec(n))?Nl(r[1],r[2]/100,r[3]/100,1):(r=mm.exec(n))?Nl(r[1],r[2]/100,r[3]/100,r[4]):Dl.hasOwnProperty(n)?Il(Dl[n]):"transparent"===n?new Wi(NaN,NaN,NaN,0):null}function Il(n){return new Wi(n>>16&255,n>>8&255,255&n,1)}function Va(n,r,e,i){return i<=0&&(n=r=e=NaN),new Wi(n,r,e,i)}function _m(n){return n instanceof fa||(n=Fr(n)),n?new Wi((n=n.rgb()).r,n.g,n.b,n.opacity):new Wi}function Ha(n,r,e,i){return 1===arguments.length?_m(n):new Wi(n,r,e,null==i?1:i)}function Wi(n,r,e,i){this.r=+n,this.g=+r,this.b=+e,this.opacity=+i}function Ml(){return"#"+Ss(this.r)+Ss(this.g)+Ss(this.b)}function Ol(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function Ss(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Nl(n,r,e,i){return i<=0?n=r=e=NaN:e<=0||e>=1?n=r=NaN:r<=0&&(n=NaN),new or(n,r,e,i)}function Fl(n){if(n instanceof or)return new or(n.h,n.s,n.l,n.opacity);if(n instanceof fa||(n=Fr(n)),!n)return new or;if(n instanceof or)return n;var r=(n=n.rgb()).r/255,e=n.g/255,i=n.b/255,a=Math.min(r,e,i),s=Math.max(r,e,i),d=NaN,T=s-a,E=(s+a)/2;return T?(d=r===s?(e-i)/T+6*(e<i):e===s?(i-r)/T+2:(r-e)/T+4,T/=E<.5?s+a:2-s-a,d*=60):T=E>0&&E<1?0:d,new or(d,T,E,n.opacity)}function or(n,r,e,i){this.h=+n,this.s=+r,this.l=+e,this.opacity=+i}function Ds(n,r,e){return 255*(n<60?r+(e-r)*n/60:n<180?e:n<240?r+(e-r)*(240-n)/60:r)}function Pl(n,r,e,i,a){var s=n*n,d=s*n;return((1-3*n+3*s-d)*r+(4-6*s+3*d)*e+(1+3*n+3*s-3*d)*i+d*a)/6}Es(fa,Fr,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:Ll,formatHex:Ll,formatHsl:function gm(){return Fl(this).formatHsl()},formatRgb:kl,toString:kl}),Es(Wi,Ha,Sl(fa,{brighter:function(n){return n=null==n?Ga:Math.pow(Ga,n),new Wi(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Wi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ml,formatHex:Ml,formatRgb:Ol,toString:Ol})),Es(or,function vm(n,r,e,i){return 1===arguments.length?Fl(n):new or(n,r,e,null==i?1:i)},Sl(fa,{brighter:function(n){return n=null==n?Ga:Math.pow(Ga,n),new or(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new or(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),r=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*r,a=2*e-i;return new Wi(Ds(n>=240?n-240:n+120,a,i),Ds(n,a,i),Ds(n<120?n+240:n-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));const Ls=n=>()=>n;function Zl(n,r){var e=r-n;return e?function Rl(n,r){return function(e){return n+e*r}}(n,e):Ls(isNaN(n)?r:n)}const za=function n(r){var e=function bm(n){return 1==(n=+n)?Zl:function(r,e){return e-r?function Tm(n,r,e){return n=Math.pow(n,e),r=Math.pow(r,e)-n,e=1/e,function(i){return Math.pow(n+i*r,e)}}(r,e,n):Ls(isNaN(r)?e:r)}}(r);function i(a,s){var d=e((a=Ha(a)).r,(s=Ha(s)).r),T=e(a.g,s.g),E=e(a.b,s.b),F=Zl(a.opacity,s.opacity);return function(W){return a.r=d(W),a.g=T(W),a.b=E(W),a.opacity=F(W),a+""}}return i.gamma=n,i}(1);function Bl(n){return function(r){var d,T,e=r.length,i=new Array(e),a=new Array(e),s=new Array(e);for(d=0;d<e;++d)T=Ha(r[d]),i[d]=T.r||0,a[d]=T.g||0,s[d]=T.b||0;return i=n(i),a=n(a),s=n(s),T.opacity=1,function(E){return T.r=i(E),T.g=a(E),T.b=s(E),T+""}}}function lr(n,r){return n=+n,r=+r,function(e){return n*(1-e)+r*e}}Bl(function xm(n){var r=n.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),a=n[i],s=n[i+1];return Pl((e-i/r)*r,i>0?n[i-1]:2*a-s,a,s,i<r-1?n[i+2]:2*s-a)}}),Bl(function ym(n){var r=n.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*r);return Pl((e-i/r)*r,n[(i+r-1)%r],n[i%r],n[(i+1)%r],n[(i+2)%r])}});var ks=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Is=new RegExp(ks.source,"g");function Gl(n,r){var i,a,s,e=ks.lastIndex=Is.lastIndex=0,d=-1,T=[],E=[];for(n+="",r+="";(i=ks.exec(n))&&(a=Is.exec(r));)(s=a.index)>e&&(s=r.slice(e,s),T[d]?T[d]+=s:T[++d]=s),(i=i[0])===(a=a[0])?T[d]?T[d]+=a:T[++d]=a:(T[++d]=null,E.push({i:d,x:lr(i,a)})),e=Is.lastIndex;return e<r.length&&(s=r.slice(e),T[d]?T[d]+=s:T[++d]=s),T.length<2?E[0]?function Em(n){return function(r){return n(r)+""}}(E[0].x):function Am(n){return function(){return n}}(r):(r=E.length,function(F){for(var lt,W=0;W<r;++W)T[(lt=E[W]).i]=lt.x(F);return T.join("")})}o(29132);var ga=o(37853),Lm=(0,ca.Z)("start","end","cancel","interrupt"),km=[];function Xa(n,r,e,i,a,s){var d=n.__transition;if(d){if(e in d)return}else n.__transition={};!function Im(n,r,e){var a,i=n.__transition;function d(F){var W,lt,st,vt;if(1!==e.state)return E();for(W in i)if((vt=i[W]).name===e.name){if(3===vt.state)return(0,ua.Z)(d);4===vt.state?(vt.state=6,vt.timer.stop(),vt.on.call("interrupt",n,n.__data__,vt.index,vt.group),delete i[W]):+W<r&&(vt.state=6,vt.timer.stop(),vt.on.call("cancel",n,n.__data__,vt.index,vt.group),delete i[W])}if((0,ua.Z)(function(){3===e.state&&(e.state=4,e.timer.restart(T,e.delay,e.time),T(F))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(st=e.tween.length),W=0,lt=-1;W<st;++W)(vt=e.tween[W].value.call(n,n.__data__,e.index,e.group))&&(a[++lt]=vt);a.length=lt+1}}function T(F){for(var W=F<e.duration?e.ease.call(null,F/e.duration):(e.timer.restart(E),e.state=5,1),lt=-1,st=a.length;++lt<st;)a[lt].call(n,W);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),E())}function E(){for(var F in e.state=6,e.timer.stop(),delete i[r],i)return;delete n.__transition}i[r]=e,e.timer=(0,er.HT)(function s(F){e.state=1,e.timer.restart(d,e.delay,e.time),e.delay<=F&&d(F-e.delay)},0,e.time)}(n,e,{name:r,index:i,group:a,on:Lm,tween:km,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function Fs(n,r){var e=rr(n,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function cr(n,r){var e=rr(n,r);if(e.state>3)throw new Error("too late; already running");return e}function rr(n,r){var e=n.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}var $a,Wl=180/Math.PI,Rs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xl(n,r,e,i,a,s){var d,T,E;return(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d),(E=n*e+r*i)&&(e-=n*E,i-=r*E),(T=Math.sqrt(e*e+i*i))&&(e/=T,i/=T,E/=T),n*i<r*e&&(n=-n,r=-r,E=-E,d=-d),{translateX:a,translateY:s,rotate:Math.atan2(r,n)*Wl,skewX:Math.atan(E)*Wl,scaleX:d,scaleY:T}}function $l(n,r,e,i){function a(F){return F.length?F.pop()+" ":""}return function(F,W){var lt=[],st=[];return F=n(F),W=n(W),function s(F,W,lt,st,vt,Mt){if(F!==lt||W!==st){var Rt=vt.push("translate(",null,r,null,e);Mt.push({i:Rt-4,x:lr(F,lt)},{i:Rt-2,x:lr(W,st)})}else(lt||st)&&vt.push("translate("+lt+r+st+e)}(F.translateX,F.translateY,W.translateX,W.translateY,lt,st),function d(F,W,lt,st){F!==W?(F-W>180?W+=360:W-F>180&&(F+=360),st.push({i:lt.push(a(lt)+"rotate(",null,i)-2,x:lr(F,W)})):W&&lt.push(a(lt)+"rotate("+W+i)}(F.rotate,W.rotate,lt,st),function T(F,W,lt,st){F!==W?st.push({i:lt.push(a(lt)+"skewX(",null,i)-2,x:lr(F,W)}):W&&lt.push(a(lt)+"skewX("+W+i)}(F.skewX,W.skewX,lt,st),function E(F,W,lt,st,vt,Mt){if(F!==lt||W!==st){var Rt=vt.push(a(vt)+"scale(",null,",",null,")");Mt.push({i:Rt-4,x:lr(F,lt)},{i:Rt-2,x:lr(W,st)})}else(1!==lt||1!==st)&&vt.push(a(vt)+"scale("+lt+","+st+")")}(F.scaleX,F.scaleY,W.scaleX,W.scaleY,lt,st),F=W=null,function(vt){for(var bt,Mt=-1,Rt=st.length;++Mt<Rt;)lt[(bt=st[Mt]).i]=bt.x(vt);return lt.join("")}}}var Fm=$l(function Om(n){const r=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return r.isIdentity?Rs:Xl(r.a,r.b,r.c,r.d,r.e,r.f)},"px, ","px)","deg)"),Pm=$l(function Nm(n){return null!=n&&($a||($a=document.createElementNS("http://www.w3.org/2000/svg","g")),$a.setAttribute("transform",n),n=$a.transform.baseVal.consolidate())?Xl((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):Rs},", ",")",")"),Jl=o(36175);function Rm(n,r){var e,i;return function(){var a=cr(this,n),s=a.tween;if(s!==e)for(var d=0,T=(i=e=s).length;d<T;++d)if(i[d].name===r){(i=i.slice()).splice(d,1);break}a.tween=i}}function Zm(n,r,e){var i,a;if("function"!=typeof e)throw new Error;return function(){var s=cr(this,n),d=s.tween;if(d!==i){a=(i=d).slice();for(var T={name:r,value:e},E=0,F=a.length;E<F;++E)if(a[E].name===r){a[E]=T;break}E===F&&a.push(T)}s.tween=a}}function Zs(n,r,e){var i=n._id;return n.each(function(){var a=cr(this,i);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return rr(a,i).value[r]}}function Ql(n,r){var e;return("number"==typeof r?lr:r instanceof Fr?za:(e=Fr(r))?(r=e,za):Gl)(n,r)}function Um(n){return function(){this.removeAttribute(n)}}function Gm(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Vm(n,r,e){var i,s,a=e+"";return function(){var d=this.getAttribute(n);return d===a?null:d===i?s:s=r(i=d,e)}}function Hm(n,r,e){var i,s,a=e+"";return function(){var d=this.getAttributeNS(n.space,n.local);return d===a?null:d===i?s:s=r(i=d,e)}}function zm(n,r,e){var i,a,s;return function(){var d,E,T=e(this);return null==T?void this.removeAttribute(n):(d=this.getAttribute(n))===(E=T+"")?null:d===i&&E===a?s:(a=E,s=r(i=d,T))}}function Ym(n,r,e){var i,a,s;return function(){var d,E,T=e(this);return null==T?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local))===(E=T+"")?null:d===i&&E===a?s:(a=E,s=r(i=d,T))}}function Xm(n,r){return function(e){this.setAttribute(n,r.call(this,e))}}function $m(n,r){return function(e){this.setAttributeNS(n.space,n.local,r.call(this,e))}}function Jm(n,r){var e,i;function a(){var s=r.apply(this,arguments);return s!==i&&(e=(i=s)&&$m(n,s)),e}return a._value=r,a}function Qm(n,r){var e,i;function a(){var s=r.apply(this,arguments);return s!==i&&(e=(i=s)&&Xm(n,s)),e}return a._value=r,a}function qm(n,r){return function(){Fs(this,n).delay=+r.apply(this,arguments)}}function Km(n,r){return r=+r,function(){Fs(this,n).delay=r}}function eg(n,r){return function(){cr(this,n).duration=+r.apply(this,arguments)}}function ng(n,r){return r=+r,function(){cr(this,n).duration=r}}function rg(n,r){if("function"!=typeof r)throw new Error;return function(){cr(this,n).ease=r}}var lg=o(97905);function dg(n,r,e){var i,a,s=function hg(n){return(n+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?Fs:cr;return function(){var d=s(this,n),T=d.on;T!==i&&(a=(i=T).copy()).on(r,e),d.on=a}}var gg=o(29742),vg=o(32037),yg=ga.ZP.prototype.constructor,_a=o(24476);function jl(n){return function(){this.style.removeProperty(n)}}function Sg(n,r,e){return function(i){this.style.setProperty(n,r.call(this,i),e)}}function Dg(n,r,e){var i,a;function s(){var d=r.apply(this,arguments);return d!==a&&(i=(a=d)&&Sg(n,d,e)),i}return s._value=r,s}function Og(n){return function(r){this.textContent=n.call(this,r)}}function Ng(n){var r,e;function i(){var a=n.apply(this,arguments);return a!==e&&(r=(e=a)&&Og(a)),r}return i._value=n,i}var Zg=0;function gr(n,r,e,i){this._groups=n,this._parents=r,this._name=e,this._id=i}function ql(){return++Zg}var Pr=ga.ZP.prototype;gr.prototype=function Bg(n){return(0,ga.ZP)().transition(n)}.prototype={constructor:gr,select:function _g(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=(0,gg.Z)(n));for(var i=this._groups,a=i.length,s=new Array(a),d=0;d<a;++d)for(var W,lt,T=i[d],E=T.length,F=s[d]=new Array(E),st=0;st<E;++st)(W=T[st])&&(lt=n.call(W,W.__data__,st,T))&&("__data__"in W&&(lt.__data__=W.__data__),F[st]=lt,Xa(F[st],r,e,st,F,rr(W,e)));return new gr(s,this._parents,r,e)},selectAll:function xg(n){var r=this._name,e=this._id;"function"!=typeof n&&(n=(0,vg.Z)(n));for(var i=this._groups,a=i.length,s=[],d=[],T=0;T<a;++T)for(var W,E=i[T],F=E.length,lt=0;lt<F;++lt)if(W=E[lt]){for(var vt,st=n.call(W,W.__data__,lt,E),Mt=rr(W,e),Rt=0,bt=st.length;Rt<bt;++Rt)(vt=st[Rt])&&Xa(vt,r,e,Rt,st,Mt);s.push(st),d.push(W)}return new gr(s,d,r,e)},filter:function cg(n){"function"!=typeof n&&(n=(0,lg.Z)(n));for(var r=this._groups,e=r.length,i=new Array(e),a=0;a<e;++a)for(var E,s=r[a],d=s.length,T=i[a]=[],F=0;F<d;++F)(E=s[F])&&n.call(E,E.__data__,F,s)&&T.push(E);return new gr(i,this._parents,this._name,this._id)},merge:function ug(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,e=n._groups,i=r.length,s=Math.min(i,e.length),d=new Array(i),T=0;T<s;++T)for(var st,E=r[T],F=e[T],W=E.length,lt=d[T]=new Array(W),vt=0;vt<W;++vt)(st=E[vt]||F[vt])&&(lt[vt]=st);for(;T<i;++T)d[T]=r[T];return new gr(d,this._parents,this._name,this._id)},selection:function Tg(){return new yg(this._groups,this._parents)},transition:function Pg(){for(var n=this._name,r=this._id,e=ql(),i=this._groups,a=i.length,s=0;s<a;++s)for(var E,d=i[s],T=d.length,F=0;F<T;++F)if(E=d[F]){var W=rr(E,r);Xa(E,n,e,F,d,{time:W.time+W.delay+W.duration,delay:0,duration:W.duration,ease:W.ease})}return new gr(i,this._parents,n,e)},call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:function fg(n,r){var e=this._id;return arguments.length<2?rr(this.node(),e).on.on(n):this.each(dg(e,n,r))},attr:function Wm(n,r){var e=(0,Jl.Z)(n),i="transform"===e?Pm:Ql;return this.attrTween(n,"function"==typeof r?(e.local?Ym:zm)(e,i,Zs(this,"attr."+n,r)):null==r?(e.local?Gm:Um)(e):(e.local?Hm:Vm)(e,i,r))},attrTween:function jm(n,r){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var i=(0,Jl.Z)(n);return this.tween(e,(i.local?Jm:Qm)(i,r))},style:function Eg(n,r,e){var i="transform"==(n+="")?Fm:Ql;return null==r?this.styleTween(n,function bg(n,r){var e,i,a;return function(){var s=(0,_a.S)(this,n),d=(this.style.removeProperty(n),(0,_a.S)(this,n));return s===d?null:s===e&&d===i?a:a=r(e=s,i=d)}}(n,i)).on("end.style."+n,jl(n)):"function"==typeof r?this.styleTween(n,function wg(n,r,e){var i,a,s;return function(){var d=(0,_a.S)(this,n),T=e(this),E=T+"";return null==T&&(this.style.removeProperty(n),E=T=(0,_a.S)(this,n)),d===E?null:d===i&&E===a?s:(a=E,s=r(i=d,T))}}(n,i,Zs(this,"style."+n,r))).each(function Ag(n,r){var e,i,a,T,s="style."+r,d="end."+s;return function(){var E=cr(this,n),F=E.on,W=null==E.value[s]?T||(T=jl(r)):void 0;(F!==e||a!==W)&&(i=(e=F).copy()).on(d,a=W),E.on=i}}(this._id,n)):this.styleTween(n,function Cg(n,r,e){var i,s,a=e+"";return function(){var d=(0,_a.S)(this,n);return d===a?null:d===i?s:s=r(i=d,e)}}(n,i,r),e).on("end.style."+n,null)},styleTween:function Lg(n,r,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==r)return this.tween(i,null);if("function"!=typeof r)throw new Error;return this.tween(i,Dg(n,r,null==e?"":e))},text:function Mg(n){return this.tween("text","function"==typeof n?function Ig(n){return function(){var r=n(this);this.textContent=null==r?"":r}}(Zs(this,"text",n)):function kg(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function Fg(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Ng(n))},remove:function mg(){return this.on("end.remove",function pg(n){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==n)return;r&&r.removeChild(this)}}(this._id))},tween:function Bm(n,r){var e=this._id;if(n+="",arguments.length<2){for(var d,i=rr(this.node(),e).tween,a=0,s=i.length;a<s;++a)if((d=i[a]).name===n)return d.value;return null}return this.each((null==r?Rm:Zm)(e,n,r))},delay:function tg(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?qm:Km)(r,n)):rr(this.node(),r).delay},duration:function ig(n){var r=this._id;return arguments.length?this.each(("function"==typeof n?eg:ng)(r,n)):rr(this.node(),r).duration},ease:function ag(n){var r=this._id;return arguments.length?this.each(rg(r,n)):rr(this.node(),r).ease},easeVarying:function og(n){if("function"!=typeof n)throw new Error;return this.each(function sg(n,r){return function(){var e=r.apply(this,arguments);if("function"!=typeof e)throw new Error;cr(this,n).ease=e}}(this._id,n))},end:function Rg(){var n,r,e=this,i=e._id,a=e.size();return new Promise(function(s,d){var T={value:d},E={value:function(){0==--a&&s()}};e.each(function(){var F=cr(this,i),W=F.on;W!==n&&((r=(n=W).copy())._.cancel.push(T),r._.interrupt.push(T),r._.end.push(E)),F.on=r}),0===a&&s()})},[Symbol.iterator]:Pr[Symbol.iterator]};var Ug={time:null,delay:0,duration:250,ease:el.tw};function Gg(n,r){for(var e;!(e=n.__transition)||!(e=e[r]);)if(!(n=n.parentNode))throw new Error(`transition ${r} not found`);return e}ga.ZP.prototype.interrupt=function Mm(n){return this.each(function(){!function Ps(n,r){var i,a,d,e=n.__transition,s=!0;if(e){for(d in r=null==r?null:r+"",e)(i=e[d]).name===r?(a=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[d]):s=!1;s&&delete n.__transition}}(this,n)})},ga.ZP.prototype.transition=function Vg(n){var r,e;n instanceof gr?(r=n._id,n=n._name):(r=ql(),(e=Ug).time=(0,er.zO)(),n=null==n?null:n+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var E,d=i[s],T=d.length,F=0;F<T;++F)(E=d[F])&&Xa(E,n,r,F,d,e||Gg(E,r));return new gr(i,this._parents,n,r)};Math;function va(n){return{type:n}}function rc(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function Ys(n){let r=n,e=n;function i(d,T,E,F){for(null==E&&(E=0),null==F&&(F=d.length);E<F;){const W=E+F>>>1;e(d[W],T)<0?E=W+1:F=W}return E}return 1===n.length&&(r=(d,T)=>n(d)-T,e=function t_(n){return(r,e)=>rc(n(r),e)}(n)),{left:i,center:function s(d,T,E,F){null==E&&(E=0),null==F&&(F=d.length);const W=i(d,T,E,F-1);return W>E&&r(d[W-1],T)>-r(d[W],T)?W-1:W},right:function a(d,T,E,F){for(null==E&&(E=0),null==F&&(F=d.length);E<F;){const W=E+F>>>1;e(d[W],T)>0?F=W:E=W+1}return E}}}["w","e"].map(va),["n","s"].map(va),["n","w","e","s","nw","ne","sw","se"].map(va);var Ws=Math.sqrt(50),Xs=Math.sqrt(10),$s=Math.sqrt(2);function Js(n,r,e){var i=Math.abs(r-n)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/a;return s>=Ws?a*=10:s>=Xs?a*=5:s>=$s&&(a*=2),r<n?-a:a}const vr=1e3,Qi=6e4,xr=60*Qi,Rr=24*xr,Qs=7*Rr,sc=30*Rr,js=365*Rr;var qs=new Date,Ks=new Date;function Ei(n,r,e,i){function a(s){return n(s=0===arguments.length?new Date:new Date(+s)),s}return a.floor=function(s){return n(s=new Date(+s)),s},a.ceil=function(s){return n(s=new Date(s-1)),r(s,1),n(s),s},a.round=function(s){var d=a(s),T=a.ceil(s);return s-d<T-s?d:T},a.offset=function(s,d){return r(s=new Date(+s),null==d?1:Math.floor(d)),s},a.range=function(s,d,T){var F,E=[];if(s=a.ceil(s),T=null==T?1:Math.floor(T),!(s<d&&T>0))return E;do{E.push(F=new Date(+s)),r(s,T),n(s)}while(F<s&&s<d);return E},a.filter=function(s){return Ei(function(d){if(d>=d)for(;n(d),!s(d);)d.setTime(d-1)},function(d,T){if(d>=d)if(T<0)for(;++T<=0;)for(;r(d,-1),!s(d););else for(;--T>=0;)for(;r(d,1),!s(d););})},e&&(a.count=function(s,d){return qs.setTime(+s),Ks.setTime(+d),n(qs),n(Ks),Math.floor(e(qs,Ks))},a.every=function(s){return s=Math.floor(s),isFinite(s)&&s>0?s>1?a.filter(i?function(d){return i(d)%s==0}:function(d){return a.count(0,d)%s==0}):a:null}),a}var ja=Ei(function(){},function(n,r){n.setTime(+n+r)},function(n,r){return r-n});ja.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?Ei(function(r){r.setTime(Math.floor(r/n)*n)},function(r,e){r.setTime(+r+e*n)},function(r,e){return(e-r)/n}):ja:null};const n_=ja;const xa=Ei(function(n){n.setTime(n-n.getMilliseconds())},function(n,r){n.setTime(+n+r*vr)},function(n,r){return(r-n)/vr},function(n){return n.getUTCSeconds()});const cc=Ei(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*vr)},function(n,r){n.setTime(+n+r*Qi)},function(n,r){return(r-n)/Qi},function(n){return n.getMinutes()});const hc=Ei(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*vr-n.getMinutes()*Qi)},function(n,r){n.setTime(+n+r*xr)},function(n,r){return(r-n)/xr},function(n){return n.getHours()});const fc=Ei(n=>n.setHours(0,0,0,0),(n,r)=>n.setDate(n.getDate()+r),(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*Qi)/Rr,n=>n.getDate()-1);function Zr(n){return Ei(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*Qi)/Qs})}var to=Zr(0);const mc=(Zr(1),Zr(2),Zr(3),Zr(4),Zr(5),Zr(6),Ei(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,r){n.setMonth(n.getMonth()+r)},function(n,r){return r.getMonth()-n.getMonth()+12*(r.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}));var eo=Ei(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,r){n.setFullYear(n.getFullYear()+r)},function(n,r){return r.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});eo.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ei(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*n)}):null};const gc=eo;const c_=Ei(function(n){n.setUTCSeconds(0,0)},function(n,r){n.setTime(+n+r*Qi)},function(n,r){return(r-n)/Qi},function(n){return n.getUTCMinutes()});const u_=Ei(function(n){n.setUTCMinutes(0,0,0)},function(n,r){n.setTime(+n+r*xr)},function(n,r){return(r-n)/xr},function(n){return n.getUTCHours()});const h_=Ei(function(n){n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCDate(n.getUTCDate()+r)},function(n,r){return(r-n)/Rr},function(n){return n.getUTCDate()-1});function Br(n){return Ei(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-n)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/Qs})}var yc=Br(0);const v_=(Br(1),Br(2),Br(3),Br(4),Br(5),Br(6),Ei(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCMonth(n.getUTCMonth()+r)},function(n,r){return r.getUTCMonth()-n.getUTCMonth()+12*(r.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}));var no=Ei(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r)},function(n,r){return r.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});no.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ei(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/n)*n),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*n)}):null};const x_=no;function bc(n,r,e,i,a,s){const d=[[xa,1,vr],[xa,5,5e3],[xa,15,15e3],[xa,30,3e4],[s,1,Qi],[s,5,5*Qi],[s,15,15*Qi],[s,30,30*Qi],[a,1,xr],[a,3,3*xr],[a,6,6*xr],[a,12,12*xr],[i,1,Rr],[i,2,2*Rr],[e,1,Qs],[r,1,sc],[r,3,3*sc],[n,1,js]];function E(F,W,lt){const st=Math.abs(W-F)/lt,vt=Ys(([,,bt])=>bt).right(d,st);if(vt===d.length)return n.every(Js(F/js,W/js,lt));if(0===vt)return n_.every(Math.max(Js(F,W,lt),1));const[Mt,Rt]=d[st/d[vt-1][2]<d[vt][2]/st?vt-1:vt];return Mt.every(Rt)}return[function T(F,W,lt){const st=W<F;st&&([F,W]=[W,F]);const vt=lt&&"function"==typeof lt.range?lt:E(F,W,lt),Mt=vt?vt.range(F,+W+1):[];return st?Mt.reverse():Mt},E]}const[HC,zC]=bc(x_,v_,yc,h_,u_,c_),[y_,T_]=bc(gc,mc,to,fc,hc,cc);var io=new Date,ro=new Date;function yr(n,r,e,i){function a(s){return n(s=0===arguments.length?new Date:new Date(+s)),s}return a.floor=function(s){return n(s=new Date(+s)),s},a.ceil=function(s){return n(s=new Date(s-1)),r(s,1),n(s),s},a.round=function(s){var d=a(s),T=a.ceil(s);return s-d<T-s?d:T},a.offset=function(s,d){return r(s=new Date(+s),null==d?1:Math.floor(d)),s},a.range=function(s,d,T){var F,E=[];if(s=a.ceil(s),T=null==T?1:Math.floor(T),!(s<d&&T>0))return E;do{E.push(F=new Date(+s)),r(s,T),n(s)}while(F<s&&s<d);return E},a.filter=function(s){return yr(function(d){if(d>=d)for(;n(d),!s(d);)d.setTime(d-1)},function(d,T){if(d>=d)if(T<0)for(;++T<=0;)for(;r(d,-1),!s(d););else for(;--T>=0;)for(;r(d,1),!s(d););})},e&&(a.count=function(s,d){return io.setTime(+s),ro.setTime(+d),n(io),n(ro),Math.floor(e(io,ro))},a.every=function(s){return s=Math.floor(s),isFinite(s)&&s>0?s>1?a.filter(i?function(d){return i(d)%s==0}:function(d){return a.count(0,d)%s==0}):a:null}),a}var Ac=6048e5;function Ur(n){return yr(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-n)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/Ac})}var Ec=Ur(0),qa=Ur(1),Ka=(Ur(2),Ur(3),Ur(4));const Dc=(Ur(5),Ur(6),yr(function(n){n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCDate(n.getUTCDate()+r)},function(n,r){return(r-n)/864e5},function(n){return n.getUTCDate()-1}));function Gr(n){return yr(function(r){r.setDate(r.getDate()-(r.getDay()+7-n)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-6e4*(e.getTimezoneOffset()-r.getTimezoneOffset()))/Ac})}var Lc=Gr(0),ts=Gr(1),es=(Gr(2),Gr(3),Gr(4));const Ic=(Gr(5),Gr(6),yr(function(n){n.setHours(0,0,0,0)},function(n,r){n.setDate(n.getDate()+r)},function(n,r){return(r-n-6e4*(r.getTimezoneOffset()-n.getTimezoneOffset()))/864e5},function(n){return n.getDate()-1}));var ao=yr(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,r){n.setFullYear(n.getFullYear()+r)},function(n,r){return r.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});ao.every=function(n){return isFinite(n=Math.floor(n))&&n>0?yr(function(r){r.setFullYear(Math.floor(r.getFullYear()/n)*n),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*n)}):null};const ya=ao;var so=yr(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,r){n.setUTCFullYear(n.getUTCFullYear()+r)},function(n,r){return r.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});so.every=function(n){return isFinite(n=Math.floor(n))&&n>0?yr(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/n)*n),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*n)}):null};const Ta=so;function oo(n){if(0<=n.y&&n.y<100){var r=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return r.setFullYear(n.y),r}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function lo(n){if(0<=n.y&&n.y<100){var r=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return r.setUTCFullYear(n.y),r}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function ba(n,r,e){return{y:n,m:r,d:e,H:0,M:0,S:0,L:0}}var Mc={"-":"",_:" ",0:"0"},Si=/^\s*\d+/,I_=/^%/,M_=/[\\^$*+?|[\]().{}]/g;function Gn(n,r,e){var i=n<0?"-":"",a=(i?-n:n)+"",s=a.length;return i+(s<e?new Array(e-s+1).join(r)+a:a)}function O_(n){return n.replace(M_,"\\$&")}function Ca(n){return new RegExp("^(?:"+n.map(O_).join("|")+")","i")}function wa(n){for(var r={},e=-1,i=n.length;++e<i;)r[n[e].toLowerCase()]=e;return r}function N_(n,r,e){var i=Si.exec(r.slice(e,e+1));return i?(n.w=+i[0],e+i[0].length):-1}function F_(n,r,e){var i=Si.exec(r.slice(e,e+1));return i?(n.u=+i[0],e+i[0].length):-1}function P_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.U=+i[0],e+i[0].length):-1}function R_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.V=+i[0],e+i[0].length):-1}function Z_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.W=+i[0],e+i[0].length):-1}function B_(n,r,e){var i=Si.exec(r.slice(e,e+4));return i?(n.y=+i[0],e+i[0].length):-1}function U_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function G_(n,r,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function V_(n,r,e){var i=Si.exec(r.slice(e,e+1));return i?(n.q=3*i[0]-3,e+i[0].length):-1}function H_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.m=i[0]-1,e+i[0].length):-1}function Oc(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.d=+i[0],e+i[0].length):-1}function z_(n,r,e){var i=Si.exec(r.slice(e,e+3));return i?(n.m=0,n.d=+i[0],e+i[0].length):-1}function Nc(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.H=+i[0],e+i[0].length):-1}function Y_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.M=+i[0],e+i[0].length):-1}function W_(n,r,e){var i=Si.exec(r.slice(e,e+2));return i?(n.S=+i[0],e+i[0].length):-1}function X_(n,r,e){var i=Si.exec(r.slice(e,e+3));return i?(n.L=+i[0],e+i[0].length):-1}function $_(n,r,e){var i=Si.exec(r.slice(e,e+6));return i?(n.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function J_(n,r,e){var i=I_.exec(r.slice(e,e+1));return i?e+i[0].length:-1}function Q_(n,r,e){var i=Si.exec(r.slice(e));return i?(n.Q=+i[0],e+i[0].length):-1}function j_(n,r,e){var i=Si.exec(r.slice(e));return i?(n.s=+i[0],e+i[0].length):-1}function Fc(n,r){return Gn(n.getDate(),r,2)}function q_(n,r){return Gn(n.getHours(),r,2)}function K_(n,r){return Gn(n.getHours()%12||12,r,2)}function tv(n,r){return Gn(1+Ic.count(ya(n),n),r,3)}function Pc(n,r){return Gn(n.getMilliseconds(),r,3)}function ev(n,r){return Pc(n,r)+"000"}function nv(n,r){return Gn(n.getMonth()+1,r,2)}function iv(n,r){return Gn(n.getMinutes(),r,2)}function rv(n,r){return Gn(n.getSeconds(),r,2)}function av(n){var r=n.getDay();return 0===r?7:r}function sv(n,r){return Gn(Lc.count(ya(n)-1,n),r,2)}function ov(n,r){var e=n.getDay();return n=e>=4||0===e?es(n):es.ceil(n),Gn(es.count(ya(n),n)+(4===ya(n).getDay()),r,2)}function lv(n){return n.getDay()}function cv(n,r){return Gn(ts.count(ya(n)-1,n),r,2)}function uv(n,r){return Gn(n.getFullYear()%100,r,2)}function hv(n,r){return Gn(n.getFullYear()%1e4,r,4)}function dv(n){var r=n.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Gn(r/60|0,"0",2)+Gn(r%60,"0",2)}function Rc(n,r){return Gn(n.getUTCDate(),r,2)}function fv(n,r){return Gn(n.getUTCHours(),r,2)}function pv(n,r){return Gn(n.getUTCHours()%12||12,r,2)}function mv(n,r){return Gn(1+Dc.count(Ta(n),n),r,3)}function Zc(n,r){return Gn(n.getUTCMilliseconds(),r,3)}function gv(n,r){return Zc(n,r)+"000"}function _v(n,r){return Gn(n.getUTCMonth()+1,r,2)}function vv(n,r){return Gn(n.getUTCMinutes(),r,2)}function xv(n,r){return Gn(n.getUTCSeconds(),r,2)}function yv(n){var r=n.getUTCDay();return 0===r?7:r}function Tv(n,r){return Gn(Ec.count(Ta(n)-1,n),r,2)}function bv(n,r){var e=n.getUTCDay();return n=e>=4||0===e?Ka(n):Ka.ceil(n),Gn(Ka.count(Ta(n),n)+(4===Ta(n).getUTCDay()),r,2)}function Cv(n){return n.getUTCDay()}function wv(n,r){return Gn(qa.count(Ta(n)-1,n),r,2)}function Av(n,r){return Gn(n.getUTCFullYear()%100,r,2)}function Ev(n,r){return Gn(n.getUTCFullYear()%1e4,r,4)}function Sv(){return"+0000"}function Bc(){return"%"}function Uc(n){return+n}function Gc(n){return Math.floor(+n/1e3)}!function Iv(n){(function k_(n){var r=n.dateTime,e=n.date,i=n.time,a=n.periods,s=n.days,d=n.shortDays,T=n.months,E=n.shortMonths,F=Ca(a),W=wa(a),lt=Ca(s),st=wa(s),vt=Ca(d),Mt=wa(d),Rt=Ca(T),bt=wa(T),$t=Ca(E),ie=wa(E),Kt={a:function bi(we){return d[we.getDay()]},A:function dr(we){return s[we.getDay()]},b:function Ci(we){return E[we.getMonth()]},B:function wi(we){return T[we.getMonth()]},c:null,d:Fc,e:Fc,f:ev,H:q_,I:K_,j:tv,L:Pc,m:nv,M:iv,p:function oi(we){return a[+(we.getHours()>=12)]},q:function li(we){return 1+~~(we.getMonth()/3)},Q:Uc,s:Gc,S:rv,u:av,U:sv,V:ov,w:lv,W:cv,x:null,X:null,y:uv,Y:hv,Z:dv,"%":Bc},Ae={a:function Aa(we){return d[we.getUTCDay()]},A:function aa(we){return s[we.getUTCDay()]},b:function sa(we){return E[we.getUTCMonth()]},B:function oa(we){return T[we.getUTCMonth()]},c:null,d:Rc,e:Rc,f:gv,H:fv,I:pv,j:mv,L:Zc,m:_v,M:vv,p:function Pi(we){return a[+(we.getUTCHours()>=12)]},q:function os(we){return 1+~~(we.getUTCMonth()/3)},Q:Uc,s:Gc,S:xv,u:yv,U:Tv,V:bv,w:Cv,W:wv,x:null,X:null,y:Av,Y:Ev,Z:Sv,"%":Bc},Ne={a:function Vn(we,ln,An){var he=vt.exec(ln.slice(An));return he?(we.w=Mt[he[0].toLowerCase()],An+he[0].length):-1},A:function Hn(we,ln,An){var he=lt.exec(ln.slice(An));return he?(we.w=st[he[0].toLowerCase()],An+he[0].length):-1},b:function mi(we,ln,An){var he=$t.exec(ln.slice(An));return he?(we.m=ie[he[0].toLowerCase()],An+he[0].length):-1},B:function xi(we,ln,An){var he=Rt.exec(ln.slice(An));return he?(we.m=bt[he[0].toLowerCase()],An+he[0].length):-1},c:function yi(we,ln,An){return yn(we,r,ln,An)},d:Oc,e:Oc,f:$_,H:Nc,I:Nc,j:z_,L:X_,m:H_,M:Y_,p:function Sn(we,ln,An){var he=F.exec(ln.slice(An));return he?(we.p=W[he[0].toLowerCase()],An+he[0].length):-1},q:V_,Q:Q_,s:j_,S:W_,u:F_,U:P_,V:R_,w:N_,W:Z_,x:function hr(we,ln,An){return yn(we,e,ln,An)},X:function Ti(we,ln,An){return yn(we,i,ln,An)},y:U_,Y:B_,Z:G_,"%":J_};function Ce(we,ln){return function(An){var Vi,en,ai,he=[],ri=-1,Pn=0,Gi=we.length;for(An instanceof Date||(An=new Date(+An));++ri<Gi;)37===we.charCodeAt(ri)&&(he.push(we.slice(Pn,ri)),null!=(en=Mc[Vi=we.charAt(++ri)])?Vi=we.charAt(++ri):en="e"===Vi?" ":"0",(ai=ln[Vi])&&(Vi=ai(An,en)),he.push(Vi),Pn=ri+1);return he.push(we.slice(Pn,ri)),he.join("")}}function dn(we,ln){return function(An){var Pn,Gi,he=ba(1900,void 0,1);if(yn(he,we,An+="",0)!=An.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(1e3*he.s+("L"in he?he.L:0));if(ln&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+12*he.p),void 0===he.m&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Gi=(Pn=lo(ba(he.y,0,1))).getUTCDay(),Pn=Gi>4||0===Gi?qa.ceil(Pn):qa(Pn),Pn=Dc.offset(Pn,7*(he.V-1)),he.y=Pn.getUTCFullYear(),he.m=Pn.getUTCMonth(),he.d=Pn.getUTCDate()+(he.w+6)%7):(Gi=(Pn=oo(ba(he.y,0,1))).getDay(),Pn=Gi>4||0===Gi?ts.ceil(Pn):ts(Pn),Pn=Ic.offset(Pn,7*(he.V-1)),he.y=Pn.getFullYear(),he.m=Pn.getMonth(),he.d=Pn.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),Gi="Z"in he?lo(ba(he.y,0,1)).getUTCDay():oo(ba(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+7*he.W-(Gi+5)%7:he.w+7*he.U-(Gi+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,lo(he)):oo(he)}}function yn(we,ln,An,he){for(var Vi,en,ri=0,Pn=ln.length,Gi=An.length;ri<Pn;){if(he>=Gi)return-1;if(37===(Vi=ln.charCodeAt(ri++))){if(Vi=ln.charAt(ri++),!(en=Ne[Vi in Mc?ln.charAt(ri++):Vi])||(he=en(we,An,he))<0)return-1}else if(Vi!=An.charCodeAt(he++))return-1}return he}return Kt.x=Ce(e,Kt),Kt.X=Ce(i,Kt),Kt.c=Ce(r,Kt),Ae.x=Ce(e,Ae),Ae.X=Ce(i,Ae),Ae.c=Ce(r,Ae),{format:function(we){var ln=Ce(we+="",Kt);return ln.toString=function(){return we},ln},parse:function(we){var ln=dn(we+="",!1);return ln.toString=function(){return we},ln},utcFormat:function(we){var ln=Ce(we+="",Ae);return ln.toString=function(){return we},ln},utcParse:function(we){var ln=dn(we+="",!0);return ln.toString=function(){return we},ln}}})(n)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ys(rc),Ys(function Mv(n){return null===n?NaN:+n}),o(47927),o(32517),o(38914),o(22910),o(65142),o(78986),o(16087);const s0=["caretElm"];function o0(n,r){}const l0=function(n){return{model:n}};function c0(n,r){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,o0,0,0,"ng-template",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(2,l0,e.context))}}function u0(n,r){if(1&n&&t._UZ(0,"span",6),2&n){const e=t.oxw();t.Q6J("innerHTML",e.title,t.oJD)}}function mx(n,r,e){e=e||{};let i,a,s,d=null,T=0;function E(){T=!1===e.leading?0:+new Date,d=null,s=n.apply(i,a)}return function(){const F=+new Date;!T&&!1===e.leading&&(T=F);const W=r-(F-T);return i=this,a=arguments,W<=0?(clearTimeout(d),d=null,T=F,s=n.apply(i,a)):!d&&!1!==e.trailing&&(d=setTimeout(E,W)),s}}function gx(n,r){return function(i,a,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:s.enumerable,value:mx(s.value,n,r)}),this[a]}}}}var mn=(()=>{return(n=mn||(mn={})).Top="top",n.Bottom="bottom",n.Left="left",n.Right="right",n.Center="center",mn;var n})();function tu(n,r,e){return e===mn.Top?n.top-7:e===mn.Bottom?n.top+n.height-r.height+7:e===mn.Center?n.top+n.height/2-r.height/2:void 0}function eu(n,r,e){return e===mn.Left?n.left-7:e===mn.Right?n.left+n.width-r.width+7:e===mn.Center?n.left+n.width/2-r.width/2:void 0}class Xi{static calculateVerticalAlignment(r,e,i){let a=tu(r,e,i);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(r,e,i,a){let s;a===mn.Top&&(s=r.height/2-i.height/2+7),a===mn.Bottom&&(s=e.height-r.height/2-i.height/2-7),a===mn.Center&&(s=e.height/2-i.height/2);const d=tu(r,e,a);return d+e.height>window.innerHeight&&(s+=d+e.height-window.innerHeight),s}static calculateHorizontalAlignment(r,e,i){let a=eu(r,e,i);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(r,e,i,a){let s;a===mn.Left&&(s=r.width/2-i.width/2+7),a===mn.Right&&(s=e.width-r.width/2-i.width/2-7),a===mn.Center&&(s=e.width/2-i.width/2);const d=eu(r,e,a);return d+e.width>window.innerWidth&&(s+=d+e.width-window.innerWidth),s}static shouldFlip(r,e,i,a){let s=!1;return i===mn.Right&&r.left+r.width+e.width+a>window.innerWidth&&(s=!0),i===mn.Left&&r.left-e.width-a<0&&(s=!0),i===mn.Top&&r.top-e.height-a<0&&(s=!0),i===mn.Bottom&&r.top+r.height+e.height+a>window.innerHeight&&(s=!0),s}static positionCaret(r,e,i,a,s){let d=0,T=0;return r===mn.Right?(T=-7,d=Xi.calculateVerticalCaret(i,e,a,s)):r===mn.Left?(T=e.width,d=Xi.calculateVerticalCaret(i,e,a,s)):r===mn.Top?(d=e.height,T=Xi.calculateHorizontalCaret(i,e,a,s)):r===mn.Bottom&&(d=-7,T=Xi.calculateHorizontalCaret(i,e,a,s)),{top:d,left:T}}static positionContent(r,e,i,a,s){let d=0,T=0;return r===mn.Right?(T=i.left+i.width+a,d=Xi.calculateVerticalAlignment(i,e,s)):r===mn.Left?(T=i.left-e.width-a,d=Xi.calculateVerticalAlignment(i,e,s)):r===mn.Top?(d=i.top-e.height-a,T=Xi.calculateHorizontalAlignment(i,e,s)):r===mn.Bottom&&(d=i.top+i.height+a,T=Xi.calculateHorizontalAlignment(i,e,s)),{top:d,left:T}}static determinePlacement(r,e,i,a){if(Xi.shouldFlip(i,e,r,a)){if(r===mn.Right)return mn.Left;if(r===mn.Left)return mn.Right;if(r===mn.Top)return mn.Bottom;if(r===mn.Bottom)return mn.Top}return r}}let _x=(()=>{class n{constructor(e,i,a){this.element=e,this.renderer=i,this.platformId=a}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,_.NF)(this.platformId))return;const e=this.element.nativeElement,i=this.host.nativeElement.getBoundingClientRect();if(!i.height&&!i.width)return;const a=e.getBoundingClientRect();this.checkFlip(i,a),this.positionContent(e,i,a),this.showCaret&&this.positionCaret(i,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,i,a){const{top:s,left:d}=Xi.positionContent(this.placement,a,i,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${s}px`),this.renderer.setStyle(e,"left",`${d}px`)}positionCaret(e,i){const a=this.caretElm.nativeElement,s=a.getBoundingClientRect(),{top:d,left:T}=Xi.positionCaret(this.placement,i,e,s,this.alignment);this.renderer.setStyle(a,"top",`${d}px`),this.renderer.setStyle(a,"left",`${T}px`)}checkFlip(e,i){this.placement=Xi.determinePlacement(this.placement,i,e,this.spacing)}onWindowResize(){this.position()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.Lbi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,i){if(1&e&&t.Gf(s0,5),2&e){let a;t.iGM(a=t.CRH())&&(i.caretElm=a.first)}},hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onWindowResize()},!1,t.Jf7),2&e&&t.Tol(i.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",0,1),t.TgZ(3,"div",2),t.YNc(4,c0,2,4,"span",3),t.YNc(5,u0,1,1,"span",4),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Gre("tooltip-caret position-",i.placement,""),t.Q6J("hidden",!i.showCaret),t.xp6(3),t.Q6J("ngIf",!i.title),t.xp6(1),t.Q6J("ngIf",i.title))},directives:[_.O5,_.tP],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,Ie.gn)([gx(100)],n.prototype,"onWindowResize",null),n})(),nu=(()=>{class n{constructor(e,i,a){this.applicationRef=e,this.componentFactoryResolver=i,this.injector=a}static setGlobalRootViewContainer(e){n.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(n.globalRootViewContainer)return n.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function xx(n){return n.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,i){if(i){if(void 0!==i.inputs){const a=Object.getOwnPropertyNames(i.inputs);for(const s of a)e.instance[s]=i.inputs[s]}if(void 0!==i.outputs){const a=Object.getOwnPropertyNames(i.outputs);for(const s of a)e.instance[s]=i.outputs[s]}}return e}appendComponent(e,i={},a){a||(a=this.getRootViewContainer());const s=this.getComponentRootNode(a),d=new El.u0(s,this.componentFactoryResolver,this.applicationRef,this.injector),T=new El.C5(e),E=d.attach(T);return this.projectComponentBindings(E,i),E}}return n.globalRootViewContainer=null,n.\u0275fac=function(e){return new(e||n)(t.LFG(t.z2F),t.LFG(t._Vd),t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),ho=(()=>{class n extends class vx{constructor(r){this.injectionService=r,this.defaults={},this.components=new Map}getByType(r=this.type){return this.components.get(r)}create(r){return this.createByType(this.type,r)}createByType(r,e){e=this.assignDefaults(e);const i=this.injectComponent(r,e);return this.register(r,i),i}destroy(r){const e=this.components.get(r.componentType);if(e&&e.length){const i=e.indexOf(r);i>-1&&(e[i].destroy(),e.splice(i,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(r){const e=this.components.get(r);if(e&&e.length){let i=e.length-1;for(;i>=0;)this.destroy(e[i--])}}injectComponent(r,e){return this.injectionService.appendComponent(r,e)}assignDefaults(r){const e=Object.assign({},this.defaults.inputs),i=Object.assign({},this.defaults.outputs);return!r.inputs&&!r.outputs&&(r={inputs:r}),e&&(r.inputs=Object.assign(Object.assign({},e),r.inputs)),i&&(r.outputs=Object.assign(Object.assign({},i),r.outputs)),r}register(r,e){this.components.has(r)||this.components.set(r,[]),this.components.get(r).push(e)}}{constructor(e){super(e),this.type=_x}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(nu))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),lu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.ez]]}),n})();var na=(()=>{return(n=na||(na={})).popover="popover",n.tooltip="tooltip",na;var n})(),Er=(()=>{return(n=Er||(Er={}))[n.all="all"]="all",n[n.focus="focus"]="focus",n[n.mouseover="mouseover"]="mouseover",Er;var n})();let go,po=(()=>{class n{constructor(e,i,a){this.tooltipService=e,this.viewContainerRef=i,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=mn.Top,this.tooltipAlignment=mn.Center,this.tooltipType=na.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Er.all,this.tooltipImmediateExit=!1,this.show=new t.vpe,this.hide=new t.vpe}get listensForFocus(){return this.tooltipShowEvent===Er.all||this.tooltipShowEvent===Er.focus}get listensForHover(){return this.tooltipShowEvent===Er.all||this.tooltipShowEvent===Er.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const i=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?300:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},i)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",i=>{e.contains(i.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const i=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?i():this.timeout=setTimeout(i,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ho),t.Y36(t.s_b),t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,i){1&e&&t.NdJ("focusin",function(){return i.onFocus()})("blur",function(){return i.onBlur()})("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(s){return i.onMouseLeave(s.target)})("click",function(){return i.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),n})(),cu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[nu,ho],imports:[[_.ez]]}),n})();"undefined"!=typeof window?go=window:"undefined"!=typeof global&&(go=global);let ji=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.ez,lu,cu],_.ez,lu,cu]}),n})(),Ix=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),_u=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),Mx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),Ox=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),Nx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),vu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})();Math;let vo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),Rx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji,vo,vu]]}),n})(),Bx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),Ux=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji]]}),n})(),Gx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ji,vo,_u]]}),n})(),Hx=(()=>{class n{constructor(){!function Vx(){"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[ji,Ix,_u,Mx,Ox,Nx,vu,Rx,Bx,vo,Ux,Gx]}),n})();function zx(n,r){1&n&&(t.TgZ(0,"div"),t._UZ(1,"mat-spinner",3),t.qZA())}function Yx(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function Wx(n,r){1&n&&(t.O4$(),t.TgZ(0,"marker",10),t._UZ(1,"path",11),t.qZA())}function Xx(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",12),t._UZ(1,"rect"),t.TgZ(2,"text",13),t._uU(3),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.Q6J("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",e.tooltip),t.xp6(1),t.uIk("width",e.dimension.width)("height",e.dimension.height)("fill",e.color),t.xp6(1),t.uIk("x",10)("y",e.dimension.height/2),t.xp6(1),t.hij(" ",e.label," ")}}function $x(n,r){if(1&n&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16),t.TgZ(3,"textPath",17),t._uU(4),t.qZA(),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.xp6(3),t.uIk("href","#"+e.id),t.xp6(1),t.hij(" ",e.label," ")}}const Jx=function(n,r){return[n,r]};function Qx(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.YNc(9,Yx,5,4,"span",4),t.TgZ(10,"div",5),t.TgZ(11,"ngx-graph",6),t.YNc(12,Wx,2,0,"ng-template",null,7,t.W1O),t.YNc(14,Xx,4,9,"ng-template",null,8,t.W1O),t.YNc(16,$x,5,2,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,12,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(6,14,"ADMIN.VISUALIZER.USER_DESTINATION.FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(2),t.Q6J("links",e.hierarchialGraph.links)("nodes",e.hierarchialGraph.nodes)("curve",e.curve)("draggingEnabled",!1)("zoomToFit$",e.zoomToFit$)("view",t.WLB(16,Jx,e.innerWidth,e.innerHeight))}}function jx(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"strong"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_3")," "),t.xp6(3),t.Oqu(e.service)}}function qx(n,r){if(1&n&&(t._uU(0),t.ALo(1,"translate"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.YNc(8,jx,5,4,"span",4),t._uU(9),t.ALo(10,"translate")),2&n){const e=t.oxw(2);t.hij(" ",t.lcZ(1,7,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_1")," "),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.hij(" ",t.lcZ(5,9,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_2")," "),t.xp6(3),t.Oqu(e.destination),t.xp6(1),t.Q6J("ngIf","noService"!==e.service),t.xp6(1),t.hij(" ",t.lcZ(10,11,"ADMIN.VISUALIZER.USER_DESTINATION.NOT_FOUND_4")," ")}}function Kx(n,r){if(1&n&&(t.YNc(0,Qx,18,19,"div",1),t.YNc(1,qx,11,13,"ng-template",null,2,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.isConnected)("ngIfElse",e)}}let ty=(()=>{class n{constructor(e,i,a,s,d,T,E,F,W){this.route=e,this.facilityManager=i,this.userService=a,this.membersService=s,this.serviceService=d,this.resourceManager=T,this.groupService=E,this.voService=F,this.translate=W,this.idCounter=0,this.isConnected=!1,this.loading=!0,this.hierarchialGraph={nodes:[],links:[]},this.curve=kn,this.zoomToFit$=new He.xQ}ngOnInit(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight,this.getLocalizedNames(),this.route.queryParams.subscribe(e=>{console.log(e),this.destination=e.destination,this.service=e.service,this.userService.getUserById(e.user).subscribe(i=>{this.user=i,this.facilityManager.getFacilitiesByDestination(this.destination).subscribe(a=>{this.facilities=a,this.membersService.getMembersByUser(this.user.id).subscribe(s=>{if(this.membership=s,0===this.membership.length||0===this.facilities.length)return this.loading=!1,void(this.isConnected=!1);this.showGraph()})})})})}showGraph(){const e=""+this.id();this.hierarchialGraph.nodes=[...this.hierarchialGraph.nodes,{id:e,label:this.user.firstName+" "+this.user.lastName,tooltip:this.localUser,color:"#FFFFCC",tip:"user: "+this.user.id}];const T=""+this.id(),E="destination no id";this.hierarchialGraph.nodes="noService"===this.service?[...this.hierarchialGraph.nodes,{id:T,label:this.destination,tooltip:this.localDestination+": "+this.destination,color:"#E0E0E0",tip:E}]:[...this.hierarchialGraph.nodes,{id:T,label:this.service+": "+this.destination,tooltip:this.localService+": "+this.service+", "+this.localDestination+": "+this.destination,color:"#E0E0E0",tip:E}];for(const F of this.facilities)this.serviceService.getAllRichDestinationsForFacility(F.id).subscribe(W=>{this.connectToService(F,W),this.delay(2e3).then(()=>{this.zoomToFit$.next(!0),this.loading=!1})})}connectToService(e,i){this.isConnectedToService(i)&&this.facilityManager.getAssignedResourcesForFacility(e.id).subscribe(a=>{for(let s=0;s<this.membership.length;s++)this.connectToGroups(e,this.membership[s],a)})}connectToGroups(e,i,a){this.facilityManager.getAllowedGroups(e.id,i.voId).subscribe(s=>{0!==s.length&&this.groupService.getMemberGroups(i.id).subscribe(d=>{const T=this.findConnectedGroups(s,d);if(0!==T.length)for(const E of T)this.connectToResource(e,E,a)})})}connectToResource(e,i,a){this.resourceManager.getAssignedResourcesWithGroup(i.id).subscribe(s=>{const d=this.findConnectedResources(s,a);for(const T of d)this.resourceManager.getAssignedServicesToResource(T.id).subscribe(E=>{this.haveService(E)&&(this.isConnected=!0,this.addNodesToGraph(i.voId,i,T,e))})})}addNodesToGraph(e,i,a,s){if(-1===this.findEntityInGraph("Facility: "+s.id)){const d=""+this.id();this.hierarchialGraph.nodes=[...this.hierarchialGraph.nodes,{id:d,label:this.localFacility+": "+s.name,tooltip:s.description,color:"#FFCCFF",tip:"Facility: "+s.id}];const lt={source:d,target:this.hierarchialGraph.nodes[this.findEntityInGraph("destination no id")].id};this.hierarchialGraph.links=[...this.hierarchialGraph.links,lt]}this.voService.getVoById(e).subscribe(d=>{if(-1===this.findEntityInGraph("Vo: "+d.id)){const E=""+this.id();this.hierarchialGraph.nodes=[...this.hierarchialGraph.nodes,{id:E,label:this.localVo+": "+d.shortName,tooltip:d.name,color:"#E5FFCC",tip:"Vo: "+d.id}];const vt={source:this.hierarchialGraph.nodes[this.findEntityInGraph("user: "+this.user.id)].id,target:E};this.hierarchialGraph.links=[...this.hierarchialGraph.links,vt]}if(-1===this.findEntityInGraph("Group: "+i.id)){const E=""+this.id();this.hierarchialGraph.nodes=[...this.hierarchialGraph.nodes,{id:E,label:this.localGroup+": "+i.name,tooltip:i.description,color:"#CCE5FF",tip:"Group: "+i.id}];const vt={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Vo: "+d.id)].id,target:E};this.hierarchialGraph.links=[...this.hierarchialGraph.links,vt]}const T=this.findEntityInGraph("Resource: "+a.id);if(-1!==T){const E={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id)].id,target:this.hierarchialGraph.nodes[T].id};this.hierarchialGraph.links=[...this.hierarchialGraph.links,E]}else{const E=""+this.id();this.hierarchialGraph.nodes=[...this.hierarchialGraph.nodes,{id:E,label:this.localResource+": "+a.name,tooltip:a.description,color:"#FFCCCC",tip:"Resource: "+a.id}];const vt={source:this.hierarchialGraph.nodes[this.findEntityInGraph("Group: "+i.id)].id,target:E};this.hierarchialGraph.links=[...this.hierarchialGraph.links,vt];const Mt={source:E,target:this.hierarchialGraph.nodes[this.findEntityInGraph("Facility: "+s.id)].id};this.hierarchialGraph.links=[...this.hierarchialGraph.links,Mt]}})}haveService(e){if("noService"===this.service)return!0;for(const i of e)if(this.service===i.name)return!0;return!1}findConnectedGroups(e,i){const a=[];for(let s=0;s<e.length;s++)for(let d=0;d<i.length;d++)e[s].id===i[d].id&&a.push(e[s]);return a}findConnectedResources(e,i){const a=[];for(let s=0;s<e.length;s++)for(let d=0;d<i.length;d++)e[s].id===i[d].id&&a.push(e[s]);return a}findEntityInGraph(e){for(let i=0;i<this.hierarchialGraph.nodes.length;i++)if(this.hierarchialGraph.nodes[i].tip===e)return i;return-1}isConnectedToService(e){for(const i of e)if(i.destination===this.destination&&(i.service.name===this.service||"noService"===this.service))return!0;return!1}id(){return this.idCounter++,this.idCounter}delay(e){return(0,Ie.mG)(this,void 0,void 0,function*(){yield new Promise(i=>setTimeout(()=>i(),e)).then(()=>console.log("fired"))})}onResize(){this.innerWidth=window.innerWidth<600?window.innerWidth:window.innerWidth-420,this.innerHeight=window.innerHeight}getLocalizedNames(){this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.USER").subscribe(e=>{this.localUser=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.VO").subscribe(e=>{this.localVo=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.GROUP").subscribe(e=>{this.localGroup=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.RESOURCE").subscribe(e=>{this.localResource=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.FACILITY").subscribe(e=>{this.localFacility=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.SERVICE").subscribe(e=>{this.localService=e}),this.translate.get("ADMIN.VISUALIZER.USER_DESTINATION.DESTINATION").subscribe(e=>{this.localDestination=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(H.IQ),t.Y36(H.Fv),t.Y36(H.uq),t.Y36(H.KK),t.Y36(H.xk),t.Y36(H.ff),t.Y36(H.YF),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-destination-graph"]],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(s){return i.onResize(s)},!1,t.Jf7),2&e&&t.ekj("router-component",i.true)},decls:6,vars:5,consts:[[1,"page-subtitle"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"ml-auto","mr-auto"],[4,"ngIf"],[1,"card","w-100","h-100"],[1,"chart-container",3,"links","nodes","curve","draggingEnabled","zoomToFit$","view"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],["ngx-tooltip","",1,"node",3,"tooltipPlacement","tooltipType","tooltipTitle"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","end",1,"edge-label"],["startOffset","60%",2,"fill","#000"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,zx,2,0,"div",1),t.YNc(4,Kx,3,2,"ng-template",null,2,t.W1O)),2&e){const a=t.MAs(5);t.xp6(1),t.hij(" ",t.lcZ(2,3,"ADMIN.VISUALIZER.USER_DESTINATION.TITLE"),"\n"),t.xp6(2),t.Q6J("ngIf",i.loading)("ngIfElse",a)}},directives:[_.O5,tt.$g,rm,po],pipes:[p.X$],styles:[""]}),n})();var ey=o(25828),ny=o(29862),iy=o(31359);function ry(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function ay(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editUser()}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}const sy=function(){return{color:"black"}},oy=function(n){return["/admin/users",n]};function ly(n,r){if(1&n&&(t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6),t.TgZ(4,"div",7),t.TgZ(5,"a",8),t._uU(6),t.ALo(7,"userFullName"),t.qZA(),t.TgZ(8,"span",9),t._uU(9),t.qZA(),t.YNc(10,ay,3,0,"button",10),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",11),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,12,"ADMIN_USER.ENTITY")),t.Q6J("ngStyle",t.DdM(22,sy))("svgIcon",e.svgIcon),t.xp6(4),t.Q6J("routerLink",t.VKq(23,oy,e.user.id)),t.xp6(1),t.hij(" ",t.lcZ(7,14,e.user)," "),t.xp6(3),t.hij(" \xa0#",e.user.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE("",t.lcZ(13,16,"ADMIN_USER.UUID"),": ",e.user.uuid,""),t.xp6(3),t.lnq(" ",t.lcZ(16,18,"ADMIN_USER.ENTITY"),", ",t.lcZ(17,20,"ADMIN_USER.USER_TYPE"),": ",e.getUserType()," ")}}let cy=(()=>{class n{constructor(e,i,a,s,d,T,E){this.route=e,this.usersService=i,this.sideMenuService=a,this.sideMenuItemService=s,this.dialog=d,this.authResolver=T,this.entityStorageService=E,this.loading=!1,this.svgIcon="perun-user-dark"}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{const i=e.userId;this.entityStorageService.setEntity({id:Number(i),beanName:"User"}),this.path=`/admin/users/${i}`,this.regex="/admin/users/\\d+",this.usersService.getUserById(i).subscribe(a=>{this.user=a,this.user.serviceUser&&(this.svgIcon="perun-service-identity");const s=this.sideMenuItemService.parseUser(a,this.path,this.regex);this.sideMenuService.setAdminItems([s]),this.loading=!1},()=>this.loading=!1)})}editUser(){const e=(0,oe.kZ)();e.width="450px",e.data={theme:"admin-theme",user:this.user},this.dialog.open(ny.x,e).afterClosed().subscribe(a=>{a&&this.usersService.getUserById(this.user.id).subscribe(s=>{this.user=s})})}getUserType(){return this.user.serviceUser?"Service":"Person"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(H.Fv),t.Y36(c.D),t.Y36(l.V),t.Y36(R.uw),t.Y36(z.x4),t.Y36(z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-user-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],["class","mr-auto ml-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"mr-auto","ml-auto"],[1,"d-flex","page-title-headtitle"],[1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle","svgIcon"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"user-link",3,"routerLink"],[1,"text-muted"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,ry,1,0,"mat-spinner",1),t.YNc(3,ly,18,25,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading&&void 0!==i.user))},directives:[h.W,_.O5,tt.$g,g.Hw,Ut.gM,_.PC,m.yS,ot.lW,f.A],pipes:[p.X$,iy.d],styles:[""]}),n})();var uy=o(17755),hy=o(74837),dy=o(85985),fy=o(98973),py=o(15935);function my(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onLoad()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.EXT_SOURCES.LOAD")," "))}function gy(n,r){1&n&&t._UZ(0,"mat-spinner",6)}const _y=function(){return["id","name","type"]};function vy(n,r){if(1&n&&t._UZ(0,"app-ext-sources-list",7),2&n){const e=t.oxw();t.Q6J("extSources",e.extSources)("filterValue",e.filterValue)("displayedColumns",t.DdM(4,_y))("tableId",e.tableId)}}let xy=(()=>{class n{constructor(e,i,a,s){this.extSourceService=e,this.notificator=i,this.translate=a,this.authResolver=s,this.extSources=[],this.filterValue="",this.loading=!1,this.tableId=fn.qy,this.translate.get("ADMIN.EXT_SOURCES.LOAD_SUCCESS").subscribe(d=>this.loadSuccess=d)}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}onLoad(){this.extSourceService.loadExtSourcesDefinitions().subscribe(()=>{this.notificator.showSuccess(this.loadSuccess),this.refreshTable()})}refreshTable(){this.loading=!0,this.extSourceService.getExtSources().subscribe(e=>{this.extSources=e,this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KG),t.Y36(z.V6),t.Y36(p.sK),t.Y36(z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-ext-sources"]],decls:8,vars:7,consts:[[1,"page-subtitle"],["mat-stroked-button","","class","mr-2",3,"click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"extSources","filterValue","displayedColumns","tableId",4,"ngIf"],["mat-stroked-button","",1,"mr-2",3,"click"],[1,"ml-auto","mr-auto"],[3,"extSources","filterValue","displayedColumns","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,my,3,3,"button",1),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(6,gy,1,0,"mat-spinner",3),t.YNc(7,vy,1,5,"app-ext-sources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,5,"ADMIN.EXT_SOURCES.TITLE")),t.xp6(2),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.EXT_SOURCES.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[_.O5,ot.lW,je.L,tt.$g,py.D],pipes:[p.X$],styles:[""]}),n})();var yy=o(6097),Ty=o(97453),rs=o(1059),as=o(24850);function by(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function Cy(n,r){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function wy(n,r){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"mat-form-field",8),t._UZ(2,"input",9),t.ALo(3,"translate"),t.TgZ(4,"mat-error"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"mat-form-field",8),t._UZ(8,"input",10),t.ALo(9,"translate"),t.TgZ(10,"mat-error"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-autocomplete",11,12),t.YNc(15,Cy,2,2,"mat-option",13),t.ALo(16,"async"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.MAs(14),i=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(3,9,"DIALOGS.ADD_USER_EXT_SOURCE.LOGIN")),t.Q6J("formControl",i.loginControl),t.xp6(3),t.hij(" ",t.lcZ(6,11,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_LOGIN")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,13,"DIALOGS.ADD_USER_EXT_SOURCE.EXT_SOURCE")),t.Q6J("formControl",i.extSourcesControl)("matAutocomplete",e),t.xp6(3),t.hij(" ",t.lcZ(12,15,"DIALOGS.ADD_USER_EXT_SOURCE.EMPTY_EXT_SOURCE")," "),t.xp6(2),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(16,17,i.filteredExtSources))}}let Ay=(()=>{class n{constructor(e,i,a,s,d,T){this.dialogRef=e,this.data=i,this.extSourcesManagerService=a,this.usersManagerService=s,this.translate=d,this.notificator=T,this.extSources=[],d.get("DIALOGS.ADD_USER_EXT_SOURCE.SUCCESS").subscribe(E=>this.successMessage=E)}ngOnInit(){this.loading=!0,this.loginControl=new ft.NI("",[ft.kI.required,ft.kI.pattern(".*[\\S]+.*")]),this.extSourcesControl=new ft.NI("",[ft.kI.required]),this.loginControl.markAllAsTouched(),this.extSourcesControl.markAllAsTouched(),this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,rs.O)(""),(0,as.U)(e=>this._filter(e))),this.extSourcesManagerService.getExtSources().subscribe(e=>{this.extSources=e,this.filteredExtSources=this.extSourcesControl.valueChanges.pipe((0,rs.O)(""),(0,as.U)(i=>this._filter(i))),this.loading=!1},()=>this.loading=!1)}displayFn(e){return e?e.name:null}onCancel(){this.dialogRef.close(!1)}onAdd(){this.loading=!0,this.usersManagerService.addUserExtSource({user:this.data.userId,userExtSource:{beanName:"",extSource:this.extSourcesControl.value,id:0,login:this.loginControl.value,userId:this.data.userId}}).subscribe(()=>{this.loading=!1,this.notificator.showSuccess(this.successMessage),this.dialogRef.close(!0)},()=>this.loading=!1)}_filter(e){const i="string"==typeof e?e.toLowerCase():e.name.toLowerCase;return this.extSources.filter(a=>a.name.toLowerCase().includes(i))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(H.KG),t.Y36(H.Fv),t.Y36(p.sK),t.Y36(z.V6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-user-ext-source-dialog"]],decls:13,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container","user-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[1,"center-self","w-100"],["matInput","","required","",3,"formControl","placeholder"],["matInput","","type","text","required","",3,"formControl","matAutocomplete","placeholder"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,by,1,0,"mat-spinner",2),t.YNc(5,wy,17,19,"div",3),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onAdd()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"DIALOGS.ADD_USER_EXT_SOURCE.TITLE")),t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,8,"DIALOGS.ADD_USER_EXT_SOURCE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loginControl.invalid||i.extSourcesControl.invalid||i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,10,"DIALOGS.ADD_USER_EXT_SOURCE.ADD")," "))},directives:[R.uh,R.xY,_.O5,tt.$g,G.KE,M.Nt,ft.Fj,ft.Q7,ft.JJ,ft.oH,G.TO,gt.ZL,gt.XC,_.sg,zt.ey,R.H8,ot.lW],pipes:[p.X$,_.Ov],styles:[".column-size[_ngcontent-%COMP%]{width:10rem!important;font-weight:700}.center-self[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.auto-width[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}.auto-width[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{max-width:100%;width:auto}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),n})();var ss=o(40071),Ey=o(80275);function Sy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().addIdentity()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"USER_DETAIL.IDENTITIES.ADD"),"\n"))}function Dy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeIdentity()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"USER_DETAIL.IDENTITIES.REMOVE"),"\n")}}function Ly(n,r){1&n&&t._UZ(0,"mat-spinner",10)}function ky(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"perun-web-apps-user-ext-sources-list",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("displayedColumns",e.displayedColumns)("filterValue",e.filterValue)("selection",e.selection)("userExtSources",e.userExtSources)("tableId",e.tableId)}}let Iy=(()=>{class n{constructor(e,i,a,s,d,T){this.usersManagerService=e,this.storage=i,this.registrarManagerService=a,this.dialog=s,this.route=d,this.authResolver=T,this.userExtSources=[],this.selection=new P.Ov(!1,[]),this.displayedColumns=["select","id","extSourceName","login","lastAccess"],this.tableId=fn.gG,this.filterValue=""}ngOnInit(){this.route.parent.params.subscribe(e=>{this.userId=e.userId}),this.refreshTable()}refreshTable(){this.loading=!0,this.selection.clear(),this.usersManagerService.getRichUserExtSources(this.userId).subscribe(e=>{this.userExtSources=e,this.loading=!1},()=>this.loading=!1)}addIdentity(){const e=(0,oe.kZ)();e.width="1000px",e.data={userId:this.userId},this.dialog.open(Ay,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeIdentity(){const e=(0,oe.kZ)();e.width="450px",e.data={showSuccess:!0,theme:"user-theme",userId:this.userId,extSources:this.selection.selected},this.dialog.open(ss.Lc,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(z.d6),t.Y36(H.tk),t.Y36(R.uw),t.Y36(m.gz),t.Y36(z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-identities"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["class","mr-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],[1,"admin-theme"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"displayedColumns","filterValue","selection","userExtSources","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(4,Sy,3,3,"button",2),t.YNc(5,Dy,3,4,"button",3),t.TgZ(6,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Ly,1,0,"mat-spinner",6),t.qZA(),t.YNc(9,ky,2,5,"div",7)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,6,"USER_DETAIL.IDENTITIES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","USER_DETAIL.IDENTITIES.FILTER_PLACEHOLDER"),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,Ey.j],pipes:[p.X$],styles:[""]}),n})();function My(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function Oy(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"mat-form-field"),t.TgZ(2,"input",6),t.NdJ("change",function(){return t.CHM(e),t.oxw().makePath()}),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-error"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"mat-form-field"),t.TgZ(8,"input",7),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().description=a}),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-form-field"),t._UZ(11,"input",8),t.ALo(12,"translate"),t.TgZ(13,"mat-error"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field"),t._UZ(17,"input",8),t.ALo(18,"translate"),t.TgZ(19,"mat-error"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.TgZ(22,"mat-form-field"),t._UZ(23,"input",8),t.ALo(24,"translate"),t.TgZ(25,"mat-error"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"span",9),t._uU(29),t.ALo(30,"translate"),t.TgZ(31,"mat-checkbox",10),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().status=a}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(3,17,"DIALOGS.CREATE_EDIT_SERVICE.NAME")),t.Q6J("formControl",e.nameControl),t.xp6(3),t.Oqu(t.lcZ(6,19,"DIALOGS.CREATE_EDIT_SERVICE.RESTRICTION_NAME")),t.xp6(3),t.s9C("placeholder",t.lcZ(9,21,"DIALOGS.CREATE_EDIT_SERVICE.DESCRIPTION")),t.Q6J("ngModel",e.description),t.xp6(3),t.s9C("placeholder",t.lcZ(12,23,"DIALOGS.CREATE_EDIT_SERVICE.DELAY")),t.Q6J("formControl",e.delayControl),t.xp6(3),t.Oqu(t.lcZ(15,25,"DIALOGS.CREATE_EDIT_SERVICE.INVALID_DELAY")),t.xp6(3),t.s9C("placeholder",t.lcZ(18,27,"DIALOGS.CREATE_EDIT_SERVICE.RECURRENCE")),t.Q6J("formControl",e.recurrenceControl),t.xp6(3),t.Oqu(t.lcZ(21,29,"DIALOGS.CREATE_EDIT_SERVICE.INVALID_RECURRENCE")),t.xp6(3),t.s9C("placeholder",t.lcZ(24,31,"DIALOGS.CREATE_EDIT_SERVICE.PATH")),t.Q6J("formControl",e.pathControl),t.xp6(3),t.Oqu(t.lcZ(27,33,"DIALOGS.CREATE_EDIT_SERVICE.REQUIRE_PATH")),t.xp6(3),t.hij("",t.lcZ(30,35,"DIALOGS.CREATE_EDIT_SERVICE.STATUS")," "),t.xp6(2),t.Q6J("ngModel",e.status),t.xp6(1),t.Oqu(t.lcZ(33,37,"DIALOGS.CREATE_EDIT_SERVICE.STATUS_HINT"))}}function Ny(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.asEdit?a.onEdit():a.onCreate()}),t._uU(5),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.CREATE_EDIT_SERVICE.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.nameControl.invalid||e.delayControl.invalid||e.recurrenceControl.invalid||e.pathControl.invalid),t.xp6(1),t.hij(" ",e.buttonText," ")}}let xu=(()=>{class n{constructor(e,i,a,s,d){this.dialogRef=e,this.data=i,this.serviceManager=a,this.notificator=s,this.translate=d,this.loading=!1,this.status=!0,this.nameControl=new ft.NI("",[ft.kI.required,ft.kI.pattern("^[a-zA-Z0-9_]+$")]),this.delayControl=new ft.NI(10,[ft.kI.pattern("^[0-9]*$")]),this.recurrenceControl=new ft.NI(2,[ft.kI.pattern("^[0-9]*$")]),this.pathControl=new ft.NI("",[ft.kI.required]),this.asEdit=!1}ngOnInit(){this.theme=this.data.theme,this.asEdit=void 0!==this.data.service,this.asEdit?(this.nameControl.setValue(this.data.service.name),this.description=this.data.service.description,this.delayControl.setValue(this.data.service.delay),this.recurrenceControl.setValue(this.data.service.recurrence),this.pathControl.setValue(this.data.service.script),this.status=this.data.service.enabled,this.title=this.translate.instant("DIALOGS.CREATE_EDIT_SERVICE.EDIT_TITLE"),this.buttonText=this.translate.instant("DIALOGS.CREATE_EDIT_SERVICE.EDIT")):(this.title=this.translate.instant("DIALOGS.CREATE_EDIT_SERVICE.CREATE_TITLE"),this.buttonText=this.translate.instant("DIALOGS.CREATE_EDIT_SERVICE.CREATE"))}onCreate(){this.loading=!0,this.serviceManager.createServiceWithService({service:{name:this.nameControl.value,description:this.description,delay:this.delayControl.value,recurrence:this.recurrenceControl.value,enabled:this.status,script:this.pathControl.value,useExpiredMembers:!1,id:0,beanName:""}}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CREATE_EDIT_SERVICE.CREATE_SUCCESS")),this.dialogRef.close(!0),this.loading=!1})}onEdit(){this.loading=!0,this.serviceManager.updateService({service:{name:this.nameControl.value,description:this.description,delay:this.delayControl.value,recurrence:this.recurrenceControl.value,enabled:this.status,script:this.pathControl.value,useExpiredMembers:this.data.service.useExpiredMembers,id:this.data.service.id,beanName:this.data.service.beanName}}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CREATE_EDIT_SERVICE.EDIT_SUCCESS")),this.dialogRef.close(!0),this.loading=!1})}onCancel(){this.dialogRef.close(!1)}makePath(){const e="./".concat(this.nameControl.value);this.pathControl.setValue(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(H.KK),t.Y36(z.V6),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-service-dialog"]],decls:6,vars:7,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"formControl","placeholder","change"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["matInput","","required","",3,"formControl","placeholder"],[1,"d-flex"],[1,"ml-3",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","mat-flat-button","",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.qZA(),t.YNc(3,My,1,0,"mat-spinner",1),t.YNc(4,Oy,34,39,"div",2),t.YNc(5,Ny,6,5,"div",3),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(i.title),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[R.uh,_.O5,tt.$g,R.xY,G.KE,M.Nt,ft.Fj,ft.Q7,ft.JJ,ft.oH,G.TO,ft.On,xt.oG,R.H8,ot.lW],pipes:[p.X$],styles:[""]}),n})();var Fy=o(55663);let yu=(()=>{class n{constructor(e,i,a,s,d){this.dialogRef=e,this.data=i,this.serviceManager=a,this.notificator=s,this.translate=d,this.displayedColumns=["name"],this.dataSource=new Z.by(this.data.services),this.loading=!1,this.force=!1,this.relations=[]}ngOnInit(){this.theme=this.data.theme,this.services=this.data.services,this.relations.push(this.translate.instant("DIALOGS.DELETE_SERVICE.DESTINATION_RELATION")),this.anotherMessage=this.translate.instant("DIALOGS.DELETE_SERVICE.MORE_INFORMATION")}onConfirm(){if(0===this.services.length)return this.dialogRef.close(!0),void this.notificator.showSuccess(this.translate.instant("DIALOGS.DELETE_SERVICE.SUCCESS"));this.loading=!0,this.serviceManager.deleteService(this.services.pop().id,this.force).subscribe(()=>{this.onConfirm(),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}onSubmit(e){this.force=e.force,e.deleted?this.onConfirm():this.onCancel()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(H.KK),t.Y36(z.V6),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-service-dialog"]],decls:2,vars:8,consts:[[3,"entityNames","entityType","relations","anotherMessage","loading","deleted"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"app-delete-entity-dialog",0),t.NdJ("deleted",function(s){return i.onSubmit(s)}),t.qZA(),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(1),t.Q6J("entityNames",i.dataSource)("entityType","services")("relations",i.relations)("anotherMessage",i.anotherMessage)("loading",i.loading))},directives:[Fy.e],styles:[""]}),n})();function Py(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().createService()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.SERVICES.CREATE")," "))}function Ry(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteService()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.SERVICES.DELETE")," ")}}function Zy(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function By(n,r){if(1&n&&t._UZ(0,"app-services-list",10),2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("selection",e.selection)("services",e.services)("filterValue",e.filterValue)}}let Uy=(()=>{class n{constructor(e,i,a){this.serviceManager=e,this.dialog=i,this.authResolver=a,this.selection=new P.Ov(!0,[]),this.loading=!1,this.filterValue="",this.tableId=fn.NL}ngOnInit(){this.serviceManager.getServices().subscribe(e=>{this.services=e,this.refreshTable()})}createService(){const e=(0,oe.kZ)();e.width="600px",e.data={theme:"admin-theme"},this.dialog.open(xu,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}deleteService(){const e=(0,oe.kZ)();e.width="600px",e.data={theme:"admin-theme",services:this.selection.selected},this.dialog.open(yu,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}refreshTable(){this.loading=!0,this.serviceManager.getServices().subscribe(e=>{this.services=e,this.selection.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KK),t.Y36(R.uw),t.Y36(z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-services"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","action-button mr-2","mat-flat-button","",3,"click",4,"ngIf"],["class","mr-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"tableId","selection","services","filterValue",4,"ngIf"],["color","accent","mat-flat-button","",1,"action-button","mr-2",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],[3,"tableId","selection","services","filterValue"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,Py,3,3,"button",2),t.YNc(6,Ry,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(8,Zy,1,0,"mat-spinner",5),t.YNc(9,By,1,4,"app-services-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"ADMIN.SERVICES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.SERVICES.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,ci.Q],pipes:[p.X$],styles:[""]}),n})();var Gy=o(62109);function Vy(n,r){1&n&&t._UZ(0,"mat-spinner",5)}const Hy=function(){return["id","name","vo","facility","description"]};function zy(n,r){if(1&n&&t._UZ(0,"perun-web-apps-resources-list",6),2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("resources",e.resources)("filterValue",e.filterValue)("displayedColumns",t.DdM(4,Hy))}}let Yy=(()=>{class n{constructor(e,i){this.userManager=e,this.route=i,this.resources=[],this.tableId=fn.kO,this.filterValue=""}ngOnInit(){this.refreshTable()}refreshTable(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userManager.getAssignedRichResourcesForUser(e.userId).subscribe(a=>{this.resources=a,this.loading=!1})})}resourceFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.Fv),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-resources"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","resources","filterValue","displayedColumns",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"tableId","resources","filterValue","displayedColumns"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(s){return i.resourceFilter(s)}),t.qZA(),t.YNc(6,Vy,1,0,"mat-spinner",3),t.YNc(7,zy,1,5,"perun-web-apps-resources-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.RESOURCES.TITLE")),t.xp6(3),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.RESOURCES_LIST.TABLE_SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,je.L,_.O5,tt.$g,Gy.C],pipes:[p.X$],styles:[""]}),n})();var Wy=o(61365),Xy=o(71103),$y=o(53984);const Jy=["list"];function Qy(n,r){1&n&&t._UZ(0,"mat-spinner",8)}function jy(n,r){if(1&n&&t._UZ(0,"perun-web-apps-attributes-list",9,10),2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("attributes",e.attributes)("selection",e.selection)}}let qy=(()=>{class n{constructor(e,i,a,s){this.dialog=e,this.attributesManager=i,this.userService=a,this.route=s,this.loading=!1,this.selection=new P.Ov(!0,[]),this.tableId=fn.rF,this.attributes=[]}ngOnInit(){this.route.params.subscribe(e=>{this.userService.getUserExtSourceById(e.identityId).subscribe(a=>{this.userExtSource=a,this.refreshTable()})})}refreshTable(){this.loading=!0,this.attributesManager.getUserExtSourceAttributes(this.userExtSource.id).subscribe(e=>{this.attributes=(0,oe.MX)(e),this.selection.clear(),this.loading=!1})}onAdd(){const e=(0,oe.kZ)();e.width="1050px",e.data={entityId:this.userExtSource.id,entity:"ues",notEmptyAttributes:this.attributes,style:"user-theme"},this.dialog.open(Xy.n,e).afterClosed().subscribe(a=>{"saved"===a&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const e=(0,oe.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(ss.wA,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,oe.kZ)();e.width="450px",e.data={entityId:this.userExtSource.id,entity:"ues",attributes:this.selection.selected},this.dialog.open(Wy.k,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.uw),t.Y36(H.H8),t.Y36(H.Fv),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-identity-detail"]],viewQuery:function(e,i){if(1&e&&t.Gf(Jy,5),2&e){let a;t.iGM(a=t.CRH())&&(i.list=a.first)}},decls:26,vars:32,consts:[[1,"page-subtitle"],[1,"mb-2"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","attributes","selection",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"tableId","attributes","selection"],["list",""]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"perun-web-apps-refresh-button",2),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(15,"button",3),t.NdJ("click",function(){return i.onSave()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",4),t.NdJ("click",function(){return i.onAdd()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",5),t.NdJ("click",function(){return i.onRemove()}),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,Qy,1,0,"mat-spinner",6),t.YNc(25,jy,2,3,"perun-web-apps-attributes-list",7),t.qZA()),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,15,"SHARED.IDENTITY_DETAIL.TITLE")," - ",i.userExtSource?i.userExtSource.extSource.name:""," "),t.xp6(3),t.AsE(" ",t.lcZ(6,17,"SHARED.IDENTITY_DETAIL.TYPE"),": ",i.userExtSource?i.userExtSource.extSource.type:""," "),t.xp6(3),t.AsE(" ",t.lcZ(9,19,"SHARED.IDENTITY_DETAIL.LOGIN"),": ",i.userExtSource?i.userExtSource.login:""," "),t.xp6(3),t.AsE(" ",t.lcZ(12,21,"SHARED.IDENTITY_DETAIL.LAST_ACCESS"),": ",i.userExtSource?t.xi3(13,23,i.userExtSource.lastAccess,"d.M.y H:mm:ss"):""," "),t.xp6(4),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(17,26,"SHARED.IDENTITY_DETAIL.SAVE")," "),t.xp6(3),t.hij(" ",t.lcZ(20,28,"SHARED.IDENTITY_DETAIL.ADD")," "),t.xp6(2),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(23,30,"SHARED.IDENTITY_DETAIL.REMOVE")," "),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,ot.lW,_.O5,tt.$g,$y.p],pipes:[p.X$,_.uU],styles:[""]}),n})();function Ky(n,r){1&n&&t._UZ(0,"mat-spinner",3)}function t1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editService()}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}function e1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).removeService()}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA(),t.qZA()}}function n1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).evaluateConsents()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.EVALUATE_CONSENTS")," "))}const i1=function(){return{color:"black"}},r1=function(n){return["/admin/services",n]};function a1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t._UZ(1,"mat-icon",5),t.ALo(2,"translate"),t.TgZ(3,"div",6),t.TgZ(4,"div",7),t.TgZ(5,"a",8),t._uU(6),t.qZA(),t.TgZ(7,"span",9),t._uU(8),t.qZA(),t.YNc(9,t1,3,0,"button",10),t.YNc(10,e1,3,0,"button",11),t.qZA(),t.TgZ(11,"span",12),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",12),t._uU(15),t.ALo(16,"translate"),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"translate"),t.ALo(20,"translate"),t.TgZ(21,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeServiceStatus()}),t.TgZ(22,"mat-icon",14),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,n1,3,3,"button",15),t.TgZ(25,"span",16),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",t.lcZ(2,14,"SERVICE_DETAIL.ENTITY")),t.Q6J("ngStyle",t.DdM(28,i1)),t.xp6(4),t.Q6J("routerLink",t.VKq(29,r1,e.service.id)),t.xp6(1),t.hij(" ",e.service.name," "),t.xp6(2),t.hij(" \xa0 #",e.service.id," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.AsE(" ",t.lcZ(13,16,"SERVICE_DETAIL.DESCRIPTION"),": ",e.service.description," "),t.xp6(3),t.hij(" ",t.lcZ(16,18,"SERVICE_DETAIL.STATUS"),": "),t.xp6(3),t.hij(" ",e.service.enabled?t.lcZ(19,20,"SERVICE_DETAIL.ENABLED"):t.lcZ(20,22,"SERVICE_DETAIL.DISABLED")," "),t.xp6(5),t.hij(" ",e.service.enabled?"check_circle_outline":"block"," "),t.xp6(1),t.Q6J("ngIf",e.authResolver.isPerunAdmin()),t.xp6(2),t.hij(" ",e.service.useExpiredMembers?t.lcZ(27,24,"SERVICE_DETAIL.USE_EXPIRED_MEMBERS_ENABLED"):t.lcZ(28,26,"SERVICE_DETAIL.USE_EXPIRED_MEMBERS_DISABLED")," ")}}let s1=(()=>{class n{constructor(e,i,a,s,d,T,E,F,W,lt,st){this.route=e,this.router=i,this.consentsManager=a,this.serviceManager=s,this.sideMenuService=d,this.sideMenuItemService=T,this.dialog=E,this.authResolver=F,this.translate=W,this.notificator=lt,this.entityStorageService=st,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(e=>{this.serviceId=e.serviceId,this.refresh()})}refresh(){this.serviceManager.getServiceById(this.serviceId).subscribe(e=>{this.service=e,this.entityStorageService.setEntity({id:e.id,beanName:e.beanName});const i=this.sideMenuItemService.parseService(this.service);this.sideMenuService.setAdminItems([i]),this.loading=!1},()=>this.loading=!1)}editService(){const e=(0,oe.kZ)();e.width="600px",e.data={theme:"service-theme",service:this.service},this.dialog.open(xu,e).afterClosed().subscribe(a=>{a&&this.ngOnInit()})}removeService(){const e=(0,oe.kZ)();e.width="600px",e.data={theme:"service-theme",services:[this.service]},this.dialog.open(yu,e).afterClosed().subscribe(a=>{a&&this.router.navigate(["/admin/services"])})}changeServiceStatus(){this.loading=!0,this.serviceManager.updateService({service:{name:this.service.name,description:this.service.description,delay:this.service.delay,recurrence:this.service.recurrence,enabled:!this.service.enabled,script:this.service.script,useExpiredMembers:this.service.useExpiredMembers,id:this.service.id,beanName:this.service.beanName}}).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.STATUS_CHANGE_SUCCESS")),this.refresh()},()=>this.loading=!1)}evaluateConsents(){const e=(0,oe.kZ)();e.width="500px",e.data={title:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_TITLE"),theme:"service-theme",description:this.translate.instant("SERVICE_DETAIL.CONFIRM_DIALOG_DESCRIPTION"),items:[this.service.name],type:"confirmation",showAsk:!1},this.dialog.open(ss.Ts,e).afterClosed().subscribe(a=>{a&&this.consentsManager.evaluateConsentsForService(this.service.id).subscribe(()=>this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.EVALUATION_FINISH")))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(H.WY),t.Y36(H.KK),t.Y36(c.D),t.Y36(l.V),t.Y36(R.uw),t.Y36(z.x4),t.Y36(p.sK),t.Y36(z.V6),t.Y36(z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-detail-page"]],decls:5,vars:2,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","service-theme"],["class","ml-auto mr-auto",4,"ngIf"],["class","d-flex page-title-headtitle",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],["queryParamsHandling","merge",1,"service-link",3,"routerLink"],[1,"text-muted"],["aria-label","Edit service","mat-icon-button","",3,"click",4,"ngIf"],["aria-label","Remove service","mat-icon-button","",3,"click",4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","",3,"click"],[1,"align-content-center"],["color","accent","class","action-button ml-2","mat-flat-button","",3,"click",4,"ngIf"],[1,"mt-1","ml-2","entity-info"],["aria-label","Edit service","mat-icon-button","",3,"click"],["aria-label","Remove service","mat-icon-button","",3,"click"],["color","accent","mat-flat-button","",1,"action-button","ml-2",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"perun-web-apps-back-button"),t.YNc(2,Ky,1,0,"mat-spinner",1),t.YNc(3,a1,29,31,"div",2),t._UZ(4,"app-animated-router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading&&void 0!==i.service))},directives:[h.W,_.O5,tt.$g,g.Hw,Ut.gM,_.PC,m.yS,ot.lW,f.A],pipes:[p.X$],styles:[""],data:{animation:[En.Ji]}}),n})(),o1=(()=>{class n{constructor(){this.navItems=[]}ngOnInit(){this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-attributes",url:"required-attributes",label:"MENU_ITEMS.SERVICE.REQUIRED_ATTRIBUTES",style:"service-btn"},{cssIcon:"perun-service_destination",url:"destinations",label:"MENU_ITEMS.SERVICE.DESTINATIONS",style:"service-btn"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-overview"]],decls:1,vars:2,consts:[[3,"items","size"]],template:function(e,i){1&e&&t._UZ(0,"perun-web-apps-menu-buttons-field",0),2&e&&t.Q6J("items",i.navItems)("size","small")},directives:[L.L],styles:[""]}),n})();var l1=o(5254),c1=o(21406),u1=o(826),h1=o(69054);class f1{constructor(r,e){this.keySelector=r,this.flushes=e}call(r,e){return e.subscribe(new p1(r,this.keySelector,this.flushes))}}class p1 extends u1.L{constructor(r,e,i){super(r),this.keySelector=e,this.values=new Set,i&&this.add((0,h1.D)(this,i))}notifyNext(r,e,i,a,s){this.values.clear()}notifyError(r,e){this._error(r)}_next(r){this.keySelector?this._useKeySelector(r):this._finalizeNext(r,r)}_useKeySelector(r){let e;const{destination:i}=this;try{e=this.keySelector(r)}catch(a){return void i.error(a)}this._finalizeNext(e,r)}_finalizeNext(r,e){const{values:i}=this;i.has(r)||(i.add(r),this.destination.next(e))}}var m1=o(61709),Tu=o(92014),bu=o(92821),g1=o(47314),Cu=o(4843);function v1(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function x1(n,r){1&n&&(t.TgZ(0,"app-alert",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.Q6J("alert_type","warn"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ACTIVE_WARN")))}function y1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,x1,3,4,"app-alert",6),t.ALo(2,"async"),t.TgZ(3,"perun-web-apps-immediate-filter",7),t.NdJ("filter",function(a){return t.CHM(e),t.oxw().applyFilter(a)}),t.qZA(),t._UZ(4,"app-attr-def-list",8),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,8,e.serviceEnabled$)),t.xp6(2),t.Q6J("placeholder","DIALOGS.ADD_REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("selection",e.selection)("definitions",e.attrDefinitions)("disableRouting",!0)("filterValue",e.filterValue)("serviceEnabled",t.lcZ(5,10,e.serviceEnabled$))("consentRequired",t.lcZ(6,12,e.consentRequired$))}}function T1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.ADD")," ")}}let b1=(()=>{class n{constructor(e,i,a,s,d,T,E,F){this.dialogRef=e,this.data=i,this.serviceManager=a,this.attributesManager=s,this.facilitiesService=d,this.consentHubService=T,this.notificator=E,this.translate=F,this.consentRequired$=this.facilitiesService.getAssignedFacilitiesByService(this.data.serviceId).pipe((0,c1.b)(l1.D),(0,as.U)(W=>W.id),function d1(n,r){return e=>e.lift(new f1(n,r))}(),(0,m1.zg)(W=>this.consentHubService.getConsentHubByFacility(W)),function _1(n,r){return arguments.length>=2?function(i){return(0,Cu.z)((0,Tu.R)(n,r),(0,bu.h)(1),(0,g1.d)(r))(i)}:function(i){return(0,Cu.z)((0,Tu.R)((a,s,d)=>n(a,s,d+1)),(0,bu.h)(1))(i)}}((W,lt)=>W||lt.enforceConsents,!1),(0,rs.O)(!0)),this.serviceEnabled$=this.serviceManager.getServiceById(this.data.serviceId).pipe((0,as.U)(W=>W.enabled),(0,rs.O)(!0)),this.attrDefinitions=[],this.selection=new P.Ov(!0,[]),this.filterValue="",this.loading=!1}ngOnInit(){this.loading=!0,this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.attributesManager.getAllAttributeDefinitions().subscribe(e=>{this.attrDefinitions=e,this.loading=!1})}onAdd(){this.loading=!0;const e=this.selection.selected.map(i=>i.id);this.serviceManager.addRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.ADD_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(H.KK),t.Y36(H.H8),t.Y36(H.IQ),t.Y36(H.WY),t.Y36(z.V6),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-required-attributes"]],decls:7,vars:9,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","","class","dialog-container",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"mr-auto","ml-auto"],["mat-dialog-content","",1,"dialog-container"],[3,"alert_type",4,"ngIf"],[3,"placeholder","filter"],[3,"selection","definitions","disableRouting","filterValue","serviceEnabled","consentRequired"],[3,"alert_type"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,v1,1,0,"mat-spinner",1),t.YNc(5,y1,7,14,"div",2),t.YNc(6,T1,7,7,"div",3),t.qZA()),2&e&&(t.Tol(i.theme),t.xp6(2),t.Oqu(t.lcZ(3,7,"DIALOGS.ADD_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[R.uh,_.O5,tt.$g,R.xY,rt.w,je.L,Xt,R.H8,ot.lW],pipes:[p.X$,_.Ov],styles:[""]}),n})();function C1(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function w1(n,r){1&n&&t._UZ(0,"th",15)}function A1(n,r){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.friendlyName)}}function E1(n,r){1&n&&t._UZ(0,"tr",17)}function S1(n,r){1&n&&t._UZ(0,"tr",18)}function D1(n,r){if(1&n&&(t.TgZ(0,"div",7),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",9),t.ynx(8,10),t.YNc(9,w1,1,0,"th",11),t.YNc(10,A1,2,1,"td",12),t.BQk(),t.YNc(11,E1,1,0,"tr",13),t.YNc(12,S1,1,0,"tr",14),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.DESCRIPTION")),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let L1=(()=>{class n{constructor(e,i,a,s,d){this.dialogRef=e,this.data=i,this.serviceManager=a,this.notificator=s,this.translate=d,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.serviceId=this.data.serviceId,this.dataSource=new Z.by(this.data.attrDefinitions)}onConfirm(){this.loading=!0;const e=this.dataSource.data.map(i=>i.id);this.serviceManager.removeRequiredAttributes(this.serviceId,e).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onCancel(){this.dialogRef.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(H.KK),t.Y36(z.V6),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-remove-required-attributes"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div"),t.YNc(4,C1,1,0,"mat-spinner",1),t.YNc(5,D1,13,9,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onCancel()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onConfirm()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,9,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.TITLE")),t.xp6(2),t.Tol(i.theme),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(3),t.hij(" ",t.lcZ(9,11,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.CANCEL")," "),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(1),t.hij(" ",t.lcZ(12,13,"DIALOGS.REMOVE_REQUIRED_ATTRIBUTES.REMOVE")," "))},directives:[R.uh,_.O5,tt.$g,R.xY,Z.BZ,Z.w1,Z.fO,Z.ge,Z.Dz,Z.ev,Z.as,Z.XQ,Z.nj,Z.Gk,R.H8,ot.lW],pipes:[p.X$],styles:[""]}),n})();function k1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.ADD")," "))}function I1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onRemove()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.REMOVE")," ")}}function M1(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function O1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-attr-def-list",10),t.NdJ("refreshEvent",function(){return t.CHM(e),t.oxw().refreshTable()}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("definitions",e.attrDefinitions)("selection",e.selection)("filterValue",e.filterValue)("disableRouting",!e.authResolver.isPerunAdmin())}}let N1=(()=>{class n{constructor(e,i,a,s){this.attributeManager=e,this.dialog=i,this.authResolver=a,this.entityStorageService=s,this.loading=!1,this.filterValue="",this.selection=new P.Ov(!0,[]),this.attrDefinitions=[],this.tableId=fn.JO}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.attributeManager.getRequiredAttributesDefinition(this.service.id).subscribe(e=>{this.selection.clear(),this.attrDefinitions=e,this.loading=!1})}onAdd(){const e=(0,oe.kZ)();e.width="950px",e.data={serviceId:this.service.id,theme:"service-theme"},this.dialog.open(b1,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}onRemove(){const e=(0,oe.kZ)();e.width="650px",e.data={serviceId:this.service.id,attrDefinitions:this.selection.selected,theme:"service-theme"},this.dialog.open(L1,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.H8),t.Y36(R.uw),t.Y36(z.x4),t.Y36(z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-required-attributes"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent","class","mr-2 action-button",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","mr-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","definitions","selection","filterValue","disableRouting","refreshEvent",4,"ngIf"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"tableId","definitions","selection","filterValue","disableRouting","refreshEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,k1,3,3,"button",2),t.YNc(6,I1,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(8,M1,1,0,"mat-spinner",5),t.YNc(9,O1,1,5,"app-attr-def-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"SERVICE_DETAIL.REQUIRED_ATTRIBUTES.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.REQUIRED_ATTRIBUTES.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,Xt],pipes:[p.X$],styles:[""]}),n})();var F1=o(46597),P1=o(89466),R1=o(70242);function Z1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onRemove()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.REMOVE")," ")}}function B1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAllow()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.ALLOW")," ")}}function U1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onBlock()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SERVICE_DETAIL.DESTINATIONS.BLOCK")," ")}}function G1(n,r){1&n&&t._UZ(0,"mat-spinner",9)}const V1=function(){return["select","destinationId","facility","destination","type","status","propagationType"]};function H1(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-destination-list",10),2&n){const e=t.oxw();t.Q6J("destinations",e.destinations)("selection",e.selection)("tableId",e.tableId)("displayedColumns",t.DdM(5,V1))("filterValue",e.filterValue)}}let z1=(()=>{class n{constructor(e,i,a,s,d,T){this.serviceManager=e,this.notificator=i,this.translate=a,this.dialog=s,this.authResolver=d,this.entityStorageService=T,this.loading=!1,this.filterValue="",this.destinations=[],this.selection=new P.Ov(!0,[]),this.tableId=fn.Cf}ngOnInit(){this.loading=!0,this.service=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.serviceManager.getAllRichDestinationsForService(this.service.id).subscribe(e=>{this.selection.clear(),this.filterValue="",this.destinations=e,this.loading=!1})}blockServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.BLOCK_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.blockServiceOnDestination(this.service.id,i.id).subscribe(()=>{this.blockServiceOnDestinations(e)},()=>this.loading=!1)}onBlock(){this.loading=!0,this.blockServiceOnDestinations(this.selection.selected)}allowServiceOnDestinations(e){if(0===e.length)return this.notificator.showSuccess(this.translate.instant("SERVICE_DETAIL.DESTINATIONS.ALLOW_SUCCESS")),void this.refreshTable();const i=e.pop();this.serviceManager.unblockServiceOnDestinationById(this.service.id,i.id).subscribe(()=>{this.allowServiceOnDestinations(e)},()=>this.loading=!1)}onAllow(){this.loading=!0,this.allowServiceOnDestinations(this.selection.selected)}onRemove(){const e=(0,oe.kZ)();e.width="500px",e.data={destinations:this.selection.selected,theme:"admin-theme"},this.dialog.open(P1.u,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.KK),t.Y36(z.V6),t.Y36(p.sK),t.Y36(R.uw),t.Y36(z.x4),t.Y36(z.fb))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-service-destinations"]],decls:11,vars:9,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","warn","class","mr-2",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","accent","class","mr-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"destinations","selection","tableId","displayedColumns","filterValue",4,"ngIf"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"destinations","selection","tableId","displayedColumns","filterValue"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,Z1,3,4,"button",2),t.YNc(6,B1,3,4,"button",3),t.YNc(7,U1,3,4,"button",2),t.TgZ(8,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(9,G1,1,0,"mat-spinner",5),t.YNc(10,H1,1,6,"app-perun-web-apps-destination-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"SERVICE_DETAIL.DESTINATIONS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","SERVICE_DETAIL.DESTINATIONS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,R1.q],pipes:[p.X$],styles:[""]}),n})();function Y1(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function W1(n,r){1&n&&t._UZ(0,"th",13)}function X1(n,r){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function $1(n,r){1&n&&t._UZ(0,"tr",15)}function J1(n,r){1&n&&t._UZ(0,"tr",16)}function Q1(n,r){if(1&n&&(t.TgZ(0,"div",5),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"table",7),t.ynx(8,8),t.YNc(9,W1,1,0,"th",9),t.YNc(10,X1,2,1,"td",10),t.BQk(),t.YNc(11,$1,1,0,"tr",11),t.YNc(12,J1,1,0,"tr",12),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"DIALOGS.DELETE_OWNER.DESCRIPTION")," "),t.xp6(3),t.hij(" ",t.lcZ(6,7,"DIALOGS.DELETE_OWNER.ASK")," "),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function j1(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t.TgZ(1,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"DIALOGS.DELETE_OWNER.CANCEL")," "),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(1),t.hij(" ",t.lcZ(6,5,"DIALOGS.DELETE_OWNER.DELETE")," ")}}let q1=(()=>{class n{constructor(e,i,a,s,d){this.dialogRef=e,this.data=i,this.notificator=a,this.translate=s,this.ownersManagerService=d,this.displayedColumns=["name"],this.owners=[]}ngOnInit(){this.dataSource=new Z.by(this.data),this.owners=this.data}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.owners.length?this.ownersManagerService.deleteOwner(this.owners.pop().id).subscribe(()=>{this.onSubmit()},()=>this.loading=!1):this.translate.get("DIALOGS.DELETE_OWNER.SUCCESS").subscribe(e=>{this.loading=!1,this.notificator.showSuccess(e),this.dialogRef.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(z.V6),t.Y36(p.sK),t.Y36(H.aC))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-owner-dialog"]],decls:6,vars:6,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Y1,1,0,"mat-spinner",1),t.YNc(4,Q1,13,9,"div",2),t.YNc(5,j1,7,7,"div",3)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"DIALOGS.DELETE_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[R.uh,_.O5,tt.$g,R.xY,Z.BZ,Z.w1,Z.fO,Z.ge,Z.Dz,Z.ev,Z.as,Z.XQ,Z.nj,Z.Gk,R.H8,ot.lW],pipes:[p.X$],styles:[""]}),n})();function K1(n,r){1&n&&t._UZ(0,"mat-spinner",4)}function tT(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.FILL_CONTACT")," "))}function eT(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DIALOGS.ADD_OWNER.CONTACT_FORMAT")," "))}function nT(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",5),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",6),t.ALo(4,"translate"),t.TgZ(5,"mat-error"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.ALo(10,"translate"),t.YNc(11,tT,3,3,"mat-error",3),t.YNc(12,eT,3,3,"mat-error",3),t.qZA(),t.TgZ(13,"mat-form-field"),t.TgZ(14,"mat-select",7),t.NdJ("valueChange",function(a){return t.CHM(e),t.oxw().type=a}),t.TgZ(15,"mat-option",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",9),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t.ALo(26,"translate"),t.TgZ(27,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.s9C("placeholder",t.lcZ(4,15,"DIALOGS.ADD_OWNER.NAME")),t.Q6J("formControl",e.nameCtrl),t.xp6(3),t.hij(" ",t.lcZ(7,17,"DIALOGS.ADD_OWNER.FILL_NAME")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(10,19,"DIALOGS.ADD_OWNER.CONTACT")),t.Q6J("formControl",e.contactCtrl),t.xp6(2),t.Q6J("ngIf",e.contactCtrl.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.contactCtrl.invalid&&!e.contactCtrl.hasError("required")),t.xp6(2),t.Q6J("value",e.type),t.xp6(2),t.Oqu(t.lcZ(17,21,"DIALOGS.ADD_OWNER.TYPE1")),t.xp6(3),t.Oqu(t.lcZ(20,23,"DIALOGS.ADD_OWNER.TYPE2")),t.xp6(4),t.hij(" ",t.lcZ(24,25,"DIALOGS.ADD_OWNER.CANCEL")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(26,27,"DIALOGS.ADD_OWNER.TOOLTIP")),t.Q6J("matTooltipDisabled",e.nameCtrl.valid&&e.contactCtrl.valid),t.xp6(2),t.Q6J("disabled",e.nameCtrl.invalid||e.contactCtrl.invalid),t.xp6(1),t.hij(" ",t.lcZ(29,29,"DIALOGS.ADD_OWNER.CREATE")," ")}}let iT=(()=>{class n{constructor(e,i,a,s){this.dialogRef=e,this.notificator=i,this.ownersManagerService=a,this.translate=s,this.type="1",s.get("DIALOGS.ADD_OWNER.SUCCESS").subscribe(d=>this.successMessage=d)}ngOnInit(){this.nameCtrl=new ft.NI(null,[ft.kI.required,ft.kI.pattern("^[\\w.-]+( [\\w.-]+)*$")]),this.contactCtrl=new ft.NI(null,[ft.kI.required,ft.kI.pattern(oe.B2)])}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.loading=!0,this.ownersManagerService.createOwner({name:this.nameCtrl.value,contact:this.contactCtrl.value,ownerType:Number(this.type)}).subscribe(()=>{this.notificator.showSuccess(this.successMessage),this.loading=!1,this.dialogRef.close(!0)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(z.V6),t.Y36(H.aC),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-owner-dialog"]],decls:6,vars:5,consts:[[1,"admin-theme"],["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["mat-dialog-content","",1,"dialog-container"],["matInput","","required","",3,"placeholder","formControl"],[3,"value","valueChange"],["value","1"],["value","0"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["matTooltipPosition","above",3,"matTooltip","matTooltipDisabled"],["mat-flat-button","","color","accent",1,"ml-2",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,K1,1,0,"mat-spinner",2),t.YNc(5,nT,30,31,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"DIALOGS.ADD_OWNER.TITLE")),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[R.uh,_.O5,tt.$g,R.xY,G.KE,M.Nt,ft.Fj,ft.Q7,ft.JJ,ft.oH,G.TO,Zt.gD,zt.ey,R.H8,ot.lW,Ut.gM],pipes:[p.X$],styles:[""]}),n})();var rT=o(23256);function aT(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().addOwner()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ADMIN.OWNERS.ADD")," "))}function sT(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeOwner()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.selected.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.OWNERS.DELETE")," ")}}function oT(n,r){1&n&&t._UZ(0,"mat-spinner",9)}function lT(n,r){if(1&n&&t._UZ(0,"perun-web-apps-owners-list",10),2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("filterValue",e.filterValue)("owners",e.owners)("selection",e.selected)}}let cT=(()=>{class n{constructor(e,i,a){this.ownersManagerService=e,this.dialog=i,this.guiAuthResolver=a,this.owners=[],this.selected=new P.Ov(!0,[]),this.filterValue="",this.tableId=fn.v1}ngOnInit(){this.setAuth(),this.refreshTable()}setAuth(){this.removeAuth=this.guiAuthResolver.isAuthorized("deleteOwner_Owner_policy",[]),this.addAuth=this.guiAuthResolver.isAuthorized("createOwner_Owner_policy",[])}refreshTable(){this.loading=!0,this.ownersManagerService.getAllOwners().subscribe(e=>{this.owners=e,this.selected.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}addOwner(){const e=(0,oe.kZ)();e.width="400px",e.data={},this.dialog.open(iT,e).afterClosed().subscribe(a=>{a&&this.refreshTable()})}removeOwner(){const e=(0,oe.kZ)();e.width="400px",e.data=this.selected.selected,this.dialog.open(q1,e).afterClosed().subscribe(a=>{a&&(this.selected.clear(),this.refreshTable())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.aC),t.Y36(R.uw),t.Y36(z.x4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-owners"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent","class","mr-2 action-button",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","class","mr-2",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","filterValue","owners","selection",4,"ngIf"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"tableId","filterValue","owners","selection"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,aT,3,3,"button",2),t.YNc(6,sT,3,4,"button",3),t.TgZ(7,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(8,oT,1,0,"mat-spinner",5),t.YNc(9,lT,1,4,"perun-web-apps-owners-list",6),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"ADMIN.OWNERS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.addAuth),t.xp6(1),t.Q6J("ngIf",i.removeAuth),t.xp6(1),t.Q6J("placeholder","ADMIN.OWNERS.FILTER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,rT.Q],pipes:[p.X$],styles:[""]}),n})();var uT=o(74010);function hT(n,r){1&n&&t._UZ(0,"mat-spinner",5)}function dT(n,r){if(1&n&&t._UZ(0,"perun-web-apps-facilities-list",6),2&n){const e=t.oxw();t.Q6J("tableId",e.tableId)("filterValue",e.filterValue)("facilities",e.facilities)("displayedColumns",e.displayedColumns)}}let fT=(()=>{class n{constructor(e,i){this.facilityManager=e,this.route=i,this.facilities=[],this.filterValue="",this.tableId=fn.zW,this.displayedColumns=["id","name","description"]}ngOnInit(){this.loading=!0,this.route.parent.params.subscribe(e=>{this.userId=e.userId,this.refreshTable()})}refreshTable(){this.loading=!0,this.facilityManager.getAssignedFacilitiesByUser(this.userId).subscribe(e=>{this.facilities=e.map(i=>({facility:i})),this.loading=!1})}applyFilter(e){this.filterValue=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.IQ),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-facilities"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","filterValue","facilities","displayedColumns",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"tableId","filterValue","facilities","displayedColumns"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.TgZ(5,"perun-web-apps-immediate-filter",2),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(6,hT,1,0,"mat-spinner",3),t.YNc(7,dT,1,4,"perun-web-apps-facilities-list",4),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"USER_DETAIL.FACILITIES.TITLE")),t.xp6(3),t.Q6J("placeholder","USER_DETAIL.FACILITIES.FILTER_PLACEHOLDER"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,je.L,_.O5,tt.$g,uT.X],pipes:[p.X$],styles:[""]}),n})();var pT=o(62707),Sr=o(53251),mT=o(60526),gT=o(24179),_T=o(12651),vT=o(19191);function xT(n,r){1&n&&t._UZ(0,"mat-spinner",6)}function yT(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"perun-web-apps-vo-search-select",7),t.NdJ("voSelected",function(a){return t.CHM(e),t.oxw().loadMember(a)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("vos",e.vos)}}function TT(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.STATUS")," ")}function bT(n,r){1&n&&t._UZ(0,"mat-spinner",6)}const CT=function(){return["id","recent","name","description","groupStatus","expiration"]};function wT(n,r){if(1&n&&t._UZ(0,"perun-web-apps-groups-list",16),2&n){const e=t.oxw(4);t.Q6J("groups",e.groups)("displayedColumns",t.DdM(2,CT))}}const AT=function(n,r){return["/organizations",n,"members",r]};function ET(n,r){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",10),t.TgZ(2,"span",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",12),t._uU(6),t.qZA(),t.qZA(),t._UZ(7,"app-member-overview-membership",13),t.TgZ(8,"p",14),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,wT,1,3,"perun-web-apps-groups-list",15),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,7,"USER_DETAIL.ACCOUNTS.MEMBER"),":"),t.xp6(2),t.Q6J("routerLink",t.WLB(11,AT,e.selectedVo.id,e.member.id)),t.xp6(1),t.hij("",e.member.id," "),t.xp6(1),t.Q6J("member",e.member)("vo",e.selectedVo),t.xp6(2),t.Oqu(t.lcZ(10,9,"USER_DETAIL.ACCOUNTS.GROUPS")),t.xp6(2),t.Q6J("ngIf",!e.loading)}}function ST(n,r){if(1&n&&(t.YNc(0,bT,1,0,"mat-spinner",1),t.YNc(1,ET,12,14,"div",4)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function DT(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_ATT")," ")}function LT(n,r){1&n&&t._UZ(0,"mat-spinner")}function kT(n,r){if(1&n&&t._UZ(0,"app-one-entity-attribute-page",18),2&n){const e=t.oxw(3);t.Q6J("entity","member")("entityId",e.member.id)}}function IT(n,r){if(1&n&&(t.YNc(0,LT,1,0,"mat-spinner",4),t.YNc(1,kT,1,2,"app-one-entity-attribute-page",17)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function MT(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_GROUP_ATT")," ")}function OT(n,r){1&n&&t._UZ(0,"mat-spinner")}function NT(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","group")}}function FT(n,r){if(1&n&&(t.YNc(0,OT,1,0,"mat-spinner",4),t.YNc(1,NT,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function PT(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"USER_DETAIL.ACCOUNTS.MEMBER_RESOURCE_ATT")," ")}function RT(n,r){1&n&&t._UZ(0,"mat-spinner")}function ZT(n,r){if(1&n&&t._UZ(0,"app-two-entity-attribute-page",20),2&n){const e=t.oxw(3);t.Q6J("firstEntity","member")("firstEntityId",e.member.id)("secondEntity","resource")}}function BT(n,r){if(1&n&&(t.YNc(0,RT,1,0,"mat-spinner",4),t.YNc(1,ZT,1,3,"app-two-entity-attribute-page",19)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function UT(n,r){1&n&&(t.TgZ(0,"mat-tab-group"),t.TgZ(1,"mat-tab"),t.YNc(2,TT,2,3,"ng-template",8),t.YNc(3,ST,2,2,"ng-template",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,DT,2,3,"ng-template",8),t.YNc(6,IT,2,2,"ng-template",9),t.qZA(),t.TgZ(7,"mat-tab"),t.YNc(8,MT,2,3,"ng-template",8),t.YNc(9,FT,2,2,"ng-template",9),t.qZA(),t.TgZ(10,"mat-tab"),t.YNc(11,PT,2,3,"ng-template",8),t.YNc(12,BT,2,2,"ng-template",9),t.qZA(),t.qZA())}function GT(n,r){1&n&&(t.TgZ(0,"app-alert",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USER_DETAIL.ACCOUNTS.NO_VOS")))}let VT=(()=>{class n{constructor(e,i,a,s){this.route=e,this.usersService=i,this.membersService=a,this.groupService=s,this.initLoading=!1,this.loading=!1,this.vos=[],this.selectedVo=null,this.member=null,this.groups=[]}ngOnInit(){this.initLoading=!0,this.route.parent.params.subscribe(e=>{this.userId=e.userId,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(i=>{this.vos=i,this.initLoading=!1},()=>this.initLoading=!1)})}loadMember(e){this.loading=!0,this.selectedVo=e,this.membersService.getMemberByUser(this.selectedVo.id,this.userId).subscribe(i=>{this.member=i,this.groupService.getMemberRichGroupsWithAttributesByNames(this.member.id,["urn:perun:member_group:attribute-def:virt:groupStatus"]).subscribe(a=>{this.groups=a,this.loading=!1},()=>this.loading=!1)},()=>this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(H.Fv),t.Y36(H.uq),t.Y36(H.ff))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-user-accounts"]],decls:8,vars:7,consts:[[1,"page-title"],["class","ml-auto mr-auto",4,"ngIf"],[1,"d-flex"],["class","w-50",3,"vos","voSelected",4,"ngIf"],[4,"ngIf"],["alert_type","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"w-50",3,"vos","voSelected"],["matTabLabel",""],["matTabContent",""],[1,"mt-4","mb-4"],[1,"subtitle","mr-2"],["queryParamsHandling","merge",1,"member-link",3,"routerLink"],[3,"member","vo"],[1,"mt-4","subtitle"],[3,"groups","displayedColumns",4,"ngIf"],[3,"groups","displayedColumns"],[3,"entity","entityId",4,"ngIf"],[3,"entity","entityId"],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,xT,1,0,"mat-spinner",1),t.TgZ(4,"div",2),t.YNc(5,yT,1,1,"perun-web-apps-vo-search-select",3),t.qZA(),t.YNc(6,UT,13,0,"mat-tab-group",4),t.YNc(7,GT,3,3,"app-alert",5)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,5,"USER_DETAIL.ACCOUNTS.TITLE")),t.xp6(2),t.Q6J("ngIf",i.initLoading),t.xp6(2),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!(i.initLoading||0===i.vos.length)),t.xp6(1),t.Q6J("ngIf",!i.initLoading&&0===i.vos.length))},directives:[_.O5,tt.$g,pT.M,Sr.SP,Sr.uX,Sr.uD,Sr.Vc,m.yS,mT.b,gT.W,_T.t,vT.Y,rt.w],pipes:[p.X$],styles:[".subtitle[_ngcontent-%COMP%]{font-size:1.2rem}"]}),n})(),wu=(()=>{class n{transform(e){if(e)return e.split(".").pop()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"parseEventName",type:n,pure:!0}),n})();function HT(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.OBJECTS")," ")}function zT(n,r){if(1&n&&t._UZ(0,"pre",9),2&n){const e=t.oxw();t.Q6J("innerHTML",e.syntaxHighlight(e.eventData),t.oJD)}}function YT(n,r){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"DIALOGS.AUDIT_MESSAGE_DETAIL.MESSAGE")," ")}function WT(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.message)}}let XT=(()=>{class n{constructor(e,i,a){this.dialogRef=e,this.data=i,this.clipboard=a,this.tabIndex=0,this.eventData={}}ngOnInit(){const e=this.data.message.event;this.actor=this.data.message.actor,this.createdAt=this.data.message.createdAt,e.message&&(this.message=e.message,delete e.message),e.name&&(this.title=e.name,delete e.name),this.eventData=e}tabChanged(e){this.tabIndex=e.index}copyObjects(){this.clipboard.copy(JSON.stringify(this.eventData,null,2))}copyMessage(){this.clipboard.copy(this.message)}syntaxHighlight(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(i){let a="number";return/^"/.test(i)?a=/:$/.test(i)?"key":"string":/true|false/.test(i)?a="boolean":/null/.test(i)&&(a="null"),'<span class="'+a+'">'+i+"</span>"})}onClose(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI),t.Y36(Be.TU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-message-detail-dialog"]],decls:26,vars:19,consts:[[1,"admin-theme"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-button","",3,"click"],[3,"innerHTML"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"parseEventName"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"mat-tab-group",3),t.NdJ("selectedTabChange",function(s){return i.tabChanged(s)}),t.TgZ(11,"mat-tab"),t.YNc(12,HT,2,3,"ng-template",4),t.YNc(13,zT,1,1,"ng-template",5),t.qZA(),t.TgZ(14,"mat-tab"),t.YNc(15,YT,2,3,"ng-template",4),t.YNc(16,WT,2,1,"ng-template",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",6),t.TgZ(18,"button",7),t.NdJ("click",function(){return i.onClose()}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"button",8),t.NdJ("click",function(){return 0===i.tabIndex?i.copyObjects():i.copyMessage()}),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"mat-icon"),t._uU(25,"content_copy"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){let a;t.xp6(2),t.hij(" ",t.lcZ(3,7,null!==(a=t.lcZ(4,9,i.title))&&void 0!==a?a:"DIALOGS.AUDIT_MESSAGE_DETAIL.TITLE")," "),t.xp6(5),t.HOy(" ",t.lcZ(8,11,"DIALOGS.AUDIT_MESSAGE_DETAIL.ACTOR"),": ",i.actor,", ",t.lcZ(9,13,"DIALOGS.AUDIT_MESSAGE_DETAIL.CREATED_AT"),": ",i.createdAt," "),t.xp6(12),t.hij(" ",t.lcZ(20,15,"DIALOGS.AUDIT_MESSAGE_DETAIL.CLOSE")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"DIALOGS.AUDIT_MESSAGE_DETAIL.COPY")," ")}},directives:[R.uh,R.xY,Sr.SP,Sr.uX,Sr.uD,Sr.Vc,R.H8,ot.lW,g.Hw],pipes:[p.X$,wu],styles:[".key{color:brown}.string{color:green}.number{color:#ff8c00}.boolean{color:#00f}.null{color:#f0f}\n"],encapsulation:2}),n})();var $T=o(86087),JT=o(36787),QT=o(62383);function jT(n,r){1&n&&(t.TgZ(0,"div",16),t._UZ(1,"mat-spinner",17),t.qZA())}function qT(n,r){1&n&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ID")," "))}function KT(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function tb(n,r){1&n&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUDIT_MESSAGES_LIST.TIMESTAMP")," "))}function eb(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseDate"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,!0)," ")}}function nb(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.EVENT_NAME")))}function ib(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"parseEventName"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.event.name)," ")}}function rb(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.ACTOR")))}function ab(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.actor," ")}}function sb(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUDIT_MESSAGES_LIST.MESSAGE")))}function ob(n,r){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.event.message," ")}}function lb(n,r){1&n&&t._UZ(0,"th",20)}function cb(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"button",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewDetails(s)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AUDIT_MESSAGES_LIST.VIEW_DETAIL")," "))}function ub(n,r){1&n&&t._UZ(0,"tr",22)}function hb(n,r){1&n&&t._UZ(0,"tr",23)}function db(n,r){1&n&&(t.TgZ(0,"app-alert",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_AUDIT_MESSAGES"),"\n"))}let fb=(()=>{class n{constructor(e,i,a){this.dialog=e,this.dynamicPaginatingService=i,this.tableConfigService=a,this.pageSizeOptions=oe.f7,this.displayedColumns=["id","timestamp","name","actor","event.message","detail"]}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.child.paginator.pageIndex=0),(0,JT.T)(this.sort.sortChange,this.child.paginator.page).pipe((0,Ye.b)(()=>this.loadAuditMessagesPage())).subscribe()}ngOnInit(){this.dataSource=new z.Hy(this.dynamicPaginatingService,null),this.dataSource.loadAuditMessages(this.tableConfigService.getTablePageSize(this.tableId),0,"DESCENDING")}ngOnChanges(){this.dataSource&&(this.child.paginator.pageIndex=0,this.loadAuditMessagesPage())}loadAuditMessagesPage(){this.dataSource.loadAuditMessages(this.child.paginator.pageSize,this.child.paginator.pageIndex,"asc"===this.sort.direction?"ASCENDING":"DESCENDING")}viewDetails(e){const i=(0,oe.kZ)(),a=JSON.parse(JSON.stringify(e));i.minWidth="700px",i.maxWidth="1000px",i.data={message:a},this.dialog.open(XT,i)}exportData(e){(0,oe.O6)((0,oe.Xn)(this.dataSource.getData(),this.displayedColumns.filter(i=>"detail"!==i),this.getExportDataForColumn,this),e)}getExportDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"timestamp":return(0,_.p6)(e.createdAt,"d.M.y H.mm.ss","en");case"name":return e.event.name.split(".").pop();case"actor":return e.actor;default:return""}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.uw),t.Y36(z.ly),t.Y36(fn.dB))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-messages-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(oe.l9,7),t.Gf(sn.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},inputs:{tableId:"tableId",refresh:"refresh",displayedColumns:"displayedColumns",searchString:"searchString"},features:[t._Bn([{provide:$T.ye,useClass:z.Be}]),t.TTD],decls:28,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","pageSizeOptions","tableId","exportData"],["class","spinner-container",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","timestamp"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actor"],["matColumnDef","event.message"],["matColumnDef","detail"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],[1,"spinner-container"],[1,"ml-auto","mr-auto"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["color","accent","mat-flat-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(s){return i.exportData(s)}),t.YNc(3,jT,2,0,"div",2),t.ALo(4,"async"),t.TgZ(5,"table",3),t.ynx(6,4),t.YNc(7,qT,3,3,"th",5),t.YNc(8,KT,2,1,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,tb,3,3,"th",5),t.YNc(11,eb,3,4,"td",6),t.BQk(),t.ynx(12,8),t.YNc(13,nb,3,3,"th",9),t.YNc(14,ib,3,3,"td",6),t.BQk(),t.ynx(15,10),t.YNc(16,rb,3,3,"th",9),t.YNc(17,ab,2,1,"td",6),t.BQk(),t.ynx(18,11),t.YNc(19,sb,3,3,"th",9),t.YNc(20,ob,2,1,"td",6),t.BQk(),t.ynx(21,12),t.YNc(22,lb,1,0,"th",9),t.YNc(23,cb,4,3,"td",6),t.BQk(),t.YNc(24,ub,1,0,"tr",13),t.YNc(25,hb,1,0,"tr",14),t.qZA(),t.qZA(),t.qZA(),t.YNc(26,db,3,3,"app-alert",15),t.ALo(27,"async")),2&e&&(t.Q6J("hidden",0===i.dataSource.allObjectCount&&!1===t.lcZ(1,9,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataLength",i.dataSource.allObjectCount)("pageSizeOptions",i.pageSizeOptions)("tableId",i.tableId),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,11,i.dataSource.loading$)),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.allObjectCount&&!1===t.lcZ(27,13,i.dataSource.loading$)))},directives:[_n.l,_.O5,tt.$g,Z.BZ,sn.YE,Z.w1,Z.fO,Z.ge,sn.nU,Z.Dz,Z.ev,ot.lW,Z.as,Z.XQ,Z.nj,Z.Gk,rt.w],pipes:[_.Ov,p.X$,QT.M,wu],styles:[""]}),n})(),pb=(()=>{class n{constructor(){this.tableId=fn.yW,this.refresh=!1}refreshTable(){this.refresh=!this.refresh}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-audit-log"]],decls:5,vars:5,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"refresh","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t._UZ(4,"app-audit-messages-list",2)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,3,"ADMIN.AUDIT_LOG.TITLE")),t.xp6(3),t.Q6J("refresh",i.refresh)("tableId",i.tableId))},directives:[an.t,fb],pipes:[p.X$],styles:[""]}),n})();var mb=o(4834);let gb=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}onCancel(){this.dialogRef.close(!1)}onSubmit(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.so),t.Y36(R.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-edit-enforce-consents-dialog"]],decls:26,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-2","mb-2"],[1,"font-weight-bold","mt-3"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","accent",1,"ml-2",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"mat-divider"),t.TgZ(11,"p",2),t._uU(12),t.qZA(),t._UZ(13,"mat-divider"),t.TgZ(14,"div",3),t._uU(15),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.TgZ(18,"div",4),t.TgZ(19,"button",5),t.NdJ("click",function(){return i.onCancel()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",6),t.NdJ("click",function(){return i.onSubmit()}),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Tol(i.data.theme),t.xp6(2),t.hij(" ",i.data.enforceConsents?t.lcZ(3,9,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_TITLE"):t.lcZ(4,11,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_TITLE")," "),t.xp6(5),t.hij(" ",i.data.enforceConsents?t.lcZ(8,13,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_DESCRIPTION"):t.lcZ(9,15,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_DESCRIPTION")," "),t.xp6(5),t.Oqu(i.data.consentHubName),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(16,17,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BOLD_DESCRIPTION"):t.lcZ(17,19,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BOLD_DESCRIPTION")," "),t.xp6(5),t.hij(" ",t.lcZ(21,21,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.CANCEL_BUTTON")," "),t.xp6(3),t.hij(" ",i.data.enforceConsents?t.lcZ(24,23,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.DISABLE_BUTTON"):t.lcZ(25,25,"DIALOGS.EDIT_ENFORCE_CONSENTS_FLAG.ENFORCE_BUTTON")," "))},directives:[R.uh,R.xY,mb.d,R.H8,ot.lW],pipes:[p.X$],styles:[""]}),n})();function _b(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",16),t.TgZ(1,"mat-checkbox",17),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw();return a?s.masterToggle():null}),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("aria-label",e.checkboxLabel())("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function vb(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",18),t.TgZ(1,"mat-checkbox",19),t.NdJ("change",function(a){const d=t.CHM(e).$implicit,T=t.oxw();return a?T.selection.toggle(d):null})("click",function(a){return a.stopPropagation()}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("aria-label",i.checkboxLabel(e))("checked",i.selection.isSelected(e))}}function xb(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ID")," "))}function yb(n,r){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.id)}}function Tb(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NAME")," "))}function bb(n,r){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function Cb(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.ENFORCE_CONSENTS")," "))}function wb(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",22),t.TgZ(1,"mat-slide-toggle",23),t.NdJ("change",function(a){const d=t.CHM(e).$implicit;return t.oxw().changeEnforceFlag(d,a)}),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(1),t.Q6J("checked",e.enforceConsents)}}function Ab(n,r){1&n&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.FACILITIES")," "))}function Eb(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",25),t._uU(3),t.qZA(),t._UZ(4,"br"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.hij(" #",e.id,"")}}function Sb(n,r){if(1&n&&(t.TgZ(0,"td",22),t.YNc(1,Eb,5,2,"span",24),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.facilities)}}function Db(n,r){1&n&&t._UZ(0,"tr",26)}function Lb(n,r){1&n&&t._UZ(0,"tr",27)}function kb(n,r){1&n&&(t.TgZ(0,"app-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_CONSENT_HUBS"),"\n"))}function Ib(n,r){1&n&&(t.TgZ(0,"app-alert",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SHARED.COMPONENTS.CONSENT_HUBS_LIST.NO_FILTER_RESULTS"),"\n"))}let Mb=(()=>{class n{constructor(e,i,a,s,d){this.tableCheckbox=e,this.dialog=i,this.notificator=a,this.translate=s,this.consentsManager=d,this.filterValue="",this.displayedColumns=["select","id","name","enforceConsents","facilities"],this.selection=new P.Ov(!0,[]),this.exporting=!1,this.pageSizeOptions=oe.f7}set matSort(e){this.sort=e,this.setDataSource()}ngOnChanges(){this.dataSource=new Z.by(this.consentHubs),this.setDataSource()}getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"name":return e.name;case"enforceConsents":return e.enforceConsents?"true":"false";case"facilities":{let a="";return e.facilities.forEach(s=>a+=s.name+" #"+s.id+";"),a.slice(0,-1)}default:return""}}exportData(e){(0,oe.O6)((0,oe.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getDataForColumn,this),e)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(e,i)=>(0,oe.Sd)(e,i,this.displayedColumns,this.getDataForColumn,this),this.dataSource.sortData=(e,i)=>(0,oe.pR)(e,i,this.getDataForColumn,this),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}changeEnforceFlag(e,i){i.source.checked=e.enforceConsents;const a=(0,oe.kZ)();a.width="550px",a.data={theme:"admin-theme",enforceConsents:e.enforceConsents,consentHubName:e.name},this.dialog.open(gb,a).afterClosed().subscribe(d=>{d&&(e.enforceConsents=!e.enforceConsents,this.consentsManager.updateConsentHub({consentHub:e}).subscribe(T=>{i.source.checked=T.enforceConsents,e.enforceConsents=T.enforceConsents,this.translate.get("SHARED.COMPONENTS.CONSENT_HUBS_LIST.CHANGE_ENFORCE_CONSENTS_SUCCESS").subscribe(E=>{this.notificator.showSuccess(E)})},()=>e.enforceConsents=!e.enforceConsents))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.UA),t.Y36(R.uw),t.Y36(z.V6),t.Y36(p.sK),t.Y36(H.WY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-consent-hubs-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(oe.l9,7),t.Gf(sn.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(i.child=a.first),t.iGM(a=t.CRH())&&(i.matSort=a.first)}},inputs:{consentHubs:"consentHubs",filterValue:"filterValue",displayedColumns:"displayedColumns",tableId:"tableId",selection:"selection"},features:[t.TTD],decls:22,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enforceConsents"],["matColumnDef","facilities"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],[3,"checked","change"],[4,"ngFor","ngForOf"],[1,"text-muted"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"perun-web-apps-table-wrapper",1),t.NdJ("exportData",function(s){return i.exportData(s)}),t.TgZ(2,"table",2),t.ynx(3,3),t.YNc(4,_b,2,3,"th",4),t.YNc(5,vb,2,2,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,xb,3,3,"th",7),t.YNc(8,yb,2,1,"td",8),t.BQk(),t.ynx(9,9),t.YNc(10,Tb,3,3,"th",7),t.YNc(11,bb,2,1,"td",10),t.BQk(),t.ynx(12,11),t.YNc(13,Cb,3,3,"th",7),t.YNc(14,wb,2,1,"td",10),t.BQk(),t.ynx(15,12),t.YNc(16,Ab,3,3,"th",7),t.YNc(17,Sb,2,1,"td",10),t.BQk(),t.YNc(18,Db,1,0,"tr",13),t.YNc(19,Lb,1,0,"tr",14),t.qZA(),t.qZA(),t.qZA(),t.YNc(20,kb,3,3,"app-alert",15),t.YNc(21,Ib,3,3,"app-alert",15)),2&e&&(t.Q6J("hidden",0===i.consentHubs.length||0===i.dataSource.filteredData.length),t.xp6(1),t.Q6J("tableId",i.tableId)("dataLength",i.dataSource.filteredData.length)("pageSizeOptions",i.pageSizeOptions),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.consentHubs.length),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.filteredData.length&&0!==i.consentHubs.length))},directives:[_n.l,Z.BZ,sn.YE,Z.w1,Z.fO,Z.ge,xt.oG,Z.Dz,Z.ev,sn.nU,ne.Rr,_.sg,Z.as,Z.XQ,Z.nj,Z.Gk,_.O5,rt.w],pipes:[p.X$],styles:[""]}),n})();function Ob(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().evaluateConsents()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"ADMIN.CONSENT_HUBS.EVALUATE_CONSENTS")," ")}}function Nb(n,r){1&n&&t._UZ(0,"mat-spinner",7)}function Fb(n,r){if(1&n&&t._UZ(0,"app-perun-web-apps-consent-hubs-list",8),2&n){const e=t.oxw();t.Q6J("consentHubs",e.consentHubs)("selection",e.selection)("filterValue",e.filterValue)("tableId",e.tableId)}}let Pb=(()=>{class n{constructor(e,i,a,s,d){this.consentsManager=e,this.authResolver=i,this.notificator=a,this.translate=s,this.dialog=d,this.loading=!1,this.tableId=fn.HE,this.selection=new P.Ov(!0,[]),this.filterValue="",this.consentHubs=[]}ngOnInit(){this.refreshTable()}applyFilter(e){this.filterValue=e}refreshTable(){this.loading=!0,this.consentsManager.getAllConsentHubs().subscribe(e=>{this.consentHubs=e,this.loading=!1})}evaluateConsents(){const e=(0,oe.kZ)();e.width="500px",e.data={title:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_TITLE"),theme:"admin-theme",description:this.translate.instant("ADMIN.CONSENT_HUBS.CONFIRM_DIALOG_DESCRIPTION"),items:this.selection.selected.map(a=>a.name),type:"confirmation",showAsk:!1},this.dialog.open(ss.Ts,e).afterClosed().subscribe(a=>{a&&this.evaluateConsentsForConsentHub(0)})}evaluateConsentsForConsentHub(e){if(e===this.selection.selected.length)return this.notificator.showSuccess(this.translate.instant("ADMIN.CONSENT_HUBS.EVALUATION_FINISH")),void this.selection.clear();this.consentsManager.evaluateConsentsForConsentHub(this.selection.selected[e].id).subscribe(()=>{this.evaluateConsentsForConsentHub(++e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.WY),t.Y36(z.x4),t.Y36(z.V6),t.Y36(p.sK),t.Y36(R.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perun-web-apps-admin-consent-hubs"]],decls:9,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","action-button mr-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"consentHubs","selection","filterValue","tableId",4,"ngIf"],["color","accent","mat-flat-button","",1,"action-button","mr-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],[3,"consentHubs","selection","filterValue","tableId"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"perun-web-apps-refresh-button",1),t.NdJ("refresh",function(){return i.refreshTable()}),t.qZA(),t.YNc(5,Ob,3,4,"button",2),t.TgZ(6,"perun-web-apps-immediate-filter",3),t.NdJ("filter",function(s){return i.applyFilter(s)}),t.qZA(),t.YNc(7,Nb,1,0,"mat-spinner",4),t.YNc(8,Fb,1,4,"app-perun-web-apps-consent-hubs-list",5),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,5,"ADMIN.CONSENT_HUBS.TITLE")),t.xp6(3),t.Q6J("ngIf",i.authResolver.isPerunAdmin()),t.xp6(1),t.Q6J("placeholder","ADMIN.CONSENT_HUBS.SEARCH"),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[an.t,_.O5,ot.lW,je.L,tt.$g,Mb],pipes:[p.X$],styles:[""]}),n})();var Rb=o(57788);const Zb=[{path:"",component:A,children:[{path:"",component:N,data:{animation:"AdminOverviewPage"}},{path:"attributes",component:Le,data:{animation:"AdminAttributesPage"}},{path:"users",component:ey.t,data:{animation:"AdminUsersPage"}},{path:"owners",component:cT,data:{animation:"AdminOwnersPage"}},{path:"services",component:Uy,data:{animation:"AdminServicesPage"}},{path:"audit_log",component:pb,data:{animation:"AdminAuditLogPage"}},{path:"visualizer",component:ke,children:[{path:"",component:Je,data:{animation:"VisualizerOverviewPage"}},{path:"attrDependencies",component:ze,data:{animation:"VisualizerAttrModulesPage"}},{path:"userDestinationRelationship",component:ce,data:{animation:"UserDestinationRelationshipPage"}},{path:"userDestinationRelationship/graph",component:ty,data:{animation:"UserDestinationGraphPage"}}]},{path:"ext_sources",component:xy,data:{animation:"AdminExtSourcesPage"}},{path:"consent_hubs",component:Pb,data:{animation:"AdminConsentHubsPage"}},{path:"searcher",component:Rb.g,data:{animation:"AdminSearcherPage"}}]},{path:"users/:userId",component:cy,children:[{path:"",component:uy.Z,data:{animation:"UserOverviewPage"}},{path:"accounts",component:VT,data:{animation:"UserAccountsPage"}},{path:"attributes",component:fy.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:hy.j,data:{animation:"UserOrganizationsPage",showPrincipal:!1}},{path:"groups",component:dy.u,data:{animation:"UserGroupsPage",showPrincipal:!1}},{path:"identities",component:Iy,data:{animation:"UserIdentitiesPage"}},{path:"facilities",component:fT,data:{animation:"UserFacilitiesPage"}},{path:"resources",component:Yy,data:{animation:"UserRoles"}},{path:"identities/:identityId",component:qy,data:{animation:"UserIdentityDetailPage"}},{path:"roles",component:yy.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:Ty.R,data:{animation:"UserServiceIdentities"}},{path:"associated-users",component:F1.d,data:{animation:"AssociatedUsersPage"}}]},{path:"services/:serviceId",component:s1,children:[{path:"",component:o1,data:{animation:"ServiceOverviewPage"}},{path:"required-attributes",component:N1,data:{animation:"ServiceRequiredAttributesPage"}},{path:"destinations",component:z1,data:{animation:"ServiceDestinationsPage"}}]}];let Bb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Zb)],m.Bz]}),n})();var Ub=o(14264),Gb=o(63189),Vb=o(19516),Hb=o(46142);let zb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[sm,Hx,_.ez,Bb,Ub.m,Gb.r,Rn.ez,Vb.d4,Hb.UsersModule]]}),n})()},70242:(w,k,o)=>{"use strict";o.d(k,{q:()=>ne});var u=o(84847),x=o(20449),v=o(32075),_=o(9244),m=o(36908),l=o(5e3),t=o(18750),c=o(77446),h=o(69808),g=o(25245),f=o(29772),p=o(98380),C=o(51062);function A(Ut,xt){if(1&Ut){const pt=l.EpF();l.TgZ(0,"th",21),l.TgZ(1,"mat-checkbox",22),l.NdJ("change",function(Jt){l.CHM(pt);const ge=l.oxw();return Jt?ge.masterToggle():null}),l.qZA(),l.qZA()}if(2&Ut){const pt=l.oxw();l.xp6(1),l.Q6J("aria-label",pt.checkboxLabel())("checked",pt.selection.hasValue()&&pt.isAllSelected())("indeterminate",pt.selection.hasValue()&&!pt.isAllSelected())}}function L(Ut,xt){if(1&Ut){const pt=l.EpF();l.TgZ(0,"td",23),l.TgZ(1,"mat-checkbox",24),l.NdJ("change",function(Jt){const _e=l.CHM(pt).$implicit,Te=l.oxw();return Jt?Te.selection.toggle(_e):null})("click",function(Jt){return Jt.stopPropagation()}),l.qZA(),l.qZA()}if(2&Ut){const pt=xt.$implicit,Nt=l.oxw();l.xp6(1),l.Q6J("aria-label",Nt.checkboxLabel(pt))("checked",Nt.selection.isSelected(pt))}}function N(Ut,xt){1&Ut&&(l.TgZ(0,"th",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION_ID")," "))}function P(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",26),l._uU(1),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.hij(" ",pt.id," ")}}function R(Ut,xt){1&Ut&&(l.TgZ(0,"th",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.SERVICE")," "))}function Z(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l._uU(1),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.Oqu(pt.service.name)}}function z(Ut,xt){1&Ut&&l._UZ(0,"th",28)}function H(Ut,xt){1&Ut&&(l.TgZ(0,"mat-icon",30),l.ALo(1,"translate"),l._uU(2," warning "),l.qZA()),2&Ut&&l.s9C("matTooltip",l.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.WARN"))}function tt(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l.YNc(1,H,3,3,"mat-icon",29),l.qZA()),2&Ut){const pt=xt.$implicit,Nt=l.oxw();l.xp6(1),l.Q6J("ngIf",!Nt.services.has(pt.service.id))}}function rt(Ut,xt){1&Ut&&(l.TgZ(0,"th",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.FACILITY")," "))}function ot(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l._uU(1),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.Oqu(pt.facility.name)}}function J(Ut,xt){1&Ut&&(l.TgZ(0,"th",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.DESTINATION")," "))}function et(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l._uU(1),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.Oqu(pt.destination)}}function q(Ut,xt){1&Ut&&(l.TgZ(0,"th",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.TYPE")," "))}function at(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l._uU(1),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.Oqu(pt.type.toUpperCase())}}function Y(Ut,xt){1&Ut&&l._UZ(0,"th",28)}function K(Ut,xt){1&Ut&&(l.TgZ(0,"mat-icon",32),l.ALo(1,"translate"),l._uU(2," check_circle_outline "),l.qZA()),2&Ut&&l.s9C("matTooltip",l.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.ALLOWED"))}function ut(Ut,xt){1&Ut&&(l.TgZ(0,"mat-icon",32),l.ALo(1,"translate"),l._uU(2," block "),l.qZA()),2&Ut&&l.s9C("matTooltip",l.lcZ(1,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.BLOCKED"))}function it(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l.YNc(1,K,3,3,"mat-icon",31),l.YNc(2,ut,3,3,"mat-icon",31),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.Q6J("ngIf",!pt.blocked),l.xp6(1),l.Q6J("ngIf",pt.blocked)}}function G(Ut,xt){1&Ut&&(l.TgZ(0,"th",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.PROPAGATION_TYPE")," "))}function M(Ut,xt){if(1&Ut&&(l.TgZ(0,"td",27),l._uU(1),l.qZA()),2&Ut){const pt=xt.$implicit;l.xp6(1),l.Oqu(pt.propagationType)}}function ft(Ut,xt){1&Ut&&l._UZ(0,"tr",33)}function It(Ut,xt){1&Ut&&l._UZ(0,"tr",34)}function Zt(Ut,xt){1&Ut&&(l.TgZ(0,"app-alert",35),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}function zt(Ut,xt){1&Ut&&(l.TgZ(0,"app-alert",35),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&Ut&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED.COMPONENTS.DESTINATIONS_LIST.NO_DESTINATIONS"),"\n"))}let ne=(()=>{class Ut{constructor(pt,Nt){this.authResolver=pt,this.tableCheckbox=Nt,this.destinations=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.pageSizeOptions=_.f7}set matSort(pt){this.sort=pt,this.setDataSource()}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(pt=>"destinationId"!==pt)),this.dataSource=new v.by(this.destinations),this.setDataSource(),this.dataSource.filter=this.filterValue.toLowerCase()}getDataForColumn(pt,Nt){switch(Nt){case"destinationId":return pt.id.toString();case"service":return pt.service.name;case"facility":return pt.facility.name;case"destination":return pt.destination;case"type":return pt.type;case"status":return pt.blocked?"blocked":"allowed";case"propagationType":return pt.propagationType;default:return""}}exportData(pt){(0,_.O6)((0,_.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getDataForColumn,this),pt)}setDataSource(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(pt,Nt)=>(0,_.Sd)(pt,Nt,this.displayedColumns,this.getDataForColumn,this),this.dataSource.sortData=(pt,Nt)=>(0,_.pR)(pt,Nt,this.getDataForColumn,this),this.dataSource.paginator=this.child.paginator)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(pt){return pt?`${this.selection.isSelected(pt)?"deselect":"select"} row ${pt.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}}return Ut.\u0275fac=function(pt){return new(pt||Ut)(l.Y36(m.x4),l.Y36(m.UA))},Ut.\u0275cmp=l.Xpm({type:Ut,selectors:[["app-perun-web-apps-destination-list"]],viewQuery:function(pt,Nt){if(1&pt&&(l.Gf(u.YE,7),l.Gf(_.l9,7)),2&pt){let Jt;l.iGM(Jt=l.CRH())&&(Nt.matSort=Jt.first),l.iGM(Jt=l.CRH())&&(Nt.child=Jt.first)}},inputs:{destinations:"destinations",selection:"selection",filterValue:"filterValue",tableId:"tableId",displayedColumns:"displayedColumns",services:"services"},features:[l.TTD],decls:34,vars:9,consts:[[1,"card","mt-3",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","destinationId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","service"],["mat-cell","",4,"matCellDef"],["matColumnDef","warn"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","facility"],["matColumnDef","destination"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","propagationType"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],["class","warn","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"warn",3,"matTooltip"],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(pt,Nt){1&pt&&(l.TgZ(0,"div",0),l.TgZ(1,"perun-web-apps-table-wrapper",1),l.NdJ("exportData",function(ge){return Nt.exportData(ge)}),l.TgZ(2,"table",2),l.ynx(3,3),l.YNc(4,A,2,3,"th",4),l.YNc(5,L,2,2,"td",5),l.BQk(),l.ynx(6,6),l.YNc(7,N,3,3,"th",7),l.YNc(8,P,2,1,"td",8),l.BQk(),l.ynx(9,9),l.YNc(10,R,3,3,"th",7),l.YNc(11,Z,2,1,"td",10),l.BQk(),l.ynx(12,11),l.YNc(13,z,1,0,"th",12),l.YNc(14,tt,2,1,"td",10),l.BQk(),l.ynx(15,13),l.YNc(16,rt,3,3,"th",7),l.YNc(17,ot,2,1,"td",10),l.BQk(),l.ynx(18,14),l.YNc(19,J,3,3,"th",7),l.YNc(20,et,2,1,"td",10),l.BQk(),l.ynx(21,15),l.YNc(22,q,3,3,"th",7),l.YNc(23,at,2,1,"td",10),l.BQk(),l.ynx(24,16),l.YNc(25,Y,1,0,"th",12),l.YNc(26,it,3,2,"td",10),l.BQk(),l.ynx(27,17),l.YNc(28,G,3,3,"th",7),l.YNc(29,M,2,1,"td",10),l.BQk(),l.YNc(30,ft,1,0,"tr",18),l.YNc(31,It,1,0,"tr",19),l.qZA(),l.qZA(),l.qZA(),l.YNc(32,Zt,3,3,"app-alert",20),l.YNc(33,zt,3,3,"app-alert",20)),2&pt&&(l.Q6J("hidden",0===Nt.dataSource.filteredData.length||0===Nt.destinations.length),l.xp6(1),l.Q6J("tableId",Nt.tableId)("dataLength",Nt.dataSource.filteredData.length)("pageSizeOptions",Nt.pageSizeOptions),l.xp6(1),l.Q6J("dataSource",Nt.dataSource),l.xp6(28),l.Q6J("matHeaderRowDef",Nt.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",Nt.displayedColumns),l.xp6(1),l.Q6J("ngIf",0===Nt.dataSource.filteredData.length&&0!==Nt.destinations.length),l.xp6(1),l.Q6J("ngIf",0===Nt.destinations.length))},directives:[t.l,v.BZ,u.YE,v.w1,v.fO,v.ge,c.oG,v.Dz,v.ev,u.nU,h.O5,g.Hw,f.gM,v.as,v.XQ,v.nj,v.Gk,p.w],pipes:[C.X$],styles:[".warn[_ngcontent-%COMP%]{color:#ebe134}"]}),Ut})()},89466:(w,k,o)=>{"use strict";o.d(k,{u:()=>L});var u=o(112),x=o(48966),v=o(32075),_=o(36908),m=o(5e3),l=o(51062),t=o(69808),c=o(20773),h=o(98380),g=o(70242),f=o(47423);function p(N,P){1&N&&m._UZ(0,"mat-spinner",6)}function C(N,P){if(1&N&&m._UZ(0,"app-perun-web-apps-destination-list",11),2&N){const R=m.oxw(2);m.Q6J("destinations",R.destinations)("displayedColumns",R.displayedColumns)}}function A(N,P){if(1&N&&(m.TgZ(0,"div",7),m.TgZ(1,"app-alert",8),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"p"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"div",9),m._uU(8),m.ALo(9,"translate"),m.qZA(),m.YNc(10,C,1,2,"app-perun-web-apps-destination-list",10),m.qZA()),2&N){const R=m.oxw();m.xp6(2),m.Oqu(m.lcZ(3,4,"DIALOGS.REMOVE_DESTINATIONS.WARNING")),m.xp6(3),m.Oqu(m.lcZ(6,6,"DIALOGS.REMOVE_DESTINATIONS.DESCRIPTION")),m.xp6(3),m.hij(" ",m.lcZ(9,8,"DIALOGS.REMOVE_DESTINATIONS.ASK")," "),m.xp6(2),m.Q6J("ngIf",!R.loading)}}let L=(()=>{class N{constructor(R,Z,z,H,tt){this.dialogRef=R,this.data=Z,this.notificator=z,this.translate=H,this.serviceManager=tt,this.displayedColumns=[],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.destinations=this.data.destinations,this.displayedColumns="admin-theme"===this.theme?["destinationId","facility","destination","type","propagationType"]:["destinationId","service","destination","type","propagationType"],this.dataSource=new v.by(this.data.destinations)}onCancel(){this.dialogRef.close(!1)}deleteDestinations(){if(0===this.destinations.length)return this.notificator.showSuccess(this.translate.instant("DIALOGS.REMOVE_DESTINATIONS.SUCCESS")),void this.dialogRef.close(!0);const R=this.destinations.pop();this.serviceManager.removeDestination(R.service.id,R.facility.id,R.destination,R.type).subscribe(()=>{this.deleteDestinations()},()=>this.loading=!1)}onConfirm(){this.loading=!0,this.deleteDestinations()}}return N.\u0275fac=function(R){return new(R||N)(m.Y36(x.so),m.Y36(x.WI),m.Y36(_.V6),m.Y36(l.sK),m.Y36(u.KK))},N.\u0275cmp=m.Xpm({type:N,selectors:[["app-perun-web-apps-remove-destination-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","mr-auto ml-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[1,"mr-auto","ml-auto"],["mat-dialog-content",""],["alert_type","warn"],[1,"font-weight-bold"],[3,"destinations","displayedColumns",4,"ngIf"],[3,"destinations","displayedColumns"]],template:function(R,Z){1&R&&(m.TgZ(0,"h1",0),m._uU(1),m.ALo(2,"translate"),m.qZA(),m.TgZ(3,"div"),m.YNc(4,p,1,0,"mat-spinner",1),m.YNc(5,A,11,10,"div",2),m.TgZ(6,"div",3),m.TgZ(7,"button",4),m.NdJ("click",function(){return Z.onCancel()}),m._uU(8),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"button",5),m.NdJ("click",function(){return Z.onConfirm()}),m._uU(11),m.ALo(12,"translate"),m.qZA(),m.qZA(),m.qZA()),2&R&&(m.xp6(1),m.Oqu(m.lcZ(2,9,"DIALOGS.REMOVE_DESTINATIONS.TITLE")),m.xp6(2),m.Tol(Z.theme),m.xp6(1),m.Q6J("ngIf",Z.loading),m.xp6(1),m.Q6J("ngIf",!Z.loading),m.xp6(3),m.hij(" ",m.lcZ(9,11,"DIALOGS.REMOVE_DESTINATIONS.CANCEL")," "),m.xp6(2),m.Q6J("disabled",Z.loading),m.xp6(1),m.hij(" ",m.lcZ(12,13,"DIALOGS.REMOVE_DESTINATIONS.CONFIRM")," "))},directives:[x.uh,t.O5,c.$g,x.xY,h.w,g.q,x.H8,f.lW],pipes:[l.X$],styles:[""]}),N})()},23256:(w,k,o)=>{"use strict";o.d(k,{Q:()=>et});var u=o(84847),x=o(20449),v=o(32075),_=o(9244),m=o(36908),l=o(5e3),t=o(18750),c=o(77446),h=o(69808),g=o(98380),f=o(51062);function p(q,at){if(1&q){const Y=l.EpF();l.TgZ(0,"th",16),l.TgZ(1,"mat-checkbox",17),l.NdJ("change",function(ut){l.CHM(Y);const it=l.oxw();return ut?it.masterToggle():null}),l.qZA(),l.qZA()}if(2&q){const Y=l.oxw();l.xp6(1),l.Q6J("aria-label",Y.checkboxLabel())("checked",Y.selection.hasValue()&&Y.isAllSelected())("indeterminate",Y.selection.hasValue()&&!Y.isAllSelected())}}function C(q,at){if(1&q){const Y=l.EpF();l.TgZ(0,"td",18),l.TgZ(1,"mat-checkbox",19),l.NdJ("change",function(ut){const G=l.CHM(Y).$implicit,M=l.oxw();return ut?M.selection.toggle(G):null})("click",function(ut){return ut.stopPropagation()}),l.qZA(),l.qZA()}if(2&q){const Y=at.$implicit,K=l.oxw();l.xp6(1),l.Q6J("aria-label",K.checkboxLabel(Y))("checked",K.selection.isSelected(Y))}}function A(q,at){1&q&&(l.TgZ(0,"th",20),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&q&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.ID")," "))}function L(q,at){if(1&q&&(l.TgZ(0,"td",21),l._uU(1),l.qZA()),2&q){const Y=at.$implicit;l.xp6(1),l.hij(" ",Y.id," ")}}function N(q,at){1&q&&(l.TgZ(0,"th",20),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&q&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NAME")," "))}function P(q,at){if(1&q&&(l.TgZ(0,"td",22),l._uU(1),l.qZA()),2&q){const Y=at.$implicit;l.xp6(1),l.Oqu(Y.name)}}function R(q,at){1&q&&(l.TgZ(0,"th",20),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&q&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.CONTACT")," "))}function Z(q,at){if(1&q&&(l.TgZ(0,"td",22),l._uU(1),l.qZA()),2&q){const Y=at.$implicit;l.xp6(1),l.Oqu(Y.contact)}}function z(q,at){1&q&&(l.TgZ(0,"th",20),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&q&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.TYPE")," "))}function H(q,at){if(1&q&&(l.TgZ(0,"td",22),l._uU(1),l.qZA()),2&q){const Y=at.$implicit;l.xp6(1),l.Oqu(Y.type)}}function tt(q,at){1&q&&l._UZ(0,"tr",23)}function rt(q,at){1&q&&l._UZ(0,"tr",24)}function ot(q,at){1&q&&(l.TgZ(0,"app-alert",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&q&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_OWNERS"),"\n"))}function J(q,at){1&q&&(l.TgZ(0,"app-alert",25),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&q&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"SHARED_LIB.PERUN.COMPONENTS.OWNERS_LIST.NO_FILTER_OWNERS"),"\n"))}let et=(()=>{class q{constructor(Y,K){this.authResolver=Y,this.tableCheckbox=K,this.owners=[],this.selection=new x.Ov(!0,[]),this.filterValue="",this.displayedColumns=["select","id","name","contact","type"],this.pageSizeOptions=_.f7}set matSort(Y){this.sort=Y,this.setDataSource()}ngAfterViewInit(){this.setDataSource()}getDataForColumn(Y,K){switch(K){case"id":return Y.id.toString();case"name":return Y.name;case"contact":return Y.contact;case"type":return Y.type;default:return""}}exportData(Y){(0,_.O6)((0,_.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getDataForColumn,this),Y)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(Y,K)=>(0,_.Sd)(Y,K,this.displayedColumns,this.getDataForColumn,this),this.dataSource.sortData=(Y,K)=>(0,_.pR)(Y,K,this.getDataForColumn,this),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}ngOnChanges(){this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(Y=>"id"!==Y)),this.dataSource=new v.by(this.owners),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filterValue,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(Y){return Y?`${this.selection.isSelected(Y)?"deselect":"select"} row ${Y.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}}return q.\u0275fac=function(Y){return new(Y||q)(l.Y36(m.x4),l.Y36(m.UA))},q.\u0275cmp=l.Xpm({type:q,selectors:[["perun-web-apps-owners-list"]],viewQuery:function(Y,K){if(1&Y&&(l.Gf(_.l9,7),l.Gf(u.YE,7)),2&Y){let ut;l.iGM(ut=l.CRH())&&(K.child=ut.first),l.iGM(ut=l.CRH())&&(K.matSort=ut.first)}},inputs:{owners:"owners",selection:"selection",tableId:"tableId",filterValue:"filterValue",displayedColumns:"displayedColumns"},features:[l.TTD],decls:22,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"tableId","dataLength","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","contact"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"],["alert_type","warn"]],template:function(Y,K){1&Y&&(l.TgZ(0,"div",0),l.TgZ(1,"perun-web-apps-table-wrapper",1),l.NdJ("exportData",function(it){return K.exportData(it)}),l.TgZ(2,"table",2),l.ynx(3,3),l.YNc(4,p,2,3,"th",4),l.YNc(5,C,2,2,"td",5),l.BQk(),l.ynx(6,6),l.YNc(7,A,3,3,"th",7),l.YNc(8,L,2,1,"td",8),l.BQk(),l.ynx(9,9),l.YNc(10,N,3,3,"th",7),l.YNc(11,P,2,1,"td",10),l.BQk(),l.ynx(12,11),l.YNc(13,R,3,3,"th",7),l.YNc(14,Z,2,1,"td",10),l.BQk(),l.ynx(15,12),l.YNc(16,z,3,3,"th",7),l.YNc(17,H,2,1,"td",10),l.BQk(),l.YNc(18,tt,1,0,"tr",13),l.YNc(19,rt,1,0,"tr",14),l.qZA(),l.qZA(),l.qZA(),l.YNc(20,ot,3,3,"app-alert",15),l.YNc(21,J,3,3,"app-alert",15)),2&Y&&(l.Q6J("hidden",0===K.owners.length||0===K.dataSource.filteredData.length),l.xp6(1),l.Q6J("tableId",K.tableId)("dataLength",K.dataSource.filteredData.length)("pageSizeOptions",K.pageSizeOptions),l.xp6(1),l.Q6J("dataSource",K.dataSource),l.xp6(16),l.Q6J("matHeaderRowDef",K.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",K.displayedColumns),l.xp6(1),l.Q6J("ngIf",!K.owners.length),l.xp6(1),l.Q6J("ngIf",!K.dataSource.filteredData.length&&K.owners.length))},directives:[t.l,v.BZ,u.YE,v.w1,v.fO,v.ge,c.oG,v.Dz,v.ev,u.nU,v.as,v.XQ,v.nj,v.Gk,h.O5,g.w],pipes:[f.X$],styles:[""]}),q})()},16087:(w,k,o)=>{"use strict";const u=o(34315),x=o(52872),v=o(40717);w.exports=function _(t,c){switch(x(t)){case"object":return function m(t,c){if("function"==typeof c)return c(t);if(c||v(t)){const h=new t.constructor;for(let g in t)h[g]=_(t[g],c);return h}return t}(t,c);case"array":return function l(t,c){const h=new t.constructor(t.length);for(let g=0;g<t.length;g++)h[g]=_(t[g],c);return h}(t,c);default:return u(t)}}},52786:(w,k,o)=>{"use strict";o.d(k,{Il:()=>x,xV:()=>v,J5:()=>_,ZP:()=>Z,SU:()=>tt,B8:()=>rt,Ss:()=>ot,Ym:()=>K});var u=o(68884);function x(){}var v=.7,_=1/v,m="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[m,m,m]+"\\)$"),g=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),f=new RegExp("^rgba\\("+[m,m,m,l]+"\\)$"),p=new RegExp("^rgba\\("+[t,t,t,l]+"\\)$"),C=new RegExp("^hsl\\("+[l,t,t]+"\\)$"),A=new RegExp("^hsla\\("+[l,t,t,l]+"\\)$"),L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function N(){return this.rgb().formatHex()}function R(){return this.rgb().formatRgb()}function Z(G){var M,ft;return G=(G+"").trim().toLowerCase(),(M=c.exec(G))?(ft=M[1].length,M=parseInt(M[1],16),6===ft?z(M):3===ft?new ot(M>>8&15|M>>4&240,M>>4&15|240&M,(15&M)<<4|15&M,1):8===ft?H(M>>24&255,M>>16&255,M>>8&255,(255&M)/255):4===ft?H(M>>12&15|M>>8&240,M>>8&15|M>>4&240,M>>4&15|240&M,((15&M)<<4|15&M)/255):null):(M=h.exec(G))?new ot(M[1],M[2],M[3],1):(M=g.exec(G))?new ot(255*M[1]/100,255*M[2]/100,255*M[3]/100,1):(M=f.exec(G))?H(M[1],M[2],M[3],M[4]):(M=p.exec(G))?H(255*M[1]/100,255*M[2]/100,255*M[3]/100,M[4]):(M=C.exec(G))?at(M[1],M[2]/100,M[3]/100,1):(M=A.exec(G))?at(M[1],M[2]/100,M[3]/100,M[4]):L.hasOwnProperty(G)?z(L[G]):"transparent"===G?new ot(NaN,NaN,NaN,0):null}function z(G){return new ot(G>>16&255,G>>8&255,255&G,1)}function H(G,M,ft,It){return It<=0&&(G=M=ft=NaN),new ot(G,M,ft,It)}function tt(G){return G instanceof x||(G=Z(G)),G?new ot((G=G.rgb()).r,G.g,G.b,G.opacity):new ot}function rt(G,M,ft,It){return 1===arguments.length?tt(G):new ot(G,M,ft,null==It?1:It)}function ot(G,M,ft,It){this.r=+G,this.g=+M,this.b=+ft,this.opacity=+It}function J(){return"#"+q(this.r)+q(this.g)+q(this.b)}function et(){var G=this.opacity;return(1===(G=isNaN(G)?1:Math.max(0,Math.min(1,G)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===G?")":", "+G+")")}function q(G){return((G=Math.max(0,Math.min(255,Math.round(G)||0)))<16?"0":"")+G.toString(16)}function at(G,M,ft,It){return It<=0?G=M=ft=NaN:ft<=0||ft>=1?G=M=NaN:M<=0&&(G=NaN),new ut(G,M,ft,It)}function Y(G){if(G instanceof ut)return new ut(G.h,G.s,G.l,G.opacity);if(G instanceof x||(G=Z(G)),!G)return new ut;if(G instanceof ut)return G;var M=(G=G.rgb()).r/255,ft=G.g/255,It=G.b/255,Zt=Math.min(M,ft,It),zt=Math.max(M,ft,It),ne=NaN,Ut=zt-Zt,xt=(zt+Zt)/2;return Ut?(ne=M===zt?(ft-It)/Ut+6*(ft<It):ft===zt?(It-M)/Ut+2:(M-ft)/Ut+4,Ut/=xt<.5?zt+Zt:2-zt-Zt,ne*=60):Ut=xt>0&&xt<1?0:ne,new ut(ne,Ut,xt,G.opacity)}function K(G,M,ft,It){return 1===arguments.length?Y(G):new ut(G,M,ft,null==It?1:It)}function ut(G,M,ft,It){this.h=+G,this.s=+M,this.l=+ft,this.opacity=+It}function it(G,M,ft){return 255*(G<60?M+(ft-M)*G/60:G<180?ft:G<240?M+(ft-M)*(240-G)/60:M)}(0,u.Z)(x,Z,{copy:function(G){return Object.assign(new this.constructor,this,G)},displayable:function(){return this.rgb().displayable()},hex:N,formatHex:N,formatHsl:function P(){return Y(this).formatHsl()},formatRgb:R,toString:R}),(0,u.Z)(ot,rt,(0,u.l)(x,{brighter:function(G){return G=null==G?_:Math.pow(_,G),new ot(this.r*G,this.g*G,this.b*G,this.opacity)},darker:function(G){return G=null==G?v:Math.pow(v,G),new ot(this.r*G,this.g*G,this.b*G,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J,formatHex:J,formatRgb:et,toString:et})),(0,u.Z)(ut,K,(0,u.l)(x,{brighter:function(G){return G=null==G?_:Math.pow(_,G),new ut(this.h,this.s,this.l*G,this.opacity)},darker:function(G){return G=null==G?v:Math.pow(v,G),new ut(this.h,this.s,this.l*G,this.opacity)},rgb:function(){var G=this.h%360+360*(this.h<0),M=isNaN(G)||isNaN(this.s)?0:this.s,ft=this.l,It=ft+(ft<.5?ft:1-ft)*M,Zt=2*ft-It;return new ot(it(G>=240?G-240:G+120,Zt,It),it(G,Zt,It),it(G<120?G+240:G-120,Zt,It),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var G=this.opacity;return(1===(G=isNaN(G)?1:Math.max(0,Math.min(1,G)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===G?")":", "+G+")")}}))},68884:(w,k,o)=>{"use strict";function u(v,_,m){v.prototype=_.prototype=m,m.constructor=v}function x(v,_){var m=Object.create(v.prototype);for(var l in _)m[l]=_[l];return m}o.d(k,{Z:()=>u,l:()=>x})},25922:(w,k,o)=>{"use strict";o.d(k,{Z:()=>t});var u={value:function(){}};function x(){for(var f,c=0,h=arguments.length,g={};c<h;++c){if(!(f=arguments[c]+"")||f in g||/[\s.]/.test(f))throw new Error("illegal type: "+f);g[f]=[]}return new v(g)}function v(c){this._=c}function _(c,h){return c.trim().split(/^|\s+/).map(function(g){var f="",p=g.indexOf(".");if(p>=0&&(f=g.slice(p+1),g=g.slice(0,p)),g&&!h.hasOwnProperty(g))throw new Error("unknown type: "+g);return{type:g,name:f}})}function m(c,h){for(var p,g=0,f=c.length;g<f;++g)if((p=c[g]).name===h)return p.value}function l(c,h,g){for(var f=0,p=c.length;f<p;++f)if(c[f].name===h){c[f]=u,c=c.slice(0,f).concat(c.slice(f+1));break}return null!=g&&c.push({name:h,value:g}),c}v.prototype=x.prototype={constructor:v,on:function(c,h){var p,g=this._,f=_(c+"",g),C=-1,A=f.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<A;)if(p=(c=f[C]).type)g[p]=l(g[p],c.name,h);else if(null==h)for(p in g)g[p]=l(g[p],c.name,null);return this}for(;++C<A;)if((p=(c=f[C]).type)&&(p=m(g[p],c.name)))return p},copy:function(){var c={},h=this._;for(var g in h)c[g]=h[g].slice();return new v(c)},call:function(c,h){if((p=arguments.length-2)>0)for(var p,C,g=new Array(p),f=0;f<p;++f)g[f]=arguments[f+2];if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(f=0,p=(C=this._[c]).length;f<p;++f)C[f].value.apply(h,g)},apply:function(c,h,g){if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(var f=this._[c],p=0,C=f.length;p<C;++p)f[p].value.apply(h,g)}};const t=x},27065:(w,k,o)=>{"use strict";function v(_){return((_*=2)<=1?_*_*_:(_-=2)*_*_+2)/2}o.d(k,{tw:()=>v})},22910:(w,k,o)=>{"use strict";o.d(k,{WU:()=>v,jH:()=>_,ZP:()=>m});var x,v,_,u=o(4753);function m(l){return x=(0,u.Z)(l),v=x.format,_=x.formatPrefix,x}m({thousands:",",grouping:[3],currency:["$",""]})},68520:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(5326);function x(v){return(v=(0,u.V)(Math.abs(v)))?v[1]:NaN}},5326:(w,k,o)=>{"use strict";function u(v){return Math.abs(v=Math.round(v))>=1e21?v.toLocaleString("en").replace(/,/g,""):v.toString(10)}function x(v,_){if((m=(v=_?v.toExponential(_-1):v.toExponential()).indexOf("e"))<0)return null;var m,l=v.slice(0,m);return[l.length>1?l[0]+l.slice(2):l,+v.slice(m+1)]}o.d(k,{Z:()=>u,V:()=>x})},32517:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x,v:()=>v});var u=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x(_){if(!(m=u.exec(_)))throw new Error("invalid format: "+_);var m;return new v({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function v(_){this.fill=void 0===_.fill?" ":_.fill+"",this.align=void 0===_.align?">":_.align+"",this.sign=void 0===_.sign?"-":_.sign+"",this.symbol=void 0===_.symbol?"":_.symbol+"",this.zero=!!_.zero,this.width=void 0===_.width?void 0:+_.width,this.comma=!!_.comma,this.precision=void 0===_.precision?void 0:+_.precision,this.trim=!!_.trim,this.type=void 0===_.type?"":_.type+""}x.prototype=v.prototype,v.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},41129:(w,k,o)=>{"use strict";o.r(k),o.d(k,{formatDefaultLocale:()=>u.ZP,format:()=>u.WU,formatPrefix:()=>u.jH,formatLocale:()=>x.Z,formatSpecifier:()=>v.Z,FormatSpecifier:()=>v.v,precisionFixed:()=>_.Z,precisionPrefix:()=>m.Z,precisionRound:()=>l.Z});var u=o(22910),x=o(4753),v=o(32517),_=o(78986),m=o(38914),l=o(65142)},4753:(w,k,o)=>{"use strict";o.d(k,{Z:()=>A});var t,u=o(68520),_=o(32517),l=o(5326);function h(L,N){var P=(0,l.V)(L,N);if(!P)return L+"";var R=P[0],Z=P[1];return Z<0?"0."+new Array(-Z).join("0")+R:R.length>Z+1?R.slice(0,Z+1)+"."+R.slice(Z+1):R+new Array(Z-R.length+2).join("0")}const g={"%":(L,N)=>(100*L).toFixed(N),b:L=>Math.round(L).toString(2),c:L=>L+"",d:l.Z,e:(L,N)=>L.toExponential(N),f:(L,N)=>L.toFixed(N),g:(L,N)=>L.toPrecision(N),o:L=>Math.round(L).toString(8),p:(L,N)=>h(100*L,N),r:h,s:function c(L,N){var P=(0,l.V)(L,N);if(!P)return L+"";var R=P[0],Z=P[1],z=Z-(t=3*Math.max(-8,Math.min(8,Math.floor(Z/3))))+1,H=R.length;return z===H?R:z>H?R+new Array(z-H+1).join("0"):z>0?R.slice(0,z)+"."+R.slice(z):"0."+new Array(1-z).join("0")+(0,l.V)(L,Math.max(0,N+z-1))[0]},X:L=>Math.round(L).toString(16).toUpperCase(),x:L=>Math.round(L).toString(16)};function f(L){return L}var p=Array.prototype.map,C=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function A(L){var N=void 0===L.grouping||void 0===L.thousands?f:function x(L,N){return function(P,R){for(var Z=P.length,z=[],H=0,tt=L[0],rt=0;Z>0&&tt>0&&(rt+tt+1>R&&(tt=Math.max(1,R-rt)),z.push(P.substring(Z-=tt,Z+tt)),!((rt+=tt+1)>R));)tt=L[H=(H+1)%L.length];return z.reverse().join(N)}}(p.call(L.grouping,Number),L.thousands+""),P=void 0===L.currency?"":L.currency[0]+"",R=void 0===L.currency?"":L.currency[1]+"",Z=void 0===L.decimal?".":L.decimal+"",z=void 0===L.numerals?f:function v(L){return function(N){return N.replace(/[0-9]/g,function(P){return L[+P]})}}(p.call(L.numerals,String)),H=void 0===L.percent?"%":L.percent+"",tt=void 0===L.minus?"\u2212":L.minus+"",rt=void 0===L.nan?"NaN":L.nan+"";function ot(et){var q=(et=(0,_.Z)(et)).fill,at=et.align,Y=et.sign,K=et.symbol,ut=et.zero,it=et.width,G=et.comma,M=et.precision,ft=et.trim,It=et.type;"n"===It?(G=!0,It="g"):g[It]||(void 0===M&&(M=12),ft=!0,It="g"),(ut||"0"===q&&"="===at)&&(ut=!0,q="0",at="=");var Zt="$"===K?P:"#"===K&&/[boxX]/.test(It)?"0"+It.toLowerCase():"",zt="$"===K?R:/[%p]/.test(It)?H:"",ne=g[It],Ut=/[defgprs%]/.test(It);function xt(pt){var ge,_e,Te,Nt=Zt,Jt=zt;if("c"===It)Jt=ne(pt)+Jt,pt="";else{var Re=(pt=+pt)<0||1/pt<0;if(pt=isNaN(pt)?rt:ne(Math.abs(pt),M),ft&&(pt=function m(L){t:for(var Z,N=L.length,P=1,R=-1;P<N;++P)switch(L[P]){case".":R=Z=P;break;case"0":0===R&&(R=P),Z=P;break;default:if(!+L[P])break t;R>0&&(R=0)}return R>0?L.slice(0,R)+L.slice(Z+1):L}(pt)),Re&&0==+pt&&"+"!==Y&&(Re=!1),Nt=(Re?"("===Y?Y:tt:"-"===Y||"("===Y?"":Y)+Nt,Jt=("s"===It?C[8+t/3]:"")+Jt+(Re&&"("===Y?")":""),Ut)for(ge=-1,_e=pt.length;++ge<_e;)if(48>(Te=pt.charCodeAt(ge))||Te>57){Jt=(46===Te?Z+pt.slice(ge+1):pt.slice(ge))+Jt,pt=pt.slice(0,ge);break}}G&&!ut&&(pt=N(pt,1/0));var Tn=Nt.length+pt.length+Jt.length,Fe=Tn<it?new Array(it-Tn+1).join(q):"";switch(G&&ut&&(pt=N(Fe+pt,Fe.length?it-Jt.length:1/0),Fe=""),at){case"<":pt=Nt+pt+Jt+Fe;break;case"=":pt=Nt+Fe+pt+Jt;break;case"^":pt=Fe.slice(0,Tn=Fe.length>>1)+Nt+pt+Jt+Fe.slice(Tn);break;default:pt=Fe+Nt+pt+Jt}return z(pt)}return M=void 0===M?6:/[gprs]/.test(It)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M)),xt.toString=function(){return et+""},xt}return{format:ot,formatPrefix:function J(et,q){var at=ot(((et=(0,_.Z)(et)).type="f",et)),Y=3*Math.max(-8,Math.min(8,Math.floor((0,u.Z)(q)/3))),K=Math.pow(10,-Y),ut=C[8+Y/3];return function(it){return at(K*it)+ut}}}}},78986:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(68520);function x(v){return Math.max(0,-(0,u.Z)(Math.abs(v)))}},38914:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(68520);function x(v,_){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,u.Z)(_)/3)))-(0,u.Z)(Math.abs(v)))}},65142:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(68520);function x(v,_){return v=Math.abs(v),_=Math.abs(_)-v,Math.max(0,(0,u.Z)(_)-(0,u.Z)(v))+1}},9921:function(w,k,o){!function(u,x,v,_,m,l,t,c,h,g){"use strict";function f(j){if(j&&j.__esModule)return j;var mt=Object.create(null);return j&&Object.keys(j).forEach(function(Ct){if("default"!==Ct){var At=Object.getOwnPropertyDescriptor(j,Ct);Object.defineProperty(mt,Ct,At.get?At:{enumerable:!0,get:function(){return j[Ct]}})}}),mt.default=j,Object.freeze(mt)}var Ot,p=f(x);function C(j,mt,Ct){return mt in j?Object.defineProperty(j,mt,{value:Ct,enumerable:!0,configurable:!0,writable:!0}):j[mt]=Ct,j}function A(j){return function L(j){if(Array.isArray(j))return R(j)}(j)||function N(j){if("undefined"!=typeof Symbol&&null!=j[Symbol.iterator]||null!=j["@@iterator"])return Array.from(j)}(j)||function P(j,mt){if(j){if("string"==typeof j)return R(j,mt);var Ct=Object.prototype.toString.call(j).slice(8,-1);if("Object"===Ct&&j.constructor&&(Ct=j.constructor.name),"Map"===Ct||"Set"===Ct)return Array.from(j);if("Arguments"===Ct||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct))return R(j,mt)}}(j)||function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(j,mt){(null==mt||mt>j.length)&&(mt=j.length);for(var Ct=0,At=new Array(mt);Ct<mt;Ct++)At[Ct]=j[Ct];return At}function z(j){var mt={},Ct=j.node().nodeName;mt.tag=Ct,"#text"==Ct?mt.text=j.text():"#comment"==Ct&&(mt.comment=j.text()),mt.attributes={};var At=j.node().attributes;if(At)for(var Xt=0;Xt<At.length;Xt++){var te=At[Xt];mt.attributes[te.name]=te.value}var Le,O=j.node().transform;if(O&&0!=O.baseVal.numberOfItems){var le=O.baseVal.consolidate().matrix;mt.translation={x:le.e,y:le.f},mt.scale=le.a}if("ellipse"==Ct&&(mt.center={x:mt.attributes.cx,y:mt.attributes.cy}),"polygon"==Ct){var ke=(Le=j.attr("points").split(" ")).map(function(_t){return _t.split(",")[0]}),rn=Le.map(function(_t){return _t.split(",")[1]}),ze=Math.min.apply(null,ke),Je=Math.max.apply(null,ke),fe=Math.min.apply(null,rn),ye=Math.max.apply(null,rn);mt.bbox={x:ze,y:fe,width:Je-ze,height:ye-fe},mt.center={x:(ze+Je)/2,y:(fe+ye)/2}}return"path"==Ct&&((Le=j.attr("d").split(/[A-Z ]/)).shift(),ke=Le.map(function(Wt){return+Wt.split(",")[0]}),rn=Le.map(function(Wt){return+Wt.split(",")[1]}),ze=Math.min.apply(null,ke),Je=Math.max.apply(null,ke),fe=Math.min.apply(null,rn),ye=Math.max.apply(null,rn),mt.bbox={x:ze,y:fe,width:Je-ze,height:ye-fe},mt.center={x:(ze+Je)/2,y:(fe+ye)/2},mt.totalLength=j.node().getTotalLength()),"text"==Ct&&(mt.center={x:j.attr("x"),y:j.attr("y")}),"#text"==Ct?mt.text=j.text():"#comment"==Ct&&(mt.comment=j.text()),mt}function H(j){var mt=z(j);return mt.children=[],p.selectAll(j.node().childNodes).each(function(){var At=H(p.select(this));At.parent=mt,mt.children.push(At)}),mt}function tt(j){return"#text"==j.tag?document.createTextNode(""):"#comment"==j.tag?document.createComment(j.comment):document.createElementNS("http://www.w3.org/2000/svg",j.tag)}function rt(j){for(var mt=tt(j),Ct=p.select(mt),At=j.attributes,Xt=0,te=Object.keys(At);Xt<te.length;Xt++){var Dt=te[Xt];Ct.attr(Dt,At[Dt])}return mt}function ot(j,mt){var Ct=p.select(j.node().parentNode),At=rt(mt),Xt=Ct.insert(function(){return At},function(){return j.node()});return j.remove(),Xt}function et(j,mt){(function J(j,mt){j.datum(mt),j.data([mt],function(Ct){return Ct.key})})(j,mt),p.selectAll(j.node().childNodes).each(function(At,Xt){et(p.select(this),mt.children[Xt])})}function q(j,mt){var Ct=j.selectAll(function(){return j.node().childNodes}),At=(Ct=Ct.data(function(Dt){return Dt.children},function(Dt){return Dt.tag+"-"+mt})).enter().append(function(Dt){return tt(Dt)}),Xt=Ct.exit();Xt=Xt.remove(),Ct=At.merge(Ct);var te={};Ct.each(function(Dt){var de=Dt.tag;null==te[de]&&(te[de]=0);var O=te[de]++;at.call(this,Dt,O)})}function at(j){var mt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ct=p.select(this),At=j.attributes,Xt=Ct.node().attributes;if(Xt)for(var te=0;te<Xt.length;te++){var Dt=Xt[te],de=Dt.name;if("xmlns"!=de.split(":")[0]&&Dt.namespaceURI){var O=Dt.namespaceURI.split("/");de=O[O.length-1]+":"+de}de in At||(At[de]=null)}for(var Le=0,ke=Object.keys(At);Le<ke.length;Le++){var rn=ke[Le];Ct.attr(rn,At[rn])}j.text&&Ct.text(j.text),q(Ct,mt)}function Y(j){return Object.assign({},j)}function K(j){return Math.round(100*j)/100}function it(){var j=this;var At=p.select(this._selection.node().querySelector("svg"));if(0==At.size())return this;this._zoomSelection=At;var Xt=t.zoom().scaleExtent(this._options.zoomScaleExtent).translateExtent(this._options.zoomTranslateExtent).interpolate(l.interpolate).on("zoom",function mt(Dt){p.select(At.node().querySelector("g")).attr("transform",Dt.transform),j._dispatch.call("zoom",j)});this._zoomBehavior=Xt;var te=p.select(At.node().querySelector("g"));return At.call(Xt),this._active||M.call(this,te),this._originalTransform=t.zoomTransform(At.node()),this}function G(j){var mt=this._translation,Ct=this._scale,At=j.datum().translation,Xt=j.datum().scale,te=t.zoomTransform(this._zoomSelection.node());return mt&&(te=(te=te.scale(1/Ct)).translate(-mt.x,-mt.y)),(te=te.translate(At.x,At.y)).scale(Xt)}function M(j){this._zoomBehavior.transform(this._zoomSelection,G.call(this,j)),this._translation=j.datum().translation,this._scale=j.datum().scale,this._originalTransform=t.zoomIdentity.translate(j.datum().translation.x,j.datum().translation.y).scale(j.datum().scale)}function Ut(j,mt){return function(){var Ct=j.map(function(At){return l.interpolate([At[0][0],At[0][1]],[At[1][0],At[1][1]])});return function(At){return At<1?"M"+Ct.map(function(Xt){return Xt(At)}).join("L"):mt}}}function Nt(j){return"edge"==j.attributes.class||"a"==j.tag&&"g"==j.parent.tag&&"edge"==j.parent.parent.attributes.class}function Jt(j){return j.parent&&Nt(j.parent)}function Re(j){var mt=this._transition,Ct=this._options.fade&&null!=mt,At=this._options.tweenPaths,Xt=this._options.tweenShapes,te=this._options.convertEqualSidedPolygons,Dt=this._options.growEnteringEdges&&null!=mt,de=this._attributer,O=this;function Le(fe){var ye=p.select(this);if("svg"==fe.tag){var Ye=O._options;if(null!=Ye.width||null!=Ye.height){var nt=Ye.width,_t=Ye.height;null==nt?nt=4*fe.attributes.width.replace("pt","")/3:(ye.attr("width",nt),fe.attributes.width=nt),null==_t?_t=4*fe.attributes.height.replace("pt","")/3:(ye.attr("height",_t),fe.attributes.height=_t),Ye.fit||(ye.attr("viewBox","0 0 ".concat(3*nt/4/Ye.scale," ").concat(3*_t/4/Ye.scale)),fe.attributes.viewBox="0 0 ".concat(3*nt/4/Ye.scale," ").concat(3*_t/4/Ye.scale))}1!=Ye.scale&&(Ye.fit||null==Ye.width&&null==Ye.height)&&(nt=fe.attributes.viewBox.split(" ")[2],_t=fe.attributes.viewBox.split(" ")[3],ye.attr("viewBox","0 0 ".concat(nt/Ye.scale," ").concat(_t/Ye.scale)),fe.attributes.viewBox="0 0 ".concat(nt/Ye.scale," ").concat(_t/Ye.scale))}de&&ye.each(de);var gt=fe.tag,St=fe.attributes,Ht=ye.node().attributes;if(Ht)for(var ee=0;ee<Ht.length;ee++){var Qt=Ht[ee],me=Qt.name;if("xmlns"!=me.split(":")[0]&&Qt.namespaceURI){var xe=Qt.namespaceURI.split("/");me=xe[xe.length-1]+":"+me}me in St||(St[me]=null)}var ce=!1,Ie=!1;if(Xt&&mt){if(("polygon"==this.nodeName||"ellipse"==this.nodeName)&&fe.alternativeOld&&(Ie=!0),("polygon"==gt||"ellipse"==gt)&&fe.alternativeNew&&(ce=!0),"polygon"==this.nodeName&&"polygon"==gt&&fe.alternativeOld){var Ee=z(ye);if(!te){var Jn=Ee.attributes.points.split(" ").length;(Ln=fe.attributes.points).split(" ").length==Jn&&(ce=!1,Ie=!1)}}if(Ie){var qe=ot(ye,fe.alternativeOld);qe.data([fe],function(){return fe.key}),ye=qe}ce&&(gt="path",St=fe.alternativeNew.attributes)}var on=ye;if(mt&&(on=on.transition(mt),Ct&&on.filter(function(ct){return"#"==ct.tag[0]?null:this}).style("opacity",1),on.filter(function(ct){return"#"==ct.tag[0]?null:this}).on("end",function(ct){p.select(this).attr("style",ct&&ct.attributes&&ct.attributes.style||null)})),Dt&&"path"==gt&&fe.offset){var Un=fe.totalLength;ye.attr("stroke-dasharray",Un+" "+Un).attr("stroke-dashoffset",Un).attr("transform","translate("+fe.offset.x+","+fe.offset.y+")"),St["stroke-dashoffset"]=0,St.transform="translate(0,0)",on.attr("stroke-dashoffset",St["stroke-dashoffset"]).attr("transform",St.transform).on("start",function(){p.select(this).style("opacity",null)}).on("end",function(){p.select(this).attr("stroke-dashoffset",null).attr("stroke-dasharray",null).attr("transform",null)})}if(Dt&&"polygon"==gt&&Jt(fe)&&fe.offset&&"path"==fe.parent.children[3].tag){var hi=p.select(ye.node().parentNode.querySelector("path")),zi=hi.node().getPointAtLength(0),jn=hi.node().getPointAtLength(fe.totalLength),gi=hi.node().getPointAtLength(fe.totalLength-1),xn=180*Math.atan2(jn.y-gi.y,jn.x-gi.x)/Math.PI,Li=zi.x-jn.x+fe.offset.x,Ft=zi.y-jn.y+fe.offset.y;ye.attr("transform","translate("+Li+","+Ft+")"),on.attrTween("transform",function(){return function(ct){var yt=hi.node().getPointAtLength(fe.totalLength*ct),kt=hi.node().getPointAtLength(fe.totalLength*ct+1),Pt=180*Math.atan2(kt.y-yt.y,kt.x-yt.x)/Math.PI-xn;return"translate("+(Li=yt.x-jn.x+fe.offset.x*(1-ct))+","+(Ft=yt.y-jn.y+fe.offset.y*(1-ct))+") rotate("+Pt+" "+jn.x+" "+jn.y+")"}}).on("start",function(){p.select(this).style("opacity",null)}).on("end",function(){p.select(this).attr("transform",null)})}for(var be=At&&mt&&"path"==gt&&null!=ye.attr("d"),jt=0,b=Object.keys(St);jt<b.length;jt++){var I=b[jt],U=St[I];if(be&&"d"==I){var Ln;(Ln=(fe.alternativeOld||fe).points)&&on.attrTween("d",Ut(Ln,U))}else{if("transform"==I&&fe.translation)if(mt){var Q=on.on("end");on.on("start",function(){O._zoomBehavior&&on.tween("attr.transform",function(){var ct=this;return function(yt){ct.setAttribute("transform",l.interpolateTransformSvg(t.zoomTransform(O._zoomSelection.node()).toString(),G.call(O,ye).toString())(yt))}})}).on("end",function(){Q.call(this),O._zoomBehavior&&M.call(O,ye)})}else O._zoomBehavior&&(M.call(O,ye),U=G.call(O,ye).toString());on.attr(I,U)}}ce&&on.on("end",function(ct,yt,kt){ot(qe=p.select(this),ct).data([ct],function(){return ct.key})}),fe.text&&on.text(fe.text),function le(fe){var ye=fe.selectAll(function(){return fe.node().childNodes}),Ye=(ye=ye.data(function(gt){return gt.children},function(gt){return gt.key})).enter().append(function(gt){var St=tt(gt);return"#text"==gt.tag&&Ct&&(St.nodeValue=gt.text),St});(Ct||Dt&&Nt(fe.datum()))&&Ye.filter(function(gt){return"#"==gt.tag[0]?null:this}).each(function(gt){for(var St=p.select(this),Ht=0,ee=Object.keys(gt.attributes);Ht<ee.length;Ht++){var Qt=ee[Ht];St.attr(Qt,gt.attributes[Qt])}}).filter(function(gt){return"svg"==gt.tag||"g"==gt.tag?null:this}).style("opacity",0);var _t=ye.exit();de&&_t.each(de),mt&&(_t=_t.transition(mt),Ct&&_t.filter(function(gt){return"#"==gt.tag[0]?null:this}).style("opacity",0)),_t=_t.remove(),(ye=Ye.merge(ye)).each(Le)}(ye)}var ke=this._selection;if(null!=mt){var rn=this._jobs;if(O._active)return rn.push(null),this;ke.transition(mt).transition().duration(0).on("end",function(){O._active=!1,0!=rn.length&&(rn.shift(),O.render())}),this._active=!0}null!=mt&&ke.transition(mt).on("start",function(){O._dispatch.call("transitionStart",O)}).on("end",function(){O._dispatch.call("transitionEnd",O)}).transition().duration(0).on("start",function(){O._dispatch.call("restoreEnd",O),O._dispatch.call("end",O),j&&j.call(O)});var ze=this._data,Je=ke.selectAll("svg").data([ze],function(fe){return fe.key});return Je=Je.enter().append("svg").merge(Je),Le.call(Je.node(),ze),this._options.zoom&&!this._zoomBehavior&&it.call(this),O._dispatch.call("renderEnd",O),null==mt&&(this._dispatch.call("end",this),j&&j.call(this)),this}function Fe(j,mt){if("polygon"==j.tag){(Ct=Y(j)).tag="path";var Xt=Y(At=j.attributes),te=At.points;if("polygon"==mt.tag){(Dt=j.bbox).cx=Dt.x+Dt.width/2,Dt.cy=Dt.y+Dt.height/2;for(var O=At.points.split(" "),le=O.map(function(Ee){var Ue=Ee.split(",");return[Ue[0]-Dt.cx,Ue[1]-Dt.cy]}),Le=le[le.length-1][0],ke=le[le.length-1][1],rn=0;rn<le.length;rn++,Le=ze,ke=Je){var fe=(ze=le[rn][0])-Le;if(0!=(ye=(Je=le[rn][1])-ke)&&0<=(Ye=Le-ke*fe/ye)&&Ye<1/0&&(Le<=Ye&&Ye<=ze||ze<=Ye&&Ye<=Le))break}var nt=[[Dt.cx+Ye,Dt.cy+0].join(",")];te=(nt=(nt=nt.concat(O.slice(rn))).concat(O.slice(0,rn))).join(" ")}Xt.d="M"+te+"z",delete Xt.points,Ct.attributes=Xt}else{var Ct;(Ct=Y(j)).tag="path",Xt=Y(At=j.attributes);var At,ze,Je,Ye,_t=At.cx,gt=At.cy,St=At.rx,Ht=At.ry;if("polygon"==mt.tag){var Dt;(Dt=mt.bbox).cx=Dt.x+Dt.width/2,Dt.cy=Dt.y+Dt.height/2;var ee=mt.attributes.points.split(" ")[0].split(","),ye=(fe=ee[0]-Dt.cx,ee[1]-Dt.cy),xe=Math.sqrt(Math.pow(fe,2)+Math.pow(ye,2)),Wt=fe/xe,ce=-ye/xe}else Wt=1,ce=0;Xt.d="M "+_t+" "+gt+" m "+(ze=St*Wt)+","+(Je=-Ht*ce)+" a "+St+","+Ht+" 0 1,0 "+(fe=(Ye=St*-Wt)-ze)+","+(ye=-Ht*-ce-Je)+" a "+St+","+Ht+" 0 1,0 "+-fe+","+-ye+"z",delete Xt.cx,delete Xt.cy,delete Xt.rx,delete Xt.ry,Ct.attributes=Xt}return Ct}function Mn(){var j=this;try{c.graphviz.layout("","svg","dot").then(function(){c.graphvizSync().then(function(At){j.layoutSync=At.layout.bind(At),null==j._worker&&j._dispatch.call("initEnd",j),j._afterInit&&j._afterInit()})})}catch(At){}if(null!=this._worker){var mt=this._vizURL,Ct=this;this._workerPort.onmessage=function(At){Ct._workerCallbacks.shift().call(Ct,At)},mt.match(/^https?:\/\/|^\/\//i)||(mt=new window.URL(mt,document.location.href).href),oe.call(this,{dot:"",engine:"dot",vizURL:mt},function(At){"init"===At.data.type&&Ct._dispatch.call("initEnd",this)})}}function oe(j,mt){this._workerCallbacks.push(mt),this._workerPort.postMessage(j)}function ni(j,mt){var Ct=this._options.keyMode,At=this._options.tweenPaths,Xt=this._options.tweenShapes;if("string"==typeof this._options.tweenPrecision&&this._options.tweenPrecision.includes("%"))var te=+this._options.tweenPrecision.split("%")[0]/100,Dt=this._options.tweenPrecision.includes("%");else te=this._options.tweenPrecision,Dt=!1;var de=this._options.growEnteringEdges,O={},le=this._dictionary||{},Le={},ke=this._nodeDictionary||{};function rn(Wt,ce){var Ie=Wt.tag;if("index"==Ct)Wt.key=ce;else if("#"!=Ie[0])if("id"==Ct)Wt.key=Wt.attributes.id;else if("title"==Ct){var Ee=Wt.children.find(function(Ue){return"title"==Ue.tag});Ee&&(Wt.key=Ee.children.length>0?Ee.children[0].text:"")}null==Wt.key&&(Xt&&("ellipse"==Ie||"polygon"==Ie)&&(Ie="path"),Wt.key=Ie+"-"+ce)}function ze(Wt,ce){Wt.id=(ce?ce.id+".":"")+Wt.key}function Je(Wt){O[Wt.id]=Wt}function fe(Wt,ce){Xt&&Wt.id in le&&("polygon"==ce.tag||"ellipse"==ce.tag||"path"==ce.tag)&&(ce.tag!=Wt.tag||"polygon"==Wt.tag)&&("path"!=ce.tag&&(Wt.alternativeOld=Fe(ce,Wt)),"path"!=Wt.tag&&(Wt.alternativeNew=Fe(Wt,ce)))}function ye(Wt,ce){if(At&&ce&&("path"==ce.tag||Wt.alternativeOld&&"path"==Wt.alternativeOld.tag)){var Ie=(Wt.alternativeNew||Wt).attributes.d;if(Wt.alternativeOld)var Ee=rt(Wt.alternativeOld);else Ee=rt(ce);(Wt.alternativeOld||(Wt.alternativeOld={})).points=function xt(j,mt,Ct,At){for(var Xt=j,te=Xt.cloneNode(),Dt=Xt.getTotalLength(),de=(te.setAttribute("d",mt),te).getTotalLength(),O=[0],le=0,Le=At?Ct:Ct/Math.max(Dt,de);(le+=Le)<1;)O.push(le);return O.push(1),O.map(function(rn){var ze=Xt.getPointAtLength(rn*Dt),Je=te.getPointAtLength(rn*de);return[[ze.x,ze.y],[Je.x,Je.y]]})}(Ee,Ie,te,Dt)}}function Ye(Wt){var Ie=arguments.length>2?arguments[2]:void 0;rn(Wt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),ze(Wt,Ie);var Ue=le[Wt.id];Je(Wt),fe(Wt,Ue),ye(Wt,Ue);var Jn={};Wt.children.forEach(function(Ln){var kn=Ln.tag;("ellipse"==kn||"polygon"==kn)&&(kn="path"),null==Jn[kn]&&(Jn[kn]=0),Ye(Ln,Jn[kn]++,Wt)})}function gt(Wt){(function nt(Wt){if(de&&Wt.parent&&"node"==Wt.parent.attributes.class&&"title"==Wt.tag){if(Wt.children.length>0)var Ee=Wt.children[0].text;else Ee="";Le[Ee]=Wt.parent}})(Wt),function _t(Wt){var Ie=Wt.tag;if(de&&!le[Wt.id]&&Wt.parent&&Jt(Wt)&&("path"==Ie||"polygon"==Ie)){if("polygon"==Ie){var Ue=Wt.parent.children.find(function(jn){return"path"==jn.tag});Ue&&(Wt.totalLength=Ue.totalLength)}var Ln=function _e(j){return function ge(j){return"edge"==j.parent.attributes.class?j.parent:j.parent.parent.parent}(j).children.find(function(mt){return"title"==mt.tag})}(Wt).children[0],kn=Ln.text.split("->");2!=kn.length&&(kn=Ln.text.split("--"));var He=kn[0],qe=Le[He],Qn=ke[He];if(Qn){if((cn=qe.children.findIndex(function(jn,gi){return"g"==jn.tag}))>=0){var on=qe.children[cn].children.findIndex(function(jn,gi){return"a"==jn.tag});qe=qe.children[cn].children[on]}(cn=Qn.children.findIndex(function(jn,gi){return"g"==jn.tag}))>=0&&(on=Qn.children[cn].children.findIndex(function(gi,xn){return"a"==gi.tag}),Qn=Qn.children[cn].children[on]);for(var Un=qe.children,cn=0;cn<Un.length;cn++)if("polygon"==Un[cn].tag||"ellipse"==Un[cn].tag||"path"==Un[cn].tag||"text"==Un[cn].tag){var Hi=Un[cn];break}var hi=Qn.children;for(cn=0;cn<hi.length;cn++)if("polygon"==hi[cn].tag||"ellipse"==hi[cn].tag||"path"==hi[cn].tag||"text"==hi[cn].tag){var zi=hi[cn];break}Wt.offset=zi&&Hi?{x:zi.center.x-Hi.center.x,y:zi.center.y-Hi.center.y}:{x:0,y:0}}}}(Wt),Wt.children.forEach(function(ce){gt(ce)})}this._dispatch.call("layoutEnd",this);var St=p.select(document.createDocumentFragment()).append("div"),ee=(new window.DOMParser).parseFromString(j,"image/svg+xml");St.append(function(){return ee.documentElement});var me=H(St.select("svg"));this._dispatch.call("dataExtractEnd",this),Ye(me),this._dispatch.call("dataProcessPass1End",this),gt(me),this._dispatch.call("dataProcessPass2End",this),this._data=me,this._dictionary=O,this._nodeDictionary=Le,this._extractData=function(Wt,ce,Ie){var Ee=H(Wt);return Ye(Ee,ce,Ie),gt(Ee),Ee},this._busy=!1,this._dispatch.call("dataProcessEnd",this),mt&&mt.call(this),this._queue.length>0&&this._queue.shift().call(this)}function Zn(j,mt,Ct,At){var Xt=[j*Ct-(mt=-mt)*(At=-At),j*At+mt*Ct];return[j=Xt[0],mt=-(mt=Xt[1])]}function Di(j,mt,Ct,At,Xt,te,Dt){var O=H(bn.call(this,te));j.data([O]),at.call(j.node(),O),vn(j,mt,Ct,At,Xt,te,Dt)}function vn(j,mt,Ct,At,Xt,te,Dt){var de=Dt.shortening||0,ke=[[0,-3.5],[10,0],[0,3.5],[0,-3.5]],rn=At-mt,ze=Xt-Ct,Je=Math.sqrt(rn*rn+ze*ze);if(0==Je)var fe=1,ye=0;else fe=rn/Je,ye=ze/Je;if(At=mt+(Je-de-10-.1)*fe,Xt=Ct+(Je-de-10-.1)*ye,te.URL||te.tooltip)var Ye=j.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a"),nt=Ye.selectWithoutDataPropagation("path"),_t=Ye.selectWithoutDataPropagation("polygon");else nt=j.selectWithoutDataPropagation("path"),_t=j.selectWithoutDataPropagation("polygon");var gt=g.path();gt.moveTo(mt,Ct),gt.lineTo(At,Xt),nt.attr("d",gt),At=mt+(Je-de-10)*fe,Xt=Ct+(Je-de-10)*ye;for(var St=0;St<ke.length;St++)ke[St]=Zn((Ht=ke[St])[0],Ht[1],fe,ye);for(St=0;St<ke.length;St++)ke[St]=[At+(Ht=ke[St])[0],Xt+Ht[1]];var ee=[];for(St=0;St<ke.length;St++){var Ht;ee.push((Ht=ke[St]).join(","))}var Qt=ee.join(" ");return _t.attr("points",Qt),this}function Ai(){return this._drawnEdge?(this._drawnEdge.g.remove(),this._drawnEdge=null,this):this}function un(){return this._drawnEdge?this._drawnEdge.g:p.select(null)}function bn(j){for(var mt="",Ct=0,At=Object.keys(j);Ct<At.length;Ct++){var Xt=At[Ct];null!=j[Xt]&&(mt+=' "'+Xt+'"="'+j[Xt]+'"')}var Dt=this.layoutSync("digraph {a -> b ["+mt+"]}","svg","dot"),O=(new window.DOMParser).parseFromString(Dt,"image/svg+xml");return p.select(document.createDocumentFragment()).append(function(){return O.documentElement}).select(".edge")}function Nn(j,mt,Ct,At,Xt,te){var de=H(X.call(this,At,Xt));return j.data([de]),at.call(j.node(),de),De(j,mt,Ct,Xt),this}function De(j,mt,Ct,At,Xt){if(At.URL||At.tooltip)var te=j.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");else te=j;var Dt=te.selectAll("ellipse,polygon,path,polyline"),de=j.selectWithoutDataPropagation("text");if(0!=Dt.size()){var O=Dt.node().getBBox();O.cx=O.x+O.width/2,O.cy=O.y+O.height/2}else 0!=de.size()&&(O={x:+de.attr("x"),y:+de.attr("y"),width:0,height:0,cx:+de.attr("x"),cy:+de.attr("y")});return Dt.each(function(le,Le){var ke=p.select(this);if(ke.attr("cx"))ke.attr("cx",K(mt)).attr("cy",K(Ct));else if(ke.attr("points")){var rn=ke.attr("points").trim();ke.attr("points",function gn(te,mt,Ct){var Xt,At=(Xt=te.split(" ")).map(function(Dt){return Dt.split(",")});return At=Xt.map(function(Dt){return[K(+mt+ +Dt.split(",")[0]),K(+Ct+ +Dt.split(",")[1])]}),(Xt=At.map(function(Dt){return Dt.join(",")})).join(" ")}(rn,mt-O.cx,Ct-O.cy))}else{var ze=ke.attr("d");ke.attr("d",function Ve(j,mt,Ct){(te=j.split(/[A-Z ]/)).shift();var At=j.split(/[^[A-Z ]+/),te=(te.map(function(Dt){return Dt.split(",")}),te.map(function(Dt){return[K(+mt+ +Dt.split(",")[0]),K(+Ct+ +Dt.split(",")[1])]}).map(function(Dt){return Dt.join(",")}));return At.reduce(function(Dt,de,O){return Dt.concat(de,te[O])},[]).join("")}(ze,mt-O.cx,Ct-O.cy))}}),0!=de.size()&&de.attr("x",K(+de.attr("x")+mt-O.cx)).attr("y",K(+de.attr("y")+Ct-O.cy)),this}function Bn(){if(!this._drawnNode)return this;var j=this._drawnNode.g;return j.empty()||j.remove(),this._drawnNode=null,this}function V(){return this._drawnNode?this._drawnNode.g:p.select(null)}function X(j,mt){for(var Ct="",At=0,Xt=Object.keys(mt);At<Xt.length;At++){var te=Xt[At];null!=mt[te]&&(Ct+=' "'+te+'"="'+mt[te]+'"')}var de=this.layoutSync('graph {"'+j+'" ['+Ct+"]}","svg","dot"),le=(new window.DOMParser).parseFromString(de,"image/svg+xml");return p.select(document.createDocumentFragment()).append(function(){return le.documentElement}).select(".node")}function ht(j){self.document={},j.addEventListener("message",function(mt){var Ct=self["@hpcc-js/wasm"];null==Ct&&mt.data.vizURL&&(importScripts(mt.data.vizURL),(Ct=self["@hpcc-js/wasm"]).wasmFolder(mt.data.vizURL.match(/.*\//)[0])),Ct.graphviz.layout(mt.data.dot,"svg",mt.data.engine,mt.data.options).then(function(At){j.postMessage(At?{type:"done",svg:At}:mt.data.vizURL?{type:"init"}:{type:"skip"})}).catch(function(At){j.postMessage({type:"error",error:At.message})})})}function S(){ht(self)}function wt(){self.onconnect=function(j){var mt=j.ports[0];ht(mt),mt.start()}}function Bt(j,mt){var Ct=this;if(this._options={useWorker:!0,useSharedWorker:!1,engine:"dot",keyMode:"title",fade:!0,tweenPaths:!0,tweenShapes:!0,convertEqualSidedPolygons:!0,tweenPrecision:1,growEnteringEdges:!0,zoom:!0,zoomScaleExtent:[.1,10],zoomTranslateExtent:[[-1/0,-1/0],[1/0,1/0]],width:null,height:null,scale:1,fit:!1},mt instanceof Object)for(var At=0,Xt=Object.keys(mt);At<Xt.length;At++){var te=Xt[At];this._options[te]=mt[te]}else"boolean"==typeof mt&&(this._options.useWorker=mt);var Dt=this._options.useWorker,de=this._options.useSharedWorker;if("undefined"==typeof Worker&&(Dt=!1),"undefined"==typeof SharedWorker&&(de=!1),Dt||de){var le=p.selectAll("script").filter(function(){return"javascript/worker"==p.select(this).attr("type")||p.select(this).attr("src")&&p.select(this).attr("src").match(/.*\/@hpcc-js\/wasm/)});0==le.size()?(console.warn('No script tag of type "javascript/worker" was found and "useWorker" is true. Not using web worker.'),Dt=!1,de=!1):(this._vizURL=le.attr("src"),this._vizURL||(console.warn('No "src" attribute of was found on the "javascript/worker" script tag and "useWorker" is true. Not using web worker.'),Dt=!1,de=!1))}if(de){var Le="data:application/javascript;base64,"+btoa(ht.toString()+"("+wt.toString()+")()");this._worker=this._worker=new SharedWorker(Le),this._workerPort=this._worker.port,this._workerPortClose=this._worker.port.close.bind(this._workerPort),this._worker.port.start(),this._workerCallbacks=[]}else if(Dt){var ke=new Blob([ht.toString()+"("+S.toString()+")()"]),rn=window.URL.createObjectURL(ke);this._worker=new Worker(rn),this._workerPort=this._worker,this._workerPortClose=this._worker.terminate.bind(this._worker),this._workerCallbacks=[]}c.graphvizVersion().then(function(ze){Ct._graphvizVersion=ze}.bind(this)),this._selection=j,this._active=!1,this._busy=!1,this._jobs=[],this._queue=[],this._keyModes=new Set(["title","id","tag-index","index"]),this._images=[],this._translation=void 0,this._scale=void 0,this._eventTypes=["initEnd","start","layoutStart","layoutEnd","dataExtractEnd","dataProcessPass1End","dataProcessPass2End","dataProcessEnd","renderStart","renderEnd","transitionStart","transitionEnd","restoreEnd","end","zoom"],this._dispatch=v.dispatch.apply(void 0,A(this._eventTypes)),Mn.call(this),j.node().__graphviz__=this}function Yt(j,mt){return p.select(j).graphviz(mt)}Bt.prototype=Yt.prototype=(C(Ot={constructor:Bt,engine:function Yn(j){return this._options.engine=j,this},addImage:function ti(j,mt,Ct){return this._images.push({path:j,width:mt,height:Ct}),this},keyMode:function Me(j){if(!this._keyModes.has(j))throw Error("Illegal keyMode: "+j);if(j!=this._options.keyMode&&null!=this._data)throw Error("Too late to change keyMode");return this._options.keyMode=j,this},fade:function Xn(j){return this._options.fade=j,this},tweenPaths:function $n(j){return this._options.tweenPaths=j,this},tweenShapes:function Tt(j){return this._options.tweenShapes=j,j&&(this._options.tweenPaths=!0),this},convertEqualSidedPolygons:function Gt(j){return this._options.convertEqualSidedPolygons=j,this},tweenPrecision:function se(j){return this._options.tweenPrecision=j,this},growEnteringEdges:function pe(j){return this._options.growEnteringEdges=j,this},zoom:function ut(j){return this._options.zoom=j,this._options.zoom&&!this._zoomBehavior?it.call(this):!this._options.zoom&&this._zoomBehavior&&(this._zoomSelection.on(".zoom",null),this._zoomBehavior=null),this},resetZoom:function ft(j){var mt=this._zoomSelection;return j&&(mt=mt.transition(j)),mt.call(this._zoomBehavior.transform,this._originalTransform),this},zoomBehavior:function zt(){return this._zoomBehavior||null},zoomSelection:function ne(){return this._zoomSelection||null},zoomScaleExtent:function It(j){return this._options.zoomScaleExtent=j,this},zoomTranslateExtent:function Zt(j){return this._options.zoomTranslateExtent=j,this},render:function Te(j){return this._busy?(this._queue.push(this.render.bind(this,j)),this):(this._dispatch.call("renderStart",this),this._transitionFactory?m.timeout(function(){this._transition=_.transition(this._transitionFactory()),Re.call(this,j)}.bind(this),0):Re.call(this,j),this)},layout:function fn(j,mt,Ct,At){if(this._worker)oe.call(this,{dot:j,engine:mt,options:Ct},function(te){At.call(this,te.data)});else try{var Xt=this.layoutSync(j,"svg",mt,Ct);At.call(this,{type:"done",svg:Xt})}catch(te){At.call(this,{type:"error",error:te.message})}},dot:function Wn(j,mt){var Ct=this,At=this._options.engine,Xt=this._images;return this._dispatch.call("start",this),this._busy=!0,this._dispatch.call("layoutStart",this),this._worker||null!=this.layoutSync?(this.layout(j,At,{images:Xt},function(Dt){switch(Dt.type){case"error":if(!Ct._onerror)throw Dt.error.message;Ct._onerror(Dt.error);break;case"done":ni.call(this,Dt.svg,mt)}}),this):(this._afterInit=this.dot.bind(this,j,mt),this)},data:function pt(){return this._data||null},renderDot:function zn(j,mt){var Ct=this;return this.dot(j,function At(){Ct.render(mt)}),this},transition:function an(j){return j instanceof Function?this._transitionFactory=j:this._transition=_.transition(j),this},active:function je(j){var Ct=this._selection.selectWithoutDataPropagation("svg");return 0!=Ct.size()?_.active(Ct.node(),j):null},options:function sn(j){if(void 0===j)return Object.assign({},this._options);for(var mt=0,Ct=Object.keys(j);mt<Ct.length;mt++){var At=Ct[mt];this._options[At]=j[At]}return this},width:function En(j){return this._options.width=j,this},height:function Be(j){return this._options.height=j,this},scale:function ci(j){return this._options.scale=j,this},fit:function Rn(j){return this._options.fit=j,this},attributer:function _n(j){return this._attributer=j,this},on:function ve(j,mt){return this._dispatch.on(j,mt),this},onerror:function Ze(j){return this._onerror=j,this},logEvents:function Oe(j){for(var mt=this,Ct=Date.now(),At={},Xt=this._eventTypes,te=Math.max.apply(Math,A(Xt.map(function(ke){return ke.length}))),Dt=function(rn){var ze=Xt[rn];At[ze]=[],O=mt,mt.on(ze+".log",j?function(){var Je=Date.now(),fe=At[ze].length;At[ze].push(Je);var ye="";if(ye+="Event ",ye+=h.format(" >2")(rn)+" ",ye+=ze+" ".repeat(te-ze.length),ye+=h.format(" >5")(Je-Ct)+" ","initEnd"!=ze&&(ye+=h.format(" >5")(Je-At.start[fe])),"dataProcessEnd"==ze&&(ye+=" prepare                 "+h.format(" >5")(Je-At.layoutEnd[fe])),"renderEnd"==ze&&O._transition&&(ye+=" transition start margin "+h.format(" >5")(O._transition.delay()-(Je-At.renderStart[fe])),le=O._transition.delay(),Le=O._transition.duration()),"transitionStart"==ze){var Ye=Je-At.renderStart[fe];ye+=" transition delay        "+h.format(" >5")(Je-At.renderStart[fe]),ye+=" expected "+h.format(" >5")(le),ye+=" diff "+h.format(" >5")(Ye-le)}if("transitionEnd"==ze){var nt=Je-At.transitionStart[fe];ye+=" transition duration     "+h.format(" >5")(nt),ye+=" expected "+h.format(" >5")(Le),ye+=" diff "+h.format(" >5")(nt-Le)}console.log(ye),Ct=Je}:null)},de=0;de<Xt.length;de++){var O,le,Le;Dt(de)}return this},destroy:function nn(){return delete this._selection.node().__graphviz__,this._worker&&this._workerPortClose(),this},drawEdge:function Dn(j,mt,Ct,At,Xt){var te=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if((Xt=Object.assign({},Xt)).style&&Xt.style.includes("invis"))var Dt=p.select(null);else{var le=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),ke=H(bn.call(this,Xt));Dt=le.append("g").data([ke]),at.call(Dt.node(),ke),Di.call(this,Dt,j,mt,Ct,At,Xt,te)}return this._drawnEdge={g:Dt,x1:j,y1:mt,x2:Ct,y2:At,attributes:Xt},this},updateDrawnEdge:function qn(j,mt,Ct,At){var Xt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},te=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var Dt=this._drawnEdge.g;return Xt=Object.assign(this._drawnEdge.attributes,Xt),this._drawnEdge.x1=j,this._drawnEdge.y1=mt,this._drawnEdge.x2=Ct,this._drawnEdge.y2=At,!Dt.empty()||Xt.style&&Xt.style.includes("invis")||(Dt=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnEdge.g=Dt),Dt.empty()||Di.call(this,Dt,j,mt,Ct,At,Xt,te),this},moveDrawnEdgeEndPoint:function ei(j,mt){var Ct=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._drawnEdge)throw Error("No edge has been drawn");var At=this._drawnEdge.g,Xt=this._drawnEdge.x1,te=this._drawnEdge.y1,Dt=this._drawnEdge.attributes;return this._drawnEdge.x2=j,this._drawnEdge.y2=mt,vn(At,Xt,te,j,mt,Dt,Ct),this},insertDrawnEdge:function On(j){if(!this._drawnEdge)throw Error("No edge has been drawn");var mt=this._drawnEdge.g;if(mt.empty())return this;mt.selectWithoutDataPropagation("title").text(j);var te=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Dt=te.datum(),de=this._extractData(mt,Dt.children.length,te.datum());return Dt.children.push(de),et(mt,de),this._drawnEdge=null,this},removeDrawnEdge:Ai},"removeDrawnEdge",Ai),C(Ot,"drawnEdgeSelection",un),C(Ot,"drawnEdgeSelection",un),C(Ot,"drawNode",function Kn(j,mt,Ct){var At=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Xt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((At=Object.assign({},At)).style&&At.style.includes("invis"))var te=p.select(null);else{var O=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Le=H(X.call(this,Ct,At));te=O.append("g").data([Le]),at.call(te.node(),Le),Nn.call(this,te,j,mt,Ct,At,Xt)}return this._drawnNode={g:te,nodeId:Ct,x:j,y:mt,attributes:At},this}),C(Ot,"updateDrawnNode",function ui(j,mt,Ct){var At=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Xt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._drawnNode)throw Error("No node has been drawn");var te=this._drawnNode.g;return null==Ct&&(Ct=this._drawnNode.nodeId),At=Object.assign(this._drawnNode.attributes,At),this._drawnNode.nodeId=Ct,this._drawnNode.x=j,this._drawnNode.y=mt,!te.empty()||At.style&&At.style.includes("invis")||(te=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g").append("g"),this._drawnNode.g=te),te.empty()||Nn.call(this,te,j,mt,Ct,At,Xt),this}),C(Ot,"moveDrawnNode",function Mi(j,mt){if(!this._drawnNode)throw Error("No node has been drawn");var Ct=this._drawnNode.g,At=this._drawnNode.attributes;return this._drawnNode.x=j,this._drawnNode.y=mt,Ct.empty()||De(Ct,j,mt,At),this}),C(Ot,"insertDrawnNode",function pn(j){if(!this._drawnNode)throw Error("No node has been drawn");null==j&&(j=this._drawnNode.nodeId);var mt=this._drawnNode.g;if(mt.empty())return this;var Ct=this._drawnNode.attributes;if(mt.selectWithoutDataPropagation("title").text(j),Ct.URL||Ct.tooltip){var te=mt.selectWithoutDataPropagation("g").selectWithoutDataPropagation("a");te.selectWithoutDataPropagation("ellipse,polygon,path,polyline");var Dt=te.selectWithoutDataPropagation("text")}else mt.selectWithoutDataPropagation("ellipse,polygon,path,polyline"),Dt=mt.selectWithoutDataPropagation("text");Dt.text(Ct.label||j);var le=this._selection.selectWithoutDataPropagation("svg").selectWithoutDataPropagation("g"),Le=le.datum(),ke=this._extractData(mt,Le.children.length,le.datum());return Le.children.push(ke),et(mt,ke),this._drawnNode=null,this}),C(Ot,"removeDrawnNode",Bn),C(Ot,"removeDrawnNode",Bn),C(Ot,"drawnNodeSelection",V),C(Ot,"drawnNodeSelection",V),C(Ot,"graphvizVersion",function Tn(){return this._graphvizVersion}),Ot),x.selection.prototype.graphviz=function re(j){var mt=this.node().__graphviz__;return mt?(mt.options(j),m.timeout(function(){mt._dispatch.call("initEnd",this)}.bind(this),0)):mt=new Bt(this,j),mt},x.selection.prototype.selectWithoutDataPropagation=function qt(j){return p.select(this.size()>0?this.node().querySelector(j):null)},u.graphviz=Yt,Object.defineProperty(u,"__esModule",{value:!0})}(k,o(68557),o(18140),o(35011),o(31566),o(82683),o(60128),o(89397),o(41129),o(12218))},92940:(w,k,o)=>{"use strict";o.d(k,{Z:()=>t});var u={value:()=>{}};function x(){for(var f,c=0,h=arguments.length,g={};c<h;++c){if(!(f=arguments[c]+"")||f in g||/[\s.]/.test(f))throw new Error("illegal type: "+f);g[f]=[]}return new v(g)}function v(c){this._=c}function _(c,h){return c.trim().split(/^|\s+/).map(function(g){var f="",p=g.indexOf(".");if(p>=0&&(f=g.slice(p+1),g=g.slice(0,p)),g&&!h.hasOwnProperty(g))throw new Error("unknown type: "+g);return{type:g,name:f}})}function m(c,h){for(var p,g=0,f=c.length;g<f;++g)if((p=c[g]).name===h)return p.value}function l(c,h,g){for(var f=0,p=c.length;f<p;++f)if(c[f].name===h){c[f]=u,c=c.slice(0,f).concat(c.slice(f+1));break}return null!=g&&c.push({name:h,value:g}),c}v.prototype=x.prototype={constructor:v,on:function(c,h){var p,g=this._,f=_(c+"",g),C=-1,A=f.length;if(!(arguments.length<2)){if(null!=h&&"function"!=typeof h)throw new Error("invalid callback: "+h);for(;++C<A;)if(p=(c=f[C]).type)g[p]=l(g[p],c.name,h);else if(null==h)for(p in g)g[p]=l(g[p],c.name,null);return this}for(;++C<A;)if((p=(c=f[C]).type)&&(p=m(g[p],c.name)))return p},copy:function(){var c={},h=this._;for(var g in h)c[g]=h[g].slice();return new v(c)},call:function(c,h){if((p=arguments.length-2)>0)for(var p,C,g=new Array(p),f=0;f<p;++f)g[f]=arguments[f+2];if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(f=0,p=(C=this._[c]).length;f<p;++f)C[f].value.apply(h,g)},apply:function(c,h,g){if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(var f=this._[c],p=0,C=f.length;p<C;++p)f[p].value.apply(h,g)}};const t=x},18140:(w,k,o)=>{"use strict";o.r(k),o.d(k,{dispatch:()=>u.Z});var u=o(92940)},97907:(w,k,o)=>{"use strict";function u(v,_,m,l,t){var c=v*v,h=c*v;return((1-3*v+3*c-h)*_+(4-6*c+3*h)*m+(1+3*v+3*c-3*h)*l+h*t)/6}function x(v){var _=v.length-1;return function(m){var l=m<=0?m=0:m>=1?(m=1,_-1):Math.floor(m*_),t=v[l],c=v[l+1];return u((m-l/_)*_,l>0?v[l-1]:2*t-c,t,c,l<_-1?v[l+2]:2*c-t)}}o.d(k,{t:()=>u,Z:()=>x})},77296:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(97907);function x(v){var _=v.length;return function(m){var l=Math.floor(((m%=1)<0?++m:m)*_);return(0,u.t)((m-l/_)*_,v[(l+_-1)%_],v[l%_],v[(l+1)%_],v[(l+2)%_])}}},87237:(w,k,o)=>{"use strict";o.d(k,{wx:()=>_,yi:()=>m,ZP:()=>l});var u=o(89783);function x(t,c){return function(h){return t+h*c}}function _(t,c){var h=c-t;return h?x(t,h>180||h<-180?h-360*Math.round(h/360):h):(0,u.Z)(isNaN(t)?c:t)}function m(t){return 1==(t=+t)?l:function(c,h){return h-c?function v(t,c,h){return t=Math.pow(t,h),c=Math.pow(c,h)-t,h=1/h,function(g){return Math.pow(t+g*c,h)}}(c,h,t):(0,u.Z)(isNaN(c)?h:c)}}function l(t,c){var h=c-t;return h?x(t,h):(0,u.Z)(isNaN(t)?c:t)}},89783:(w,k,o)=>{"use strict";o.d(k,{Z:()=>u});const u=x=>()=>x},82683:(w,k,o)=>{"use strict";o.r(k),o.d(k,{interpolate:()=>p,interpolateArray:()=>m,interpolateBasis:()=>C.Z,interpolateBasisClosed:()=>A.Z,interpolateCubehelix:()=>ti,interpolateCubehelixLong:()=>Me,interpolateDate:()=>t,interpolateDiscrete:()=>L,interpolateHcl:()=>oe,interpolateHclLong:()=>fn,interpolateHsl:()=>et,interpolateHslLong:()=>q,interpolateHue:()=>P,interpolateLab:()=>Ve,interpolateNumber:()=>c.Z,interpolateNumberArray:()=>v,interpolateObject:()=>h,interpolateRgb:()=>x.ZP,interpolateRgbBasis:()=>x.hD,interpolateRgbBasisClosed:()=>x.YD,interpolateRound:()=>R,interpolateString:()=>g.Z,interpolateTransformCss:()=>Z.Y,interpolateTransformSvg:()=>Z.w,interpolateZoom:()=>ot,piecewise:()=>Xn,quantize:()=>$n});var u=o(52786),x=o(8200);function v(Tt,Gt){Gt||(Gt=[]);var ve,se=Tt?Math.min(Gt.length,Tt.length):0,pe=Gt.slice();return function(Ze){for(ve=0;ve<se;++ve)pe[ve]=Tt[ve]*(1-Ze)+Gt[ve]*Ze;return pe}}function _(Tt){return ArrayBuffer.isView(Tt)&&!(Tt instanceof DataView)}function m(Tt,Gt){return(_(Gt)?v:l)(Tt,Gt)}function l(Tt,Gt){var Oe,se=Gt?Gt.length:0,pe=Tt?Math.min(se,Tt.length):0,ve=new Array(pe),Ze=new Array(se);for(Oe=0;Oe<pe;++Oe)ve[Oe]=p(Tt[Oe],Gt[Oe]);for(;Oe<se;++Oe)Ze[Oe]=Gt[Oe];return function(nn){for(Oe=0;Oe<pe;++Oe)Ze[Oe]=ve[Oe](nn);return Ze}}function t(Tt,Gt){var se=new Date;return Tt=+Tt,Gt=+Gt,function(pe){return se.setTime(Tt*(1-pe)+Gt*pe),se}}var c=o(37815);function h(Tt,Gt){var ve,se={},pe={};for(ve in(null===Tt||"object"!=typeof Tt)&&(Tt={}),(null===Gt||"object"!=typeof Gt)&&(Gt={}),Gt)ve in Tt?se[ve]=p(Tt[ve],Gt[ve]):pe[ve]=Gt[ve];return function(Ze){for(ve in se)pe[ve]=se[ve](Ze);return pe}}var g=o(42142),f=o(89783);function p(Tt,Gt){var pe,se=typeof Gt;return null==Gt||"boolean"===se?(0,f.Z)(Gt):("number"===se?c.Z:"string"===se?(pe=(0,u.ZP)(Gt))?(Gt=pe,x.ZP):g.Z:Gt instanceof u.ZP?x.ZP:Gt instanceof Date?t:_(Gt)?v:Array.isArray(Gt)?l:"function"!=typeof Gt.valueOf&&"function"!=typeof Gt.toString||isNaN(Gt)?h:c.Z)(Tt,Gt)}var C=o(97907),A=o(77296);function L(Tt){var Gt=Tt.length;return function(se){return Tt[Math.max(0,Math.min(Gt-1,Math.floor(se*Gt)))]}}var N=o(87237);function P(Tt,Gt){var se=(0,N.wx)(+Tt,+Gt);return function(pe){var ve=se(pe);return ve-360*Math.floor(ve/360)}}function R(Tt,Gt){return Tt=+Tt,Gt=+Gt,function(se){return Math.round(Tt*(1-se)+Gt*se)}}var Z=o(43349);function H(Tt){return((Tt=Math.exp(Tt))+1/Tt)/2}const ot=function Tt(Gt,se,pe){function ve(Ze,Oe){var un,bn,nn=Ze[0],Zn=Ze[1],Dn=Ze[2],vn=Oe[2],ei=Oe[0]-nn,Ai=Oe[1]-Zn,On=ei*ei+Ai*Ai;if(On<1e-12)bn=Math.log(vn/Dn)/Gt,un=function(Bn){return[nn+Bn*ei,Zn+Bn*Ai,Dn*Math.exp(Gt*Bn*bn)]};else{var Kn=Math.sqrt(On),ui=(vn*vn-Dn*Dn+pe*On)/(2*Dn*se*Kn),Nn=(vn*vn-Dn*Dn-pe*On)/(2*vn*se*Kn),De=Math.log(Math.sqrt(ui*ui+1)-ui),Mi=Math.log(Math.sqrt(Nn*Nn+1)-Nn);bn=(Mi-De)/Gt,un=function(Bn){var pn=Bn*bn,V=H(De),X=Dn/(se*Kn)*(V*function rt(Tt){return((Tt=Math.exp(2*Tt))-1)/(Tt+1)}(Gt*pn+De)-function tt(Tt){return((Tt=Math.exp(Tt))-1/Tt)/2}(De));return[nn+X*ei,Zn+X*Ai,Dn*V/H(Gt*pn+De)]}}return un.duration=1e3*bn*Gt/Math.SQRT2,un}return ve.rho=function(Ze){var Oe=Math.max(.001,+Ze),nn=Oe*Oe;return Tt(Oe,nn,nn*nn)},ve}(Math.SQRT2,2,4);function J(Tt){return function(Gt,se){var pe=Tt((Gt=(0,u.Ym)(Gt)).h,(se=(0,u.Ym)(se)).h),ve=(0,N.ZP)(Gt.s,se.s),Ze=(0,N.ZP)(Gt.l,se.l),Oe=(0,N.ZP)(Gt.opacity,se.opacity);return function(nn){return Gt.h=pe(nn),Gt.s=ve(nn),Gt.l=Ze(nn),Gt.opacity=Oe(nn),Gt+""}}}const et=J(N.wx);var q=J(N.ZP),at=o(68884),Y=Math.PI/180,K=180/Math.PI,M=.82521,ft=4/29,It=6/29,Zt=3*It*It;function ne(Tt){if(Tt instanceof pt)return new pt(Tt.l,Tt.a,Tt.b,Tt.opacity);if(Tt instanceof Fe)return gn(Tt);Tt instanceof u.Ss||(Tt=(0,u.SU)(Tt));var Ze,Oe,Gt=_e(Tt.r),se=_e(Tt.g),pe=_e(Tt.b),ve=Nt((.2225045*Gt+.7168786*se+.0606169*pe)/1);return Gt===se&&se===pe?Ze=Oe=ve:(Ze=Nt((.4360747*Gt+.3850649*se+.1430804*pe)/.96422),Oe=Nt((.0139322*Gt+.0971045*se+.7141733*pe)/M)),new pt(116*ve-16,500*(Ze-ve),200*(ve-Oe),Tt.opacity)}function xt(Tt,Gt,se,pe){return 1===arguments.length?ne(Tt):new pt(Tt,Gt,se,null==pe?1:pe)}function pt(Tt,Gt,se,pe){this.l=+Tt,this.a=+Gt,this.b=+se,this.opacity=+pe}function Nt(Tt){return Tt>.008856451679035631?Math.pow(Tt,1/3):Tt/Zt+ft}function Jt(Tt){return Tt>It?Tt*Tt*Tt:Zt*(Tt-ft)}function ge(Tt){return 255*(Tt<=.0031308?12.92*Tt:1.055*Math.pow(Tt,1/2.4)-.055)}function _e(Tt){return(Tt/=255)<=.04045?Tt/12.92:Math.pow((Tt+.055)/1.055,2.4)}function Te(Tt){if(Tt instanceof Fe)return new Fe(Tt.h,Tt.c,Tt.l,Tt.opacity);if(Tt instanceof pt||(Tt=ne(Tt)),0===Tt.a&&0===Tt.b)return new Fe(NaN,0<Tt.l&&Tt.l<100?0:NaN,Tt.l,Tt.opacity);var Gt=Math.atan2(Tt.b,Tt.a)*K;return new Fe(Gt<0?Gt+360:Gt,Math.sqrt(Tt.a*Tt.a+Tt.b*Tt.b),Tt.l,Tt.opacity)}function Tn(Tt,Gt,se,pe){return 1===arguments.length?Te(Tt):new Fe(Tt,Gt,se,null==pe?1:pe)}function Fe(Tt,Gt,se,pe){this.h=+Tt,this.c=+Gt,this.l=+se,this.opacity=+pe}function gn(Tt){if(isNaN(Tt.h))return new pt(Tt.l,0,0,Tt.opacity);var Gt=Tt.h*Y;return new pt(Tt.l,Math.cos(Gt)*Tt.c,Math.sin(Gt)*Tt.c,Tt.opacity)}function Ve(Tt,Gt){var se=(0,N.ZP)((Tt=xt(Tt)).l,(Gt=xt(Gt)).l),pe=(0,N.ZP)(Tt.a,Gt.a),ve=(0,N.ZP)(Tt.b,Gt.b),Ze=(0,N.ZP)(Tt.opacity,Gt.opacity);return function(Oe){return Tt.l=se(Oe),Tt.a=pe(Oe),Tt.b=ve(Oe),Tt.opacity=Ze(Oe),Tt+""}}function Mn(Tt){return function(Gt,se){var pe=Tt((Gt=Tn(Gt)).h,(se=Tn(se)).h),ve=(0,N.ZP)(Gt.c,se.c),Ze=(0,N.ZP)(Gt.l,se.l),Oe=(0,N.ZP)(Gt.opacity,se.opacity);return function(nn){return Gt.h=pe(nn),Gt.c=ve(nn),Gt.l=Ze(nn),Gt.opacity=Oe(nn),Gt+""}}}(0,at.Z)(pt,xt,(0,at.l)(u.Il,{brighter:function(Tt){return new pt(this.l+18*(null==Tt?1:Tt),this.a,this.b,this.opacity)},darker:function(Tt){return new pt(this.l-18*(null==Tt?1:Tt),this.a,this.b,this.opacity)},rgb:function(){var Tt=(this.l+16)/116,Gt=isNaN(this.a)?Tt:Tt+this.a/500,se=isNaN(this.b)?Tt:Tt-this.b/200;return Gt=.96422*Jt(Gt),Tt=1*Jt(Tt),se=M*Jt(se),new u.Ss(ge(3.1338561*Gt-1.6168667*Tt-.4906146*se),ge(-.9787684*Gt+1.9161415*Tt+.033454*se),ge(.0719453*Gt-.2289914*Tt+1.4052427*se),this.opacity)}})),(0,at.Z)(Fe,Tn,(0,at.l)(u.Il,{brighter:function(Tt){return new Fe(this.h,this.c,this.l+18*(null==Tt?1:Tt),this.opacity)},darker:function(Tt){return new Fe(this.h,this.c,this.l-18*(null==Tt?1:Tt),this.opacity)},rgb:function(){return gn(this).rgb()}}));const oe=Mn(N.wx);var fn=Mn(N.ZP),ni=1.78277,zn=-.29227,an=-.90649,je=1.97294,sn=je*an,En=je*ni,Be=ni*zn- -.14861*an;function ci(Tt){if(Tt instanceof _n)return new _n(Tt.h,Tt.s,Tt.l,Tt.opacity);Tt instanceof u.Ss||(Tt=(0,u.SU)(Tt));var se=Tt.g/255,pe=Tt.b/255,ve=(Be*pe+sn*(Tt.r/255)-En*se)/(Be+sn-En),Ze=pe-ve,Oe=(je*(se-ve)-zn*Ze)/an,nn=Math.sqrt(Oe*Oe+Ze*Ze)/(je*ve*(1-ve)),Zn=nn?Math.atan2(Oe,Ze)*K-120:NaN;return new _n(Zn<0?Zn+360:Zn,nn,ve,Tt.opacity)}function Rn(Tt,Gt,se,pe){return 1===arguments.length?ci(Tt):new _n(Tt,Gt,se,null==pe?1:pe)}function _n(Tt,Gt,se,pe){this.h=+Tt,this.s=+Gt,this.l=+se,this.opacity=+pe}function Yn(Tt){return function Gt(se){function pe(ve,Ze){var Oe=Tt((ve=Rn(ve)).h,(Ze=Rn(Ze)).h),nn=(0,N.ZP)(ve.s,Ze.s),Zn=(0,N.ZP)(ve.l,Ze.l),Dn=(0,N.ZP)(ve.opacity,Ze.opacity);return function(qn){return ve.h=Oe(qn),ve.s=nn(qn),ve.l=Zn(Math.pow(qn,se)),ve.opacity=Dn(qn),ve+""}}return se=+se,pe.gamma=Gt,pe}(1)}(0,at.Z)(_n,Rn,(0,at.l)(u.Il,{brighter:function(Tt){return Tt=null==Tt?u.J5:Math.pow(u.J5,Tt),new _n(this.h,this.s,this.l*Tt,this.opacity)},darker:function(Tt){return Tt=null==Tt?u.xV:Math.pow(u.xV,Tt),new _n(this.h,this.s,this.l*Tt,this.opacity)},rgb:function(){var Tt=isNaN(this.h)?0:(this.h+120)*Y,Gt=+this.l,se=isNaN(this.s)?0:this.s*Gt*(1-Gt),pe=Math.cos(Tt),ve=Math.sin(Tt);return new u.Ss(255*(Gt+se*(-.14861*pe+ni*ve)),255*(Gt+se*(zn*pe+an*ve)),255*(Gt+se*(je*pe)),this.opacity)}}));const ti=Yn(N.wx);var Me=Yn(N.ZP);function Xn(Tt,Gt){void 0===Gt&&(Gt=Tt,Tt=p);for(var se=0,pe=Gt.length-1,ve=Gt[0],Ze=new Array(pe<0?0:pe);se<pe;)Ze[se]=Tt(ve,ve=Gt[++se]);return function(Oe){var nn=Math.max(0,Math.min(pe-1,Math.floor(Oe*=pe)));return Ze[nn](Oe-nn)}}function $n(Tt,Gt){for(var se=new Array(Gt),pe=0;pe<Gt;++pe)se[pe]=Tt(pe/(Gt-1));return se}},37815:(w,k,o)=>{"use strict";function u(x,v){return x=+x,v=+v,function(_){return x*(1-_)+v*_}}o.d(k,{Z:()=>u})},8200:(w,k,o)=>{"use strict";o.d(k,{ZP:()=>m,hD:()=>t,YD:()=>c});var u=o(52786),x=o(97907),v=o(77296),_=o(87237);const m=function h(g){var f=(0,_.yi)(g);function p(C,A){var L=f((C=(0,u.B8)(C)).r,(A=(0,u.B8)(A)).r),N=f(C.g,A.g),P=f(C.b,A.b),R=(0,_.ZP)(C.opacity,A.opacity);return function(Z){return C.r=L(Z),C.g=N(Z),C.b=P(Z),C.opacity=R(Z),C+""}}return p.gamma=h,p}(1);function l(h){return function(g){var L,N,f=g.length,p=new Array(f),C=new Array(f),A=new Array(f);for(L=0;L<f;++L)N=(0,u.B8)(g[L]),p[L]=N.r||0,C[L]=N.g||0,A[L]=N.b||0;return p=h(p),C=h(C),A=h(A),N.opacity=1,function(P){return N.r=p(P),N.g=C(P),N.b=A(P),N+""}}}var t=l(x.Z),c=l(v.Z)},42142:(w,k,o)=>{"use strict";o.d(k,{Z:()=>l});var u=o(37815),x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v=new RegExp(x.source,"g");function l(t,c){var g,f,p,h=x.lastIndex=v.lastIndex=0,C=-1,A=[],L=[];for(t+="",c+="";(g=x.exec(t))&&(f=v.exec(c));)(p=f.index)>h&&(p=c.slice(h,p),A[C]?A[C]+=p:A[++C]=p),(g=g[0])===(f=f[0])?A[C]?A[C]+=f:A[++C]=f:(A[++C]=null,L.push({i:C,x:(0,u.Z)(g,f)})),h=v.lastIndex;return h<c.length&&(p=c.slice(h),A[C]?A[C]+=p:A[++C]=p),A.length<2?L[0]?function m(t){return function(c){return t(c)+""}}(L[0].x):function _(t){return function(){return t}}(c):(c=L.length,function(N){for(var R,P=0;P<c;++P)A[(R=L[P]).i]=R.x(N);return A.join("")})}},43349:(w,k,o)=>{"use strict";o.d(k,{Y:()=>h,w:()=>g});var m,u=o(37815),x=180/Math.PI,v={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _(f,p,C,A,L,N){var P,R,Z;return(P=Math.sqrt(f*f+p*p))&&(f/=P,p/=P),(Z=f*C+p*A)&&(C-=f*Z,A-=p*Z),(R=Math.sqrt(C*C+A*A))&&(C/=R,A/=R,Z/=R),f*A<p*C&&(f=-f,p=-p,Z=-Z,P=-P),{translateX:L,translateY:N,rotate:Math.atan2(p,f)*x,skewX:Math.atan(Z)*x,scaleX:P,scaleY:R}}function c(f,p,C,A){function L(z){return z.length?z.pop()+" ":""}return function(z,H){var tt=[],rt=[];return z=f(z),H=f(H),function N(z,H,tt,rt,ot,J){if(z!==tt||H!==rt){var et=ot.push("translate(",null,p,null,C);J.push({i:et-4,x:(0,u.Z)(z,tt)},{i:et-2,x:(0,u.Z)(H,rt)})}else(tt||rt)&&ot.push("translate("+tt+p+rt+C)}(z.translateX,z.translateY,H.translateX,H.translateY,tt,rt),function P(z,H,tt,rt){z!==H?(z-H>180?H+=360:H-z>180&&(z+=360),rt.push({i:tt.push(L(tt)+"rotate(",null,A)-2,x:(0,u.Z)(z,H)})):H&&tt.push(L(tt)+"rotate("+H+A)}(z.rotate,H.rotate,tt,rt),function R(z,H,tt,rt){z!==H?rt.push({i:tt.push(L(tt)+"skewX(",null,A)-2,x:(0,u.Z)(z,H)}):H&&tt.push(L(tt)+"skewX("+H+A)}(z.skewX,H.skewX,tt,rt),function Z(z,H,tt,rt,ot,J){if(z!==tt||H!==rt){var et=ot.push(L(ot)+"scale(",null,",",null,")");J.push({i:et-4,x:(0,u.Z)(z,tt)},{i:et-2,x:(0,u.Z)(H,rt)})}else(1!==tt||1!==rt)&&ot.push(L(ot)+"scale("+tt+","+rt+")")}(z.scaleX,z.scaleY,H.scaleX,H.scaleY,tt,rt),z=H=null,function(ot){for(var q,J=-1,et=rt.length;++J<et;)tt[(q=rt[J]).i]=q.x(ot);return tt.join("")}}}var h=c(function l(f){const p=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(f+"");return p.isIdentity?v:_(p.a,p.b,p.c,p.d,p.e,p.f)},"px, ","px)","deg)"),g=c(function t(f){return null!=f&&(m||(m=document.createElementNS("http://www.w3.org/2000/svg","g")),m.setAttribute("transform",f),f=m.transform.baseVal.consolidate())?_((f=f.matrix).a,f.b,f.c,f.d,f.e,f.f):v},", ",")",")")},12218:(w,k,o)=>{"use strict";o.r(k),o.d(k,{path:()=>t});const u=Math.PI,x=2*u,v=1e-6,_=x-v;function m(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function l(){return new m}m.prototype=l.prototype={constructor:m,moveTo:function(c,h){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+h)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,h){this._+="L"+(this._x1=+c)+","+(this._y1=+h)},quadraticCurveTo:function(c,h,g,f){this._+="Q"+ +c+","+ +h+","+(this._x1=+g)+","+(this._y1=+f)},bezierCurveTo:function(c,h,g,f,p,C){this._+="C"+ +c+","+ +h+","+ +g+","+ +f+","+(this._x1=+p)+","+(this._y1=+C)},arcTo:function(c,h,g,f,p){var C=this._x1,A=this._y1,L=(g=+g)-(c=+c),N=(f=+f)-(h=+h),P=C-c,R=A-h,Z=P*P+R*R;if((p=+p)<0)throw new Error("negative radius: "+p);if(null===this._x1)this._+="M"+(this._x1=c)+","+(this._y1=h);else if(Z>v)if(Math.abs(R*L-N*P)>v&&p){var z=g-C,H=f-A,tt=L*L+N*N,rt=z*z+H*H,ot=Math.sqrt(tt),J=Math.sqrt(Z),et=p*Math.tan((u-Math.acos((tt+Z-rt)/(2*ot*J)))/2),q=et/J,at=et/ot;Math.abs(q-1)>v&&(this._+="L"+(c+q*P)+","+(h+q*R)),this._+="A"+p+","+p+",0,0,"+ +(R*z>P*H)+","+(this._x1=c+at*L)+","+(this._y1=h+at*N)}else this._+="L"+(this._x1=c)+","+(this._y1=h)},arc:function(c,h,g,f,p,C){c=+c,h=+h,C=!!C;var A=(g=+g)*Math.cos(f),L=g*Math.sin(f),N=c+A,P=h+L,R=1^C,Z=C?f-p:p-f;if(g<0)throw new Error("negative radius: "+g);null===this._x1?this._+="M"+N+","+P:(Math.abs(this._x1-N)>v||Math.abs(this._y1-P)>v)&&(this._+="L"+N+","+P),g&&(Z<0&&(Z=Z%x+x),Z>_?this._+="A"+g+","+g+",0,1,"+R+","+(c-A)+","+(h-L)+"A"+g+","+g+",0,1,"+R+","+(this._x1=N)+","+(this._y1=P):Z>v&&(this._+="A"+g+","+g+",0,"+ +(Z>=u)+","+R+","+(this._x1=c+g*Math.cos(p))+","+(this._y1=h+g*Math.sin(p))))},rect:function(c,h,g,f){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+h)+"h"+ +g+"v"+ +f+"h"+-g+"Z"},toString:function(){return this._}};const t=l},31566:(w,k,o)=>{"use strict";o.r(k),o.d(k,{interval:()=>v,now:()=>u.zO,timeout:()=>x.Z,timer:()=>u.HT,timerFlush:()=>u.R8});var u=o(78562),x=o(30406);function v(_,m,l){var t=new u.B7,c=m;return null==m?(t.restart(_,m,l),t):(t._restart=t.restart,t.restart=function(h,g,f){g=+g,f=null==f?(0,u.zO)():+f,t._restart(function p(C){C+=c,t._restart(p,c+=g,f),h(C)},g,f)},t.restart(_,m,l),t)}},30406:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(78562);function x(v,_,m){var l=new u.B7;return l.restart(t=>{l.stop(),v(t+_)},_=null==_?0:+_,m),l}},78562:(w,k,o)=>{"use strict";o.d(k,{zO:()=>p,B7:()=>A,HT:()=>L,R8:()=>N});var m,l,u=0,x=0,v=0,t=0,c=0,h=0,g="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(H){setTimeout(H,17)};function p(){return c||(f(C),c=g.now()+h)}function C(){c=0}function A(){this._call=this._time=this._next=null}function L(H,tt,rt){var ot=new A;return ot.restart(H,tt,rt),ot}function N(){p(),++u;for(var tt,H=m;H;)(tt=c-H._time)>=0&&H._call.call(null,tt),H=H._next;--u}function P(){c=(t=g.now())+h,u=x=0;try{N()}finally{u=0,function Z(){for(var H,rt,tt=m,ot=1/0;tt;)tt._call?(ot>tt._time&&(ot=tt._time),H=tt,tt=tt._next):(rt=tt._next,tt._next=null,tt=H?H._next=rt:m=rt);l=H,z(ot)}(),c=0}}function R(){var H=g.now(),tt=H-t;tt>1e3&&(h-=tt,t=H)}function z(H){u||(x&&(x=clearTimeout(x)),H-c>24?(H<1/0&&(x=setTimeout(P,H-g.now()-h)),v&&(v=clearInterval(v))):(v||(t=g.now(),v=setInterval(R,1e3)),u=1,f(P)))}A.prototype=L.prototype={constructor:A,restart:function(H,tt,rt){if("function"!=typeof H)throw new TypeError("callback is not a function");rt=(null==rt?p():+rt)+(null==tt?0:+tt),!this._next&&l!==this&&(l?l._next=this:m=this,l=this),this._call=H,this._time=rt,z()},stop:function(){this._call&&(this._call=null,this._time=1/0,z())}}},35011:(w,k,o)=>{"use strict";o.r(k),o.d(k,{active:()=>pn,interrupt:()=>Z,transition:()=>un});var u=o(37853),x=o(92940),v=o(78562),_=o(30406),m=(0,x.Z)("start","end","cancel","interrupt"),l=[];function A(V,X,ht,S,wt,Ot){var Bt=V.__transition;if(Bt){if(ht in Bt)return}else V.__transition={};!function R(V,X,ht){var wt,S=V.__transition;function Bt(qt){var j,mt,Ct,At;if(1!==ht.state)return re();for(j in S)if((At=S[j]).name===ht.name){if(3===At.state)return(0,_.Z)(Bt);4===At.state?(At.state=6,At.timer.stop(),At.on.call("interrupt",V,V.__data__,At.index,At.group),delete S[j]):+j<X&&(At.state=6,At.timer.stop(),At.on.call("cancel",V,V.__data__,At.index,At.group),delete S[j])}if((0,_.Z)(function(){3===ht.state&&(ht.state=4,ht.timer.restart(Yt,ht.delay,ht.time),Yt(qt))}),ht.state=2,ht.on.call("start",V,V.__data__,ht.index,ht.group),2===ht.state){for(ht.state=3,wt=new Array(Ct=ht.tween.length),j=0,mt=-1;j<Ct;++j)(At=ht.tween[j].value.call(V,V.__data__,ht.index,ht.group))&&(wt[++mt]=At);wt.length=mt+1}}function Yt(qt){for(var j=qt<ht.duration?ht.ease.call(null,qt/ht.duration):(ht.timer.restart(re),ht.state=5,1),mt=-1,Ct=wt.length;++mt<Ct;)wt[mt].call(V,j);5===ht.state&&(ht.on.call("end",V,V.__data__,ht.index,ht.group),re())}function re(){for(var qt in ht.state=6,ht.timer.stop(),delete S[X],S)return;delete V.__transition}S[X]=ht,ht.timer=(0,v.HT)(function Ot(qt){ht.state=1,ht.timer.restart(Bt,ht.delay,ht.time),ht.delay<=qt&&Bt(qt-ht.delay)},0,ht.time)}(V,ht,{name:X,index:S,group:wt,on:m,tween:l,time:Ot.time,delay:Ot.delay,duration:Ot.duration,ease:Ot.ease,timer:null,state:0})}function L(V,X){var ht=P(V,X);if(ht.state>0)throw new Error("too late; already scheduled");return ht}function N(V,X){var ht=P(V,X);if(ht.state>3)throw new Error("too late; already running");return ht}function P(V,X){var ht=V.__transition;if(!ht||!(ht=ht[X]))throw new Error("transition not found");return ht}function Z(V,X){var S,wt,Bt,ht=V.__transition,Ot=!0;if(ht){for(Bt in X=null==X?null:X+"",ht)(S=ht[Bt]).name===X?(wt=S.state>2&&S.state<5,S.state=6,S.timer.stop(),S.on.call(wt?"interrupt":"cancel",V,V.__data__,S.index,S.group),delete ht[Bt]):Ot=!1;Ot&&delete V.__transition}}var H=o(43349),tt=o(36175);function rt(V,X){var ht,S;return function(){var wt=N(this,V),Ot=wt.tween;if(Ot!==ht)for(var Bt=0,Yt=(S=ht=Ot).length;Bt<Yt;++Bt)if(S[Bt].name===X){(S=S.slice()).splice(Bt,1);break}wt.tween=S}}function ot(V,X,ht){var S,wt;if("function"!=typeof ht)throw new Error;return function(){var Ot=N(this,V),Bt=Ot.tween;if(Bt!==S){wt=(S=Bt).slice();for(var Yt={name:X,value:ht},re=0,qt=wt.length;re<qt;++re)if(wt[re].name===X){wt[re]=Yt;break}re===qt&&wt.push(Yt)}Ot.tween=wt}}function et(V,X,ht){var S=V._id;return V.each(function(){var wt=N(this,S);(wt.value||(wt.value={}))[X]=ht.apply(this,arguments)}),function(wt){return P(wt,S).value[X]}}var q=o(52786),at=o(37815),Y=o(8200),K=o(42142);function ut(V,X){var ht;return("number"==typeof X?at.Z:X instanceof q.ZP?Y.ZP:(ht=(0,q.ZP)(X))?(X=ht,Y.ZP):K.Z)(V,X)}function it(V){return function(){this.removeAttribute(V)}}function G(V){return function(){this.removeAttributeNS(V.space,V.local)}}function M(V,X,ht){var S,Ot,wt=ht+"";return function(){var Bt=this.getAttribute(V);return Bt===wt?null:Bt===S?Ot:Ot=X(S=Bt,ht)}}function ft(V,X,ht){var S,Ot,wt=ht+"";return function(){var Bt=this.getAttributeNS(V.space,V.local);return Bt===wt?null:Bt===S?Ot:Ot=X(S=Bt,ht)}}function It(V,X,ht){var S,wt,Ot;return function(){var Bt,re,Yt=ht(this);return null==Yt?void this.removeAttribute(V):(Bt=this.getAttribute(V))===(re=Yt+"")?null:Bt===S&&re===wt?Ot:(wt=re,Ot=X(S=Bt,Yt))}}function Zt(V,X,ht){var S,wt,Ot;return function(){var Bt,re,Yt=ht(this);return null==Yt?void this.removeAttributeNS(V.space,V.local):(Bt=this.getAttributeNS(V.space,V.local))===(re=Yt+"")?null:Bt===S&&re===wt?Ot:(wt=re,Ot=X(S=Bt,Yt))}}function ne(V,X){return function(ht){this.setAttribute(V,X.call(this,ht))}}function Ut(V,X){return function(ht){this.setAttributeNS(V.space,V.local,X.call(this,ht))}}function xt(V,X){var ht,S;function wt(){var Ot=X.apply(this,arguments);return Ot!==S&&(ht=(S=Ot)&&Ut(V,Ot)),ht}return wt._value=X,wt}function pt(V,X){var ht,S;function wt(){var Ot=X.apply(this,arguments);return Ot!==S&&(ht=(S=Ot)&&ne(V,Ot)),ht}return wt._value=X,wt}function Jt(V,X){return function(){L(this,V).delay=+X.apply(this,arguments)}}function ge(V,X){return X=+X,function(){L(this,V).delay=X}}function Te(V,X){return function(){N(this,V).duration=+X.apply(this,arguments)}}function Re(V,X){return X=+X,function(){N(this,V).duration=X}}function Fe(V,X){if("function"!=typeof X)throw new Error;return function(){N(this,V).ease=X}}var oe=o(97905);function zn(V,X,ht){var S,wt,Ot=function ni(V){return(V+"").trim().split(/^|\s+/).every(function(X){var ht=X.indexOf(".");return ht>=0&&(X=X.slice(0,ht)),!X||"start"===X})}(X)?L:N;return function(){var Bt=Ot(this,V),Yt=Bt.on;Yt!==S&&(wt=(S=Yt).copy()).on(X,ht),Bt.on=wt}}var En=o(29742),ci=o(32037),_n=u.ZP.prototype.constructor,ti=o(24476);function Xn(V){return function(){this.style.removeProperty(V)}}function pe(V,X,ht){return function(S){this.style.setProperty(V,X.call(this,S),ht)}}function ve(V,X,ht){var S,wt;function Ot(){var Bt=X.apply(this,arguments);return Bt!==wt&&(S=(wt=Bt)&&pe(V,Bt,ht)),S}return Ot._value=X,Ot}function Dn(V){return function(X){this.textContent=V.call(this,X)}}function qn(V){var X,ht;function S(){var wt=V.apply(this,arguments);return wt!==ht&&(X=(ht=wt)&&Dn(wt)),X}return S._value=V,S}var Ai=0;function On(V,X,ht,S){this._groups=V,this._parents=X,this._name=ht,this._id=S}function un(V){return(0,u.ZP)().transition(V)}function bn(){return++Ai}var Kn=u.ZP.prototype;On.prototype=un.prototype={constructor:On,select:function Be(V){var X=this._name,ht=this._id;"function"!=typeof V&&(V=(0,En.Z)(V));for(var S=this._groups,wt=S.length,Ot=new Array(wt),Bt=0;Bt<wt;++Bt)for(var j,mt,Yt=S[Bt],re=Yt.length,qt=Ot[Bt]=new Array(re),Ct=0;Ct<re;++Ct)(j=Yt[Ct])&&(mt=V.call(j,j.__data__,Ct,Yt))&&("__data__"in j&&(mt.__data__=j.__data__),qt[Ct]=mt,A(qt[Ct],X,ht,Ct,qt,P(j,ht)));return new On(Ot,this._parents,X,ht)},selectAll:function Rn(V){var X=this._name,ht=this._id;"function"!=typeof V&&(V=(0,ci.Z)(V));for(var S=this._groups,wt=S.length,Ot=[],Bt=[],Yt=0;Yt<wt;++Yt)for(var j,re=S[Yt],qt=re.length,mt=0;mt<qt;++mt)if(j=re[mt]){for(var At,Ct=V.call(j,j.__data__,mt,re),Xt=P(j,ht),te=0,Dt=Ct.length;te<Dt;++te)(At=Ct[te])&&A(At,X,ht,te,Ct,Xt);Ot.push(Ct),Bt.push(j)}return new On(Ot,Bt,X,ht)},filter:function fn(V){"function"!=typeof V&&(V=(0,oe.Z)(V));for(var X=this._groups,ht=X.length,S=new Array(ht),wt=0;wt<ht;++wt)for(var re,Ot=X[wt],Bt=Ot.length,Yt=S[wt]=[],qt=0;qt<Bt;++qt)(re=Ot[qt])&&V.call(re,re.__data__,qt,Ot)&&Yt.push(re);return new On(S,this._parents,this._name,this._id)},merge:function Wn(V){if(V._id!==this._id)throw new Error;for(var X=this._groups,ht=V._groups,S=X.length,Ot=Math.min(S,ht.length),Bt=new Array(S),Yt=0;Yt<Ot;++Yt)for(var Ct,re=X[Yt],qt=ht[Yt],j=re.length,mt=Bt[Yt]=new Array(j),At=0;At<j;++At)(Ct=re[At]||qt[At])&&(mt[At]=Ct);for(;Yt<S;++Yt)Bt[Yt]=X[Yt];return new On(Bt,this._parents,this._name,this._id)},selection:function Yn(){return new _n(this._groups,this._parents)},transition:function vn(){for(var V=this._name,X=this._id,ht=bn(),S=this._groups,wt=S.length,Ot=0;Ot<wt;++Ot)for(var re,Bt=S[Ot],Yt=Bt.length,qt=0;qt<Yt;++qt)if(re=Bt[qt]){var j=P(re,X);A(re,V,ht,qt,Bt,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new On(S,this._parents,V,ht)},call:Kn.call,nodes:Kn.nodes,node:Kn.node,size:Kn.size,empty:Kn.empty,each:Kn.each,on:function an(V,X){var ht=this._id;return arguments.length<2?P(this.node(),ht).on.on(V):this.each(zn(ht,V,X))},attr:function zt(V,X){var ht=(0,tt.Z)(V),S="transform"===ht?H.w:ut;return this.attrTween(V,"function"==typeof X?(ht.local?Zt:It)(ht,S,et(this,"attr."+V,X)):null==X?(ht.local?G:it)(ht):(ht.local?ft:M)(ht,S,X))},attrTween:function Nt(V,X){var ht="attr."+V;if(arguments.length<2)return(ht=this.tween(ht))&&ht._value;if(null==X)return this.tween(ht,null);if("function"!=typeof X)throw new Error;var S=(0,tt.Z)(V);return this.tween(ht,(S.local?xt:pt)(S,X))},style:function se(V,X,ht){var S="transform"==(V+="")?H.Y:ut;return null==X?this.styleTween(V,function Me(V,X){var ht,S,wt;return function(){var Ot=(0,ti.S)(this,V),Bt=(this.style.removeProperty(V),(0,ti.S)(this,V));return Ot===Bt?null:Ot===ht&&Bt===S?wt:wt=X(ht=Ot,S=Bt)}}(V,S)).on("end.style."+V,Xn(V)):"function"==typeof X?this.styleTween(V,function Tt(V,X,ht){var S,wt,Ot;return function(){var Bt=(0,ti.S)(this,V),Yt=ht(this),re=Yt+"";return null==Yt&&(this.style.removeProperty(V),re=Yt=(0,ti.S)(this,V)),Bt===re?null:Bt===S&&re===wt?Ot:(wt=re,Ot=X(S=Bt,Yt))}}(V,S,et(this,"style."+V,X))).each(function Gt(V,X){var ht,S,wt,Yt,Ot="style."+X,Bt="end."+Ot;return function(){var re=N(this,V),qt=re.on,j=null==re.value[Ot]?Yt||(Yt=Xn(X)):void 0;(qt!==ht||wt!==j)&&(S=(ht=qt).copy()).on(Bt,wt=j),re.on=S}}(this._id,V)):this.styleTween(V,function $n(V,X,ht){var S,Ot,wt=ht+"";return function(){var Bt=(0,ti.S)(this,V);return Bt===wt?null:Bt===S?Ot:Ot=X(S=Bt,ht)}}(V,S,X),ht).on("end.style."+V,null)},styleTween:function Ze(V,X,ht){var S="style."+(V+="");if(arguments.length<2)return(S=this.tween(S))&&S._value;if(null==X)return this.tween(S,null);if("function"!=typeof X)throw new Error;return this.tween(S,ve(V,X,null==ht?"":ht))},text:function Zn(V){return this.tween("text","function"==typeof V?function nn(V){return function(){var X=V(this);this.textContent=null==X?"":X}}(et(this,"text",V)):function Oe(V){return function(){this.textContent=V}}(null==V?"":V+""))},textTween:function Di(V){var X="text";if(arguments.length<1)return(X=this.tween(X))&&X._value;if(null==V)return this.tween(X,null);if("function"!=typeof V)throw new Error;return this.tween(X,qn(V))},remove:function sn(){return this.on("end.remove",function je(V){return function(){var X=this.parentNode;for(var ht in this.__transition)if(+ht!==V)return;X&&X.removeChild(this)}}(this._id))},tween:function J(V,X){var ht=this._id;if(V+="",arguments.length<2){for(var Bt,S=P(this.node(),ht).tween,wt=0,Ot=S.length;wt<Ot;++wt)if((Bt=S[wt]).name===V)return Bt.value;return null}return this.each((null==X?rt:ot)(ht,V,X))},delay:function _e(V){var X=this._id;return arguments.length?this.each(("function"==typeof V?Jt:ge)(X,V)):P(this.node(),X).delay},duration:function Tn(V){var X=this._id;return arguments.length?this.each(("function"==typeof V?Te:Re)(X,V)):P(this.node(),X).duration},ease:function gn(V){var X=this._id;return arguments.length?this.each(Fe(X,V)):P(this.node(),X).ease},easeVarying:function Mn(V){if("function"!=typeof V)throw new Error;return this.each(function Ve(V,X){return function(){var ht=X.apply(this,arguments);if("function"!=typeof ht)throw new Error;N(this,V).ease=ht}}(this._id,V))},end:function ei(){var V,X,ht=this,S=ht._id,wt=ht.size();return new Promise(function(Ot,Bt){var Yt={value:Bt},re={value:function(){0==--wt&&Ot()}};ht.each(function(){var qt=N(this,S),j=qt.on;j!==V&&((X=(V=j).copy())._.cancel.push(Yt),X._.interrupt.push(Yt),X._.end.push(re)),qt.on=X}),0===wt&&Ot()})},[Symbol.iterator]:Kn[Symbol.iterator]};var Nn={time:null,delay:0,duration:250,ease:o(27065).tw};function De(V,X){for(var ht;!(ht=V.__transition)||!(ht=ht[X]);)if(!(V=V.parentNode))throw new Error(`transition ${X} not found`);return ht}u.ZP.prototype.interrupt=function z(V){return this.each(function(){Z(this,V)})},u.ZP.prototype.transition=function Mi(V){var X,ht;V instanceof On?(X=V._id,V=V._name):(X=bn(),(ht=Nn).time=(0,v.zO)(),V=null==V?null:V+"");for(var S=this._groups,wt=S.length,Ot=0;Ot<wt;++Ot)for(var re,Bt=S[Ot],Yt=Bt.length,qt=0;qt<Yt;++qt)(re=Bt[qt])&&A(re,V,X,qt,Bt,ht||De(re,X));return new On(S,this._parents,V,X)};var Bn=[null];function pn(V,X){var S,wt,ht=V.__transition;if(ht)for(wt in X=null==X?null:X+"",ht)if((S=ht[wt]).state>1&&S.name===X)return new On([[V]],Bn,X,+wt);return null}},47927:(w,k,o)=>{"use strict";function u(x){return function(){return x}}o.d(k,{Z:()=>u})},6738:(w,k,o)=>{"use strict";function u(x,v){return x=+x,v=+v,function(_){return x*(1-_)+v*_}}o.d(k,{Z:()=>u})},23534:(w,k,o)=>{"use strict";o.d(k,{ZP:()=>f});var u=o(52786);function x(L,N,P,R,Z){var z=L*L,H=z*L;return((1-3*L+3*z-H)*N+(4-6*z+3*H)*P+(1+3*L+3*z-3*H)*R+H*Z)/6}var m=o(47927);function g(L,N){var P=N-L;return P?function l(L,N){return function(P){return L+P*N}}(L,P):(0,m.Z)(isNaN(L)?N:L)}const f=function L(N){var P=function h(L){return 1==(L=+L)?g:function(N,P){return P-N?function t(L,N,P){return L=Math.pow(L,P),N=Math.pow(N,P)-L,P=1/P,function(R){return Math.pow(L+R*N,P)}}(N,P,L):(0,m.Z)(isNaN(N)?P:N)}}(N);function R(Z,z){var H=P((Z=(0,u.B8)(Z)).r,(z=(0,u.B8)(z)).r),tt=P(Z.g,z.g),rt=P(Z.b,z.b),ot=g(Z.opacity,z.opacity);return function(J){return Z.r=H(J),Z.g=tt(J),Z.b=rt(J),Z.opacity=ot(J),Z+""}}return R.gamma=L,R}(1);function p(L){return function(N){var H,tt,P=N.length,R=new Array(P),Z=new Array(P),z=new Array(P);for(H=0;H<P;++H)tt=(0,u.B8)(N[H]),R[H]=tt.r||0,Z[H]=tt.g||0,z[H]=tt.b||0;return R=L(R),Z=L(Z),z=L(z),tt.opacity=1,function(rt){return tt.r=R(rt),tt.g=Z(rt),tt.b=z(rt),tt+""}}}p(function v(L){var N=L.length-1;return function(P){var R=P<=0?P=0:P>=1?(P=1,N-1):Math.floor(P*N),Z=L[R],z=L[R+1];return x((P-R/N)*N,R>0?L[R-1]:2*Z-z,Z,z,R<N-1?L[R+2]:2*z-Z)}}),p(function _(L){var N=L.length;return function(P){var R=Math.floor(((P%=1)<0?++P:P)*N);return x((P-R/N)*N,L[(R+N-1)%N],L[R%N],L[(R+1)%N],L[(R+2)%N])}})},23096:(w,k,o)=>{"use strict";o.d(k,{Z:()=>l});var u=o(6738),x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v=new RegExp(x.source,"g");function l(t,c){var g,f,p,h=x.lastIndex=v.lastIndex=0,C=-1,A=[],L=[];for(t+="",c+="";(g=x.exec(t))&&(f=v.exec(c));)(p=f.index)>h&&(p=c.slice(h,p),A[C]?A[C]+=p:A[++C]=p),(g=g[0])===(f=f[0])?A[C]?A[C]+=f:A[++C]=f:(A[++C]=null,L.push({i:C,x:(0,u.Z)(g,f)})),h=v.lastIndex;return h<c.length&&(p=c.slice(h),A[C]?A[C]+=p:A[++C]=p),A.length<2?L[0]?function m(t){return function(c){return t(c)+""}}(L[0].x):function _(t){return function(){return t}}(c):(c=L.length,function(N){for(var R,P=0;P<c;++P)A[(R=L[P]).i]=R.x(N);return A.join("")})}},75349:(w,k,o)=>{"use strict";o.d(k,{Y:()=>p,w:()=>C});var m,l,t,c,u=o(6738),x=180/Math.PI,v={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _(A,L,N,P,R,Z){var z,H,tt;return(z=Math.sqrt(A*A+L*L))&&(A/=z,L/=z),(tt=A*N+L*P)&&(N-=A*tt,P-=L*tt),(H=Math.sqrt(N*N+P*P))&&(N/=H,P/=H,tt/=H),A*P<L*N&&(A=-A,L=-L,tt=-tt,z=-z),{translateX:R,translateY:Z,rotate:Math.atan2(L,A)*x,skewX:Math.atan(tt)*x,scaleX:z,scaleY:H}}function f(A,L,N,P){function R(rt){return rt.length?rt.pop()+" ":""}return function(rt,ot){var J=[],et=[];return rt=A(rt),ot=A(ot),function Z(rt,ot,J,et,q,at){if(rt!==J||ot!==et){var Y=q.push("translate(",null,L,null,N);at.push({i:Y-4,x:(0,u.Z)(rt,J)},{i:Y-2,x:(0,u.Z)(ot,et)})}else(J||et)&&q.push("translate("+J+L+et+N)}(rt.translateX,rt.translateY,ot.translateX,ot.translateY,J,et),function z(rt,ot,J,et){rt!==ot?(rt-ot>180?ot+=360:ot-rt>180&&(rt+=360),et.push({i:J.push(R(J)+"rotate(",null,P)-2,x:(0,u.Z)(rt,ot)})):ot&&J.push(R(J)+"rotate("+ot+P)}(rt.rotate,ot.rotate,J,et),function H(rt,ot,J,et){rt!==ot?et.push({i:J.push(R(J)+"skewX(",null,P)-2,x:(0,u.Z)(rt,ot)}):ot&&J.push(R(J)+"skewX("+ot+P)}(rt.skewX,ot.skewX,J,et),function tt(rt,ot,J,et,q,at){if(rt!==J||ot!==et){var Y=q.push(R(q)+"scale(",null,",",null,")");at.push({i:Y-4,x:(0,u.Z)(rt,J)},{i:Y-2,x:(0,u.Z)(ot,et)})}else(1!==J||1!==et)&&q.push(R(q)+"scale("+J+","+et+")")}(rt.scaleX,rt.scaleY,ot.scaleX,ot.scaleY,J,et),rt=ot=null,function(q){for(var K,at=-1,Y=et.length;++at<Y;)J[(K=et[at]).i]=K.x(q);return J.join("")}}}var p=f(function h(A){return"none"===A?v:(m||(m=document.createElement("DIV"),l=document.documentElement,t=document.defaultView),m.style.transform=A,A=t.getComputedStyle(l.appendChild(m),null).getPropertyValue("transform"),l.removeChild(m),_(+(A=A.slice(7,-1).split(","))[0],+A[1],+A[2],+A[3],+A[4],+A[5]))},"px, ","px)","deg)"),C=f(function g(A){return null!=A&&(c||(c=document.createElementNS("http://www.w3.org/2000/svg","g")),c.setAttribute("transform",A),A=c.transform.baseVal.consolidate())?_((A=A.matrix).a,A.b,A.c,A.d,A.e,A.f):v},", ",")",")")},34638:(w,k,o)=>{"use strict";function u(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}o.d(k,{Z:()=>u})},7500:(w,k,o)=>{"use strict";o.d(k,{Z:()=>m});var u=o(36175),x=o(53517);function v(l){return function(){var t=this.ownerDocument,c=this.namespaceURI;return c===x.P&&t.documentElement.namespaceURI===x.P?t.createElement(l):t.createElementNS(c,l)}}function _(l){return function(){return this.ownerDocument.createElementNS(l.space,l.local)}}function m(l){var t=(0,u.Z)(l);return(t.local?_:v)(t)}},68557:(w,k,o)=>{"use strict";o.r(k),o.d(k,{create:()=>v,creator:()=>u.Z,local:()=>m,matcher:()=>t.Z,namespace:()=>c.Z,namespaces:()=>h.Z,pointer:()=>g.Z,pointers:()=>p,select:()=>x.Z,selectAll:()=>L,selection:()=>A.ZP,selector:()=>N.Z,selectorAll:()=>P.Z,style:()=>R.S,window:()=>Z.Z});var u=o(7500),x=o(52016);function v(z){return(0,x.Z)((0,u.Z)(z).call(document.documentElement))}var _=0;function m(){return new l}function l(){this._="@"+(++_).toString(36)}l.prototype=m.prototype={constructor:l,get:function(z){for(var H=this._;!(H in z);)if(!(z=z.parentNode))return;return z[H]},set:function(z,H){return z[this._]=H},remove:function(z){return this._ in z&&delete z[this._]},toString:function(){return this._}};var t=o(97905),c=o(36175),h=o(53517),g=o(29132),f=o(75819);function p(z,H){return z.target&&(z=(0,f.Z)(z),void 0===H&&(H=z.currentTarget),z=z.touches||[z]),Array.from(z,tt=>(0,g.Z)(tt,H))}var C=o(34638),A=o(37853);function L(z){return"string"==typeof z?new A.Y1([document.querySelectorAll(z)],[document.documentElement]):new A.Y1([null==z?[]:(0,C.Z)(z)],A.Jz)}var N=o(29742),P=o(32037),R=o(24476),Z=o(2442)},97905:(w,k,o)=>{"use strict";function u(v){return function(){return this.matches(v)}}function x(v){return function(_){return _.matches(v)}}o.d(k,{Z:()=>u,P:()=>x})},36175:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(53517);function x(v){var _=v+="",m=_.indexOf(":");return m>=0&&"xmlns"!==(_=v.slice(0,m))&&(v=v.slice(m+1)),u.Z.hasOwnProperty(_)?{space:u.Z[_],local:v}:v}},53517:(w,k,o)=>{"use strict";o.d(k,{P:()=>u,Z:()=>x});var u="http://www.w3.org/1999/xhtml";const x={svg:"http://www.w3.org/2000/svg",xhtml:u,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},29132:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(75819);function x(v,_){if(v=(0,u.Z)(v),void 0===_&&(_=v.currentTarget),_){var m=_.ownerSVGElement||_;if(m.createSVGPoint){var l=m.createSVGPoint();return l.x=v.clientX,l.y=v.clientY,[(l=l.matrixTransform(_.getScreenCTM().inverse())).x,l.y]}if(_.getBoundingClientRect){var t=_.getBoundingClientRect();return[v.clientX-t.left-_.clientLeft,v.clientY-t.top-_.clientTop]}}return[v.pageX,v.pageY]}},52016:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(37853);function x(v){return"string"==typeof v?new u.Y1([[document.querySelector(v)]],[document.documentElement]):new u.Y1([[v]],u.Jz)}},37853:(w,k,o)=>{"use strict";o.d(k,{Y1:()=>De,ZP:()=>pn,Jz:()=>Nn});var u=o(29742),v=o(34638),_=o(32037),t=o(97905),c=Array.prototype.find;function g(){return this.firstElementChild}var p=Array.prototype.filter;function C(){return this.children}function P(V){return new Array(V.length)}function Z(V,X){this.ownerDocument=V.ownerDocument,this.namespaceURI=V.namespaceURI,this._next=null,this._parent=V,this.__data__=X}function z(V){return function(){return V}}function H(V,X,ht,S,wt,Ot){for(var Yt,Bt=0,re=X.length,qt=Ot.length;Bt<qt;++Bt)(Yt=X[Bt])?(Yt.__data__=Ot[Bt],S[Bt]=Yt):ht[Bt]=new Z(V,Ot[Bt]);for(;Bt<re;++Bt)(Yt=X[Bt])&&(wt[Bt]=Yt)}function tt(V,X,ht,S,wt,Ot,Bt){var Yt,re,At,qt=new Map,j=X.length,mt=Ot.length,Ct=new Array(j);for(Yt=0;Yt<j;++Yt)(re=X[Yt])&&(Ct[Yt]=At=Bt.call(re,re.__data__,Yt,X)+"",qt.has(At)?wt[Yt]=re:qt.set(At,re));for(Yt=0;Yt<mt;++Yt)At=Bt.call(V,Ot[Yt],Yt,Ot)+"",(re=qt.get(At))?(S[Yt]=re,re.__data__=Ot[Yt],qt.delete(At)):ht[Yt]=new Z(V,Ot[Yt]);for(Yt=0;Yt<j;++Yt)(re=X[Yt])&&qt.get(Ct[Yt])===re&&(wt[Yt]=re)}function rt(V){return V.__data__}function K(V,X){return V<X?-1:V>X?1:V>=X?0:NaN}Z.prototype={constructor:Z,appendChild:function(V){return this._parent.insertBefore(V,this._next)},insertBefore:function(V,X){return this._parent.insertBefore(V,X)},querySelector:function(V){return this._parent.querySelector(V)},querySelectorAll:function(V){return this._parent.querySelectorAll(V)}};var Zt=o(36175);function zt(V){return function(){this.removeAttribute(V)}}function ne(V){return function(){this.removeAttributeNS(V.space,V.local)}}function Ut(V,X){return function(){this.setAttribute(V,X)}}function xt(V,X){return function(){this.setAttributeNS(V.space,V.local,X)}}function pt(V,X){return function(){var ht=X.apply(this,arguments);null==ht?this.removeAttribute(V):this.setAttribute(V,ht)}}function Nt(V,X){return function(){var ht=X.apply(this,arguments);null==ht?this.removeAttributeNS(V.space,V.local):this.setAttributeNS(V.space,V.local,ht)}}var ge=o(24476);function _e(V){return function(){delete this[V]}}function Te(V,X){return function(){this[V]=X}}function Re(V,X){return function(){var ht=X.apply(this,arguments);null==ht?delete this[V]:this[V]=ht}}function Fe(V){return V.trim().split(/^|\s+/)}function gn(V){return V.classList||new Ve(V)}function Ve(V){this._node=V,this._names=Fe(V.getAttribute("class")||"")}function Mn(V,X){for(var ht=gn(V),S=-1,wt=X.length;++S<wt;)ht.add(X[S])}function oe(V,X){for(var ht=gn(V),S=-1,wt=X.length;++S<wt;)ht.remove(X[S])}function fn(V){return function(){Mn(this,V)}}function Wn(V){return function(){oe(this,V)}}function ni(V,X){return function(){(X.apply(this,arguments)?Mn:oe)(this,V)}}function an(){this.textContent=""}function je(V){return function(){this.textContent=V}}function sn(V){return function(){var X=V.apply(this,arguments);this.textContent=null==X?"":X}}function Be(){this.innerHTML=""}function ci(V){return function(){this.innerHTML=V}}function Rn(V){return function(){var X=V.apply(this,arguments);this.innerHTML=null==X?"":X}}function Yn(){this.nextSibling&&this.parentNode.appendChild(this)}function Me(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Ve.prototype={add:function(V){this._names.indexOf(V)<0&&(this._names.push(V),this._node.setAttribute("class",this._names.join(" ")))},remove:function(V){var X=this._names.indexOf(V);X>=0&&(this._names.splice(X,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(V){return this._names.indexOf(V)>=0}};var $n=o(7500);function Gt(){return null}function pe(){var V=this.parentNode;V&&V.removeChild(this)}function Ze(){var V=this.cloneNode(!1),X=this.parentNode;return X?X.insertBefore(V,this.nextSibling):V}function Oe(){var V=this.cloneNode(!0),X=this.parentNode;return X?X.insertBefore(V,this.nextSibling):V}function qn(V){return V.trim().split(/^|\s+/).map(function(X){var ht="",S=X.indexOf(".");return S>=0&&(ht=X.slice(S+1),X=X.slice(0,S)),{type:X,name:ht}})}function Di(V){return function(){var X=this.__on;if(X){for(var Ot,ht=0,S=-1,wt=X.length;ht<wt;++ht)Ot=X[ht],V.type&&Ot.type!==V.type||Ot.name!==V.name?X[++S]=Ot:this.removeEventListener(Ot.type,Ot.listener,Ot.options);++S?X.length=S:delete this.__on}}}function vn(V,X,ht){return function(){var wt,S=this.__on,Ot=function Dn(V){return function(X){V.call(this,X,this.__data__)}}(X);if(S)for(var Bt=0,Yt=S.length;Bt<Yt;++Bt)if((wt=S[Bt]).type===V.type&&wt.name===V.name)return this.removeEventListener(wt.type,wt.listener,wt.options),this.addEventListener(wt.type,wt.listener=Ot,wt.options=ht),void(wt.value=X);this.addEventListener(V.type,Ot,ht),wt={type:V.type,name:V.name,value:X,listener:Ot,options:ht},S?S.push(wt):this.__on=[wt]}}var Ai=o(2442);function On(V,X,ht){var S=(0,Ai.Z)(V),wt=S.CustomEvent;"function"==typeof wt?wt=new wt(X,ht):(wt=S.document.createEvent("Event"),ht?(wt.initEvent(X,ht.bubbles,ht.cancelable),wt.detail=ht.detail):wt.initEvent(X,!1,!1)),V.dispatchEvent(wt)}function un(V,X){return function(){return On(this,V,X)}}function bn(V,X){return function(){return On(this,V,X.apply(this,arguments))}}var Nn=[null];function De(V,X){this._groups=V,this._parents=X}function Mi(){return new De([[document.documentElement]],Nn)}De.prototype=Mi.prototype={constructor:De,select:function x(V){"function"!=typeof V&&(V=(0,u.Z)(V));for(var X=this._groups,ht=X.length,S=new Array(ht),wt=0;wt<ht;++wt)for(var re,qt,Ot=X[wt],Bt=Ot.length,Yt=S[wt]=new Array(Bt),j=0;j<Bt;++j)(re=Ot[j])&&(qt=V.call(re,re.__data__,j,Ot))&&("__data__"in re&&(qt.__data__=re.__data__),Yt[j]=qt);return new De(S,this._parents)},selectAll:function l(V){V="function"==typeof V?function m(V){return function(){var X=V.apply(this,arguments);return null==X?[]:(0,v.Z)(X)}}(V):(0,_.Z)(V);for(var X=this._groups,ht=X.length,S=[],wt=[],Ot=0;Ot<ht;++Ot)for(var re,Bt=X[Ot],Yt=Bt.length,qt=0;qt<Yt;++qt)(re=Bt[qt])&&(S.push(V.call(re,re.__data__,qt,Bt)),wt.push(re));return new De(S,wt)},selectChild:function f(V){return this.select(null==V?g:function h(V){return function(){return c.call(this.children,V)}}("function"==typeof V?V:(0,t.P)(V)))},selectChildren:function L(V){return this.selectAll(null==V?C:function A(V){return function(){return p.call(this.children,V)}}("function"==typeof V?V:(0,t.P)(V)))},filter:function N(V){"function"!=typeof V&&(V=(0,t.Z)(V));for(var X=this._groups,ht=X.length,S=new Array(ht),wt=0;wt<ht;++wt)for(var re,Ot=X[wt],Bt=Ot.length,Yt=S[wt]=[],qt=0;qt<Bt;++qt)(re=Ot[qt])&&V.call(re,re.__data__,qt,Ot)&&Yt.push(re);return new De(S,this._parents)},data:function ot(V,X){if(!arguments.length)return Array.from(this,rt);var ht=X?tt:H,S=this._parents,wt=this._groups;"function"!=typeof V&&(V=z(V));for(var Ot=wt.length,Bt=new Array(Ot),Yt=new Array(Ot),re=new Array(Ot),qt=0;qt<Ot;++qt){var j=S[qt],mt=wt[qt],Ct=mt.length,At=(0,v.Z)(V.call(j,j&&j.__data__,qt,S)),Xt=At.length,te=Yt[qt]=new Array(Xt),Dt=Bt[qt]=new Array(Xt),de=re[qt]=new Array(Ct);ht(j,mt,te,Dt,de,At,X);for(var Le,ke,O=0,le=0;O<Xt;++O)if(Le=te[O]){for(O>=le&&(le=O+1);!(ke=Dt[le])&&++le<Xt;);Le._next=ke||null}}return(Bt=new De(Bt,S))._enter=Yt,Bt._exit=re,Bt},enter:function R(){return new De(this._enter||this._groups.map(P),this._parents)},exit:function J(){return new De(this._exit||this._groups.map(P),this._parents)},join:function et(V,X,ht){var S=this.enter(),wt=this,Ot=this.exit();return S="function"==typeof V?V(S):S.append(V+""),null!=X&&(wt=X(wt)),null==ht?Ot.remove():ht(Ot),S&&wt?S.merge(wt).order():wt},merge:function q(V){if(!(V instanceof De))throw new Error("invalid merge");for(var X=this._groups,ht=V._groups,S=X.length,Ot=Math.min(S,ht.length),Bt=new Array(S),Yt=0;Yt<Ot;++Yt)for(var Ct,re=X[Yt],qt=ht[Yt],j=re.length,mt=Bt[Yt]=new Array(j),At=0;At<j;++At)(Ct=re[At]||qt[At])&&(mt[At]=Ct);for(;Yt<S;++Yt)Bt[Yt]=X[Yt];return new De(Bt,this._parents)},selection:function Bn(){return this},order:function at(){for(var V=this._groups,X=-1,ht=V.length;++X<ht;)for(var Bt,S=V[X],wt=S.length-1,Ot=S[wt];--wt>=0;)(Bt=S[wt])&&(Ot&&4^Bt.compareDocumentPosition(Ot)&&Ot.parentNode.insertBefore(Bt,Ot),Ot=Bt);return this},sort:function Y(V){function X(mt,Ct){return mt&&Ct?V(mt.__data__,Ct.__data__):!mt-!Ct}V||(V=K);for(var ht=this._groups,S=ht.length,wt=new Array(S),Ot=0;Ot<S;++Ot){for(var qt,Bt=ht[Ot],Yt=Bt.length,re=wt[Ot]=new Array(Yt),j=0;j<Yt;++j)(qt=Bt[j])&&(re[j]=qt);re.sort(X)}return new De(wt,this._parents).order()},call:function ut(){var V=arguments[0];return arguments[0]=this,V.apply(null,arguments),this},nodes:function it(){return Array.from(this)},node:function G(){for(var V=this._groups,X=0,ht=V.length;X<ht;++X)for(var S=V[X],wt=0,Ot=S.length;wt<Ot;++wt){var Bt=S[wt];if(Bt)return Bt}return null},size:function M(){let V=0;for(const X of this)++V;return V},empty:function ft(){return!this.node()},each:function It(V){for(var X=this._groups,ht=0,S=X.length;ht<S;++ht)for(var Yt,wt=X[ht],Ot=0,Bt=wt.length;Ot<Bt;++Ot)(Yt=wt[Ot])&&V.call(Yt,Yt.__data__,Ot,wt);return this},attr:function Jt(V,X){var ht=(0,Zt.Z)(V);if(arguments.length<2){var S=this.node();return ht.local?S.getAttributeNS(ht.space,ht.local):S.getAttribute(ht)}return this.each((null==X?ht.local?ne:zt:"function"==typeof X?ht.local?Nt:pt:ht.local?xt:Ut)(ht,X))},style:ge.Z,property:function Tn(V,X){return arguments.length>1?this.each((null==X?_e:"function"==typeof X?Re:Te)(V,X)):this.node()[V]},classed:function zn(V,X){var ht=Fe(V+"");if(arguments.length<2){for(var S=gn(this.node()),wt=-1,Ot=ht.length;++wt<Ot;)if(!S.contains(ht[wt]))return!1;return!0}return this.each(("function"==typeof X?ni:X?fn:Wn)(ht,X))},text:function En(V){return arguments.length?this.each(null==V?an:("function"==typeof V?sn:je)(V)):this.node().textContent},html:function _n(V){return arguments.length?this.each(null==V?Be:("function"==typeof V?Rn:ci)(V)):this.node().innerHTML},raise:function ti(){return this.each(Yn)},lower:function Xn(){return this.each(Me)},append:function Tt(V){var X="function"==typeof V?V:(0,$n.Z)(V);return this.select(function(){return this.appendChild(X.apply(this,arguments))})},insert:function se(V,X){var ht="function"==typeof V?V:(0,$n.Z)(V),S=null==X?Gt:"function"==typeof X?X:(0,u.Z)(X);return this.select(function(){return this.insertBefore(ht.apply(this,arguments),S.apply(this,arguments)||null)})},remove:function ve(){return this.each(pe)},clone:function nn(V){return this.select(V?Oe:Ze)},datum:function Zn(V){return arguments.length?this.property("__data__",V):this.node().__data__},on:function ei(V,X,ht){var wt,Bt,S=qn(V+""),Ot=S.length;if(!(arguments.length<2)){for(Yt=X?vn:Di,wt=0;wt<Ot;++wt)this.each(Yt(S[wt],X,ht));return this}var Yt=this.node().__on;if(Yt)for(var j,re=0,qt=Yt.length;re<qt;++re)for(wt=0,j=Yt[re];wt<Ot;++wt)if((Bt=S[wt]).type===j.type&&Bt.name===j.name)return j.value},dispatch:function Kn(V,X){return this.each(("function"==typeof X?bn:un)(V,X))},[Symbol.iterator]:function*ui(){for(var V=this._groups,X=0,ht=V.length;X<ht;++X)for(var Bt,S=V[X],wt=0,Ot=S.length;wt<Ot;++wt)(Bt=S[wt])&&(yield Bt)}};const pn=Mi},24476:(w,k,o)=>{"use strict";o.d(k,{Z:()=>m,S:()=>l});var u=o(2442);function x(t){return function(){this.style.removeProperty(t)}}function v(t,c,h){return function(){this.style.setProperty(t,c,h)}}function _(t,c,h){return function(){var g=c.apply(this,arguments);null==g?this.style.removeProperty(t):this.style.setProperty(t,g,h)}}function m(t,c,h){return arguments.length>1?this.each((null==c?x:"function"==typeof c?_:v)(t,c,null==h?"":h)):l(this.node(),t)}function l(t,c){return t.style.getPropertyValue(c)||(0,u.Z)(t).getComputedStyle(t,null).getPropertyValue(c)}},29742:(w,k,o)=>{"use strict";function u(){}function x(v){return null==v?u:function(){return this.querySelector(v)}}o.d(k,{Z:()=>x})},32037:(w,k,o)=>{"use strict";function u(){return[]}function x(v){return null==v?u:function(){return this.querySelectorAll(v)}}o.d(k,{Z:()=>x})},75819:(w,k,o)=>{"use strict";function u(x){let v;for(;v=x.sourceEvent;)x=v;return x}o.d(k,{Z:()=>u})},2442:(w,k,o)=>{"use strict";function u(x){return x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView}o.d(k,{Z:()=>u})},73339:(w,k,o)=>{"use strict";o.d(k,{Z:()=>x});var u=o(49194);function x(v,_,m){var l=new u.B7;return l.restart(function(t){l.stop(),v(t+_)},_=null==_?0:+_,m),l}},49194:(w,k,o)=>{"use strict";o.d(k,{zO:()=>p,B7:()=>A,HT:()=>L,R8:()=>N});var m,l,u=0,x=0,v=0,t=0,c=0,h=0,g="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(H){setTimeout(H,17)};function p(){return c||(f(C),c=g.now()+h)}function C(){c=0}function A(){this._call=this._time=this._next=null}function L(H,tt,rt){var ot=new A;return ot.restart(H,tt,rt),ot}function N(){p(),++u;for(var tt,H=m;H;)(tt=c-H._time)>=0&&H._call.call(null,tt),H=H._next;--u}function P(){c=(t=g.now())+h,u=x=0;try{N()}finally{u=0,function Z(){for(var H,rt,tt=m,ot=1/0;tt;)tt._call?(ot>tt._time&&(ot=tt._time),H=tt,tt=tt._next):(rt=tt._next,tt._next=null,tt=H?H._next=rt:m=rt);l=H,z(ot)}(),c=0}}function R(){var H=g.now(),tt=H-t;tt>1e3&&(h-=tt,t=H)}function z(H){u||(x&&(x=clearTimeout(x)),H-c>24?(H<1/0&&(x=setTimeout(P,H-g.now()-h)),v&&(v=clearInterval(v))):(v||(t=g.now(),v=setInterval(R,1e3)),u=1,f(P)))}A.prototype=L.prototype={constructor:A,restart:function(H,tt,rt){if("function"!=typeof H)throw new TypeError("callback is not a function");rt=(null==rt?p():+rt)+(null==tt?0:+tt),!this._next&&l!==this&&(l?l._next=this:m=this,l=this),this._call=H,this._time=rt,z()},stop:function(){this._call&&(this._call=null,this._time=1/0,z())}}},60128:(w,k,o)=>{"use strict";o.r(k),o.d(k,{zoom:()=>Ye,zoomIdentity:()=>de,zoomTransform:()=>O});var u=o(25922),x=o(52016);function _(nt){nt.preventDefault(),nt.stopImmediatePropagation()}function m(nt){var _t=nt.document.documentElement,gt=(0,x.Z)(nt).on("dragstart.drag",_,!0);"onselectstart"in _t?gt.on("selectstart.drag",_,!0):(_t.__noselect=_t.style.MozUserSelect,_t.style.MozUserSelect="none")}function l(nt,_t){var gt=nt.document.documentElement,St=(0,x.Z)(nt).on("dragstart.drag",null);_t&&(St.on("click.drag",_,!0),setTimeout(function(){St.on("click.drag",null)},0)),"onselectstart"in gt?St.on("selectstart.drag",null):(gt.style.MozUserSelect=gt.__noselect,delete gt.__noselect)}var t=Math.SQRT2;function f(nt){return((nt=Math.exp(nt))+1/nt)/2}function A(nt,_t){var Ie,Ee,gt=nt[0],St=nt[1],Ht=nt[2],me=_t[2],xe=_t[0]-gt,Wt=_t[1]-St,ce=xe*xe+Wt*Wt;if(ce<1e-12)Ee=Math.log(me/Ht)/t,Ie=function(qe){return[gt+qe*xe,St+qe*Wt,Ht*Math.exp(t*qe*Ee)]};else{var Ue=Math.sqrt(ce),Jn=(me*me-Ht*Ht+4*ce)/(2*Ht*2*Ue),Ln=(me*me-Ht*Ht-4*ce)/(2*me*2*Ue),kn=Math.log(Math.sqrt(Jn*Jn+1)-Jn),He=Math.log(Math.sqrt(Ln*Ln+1)-Ln);Ee=(He-kn)/t,Ie=function(qe){var Qn=qe*Ee,on=f(kn),cn=Ht/(2*Ue)*(on*function C(nt){return((nt=Math.exp(2*nt))-1)/(nt+1)}(t*Qn+kn)-function p(nt){return((nt=Math.exp(nt))-1/nt)/2}(kn));return[gt+cn*xe,St+cn*Wt,Ht*on/f(t*Qn+kn)]}}return Ie.duration=1e3*Ee,Ie}var L=o(29132),N=o(37853),P=o(49194),R=o(73339),Z=(0,u.Z)("start","end","cancel","interrupt"),z=[];function at(nt,_t,gt,St,Ht,ee){var Qt=nt.__transition;if(Qt){if(gt in Qt)return}else nt.__transition={};!function it(nt,_t,gt){var Ht,St=nt.__transition;function Qt(Wt){var ce,Ie,Ee,Ue;if(1!==gt.state)return xe();for(ce in St)if((Ue=St[ce]).name===gt.name){if(3===Ue.state)return(0,R.Z)(Qt);4===Ue.state?(Ue.state=6,Ue.timer.stop(),Ue.on.call("interrupt",nt,nt.__data__,Ue.index,Ue.group),delete St[ce]):+ce<_t&&(Ue.state=6,Ue.timer.stop(),Ue.on.call("cancel",nt,nt.__data__,Ue.index,Ue.group),delete St[ce])}if((0,R.Z)(function(){3===gt.state&&(gt.state=4,gt.timer.restart(me,gt.delay,gt.time),me(Wt))}),gt.state=2,gt.on.call("start",nt,nt.__data__,gt.index,gt.group),2===gt.state){for(gt.state=3,Ht=new Array(Ee=gt.tween.length),ce=0,Ie=-1;ce<Ee;++ce)(Ue=gt.tween[ce].value.call(nt,nt.__data__,gt.index,gt.group))&&(Ht[++Ie]=Ue);Ht.length=Ie+1}}function me(Wt){for(var ce=Wt<gt.duration?gt.ease.call(null,Wt/gt.duration):(gt.timer.restart(xe),gt.state=5,1),Ie=-1,Ee=Ht.length;++Ie<Ee;)Ht[Ie].call(nt,ce);5===gt.state&&(gt.on.call("end",nt,nt.__data__,gt.index,gt.group),xe())}function xe(){for(var Wt in gt.state=6,gt.timer.stop(),delete St[_t],St)return;delete nt.__transition}St[_t]=gt,gt.timer=(0,P.HT)(function ee(Wt){gt.state=1,gt.timer.restart(Qt,gt.delay,gt.time),gt.delay<=Wt&&Qt(Wt-gt.delay)},0,gt.time)}(nt,gt,{name:_t,index:St,group:Ht,on:Z,tween:z,time:ee.time,delay:ee.delay,duration:ee.duration,ease:ee.ease,timer:null,state:0})}function Y(nt,_t){var gt=ut(nt,_t);if(gt.state>0)throw new Error("too late; already scheduled");return gt}function K(nt,_t){var gt=ut(nt,_t);if(gt.state>3)throw new Error("too late; already running");return gt}function ut(nt,_t){var gt=nt.__transition;if(!gt||!(gt=gt[_t]))throw new Error("transition not found");return gt}function G(nt,_t){var St,Ht,Qt,gt=nt.__transition,ee=!0;if(gt){for(Qt in _t=null==_t?null:_t+"",gt)(St=gt[Qt]).name===_t?(Ht=St.state>2&&St.state<5,St.state=6,St.timer.stop(),St.on.call(Ht?"interrupt":"cancel",nt,nt.__data__,St.index,St.group),delete gt[Qt]):ee=!1;ee&&delete nt.__transition}}var ft=o(75349),It=o(36175);function Zt(nt,_t){var gt,St;return function(){var Ht=K(this,nt),ee=Ht.tween;if(ee!==gt)for(var Qt=0,me=(St=gt=ee).length;Qt<me;++Qt)if(St[Qt].name===_t){(St=St.slice()).splice(Qt,1);break}Ht.tween=St}}function zt(nt,_t,gt){var St,Ht;if("function"!=typeof gt)throw new Error;return function(){var ee=K(this,nt),Qt=ee.tween;if(Qt!==St){Ht=(St=Qt).slice();for(var me={name:_t,value:gt},xe=0,Wt=Ht.length;xe<Wt;++xe)if(Ht[xe].name===_t){Ht[xe]=me;break}xe===Wt&&Ht.push(me)}ee.tween=Ht}}function Ut(nt,_t,gt){var St=nt._id;return nt.each(function(){var Ht=K(this,St);(Ht.value||(Ht.value={}))[_t]=gt.apply(this,arguments)}),function(Ht){return ut(Ht,St).value[_t]}}var xt=o(52786),pt=o(6738),Nt=o(23534),Jt=o(23096);function ge(nt,_t){var gt;return("number"==typeof _t?pt.Z:_t instanceof xt.ZP?Nt.ZP:(gt=(0,xt.ZP)(_t))?(_t=gt,Nt.ZP):Jt.Z)(nt,_t)}function _e(nt){return function(){this.removeAttribute(nt)}}function Te(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function Re(nt,_t,gt){var St,ee,Ht=gt+"";return function(){var Qt=this.getAttribute(nt);return Qt===Ht?null:Qt===St?ee:ee=_t(St=Qt,gt)}}function Tn(nt,_t,gt){var St,ee,Ht=gt+"";return function(){var Qt=this.getAttributeNS(nt.space,nt.local);return Qt===Ht?null:Qt===St?ee:ee=_t(St=Qt,gt)}}function Fe(nt,_t,gt){var St,Ht,ee;return function(){var Qt,xe,me=gt(this);return null==me?void this.removeAttribute(nt):(Qt=this.getAttribute(nt))===(xe=me+"")?null:Qt===St&&xe===Ht?ee:(Ht=xe,ee=_t(St=Qt,me))}}function gn(nt,_t,gt){var St,Ht,ee;return function(){var Qt,xe,me=gt(this);return null==me?void this.removeAttributeNS(nt.space,nt.local):(Qt=this.getAttributeNS(nt.space,nt.local))===(xe=me+"")?null:Qt===St&&xe===Ht?ee:(Ht=xe,ee=_t(St=Qt,me))}}function Mn(nt,_t){return function(gt){this.setAttribute(nt,_t.call(this,gt))}}function oe(nt,_t){return function(gt){this.setAttributeNS(nt.space,nt.local,_t.call(this,gt))}}function fn(nt,_t){var gt,St;function Ht(){var ee=_t.apply(this,arguments);return ee!==St&&(gt=(St=ee)&&oe(nt,ee)),gt}return Ht._value=_t,Ht}function Wn(nt,_t){var gt,St;function Ht(){var ee=_t.apply(this,arguments);return ee!==St&&(gt=(St=ee)&&Mn(nt,ee)),gt}return Ht._value=_t,Ht}function zn(nt,_t){return function(){Y(this,nt).delay=+_t.apply(this,arguments)}}function an(nt,_t){return _t=+_t,function(){Y(this,nt).delay=_t}}function sn(nt,_t){return function(){K(this,nt).duration=+_t.apply(this,arguments)}}function En(nt,_t){return _t=+_t,function(){K(this,nt).duration=_t}}function ci(nt,_t){if("function"!=typeof _t)throw new Error;return function(){K(this,nt).ease=_t}}var ti=o(97905);function Tt(nt,_t,gt){var St,Ht,ee=function $n(nt){return(nt+"").trim().split(/^|\s+/).every(function(_t){var gt=_t.indexOf(".");return gt>=0&&(_t=_t.slice(0,gt)),!_t||"start"===_t})}(_t)?Y:K;return function(){var Qt=ee(this,nt),me=Qt.on;me!==St&&(Ht=(St=me).copy()).on(_t,gt),Qt.on=Ht}}var ve=o(29742),Oe=o(32037),Zn=N.ZP.prototype.constructor,qn=o(24476);function vn(nt){return function(){this.style.removeProperty(nt)}}function bn(nt,_t,gt){return function(St){this.style.setProperty(nt,_t.call(this,St),gt)}}function Kn(nt,_t,gt){var St,Ht;function ee(){var Qt=_t.apply(this,arguments);return Qt!==Ht&&(St=(Ht=Qt)&&bn(nt,Qt,gt)),St}return ee._value=_t,ee}function Bn(nt){return function(_t){this.textContent=nt.call(this,_t)}}function pn(nt){var _t,gt;function St(){var Ht=nt.apply(this,arguments);return Ht!==gt&&(_t=(gt=Ht)&&Bn(Ht)),_t}return St._value=nt,St}var S=0;function wt(nt,_t,gt,St){this._groups=nt,this._parents=_t,this._name=gt,this._id=St}function Bt(){return++S}var Yt=N.ZP.prototype;wt.prototype=function Ot(nt){return(0,N.ZP)().transition(nt)}.prototype={constructor:wt,select:function Ze(nt){var _t=this._name,gt=this._id;"function"!=typeof nt&&(nt=(0,ve.Z)(nt));for(var St=this._groups,Ht=St.length,ee=new Array(Ht),Qt=0;Qt<Ht;++Qt)for(var ce,Ie,me=St[Qt],xe=me.length,Wt=ee[Qt]=new Array(xe),Ee=0;Ee<xe;++Ee)(ce=me[Ee])&&(Ie=nt.call(ce,ce.__data__,Ee,me))&&("__data__"in ce&&(Ie.__data__=ce.__data__),Wt[Ee]=Ie,at(Wt[Ee],_t,gt,Ee,Wt,ut(ce,gt)));return new wt(ee,this._parents,_t,gt)},selectAll:function nn(nt){var _t=this._name,gt=this._id;"function"!=typeof nt&&(nt=(0,Oe.Z)(nt));for(var St=this._groups,Ht=St.length,ee=[],Qt=[],me=0;me<Ht;++me)for(var ce,xe=St[me],Wt=xe.length,Ie=0;Ie<Wt;++Ie)if(ce=xe[Ie]){for(var Ue,Ee=nt.call(ce,ce.__data__,Ie,xe),Jn=ut(ce,gt),Ln=0,kn=Ee.length;Ln<kn;++Ln)(Ue=Ee[Ln])&&at(Ue,_t,gt,Ln,Ee,Jn);ee.push(Ee),Qt.push(ce)}return new wt(ee,Qt,_t,gt)},filter:function Me(nt){"function"!=typeof nt&&(nt=(0,ti.Z)(nt));for(var _t=this._groups,gt=_t.length,St=new Array(gt),Ht=0;Ht<gt;++Ht)for(var xe,ee=_t[Ht],Qt=ee.length,me=St[Ht]=[],Wt=0;Wt<Qt;++Wt)(xe=ee[Wt])&&nt.call(xe,xe.__data__,Wt,ee)&&me.push(xe);return new wt(St,this._parents,this._name,this._id)},merge:function Xn(nt){if(nt._id!==this._id)throw new Error;for(var _t=this._groups,gt=nt._groups,St=_t.length,ee=Math.min(St,gt.length),Qt=new Array(St),me=0;me<ee;++me)for(var Ee,xe=_t[me],Wt=gt[me],ce=xe.length,Ie=Qt[me]=new Array(ce),Ue=0;Ue<ce;++Ue)(Ee=xe[Ue]||Wt[Ue])&&(Ie[Ue]=Ee);for(;me<St;++me)Qt[me]=_t[me];return new wt(Qt,this._parents,this._name,this._id)},selection:function Dn(){return new Zn(this._groups,this._parents)},transition:function X(){for(var nt=this._name,_t=this._id,gt=Bt(),St=this._groups,Ht=St.length,ee=0;ee<Ht;++ee)for(var xe,Qt=St[ee],me=Qt.length,Wt=0;Wt<me;++Wt)if(xe=Qt[Wt]){var ce=ut(xe,_t);at(xe,nt,gt,Wt,Qt,{time:ce.time+ce.delay+ce.duration,delay:0,duration:ce.duration,ease:ce.ease})}return new wt(St,this._parents,nt,gt)},call:Yt.call,nodes:Yt.nodes,node:Yt.node,size:Yt.size,empty:Yt.empty,each:Yt.each,on:function Gt(nt,_t){var gt=this._id;return arguments.length<2?ut(this.node(),gt).on.on(nt):this.each(Tt(gt,nt,_t))},attr:function Ve(nt,_t){var gt=(0,It.Z)(nt),St="transform"===gt?ft.w:ge;return this.attrTween(nt,"function"==typeof _t?(gt.local?gn:Fe)(gt,St,Ut(this,"attr."+nt,_t)):null==_t?(gt.local?Te:_e)(gt):(gt.local?Tn:Re)(gt,St,_t))},attrTween:function ni(nt,_t){var gt="attr."+nt;if(arguments.length<2)return(gt=this.tween(gt))&&gt._value;if(null==_t)return this.tween(gt,null);if("function"!=typeof _t)throw new Error;var St=(0,It.Z)(nt);return this.tween(gt,(St.local?fn:Wn)(St,_t))},style:function un(nt,_t,gt){var St="transform"==(nt+="")?ft.Y:ge;return null==_t?this.styleTween(nt,function Di(nt,_t){var gt,St,Ht;return function(){var ee=(0,qn.S)(this,nt),Qt=(this.style.removeProperty(nt),(0,qn.S)(this,nt));return ee===Qt?null:ee===gt&&Qt===St?Ht:Ht=_t(gt=ee,St=Qt)}}(nt,St)).on("end.style."+nt,vn(nt)):"function"==typeof _t?this.styleTween(nt,function Ai(nt,_t,gt){var St,Ht,ee;return function(){var Qt=(0,qn.S)(this,nt),me=gt(this),xe=me+"";return null==me&&(this.style.removeProperty(nt),xe=me=(0,qn.S)(this,nt)),Qt===xe?null:Qt===St&&xe===Ht?ee:(Ht=xe,ee=_t(St=Qt,me))}}(nt,St,Ut(this,"style."+nt,_t))).each(function On(nt,_t){var gt,St,Ht,me,ee="style."+_t,Qt="end."+ee;return function(){var xe=K(this,nt),Wt=xe.on,ce=null==xe.value[ee]?me||(me=vn(_t)):void 0;(Wt!==gt||Ht!==ce)&&(St=(gt=Wt).copy()).on(Qt,Ht=ce),xe.on=St}}(this._id,nt)):this.styleTween(nt,function ei(nt,_t,gt){var St,ee,Ht=gt+"";return function(){var Qt=(0,qn.S)(this,nt);return Qt===Ht?null:Qt===St?ee:ee=_t(St=Qt,gt)}}(nt,St,_t),gt).on("end.style."+nt,null)},styleTween:function ui(nt,_t,gt){var St="style."+(nt+="");if(arguments.length<2)return(St=this.tween(St))&&St._value;if(null==_t)return this.tween(St,null);if("function"!=typeof _t)throw new Error;return this.tween(St,Kn(nt,_t,null==gt?"":gt))},text:function Mi(nt){return this.tween("text","function"==typeof nt?function De(nt){return function(){var _t=nt(this);this.textContent=null==_t?"":_t}}(Ut(this,"text",nt)):function Nn(nt){return function(){this.textContent=nt}}(null==nt?"":nt+""))},textTween:function V(nt){var _t="text";if(arguments.length<1)return(_t=this.tween(_t))&&_t._value;if(null==nt)return this.tween(_t,null);if("function"!=typeof nt)throw new Error;return this.tween(_t,pn(nt))},remove:function pe(){return this.on("end.remove",function se(nt){return function(){var _t=this.parentNode;for(var gt in this.__transition)if(+gt!==nt)return;_t&&_t.removeChild(this)}}(this._id))},tween:function ne(nt,_t){var gt=this._id;if(nt+="",arguments.length<2){for(var Qt,St=ut(this.node(),gt).tween,Ht=0,ee=St.length;Ht<ee;++Ht)if((Qt=St[Ht]).name===nt)return Qt.value;return null}return this.each((null==_t?Zt:zt)(gt,nt,_t))},delay:function je(nt){var _t=this._id;return arguments.length?this.each(("function"==typeof nt?zn:an)(_t,nt)):ut(this.node(),_t).delay},duration:function Be(nt){var _t=this._id;return arguments.length?this.each(("function"==typeof nt?sn:En)(_t,nt)):ut(this.node(),_t).duration},ease:function Rn(nt){var _t=this._id;return arguments.length?this.each(ci(_t,nt)):ut(this.node(),_t).ease},easeVarying:function Yn(nt){if("function"!=typeof nt)throw new Error;return this.each(function _n(nt,_t){return function(){var gt=_t.apply(this,arguments);if("function"!=typeof gt)throw new Error;K(this,nt).ease=gt}}(this._id,nt))},end:function ht(){var nt,_t,gt=this,St=gt._id,Ht=gt.size();return new Promise(function(ee,Qt){var me={value:Qt},xe={value:function(){0==--Ht&&ee()}};gt.each(function(){var Wt=K(this,St),ce=Wt.on;ce!==nt&&((_t=(nt=ce).copy())._.cancel.push(me),_t._.interrupt.push(me),_t._.end.push(xe)),Wt.on=_t}),0===Ht&&ee()})},[Symbol.iterator]:Yt[Symbol.iterator]};var qt={time:null,delay:0,duration:250,ease:o(27065).tw};function j(nt,_t){for(var gt;!(gt=nt.__transition)||!(gt=gt[_t]);)if(!(nt=nt.parentNode))throw new Error(`transition ${_t} not found`);return gt}N.ZP.prototype.interrupt=function M(nt){return this.each(function(){G(this,nt)})},N.ZP.prototype.transition=function mt(nt){var _t,gt;nt instanceof wt?(_t=nt._id,nt=nt._name):(_t=Bt(),(gt=qt).time=(0,P.zO)(),nt=null==nt?null:nt+"");for(var St=this._groups,Ht=St.length,ee=0;ee<Ht;++ee)for(var xe,Qt=St[ee],me=Qt.length,Wt=0;Wt<me;++Wt)(xe=Qt[Wt])&&at(xe,nt,_t,Wt,Qt,gt||j(xe,_t));return new wt(St,this._parents,nt,_t)};const Xt=nt=>()=>nt;function te(nt,{sourceEvent:_t,target:gt,transform:St,dispatch:Ht}){Object.defineProperties(this,{type:{value:nt,enumerable:!0,configurable:!0},sourceEvent:{value:_t,enumerable:!0,configurable:!0},target:{value:gt,enumerable:!0,configurable:!0},transform:{value:St,enumerable:!0,configurable:!0},_:{value:Ht}})}function Dt(nt,_t,gt){this.k=nt,this.x=_t,this.y=gt}Dt.prototype={constructor:Dt,scale:function(nt){return 1===nt?this:new Dt(this.k*nt,this.x,this.y)},translate:function(nt,_t){return 0===nt&0===_t?this:new Dt(this.k,this.x+this.k*nt,this.y+this.k*_t)},apply:function(nt){return[nt[0]*this.k+this.x,nt[1]*this.k+this.y]},applyX:function(nt){return nt*this.k+this.x},applyY:function(nt){return nt*this.k+this.y},invert:function(nt){return[(nt[0]-this.x)/this.k,(nt[1]-this.y)/this.k]},invertX:function(nt){return(nt-this.x)/this.k},invertY:function(nt){return(nt-this.y)/this.k},rescaleX:function(nt){return nt.copy().domain(nt.range().map(this.invertX,this).map(nt.invert,nt))},rescaleY:function(nt){return nt.copy().domain(nt.range().map(this.invertY,this).map(nt.invert,nt))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var de=new Dt(1,0,0);function O(nt){for(;!nt.__zoom;)if(!(nt=nt.parentNode))return de;return nt.__zoom}function le(nt){nt.stopImmediatePropagation()}function Le(nt){nt.preventDefault(),nt.stopImmediatePropagation()}function ke(nt){return!(nt.ctrlKey&&"wheel"!==nt.type||nt.button)}function rn(){var nt=this;return nt instanceof SVGElement?(nt=nt.ownerSVGElement||nt).hasAttribute("viewBox")?[[(nt=nt.viewBox.baseVal).x,nt.y],[nt.x+nt.width,nt.y+nt.height]]:[[0,0],[nt.width.baseVal.value,nt.height.baseVal.value]]:[[0,0],[nt.clientWidth,nt.clientHeight]]}function ze(){return this.__zoom||de}function Je(nt){return-nt.deltaY*(1===nt.deltaMode?.05:nt.deltaMode?1:.002)*(nt.ctrlKey?10:1)}function fe(){return navigator.maxTouchPoints||"ontouchstart"in this}function ye(nt,_t,gt){var St=nt.invertX(_t[0][0])-gt[0][0],Ht=nt.invertX(_t[1][0])-gt[1][0],ee=nt.invertY(_t[0][1])-gt[0][1],Qt=nt.invertY(_t[1][1])-gt[1][1];return nt.translate(Ht>St?(St+Ht)/2:Math.min(0,St)||Math.max(0,Ht),Qt>ee?(ee+Qt)/2:Math.min(0,ee)||Math.max(0,Qt))}function Ye(){var ce,Ie,Ee,nt=ke,_t=rn,gt=ye,St=Je,Ht=fe,ee=[0,1/0],Qt=[[-1/0,-1/0],[1/0,1/0]],me=250,xe=A,Wt=(0,u.Z)("start","zoom","end"),Ln=0,kn=10;function He(Ft){Ft.property("__zoom",ze).on("wheel.zoom",hi).on("mousedown.zoom",zi).on("dblclick.zoom",jn).filter(Ht).on("touchstart.zoom",gi).on("touchmove.zoom",xn).on("touchend.zoom touchcancel.zoom",Li).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function qe(Ft,be){return(be=Math.max(ee[0],Math.min(ee[1],be)))===Ft.k?Ft:new Dt(be,Ft.x,Ft.y)}function Qn(Ft,be,jt){var b=be[0]-jt[0]*Ft.k,I=be[1]-jt[1]*Ft.k;return b===Ft.x&&I===Ft.y?Ft:new Dt(Ft.k,b,I)}function on(Ft){return[(+Ft[0][0]+ +Ft[1][0])/2,(+Ft[0][1]+ +Ft[1][1])/2]}function cn(Ft,be,jt,b){Ft.on("start.zoom",function(){Un(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){Un(this,arguments).event(b).end()}).tween("zoom",function(){var I=this,U=arguments,Q=Un(I,U).event(b),ct=_t.apply(I,U),yt=null==jt?on(ct):"function"==typeof jt?jt.apply(I,U):jt,kt=Math.max(ct[1][0]-ct[0][0],ct[1][1]-ct[0][1]),Pt=I.__zoom,ae="function"==typeof be?be.apply(I,U):be,Se=xe(Pt.invert(yt).concat(kt/Pt.k),ae.invert(yt).concat(kt/ae.k));return function(Ge){if(1===Ge)Ge=ae;else{var Ke=Se(Ge),Pe=kt/Ke[2];Ge=new Dt(Pe,yt[0]-Ke[0]*Pe,yt[1]-Ke[1]*Pe)}Q.zoom(null,Ge)}})}function Un(Ft,be,jt){return!jt&&Ft.__zooming||new Hi(Ft,be)}function Hi(Ft,be){this.that=Ft,this.args=be,this.active=0,this.sourceEvent=null,this.extent=_t.apply(Ft,be),this.taps=0}function hi(Ft,...be){if(nt.apply(this,arguments)){var jt=Un(this,be).event(Ft),b=this.__zoom,I=Math.max(ee[0],Math.min(ee[1],b.k*Math.pow(2,St.apply(this,arguments)))),U=(0,L.Z)(Ft);if(jt.wheel)(jt.mouse[0][0]!==U[0]||jt.mouse[0][1]!==U[1])&&(jt.mouse[1]=b.invert(jt.mouse[0]=U)),clearTimeout(jt.wheel);else{if(b.k===I)return;jt.mouse=[U,b.invert(U)],G(this),jt.start()}Le(Ft),jt.wheel=setTimeout(Q,150),jt.zoom("mouse",gt(Qn(qe(b,I),jt.mouse[0],jt.mouse[1]),jt.extent,Qt))}function Q(){jt.wheel=null,jt.end()}}function zi(Ft,...be){if(!Ee&&nt.apply(this,arguments)){var jt=Un(this,be,!0).event(Ft),b=(0,x.Z)(Ft.view).on("mousemove.zoom",yt,!0).on("mouseup.zoom",kt,!0),I=(0,L.Z)(Ft,U),U=Ft.currentTarget,Q=Ft.clientX,ct=Ft.clientY;m(Ft.view),le(Ft),jt.mouse=[I,this.__zoom.invert(I)],G(this),jt.start()}function yt(Pt){if(Le(Pt),!jt.moved){var ae=Pt.clientX-Q,Se=Pt.clientY-ct;jt.moved=ae*ae+Se*Se>Ln}jt.event(Pt).zoom("mouse",gt(Qn(jt.that.__zoom,jt.mouse[0]=(0,L.Z)(Pt,U),jt.mouse[1]),jt.extent,Qt))}function kt(Pt){b.on("mousemove.zoom mouseup.zoom",null),l(Pt.view,jt.moved),Le(Pt),jt.event(Pt).end()}}function jn(Ft,...be){if(nt.apply(this,arguments)){var jt=this.__zoom,b=(0,L.Z)(Ft.changedTouches?Ft.changedTouches[0]:Ft,this),I=jt.invert(b),U=jt.k*(Ft.shiftKey?.5:2),Q=gt(Qn(qe(jt,U),b,I),_t.apply(this,be),Qt);Le(Ft),me>0?(0,x.Z)(this).transition().duration(me).call(cn,Q,b,Ft):(0,x.Z)(this).call(He.transform,Q,b,Ft)}}function gi(Ft,...be){if(nt.apply(this,arguments)){var U,Q,ct,yt,jt=Ft.touches,b=jt.length,I=Un(this,be,Ft.changedTouches.length===b).event(Ft);for(le(Ft),Q=0;Q<b;++Q)yt=[yt=(0,L.Z)(ct=jt[Q],this),this.__zoom.invert(yt),ct.identifier],I.touch0?!I.touch1&&I.touch0[2]!==yt[2]&&(I.touch1=yt,I.taps=0):(I.touch0=yt,U=!0,I.taps=1+!!ce);ce&&(ce=clearTimeout(ce)),U&&(I.taps<2&&(Ie=yt[0],ce=setTimeout(function(){ce=null},500)),G(this),I.start())}}function xn(Ft,...be){if(this.__zooming){var U,Q,ct,yt,jt=Un(this,be).event(Ft),b=Ft.changedTouches,I=b.length;for(Le(Ft),U=0;U<I;++U)ct=(0,L.Z)(Q=b[U],this),jt.touch0&&jt.touch0[2]===Q.identifier?jt.touch0[0]=ct:jt.touch1&&jt.touch1[2]===Q.identifier&&(jt.touch1[0]=ct);if(Q=jt.that.__zoom,jt.touch1){var kt=jt.touch0[0],Pt=jt.touch0[1],ae=jt.touch1[0],Se=jt.touch1[1],Ge=(Ge=ae[0]-kt[0])*Ge+(Ge=ae[1]-kt[1])*Ge,Ke=(Ke=Se[0]-Pt[0])*Ke+(Ke=Se[1]-Pt[1])*Ke;Q=qe(Q,Math.sqrt(Ge/Ke)),ct=[(kt[0]+ae[0])/2,(kt[1]+ae[1])/2],yt=[(Pt[0]+Se[0])/2,(Pt[1]+Se[1])/2]}else{if(!jt.touch0)return;ct=jt.touch0[0],yt=jt.touch0[1]}jt.zoom("touch",gt(Qn(Q,ct,yt),jt.extent,Qt))}}function Li(Ft,...be){if(this.__zooming){var U,Q,jt=Un(this,be).event(Ft),b=Ft.changedTouches,I=b.length;for(le(Ft),Ee&&clearTimeout(Ee),Ee=setTimeout(function(){Ee=null},500),U=0;U<I;++U)Q=b[U],jt.touch0&&jt.touch0[2]===Q.identifier?delete jt.touch0:jt.touch1&&jt.touch1[2]===Q.identifier&&delete jt.touch1;if(jt.touch1&&!jt.touch0&&(jt.touch0=jt.touch1,delete jt.touch1),jt.touch0)jt.touch0[1]=this.__zoom.invert(jt.touch0[0]);else if(jt.end(),2===jt.taps&&(Q=(0,L.Z)(Q,this),Math.hypot(Ie[0]-Q[0],Ie[1]-Q[1])<kn)){var ct=(0,x.Z)(this).on("dblclick.zoom");ct&&ct.apply(this,arguments)}}}return He.transform=function(Ft,be,jt,b){var I=Ft.selection?Ft.selection():Ft;I.property("__zoom",ze),Ft!==I?cn(Ft,be,jt,b):I.interrupt().each(function(){Un(this,arguments).event(b).start().zoom(null,"function"==typeof be?be.apply(this,arguments):be).end()})},He.scaleBy=function(Ft,be,jt,b){He.scaleTo(Ft,function(){var I=this.__zoom.k,U="function"==typeof be?be.apply(this,arguments):be;return I*U},jt,b)},He.scaleTo=function(Ft,be,jt,b){He.transform(Ft,function(){var I=_t.apply(this,arguments),U=this.__zoom,Q=null==jt?on(I):"function"==typeof jt?jt.apply(this,arguments):jt,ct=U.invert(Q),yt="function"==typeof be?be.apply(this,arguments):be;return gt(Qn(qe(U,yt),Q,ct),I,Qt)},jt,b)},He.translateBy=function(Ft,be,jt,b){He.transform(Ft,function(){return gt(this.__zoom.translate("function"==typeof be?be.apply(this,arguments):be,"function"==typeof jt?jt.apply(this,arguments):jt),_t.apply(this,arguments),Qt)},null,b)},He.translateTo=function(Ft,be,jt,b,I){He.transform(Ft,function(){var U=_t.apply(this,arguments),Q=this.__zoom,ct=null==b?on(U):"function"==typeof b?b.apply(this,arguments):b;return gt(de.translate(ct[0],ct[1]).scale(Q.k).translate("function"==typeof be?-be.apply(this,arguments):-be,"function"==typeof jt?-jt.apply(this,arguments):-jt),U,Qt)},b,I)},Hi.prototype={event:function(Ft){return Ft&&(this.sourceEvent=Ft),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Ft,be){return this.mouse&&"mouse"!==Ft&&(this.mouse[1]=be.invert(this.mouse[0])),this.touch0&&"touch"!==Ft&&(this.touch0[1]=be.invert(this.touch0[0])),this.touch1&&"touch"!==Ft&&(this.touch1[1]=be.invert(this.touch1[0])),this.that.__zoom=be,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Ft){var be=(0,x.Z)(this.that).datum();Wt.call(Ft,this.that,new te(Ft,{sourceEvent:this.sourceEvent,target:He,type:Ft,transform:this.that.__zoom,dispatch:Wt}),be)}},He.wheelDelta=function(Ft){return arguments.length?(St="function"==typeof Ft?Ft:Xt(+Ft),He):St},He.filter=function(Ft){return arguments.length?(nt="function"==typeof Ft?Ft:Xt(!!Ft),He):nt},He.touchable=function(Ft){return arguments.length?(Ht="function"==typeof Ft?Ft:Xt(!!Ft),He):Ht},He.extent=function(Ft){return arguments.length?(_t="function"==typeof Ft?Ft:Xt([[+Ft[0][0],+Ft[0][1]],[+Ft[1][0],+Ft[1][1]]]),He):_t},He.scaleExtent=function(Ft){return arguments.length?(ee[0]=+Ft[0],ee[1]=+Ft[1],He):[ee[0],ee[1]]},He.translateExtent=function(Ft){return arguments.length?(Qt[0][0]=+Ft[0][0],Qt[1][0]=+Ft[1][0],Qt[0][1]=+Ft[0][1],Qt[1][1]=+Ft[1][1],He):[[Qt[0][0],Qt[0][1]],[Qt[1][0],Qt[1][1]]]},He.constrain=function(Ft){return arguments.length?(gt=Ft,He):gt},He.duration=function(Ft){return arguments.length?(me=+Ft,He):me},He.interpolate=function(Ft){return arguments.length?(xe=Ft,He):xe},He.on=function(){var Ft=Wt.on.apply(Wt,arguments);return Ft===Wt?He:Ft},He.clickDistance=function(Ft){return arguments.length?(Ln=(Ft=+Ft)*Ft,He):Math.sqrt(Ln)},He.tapDistance=function(Ft){return arguments.length?(kn=+Ft,He):kn},He}O.prototype=Dt.prototype},59695:(w,k,o)=>{w.exports={graphlib:o(36456),layout:o(14850),debug:o(71914),util:{time:o(11510).time,notime:o(11510).notime},version:o(28126)}},12234:(w,k,o)=>{"use strict";var u=o(45760),x=o(67365);w.exports={run:function v(l){var t="greedy"===l.graph().acyclicer?x(l,function c(h){return function(g){return h.edge(g).weight}}(l)):function _(l){var t=[],c={},h={};return u.forEach(l.nodes(),function g(f){u.has(h,f)||(h[f]=!0,c[f]=!0,u.forEach(l.outEdges(f),function(p){u.has(c,p.w)?t.push(p):g(p.w)}),delete c[f])}),t}(l);u.forEach(t,function(h){var g=l.edge(h);l.removeEdge(h),g.forwardName=h.name,g.reversed=!0,l.setEdge(h.w,h.v,g,u.uniqueId("rev"))})},undo:function m(l){u.forEach(l.edges(),function(t){var c=l.edge(t);if(c.reversed){l.removeEdge(t);var h=c.forwardName;delete c.reversed,delete c.forwardName,l.setEdge(t.w,t.v,c,h)}})}}},79999:(w,k,o)=>{var u=o(45760),x=o(11510);function _(m,l,t,c,h,g){var p=h[l][g-1],C=x.addDummyNode(m,"border",{width:0,height:0,rank:g,borderType:l},t);h[l][g]=C,m.setParent(C,c),p&&m.setEdge(p,C,{weight:1})}w.exports=function v(m){u.forEach(m.children(),function l(t){var c=m.children(t),h=m.node(t);if(c.length&&u.forEach(c,l),u.has(h,"minRank")){h.borderLeft=[],h.borderRight=[];for(var g=h.minRank,f=h.maxRank+1;g<f;++g)_(m,"borderLeft","_bl",t,h,g),_(m,"borderRight","_br",t,h,g)}})}},83870:(w,k,o)=>{"use strict";var u=o(45760);function _(g){u.forEach(g.nodes(),function(f){m(g.node(f))}),u.forEach(g.edges(),function(f){m(g.edge(f))})}function m(g){var f=g.width;g.width=g.height,g.height=f}function t(g){g.y=-g.y}function h(g){var f=g.x;g.x=g.y,g.y=f}w.exports={adjust:function x(g){var f=g.graph().rankdir.toLowerCase();("lr"===f||"rl"===f)&&_(g)},undo:function v(g){var f=g.graph().rankdir.toLowerCase();("bt"===f||"rl"===f)&&function l(g){u.forEach(g.nodes(),function(f){t(g.node(f))}),u.forEach(g.edges(),function(f){var p=g.edge(f);u.forEach(p.points,t),u.has(p,"y")&&t(p)})}(g),("lr"===f||"rl"===f)&&(function c(g){u.forEach(g.nodes(),function(f){h(g.node(f))}),u.forEach(g.edges(),function(f){var p=g.edge(f);u.forEach(p.points,h),u.has(p,"x")&&h(p)})}(g),_(g))}}},3226:w=>{function k(){var x={};x._next=x._prev=x,this._sentinel=x}function o(x){x._prev._next=x._next,x._next._prev=x._prev,delete x._next,delete x._prev}function u(x,v){if("_next"!==x&&"_prev"!==x)return v}w.exports=k,k.prototype.dequeue=function(){var x=this._sentinel,v=x._prev;if(v!==x)return o(v),v},k.prototype.enqueue=function(x){var v=this._sentinel;x._prev&&x._next&&o(x),x._next=v._next,v._next._prev=x,v._next=x,x._prev=v},k.prototype.toString=function(){for(var x=[],v=this._sentinel,_=v._prev;_!==v;)x.push(JSON.stringify(_,u)),_=_._prev;return"["+x.join(", ")+"]"}},71914:(w,k,o)=>{var u=o(45760),x=o(11510),v=o(36456).Graph;w.exports={debugOrdering:function _(m){var l=x.buildLayerMatrix(m),t=new v({compound:!0,multigraph:!0}).setGraph({});return u.forEach(m.nodes(),function(c){t.setNode(c,{label:c}),t.setParent(c,"layer"+m.node(c).rank)}),u.forEach(m.edges(),function(c){t.setEdge(c.v,c.w,{},c.name)}),u.forEach(l,function(c,h){t.setNode("layer"+h,{rank:"same"}),u.reduce(c,function(f,p){return t.setEdge(f,p,{style:"invis"}),p})}),t}}},36456:(w,k,o)=>{var u;try{u=o(85510)}catch(x){}u||(u=window.graphlib),w.exports=u},67365:(w,k,o)=>{var u=o(45760),x=o(36456).Graph,v=o(3226);w.exports=function m(g,f){if(g.nodeCount()<=1)return[];var p=function c(g,f){var p=new x,C=0,A=0;u.forEach(g.nodes(),function(P){p.setNode(P,{v:P,in:0,out:0})}),u.forEach(g.edges(),function(P){var R=p.edge(P.v,P.w)||0,Z=f(P);p.setEdge(P.v,P.w,R+Z),A=Math.max(A,p.node(P.v).out+=Z),C=Math.max(C,p.node(P.w).in+=Z)});var L=u.range(A+C+3).map(function(){return new v}),N=C+1;return u.forEach(p.nodes(),function(P){h(L,N,p.node(P))}),{graph:p,buckets:L,zeroIdx:N}}(g,f||_),C=function l(g,f,p){for(var N,C=[],A=f[f.length-1],L=f[0];g.nodeCount();){for(;N=L.dequeue();)t(g,f,p,N);for(;N=A.dequeue();)t(g,f,p,N);if(g.nodeCount())for(var P=f.length-2;P>0;--P)if(N=f[P].dequeue()){C=C.concat(t(g,f,p,N,!0));break}}return C}(p.graph,p.buckets,p.zeroIdx);return u.flatten(u.map(C,function(A){return g.outEdges(A.v,A.w)}),!0)};var _=u.constant(1);function t(g,f,p,C,A){var L=A?[]:void 0;return u.forEach(g.inEdges(C.v),function(N){var P=g.edge(N),R=g.node(N.v);A&&L.push({v:N.v,w:N.w}),R.out-=P,h(f,p,R)}),u.forEach(g.outEdges(C.v),function(N){var P=g.edge(N),Z=g.node(N.w);Z.in-=P,h(f,p,Z)}),g.removeNode(C.v),L}function h(g,f,p){p.out?p.in?g[p.out-p.in+f].enqueue(p):g[g.length-1].enqueue(p):g[0].enqueue(p)}},14850:(w,k,o)=>{"use strict";var u=o(45760),x=o(12234),v=o(91496),_=o(94124),m=o(11510).normalizeRanks,l=o(60162),t=o(11510).removeEmptyRanks,c=o(1230),h=o(79999),g=o(83870),f=o(32974),p=o(78226),C=o(11510),A=o(36456).Graph;w.exports=function L(xt,pt){var Nt=pt&&pt.debugTiming?C.time:C.notime;Nt("layout",function(){var Jt=Nt("  buildLayoutGraph",function(){return function et(xt){var pt=new A({multigraph:!0,compound:!0}),Nt=Ut(xt.graph());return pt.setGraph(u.merge({},Z,ne(Nt,R),u.pick(Nt,z))),u.forEach(xt.nodes(),function(Jt){var ge=Ut(xt.node(Jt));pt.setNode(Jt,u.defaults(ne(ge,H),tt)),pt.setParent(Jt,xt.parent(Jt))}),u.forEach(xt.edges(),function(Jt){var ge=Ut(xt.edge(Jt));pt.setEdge(Jt,u.merge({},ot,ne(ge,rt),u.pick(ge,J)))}),pt}(xt)});Nt("  runLayout",function(){!function N(xt,pt){pt("    makeSpaceForEdgeLabels",function(){!function q(xt){var pt=xt.graph();pt.ranksep/=2,u.forEach(xt.edges(),function(Nt){var Jt=xt.edge(Nt);Jt.minlen*=2,"c"!==Jt.labelpos.toLowerCase()&&("TB"===pt.rankdir||"BT"===pt.rankdir?Jt.width+=Jt.labeloffset:Jt.height+=Jt.labeloffset)})}(xt)}),pt("    removeSelfEdges",function(){!function It(xt){u.forEach(xt.edges(),function(pt){if(pt.v===pt.w){var Nt=xt.node(pt.v);Nt.selfEdges||(Nt.selfEdges=[]),Nt.selfEdges.push({e:pt,label:xt.edge(pt)}),xt.removeEdge(pt)}})}(xt)}),pt("    acyclic",function(){x.run(xt)}),pt("    nestingGraph.run",function(){c.run(xt)}),pt("    rank",function(){_(C.asNonCompoundGraph(xt))}),pt("    injectEdgeLabelProxies",function(){!function at(xt){u.forEach(xt.edges(),function(pt){var Nt=xt.edge(pt);if(Nt.width&&Nt.height){var Jt=xt.node(pt.v),ge=xt.node(pt.w);C.addDummyNode(xt,"edge-proxy",{rank:(ge.rank-Jt.rank)/2+Jt.rank,e:pt},"_ep")}})}(xt)}),pt("    removeEmptyRanks",function(){t(xt)}),pt("    nestingGraph.cleanup",function(){c.cleanup(xt)}),pt("    normalizeRanks",function(){m(xt)}),pt("    assignRankMinMax",function(){!function Y(xt){var pt=0;u.forEach(xt.nodes(),function(Nt){var Jt=xt.node(Nt);Jt.borderTop&&(Jt.minRank=xt.node(Jt.borderTop).rank,Jt.maxRank=xt.node(Jt.borderBottom).rank,pt=u.max(pt,Jt.maxRank))}),xt.graph().maxRank=pt}(xt)}),pt("    removeEdgeLabelProxies",function(){!function K(xt){u.forEach(xt.nodes(),function(pt){var Nt=xt.node(pt);"edge-proxy"===Nt.dummy&&(xt.edge(Nt.e).labelRank=Nt.rank,xt.removeNode(pt))})}(xt)}),pt("    normalize.run",function(){v.run(xt)}),pt("    parentDummyChains",function(){l(xt)}),pt("    addBorderSegments",function(){h(xt)}),pt("    order",function(){f(xt)}),pt("    insertSelfEdges",function(){!function Zt(xt){var pt=C.buildLayerMatrix(xt);u.forEach(pt,function(Nt){var Jt=0;u.forEach(Nt,function(ge,_e){var Te=xt.node(ge);Te.order=_e+Jt,u.forEach(Te.selfEdges,function(Re){C.addDummyNode(xt,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Te.rank,order:_e+ ++Jt,e:Re.e,label:Re.label},"_se")}),delete Te.selfEdges})})}(xt)}),pt("    adjustCoordinateSystem",function(){g.adjust(xt)}),pt("    position",function(){p(xt)}),pt("    positionSelfEdges",function(){!function zt(xt){u.forEach(xt.nodes(),function(pt){var Nt=xt.node(pt);if("selfedge"===Nt.dummy){var Jt=xt.node(Nt.e.v),ge=Jt.x+Jt.width/2,_e=Jt.y,Te=Nt.x-ge,Re=Jt.height/2;xt.setEdge(Nt.e,Nt.label),xt.removeNode(pt),Nt.label.points=[{x:ge+2*Te/3,y:_e-Re},{x:ge+5*Te/6,y:_e-Re},{x:ge+Te,y:_e},{x:ge+5*Te/6,y:_e+Re},{x:ge+2*Te/3,y:_e+Re}],Nt.label.x=Nt.x,Nt.label.y=Nt.y}})}(xt)}),pt("    removeBorderNodes",function(){!function ft(xt){u.forEach(xt.nodes(),function(pt){if(xt.children(pt).length){var Nt=xt.node(pt),Jt=xt.node(Nt.borderTop),ge=xt.node(Nt.borderBottom),_e=xt.node(u.last(Nt.borderLeft)),Te=xt.node(u.last(Nt.borderRight));Nt.width=Math.abs(Te.x-_e.x),Nt.height=Math.abs(ge.y-Jt.y),Nt.x=_e.x+Nt.width/2,Nt.y=Jt.y+Nt.height/2}}),u.forEach(xt.nodes(),function(pt){"border"===xt.node(pt).dummy&&xt.removeNode(pt)})}(xt)}),pt("    normalize.undo",function(){v.undo(xt)}),pt("    fixupEdgeLabelCoords",function(){!function G(xt){u.forEach(xt.edges(),function(pt){var Nt=xt.edge(pt);if(u.has(Nt,"x"))switch(("l"===Nt.labelpos||"r"===Nt.labelpos)&&(Nt.width-=Nt.labeloffset),Nt.labelpos){case"l":Nt.x-=Nt.width/2+Nt.labeloffset;break;case"r":Nt.x+=Nt.width/2+Nt.labeloffset}})}(xt)}),pt("    undoCoordinateSystem",function(){g.undo(xt)}),pt("    translateGraph",function(){!function ut(xt){var pt=Number.POSITIVE_INFINITY,Nt=0,Jt=Number.POSITIVE_INFINITY,ge=0,_e=xt.graph(),Te=_e.marginx||0,Re=_e.marginy||0;function Tn(Fe){var gn=Fe.x,Ve=Fe.y,Mn=Fe.width,oe=Fe.height;pt=Math.min(pt,gn-Mn/2),Nt=Math.max(Nt,gn+Mn/2),Jt=Math.min(Jt,Ve-oe/2),ge=Math.max(ge,Ve+oe/2)}u.forEach(xt.nodes(),function(Fe){Tn(xt.node(Fe))}),u.forEach(xt.edges(),function(Fe){var gn=xt.edge(Fe);u.has(gn,"x")&&Tn(gn)}),pt-=Te,Jt-=Re,u.forEach(xt.nodes(),function(Fe){var gn=xt.node(Fe);gn.x-=pt,gn.y-=Jt}),u.forEach(xt.edges(),function(Fe){var gn=xt.edge(Fe);u.forEach(gn.points,function(Ve){Ve.x-=pt,Ve.y-=Jt}),u.has(gn,"x")&&(gn.x-=pt),u.has(gn,"y")&&(gn.y-=Jt)}),_e.width=Nt-pt+Te,_e.height=ge-Jt+Re}(xt)}),pt("    assignNodeIntersects",function(){!function it(xt){u.forEach(xt.edges(),function(pt){var _e,Te,Nt=xt.edge(pt),Jt=xt.node(pt.v),ge=xt.node(pt.w);Nt.points?(_e=Nt.points[0],Te=Nt.points[Nt.points.length-1]):(Nt.points=[],_e=ge,Te=Jt),Nt.points.unshift(C.intersectRect(Jt,_e)),Nt.points.push(C.intersectRect(ge,Te))})}(xt)}),pt("    reversePoints",function(){!function M(xt){u.forEach(xt.edges(),function(pt){var Nt=xt.edge(pt);Nt.reversed&&Nt.points.reverse()})}(xt)}),pt("    acyclic.undo",function(){x.undo(xt)})}(Jt,Nt)}),Nt("  updateInputGraph",function(){!function P(xt,pt){u.forEach(xt.nodes(),function(Nt){var Jt=xt.node(Nt),ge=pt.node(Nt);Jt&&(Jt.x=ge.x,Jt.y=ge.y,pt.children(Nt).length&&(Jt.width=ge.width,Jt.height=ge.height))}),u.forEach(xt.edges(),function(Nt){var Jt=xt.edge(Nt),ge=pt.edge(Nt);Jt.points=ge.points,u.has(ge,"x")&&(Jt.x=ge.x,Jt.y=ge.y)}),xt.graph().width=pt.graph().width,xt.graph().height=pt.graph().height}(xt,Jt)})})};var R=["nodesep","edgesep","ranksep","marginx","marginy"],Z={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},z=["acyclicer","ranker","rankdir","align"],H=["width","height"],tt={width:0,height:0},rt=["minlen","weight","width","height","labeloffset"],ot={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},J=["labelpos"];function ne(xt,pt){return u.mapValues(u.pick(xt,pt),Number)}function Ut(xt){var pt={};return u.forEach(xt,function(Nt,Jt){pt[Jt.toLowerCase()]=Nt}),pt}},45760:(w,k,o)=>{var u;try{u={cloneDeep:o(90733),constant:o(76684),defaults:o(28800),each:o(35474),filter:o(35281),find:o(62516),flatten:o(22274),forEach:o(89851),forIn:o(41176),has:o(54842),isUndefined:o(34235),last:o(25809),map:o(19984),mapValues:o(10203),max:o(18176),merge:o(80567),min:o(29439),minBy:o(29525),now:o(31710),pick:o(16372),range:o(90361),reduce:o(81337),sortBy:o(12906),uniqueId:o(51541),values:o(90377),zipObject:o(21617)}}catch(x){}u||(u=window._),w.exports=u},1230:(w,k,o)=>{var u=o(45760),x=o(11510);function _(c,h,g,f,p,C,A){var L=c.children(A);if(L.length){var N=x.addBorderNode(c,"_bt"),P=x.addBorderNode(c,"_bb"),R=c.node(A);c.setParent(N,A),R.borderTop=N,c.setParent(P,A),R.borderBottom=P,u.forEach(L,function(Z){_(c,h,g,f,p,C,Z);var z=c.node(Z),H=z.borderTop?z.borderTop:Z,tt=z.borderBottom?z.borderBottom:Z,rt=z.borderTop?f:2*f,ot=H!==tt?1:p-C[A]+1;c.setEdge(N,H,{weight:rt,minlen:ot,nestingEdge:!0}),c.setEdge(tt,P,{weight:rt,minlen:ot,nestingEdge:!0})}),c.parent(A)||c.setEdge(h,N,{weight:0,minlen:p+C[A]})}else A!==h&&c.setEdge(h,A,{weight:0,minlen:g})}w.exports={run:function v(c){var h=x.addDummyNode(c,"root",{},"_root"),g=function m(c){var h={};function g(f,p){var C=c.children(f);C&&C.length&&u.forEach(C,function(A){g(A,p+1)}),h[f]=p}return u.forEach(c.children(),function(f){g(f,1)}),h}(c),f=u.max(u.values(g))-1,p=2*f+1;c.graph().nestingRoot=h,u.forEach(c.edges(),function(A){c.edge(A).minlen*=p});var C=function l(c){return u.reduce(c.edges(),function(h,g){return h+c.edge(g).weight},0)}(c)+1;u.forEach(c.children(),function(A){_(c,h,p,C,f,g,A)}),c.graph().nodeRankFactor=p},cleanup:function t(c){var h=c.graph();c.removeNode(h.nestingRoot),delete h.nestingRoot,u.forEach(c.edges(),function(g){c.edge(g).nestingEdge&&c.removeEdge(g)})}}},91496:(w,k,o)=>{"use strict";var u=o(45760),x=o(11510);w.exports={run:function v(l){l.graph().dummyChains=[],u.forEach(l.edges(),function(t){!function _(l,t){var c=t.v,h=l.node(c).rank,g=t.w,f=l.node(g).rank,p=t.name,C=l.edge(t),A=C.labelRank;if(f!==h+1){var L,N,P;for(l.removeEdge(t),P=0,++h;h<f;++P,++h)C.points=[],L=x.addDummyNode(l,"edge",N={width:0,height:0,edgeLabel:C,edgeObj:t,rank:h},"_d"),h===A&&(N.width=C.width,N.height=C.height,N.dummy="edge-label",N.labelpos=C.labelpos),l.setEdge(c,L,{weight:C.weight},p),0===P&&l.graph().dummyChains.push(L),c=L;l.setEdge(c,g,{weight:C.weight},p)}}(l,t)})},undo:function m(l){u.forEach(l.graph().dummyChains,function(t){var g,c=l.node(t),h=c.edgeLabel;for(l.setEdge(c.edgeObj,h);c.dummy;)g=l.successors(t)[0],l.removeNode(t),h.points.push({x:c.x,y:c.y}),"edge-label"===c.dummy&&(h.x=c.x,h.y=c.y,h.width=c.width,h.height=c.height),c=l.node(t=g)})}}},33034:(w,k,o)=>{var u=o(45760);w.exports=function x(v,_,m){var t,l={};u.forEach(m,function(c){for(var g,f,h=v.parent(c);h;){if((g=v.parent(h))?(f=l[g],l[g]=h):(f=t,t=h),f&&f!==h)return void _.setEdge(f,h);h=g}})}},81323:(w,k,o)=>{var u=o(45760);w.exports=function x(v,_){return u.map(_,function(m){var l=v.inEdges(m);if(l.length){var t=u.reduce(l,function(c,h){var g=v.edge(h),f=v.node(h.v);return{sum:c.sum+g.weight*f.order,weight:c.weight+g.weight}},{sum:0,weight:0});return{v:m,barycenter:t.sum/t.weight,weight:t.weight}}return{v:m}})}},1686:(w,k,o)=>{var u=o(45760),x=o(36456).Graph;w.exports=function v(m,l,t){var c=function _(m){for(var l;m.hasNode(l=u.uniqueId("_root")););return l}(m),h=new x({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(function(g){return m.node(g)});return u.forEach(m.nodes(),function(g){var f=m.node(g),p=m.parent(g);(f.rank===l||f.minRank<=l&&l<=f.maxRank)&&(h.setNode(g),h.setParent(g,p||c),u.forEach(m[t](g),function(C){var A=C.v===g?C.w:C.v,L=h.edge(A,g),N=u.isUndefined(L)?0:L.weight;h.setEdge(A,g,{weight:m.edge(C).weight+N})}),u.has(f,"minRank")&&h.setNode(g,{borderLeft:f.borderLeft[l],borderRight:f.borderRight[l]}))}),h}},18796:(w,k,o)=>{"use strict";var u=o(45760);function v(_,m,l){for(var t=u.zipObject(l,u.map(l,function(C,A){return A})),c=u.flatten(u.map(m,function(C){return u.sortBy(u.map(_.outEdges(C),function(A){return{pos:t[A.w],weight:_.edge(A).weight}}),"pos")}),!0),h=1;h<l.length;)h<<=1;var g=2*h-1;h-=1;var f=u.map(new Array(g),function(){return 0}),p=0;return u.forEach(c.forEach(function(C){var A=C.pos+h;f[A]+=C.weight;for(var L=0;A>0;)A%2&&(L+=f[A+1]),f[A=A-1>>1]+=C.weight;p+=C.weight*L})),p}w.exports=function x(_,m){for(var l=0,t=1;t<m.length;++t)l+=v(_,m[t-1],m[t]);return l}},32974:(w,k,o)=>{"use strict";var u=o(45760),x=o(49402),v=o(18796),_=o(61057),m=o(1686),l=o(33034),t=o(36456).Graph,c=o(11510);function g(C,A,L){return u.map(A,function(N){return m(C,N,L)})}function f(C,A){var L=new t;u.forEach(C,function(N){var P=N.graph().root,R=_(N,P,L,A);u.forEach(R.vs,function(Z,z){N.node(Z).order=z}),l(N,L,R.vs)})}function p(C,A){u.forEach(A,function(L){u.forEach(L,function(N,P){C.node(N).order=P})})}w.exports=function h(C){var A=c.maxRank(C),L=g(C,u.range(1,A+1),"inEdges"),N=g(C,u.range(A-1,-1,-1),"outEdges"),P=x(C);p(C,P);for(var Z,R=Number.POSITIVE_INFINITY,z=0,H=0;H<4;++z,++H){f(z%2?L:N,z%4>=2),P=c.buildLayerMatrix(C);var tt=v(C,P);tt<R&&(H=0,Z=u.cloneDeep(P),R=tt)}p(C,Z)}},49402:(w,k,o)=>{"use strict";var u=o(45760);w.exports=function x(v){var _={},m=u.filter(v.nodes(),function(g){return!v.children(g).length}),l=u.max(u.map(m,function(g){return v.node(g).rank})),t=u.map(u.range(l+1),function(){return[]}),h=u.sortBy(m,function(g){return v.node(g).rank});return u.forEach(h,function c(g){if(!u.has(_,g)){_[g]=!0;var f=v.node(g);t[f.rank].push(g),u.forEach(v.successors(g),c)}}),t}},83826:(w,k,o)=>{"use strict";var u=o(45760);w.exports=function x(m,l){var t={};return u.forEach(m,function(h,g){var f=t[h.v]={indegree:0,in:[],out:[],vs:[h.v],i:g};u.isUndefined(h.barycenter)||(f.barycenter=h.barycenter,f.weight=h.weight)}),u.forEach(l.edges(),function(h){var g=t[h.v],f=t[h.w];!u.isUndefined(g)&&!u.isUndefined(f)&&(f.indegree++,g.out.push(t[h.w]))}),function v(m){var l=[];function t(g){return function(f){f.merged||(u.isUndefined(f.barycenter)||u.isUndefined(g.barycenter)||f.barycenter>=g.barycenter)&&function _(m,l){var t=0,c=0;m.weight&&(t+=m.barycenter*m.weight,c+=m.weight),l.weight&&(t+=l.barycenter*l.weight,c+=l.weight),m.vs=l.vs.concat(m.vs),m.barycenter=t/c,m.weight=c,m.i=Math.min(l.i,m.i),l.merged=!0}(g,f)}}function c(g){return function(f){f.in.push(g),0==--f.indegree&&m.push(f)}}for(;m.length;){var h=m.pop();l.push(h),u.forEach(h.in.reverse(),t(h)),u.forEach(h.out,c(h))}return u.map(u.filter(l,function(g){return!g.merged}),function(g){return u.pick(g,["vs","i","barycenter","weight"])})}(u.filter(t,function(h){return!h.indegree}))}},61057:(w,k,o)=>{var u=o(45760),x=o(81323),v=o(83826),_=o(93803);w.exports=function m(c,h,g,f){var p=c.children(h),C=c.node(h),A=C?C.borderLeft:void 0,L=C?C.borderRight:void 0,N={};A&&(p=u.filter(p,function(tt){return tt!==A&&tt!==L}));var P=x(c,p);u.forEach(P,function(tt){if(c.children(tt.v).length){var rt=m(c,tt.v,g,f);N[tt.v]=rt,u.has(rt,"barycenter")&&function t(c,h){u.isUndefined(c.barycenter)?(c.barycenter=h.barycenter,c.weight=h.weight):(c.barycenter=(c.barycenter*c.weight+h.barycenter*h.weight)/(c.weight+h.weight),c.weight+=h.weight)}(tt,rt)}});var R=v(P,g);!function l(c,h){u.forEach(c,function(g){g.vs=u.flatten(g.vs.map(function(f){return h[f]?h[f].vs:f}),!0)})}(R,N);var Z=_(R,f);if(A&&(Z.vs=u.flatten([A,Z.vs,L],!0),c.predecessors(A).length)){var z=c.node(c.predecessors(A)[0]),H=c.node(c.predecessors(L)[0]);u.has(Z,"barycenter")||(Z.barycenter=0,Z.weight=0),Z.barycenter=(Z.barycenter*Z.weight+z.order+H.order)/(Z.weight+2),Z.weight+=2}return Z}},93803:(w,k,o)=>{var u=o(45760),x=o(11510);function _(l,t,c){for(var h;t.length&&(h=u.last(t)).i<=c;)t.pop(),l.push(h.vs),c++;return c}w.exports=function v(l,t){var c=x.partition(l,function(N){return u.has(N,"barycenter")}),h=c.lhs,g=u.sortBy(c.rhs,function(N){return-N.i}),f=[],p=0,C=0,A=0;h.sort(function m(l){return function(t,c){return t.barycenter<c.barycenter?-1:t.barycenter>c.barycenter?1:l?c.i-t.i:t.i-c.i}}(!!t)),A=_(f,g,A),u.forEach(h,function(N){A+=N.vs.length,f.push(N.vs),p+=N.barycenter*N.weight,C+=N.weight,A=_(f,g,A)});var L={vs:u.flatten(f,!0)};return C&&(L.barycenter=p/C,L.weight=C),L}},60162:(w,k,o)=>{var u=o(45760);w.exports=function x(m){var l=function _(m){var l={},t=0;return u.forEach(m.children(),function c(h){var g=t;u.forEach(m.children(h),c),l[h]={low:g,lim:t++}}),l}(m);u.forEach(m.graph().dummyChains,function(t){for(var c=m.node(t),h=c.edgeObj,g=function v(m,l,t,c){var C,A,h=[],g=[],f=Math.min(l[t].low,l[c].low),p=Math.max(l[t].lim,l[c].lim);C=t;do{C=m.parent(C),h.push(C)}while(C&&(l[C].low>f||p>l[C].lim));for(A=C,C=c;(C=m.parent(C))!==A;)g.push(C);return{path:h.concat(g.reverse()),lca:A}}(m,l,h.v,h.w),f=g.path,p=g.lca,C=0,A=f[C],L=!0;t!==h.w;){if(c=m.node(t),L){for(;(A=f[C])!==p&&m.node(A).maxRank<c.rank;)C++;A===p&&(L=!1)}if(!L){for(;C<f.length-1&&m.node(A=f[C+1]).minRank<=c.rank;)C++;A=f[C]}m.setParent(t,A),t=m.successors(t)[0]}})}},54058:(w,k,o)=>{"use strict";var u=o(45760),x=o(36456).Graph,v=o(11510);function _(R,Z){var z={};return u.reduce(Z,function H(tt,rt){var ot=0,J=0,et=tt.length,q=u.last(rt);return u.forEach(rt,function(at,Y){var K=function l(R,Z){if(R.node(Z).dummy)return u.find(R.predecessors(Z),function(z){return R.node(z).dummy})}(R,at),ut=K?R.node(K).order:et;(K||at===q)&&(u.forEach(rt.slice(J,Y+1),function(it){u.forEach(R.predecessors(it),function(G){var M=R.node(G),ft=M.order;(ft<ot||ut<ft)&&(!M.dummy||!R.node(it).dummy)&&t(z,G,it)})}),J=Y+1,ot=ut)}),rt}),z}function m(R,Z){var z={};function H(rt,ot,J,et,q){var at;u.forEach(u.range(ot,J),function(Y){R.node(at=rt[Y]).dummy&&u.forEach(R.predecessors(at),function(K){var ut=R.node(K);ut.dummy&&(ut.order<et||ut.order>q)&&t(z,K,at)})})}return u.reduce(Z,function tt(rt,ot){var et,J=-1,q=0;return u.forEach(ot,function(at,Y){if("border"===R.node(at).dummy){var K=R.predecessors(at);K.length&&(et=R.node(K[0]).order,H(ot,q,Y,J,et),q=Y,J=et)}H(ot,q,ot.length,et,rt.length)}),ot}),z}function t(R,Z,z){if(Z>z){var H=Z;Z=z,z=H}var tt=R[Z];tt||(R[Z]=tt={}),tt[z]=!0}function c(R,Z,z){if(Z>z){var H=Z;Z=z,z=H}return u.has(R[Z],z)}function h(R,Z,z,H){var tt={},rt={},ot={};return u.forEach(Z,function(J){u.forEach(J,function(et,q){tt[et]=et,rt[et]=et,ot[et]=q})}),u.forEach(Z,function(J){var et=-1;u.forEach(J,function(q){var at=H(q);if(at.length)for(var Y=((at=u.sortBy(at,function(G){return ot[G]})).length-1)/2,K=Math.floor(Y),ut=Math.ceil(Y);K<=ut;++K){var it=at[K];rt[q]===q&&et<ot[it]&&!c(z,q,it)&&(rt[it]=q,rt[q]=tt[q]=tt[it],et=ot[it])}})}),{root:tt,align:rt}}function g(R,Z,z,H,tt){var rt={},ot=function f(R,Z,z,H){var tt=new x,rt=R.graph(),ot=function N(R,Z,z){return function(H,tt,rt){var q,ot=H.node(tt),J=H.node(rt),et=0;if(et+=ot.width/2,u.has(ot,"labelpos"))switch(ot.labelpos.toLowerCase()){case"l":q=-ot.width/2;break;case"r":q=ot.width/2}if(q&&(et+=z?q:-q),q=0,et+=(ot.dummy?Z:R)/2,et+=(J.dummy?Z:R)/2,et+=J.width/2,u.has(J,"labelpos"))switch(J.labelpos.toLowerCase()){case"l":q=J.width/2;break;case"r":q=-J.width/2}return q&&(et+=z?q:-q),q=0,et}}(rt.nodesep,rt.edgesep,H);return u.forEach(Z,function(J){var et;u.forEach(J,function(q){var at=z[q];if(tt.setNode(at),et){var Y=z[et],K=tt.edge(Y,at);tt.setEdge(Y,at,Math.max(ot(R,q,et),K||0))}et=q})}),tt}(R,Z,z,tt),J=tt?"borderLeft":"borderRight";function et(Y,K){for(var ut=ot.nodes(),it=ut.pop(),G={};it;)G[it]?Y(it):(G[it]=!0,ut.push(it),ut=ut.concat(K(it))),it=ut.pop()}return et(function q(Y){rt[Y]=ot.inEdges(Y).reduce(function(K,ut){return Math.max(K,rt[ut.v]+ot.edge(ut))},0)},ot.predecessors.bind(ot)),et(function at(Y){var K=ot.outEdges(Y).reduce(function(it,G){return Math.min(it,rt[G.w]-ot.edge(G))},Number.POSITIVE_INFINITY),ut=R.node(Y);K!==Number.POSITIVE_INFINITY&&ut.borderType!==J&&(rt[Y]=Math.max(rt[Y],K))},ot.successors.bind(ot)),u.forEach(H,function(Y){rt[Y]=rt[z[Y]]}),rt}function p(R,Z){return u.minBy(u.values(Z),function(z){var H=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;return u.forIn(z,function(rt,ot){var J=function P(R,Z){return R.node(Z).width}(R,ot)/2;H=Math.max(rt+J,H),tt=Math.min(rt-J,tt)}),H-tt})}function C(R,Z){var z=u.values(Z),H=u.min(z),tt=u.max(z);u.forEach(["u","d"],function(rt){u.forEach(["l","r"],function(ot){var q,J=rt+ot,et=R[J];if(et!==Z){var at=u.values(et);(q="l"===ot?H-u.min(at):tt-u.max(at))&&(R[J]=u.mapValues(et,function(Y){return Y+q}))}})})}function A(R,Z){return u.mapValues(R.ul,function(z,H){if(Z)return R[Z.toLowerCase()][H];var tt=u.sortBy(u.map(R,H));return(tt[1]+tt[2])/2})}w.exports={positionX:function L(R){var tt,Z=v.buildLayerMatrix(R),z=u.merge(_(R,Z),m(R,Z)),H={};u.forEach(["u","d"],function(ot){tt="u"===ot?Z:u.values(Z).reverse(),u.forEach(["l","r"],function(J){"r"===J&&(tt=u.map(tt,function(Y){return u.values(Y).reverse()}));var et=("u"===ot?R.predecessors:R.successors).bind(R),q=h(0,tt,z,et),at=g(R,tt,q.root,q.align,"r"===J);"r"===J&&(at=u.mapValues(at,function(Y){return-Y})),H[ot+J]=at})});var rt=p(R,H);return C(H,rt),A(H,R.graph().align)},findType1Conflicts:_,findType2Conflicts:m,addConflict:t,hasConflict:c,verticalAlignment:h,horizontalCompaction:g,alignCoordinates:C,findSmallestWidthAlignment:p,balance:A}},78226:(w,k,o)=>{"use strict";var u=o(45760),x=o(11510),v=o(54058).positionX;w.exports=function _(l){(function m(l){var t=x.buildLayerMatrix(l),c=l.graph().ranksep,h=0;u.forEach(t,function(g){var f=u.max(u.map(g,function(p){return l.node(p).height}));u.forEach(g,function(p){l.node(p).y=h+f/2}),h+=f+c})})(l=x.asNonCompoundGraph(l)),u.forEach(v(l),function(t,c){l.node(c).x=t})}},96632:(w,k,o)=>{"use strict";var u=o(45760),x=o(36456).Graph,v=o(1916).slack;function m(c,h){return u.forEach(c.nodes(),function g(f){u.forEach(h.nodeEdges(f),function(p){var C=p.v,A=f===C?p.w:C;!c.hasNode(A)&&!v(h,p)&&(c.setNode(A,{}),c.setEdge(f,A,{}),g(A))})}),c.nodeCount()}function l(c,h){return u.minBy(h.edges(),function(g){if(c.hasNode(g.v)!==c.hasNode(g.w))return v(h,g)})}function t(c,h,g){u.forEach(c.nodes(),function(f){h.node(f).rank+=g})}w.exports=function _(c){var p,C,h=new x({directed:!1}),g=c.nodes()[0],f=c.nodeCount();for(h.setNode(g,{});m(h,c)<f;)p=l(h,c),C=h.hasNode(p.v)?v(c,p):-v(c,p),t(h,c,C);return h}},94124:(w,k,o)=>{"use strict";var x=o(1916).longestPath,v=o(96632),_=o(63804);w.exports=function m(h){switch(h.graph().ranker){case"network-simplex":default:!function c(h){_(h)}(h);break;case"tight-tree":!function t(h){x(h),v(h)}(h);break;case"longest-path":l(h)}};var l=x},63804:(w,k,o)=>{"use strict";var u=o(45760),x=o(96632),v=o(1916).slack,_=o(1916).longestPath,m=o(36456).alg.preorder,l=o(36456).alg.postorder,t=o(11510).simplify;function c(z){z=t(z),_(z);var tt,H=x(z);for(p(H),h(H,z);tt=A(H);)N(H,z,tt,L(H,z,tt))}function h(z,H){var tt=l(z,z.nodes());tt=tt.slice(0,tt.length-1),u.forEach(tt,function(rt){!function g(z,H,tt){var rt=z.node(tt);z.edge(tt,rt.parent).cutvalue=f(z,H,tt)}(z,H,rt)})}function f(z,H,tt){var ot=z.node(tt).parent,J=!0,et=H.edge(tt,ot),q=0;return et||(J=!1,et=H.edge(ot,tt)),q=et.weight,u.forEach(H.nodeEdges(tt),function(at){var Y=at.v===tt,K=Y?at.w:at.v;if(K!==ot){var ut=Y===J,it=H.edge(at).weight;if(q+=ut?it:-it,function R(z,H,tt){return z.hasEdge(H,tt)}(z,tt,K)){var G=z.edge(tt,K).cutvalue;q+=ut?-G:G}}}),q}function p(z,H){arguments.length<2&&(H=z.nodes()[0]),C(z,{},1,H)}function C(z,H,tt,rt,ot){var J=tt,et=z.node(rt);return H[rt]=!0,u.forEach(z.neighbors(rt),function(q){u.has(H,q)||(tt=C(z,H,tt,q,rt))}),et.low=J,et.lim=tt++,ot?et.parent=ot:delete et.parent,tt}function A(z){return u.find(z.edges(),function(H){return z.edge(H).cutvalue<0})}function L(z,H,tt){var rt=tt.v,ot=tt.w;H.hasEdge(rt,ot)||(rt=tt.w,ot=tt.v);var J=z.node(rt),et=z.node(ot),q=J,at=!1;J.lim>et.lim&&(q=et,at=!0);var Y=u.filter(H.edges(),function(K){return at===Z(0,z.node(K.v),q)&&at!==Z(0,z.node(K.w),q)});return u.minBy(Y,function(K){return v(H,K)})}function N(z,H,tt,rt){z.removeEdge(tt.v,tt.w),z.setEdge(rt.v,rt.w,{}),p(z),h(z,H),function P(z,H){var tt=u.find(z.nodes(),function(ot){return!H.node(ot).parent}),rt=m(z,tt);rt=rt.slice(1),u.forEach(rt,function(ot){var J=z.node(ot).parent,et=H.edge(ot,J),q=!1;et||(et=H.edge(J,ot),q=!0),H.node(ot).rank=H.node(J).rank+(q?et.minlen:-et.minlen)})}(z,H)}function Z(z,H,tt){return tt.low<=H.lim&&H.lim<=tt.lim}w.exports=c,c.initLowLimValues=p,c.initCutValues=h,c.calcCutValue=f,c.leaveEdge=A,c.enterEdge=L,c.exchangeEdges=N},1916:(w,k,o)=>{"use strict";var u=o(45760);w.exports={longestPath:function x(_){var m={};u.forEach(_.sources(),function l(t){var c=_.node(t);if(u.has(m,t))return c.rank;m[t]=!0;var h=u.min(u.map(_.outEdges(t),function(g){return l(g.w)-_.edge(g).minlen}));return(h===Number.POSITIVE_INFINITY||null==h)&&(h=0),c.rank=h})},slack:function v(_,m){return _.node(m.w).rank-_.node(m.v).rank-_.edge(m).minlen}}},11510:(w,k,o)=>{"use strict";var u=o(45760),x=o(36456).Graph;function v(P,R,Z,z){var H;do{H=u.uniqueId(z)}while(P.hasNode(H));return Z.dummy=R,P.setNode(H,Z),H}function C(P){return u.max(u.map(P.nodes(),function(R){var Z=P.node(R).rank;if(!u.isUndefined(Z))return Z}))}w.exports={addDummyNode:v,simplify:function _(P){var R=(new x).setGraph(P.graph());return u.forEach(P.nodes(),function(Z){R.setNode(Z,P.node(Z))}),u.forEach(P.edges(),function(Z){var z=R.edge(Z.v,Z.w)||{weight:0,minlen:1},H=P.edge(Z);R.setEdge(Z.v,Z.w,{weight:z.weight+H.weight,minlen:Math.max(z.minlen,H.minlen)})}),R},asNonCompoundGraph:function m(P){var R=new x({multigraph:P.isMultigraph()}).setGraph(P.graph());return u.forEach(P.nodes(),function(Z){P.children(Z).length||R.setNode(Z,P.node(Z))}),u.forEach(P.edges(),function(Z){R.setEdge(Z,P.edge(Z))}),R},successorWeights:function l(P){var R=u.map(P.nodes(),function(Z){var z={};return u.forEach(P.outEdges(Z),function(H){z[H.w]=(z[H.w]||0)+P.edge(H).weight}),z});return u.zipObject(P.nodes(),R)},predecessorWeights:function t(P){var R=u.map(P.nodes(),function(Z){var z={};return u.forEach(P.inEdges(Z),function(H){z[H.v]=(z[H.v]||0)+P.edge(H).weight}),z});return u.zipObject(P.nodes(),R)},intersectRect:function c(P,R){var J,et,Z=P.x,z=P.y,H=R.x-Z,tt=R.y-z,rt=P.width/2,ot=P.height/2;if(!H&&!tt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(tt)*rt>Math.abs(H)*ot?(tt<0&&(ot=-ot),J=ot*H/tt,et=ot):(H<0&&(rt=-rt),J=rt,et=rt*tt/H),{x:Z+J,y:z+et}},buildLayerMatrix:function h(P){var R=u.map(u.range(C(P)+1),function(){return[]});return u.forEach(P.nodes(),function(Z){var z=P.node(Z),H=z.rank;u.isUndefined(H)||(R[H][z.order]=Z)}),R},normalizeRanks:function g(P){var R=u.min(u.map(P.nodes(),function(Z){return P.node(Z).rank}));u.forEach(P.nodes(),function(Z){var z=P.node(Z);u.has(z,"rank")&&(z.rank-=R)})},removeEmptyRanks:function f(P){var R=u.min(u.map(P.nodes(),function(tt){return P.node(tt).rank})),Z=[];u.forEach(P.nodes(),function(tt){var rt=P.node(tt).rank-R;Z[rt]||(Z[rt]=[]),Z[rt].push(tt)});var z=0,H=P.graph().nodeRankFactor;u.forEach(Z,function(tt,rt){u.isUndefined(tt)&&rt%H!=0?--z:z&&u.forEach(tt,function(ot){P.node(ot).rank+=z})})},addBorderNode:function p(P,R,Z,z){var H={width:0,height:0};return arguments.length>=4&&(H.rank=Z,H.order=z),v(P,"border",H,R)},maxRank:C,partition:function A(P,R){var Z={lhs:[],rhs:[]};return u.forEach(P,function(z){R(z)?Z.lhs.push(z):Z.rhs.push(z)}),Z},time:function L(P,R){var Z=u.now();try{return R()}finally{console.log(P+" time: "+(u.now()-Z)+"ms")}},notime:function N(P,R){return R()}}},28126:w=>{w.exports="0.8.5"},85510:(w,k,o)=>{var u=o(51838);w.exports={Graph:u.Graph,json:o(21088),alg:o(83430),version:u.version}},86730:(w,k,o)=>{var u=o(79138);w.exports=function x(v){var l,_={},m=[];function t(c){u.has(_,c)||(_[c]=!0,l.push(c),u.each(v.successors(c),t),u.each(v.predecessors(c),t))}return u.each(v.nodes(),function(c){l=[],t(c),l.length&&m.push(l)}),m}},22163:(w,k,o)=>{var u=o(79138);function v(_,m,l,t,c,h){u.has(t,m)||(t[m]=!0,l||h.push(m),u.each(c(m),function(g){v(_,g,l,t,c,h)}),l&&h.push(m))}w.exports=function x(_,m,l){u.isArray(m)||(m=[m]);var t=(_.isDirected()?_.successors:_.neighbors).bind(_),c=[],h={};return u.each(m,function(g){if(!_.hasNode(g))throw new Error("Graph does not have node: "+g);v(_,g,"post"===l,h,t,c)}),c}},25668:(w,k,o)=>{var u=o(61718),x=o(79138);w.exports=function v(_,m,l){return x.transform(_.nodes(),function(t,c){t[c]=u(_,c,m,l)},{})}},61718:(w,k,o)=>{var u=o(79138),x=o(31919);w.exports=function _(l,t,c,h){return function m(l,t,c,h){var p,C,g={},f=new x,A=function(L){var N=L.v!==p?L.v:L.w,P=g[N],R=c(L),Z=C.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+L+" Weight: "+R);Z<P.distance&&(P.distance=Z,P.predecessor=p,f.decrease(N,Z))};for(l.nodes().forEach(function(L){var N=L===t?0:Number.POSITIVE_INFINITY;g[L]={distance:N},f.add(L,N)});f.size()>0&&(p=f.removeMin(),(C=g[p]).distance!==Number.POSITIVE_INFINITY);)h(p).forEach(A);return g}(l,String(t),c||v,h||function(g){return l.outEdges(g)})};var v=u.constant(1)},9611:(w,k,o)=>{var u=o(79138),x=o(73585);w.exports=function v(_){return u.filter(x(_),function(m){return m.length>1||1===m.length&&_.hasEdge(m[0],m[0])})}},22881:(w,k,o)=>{var u=o(79138);w.exports=function v(m,l,t){return function _(m,l,t){var c={},h=m.nodes();return h.forEach(function(g){c[g]={},c[g][g]={distance:0},h.forEach(function(f){g!==f&&(c[g][f]={distance:Number.POSITIVE_INFINITY})}),t(g).forEach(function(f){var p=f.v===g?f.w:f.v,C=l(f);c[g][p]={distance:C,predecessor:g}})}),h.forEach(function(g){var f=c[g];h.forEach(function(p){var C=c[p];h.forEach(function(A){var N=f[A],P=C[A],R=C[g].distance+N.distance;R<P.distance&&(P.distance=R,P.predecessor=N.predecessor)})})}),c}(m,l||x,t||function(c){return m.outEdges(c)})};var x=u.constant(1)},83430:(w,k,o)=>{w.exports={components:o(86730),dijkstra:o(61718),dijkstraAll:o(25668),findCycles:o(9611),floydWarshall:o(22881),isAcyclic:o(46693),postorder:o(46694),preorder:o(5330),prim:o(46823),tarjan:o(73585),topsort:o(52180)}},46693:(w,k,o)=>{var u=o(52180);w.exports=function x(v){try{u(v)}catch(_){if(_ instanceof u.CycleException)return!1;throw _}return!0}},46694:(w,k,o)=>{var u=o(22163);w.exports=function x(v,_){return u(v,_,"post")}},5330:(w,k,o)=>{var u=o(22163);w.exports=function x(v,_){return u(v,_,"pre")}},46823:(w,k,o)=>{var u=o(79138),x=o(66568),v=o(31919);w.exports=function _(m,l){var g,t=new x,c={},h=new v;function f(C){var A=C.v===g?C.w:C.v,L=h.priority(A);if(void 0!==L){var N=l(C);N<L&&(c[A]=g,h.decrease(A,N))}}if(0===m.nodeCount())return t;u.each(m.nodes(),function(C){h.add(C,Number.POSITIVE_INFINITY),t.setNode(C)}),h.decrease(m.nodes()[0],0);for(var p=!1;h.size()>0;){if(g=h.removeMin(),u.has(c,g))t.setEdge(g,c[g]);else{if(p)throw new Error("Input graph is not connected: "+m);p=!0}m.nodeEdges(g).forEach(f)}return t}},73585:(w,k,o)=>{var u=o(79138);w.exports=function x(v){var _=0,m=[],l={},t=[];function c(h){var g=l[h]={onStack:!0,lowlink:_,index:_++};if(m.push(h),v.successors(h).forEach(function(C){u.has(l,C)?l[C].onStack&&(g.lowlink=Math.min(g.lowlink,l[C].index)):(c(C),g.lowlink=Math.min(g.lowlink,l[C].lowlink))}),g.lowlink===g.index){var p,f=[];do{p=m.pop(),l[p].onStack=!1,f.push(p)}while(h!==p);t.push(f)}}return v.nodes().forEach(function(h){u.has(l,h)||c(h)}),t}},52180:(w,k,o)=>{var u=o(79138);function x(_){var m={},l={},t=[];if(u.each(_.sinks(),function c(h){if(u.has(l,h))throw new v;u.has(m,h)||(l[h]=!0,m[h]=!0,u.each(_.predecessors(h),c),delete l[h],t.push(h))}),u.size(m)!==_.nodeCount())throw new v;return t}function v(){}w.exports=x,x.CycleException=v,v.prototype=new Error},31919:(w,k,o)=>{var u=o(79138);function x(){this._arr=[],this._keyIndices={}}w.exports=x,x.prototype.size=function(){return this._arr.length},x.prototype.keys=function(){return this._arr.map(function(v){return v.key})},x.prototype.has=function(v){return u.has(this._keyIndices,v)},x.prototype.priority=function(v){var _=this._keyIndices[v];if(void 0!==_)return this._arr[_].priority},x.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},x.prototype.add=function(v,_){var m=this._keyIndices;if(v=String(v),!u.has(m,v)){var l=this._arr,t=l.length;return m[v]=t,l.push({key:v,priority:_}),this._decrease(t),!0}return!1},x.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},x.prototype.decrease=function(v,_){var m=this._keyIndices[v];if(_>this._arr[m].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[m].priority+" New: "+_);this._arr[m].priority=_,this._decrease(m)},x.prototype._heapify=function(v){var _=this._arr,m=2*v,l=m+1,t=v;m<_.length&&(t=_[m].priority<_[t].priority?m:t,l<_.length&&(t=_[l].priority<_[t].priority?l:t),t!==v&&(this._swap(v,t),this._heapify(t)))},x.prototype._decrease=function(v){for(var l,_=this._arr,m=_[v].priority;0!==v&&!(_[l=v>>1].priority<m);)this._swap(v,l),v=l},x.prototype._swap=function(v,_){var m=this._arr,l=this._keyIndices,t=m[v],c=m[_];m[v]=c,m[_]=t,l[c.key]=v,l[t.key]=_}},66568:(w,k,o)=>{"use strict";var u=o(79138);w.exports=m;var v="\0";function m(f){this._isDirected=!u.has(f,"directed")||f.directed,this._isMultigraph=!!u.has(f,"multigraph")&&f.multigraph,this._isCompound=!!u.has(f,"compound")&&f.compound,this._label=void 0,this._defaultNodeLabelFn=u.constant(void 0),this._defaultEdgeLabelFn=u.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[v]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function l(f,p){f[p]?f[p]++:f[p]=1}function t(f,p){--f[p]||delete f[p]}function c(f,p,C,A){var L=""+p,N=""+C;if(!f&&L>N){var P=L;L=N,N=P}return L+"\x01"+N+"\x01"+(u.isUndefined(A)?"\0":A)}function h(f,p,C,A){var L=""+p,N=""+C;if(!f&&L>N){var P=L;L=N,N=P}var R={v:L,w:N};return A&&(R.name=A),R}function g(f,p){return c(f,p.v,p.w,p.name)}m.prototype._nodeCount=0,m.prototype._edgeCount=0,m.prototype.isDirected=function(){return this._isDirected},m.prototype.isMultigraph=function(){return this._isMultigraph},m.prototype.isCompound=function(){return this._isCompound},m.prototype.setGraph=function(f){return this._label=f,this},m.prototype.graph=function(){return this._label},m.prototype.setDefaultNodeLabel=function(f){return u.isFunction(f)||(f=u.constant(f)),this._defaultNodeLabelFn=f,this},m.prototype.nodeCount=function(){return this._nodeCount},m.prototype.nodes=function(){return u.keys(this._nodes)},m.prototype.sources=function(){var f=this;return u.filter(this.nodes(),function(p){return u.isEmpty(f._in[p])})},m.prototype.sinks=function(){var f=this;return u.filter(this.nodes(),function(p){return u.isEmpty(f._out[p])})},m.prototype.setNodes=function(f,p){var C=arguments,A=this;return u.each(f,function(L){C.length>1?A.setNode(L,p):A.setNode(L)}),this},m.prototype.setNode=function(f,p){return u.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=p),this):(this._nodes[f]=arguments.length>1?p:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=v,this._children[f]={},this._children[v][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},m.prototype.node=function(f){return this._nodes[f]},m.prototype.hasNode=function(f){return u.has(this._nodes,f)},m.prototype.removeNode=function(f){var p=this;if(u.has(this._nodes,f)){var C=function(A){p.removeEdge(p._edgeObjs[A])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],u.each(this.children(f),function(A){p.setParent(A)}),delete this._children[f]),u.each(u.keys(this._in[f]),C),delete this._in[f],delete this._preds[f],u.each(u.keys(this._out[f]),C),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},m.prototype.setParent=function(f,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.isUndefined(p))p=v;else{for(var C=p+="";!u.isUndefined(C);C=this.parent(C))if(C===f)throw new Error("Setting "+p+" as parent of "+f+" would create a cycle");this.setNode(p)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=p,this._children[p][f]=!0,this},m.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},m.prototype.parent=function(f){if(this._isCompound){var p=this._parent[f];if(p!==v)return p}},m.prototype.children=function(f){if(u.isUndefined(f)&&(f=v),this._isCompound){var p=this._children[f];if(p)return u.keys(p)}else{if(f===v)return this.nodes();if(this.hasNode(f))return[]}},m.prototype.predecessors=function(f){var p=this._preds[f];if(p)return u.keys(p)},m.prototype.successors=function(f){var p=this._sucs[f];if(p)return u.keys(p)},m.prototype.neighbors=function(f){var p=this.predecessors(f);if(p)return u.union(p,this.successors(f))},m.prototype.isLeaf=function(f){return 0===(this.isDirected()?this.successors(f):this.neighbors(f)).length},m.prototype.filterNodes=function(f){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var C=this;u.each(this._nodes,function(N,P){f(P)&&p.setNode(P,N)}),u.each(this._edgeObjs,function(N){p.hasNode(N.v)&&p.hasNode(N.w)&&p.setEdge(N,C.edge(N))});var A={};function L(N){var P=C.parent(N);return void 0===P||p.hasNode(P)?(A[N]=P,P):P in A?A[P]:L(P)}return this._isCompound&&u.each(p.nodes(),function(N){p.setParent(N,L(N))}),p},m.prototype.setDefaultEdgeLabel=function(f){return u.isFunction(f)||(f=u.constant(f)),this._defaultEdgeLabelFn=f,this},m.prototype.edgeCount=function(){return this._edgeCount},m.prototype.edges=function(){return u.values(this._edgeObjs)},m.prototype.setPath=function(f,p){var C=this,A=arguments;return u.reduce(f,function(L,N){return A.length>1?C.setEdge(L,N,p):C.setEdge(L,N),N}),this},m.prototype.setEdge=function(){var f,p,C,A,L=!1,N=arguments[0];"object"==typeof N&&null!==N&&"v"in N?(f=N.v,p=N.w,C=N.name,2===arguments.length&&(A=arguments[1],L=!0)):(f=N,p=arguments[1],C=arguments[3],arguments.length>2&&(A=arguments[2],L=!0)),f=""+f,p=""+p,u.isUndefined(C)||(C=""+C);var P=c(this._isDirected,f,p,C);if(u.has(this._edgeLabels,P))return L&&(this._edgeLabels[P]=A),this;if(!u.isUndefined(C)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(p),this._edgeLabels[P]=L?A:this._defaultEdgeLabelFn(f,p,C);var R=h(this._isDirected,f,p,C);return f=R.v,p=R.w,Object.freeze(R),this._edgeObjs[P]=R,l(this._preds[p],f),l(this._sucs[f],p),this._in[p][P]=R,this._out[f][P]=R,this._edgeCount++,this},m.prototype.edge=function(f,p,C){var A=1===arguments.length?g(this._isDirected,arguments[0]):c(this._isDirected,f,p,C);return this._edgeLabels[A]},m.prototype.hasEdge=function(f,p,C){var A=1===arguments.length?g(this._isDirected,arguments[0]):c(this._isDirected,f,p,C);return u.has(this._edgeLabels,A)},m.prototype.removeEdge=function(f,p,C){var A=1===arguments.length?g(this._isDirected,arguments[0]):c(this._isDirected,f,p,C),L=this._edgeObjs[A];return L&&(f=L.v,p=L.w,delete this._edgeLabels[A],delete this._edgeObjs[A],t(this._preds[p],f),t(this._sucs[f],p),delete this._in[p][A],delete this._out[f][A],this._edgeCount--),this},m.prototype.inEdges=function(f,p){var C=this._in[f];if(C){var A=u.values(C);return p?u.filter(A,function(L){return L.v===p}):A}},m.prototype.outEdges=function(f,p){var C=this._out[f];if(C){var A=u.values(C);return p?u.filter(A,function(L){return L.w===p}):A}},m.prototype.nodeEdges=function(f,p){var C=this.inEdges(f,p);if(C)return C.concat(this.outEdges(f,p))}},51838:(w,k,o)=>{w.exports={Graph:o(66568),version:o(75089)}},21088:(w,k,o)=>{var u=o(79138),x=o(66568);function _(t){return u.map(t.nodes(),function(c){var h=t.node(c),g=t.parent(c),f={v:c};return u.isUndefined(h)||(f.value=h),u.isUndefined(g)||(f.parent=g),f})}function m(t){return u.map(t.edges(),function(c){var h=t.edge(c),g={v:c.v,w:c.w};return u.isUndefined(c.name)||(g.name=c.name),u.isUndefined(h)||(g.value=h),g})}w.exports={write:function v(t){var c={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:_(t),edges:m(t)};return u.isUndefined(t.graph())||(c.value=u.clone(t.graph())),c},read:function l(t){var c=new x(t.options).setGraph(t.value);return u.each(t.nodes,function(h){c.setNode(h.v,h.value),h.parent&&c.setParent(h.v,h.parent)}),u.each(t.edges,function(h){c.setEdge({v:h.v,w:h.w,name:h.name},h.value)}),c}}},79138:(w,k,o)=>{var u;try{u={clone:o(11094),constant:o(76684),each:o(35474),filter:o(35281),has:o(54842),isArray:o(21503),isEmpty:o(71973),isFunction:o(75946),isUndefined:o(34235),keys:o(118),map:o(19984),reduce:o(81337),size:o(55637),transform:o(89416),union:o(68921),values:o(90377)}}catch(x){}u||(u=window._),w.exports=u},75089:w=>{w.exports="2.1.8"},40717:(w,k,o)=>{"use strict";var u=o(50623);function x(v){return!0===u(v)&&"[object Object]"===Object.prototype.toString.call(v)}w.exports=function(_){var m,l;return!(!1===x(_)||(m=_.constructor,"function"!=typeof m)||(l=m.prototype,!1===x(l))||!1===l.hasOwnProperty("isPrototypeOf"))}},50623:w=>{"use strict";w.exports=function(o){return null!=o&&"object"==typeof o&&!1===Array.isArray(o)}},52872:w=>{var k=Object.prototype.toString;function o(h){return"function"==typeof h.constructor?h.constructor.name:null}w.exports=function(g){if(void 0===g)return"undefined";if(null===g)return"null";var f=typeof g;if("boolean"===f)return"boolean";if("string"===f)return"string";if("number"===f)return"number";if("symbol"===f)return"symbol";if("function"===f)return function m(h,g){return"GeneratorFunction"===o(h)}(g)?"generatorfunction":"function";if(function u(h){return Array.isArray?Array.isArray(h):h instanceof Array}(g))return"array";if(function c(h){return!(!h.constructor||"function"!=typeof h.constructor.isBuffer)&&h.constructor.isBuffer(h)}(g))return"buffer";if(function t(h){try{if("number"==typeof h.length&&"function"==typeof h.callee)return!0}catch(g){if(-1!==g.message.indexOf("callee"))return!0}return!1}(g))return"arguments";if(function v(h){return h instanceof Date||"function"==typeof h.toDateString&&"function"==typeof h.getDate&&"function"==typeof h.setDate}(g))return"date";if(function x(h){return h instanceof Error||"string"==typeof h.message&&h.constructor&&"number"==typeof h.constructor.stackTraceLimit}(g))return"error";if(function _(h){return h instanceof RegExp||"string"==typeof h.flags&&"boolean"==typeof h.ignoreCase&&"boolean"==typeof h.multiline&&"boolean"==typeof h.global}(g))return"regexp";switch(o(g)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function l(h){return"function"==typeof h.throw&&"function"==typeof h.return&&"function"==typeof h.next}(g))return"generator";switch(f=k.call(g)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return f.slice(8,-1).toLowerCase().replace(/\s/g,"")}},37244:(w,k,o)=>{var v=o(53436)(o(12119),"DataView");w.exports=v},54994:(w,k,o)=>{var u=o(64312),x=o(46421),v=o(15764),_=o(18685),m=o(26676);function l(t){var c=-1,h=null==t?0:t.length;for(this.clear();++c<h;){var g=t[c];this.set(g[0],g[1])}}l.prototype.clear=u,l.prototype.delete=x,l.prototype.get=v,l.prototype.has=_,l.prototype.set=m,w.exports=l},9215:(w,k,o)=>{var u=o(41840),x=o(34378),v=o(54981),_=o(67343),m=o(98895);function l(t){var c=-1,h=null==t?0:t.length;for(this.clear();++c<h;){var g=t[c];this.set(g[0],g[1])}}l.prototype.clear=u,l.prototype.delete=x,l.prototype.get=v,l.prototype.has=_,l.prototype.set=m,w.exports=l},51501:(w,k,o)=>{var v=o(53436)(o(12119),"Map");w.exports=v},99850:(w,k,o)=>{var u=o(10638),x=o(11184),v=o(70866),_=o(43771),m=o(51772);function l(t){var c=-1,h=null==t?0:t.length;for(this.clear();++c<h;){var g=t[c];this.set(g[0],g[1])}}l.prototype.clear=u,l.prototype.delete=x,l.prototype.get=v,l.prototype.has=_,l.prototype.set=m,w.exports=l},44267:(w,k,o)=>{var v=o(53436)(o(12119),"Promise");w.exports=v},46323:(w,k,o)=>{var v=o(53436)(o(12119),"Set");w.exports=v},58849:(w,k,o)=>{var u=o(99850),x=o(4600),v=o(31387);function _(m){var l=-1,t=null==m?0:m.length;for(this.__data__=new u;++l<t;)this.add(m[l])}_.prototype.add=_.prototype.push=x,_.prototype.has=v,w.exports=_},2858:(w,k,o)=>{var u=o(9215),x=o(13720),v=o(64410),_=o(45576),m=o(22247),l=o(41585);function t(c){var h=this.__data__=new u(c);this.size=h.size}t.prototype.clear=x,t.prototype.delete=v,t.prototype.get=_,t.prototype.has=m,t.prototype.set=l,w.exports=t},60443:(w,k,o)=>{var u=o(12119);w.exports=u.Symbol},73457:(w,k,o)=>{var u=o(12119);w.exports=u.Uint8Array},24243:(w,k,o)=>{var v=o(53436)(o(12119),"WeakMap");w.exports=v},26999:w=>{w.exports=function k(o,u,x){switch(x.length){case 0:return o.call(u);case 1:return o.call(u,x[0]);case 2:return o.call(u,x[0],x[1]);case 3:return o.call(u,x[0],x[1],x[2])}return o.apply(u,x)}},96837:w=>{w.exports=function k(o,u){for(var x=-1,v=null==o?0:o.length;++x<v&&!1!==u(o[x],x,o););return o}},69779:w=>{w.exports=function k(o,u){for(var x=-1,v=null==o?0:o.length,_=0,m=[];++x<v;){var l=o[x];u(l,x,o)&&(m[_++]=l)}return m}},61253:(w,k,o)=>{var u=o(14164);w.exports=function x(v,_){return!(null==v||!v.length)&&u(v,_,0)>-1}},37609:w=>{w.exports=function k(o,u,x){for(var v=-1,_=null==o?0:o.length;++v<_;)if(x(u,o[v]))return!0;return!1}},72271:(w,k,o)=>{var u=o(85334),x=o(77151),v=o(21503),_=o(80891),m=o(58442),l=o(48159),c=Object.prototype.hasOwnProperty;w.exports=function h(g,f){var p=v(g),C=!p&&x(g),A=!p&&!C&&_(g),L=!p&&!C&&!A&&l(g),N=p||C||A||L,P=N?u(g.length,String):[],R=P.length;for(var Z in g)(f||c.call(g,Z))&&(!N||!("length"==Z||A&&("offset"==Z||"parent"==Z)||L&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||m(Z,R)))&&P.push(Z);return P}},84633:w=>{w.exports=function k(o,u){for(var x=-1,v=null==o?0:o.length,_=Array(v);++x<v;)_[x]=u(o[x],x,o);return _}},85059:w=>{w.exports=function k(o,u){for(var x=-1,v=u.length,_=o.length;++x<v;)o[_+x]=u[x];return o}},8745:w=>{w.exports=function k(o,u,x,v){var _=-1,m=null==o?0:o.length;for(v&&m&&(x=o[++_]);++_<m;)x=u(x,o[_],_,o);return x}},79503:w=>{w.exports=function k(o,u){for(var x=-1,v=null==o?0:o.length;++x<v;)if(u(o[x],x,o))return!0;return!1}},75481:(w,k,o)=>{var x=o(11847)("length");w.exports=x},49276:(w,k,o)=>{var u=o(85683),x=o(20217);w.exports=function v(_,m,l){(void 0!==l&&!x(_[m],l)||void 0===l&&!(m in _))&&u(_,m,l)}},89719:(w,k,o)=>{var u=o(85683),x=o(20217),_=Object.prototype.hasOwnProperty;w.exports=function m(l,t,c){var h=l[t];(!_.call(l,t)||!x(h,c)||void 0===c&&!(t in l))&&u(l,t,c)}},43503:(w,k,o)=>{var u=o(20217);w.exports=function x(v,_){for(var m=v.length;m--;)if(u(v[m][0],_))return m;return-1}},94121:(w,k,o)=>{var u=o(31989),x=o(118);w.exports=function v(_,m){return _&&u(m,x(m),_)}},99287:(w,k,o)=>{var u=o(31989),x=o(16555);w.exports=function v(_,m){return _&&u(m,x(m),_)}},85683:(w,k,o)=>{var u=o(56713);w.exports=function x(v,_,m){"__proto__"==_&&u?u(v,_,{configurable:!0,enumerable:!0,value:m,writable:!0}):v[_]=m}},44462:(w,k,o)=>{var u=o(2858),x=o(96837),v=o(89719),_=o(94121),m=o(99287),l=o(19292),t=o(99454),c=o(84444),h=o(59905),g=o(47597),f=o(6967),p=o(28794),C=o(76782),A=o(37878),L=o(4264),N=o(21503),P=o(80891),R=o(13222),Z=o(25940),z=o(90799),H=o(118),tt=o(16555),et="[object Arguments]",ut="[object Function]",ft="[object Object]",Ve={};Ve[et]=Ve["[object Array]"]=Ve["[object ArrayBuffer]"]=Ve["[object DataView]"]=Ve["[object Boolean]"]=Ve["[object Date]"]=Ve["[object Float32Array]"]=Ve["[object Float64Array]"]=Ve["[object Int8Array]"]=Ve["[object Int16Array]"]=Ve["[object Int32Array]"]=Ve["[object Map]"]=Ve["[object Number]"]=Ve[ft]=Ve["[object RegExp]"]=Ve["[object Set]"]=Ve["[object String]"]=Ve["[object Symbol]"]=Ve["[object Uint8Array]"]=Ve["[object Uint8ClampedArray]"]=Ve["[object Uint16Array]"]=Ve["[object Uint32Array]"]=!0,Ve["[object Error]"]=Ve[ut]=Ve["[object WeakMap]"]=!1,w.exports=function Mn(oe,fn,Wn,ni,zn,an){var je,sn=1&fn,En=2&fn,Be=4&fn;if(Wn&&(je=zn?Wn(oe,ni,zn,an):Wn(oe)),void 0!==je)return je;if(!Z(oe))return oe;var ci=N(oe);if(ci){if(je=C(oe),!sn)return t(oe,je)}else{var Rn=p(oe),_n=Rn==ut||"[object GeneratorFunction]"==Rn;if(P(oe))return l(oe,sn);if(Rn==ft||Rn==et||_n&&!zn){if(je=En||_n?{}:L(oe),!sn)return En?h(oe,m(je,oe)):c(oe,_(je,oe))}else{if(!Ve[Rn])return zn?oe:{};je=A(oe,Rn,sn)}}an||(an=new u);var Yn=an.get(oe);if(Yn)return Yn;an.set(oe,je),z(oe)?oe.forEach(function(Xn){je.add(Mn(Xn,fn,Wn,Xn,oe,an))}):R(oe)&&oe.forEach(function(Xn,$n){je.set($n,Mn(Xn,fn,Wn,$n,oe,an))});var Me=ci?void 0:(Be?En?f:g:En?tt:H)(oe);return x(Me||oe,function(Xn,$n){Me&&(Xn=oe[$n=Xn]),v(je,$n,Mn(Xn,fn,Wn,$n,oe,an))}),je}},78858:(w,k,o)=>{var u=o(25940),x=Object.create,v=function(){function _(){}return function(m){if(!u(m))return{};if(x)return x(m);_.prototype=m;var l=new _;return _.prototype=void 0,l}}();w.exports=v},43132:(w,k,o)=>{var u=o(45184),v=o(16539)(u);w.exports=v},67308:(w,k,o)=>{var u=o(44129);w.exports=function x(v,_,m){for(var l=-1,t=v.length;++l<t;){var c=v[l],h=_(c);if(null!=h&&(void 0===g?h==h&&!u(h):m(h,g)))var g=h,f=c}return f}},33609:(w,k,o)=>{var u=o(43132);w.exports=function x(v,_){var m=[];return u(v,function(l,t,c){_(l,t,c)&&m.push(l)}),m}},65317:w=>{w.exports=function k(o,u,x,v){for(var _=o.length,m=x+(v?1:-1);v?m--:++m<_;)if(u(o[m],m,o))return m;return-1}},50686:(w,k,o)=>{var u=o(85059),x=o(75039);w.exports=function v(_,m,l,t,c){var h=-1,g=_.length;for(l||(l=x),c||(c=[]);++h<g;){var f=_[h];m>0&&l(f)?m>1?v(f,m-1,l,t,c):u(c,f):t||(c[c.length]=f)}return c}},30755:(w,k,o)=>{var x=o(40456)();w.exports=x},45184:(w,k,o)=>{var u=o(30755),x=o(118);w.exports=function v(_,m){return _&&u(_,m,x)}},15456:(w,k,o)=>{var u=o(65456),x=o(68533);w.exports=function v(_,m){for(var l=0,t=(m=u(m,_)).length;null!=_&&l<t;)_=_[x(m[l++])];return l&&l==t?_:void 0}},38247:(w,k,o)=>{var u=o(85059),x=o(21503);w.exports=function v(_,m,l){var t=m(_);return x(_)?t:u(t,l(_))}},93337:(w,k,o)=>{var u=o(60443),x=o(21318),v=o(92902),l=u?u.toStringTag:void 0;w.exports=function t(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":l&&l in Object(c)?x(c):v(c)}},31100:w=>{w.exports=function k(o,u){return o>u}},84781:w=>{var o=Object.prototype.hasOwnProperty;w.exports=function u(x,v){return null!=x&&o.call(x,v)}},69989:w=>{w.exports=function k(o,u){return null!=o&&u in Object(o)}},14164:(w,k,o)=>{var u=o(65317),x=o(70968),v=o(24977);w.exports=function _(m,l,t){return l==l?v(m,l,t):u(m,x,t)}},60186:(w,k,o)=>{var u=o(93337),x=o(72671);w.exports=function _(m){return x(m)&&"[object Arguments]"==u(m)}},85740:(w,k,o)=>{var u=o(58325),x=o(72671);w.exports=function v(_,m,l,t,c){return _===m||(null==_||null==m||!x(_)&&!x(m)?_!=_&&m!=m:u(_,m,l,t,v,c))}},58325:(w,k,o)=>{var u=o(2858),x=o(63914),v=o(78583),_=o(32286),m=o(28794),l=o(21503),t=o(80891),c=o(48159),g="[object Arguments]",f="[object Array]",p="[object Object]",A=Object.prototype.hasOwnProperty;w.exports=function L(N,P,R,Z,z,H){var tt=l(N),rt=l(P),ot=tt?f:m(N),J=rt?f:m(P),et=(ot=ot==g?p:ot)==p,q=(J=J==g?p:J)==p,at=ot==J;if(at&&t(N)){if(!t(P))return!1;tt=!0,et=!1}if(at&&!et)return H||(H=new u),tt||c(N)?x(N,P,R,Z,z,H):v(N,P,ot,R,Z,z,H);if(!(1&R)){var Y=et&&A.call(N,"__wrapped__"),K=q&&A.call(P,"__wrapped__");if(Y||K){var ut=Y?N.value():N,it=K?P.value():P;return H||(H=new u),z(ut,it,R,Z,H)}}return!!at&&(H||(H=new u),_(N,P,R,Z,z,H))}},97021:(w,k,o)=>{var u=o(28794),x=o(72671);w.exports=function _(m){return x(m)&&"[object Map]"==u(m)}},40431:(w,k,o)=>{var u=o(2858),x=o(85740);w.exports=function m(l,t,c,h){var g=c.length,f=g,p=!h;if(null==l)return!f;for(l=Object(l);g--;){var C=c[g];if(p&&C[2]?C[1]!==l[C[0]]:!(C[0]in l))return!1}for(;++g<f;){var A=(C=c[g])[0],L=l[A],N=C[1];if(p&&C[2]){if(void 0===L&&!(A in l))return!1}else{var P=new u;if(h)var R=h(L,N,A,l,t,P);if(!(void 0===R?x(N,L,3,h,P):R))return!1}}return!0}},70968:w=>{w.exports=function k(o){return o!=o}},37304:(w,k,o)=>{var u=o(75946),x=o(91943),v=o(25940),_=o(52827),l=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");w.exports=function p(C){return!(!v(C)||x(C))&&(u(C)?f:l).test(_(C))}},771:(w,k,o)=>{var u=o(28794),x=o(72671);w.exports=function _(m){return x(m)&&"[object Set]"==u(m)}},1083:(w,k,o)=>{var u=o(93337),x=o(96231),v=o(72671),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1,w.exports=function Y(K){return v(K)&&x(K.length)&&!!at[u(K)]}},96517:(w,k,o)=>{var u=o(98133),x=o(9458),v=o(32608),_=o(21503),m=o(87495);w.exports=function l(t){return"function"==typeof t?t:null==t?v:"object"==typeof t?_(t)?x(t[0],t[1]):u(t):m(t)}},81172:(w,k,o)=>{var u=o(45488),x=o(85491),_=Object.prototype.hasOwnProperty;w.exports=function m(l){if(!u(l))return x(l);var t=[];for(var c in Object(l))_.call(l,c)&&"constructor"!=c&&t.push(c);return t}},92809:(w,k,o)=>{var u=o(25940),x=o(45488),v=o(32158),m=Object.prototype.hasOwnProperty;w.exports=function l(t){if(!u(t))return v(t);var c=x(t),h=[];for(var g in t)"constructor"==g&&(c||!m.call(t,g))||h.push(g);return h}},99069:w=>{w.exports=function k(o,u){return o<u}},92046:(w,k,o)=>{var u=o(43132),x=o(56507);w.exports=function v(_,m){var l=-1,t=x(_)?Array(_.length):[];return u(_,function(c,h,g){t[++l]=m(c,h,g)}),t}},98133:(w,k,o)=>{var u=o(40431),x=o(22379),v=o(642);w.exports=function _(m){var l=x(m);return 1==l.length&&l[0][2]?v(l[0][0],l[0][1]):function(t){return t===m||u(t,m,l)}}},9458:(w,k,o)=>{var u=o(85740),x=o(8817),v=o(11172),_=o(45352),m=o(22442),l=o(642),t=o(68533);w.exports=function g(f,p){return _(f)&&m(p)?l(t(f),p):function(C){var A=x(C,f);return void 0===A&&A===p?v(C,f):u(p,A,3)}}},73842:(w,k,o)=>{var u=o(2858),x=o(49276),v=o(30755),_=o(33675),m=o(25940),l=o(16555),t=o(99351);w.exports=function c(h,g,f,p,C){h!==g&&v(g,function(A,L){if(C||(C=new u),m(A))_(h,g,L,f,c,p,C);else{var N=p?p(t(h,L),A,L+"",h,g,C):void 0;void 0===N&&(N=A),x(h,L,N)}},l)}},33675:(w,k,o)=>{var u=o(49276),x=o(19292),v=o(65208),_=o(99454),m=o(4264),l=o(77151),t=o(21503),c=o(92377),h=o(80891),g=o(75946),f=o(25940),p=o(97614),C=o(48159),A=o(99351),L=o(8067);w.exports=function N(P,R,Z,z,H,tt,rt){var ot=A(P,Z),J=A(R,Z),et=rt.get(J);if(et)u(P,Z,et);else{var q=tt?tt(ot,J,Z+"",P,R,rt):void 0,at=void 0===q;if(at){var Y=t(J),K=!Y&&h(J),ut=!Y&&!K&&C(J);q=J,Y||K||ut?t(ot)?q=ot:c(ot)?q=_(ot):K?(at=!1,q=x(J,!0)):ut?(at=!1,q=v(J,!0)):q=[]:p(J)||l(J)?(q=ot,l(ot)?q=L(ot):(!f(ot)||g(ot))&&(q=m(J))):at=!1}at&&(rt.set(J,q),H(q,J,z,tt,rt),rt.delete(J)),u(P,Z,q)}}},6119:(w,k,o)=>{var u=o(84633),x=o(15456),v=o(96517),_=o(92046),m=o(42061),l=o(85647),t=o(41215),c=o(32608),h=o(21503);w.exports=function g(f,p,C){p=p.length?u(p,function(N){return h(N)?function(P){return x(P,1===N.length?N[0]:N)}:N}):[c];var A=-1;p=u(p,l(v));var L=_(f,function(N,P,R){return{criteria:u(p,function(z){return z(N)}),index:++A,value:N}});return m(L,function(N,P){return t(N,P,C)})}},83021:(w,k,o)=>{var u=o(95495),x=o(11172);w.exports=function v(_,m){return u(_,m,function(l,t){return x(_,t)})}},95495:(w,k,o)=>{var u=o(15456),x=o(55963),v=o(65456);w.exports=function _(m,l,t){for(var c=-1,h=l.length,g={};++c<h;){var f=l[c],p=u(m,f);t(p,f)&&x(g,v(f,m),p)}return g}},11847:w=>{w.exports=function k(o){return function(u){return null==u?void 0:u[o]}}},39222:(w,k,o)=>{var u=o(15456);w.exports=function x(v){return function(_){return u(_,v)}}},16307:w=>{var k=Math.ceil,o=Math.max;w.exports=function u(x,v,_,m){for(var l=-1,t=o(k((v-x)/(_||1)),0),c=Array(t);t--;)c[m?t:++l]=x,x+=_;return c}},13570:w=>{w.exports=function k(o,u,x,v,_){return _(o,function(m,l,t){x=v?(v=!1,m):u(x,m,l,t)}),x}},23269:(w,k,o)=>{var u=o(32608),x=o(53983),v=o(72185);w.exports=function _(m,l){return v(x(m,l,u),m+"")}},55963:(w,k,o)=>{var u=o(89719),x=o(65456),v=o(58442),_=o(25940),m=o(68533);w.exports=function l(t,c,h,g){if(!_(t))return t;for(var f=-1,p=(c=x(c,t)).length,C=p-1,A=t;null!=A&&++f<p;){var L=m(c[f]),N=h;if("__proto__"===L||"constructor"===L||"prototype"===L)return t;if(f!=C){var P=A[L];void 0===(N=g?g(P,L,A):void 0)&&(N=_(P)?P:v(c[f+1])?[]:{})}u(A,L,N),A=A[L]}return t}},69510:(w,k,o)=>{var u=o(76684),x=o(56713),v=o(32608);w.exports=x?function(m,l){return x(m,"toString",{configurable:!0,enumerable:!1,value:u(l),writable:!0})}:v},42061:w=>{w.exports=function k(o,u){var x=o.length;for(o.sort(u);x--;)o[x]=o[x].value;return o}},85334:w=>{w.exports=function k(o,u){for(var x=-1,v=Array(o);++x<o;)v[x]=u(x);return v}},93935:(w,k,o)=>{var u=o(60443),x=o(84633),v=o(21503),_=o(44129),l=u?u.prototype:void 0,t=l?l.toString:void 0;w.exports=function c(h){if("string"==typeof h)return h;if(v(h))return x(h,c)+"";if(_(h))return t?t.call(h):"";var g=h+"";return"0"==g&&1/h==-1/0?"-0":g}},83348:(w,k,o)=>{var u=o(42760),x=/^\s+/;w.exports=function v(_){return _&&_.slice(0,u(_)+1).replace(x,"")}},85647:w=>{w.exports=function k(o){return function(u){return o(u)}}},80707:(w,k,o)=>{var u=o(58849),x=o(61253),v=o(37609),_=o(25972),m=o(14575),l=o(24174);w.exports=function c(h,g,f){var p=-1,C=x,A=h.length,L=!0,N=[],P=N;if(f)L=!1,C=v;else if(A>=200){var R=g?null:m(h);if(R)return l(R);L=!1,C=_,P=new u}else P=g?[]:N;t:for(;++p<A;){var Z=h[p],z=g?g(Z):Z;if(Z=f||0!==Z?Z:0,L&&z==z){for(var H=P.length;H--;)if(P[H]===z)continue t;g&&P.push(z),N.push(Z)}else C(P,z,f)||(P!==N&&P.push(z),N.push(Z))}return N}},19179:(w,k,o)=>{var u=o(84633);w.exports=function x(v,_){return u(_,function(m){return v[m]})}},38645:w=>{w.exports=function k(o,u,x){for(var v=-1,_=o.length,m=u.length,l={};++v<_;)x(l,o[v],v<m?u[v]:void 0);return l}},25972:w=>{w.exports=function k(o,u){return o.has(u)}},21481:(w,k,o)=>{var u=o(32608);w.exports=function x(v){return"function"==typeof v?v:u}},65456:(w,k,o)=>{var u=o(21503),x=o(45352),v=o(32855),_=o(73943);w.exports=function m(l,t){return u(l)?l:x(l,t)?[l]:v(_(l))}},43362:(w,k,o)=>{var u=o(73457);w.exports=function x(v){var _=new v.constructor(v.byteLength);return new u(_).set(new u(v)),_}},19292:(w,k,o)=>{w=o.nmd(w);var u=o(12119),x=k&&!k.nodeType&&k,v=x&&w&&!w.nodeType&&w,m=v&&v.exports===x?u.Buffer:void 0,l=m?m.allocUnsafe:void 0;w.exports=function t(c,h){if(h)return c.slice();var g=c.length,f=l?l(g):new c.constructor(g);return c.copy(f),f}},17e3:(w,k,o)=>{var u=o(43362);w.exports=function x(v,_){var m=_?u(v.buffer):v.buffer;return new v.constructor(m,v.byteOffset,v.byteLength)}},74098:w=>{var k=/\w*$/;w.exports=function o(u){var x=new u.constructor(u.source,k.exec(u));return x.lastIndex=u.lastIndex,x}},62533:(w,k,o)=>{var u=o(60443),x=u?u.prototype:void 0,v=x?x.valueOf:void 0;w.exports=function _(m){return v?Object(v.call(m)):{}}},65208:(w,k,o)=>{var u=o(43362);w.exports=function x(v,_){var m=_?u(v.buffer):v.buffer;return new v.constructor(m,v.byteOffset,v.length)}},13443:(w,k,o)=>{var u=o(44129);w.exports=function x(v,_){if(v!==_){var m=void 0!==v,l=null===v,t=v==v,c=u(v),h=void 0!==_,g=null===_,f=_==_,p=u(_);if(!g&&!p&&!c&&v>_||c&&h&&f&&!g&&!p||l&&h&&f||!m&&f||!t)return 1;if(!l&&!c&&!p&&v<_||p&&m&&t&&!l&&!c||g&&m&&t||!h&&t||!f)return-1}return 0}},41215:(w,k,o)=>{var u=o(13443);w.exports=function x(v,_,m){for(var l=-1,t=v.criteria,c=_.criteria,h=t.length,g=m.length;++l<h;){var f=u(t[l],c[l]);if(f)return l>=g?f:f*("desc"==m[l]?-1:1)}return v.index-_.index}},99454:w=>{w.exports=function k(o,u){var x=-1,v=o.length;for(u||(u=Array(v));++x<v;)u[x]=o[x];return u}},31989:(w,k,o)=>{var u=o(89719),x=o(85683);w.exports=function v(_,m,l,t){var c=!l;l||(l={});for(var h=-1,g=m.length;++h<g;){var f=m[h],p=t?t(l[f],_[f],f,l,_):void 0;void 0===p&&(p=_[f]),c?x(l,f,p):u(l,f,p)}return l}},84444:(w,k,o)=>{var u=o(31989),x=o(39383);w.exports=function v(_,m){return u(_,x(_),m)}},59905:(w,k,o)=>{var u=o(31989),x=o(53051);w.exports=function v(_,m){return u(_,x(_),m)}},24610:(w,k,o)=>{var u=o(12119);w.exports=u["__core-js_shared__"]},84944:(w,k,o)=>{var u=o(23269),x=o(93342);w.exports=function v(_){return u(function(m,l){var t=-1,c=l.length,h=c>1?l[c-1]:void 0,g=c>2?l[2]:void 0;for(h=_.length>3&&"function"==typeof h?(c--,h):void 0,g&&x(l[0],l[1],g)&&(h=c<3?void 0:h,c=1),m=Object(m);++t<c;){var f=l[t];f&&_(m,f,t,h)}return m})}},16539:(w,k,o)=>{var u=o(56507);w.exports=function x(v,_){return function(m,l){if(null==m)return m;if(!u(m))return v(m,l);for(var t=m.length,c=_?t:-1,h=Object(m);(_?c--:++c<t)&&!1!==l(h[c],c,h););return m}}},40456:w=>{w.exports=function k(o){return function(u,x,v){for(var _=-1,m=Object(u),l=v(u),t=l.length;t--;){var c=l[o?t:++_];if(!1===x(m[c],c,m))break}return u}}},24653:(w,k,o)=>{var u=o(96517),x=o(56507),v=o(118);w.exports=function _(m){return function(l,t,c){var h=Object(l);if(!x(l)){var g=u(t,3);l=v(l),t=function(p){return g(h[p],p,h)}}var f=m(l,t,c);return f>-1?h[g?l[f]:f]:void 0}}},97509:(w,k,o)=>{var u=o(16307),x=o(93342),v=o(12232);w.exports=function _(m){return function(l,t,c){return c&&"number"!=typeof c&&x(l,t,c)&&(t=c=void 0),l=v(l),void 0===t?(t=l,l=0):t=v(t),c=void 0===c?l<t?1:-1:v(c),u(l,t,c,m)}}},14575:(w,k,o)=>{var u=o(46323),x=o(12552),v=o(24174),m=u&&1/v(new u([,-0]))[1]==1/0?function(l){return new u(l)}:x;w.exports=m},56713:(w,k,o)=>{var u=o(53436),x=function(){try{var v=u(Object,"defineProperty");return v({},"",{}),v}catch(_){}}();w.exports=x},63914:(w,k,o)=>{var u=o(58849),x=o(79503),v=o(25972);w.exports=function l(t,c,h,g,f,p){var C=1&h,A=t.length,L=c.length;if(A!=L&&!(C&&L>A))return!1;var N=p.get(t),P=p.get(c);if(N&&P)return N==c&&P==t;var R=-1,Z=!0,z=2&h?new u:void 0;for(p.set(t,c),p.set(c,t);++R<A;){var H=t[R],tt=c[R];if(g)var rt=C?g(tt,H,R,c,t,p):g(H,tt,R,t,c,p);if(void 0!==rt){if(rt)continue;Z=!1;break}if(z){if(!x(c,function(ot,J){if(!v(z,J)&&(H===ot||f(H,ot,h,g,p)))return z.push(J)})){Z=!1;break}}else if(H!==tt&&!f(H,tt,h,g,p)){Z=!1;break}}return p.delete(t),p.delete(c),Z}},78583:(w,k,o)=>{var u=o(60443),x=o(73457),v=o(20217),_=o(63914),m=o(83205),l=o(24174),z=u?u.prototype:void 0,H=z?z.valueOf:void 0;w.exports=function tt(rt,ot,J,et,q,at,Y){switch(J){case"[object DataView]":if(rt.byteLength!=ot.byteLength||rt.byteOffset!=ot.byteOffset)return!1;rt=rt.buffer,ot=ot.buffer;case"[object ArrayBuffer]":return!(rt.byteLength!=ot.byteLength||!at(new x(rt),new x(ot)));case"[object Boolean]":case"[object Date]":case"[object Number]":return v(+rt,+ot);case"[object Error]":return rt.name==ot.name&&rt.message==ot.message;case"[object RegExp]":case"[object String]":return rt==ot+"";case"[object Map]":var K=m;case"[object Set]":if(K||(K=l),rt.size!=ot.size&&!(1&et))return!1;var it=Y.get(rt);if(it)return it==ot;et|=2,Y.set(rt,ot);var G=_(K(rt),K(ot),et,q,at,Y);return Y.delete(rt),G;case"[object Symbol]":if(H)return H.call(rt)==H.call(ot)}return!1}},32286:(w,k,o)=>{var u=o(47597),_=Object.prototype.hasOwnProperty;w.exports=function m(l,t,c,h,g,f){var p=1&c,C=u(l),A=C.length;if(A!=u(t).length&&!p)return!1;for(var P=A;P--;){var R=C[P];if(!(p?R in t:_.call(t,R)))return!1}var Z=f.get(l),z=f.get(t);if(Z&&z)return Z==t&&z==l;var H=!0;f.set(l,t),f.set(t,l);for(var tt=p;++P<A;){var rt=l[R=C[P]],ot=t[R];if(h)var J=p?h(ot,rt,R,t,l,f):h(rt,ot,R,l,t,f);if(!(void 0===J?rt===ot||g(rt,ot,c,h,f):J)){H=!1;break}tt||(tt="constructor"==R)}if(H&&!tt){var et=l.constructor,q=t.constructor;et!=q&&"constructor"in l&&"constructor"in t&&!("function"==typeof et&&et instanceof et&&"function"==typeof q&&q instanceof q)&&(H=!1)}return f.delete(l),f.delete(t),H}},3975:(w,k,o)=>{var u=o(22274),x=o(53983),v=o(72185);w.exports=function _(m){return v(x(m,void 0,u),m+"")}},79122:w=>{var k="object"==typeof global&&global&&global.Object===Object&&global;w.exports=k},47597:(w,k,o)=>{var u=o(38247),x=o(39383),v=o(118);w.exports=function _(m){return u(m,v,x)}},6967:(w,k,o)=>{var u=o(38247),x=o(53051),v=o(16555);w.exports=function _(m){return u(m,v,x)}},54537:(w,k,o)=>{var u=o(23819);w.exports=function x(v,_){var m=v.__data__;return u(_)?m["string"==typeof _?"string":"hash"]:m.map}},22379:(w,k,o)=>{var u=o(22442),x=o(118);w.exports=function v(_){for(var m=x(_),l=m.length;l--;){var t=m[l],c=_[t];m[l]=[t,c,u(c)]}return m}},53436:(w,k,o)=>{var u=o(37304),x=o(51990);w.exports=function v(_,m){var l=x(_,m);return u(l)?l:void 0}},29519:(w,k,o)=>{var x=o(69385)(Object.getPrototypeOf,Object);w.exports=x},21318:(w,k,o)=>{var u=o(60443),x=Object.prototype,v=x.hasOwnProperty,_=x.toString,m=u?u.toStringTag:void 0;w.exports=function l(t){var c=v.call(t,m),h=t[m];try{t[m]=void 0;var g=!0}catch(p){}var f=_.call(t);return g&&(c?t[m]=h:delete t[m]),f}},39383:(w,k,o)=>{var u=o(69779),x=o(49975),_=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols;w.exports=m?function(t){return null==t?[]:(t=Object(t),u(m(t),function(c){return _.call(t,c)}))}:x},53051:(w,k,o)=>{var u=o(85059),x=o(29519),v=o(39383),_=o(49975);w.exports=Object.getOwnPropertySymbols?function(t){for(var c=[];t;)u(c,v(t)),t=x(t);return c}:_},28794:(w,k,o)=>{var u=o(37244),x=o(51501),v=o(44267),_=o(46323),m=o(24243),l=o(93337),t=o(52827),c="[object Map]",g="[object Promise]",f="[object Set]",p="[object WeakMap]",C="[object DataView]",A=t(u),L=t(x),N=t(v),P=t(_),R=t(m),Z=l;(u&&Z(new u(new ArrayBuffer(1)))!=C||x&&Z(new x)!=c||v&&Z(v.resolve())!=g||_&&Z(new _)!=f||m&&Z(new m)!=p)&&(Z=function(z){var H=l(z),tt="[object Object]"==H?z.constructor:void 0,rt=tt?t(tt):"";if(rt)switch(rt){case A:return C;case L:return c;case N:return g;case P:return f;case R:return p}return H}),w.exports=Z},51990:w=>{w.exports=function k(o,u){return null==o?void 0:o[u]}},47283:(w,k,o)=>{var u=o(65456),x=o(77151),v=o(21503),_=o(58442),m=o(96231),l=o(68533);w.exports=function t(c,h,g){for(var f=-1,p=(h=u(h,c)).length,C=!1;++f<p;){var A=l(h[f]);if(!(C=null!=c&&g(c,A)))break;c=c[A]}return C||++f!=p?C:!!(p=null==c?0:c.length)&&m(p)&&_(A,p)&&(v(c)||x(c))}},77609:w=>{var l=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");w.exports=function t(c){return l.test(c)}},64312:(w,k,o)=>{var u=o(60862);w.exports=function x(){this.__data__=u?u(null):{},this.size=0}},46421:w=>{w.exports=function k(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}},15764:(w,k,o)=>{var u=o(60862),_=Object.prototype.hasOwnProperty;w.exports=function m(l){var t=this.__data__;if(u){var c=t[l];return"__lodash_hash_undefined__"===c?void 0:c}return _.call(t,l)?t[l]:void 0}},18685:(w,k,o)=>{var u=o(60862),v=Object.prototype.hasOwnProperty;w.exports=function _(m){var l=this.__data__;return u?void 0!==l[m]:v.call(l,m)}},26676:(w,k,o)=>{var u=o(60862);w.exports=function v(_,m){var l=this.__data__;return this.size+=this.has(_)?0:1,l[_]=u&&void 0===m?"__lodash_hash_undefined__":m,this}},76782:w=>{var o=Object.prototype.hasOwnProperty;w.exports=function u(x){var v=x.length,_=new x.constructor(v);return v&&"string"==typeof x[0]&&o.call(x,"index")&&(_.index=x.index,_.input=x.input),_}},37878:(w,k,o)=>{var u=o(43362),x=o(17e3),v=o(74098),_=o(62533),m=o(65208);w.exports=function J(et,q,at){var Y=et.constructor;switch(q){case"[object ArrayBuffer]":return u(et);case"[object Boolean]":case"[object Date]":return new Y(+et);case"[object DataView]":return x(et,at);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return m(et,at);case"[object Map]":case"[object Set]":return new Y;case"[object Number]":case"[object String]":return new Y(et);case"[object RegExp]":return v(et);case"[object Symbol]":return _(et)}}},4264:(w,k,o)=>{var u=o(78858),x=o(29519),v=o(45488);w.exports=function _(m){return"function"!=typeof m.constructor||v(m)?{}:u(x(m))}},75039:(w,k,o)=>{var u=o(60443),x=o(77151),v=o(21503),_=u?u.isConcatSpreadable:void 0;w.exports=function m(l){return v(l)||x(l)||!!(_&&l&&l[_])}},58442:w=>{var o=/^(?:0|[1-9]\d*)$/;w.exports=function u(x,v){var _=typeof x;return!!(v=null==v?9007199254740991:v)&&("number"==_||"symbol"!=_&&o.test(x))&&x>-1&&x%1==0&&x<v}},93342:(w,k,o)=>{var u=o(20217),x=o(56507),v=o(58442),_=o(25940);w.exports=function m(l,t,c){if(!_(c))return!1;var h=typeof t;return!!("number"==h?x(c)&&v(t,c.length):"string"==h&&t in c)&&u(c[t],l)}},45352:(w,k,o)=>{var u=o(21503),x=o(44129),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/;w.exports=function m(l,t){if(u(l))return!1;var c=typeof l;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=l&&!x(l))||_.test(l)||!v.test(l)||null!=t&&l in Object(t)}},23819:w=>{w.exports=function k(o){var u=typeof o;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==o:null===o}},91943:(w,k,o)=>{var _,u=o(24610),x=(_=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"";w.exports=function v(_){return!!x&&x in _}},45488:w=>{var k=Object.prototype;w.exports=function o(u){var x=u&&u.constructor;return u===("function"==typeof x&&x.prototype||k)}},22442:(w,k,o)=>{var u=o(25940);w.exports=function x(v){return v==v&&!u(v)}},41840:w=>{w.exports=function k(){this.__data__=[],this.size=0}},34378:(w,k,o)=>{var u=o(43503),v=Array.prototype.splice;w.exports=function _(m){var l=this.__data__,t=u(l,m);return!(t<0||(t==l.length-1?l.pop():v.call(l,t,1),--this.size,0))}},54981:(w,k,o)=>{var u=o(43503);w.exports=function x(v){var _=this.__data__,m=u(_,v);return m<0?void 0:_[m][1]}},67343:(w,k,o)=>{var u=o(43503);w.exports=function x(v){return u(this.__data__,v)>-1}},98895:(w,k,o)=>{var u=o(43503);w.exports=function x(v,_){var m=this.__data__,l=u(m,v);return l<0?(++this.size,m.push([v,_])):m[l][1]=_,this}},10638:(w,k,o)=>{var u=o(54994),x=o(9215),v=o(51501);w.exports=function _(){this.size=0,this.__data__={hash:new u,map:new(v||x),string:new u}}},11184:(w,k,o)=>{var u=o(54537);w.exports=function x(v){var _=u(this,v).delete(v);return this.size-=_?1:0,_}},70866:(w,k,o)=>{var u=o(54537);w.exports=function x(v){return u(this,v).get(v)}},43771:(w,k,o)=>{var u=o(54537);w.exports=function x(v){return u(this,v).has(v)}},51772:(w,k,o)=>{var u=o(54537);w.exports=function x(v,_){var m=u(this,v),l=m.size;return m.set(v,_),this.size+=m.size==l?0:1,this}},83205:w=>{w.exports=function k(o){var u=-1,x=Array(o.size);return o.forEach(function(v,_){x[++u]=[_,v]}),x}},642:w=>{w.exports=function k(o,u){return function(x){return null!=x&&x[o]===u&&(void 0!==u||o in Object(x))}}},90719:(w,k,o)=>{var u=o(30535);w.exports=function v(_){var m=u(_,function(t){return 500===l.size&&l.clear(),t}),l=m.cache;return m}},60862:(w,k,o)=>{var x=o(53436)(Object,"create");w.exports=x},85491:(w,k,o)=>{var x=o(69385)(Object.keys,Object);w.exports=x},32158:w=>{w.exports=function k(o){var u=[];if(null!=o)for(var x in Object(o))u.push(x);return u}},73597:(w,k,o)=>{w=o.nmd(w);var u=o(79122),x=k&&!k.nodeType&&k,v=x&&w&&!w.nodeType&&w,m=v&&v.exports===x&&u.process,l=function(){try{return v&&v.require&&v.require("util").types||m&&m.binding&&m.binding("util")}catch(c){}}();w.exports=l},92902:w=>{var o=Object.prototype.toString;w.exports=function u(x){return o.call(x)}},69385:w=>{w.exports=function k(o,u){return function(x){return o(u(x))}}},53983:(w,k,o)=>{var u=o(26999),x=Math.max;w.exports=function v(_,m,l){return m=x(void 0===m?_.length-1:m,0),function(){for(var t=arguments,c=-1,h=x(t.length-m,0),g=Array(h);++c<h;)g[c]=t[m+c];c=-1;for(var f=Array(m+1);++c<m;)f[c]=t[c];return f[m]=l(g),u(_,this,f)}}},12119:(w,k,o)=>{var u=o(79122),x="object"==typeof self&&self&&self.Object===Object&&self,v=u||x||Function("return this")();w.exports=v},99351:w=>{w.exports=function k(o,u){if(("constructor"!==u||"function"!=typeof o[u])&&"__proto__"!=u)return o[u]}},4600:w=>{w.exports=function o(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this}},31387:w=>{w.exports=function k(o){return this.__data__.has(o)}},24174:w=>{w.exports=function k(o){var u=-1,x=Array(o.size);return o.forEach(function(v){x[++u]=v}),x}},72185:(w,k,o)=>{var u=o(69510),v=o(10029)(u);w.exports=v},10029:w=>{var u=Date.now;w.exports=function x(v){var _=0,m=0;return function(){var l=u(),t=16-(l-m);if(m=l,t>0){if(++_>=800)return arguments[0]}else _=0;return v.apply(void 0,arguments)}}},13720:(w,k,o)=>{var u=o(9215);w.exports=function x(){this.__data__=new u,this.size=0}},64410:w=>{w.exports=function k(o){var u=this.__data__,x=u.delete(o);return this.size=u.size,x}},45576:w=>{w.exports=function k(o){return this.__data__.get(o)}},22247:w=>{w.exports=function k(o){return this.__data__.has(o)}},41585:(w,k,o)=>{var u=o(9215),x=o(51501),v=o(99850);w.exports=function m(l,t){var c=this.__data__;if(c instanceof u){var h=c.__data__;if(!x||h.length<199)return h.push([l,t]),this.size=++c.size,this;c=this.__data__=new v(h)}return c.set(l,t),this.size=c.size,this}},24977:w=>{w.exports=function k(o,u,x){for(var v=x-1,_=o.length;++v<_;)if(o[v]===u)return v;return-1}},52315:(w,k,o)=>{var u=o(75481),x=o(77609),v=o(81149);w.exports=function _(m){return x(m)?v(m):u(m)}},32855:(w,k,o)=>{var u=o(90719),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,_=u(function(m){var l=[];return 46===m.charCodeAt(0)&&l.push(""),m.replace(x,function(t,c,h,g){l.push(h?g.replace(v,"$1"):c||t)}),l});w.exports=_},68533:(w,k,o)=>{var u=o(44129);w.exports=function v(_){if("string"==typeof _||u(_))return _;var m=_+"";return"0"==m&&1/_==-1/0?"-0":m}},52827:w=>{var o=Function.prototype.toString;w.exports=function u(x){if(null!=x){try{return o.call(x)}catch(v){}try{return x+""}catch(v){}}return""}},42760:w=>{var k=/\s/;w.exports=function o(u){for(var x=u.length;x--&&k.test(u.charAt(x)););return x}},81149:w=>{var k="\\ud800-\\udfff",m="["+k+"]",l="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",t="\\ud83c[\\udffb-\\udfff]",h="[^"+k+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",C="(?:"+l+"|"+t+")?",A="[\\ufe0e\\ufe0f]?",N=A+C+"(?:\\u200d(?:"+[h,g,f].join("|")+")"+A+C+")*",P="(?:"+[h+l+"?",l,g,f,m].join("|")+")",R=RegExp(t+"(?="+t+")|"+P+N,"g");w.exports=function Z(z){for(var H=R.lastIndex=0;R.test(z);)++H;return H}},11094:(w,k,o)=>{var u=o(44462);w.exports=function v(_){return u(_,4)}},90733:(w,k,o)=>{var u=o(44462);w.exports=function _(m){return u(m,5)}},76684:w=>{w.exports=function k(o){return function(){return o}}},28800:(w,k,o)=>{var u=o(23269),x=o(20217),v=o(93342),_=o(16555),m=Object.prototype,l=m.hasOwnProperty,t=u(function(c,h){c=Object(c);var g=-1,f=h.length,p=f>2?h[2]:void 0;for(p&&v(h[0],h[1],p)&&(f=1);++g<f;)for(var C=h[g],A=_(C),L=-1,N=A.length;++L<N;){var P=A[L],R=c[P];(void 0===R||x(R,m[P])&&!l.call(c,P))&&(c[P]=C[P])}return c});w.exports=t},35474:(w,k,o)=>{w.exports=o(89851)},20217:w=>{w.exports=function k(o,u){return o===u||o!=o&&u!=u}},35281:(w,k,o)=>{var u=o(69779),x=o(33609),v=o(96517),_=o(21503);w.exports=function m(l,t){return(_(l)?u:x)(l,v(t,3))}},62516:(w,k,o)=>{var v=o(24653)(o(36397));w.exports=v},36397:(w,k,o)=>{var u=o(65317),x=o(96517),v=o(44401),_=Math.max;w.exports=function m(l,t,c){var h=null==l?0:l.length;if(!h)return-1;var g=null==c?0:v(c);return g<0&&(g=_(h+g,0)),u(l,x(t,3),g)}},22274:(w,k,o)=>{var u=o(50686);w.exports=function x(v){return null!=v&&v.length?u(v,1):[]}},89851:(w,k,o)=>{var u=o(96837),x=o(43132),v=o(21481),_=o(21503);w.exports=function m(l,t){return(_(l)?u:x)(l,v(t))}},41176:(w,k,o)=>{var u=o(30755),x=o(21481),v=o(16555);w.exports=function _(m,l){return null==m?m:u(m,x(l),v)}},8817:(w,k,o)=>{var u=o(15456);w.exports=function x(v,_,m){var l=null==v?void 0:u(v,_);return void 0===l?m:l}},54842:(w,k,o)=>{var u=o(84781),x=o(47283);w.exports=function v(_,m){return null!=_&&x(_,m,u)}},11172:(w,k,o)=>{var u=o(69989),x=o(47283);w.exports=function v(_,m){return null!=_&&x(_,m,u)}},32608:w=>{w.exports=function k(o){return o}},77151:(w,k,o)=>{var u=o(60186),x=o(72671),v=Object.prototype,_=v.hasOwnProperty,m=v.propertyIsEnumerable,l=u(function(){return arguments}())?u:function(t){return x(t)&&_.call(t,"callee")&&!m.call(t,"callee")};w.exports=l},21503:w=>{w.exports=Array.isArray},56507:(w,k,o)=>{var u=o(75946),x=o(96231);w.exports=function v(_){return null!=_&&x(_.length)&&!u(_)}},92377:(w,k,o)=>{var u=o(56507),x=o(72671);w.exports=function v(_){return x(_)&&u(_)}},80891:(w,k,o)=>{w=o.nmd(w);var u=o(12119),x=o(63580),v=k&&!k.nodeType&&k,_=v&&w&&!w.nodeType&&w,l=_&&_.exports===v?u.Buffer:void 0;w.exports=(l?l.isBuffer:void 0)||x},71973:(w,k,o)=>{var u=o(81172),x=o(28794),v=o(77151),_=o(21503),m=o(56507),l=o(80891),t=o(45488),c=o(48159),p=Object.prototype.hasOwnProperty;w.exports=function C(A){if(null==A)return!0;if(m(A)&&(_(A)||"string"==typeof A||"function"==typeof A.splice||l(A)||c(A)||v(A)))return!A.length;var L=x(A);if("[object Map]"==L||"[object Set]"==L)return!A.size;if(t(A))return!u(A).length;for(var N in A)if(p.call(A,N))return!1;return!0}},75946:(w,k,o)=>{var u=o(93337),x=o(25940);w.exports=function t(c){if(!x(c))return!1;var h=u(c);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h}},96231:w=>{w.exports=function o(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=9007199254740991}},13222:(w,k,o)=>{var u=o(97021),x=o(85647),v=o(73597),_=v&&v.isMap,m=_?x(_):u;w.exports=m},25940:w=>{w.exports=function k(o){var u=typeof o;return null!=o&&("object"==u||"function"==u)}},72671:w=>{w.exports=function k(o){return null!=o&&"object"==typeof o}},97614:(w,k,o)=>{var u=o(93337),x=o(29519),v=o(72671),t=Function.prototype.toString,c=Object.prototype.hasOwnProperty,h=t.call(Object);w.exports=function g(f){if(!v(f)||"[object Object]"!=u(f))return!1;var p=x(f);if(null===p)return!0;var C=c.call(p,"constructor")&&p.constructor;return"function"==typeof C&&C instanceof C&&t.call(C)==h}},90799:(w,k,o)=>{var u=o(771),x=o(85647),v=o(73597),_=v&&v.isSet,m=_?x(_):u;w.exports=m},30248:(w,k,o)=>{var u=o(93337),x=o(21503),v=o(72671);w.exports=function m(l){return"string"==typeof l||!x(l)&&v(l)&&"[object String]"==u(l)}},44129:(w,k,o)=>{var u=o(93337),x=o(72671);w.exports=function _(m){return"symbol"==typeof m||x(m)&&"[object Symbol]"==u(m)}},48159:(w,k,o)=>{var u=o(1083),x=o(85647),v=o(73597),_=v&&v.isTypedArray,m=_?x(_):u;w.exports=m},34235:w=>{w.exports=function k(o){return void 0===o}},118:(w,k,o)=>{var u=o(72271),x=o(81172),v=o(56507);w.exports=function _(m){return v(m)?u(m):x(m)}},16555:(w,k,o)=>{var u=o(72271),x=o(92809),v=o(56507);w.exports=function _(m){return v(m)?u(m,!0):x(m)}},25809:w=>{w.exports=function k(o){var u=null==o?0:o.length;return u?o[u-1]:void 0}},19984:(w,k,o)=>{var u=o(84633),x=o(96517),v=o(92046),_=o(21503);w.exports=function m(l,t){return(_(l)?u:v)(l,x(t,3))}},10203:(w,k,o)=>{var u=o(85683),x=o(45184),v=o(96517);w.exports=function _(m,l){var t={};return l=v(l,3),x(m,function(c,h,g){u(t,h,l(c,h,g))}),t}},18176:(w,k,o)=>{var u=o(67308),x=o(31100),v=o(32608);w.exports=function _(m){return m&&m.length?u(m,v,x):void 0}},30535:(w,k,o)=>{var u=o(99850);function v(_,m){if("function"!=typeof _||null!=m&&"function"!=typeof m)throw new TypeError("Expected a function");var l=function(){var t=arguments,c=m?m.apply(this,t):t[0],h=l.cache;if(h.has(c))return h.get(c);var g=_.apply(this,t);return l.cache=h.set(c,g)||h,g};return l.cache=new(v.Cache||u),l}v.Cache=u,w.exports=v},80567:(w,k,o)=>{var u=o(73842),v=o(84944)(function(_,m,l){u(_,m,l)});w.exports=v},29439:(w,k,o)=>{var u=o(67308),x=o(99069),v=o(32608);w.exports=function _(m){return m&&m.length?u(m,v,x):void 0}},29525:(w,k,o)=>{var u=o(67308),x=o(96517),v=o(99069);w.exports=function _(m,l){return m&&m.length?u(m,x(l,2),v):void 0}},12552:w=>{w.exports=function k(){}},31710:(w,k,o)=>{var u=o(12119);w.exports=function(){return u.Date.now()}},16372:(w,k,o)=>{var u=o(83021),v=o(3975)(function(_,m){return null==_?{}:u(_,m)});w.exports=v},87495:(w,k,o)=>{var u=o(11847),x=o(39222),v=o(45352),_=o(68533);w.exports=function m(l){return v(l)?u(_(l)):x(l)}},90361:(w,k,o)=>{var x=o(97509)();w.exports=x},81337:(w,k,o)=>{var u=o(8745),x=o(43132),v=o(96517),_=o(13570),m=o(21503);w.exports=function l(t,c,h){var g=m(t)?u:_,f=arguments.length<3;return g(t,v(c,4),h,f,x)}},55637:(w,k,o)=>{var u=o(81172),x=o(28794),v=o(56507),_=o(30248),m=o(52315);w.exports=function c(h){if(null==h)return 0;if(v(h))return _(h)?m(h):h.length;var g=x(h);return"[object Map]"==g||"[object Set]"==g?h.size:u(h).length}},12906:(w,k,o)=>{var u=o(50686),x=o(6119),v=o(23269),_=o(93342),m=v(function(l,t){if(null==l)return[];var c=t.length;return c>1&&_(l,t[0],t[1])?t=[]:c>2&&_(t[0],t[1],t[2])&&(t=[t[0]]),x(l,u(t,1),[])});w.exports=m},49975:w=>{w.exports=function k(){return[]}},63580:w=>{w.exports=function k(){return!1}},12232:(w,k,o)=>{var u=o(51467),x=1/0;w.exports=function _(m){return m?(m=u(m))===x||m===-x?17976931348623157e292*(m<0?-1:1):m==m?m:0:0===m?m:0}},44401:(w,k,o)=>{var u=o(12232);w.exports=function x(v){var _=u(v),m=_%1;return _==_?m?_-m:_:0}},51467:(w,k,o)=>{var u=o(83348),x=o(25940),v=o(44129),m=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,t=/^0o[0-7]+$/i,c=parseInt;w.exports=function h(g){if("number"==typeof g)return g;if(v(g))return NaN;if(x(g)){var f="function"==typeof g.valueOf?g.valueOf():g;g=x(f)?f+"":f}if("string"!=typeof g)return 0===g?g:+g;g=u(g);var p=l.test(g);return p||t.test(g)?c(g.slice(2),p?2:8):m.test(g)?NaN:+g}},8067:(w,k,o)=>{var u=o(31989),x=o(16555);w.exports=function v(_){return u(_,x(_))}},73943:(w,k,o)=>{var u=o(93935);w.exports=function x(v){return null==v?"":u(v)}},89416:(w,k,o)=>{var u=o(96837),x=o(78858),v=o(45184),_=o(96517),m=o(29519),l=o(21503),t=o(80891),c=o(75946),h=o(25940),g=o(48159);w.exports=function f(p,C,A){var L=l(p),N=L||t(p)||g(p);if(C=_(C,4),null==A){var P=p&&p.constructor;A=N?L?new P:[]:h(p)&&c(P)?x(m(p)):{}}return(N?u:v)(p,function(R,Z,z){return C(A,R,Z,z)}),A}},68921:(w,k,o)=>{var u=o(50686),x=o(23269),v=o(80707),_=o(92377),m=x(function(l){return v(u(l,1,_,!0))});w.exports=m},51541:(w,k,o)=>{var u=o(73943),x=0;w.exports=function v(_){var m=++x;return u(_)+m}},90377:(w,k,o)=>{var u=o(19179),x=o(118);w.exports=function v(_){return null==_?[]:u(_,x(_))}},21617:(w,k,o)=>{var u=o(89719),x=o(38645);w.exports=function v(_,m){return x(_||[],m||[],u)}},34315:(w,k,o)=>{"use strict";const u=Symbol.prototype.valueOf,x=o(52872);w.exports=function v(h,g){switch(x(h)){case"array":return h.slice();case"object":return Object.assign({},h);case"date":return new h.constructor(Number(h));case"map":return new Map(h);case"set":return new Set(h);case"buffer":return function t(h){const g=h.length,f=Buffer.allocUnsafe?Buffer.allocUnsafe(g):Buffer.from(g);return h.copy(f),f}(h);case"symbol":return function c(h){return u?Object(u.call(h)):{}}(h);case"arraybuffer":return function m(h){const g=new h.constructor(h.byteLength);return new Uint8Array(g).set(new Uint8Array(h)),g}(h);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function l(h,g){return new h.constructor(h.buffer,h.byteOffset,h.length)}(h);case"regexp":return function _(h){const g=void 0!==h.flags?h.flags:/\w+$/.exec(h)||void 0,f=new h.constructor(h.source,g);return f.lastIndex=h.lastIndex,f}(h);case"error":return Object.create(h);default:return h}}},67824:(w,k,o)=>{"use strict";function u(x){for(var v in x)k.hasOwnProperty(v)||(k[v]=x[v])}Object.defineProperty(k,"__esModule",{value:!0}),u(o(95085)),u(o(26243)),u(o(91786)),u(o(30225)),u(o(76767)),u(o(30345)),u(o(15675)),u(o(86461)),u(o(58802)),u(o(33900)),u(o(88866)),u(o(94655)),u(o(4068)),u(o(33858)),u(o(98237)),u(o(83292))},95085:function(w,k,o){"use strict";var m,u=this&&this.__extends||(m=function(l,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)h.hasOwnProperty(g)&&(c[g]=h[g])})(l,t)},function(l,t){function c(){this.constructor=l}m(l,t),l.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)});Object.defineProperty(k,"__esModule",{value:!0});var x=o(15675),v=function(m){function l(t){var c=m.call(this)||this,g=t;return g.trigger&&(c.trigger=g.trigger),g.kick&&(c.kick=g.kick),g.drag&&(c.drag=g.drag),g.on&&(c.on=g.on),c.dragstart=c.dragStart=x.Layout.dragStart,c.dragend=c.dragEnd=x.Layout.dragEnd,c}return u(l,m),l.prototype.trigger=function(t){},l.prototype.kick=function(){},l.prototype.drag=function(){},l.prototype.on=function(t,c){return this},l}(x.Layout);k.LayoutAdaptor=v,k.adaptor=function _(m){return new v(m)}},83292:(w,k,o)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var u=o(15675),x=o(76767);k.gridify=function v(l,t,c,h){l.cola.start(0,0,0,10,!1);var g=function _(l,t,c,h){l.forEach(function(f){f.routerNode={name:f.name,bounds:f.bounds.inflate(-c)}}),t.forEach(function(f){f.routerNode={bounds:f.bounds.inflate(-h),children:(void 0!==f.groups?f.groups.map(function(p){return l.length+p.id}):[]).concat(void 0!==f.leaves?f.leaves.map(function(p){return p.index}):[])}});var g=l.concat(t).map(function(f,p){return f.routerNode.id=p,f.routerNode});return new x.GridRouter(g,{getChildren:function(f){return f.children},getBounds:function(f){return f.bounds}},c-h)}(l.cola.nodes(),l.cola.groups(),c,h);return g.routeEdges(l.powerGraph.powerEdges,t,function(f){return f.source.routerNode.id},function(f){return f.target.routerNode.id})},k.powerGraphGridLayout=function m(l,t,c){var h;l.nodes.forEach(function(C,A){return C.index=A}),(new u.Layout).avoidOverlaps(!1).nodes(l.nodes).links(l.links).powerGraphGroups(function(C){(h=C).groups.forEach(function(A){return A.padding=c})});var g=l.nodes.length,f=[],p=l.nodes.slice(0);return p.forEach(function(C,A){return C.index=A}),h.groups.forEach(function(C){var A=C.index=C.id+g;p.push(C),void 0!==C.leaves&&C.leaves.forEach(function(L){return f.push({source:A,target:L.index})}),void 0!==C.groups&&C.groups.forEach(function(L){return f.push({source:A,target:L.id+g})})}),h.powerEdges.forEach(function(C){f.push({source:C.source.index,target:C.target.index})}),(new u.Layout).size(t).nodes(p).links(f).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new u.Layout).convergenceThreshold(.001).size(t).avoidOverlaps(!0).nodes(l.nodes).links(l.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(C){(h=C).groups.forEach(function(A){A.padding=c})}).start(50,0,100,0,!1),powerGraph:h}}},26243:(w,k,o)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var u=o(49346),x=o(22487);k.d3adaptor=function v(m){return!m||function _(m){return m.version&&null!==m.version.match(/^3\./)}(m)?new u.D3StyleLayoutAdaptor:new x.D3StyleLayoutAdaptor(m)}},49346:function(w,k,o){"use strict";var m,u=this&&this.__extends||(m=function(l,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)h.hasOwnProperty(g)&&(c[g]=h[g])})(l,t)},function(l,t){function c(){this.constructor=l}m(l,t),l.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)});Object.defineProperty(k,"__esModule",{value:!0});var x=o(15675),v=function(m){function l(){var t=m.call(this)||this;t.event=d3.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var c=t;return t.drag=function(){if(!g)var g=d3.behavior.drag().origin(x.Layout.dragOrigin).on("dragstart.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(f){x.Layout.drag(f,d3.event),c.resume()}).on("dragend.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return g;this.call(g)},t}return u(l,m),l.prototype.trigger=function(t){var c={type:x.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[c.type](c)},l.prototype.kick=function(){var t=this;d3.timer(function(){return m.prototype.tick.call(t)})},l.prototype.on=function(t,c){return this.event.on("string"==typeof t?t:x.EventType[t],c),this},l}(x.Layout);k.D3StyleLayoutAdaptor=v,k.d3adaptor=function _(){return new v}},22487:function(w,k,o){"use strict";var _,u=this&&this.__extends||(_=function(m,l){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,c){t.__proto__=c}||function(t,c){for(var h in c)c.hasOwnProperty(h)&&(t[h]=c[h])})(m,l)},function(m,l){function t(){this.constructor=m}_(m,l),m.prototype=null===l?Object.create(l):(t.prototype=l.prototype,new t)});Object.defineProperty(k,"__esModule",{value:!0});var x=o(15675),v=function(_){function m(l){var t=_.call(this)||this;t.d3Context=l,t.event=l.dispatch(x.EventType[x.EventType.start],x.EventType[x.EventType.tick],x.EventType[x.EventType.end]);var c=t;return t.drag=function(){if(!g)var g=l.drag().subject(x.Layout.dragOrigin).on("start.d3adaptor",x.Layout.dragStart).on("drag.d3adaptor",function(f){x.Layout.drag(f,l.event),c.resume()}).on("end.d3adaptor",x.Layout.dragEnd);if(!arguments.length)return g;arguments[0].call(g)},t}return u(m,_),m.prototype.trigger=function(l){var t={type:x.EventType[l.type],alpha:l.alpha,stress:l.stress};this.event.call(t.type,t)},m.prototype.kick=function(){var l=this,t=this.d3Context.timer(function(){return _.prototype.tick.call(l)&&t.stop()})},m.prototype.on=function(l,t){return this.event.on("string"==typeof l?l:x.EventType[l],t),this},m}(x.Layout);k.D3StyleLayoutAdaptor=v},91786:(w,k)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var o=function(){function v(){this.locks={}}return v.prototype.add=function(_,m){this.locks[_]=m},v.prototype.clear=function(){this.locks={}},v.prototype.isEmpty=function(){for(var _ in this.locks)return!1;return!0},v.prototype.apply=function(_){for(var m in this.locks)_(Number(m),this.locks[m])},v}();k.Locks=o;var u=function(){function v(_,m,l){void 0===l&&(l=null),this.D=m,this.G=l,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new x,this.project=null,this.x=_,this.k=_.length;var t=this.n=_[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new o,this.minD=Number.MAX_VALUE;for(var h,c=t;c--;)for(h=t;--h>c;){var g=m[c][h];g>0&&g<this.minD&&(this.minD=g)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),c=this.k;c--;){for(this.g[c]=new Array(t),this.H[c]=new Array(t),h=t;h--;)this.H[c][h]=new Array(t);this.Hd[c]=new Array(t),this.a[c]=new Array(t),this.b[c]=new Array(t),this.c[c]=new Array(t),this.d[c]=new Array(t),this.e[c]=new Array(t),this.ia[c]=new Array(t),this.ib[c]=new Array(t),this.xtmp[c]=new Array(t)}}return v.createSquareMatrix=function(_,m){for(var l=new Array(_),t=0;t<_;++t){l[t]=new Array(_);for(var c=0;c<_;++c)l[t][c]=m(t,c)}return l},v.prototype.offsetDir=function(){for(var _=this,m=new Array(this.k),l=0,t=0;t<this.k;++t){var c=m[t]=this.random.getNextBetween(.01,1)-.5;l+=c*c}return l=Math.sqrt(l),m.map(function(h){return h*(_.minD/l)})},v.prototype.computeDerivatives=function(_){var m=this,l=this.n;if(!(l<1)){for(var t,c=new Array(this.k),h=new Array(this.k),g=new Array(this.k),f=0,p=0;p<l;++p){for(t=0;t<this.k;++t)g[t]=this.g[t][p]=0;for(var C=0;C<l;++C)if(p!==C){for(var A=l;A--;){var L=0;for(t=0;t<this.k;++t){var N=c[t]=_[t][p]-_[t][C];L+=h[t]=N*N}if(L>1e-9)break;var P=this.offsetDir();for(t=0;t<this.k;++t)_[t][C]+=P[t]}var R=Math.sqrt(L),Z=this.D[p][C],z=null!=this.G?this.G[p][C]:1;if(z>1&&R>Z||!isFinite(Z)){for(t=0;t<this.k;++t)this.H[t][p][C]=0;continue}z>1&&(z=1);var H=Z*Z,tt=2*z*(R-Z)/(H*R),rt=R*R*R,ot=2*-z/(H*rt);for(isFinite(tt)||console.log(tt),t=0;t<this.k;++t)this.g[t][p]+=c[t]*tt,g[t]-=this.H[t][p][C]=ot*(rt+Z*(h[t]-L)+R*L)}for(t=0;t<this.k;++t)f=Math.max(f,this.H[t][p][p]=g[t])}var J=this.snapGridSize/2,et=this.snapGridSize,at=this.snapStrength/(J*J),Y=this.numGridSnapNodes;for(p=0;p<Y;++p)for(t=0;t<this.k;++t){var K=this.x[t][p],ut=K/et,it=ut%1,G=ut-it;-J<(N=Math.abs(it)<=.5?K-G*et:K>0?K-(G+1)*et:K-(G-1)*et)&&N<=J&&(this.scaleSnapByMaxH?(this.g[t][p]+=f*at*N,this.H[t][p][p]+=f*at):(this.g[t][p]+=at*N,this.H[t][p][p]+=at))}this.locks.isEmpty()||this.locks.apply(function(ft,It){for(t=0;t<m.k;++t)m.H[t][ft][ft]+=f,m.g[t][ft]-=f*(It[t]-_[t][ft])})}},v.dotProd=function(_,m){for(var l=0,t=_.length;t--;)l+=_[t]*m[t];return l},v.rightMultiply=function(_,m,l){for(var t=_.length;t--;)l[t]=v.dotProd(_[t],m)},v.prototype.computeStepSize=function(_){for(var m=0,l=0,t=0;t<this.k;++t)m+=v.dotProd(this.g[t],_[t]),v.rightMultiply(this.H[t],_[t],this.Hd[t]),l+=v.dotProd(_[t],this.Hd[t]);return 0!==l&&isFinite(l)?1*m/l:0},v.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var _=this.computeStepSize(this.g),m=0;m<this.k;++m)this.takeDescentStep(this.x[m],this.g[m],_);return this.computeStress()},v.copy=function(_,m){for(var l=_.length,t=m[0].length,c=0;c<l;++c)for(var h=0;h<t;++h)m[c][h]=_[c][h]},v.prototype.stepAndProject=function(_,m,l,t){v.copy(_,m),this.takeDescentStep(m[0],l[0],t),this.project&&this.project[0](_[0],_[1],m[0]),this.takeDescentStep(m[1],l[1],t),this.project&&this.project[1](m[0],_[1],m[1]);for(var c=2;c<this.k;c++)this.takeDescentStep(m[c],l[c],t)},v.mApply=function(_,m,l){for(var t=_;t-- >0;)for(var c=m;c-- >0;)l(t,c)},v.prototype.matrixApply=function(_){v.mApply(this.k,this.n,_)},v.prototype.computeNextPosition=function(_,m){var l=this;this.computeDerivatives(_);var t=this.computeStepSize(this.g);if(this.stepAndProject(_,m,this.g,t),this.project){this.matrixApply(function(h,g){return l.e[h][g]=_[h][g]-m[h][g]});var c=this.computeStepSize(this.e);c=Math.max(.2,Math.min(c,1)),this.stepAndProject(_,m,this.e,c)}},v.prototype.run=function(_){for(var m=Number.MAX_VALUE,l=!1;!l&&_-- >0;){var t=this.rungeKutta();l=Math.abs(m/t-1)<this.threshold,m=t}return m},v.prototype.rungeKutta=function(){var _=this;this.computeNextPosition(this.x,this.a),v.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),v.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var m=0;return this.matrixApply(function(l,t){var c=(_.a[l][t]+2*_.b[l][t]+2*_.c[l][t]+_.d[l][t])/6,h=_.x[l][t]-c;m+=h*h,_.x[l][t]=c}),m},v.mid=function(_,m,l){v.mApply(_.length,_[0].length,function(t,c){return l[t][c]=_[t][c]+(m[t][c]-_[t][c])/2})},v.prototype.takeDescentStep=function(_,m,l){for(var t=0;t<this.n;++t)_[t]=_[t]-l*m[t]},v.prototype.computeStress=function(){for(var _=0,m=0,l=this.n-1;m<l;++m)for(var t=m+1,c=this.n;t<c;++t){for(var h=0,g=0;g<this.k;++g){var f=this.x[g][m]-this.x[g][t];h+=f*f}h=Math.sqrt(h);var p=this.D[m][t];if(isFinite(p)){var C=p-h;_+=C*C/(p*p)}}return _},v.zeroDistance=1e-10,v}();k.Descent=u;var x=function(){function v(_){void 0===_&&(_=1),this.seed=_,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return v.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},v.prototype.getNextBetween=function(_,m){return _+this.getNext()*(m-_)},v}();k.PseudoRandom=x},30225:function(w,k,o){"use strict";var it,u=this&&this.__extends||(it=function(G,M){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,It){ft.__proto__=It}||function(ft,It){for(var Zt in It)It.hasOwnProperty(Zt)&&(ft[Zt]=It[Zt])})(G,M)},function(G,M){function ft(){this.constructor=G}it(G,M),G.prototype=null===M?Object.create(M):(ft.prototype=M.prototype,new ft)});Object.defineProperty(k,"__esModule",{value:!0});var x=o(4068),v=function it(){};k.Point=v;var _=function it(G,M,ft,It){this.x1=G,this.y1=M,this.x2=ft,this.y2=It};k.LineSegment=_;var m=function(it){function G(){return null!==it&&it.apply(this,arguments)||this}return u(G,it),G}(v);function l(it,G,M){return(G.x-it.x)*(M.y-it.y)-(M.x-it.x)*(G.y-it.y)}function t(it,G,M){return l(it,G,M)>0}function c(it,G,M){return l(it,G,M)<0}function C(it,G){var M=G.slice(0);return M.push(G[0]),{rtan:A(it,M),ltan:L(it,M)}}function A(it,G){var ft,It,Zt,ne,M=G.length-1;if(c(it,G[1],G[0])&&!t(it,G[M-1],G[0]))return 0;for(ft=0,It=M;;){if(It-ft==1)return t(it,G[ft],G[It])?ft:It;if((ne=c(it,G[(Zt=Math.floor((ft+It)/2))+1],G[Zt]))&&!t(it,G[Zt-1],G[Zt]))return Zt;t(it,G[ft+1],G[ft])?ne||t(it,G[ft],G[Zt])?It=Zt:ft=Zt:ne&&c(it,G[ft],G[Zt])?It=Zt:ft=Zt}}function L(it,G){var ft,It,Zt,ne,M=G.length-1;if(t(it,G[M-1],G[0])&&!c(it,G[1],G[0]))return 0;for(ft=0,It=M;;){if(It-ft==1)return c(it,G[ft],G[It])?ft:It;if(ne=c(it,G[(Zt=Math.floor((ft+It)/2))+1],G[Zt]),t(it,G[Zt-1],G[Zt])&&!ne)return Zt;c(it,G[ft+1],G[ft])?ne?c(it,G[ft],G[Zt])?It=Zt:ft=Zt:It=Zt:ne?ft=Zt:t(it,G[ft],G[Zt])?It=Zt:ft=Zt}}function N(it,G,M,ft,It,Zt){var zt,ne;ne=ft(it[zt=M(G[0],it)],G);for(var Ut=!1;!Ut;){for(Ut=!0;zt===it.length-1&&(zt=0),!It(G[ne],it[zt],it[zt+1]);)++zt;for(;0===ne&&(ne=G.length-1),!Zt(it[zt],G[ne],G[ne-1]);)--ne,Ut=!1}return{t1:zt,t2:ne}}function R(it,G){return N(it,G,A,L,t,c)}k.PolyPoint=m,k.isLeft=l,k.ConvexHull=function h(it){var ft,G=it.slice(0).sort(function(Jt,ge){return Jt.x!==ge.x?ge.x-Jt.x:ge.y-Jt.y}),M=it.length,Zt=G[0].x;for(ft=1;ft<M&&G[ft].x===Zt;++ft);var zt=ft-1,ne=[];if(ne.push(G[0]),zt===M-1)G[zt].y!==G[0].y&&ne.push(G[zt]);else{var Ut,xt=M-1,pt=G[M-1].x;for(ft=M-2;ft>=0&&G[ft].x===pt;ft--);for(Ut=ft+1,ft=zt;++ft<=Ut;)if(!(l(G[0],G[Ut],G[ft])>=0&&ft<Ut)){for(;ne.length>1&&!(l(ne[ne.length-2],ne[ne.length-1],G[ft])>0);)ne.length-=1;0!=ft&&ne.push(G[ft])}xt!=Ut&&ne.push(G[xt]);var Nt=ne.length;for(ft=Ut;--ft>=zt;)if(!(l(G[xt],G[zt],G[ft])>=0&&ft>zt)){for(;ne.length>Nt&&!(l(ne[ne.length-2],ne[ne.length-1],G[ft])>0);)ne.length-=1;0!=ft&&ne.push(G[ft])}}return ne},k.clockwiseRadialSweep=function g(it,G,M){G.slice(0).sort(function(ft,It){return Math.atan2(ft.y-it.y,ft.x-it.x)-Math.atan2(It.y-it.y,It.x-it.x)}).forEach(M)},k.tangent_PolyPolyC=N,k.LRtangent_PolyPolyC=function P(it,G){var M=R(G,it);return{t1:M.t2,t2:M.t1}},k.RLtangent_PolyPolyC=R,k.LLtangent_PolyPolyC=function Z(it,G){return N(it,G,L,L,c,c)},k.RRtangent_PolyPolyC=function z(it,G){return N(it,G,A,A,t,t)};var H=function it(G,M){this.t1=G,this.t2=M};k.BiTangent=H;var tt=function it(){};k.BiTangents=tt;var rt=function(it){function G(){return null!==it&&it.apply(this,arguments)||this}return u(G,it),G}(v);k.TVGPoint=rt;var ot=function it(G,M,ft,It){this.id=G,this.polyid=M,this.polyvertid=ft,this.p=It,It.vv=this};k.VisibilityVertex=ot;var J=function(){function it(G,M){this.source=G,this.target=M}return it.prototype.length=function(){var G=this.source.p.x-this.target.p.x,M=this.source.p.y-this.target.p.y;return Math.sqrt(G*G+M*M)},it}();k.VisibilityEdge=J;var et=function(){function it(G,M){if(this.P=G,this.V=[],this.E=[],M)this.V=M.V.slice(0),this.E=M.E.slice(0);else{for(var ft=G.length,It=0;It<ft;It++){for(var Zt=G[It],zt=0;zt<Zt.length;++zt){var Ut=new ot(this.V.length,It,zt,Zt[zt]);this.V.push(Ut),zt>0&&this.E.push(new J(Zt[zt-1].vv,Ut))}Zt.length>1&&this.E.push(new J(Zt[0].vv,Zt[Zt.length-1].vv))}for(It=0;It<ft-1;It++){var xt=G[It];for(zt=It+1;zt<ft;zt++){var pt=G[zt],Nt=at(xt,pt);for(var Jt in Nt){var ge=Nt[Jt];this.addEdgeIfVisible(xt[ge.t1],pt[ge.t2],It,zt)}}}}}return it.prototype.addEdgeIfVisible=function(G,M,ft,It){this.intersectsPolys(new _(G.x,G.y,M.x,M.y),ft,It)||this.E.push(new J(G.vv,M.vv))},it.prototype.addPoint=function(G,M){var ft=this.P.length;this.V.push(new ot(this.V.length,ft,0,G));for(var It=0;It<ft;++It)if(It!==M){var Zt=this.P[It],zt=C(G,Zt);this.addEdgeIfVisible(G,Zt[zt.ltan],M,It),this.addEdgeIfVisible(G,Zt[zt.rtan],M,It)}return G.vv},it.prototype.intersectsPolys=function(G,M,ft){for(var It=0,Zt=this.P.length;It<Zt;++It)if(It!=M&&It!=ft&&q(G,this.P[It]).length>0)return!0;return!1},it}();function q(it,G){for(var M=[],ft=1,It=G.length;ft<It;++ft){var Zt=x.Rectangle.lineIntersection(it.x1,it.y1,it.x2,it.y2,G[ft-1].x,G[ft-1].y,G[ft].x,G[ft].y);Zt&&M.push(Zt)}return M}function at(it,G){for(var M=it.length-1,ft=G.length-1,It=new tt,Zt=0;Zt<M;++Zt)for(var zt=0;zt<ft;++zt){var ne=it[0==Zt?M-1:Zt-1],Ut=it[Zt],xt=it[Zt+1],pt=G[0==zt?ft-1:zt-1],Nt=G[zt],Jt=G[zt+1],ge=l(ne,Ut,Nt),_e=l(Ut,pt,Nt),Te=l(Ut,Nt,Jt),Re=l(pt,Nt,Ut),Tn=l(Nt,ne,Ut),Fe=l(Nt,Ut,xt);ge>=0&&_e>=0&&Te<0&&Re>=0&&Tn>=0&&Fe<0?It.ll=new H(Zt,zt):ge<=0&&_e<=0&&Te>0&&Re<=0&&Tn<=0&&Fe>0?It.rr=new H(Zt,zt):ge<=0&&_e>0&&Te<=0&&Re>=0&&Tn<0&&Fe>=0?It.rl=new H(Zt,zt):ge>=0&&_e<0&&Te>=0&&Re<=0&&Tn>0&&Fe<=0&&(It.lr=new H(Zt,zt))}return It}function K(it,G){return!it.every(function(M){return!function Y(it,G){for(var M=1,ft=G.length;M<ft;++M)if(c(G[M-1],G[M],it))return!1;return!0}(M,G)})}k.TangentVisibilityGraph=et,k.tangents=at,k.polysOverlap=function ut(it,G){if(K(it,G)||K(G,it))return!0;for(var M=1,ft=it.length;M<ft;++M){var It=it[M],Zt=it[M-1];if(q(new _(Zt.x,Zt.y,It.x,It.y),G).length>0)return!0}return!1}},76767:(w,k,o)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var u=o(4068),x=o(98237),v=o(33858),_=function c(h,g,f){this.id=h,this.rect=g,this.children=f,this.leaf=void 0===f||0===f.length};k.NodeWrapper=_;var m=function c(h,g,f,p,C){void 0===p&&(p=null),void 0===C&&(C=null),this.id=h,this.x=g,this.y=f,this.node=p,this.line=C};k.Vert=m;var l=function(){function c(h,g){this.s=h,this.t=g;var f=c.findMatch(h,g),p=g.slice(0).reverse(),C=c.findMatch(h,p);f.length>=C.length?(this.length=f.length,this.si=f.si,this.ti=f.ti,this.reversed=!1):(this.length=C.length,this.si=C.si,this.ti=g.length-C.ti-C.length,this.reversed=!0)}return c.findMatch=function(h,g){for(var f=h.length,p=g.length,C={length:0,si:-1,ti:-1},A=new Array(f),L=0;L<f;L++){A[L]=new Array(p);for(var N=0;N<p;N++)if(h[L]===g[N]){var P=A[L][N]=0===L||0===N?1:A[L-1][N-1]+1;P>C.length&&(C.length=P,C.si=L-P+1,C.ti=N-P+1)}else A[L][N]=0}return C},c.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},c}();k.LongestCommonSubsequence=l;var t=function(){function c(h,g,f){var p=this;void 0===f&&(f=12),this.originalnodes=h,this.groupPadding=f,this.leaves=null,this.nodes=h.map(function(rt,ot){return new _(ot,g.getBounds(rt),g.getChildren(rt))}),this.leaves=this.nodes.filter(function(rt){return rt.leaf}),this.groups=this.nodes.filter(function(rt){return!rt.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(rt){return rt.children.forEach(function(ot){return p.nodes[ot].parent=rt})}),this.root={children:[]},this.nodes.forEach(function(rt){void 0===rt.parent&&(rt.parent=p.root,p.root.children.push(rt.id)),rt.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(rt,ot){return p.getDepth(rt)-p.getDepth(ot)}),this.backToFront.slice(0).reverse().filter(function(rt){return!rt.leaf}).forEach(function(rt){var ot=u.Rectangle.empty();rt.children.forEach(function(J){return ot=ot.union(p.nodes[J].rect)}),rt.rect=ot.inflate(p.groupPadding)});var A=this.midPoints(this.cols.map(function(rt){return rt.pos})),L=this.midPoints(this.rows.map(function(rt){return rt.pos})),N=A[0],P=A[A.length-1],R=L[0],Z=L[L.length-1],z=this.rows.map(function(rt){return{x1:N,x2:P,y1:rt.pos,y2:rt.pos}}).concat(L.map(function(rt){return{x1:N,x2:P,y1:rt,y2:rt}})),H=this.cols.map(function(rt){return{x1:rt.pos,x2:rt.pos,y1:R,y2:Z}}).concat(A.map(function(rt){return{x1:rt,x2:rt,y1:R,y2:Z}})),tt=z.concat(H);tt.forEach(function(rt){return rt.verts=[]}),this.verts=[],this.edges=[],z.forEach(function(rt){return H.forEach(function(ot){var J=new m(p.verts.length,ot.x1,rt.y1);rt.verts.push(J),ot.verts.push(J),p.verts.push(J);for(var et=p.backToFront.length;et-- >0;){var q=p.backToFront[et],at=q.rect,Y=Math.abs(J.x-at.cx()),K=Math.abs(J.y-at.cy());if(Y<at.width()/2&&K<at.height()/2){J.node=q;break}}})}),tt.forEach(function(rt,ot){p.nodes.forEach(function(K,ut){K.rect.lineIntersections(rt.x1,rt.y1,rt.x2,rt.y2).forEach(function(it,G){var M=new m(p.verts.length,it.x,it.y,K,rt);p.verts.push(M),rt.verts.push(M),K.ports.push(M)})});var J=Math.abs(rt.y1-rt.y2)<.1,et=function(K,ut){return J?ut.x-K.x:ut.y-K.y};rt.verts.sort(et);for(var q=1;q<rt.verts.length;q++){var at=rt.verts[q-1],Y=rt.verts[q];at.node&&at.node===Y.node&&at.node.leaf||p.edges.push({source:at.id,target:Y.id,length:Math.abs(et(at,Y))})}})}return c.prototype.avg=function(h){return h.reduce(function(g,f){return g+f})/h.length},c.prototype.getGridLines=function(h){for(var g=[],f=this.leaves.slice(0,this.leaves.length);f.length>0;){var p=f.filter(function(A){return A.rect["overlap"+h.toUpperCase()](f[0].rect)}),C={nodes:p,pos:this.avg(p.map(function(A){return A.rect["c"+h]()}))};g.push(C),C.nodes.forEach(function(A){return f.splice(f.indexOf(A),1)})}return g.sort(function(A,L){return A.pos-L.pos}),g},c.prototype.getDepth=function(h){for(var g=0;h.parent!==this.root;)g++,h=h.parent;return g},c.prototype.midPoints=function(h){for(var g=h[1]-h[0],f=[h[0]-g/2],p=1;p<h.length;p++)f.push((h[p]+h[p-1])/2);return f.push(h[h.length-1]+g/2),f},c.prototype.findLineage=function(h){var g=[h];do{g.push(h=h.parent)}while(h!==this.root);return g.reverse()},c.prototype.findAncestorPathBetween=function(h,g){for(var f=this.findLineage(h),p=this.findLineage(g),C=0;f[C]===p[C];)C++;return{commonAncestor:f[C-1],lineages:f.slice(C).concat(p.slice(C))}},c.prototype.siblingObstacles=function(h,g){var f=this,p=this.findAncestorPathBetween(h,g),C={};p.lineages.forEach(function(L){return C[L.id]={}});var A=p.commonAncestor.children.filter(function(L){return!(L in C)});return p.lineages.filter(function(L){return L.parent!==p.commonAncestor}).forEach(function(L){return A=A.concat(L.parent.children.filter(function(N){return N!==L.id}))}),A.map(function(L){return f.nodes[L]})},c.getSegmentSets=function(h,g,f){for(var p=[],C=0;C<h.length;C++)for(var A=h[C],L=0;L<A.length;L++)(N=A[L]).edgeid=C,N.i=L,Math.abs(N[1][g]-N[0][g])<.1&&p.push(N);p.sort(function(H,tt){return H[0][g]-tt[0][g]});for(var R=[],Z=null,z=0;z<p.length;z++){var N=p[z];(!Z||Math.abs(N[0][g]-Z.pos)>.1)&&R.push(Z={pos:N[0][g],segments:[]}),Z.segments.push(N)}return R},c.nudgeSegs=function(h,g,f,p,C,A){var L=p.length;if(!(L<=1)){for(var N=p.map(function(q){return new x.Variable(q[0][h])}),P=[],R=0;R<L;R++)for(var Z=0;Z<L;Z++)if(R!==Z){var z=p[R],tt=z.edgeid,rt=p[Z].edgeid,ot=-1,J=-1;"x"==h?C(tt,rt)&&(z[0][g]<z[1][g]?(ot=Z,J=R):(ot=R,J=Z)):C(tt,rt)&&(z[0][g]<z[1][g]?(ot=R,J=Z):(ot=Z,J=R)),ot>=0&&P.push(new x.Constraint(N[ot],N[J],A))}new x.Solver(N,P).solve(),N.forEach(function(q,at){var Y=p[at],K=q.position();Y[0][h]=Y[1][h]=K;var ut=f[Y.edgeid];Y.i>0&&(ut[Y.i-1][1][h]=K),Y.i<ut.length-1&&(ut[Y.i+1][0][h]=K)})}},c.nudgeSegments=function(h,g,f,p,C){for(var A=c.getSegmentSets(h,g,f),L=0;L<A.length;L++){for(var N=A[L],P=[],R=0;R<N.segments.length;R++){var Z=N.segments[R];P.push({type:0,s:Z,pos:Math.min(Z[0][f],Z[1][f])}),P.push({type:1,s:Z,pos:Math.max(Z[0][f],Z[1][f])})}P.sort(function(tt,rt){return tt.pos-rt.pos+tt.type-rt.type});var z=[],H=0;P.forEach(function(tt){0===tt.type?(z.push(tt.s),H++):H--,0==H&&(c.nudgeSegs(g,f,h,z,p,C),z=[])})}},c.prototype.routeEdges=function(h,g,f,p){var C=this,A=h.map(function(P){return C.route(f(P),p(P))}),L=c.orderEdges(A),N=A.map(function(P){return c.makeSegments(P)});return c.nudgeSegments(N,"x","y",L,g),c.nudgeSegments(N,"y","x",L,g),c.unreverseEdges(N,A),N},c.unreverseEdges=function(h,g){h.forEach(function(f,p){g[p].reversed&&(f.reverse(),f.forEach(function(A){A.reverse()}))})},c.angleBetween2Lines=function(h,g){var f=Math.atan2(h[0].y-h[1].y,h[0].x-h[1].x),p=Math.atan2(g[0].y-g[1].y,g[0].x-g[1].x),C=f-p;return(C>Math.PI||C<-Math.PI)&&(C=p-f),C},c.isLeft=function(h,g,f){return(g.x-h.x)*(f.y-h.y)-(g.y-h.y)*(f.x-h.x)<=0},c.getOrder=function(h){for(var g={},f=0;f<h.length;f++){var p=h[f];void 0===g[p.l]&&(g[p.l]={}),g[p.l][p.r]=!0}return function(C,A){return void 0!==g[C]&&g[C][A]}},c.orderEdges=function(h){for(var g=[],f=0;f<h.length-1;f++)for(var p=f+1;p<h.length;p++){var N,P,R,C=h[f],A=h[p],L=new l(C,A);if(0!==L.length){if(L.reversed&&(A.reverse(),A.reversed=!0,L=new l(C,A)),(L.si<=0||L.ti<=0)&&(L.si+L.length>=C.length||L.ti+L.length>=A.length)){g.push({l:f,r:p});continue}L.si+L.length>=C.length||L.ti+L.length>=A.length?(N=C[L.si+1],R=C[L.si-1],P=A[L.ti-1]):(N=C[L.si+L.length-2],P=C[L.si+L.length],R=A[L.ti+L.length]),c.isLeft(N,P,R)?g.push({l:p,r:f}):g.push({l:f,r:p})}}return c.getOrder(g)},c.makeSegments=function(h){function g(P){return{x:P.x,y:P.y}}for(var p=[],C=g(h[0]),A=1;A<h.length;A++){var L=g(h[A]),N=A<h.length-1?h[A+1]:null;(!N||(P=C,R=L,Z=N,!(Math.abs((R.x-P.x)*(Z.y-P.y)-(R.y-P.y)*(Z.x-P.x))<.001)))&&(p.push([C,L]),C=L)}var P,R,Z;return p},c.prototype.route=function(h,g){var f=this,p=this.nodes[h],C=this.nodes[g];this.obstacles=this.siblingObstacles(p,C);var A={};this.obstacles.forEach(function(J){return A[J.id]=J}),this.passableEdges=this.edges.filter(function(J){var et=f.verts[J.source],q=f.verts[J.target];return!(et.node&&et.node.id in A||q.node&&q.node.id in A)});for(var L=1;L<p.ports.length;L++)this.passableEdges.push({source:p.ports[0].id,target:p.ports[L].id,length:0});for(L=1;L<C.ports.length;L++)this.passableEdges.push({source:C.ports[0].id,target:C.ports[L].id,length:0});var ot=new v.Calculator(this.verts.length,this.passableEdges,function(J){return J.source},function(J){return J.target},function(J){return J.length}).PathFromNodeToNodeWithPrevCost(p.ports[0].id,C.ports[0].id,function(J,et,q){var at=f.verts[J],Y=f.verts[et],K=f.verts[q],ut=Math.abs(K.x-at.x),it=Math.abs(K.y-at.y);return at.node===p&&at.node===Y.node||Y.node===C&&Y.node===K.node?0:ut>1&&it>1?1e3:0}).reverse().map(function(J){return f.verts[J]});return ot.push(this.nodes[C.id].ports[0]),ot.filter(function(J,et){return!(et<ot.length-1&&ot[et+1].node===p&&J.node===p||et>0&&J.node===C&&ot[et-1].node===C)})},c.getRoutePath=function(h,g,f,p){var L,N,P,ut,it,C={routepath:"M "+h[0][0].x+" "+h[0][0].y+" ",arrowpath:""};if(h.length>1)for(var A=0;A<h.length;A++){var R=(N=(L=h[A])[1].x)-L[0].x,Z=(P=L[1].y)-L[0].y;if(A<h.length-1){Math.abs(R)>0?N-=R/Math.abs(R)*g:P-=Z/Math.abs(Z)*g,C.routepath+="L "+N+" "+P+" ";var z=h[A+1],H=z[0].x,tt=z[0].y;R=z[1].x-H,Z=z[1].y-tt;var et,q,J=c.angleBetween2Lines(L,z)<0?1:0;Math.abs(R)>0?(et=H+R/Math.abs(R)*g,q=tt):(et=H,q=tt+Z/Math.abs(Z)*g);var at=Math.abs(et-N),Y=Math.abs(q-P);C.routepath+="A "+at+" "+Y+" 0 0 "+J+" "+et+" "+q+" "}else{var K=[N,P];Math.abs(R)>0?(ut=[N-=R/Math.abs(R)*p,P+f],it=[N,P-f]):(ut=[N+f,P-=Z/Math.abs(Z)*p],it=[N-f,P]),C.routepath+="L "+N+" "+P+" ",p>0&&(C.arrowpath="M "+K[0]+" "+K[1]+" L "+ut[0]+" "+ut[1]+" L "+it[0]+" "+it[1])}}else R=(N=(L=h[0])[1].x)-L[0].x,Z=(P=L[1].y)-L[0].y,K=[N,P],Math.abs(R)>0?(ut=[N-=R/Math.abs(R)*p,P+f],it=[N,P-f]):(ut=[N+f,P-=Z/Math.abs(Z)*p],it=[N-f,P]),C.routepath+="L "+N+" "+P+" ",p>0&&(C.arrowpath="M "+K[0]+" "+K[1]+" L "+ut[0]+" "+ut[1]+" L "+it[0]+" "+it[1]);return C},c}();k.GridRouter=t},30345:(w,k)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var o_GOLDEN_SECTION=(1+Math.sqrt(5))/2;k.applyPacking=function u(v,_,m,A,C,c){void 0===C&&(C=1),void 0===c&&(c=!0);var f=_,p=m,L=(C=void 0!==C?C:1,A=void 0!==A?A:0,0),N=0,P=0,R=0,Z=[];function rt(q,at){Z=[],L=0,N=0,R=0;for(var Y=0;Y<q.length;Y++)ot(q[Y],at);return Math.abs(function et(){return L/N}()-C)}function ot(q,at){for(var Y=void 0,K=0;K<Z.length;K++)if(Z[K].space_left>=q.height&&Z[K].x+Z[K].width+q.width+10-at<=1e-4){Y=Z[K];break}Z.push(q),void 0!==Y?(q.x=Y.x+Y.width+10,q.y=Y.bottom,q.space_left=q.height,q.bottom=q.y,Y.space_left-=q.height+10,Y.bottom+=q.height+10):(q.y=R,R+=q.height+10,q.x=0,q.bottom=q.y,q.space_left=q.height),q.y+q.height-N>-1e-4&&(N=q.y+q.height-0),q.x+q.width-L>-1e-4&&(L=q.x+q.width-0)}0!=v.length&&(function z(q){q.forEach(function(Y){!function at(Y){var K=Number.MAX_VALUE,ut=Number.MAX_VALUE,it=0,G=0;Y.array.forEach(function(M){var ft=void 0!==M.width?M.width:A,It=void 0!==M.height?M.height:A;ft/=2,It/=2,it=Math.max(M.x+ft,it),K=Math.min(M.x-ft,K),G=Math.max(M.y+It,G),ut=Math.min(M.y-It,ut)}),Y.width=it-K,Y.height=G-ut}(Y)})}(v),function tt(q,at){var Y=Number.POSITIVE_INFINITY,K=0;q.sort(function(xt,pt){return pt.height-xt.height});for(var ut=ne=P=q.reduce(function(xt,pt){return xt.width<pt.width?xt.width:pt.width}),it=Ut=function J(q){var at=0;return q.forEach(function(Y){return at+=Y.width+10}),at}(q),G=0,M=Number.MAX_VALUE,ft=Number.MAX_VALUE,It=-1,Zt=Number.MAX_VALUE,zt=Number.MAX_VALUE;Zt>P||zt>1e-4;){if(1!=It){var ne=it-(it-ut)/o_GOLDEN_SECTION;M=rt(q,ne)}if(0!=It){var Ut=ut+(it-ut)/o_GOLDEN_SECTION;ft=rt(q,Ut)}if(Zt=Math.abs(ne-Ut),zt=Math.abs(M-ft),M<Y&&(Y=M,K=ne),ft<Y&&(Y=ft,K=Ut),M>ft?(ut=ne,ne=Ut,M=ft,It=1):(it=Ut,Ut=ne,ft=M,It=0),G++>100)break}rt(q,K)}(v),c&&function H(q){q.forEach(function(at){var Y={x:0,y:0};at.array.forEach(function(it){Y.x+=it.x,Y.y+=it.y}),Y.x/=at.array.length,Y.y/=at.array.length;var ut_x=at.x-(Y.x-at.width/2)+f/2-L/2,ut_y=at.y-(Y.y-at.height/2)+p/2-N/2;at.array.forEach(function(it){it.x+=ut_x,it.y+=ut_y})})}(v))},k.separateGraphs=function x(v,_){for(var m={},l={},t=[],c=0,h=0;h<_.length;h++){var g=_[h],f=g.source,p=g.target;l[f.index]?l[f.index].push(p):l[f.index]=[p],l[p.index]?l[p.index].push(f):l[p.index]=[f]}for(h=0;h<v.length;h++){var C=v[h];m[C.index]||A(C,!0)}function A(L,N){if(void 0===m[L.index]){N&&(c++,t.push({array:[]})),m[L.index]=c,t[c-1].array.push(L);var P=l[L.index];if(P)for(var R=0;R<P.length;R++)A(P[R],!1)}}return t}},15675:(w,k,o)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var c,f,u=o(33900),x=o(58802),v=o(91786),_=o(4068),m=o(33858),l=o(30225),t=o(30345);function h(f){return void 0!==f.leaves||void 0!==f.groups}(f=c=k.EventType||(k.EventType={}))[f.start=0]="start",f[f.tick=1]="tick",f[f.end=2]="end";var g=function(){function f(){var p=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:f.getSourceIndex,getTargetIndex:f.getTargetIndex,setLength:f.setLinkLength,getType:function(C){return"function"==typeof p._linkType?p._linkType(C):0}}}return f.prototype.on=function(p,C){return this.event||(this.event={}),"string"==typeof p?this.event[c[p]]=C:this.event[p]=C,this},f.prototype.trigger=function(p){this.event&&void 0!==this.event[p.type]&&this.event[p.type](p)},f.prototype.kick=function(){for(;!this.tick(););},f.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:c.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var A,L,p=this._nodes.length;for(this._descent.locks.clear(),L=0;L<p;++L)(A=this._nodes[L]).fixed&&((void 0===A.px||void 0===A.py)&&(A.px=A.x,A.py=A.y),this._descent.locks.add(L,[A.px,A.py]));var P=this._descent.rungeKutta();return 0===P?this._alpha=0:void 0!==this._lastStress&&(this._alpha=P),this._lastStress=P,this.updateNodePositions(),this.trigger({type:c.tick,alpha:this._alpha,stress:this._lastStress}),!1},f.prototype.updateNodePositions=function(){for(var A,p=this._descent.x[0],C=this._descent.x[1],L=this._nodes.length;L--;)(A=this._nodes[L]).x=p[L],A.y=C[L]},f.prototype.nodes=function(p){if(!p){if(0===this._nodes.length&&this._links.length>0){var C=0;this._links.forEach(function(L){C=Math.max(C,L.source,L.target)}),this._nodes=new Array(++C);for(var A=0;A<C;++A)this._nodes[A]={}}return this._nodes}return this._nodes=p,this},f.prototype.groups=function(p){var C=this;return p?(this._groups=p,this._rootGroup={},this._groups.forEach(function(A){void 0===A.padding&&(A.padding=1),void 0!==A.leaves&&A.leaves.forEach(function(L,N){"number"==typeof L&&((A.leaves[N]=C._nodes[L]).parent=A)}),void 0!==A.groups&&A.groups.forEach(function(L,N){"number"==typeof L&&((A.groups[N]=C._groups[L]).parent=A)})}),this._rootGroup.leaves=this._nodes.filter(function(A){return void 0===A.parent}),this._rootGroup.groups=this._groups.filter(function(A){return void 0===A.parent}),this):this._groups},f.prototype.powerGraphGroups=function(p){var C=u.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(C.groups),p(C),this},f.prototype.avoidOverlaps=function(p){return arguments.length?(this._avoidOverlaps=p,this):this._avoidOverlaps},f.prototype.handleDisconnected=function(p){return arguments.length?(this._handleDisconnected=p,this):this._handleDisconnected},f.prototype.flowLayout=function(p,C){return arguments.length||(p="y"),this._directedLinkConstraints={axis:p,getMinSeparation:"number"==typeof C?function(){return C}:C},this},f.prototype.links=function(p){return arguments.length?(this._links=p,this):this._links},f.prototype.constraints=function(p){return arguments.length?(this._constraints=p,this):this._constraints},f.prototype.distanceMatrix=function(p){return arguments.length?(this._distanceMatrix=p,this):this._distanceMatrix},f.prototype.size=function(p){return p?(this._canvasSize=p,this):this._canvasSize},f.prototype.defaultNodeSize=function(p){return p?(this._defaultNodeSize=p,this):this._defaultNodeSize},f.prototype.groupCompactness=function(p){return p?(this._groupCompactness=p,this):this._groupCompactness},f.prototype.linkDistance=function(p){return p?(this._linkDistance="function"==typeof p?p:+p,this._linkLengthCalculator=null,this):this._linkDistance},f.prototype.linkType=function(p){return this._linkType=p,this},f.prototype.convergenceThreshold=function(p){return p?(this._threshold="function"==typeof p?p:+p,this):this._threshold},f.prototype.alpha=function(p){return arguments.length?(p=+p,this._alpha?this._alpha=p>0?p:0:p>0&&(this._running||(this._running=!0,this.trigger({type:c.start,alpha:this._alpha=p}),this.kick())),this):this._alpha},f.prototype.getLinkLength=function(p){return"function"==typeof this._linkDistance?+this._linkDistance(p):this._linkDistance},f.setLinkLength=function(p,C){p.length=C},f.prototype.getLinkType=function(p){return"function"==typeof this._linkType?this._linkType(p):0},f.prototype.symmetricDiffLinkLengths=function(p,C){var A=this;return void 0===C&&(C=1),this.linkDistance(function(L){return p*L.length}),this._linkLengthCalculator=function(){return x.symmetricDiffLinkLengths(A._links,A.linkAccessor,C)},this},f.prototype.jaccardLinkLengths=function(p,C){var A=this;return void 0===C&&(C=1),this.linkDistance(function(L){return p*L.length}),this._linkLengthCalculator=function(){return x.jaccardLinkLengths(A._links,A.linkAccessor,C)},this},f.prototype.start=function(p,C,A,L,N,P){var R=this;void 0===p&&(p=0),void 0===C&&(C=0),void 0===A&&(A=0),void 0===L&&(L=0),void 0===N&&(N=!0),void 0===P&&(P=!0);var K,H=this.nodes().length,tt=H+2*this._groups.length,ot=this._canvasSize[0],J=this._canvasSize[1],et=new Array(tt),q=new Array(tt),at=null,Y=this._avoidOverlaps;this._nodes.forEach(function(Zt,zt){Zt.index=zt,void 0===Zt.x&&(Zt.x=ot/2,Zt.y=J/2),et[zt]=Zt.x,q[zt]=Zt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?K=this._distanceMatrix:(K=new m.Calculator(tt,this._links,f.getSourceIndex,f.getTargetIndex,function(Zt){return R.getLinkLength(Zt)}).DistanceMatrix(),at=v.Descent.createSquareMatrix(tt,function(){return 2}),this._links.forEach(function(Zt){"number"==typeof Zt.source&&(Zt.source=R._nodes[Zt.source]),"number"==typeof Zt.target&&(Zt.target=R._nodes[Zt.target])}),this._links.forEach(function(Zt){var zt=f.getSourceIndex(Zt),ne=f.getTargetIndex(Zt);at[zt][ne]=at[ne][zt]=Zt.weight||1}));var ut=v.Descent.createSquareMatrix(tt,function(Zt,zt){return K[Zt][zt]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var Z=H;this._groups.forEach(function(zt){(function(zt,ne,Ut,xt){at[zt][ne]=at[ne][zt]=Ut,ut[zt][ne]=ut[ne][zt]=.1})(Z,Z+1,R._groupCompactness),et[Z]=0,q[Z++]=0,et[Z]=0,q[Z++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var G=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,G=G.concat(x.generateDirectedEdgeConstraints(H,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new v.Descent([et,q],ut),this._descent.locks.clear(),Z=0;Z<H;++Z){var M=this._nodes[Z];M.fixed&&(M.px=M.x,M.py=M.y,this._descent.locks.add(Z,[M.x,M.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(p,et,q),G.length>0&&(this._descent.project=new _.Projection(this._nodes,this._groups,this._rootGroup,G).projectFunctions()),this._descent.run(C),this.separateOverlappingComponents(ot,J,P),this.avoidOverlaps(Y),Y&&(this._nodes.forEach(function(Zt,zt){Zt.x=et[zt],Zt.y=q[zt]}),this._descent.project=new _.Projection(this._nodes,this._groups,this._rootGroup,G,!0).projectFunctions(),this._nodes.forEach(function(Zt,zt){et[zt]=Zt.x,q[zt]=Zt.y})),this._descent.G=at,this._descent.run(A),L){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=H,this._descent.scaleSnapByMaxH=H!=tt;var It=v.Descent.createSquareMatrix(tt,function(Zt,zt){return Zt>=H||zt>=H?at[Zt][zt]:0});this._descent.G=It,this._descent.run(L)}return this.updateNodePositions(),this.separateOverlappingComponents(ot,J,P),N?this.resume():this},f.prototype.initialLayout=function(p,C,A){if(this._groups.length>0&&p>0){var L=this._nodes.length,N=this._links.map(function(R){return{source:R.source.index,target:R.target.index}}),P=this._nodes.map(function(R){return{index:R.index}});this._groups.forEach(function(R,Z){P.push({index:R.index=L+Z})}),this._groups.forEach(function(R,Z){void 0!==R.leaves&&R.leaves.forEach(function(z){return N.push({source:R.index,target:z.index})}),void 0!==R.groups&&R.groups.forEach(function(z){return N.push({source:R.index,target:z.index})})}),(new f).size(this.size()).nodes(P).links(N).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(p,0,0,0,!1),this._nodes.forEach(function(R){C[R.index]=P[R.index].x,A[R.index]=P[R.index].y})}else this._descent.run(p)},f.prototype.separateOverlappingComponents=function(p,C,A){var L=this;if(void 0===A&&(A=!0),!this._distanceMatrix&&this._handleDisconnected){var N=this._descent.x[0],P=this._descent.x[1];this._nodes.forEach(function(Z,z){Z.x=N[z],Z.y=P[z]});var R=t.separateGraphs(this._nodes,this._links);t.applyPacking(R,p,C,this._defaultNodeSize,1,A),this._nodes.forEach(function(Z,z){L._descent.x[0][z]=Z.x,L._descent.x[1][z]=Z.y,Z.bounds&&(Z.bounds.setXCentre(Z.x),Z.bounds.setYCentre(Z.y))})}},f.prototype.resume=function(){return this.alpha(.1)},f.prototype.stop=function(){return this.alpha(0)},f.prototype.prepareEdgeRouting=function(p){void 0===p&&(p=0),this._visibilityGraph=new l.TangentVisibilityGraph(this._nodes.map(function(C){return C.bounds.inflate(-p).vertices()}))},f.prototype.routeEdge=function(p,C,A){void 0===C&&(C=5);var L=[],N=new l.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),P={x:p.source.x,y:p.source.y},R={x:p.target.x,y:p.target.y},Z=N.addPoint(P,p.source.index),z=N.addPoint(R,p.target.index);N.addEdgeIfVisible(P,R,p.source.index,p.target.index),void 0!==A&&A(N);var J=new m.Calculator(N.V.length,N.E,function(ut){return ut.source.id},function(ut){return ut.target.id},function(ut){return ut.length()}).PathFromNodeToNode(Z.id,z.id);if(1===J.length||J.length===N.V.length){var et=_.makeEdgeBetween(p.source.innerBounds,p.target.innerBounds,C);L=[et.sourceIntersection,et.arrowStart]}else{for(var q=J.length-2,at=N.V[J[q]].p,Y=N.V[J[0]].p,K=(L=[p.source.innerBounds.rayIntersection(at.x,at.y)],q);K>=0;--K)L.push(N.V[J[K]].p);L.push(_.makeEdgeTo(Y,p.target.innerBounds,C))}return L},f.getSourceIndex=function(p){return"number"==typeof p.source?p.source:p.source.index},f.getTargetIndex=function(p){return"number"==typeof p.target?p.target:p.target.index},f.linkId=function(p){return f.getSourceIndex(p)+"-"+f.getTargetIndex(p)},f.dragStart=function(p){h(p)?f.storeOffset(p,f.dragOrigin(p)):(f.stopNode(p),p.fixed|=2)},f.stopNode=function(p){p.px=p.x,p.py=p.y},f.storeOffset=function(p,C){void 0!==p.leaves&&p.leaves.forEach(function(A){A.fixed|=2,f.stopNode(A),A._dragGroupOffsetX=A.x-C.x,A._dragGroupOffsetY=A.y-C.y}),void 0!==p.groups&&p.groups.forEach(function(A){return f.storeOffset(A,C)})},f.dragOrigin=function(p){return h(p)?{x:p.bounds.cx(),y:p.bounds.cy()}:p},f.drag=function(p,C){h(p)?(void 0!==p.leaves&&p.leaves.forEach(function(A){p.bounds.setXCentre(C.x),p.bounds.setYCentre(C.y),A.px=A._dragGroupOffsetX+C.x,A.py=A._dragGroupOffsetY+C.y}),void 0!==p.groups&&p.groups.forEach(function(A){return f.drag(A,C)})):(p.px=C.x,p.py=C.y)},f.dragEnd=function(p){h(p)?(void 0!==p.leaves&&p.leaves.forEach(function(C){f.dragEnd(C),delete C._dragGroupOffsetX,delete C._dragGroupOffsetY}),void 0!==p.groups&&p.groups.forEach(f.dragEnd)):p.fixed&=-7},f.mouseOver=function(p){p.fixed|=4,p.px=p.x,p.py=p.y},f.mouseOut=function(p){p.fixed&=-5},f}();k.Layout=g},86461:(w,k,o)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var u=o(33858),x=o(91786),v=o(4068),_=o(58802),m=function(){function h(g,f){this.source=g,this.target=f}return h.prototype.actualLength=function(g){var f=this;return Math.sqrt(g.reduce(function(p,C){var A=C[f.target]-C[f.source];return p+A*A},0))},h}();k.Link3D=m,k.Node3D=function h(g,f,p){void 0===g&&(g=0),void 0===f&&(f=0),void 0===p&&(p=0),this.x=g,this.y=f,this.z=p};var t=function(){function h(g,f,p){var C=this;void 0===p&&(p=1),this.nodes=g,this.links=f,this.idealLinkLength=p,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(h.k);for(var A=0;A<h.k;++A)this.result[A]=new Array(g.length);g.forEach(function(L,N){for(var P=0,R=h.dims;P<R.length;P++){var Z=R[P];void 0===L[Z]&&(L[Z]=Math.random())}C.result[0][N]=L.x,C.result[1][N]=L.y,C.result[2][N]=L.z})}return h.prototype.linkLength=function(g){return g.actualLength(this.result)},h.prototype.start=function(g){var f=this;void 0===g&&(g=100);var p=this.nodes.length,C=new c;this.useJaccardLinkLengths&&_.jaccardLinkLengths(this.links,C,1.5),this.links.forEach(function(Z){return Z.length*=f.idealLinkLength});var A=new u.Calculator(p,this.links,function(Z){return Z.source},function(Z){return Z.target},function(Z){return Z.length}).DistanceMatrix(),L=x.Descent.createSquareMatrix(p,function(Z,z){return A[Z][z]}),N=x.Descent.createSquareMatrix(p,function(){return 2});this.links.forEach(function(Z){var z=Z.source,H=Z.target;return N[z][H]=N[H][z]=1}),this.descent=new x.Descent(this.result,L),this.descent.threshold=.001,this.descent.G=N,this.constraints&&(this.descent.project=new v.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var P=0;P<this.nodes.length;P++){var R=this.nodes[P];R.fixed&&this.descent.locks.add(P,[R.x,R.y,R.z])}return this.descent.run(g),this},h.prototype.tick=function(){this.descent.locks.clear();for(var g=0;g<this.nodes.length;g++){var f=this.nodes[g];f.fixed&&this.descent.locks.add(g,[f.x,f.y,f.z])}return this.descent.rungeKutta()},h.k=(h.dims=["x","y","z"]).length,h}();k.Layout3D=t;var c=function(){function h(){}return h.prototype.getSourceIndex=function(g){return g.source},h.prototype.getTargetIndex=function(g){return g.target},h.prototype.getLength=function(g){return g.length},h.prototype.setLength=function(g,f){g.length=f},h}()},58802:(w,k)=>{"use strict";function o(c,h){var g={};for(var f in c)g[f]={};for(var f in h)g[f]={};return Object.keys(g).length}function u(c,h){var g=0;for(var f in c)void 0!==h[f]&&++g;return g}function v(c,h,g,f){var p=function x(c,h){var g={},f=function(p,C){void 0===g[p]&&(g[p]={}),g[p][C]={}};return c.forEach(function(p){var C=h.getSourceIndex(p),A=h.getTargetIndex(p);f(C,A),f(A,C)}),g}(c,f);c.forEach(function(C){var A=p[f.getSourceIndex(C)],L=p[f.getTargetIndex(C)];f.setLength(C,1+h*g(A,L))})}function t(c,h,g){var f=[],p=0,C=[],A=[];function L(J){J.index=J.lowlink=p++,C.push(J),J.onStack=!0;for(var et=0,q=J.out;et<q.length;et++){var at=q[et];void 0===at.index?(L(at),J.lowlink=Math.min(J.lowlink,at.lowlink)):at.onStack&&(J.lowlink=Math.min(J.lowlink,at.index))}if(J.lowlink===J.index){for(var Y=[];C.length&&((at=C.pop()).onStack=!1,Y.push(at),at!==J););A.push(Y.map(function(K){return K.id}))}}for(var N=0;N<c;N++)f.push({id:N,out:[]});for(var P=0,R=h;P<R.length;P++){var Z=R[P],z=f[g.getSourceIndex(Z)],H=f[g.getTargetIndex(Z)];z.out.push(H)}for(var tt=0,rt=f;tt<rt.length;tt++){var ot=rt[tt];void 0===ot.index&&L(ot)}return A}Object.defineProperty(k,"__esModule",{value:!0}),k.symmetricDiffLinkLengths=function _(c,h,g){void 0===g&&(g=1),v(c,g,function(f,p){return Math.sqrt(o(f,p)-u(f,p))},h)},k.jaccardLinkLengths=function m(c,h,g){void 0===g&&(g=1),v(c,g,function(f,p){return Math.min(Object.keys(f).length,Object.keys(p).length)<1.1?0:u(f,p)/o(f,p)},h)},k.generateDirectedEdgeConstraints=function l(c,h,g,f){var p=t(c,h,f),C={};p.forEach(function(L,N){return L.forEach(function(P){return C[P]=N})});var A=[];return h.forEach(function(L){var N=f.getSourceIndex(L),P=f.getTargetIndex(L);C[N]!==C[P]&&A.push({axis:g,left:N,right:P,gap:f.getMinSeparation(L)})}),A},k.stronglyConnectedComponents=t},33900:(w,k)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var o=function h(g,f,p){this.source=g,this.target=f,this.type=p};k.PowerEdge=o;var u=function(){function h(g,f,p,C){var A=this;if(this.linkAccessor=p,this.modules=new Array(g),this.roots=[],C)this.initModulesFromGroup(C);else{this.roots.push(new m);for(var L=0;L<g;++L)this.roots[0].add(this.modules[L]=new v(L))}this.R=f.length,f.forEach(function(N){var P=A.modules[p.getSourceIndex(N)],R=A.modules[p.getTargetIndex(N)],Z=p.getType(N);P.outgoing.add(Z,R),R.incoming.add(Z,P)})}return h.prototype.initModulesFromGroup=function(g){var f=new m;this.roots.push(f);for(var p=0;p<g.leaves.length;++p){var C=g.leaves[p],A=new v(C.id);this.modules[C.id]=A,f.add(A)}if(g.groups)for(var L=0;L<g.groups.length;++L){var N=g.groups[L],P={};for(var R in N)"leaves"!==R&&"groups"!==R&&N.hasOwnProperty(R)&&(P[R]=N[R]);f.add(new v(-1-L,new l,new l,this.initModulesFromGroup(N),P))}return f},h.prototype.merge=function(g,f,p){void 0===p&&(p=0);var C=g.incoming.intersection(f.incoming),A=g.outgoing.intersection(f.outgoing),L=new m;L.add(g),L.add(f);var N=new v(this.modules.length,A,C,L);this.modules.push(N);var P=function(R,Z,z){R.forAll(function(H,tt){H.forAll(function(rt){var ot=rt[Z];ot.add(tt,N),ot.remove(tt,g),ot.remove(tt,f),g[z].remove(tt,rt),f[z].remove(tt,rt)})})};return P(A,"incoming","outgoing"),P(C,"outgoing","incoming"),this.R-=C.count()+A.count(),this.roots[p].remove(g),this.roots[p].remove(f),this.roots[p].add(N),N},h.prototype.rootMerges=function(g){void 0===g&&(g=0);for(var f=this.roots[g].modules(),p=f.length,C=new Array(p*(p-1)),A=0,L=0,N=p-1;L<N;++L)for(var P=L+1;P<p;++P){var R=f[L],Z=f[P];C[A]={id:A,nEdges:this.nEdges(R,Z),a:R,b:Z},A++}return C},h.prototype.greedyMerge=function(){for(var g=0;g<this.roots.length;++g)if(!(this.roots[g].modules().length<2)){var p=this.rootMerges(g).sort(function(C,A){return C.nEdges==A.nEdges?C.id-A.id:C.nEdges-A.nEdges})[0];if(!(p.nEdges>=this.R))return this.merge(p.a,p.b,g),!0}},h.prototype.nEdges=function(g,f){var p=g.incoming.intersection(f.incoming),C=g.outgoing.intersection(f.outgoing);return this.R-p.count()-C.count()},h.prototype.getGroupHierarchy=function(g){var f=this,p=[];return x(this.roots[0],{},p),this.allEdges().forEach(function(L){var N=f.modules[L.source],P=f.modules[L.target];g.push(new o(void 0===N.gid?L.source:p[N.gid],void 0===P.gid?L.target:p[P.gid],L.type))}),p},h.prototype.allEdges=function(){var g=[];return h.getEdges(this.roots[0],g),g},h.getEdges=function(g,f){g.forAll(function(p){p.getEdges(f),h.getEdges(p.children,f)})},h}();function x(h,g,f){h.forAll(function(p){if(p.isLeaf())g.leaves||(g.leaves=[]),g.leaves.push(p.id);else{var C=g;if(p.gid=f.length,!p.isIsland()||p.isPredefined()){if(C={id:p.gid},p.isPredefined())for(var A in p.definition)C[A]=p.definition[A];g.groups||(g.groups=[]),g.groups.push(p.gid),f.push(C)}x(p.children,C,f)}})}k.Configuration=u;var v=function(){function h(g,f,p,C,A){void 0===f&&(f=new l),void 0===p&&(p=new l),void 0===C&&(C=new m),this.id=g,this.outgoing=f,this.incoming=p,this.children=C,this.definition=A}return h.prototype.getEdges=function(g){var f=this;this.outgoing.forAll(function(p,C){p.forAll(function(A){g.push(new o(f.id,A.id,C))})})},h.prototype.isLeaf=function(){return 0===this.children.count()},h.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},h.prototype.isPredefined=function(){return void 0!==this.definition},h}();k.Module=v;var m=function(){function h(){this.table={}}return h.prototype.count=function(){return Object.keys(this.table).length},h.prototype.intersection=function(g){var f=new h;return f.table=function _(h,g){var f={};for(var p in h)p in g&&(f[p]=h[p]);return f}(this.table,g.table),f},h.prototype.intersectionCount=function(g){return this.intersection(g).count()},h.prototype.contains=function(g){return g in this.table},h.prototype.add=function(g){this.table[g.id]=g},h.prototype.remove=function(g){delete this.table[g.id]},h.prototype.forAll=function(g){for(var f in this.table)g(this.table[f])},h.prototype.modules=function(){var g=[];return this.forAll(function(f){f.isPredefined()||g.push(f)}),g},h}();k.ModuleSet=m;var l=function(){function h(){this.sets={},this.n=0}return h.prototype.count=function(){return this.n},h.prototype.contains=function(g){var f=!1;return this.forAllModules(function(p){!f&&p.id==g&&(f=!0)}),f},h.prototype.add=function(g,f){(g in this.sets?this.sets[g]:this.sets[g]=new m).add(f),++this.n},h.prototype.remove=function(g,f){var p=this.sets[g];p.remove(f),0===p.count()&&delete this.sets[g],--this.n},h.prototype.forAll=function(g){for(var f in this.sets)g(this.sets[f],Number(f))},h.prototype.forAllModules=function(g){this.forAll(function(f,p){return f.forAll(g)})},h.prototype.intersection=function(g){var f=new h;return this.forAll(function(p,C){if(C in g.sets){var A=p.intersection(g.sets[C]),L=A.count();L>0&&(f.sets[C]=A,f.n+=L)}}),f},h}();k.LinkSets=l,k.getGroups=function c(h,g,f,p){for(var A=new u(h.length,g,f,p);A.greedyMerge(););var L=[],N=A.getGroupHierarchy(L);return L.forEach(function(P){var R=function(Z){var z=P[Z];"number"==typeof z&&(P[Z]=h[z])};R("source"),R("target")}),{groups:N,powerEdges:L}}},88866:(w,k)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var o=function(){function x(v){this.elem=v,this.subheaps=[]}return x.prototype.toString=function(v){for(var _="",m=!1,l=0;l<this.subheaps.length;++l){var t=this.subheaps[l];t.elem?(m&&(_+=","),_+=t.toString(v),m=!0):m=!1}return""!==_&&(_="("+_+")"),(this.elem?v(this.elem):"")+_},x.prototype.forEach=function(v){this.empty()||(v(this.elem,this),this.subheaps.forEach(function(_){return _.forEach(v)}))},x.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(v,_){return v+_.count()},0)},x.prototype.min=function(){return this.elem},x.prototype.empty=function(){return null==this.elem},x.prototype.contains=function(v){if(this===v)return!0;for(var _=0;_<this.subheaps.length;_++)if(this.subheaps[_].contains(v))return!0;return!1},x.prototype.isHeap=function(v){var _=this;return this.subheaps.every(function(m){return v(_.elem,m.elem)&&m.isHeap(v)})},x.prototype.insert=function(v,_){return this.merge(new x(v),_)},x.prototype.merge=function(v,_){return this.empty()?v:v.empty()?this:_(this.elem,v.elem)?(this.subheaps.push(v),this):(v.subheaps.push(this),v)},x.prototype.removeMin=function(v){return this.empty()?null:this.mergePairs(v)},x.prototype.mergePairs=function(v){if(0==this.subheaps.length)return new x(null);if(1==this.subheaps.length)return this.subheaps[0];var _=this.subheaps.pop().merge(this.subheaps.pop(),v),m=this.mergePairs(v);return _.merge(m,v)},x.prototype.decreaseKey=function(v,_,m,l){var t=v.removeMin(l);v.elem=t.elem,v.subheaps=t.subheaps,null!==m&&null!==t.elem&&m(v.elem,v);var c=new x(_);return null!==m&&m(_,c),this.merge(c,l)},x}();k.PairingHeap=o;var u=function(){function x(v){this.lessThan=v}return x.prototype.top=function(){return this.empty()?null:this.root.elem},x.prototype.push=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];for(var m,t,l=0;t=v[l];++l)m=new o(t),this.root=this.empty()?m:this.root.merge(m,this.lessThan);return m},x.prototype.empty=function(){return!this.root||!this.root.elem},x.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},x.prototype.forEach=function(v){this.root.forEach(v)},x.prototype.pop=function(){if(this.empty())return null;var v=this.root.min();return this.root=this.root.removeMin(this.lessThan),v},x.prototype.reduceKey=function(v,_,m){void 0===m&&(m=null),this.root=this.root.decreaseKey(v,_,m,this.lessThan)},x.prototype.toString=function(v){return this.root.toString(v)},x.prototype.count=function(){return this.root.count()},x}();k.PriorityQueue=u},94655:function(w,k){"use strict";var m,o=this&&this.__extends||(m=function(l,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)h.hasOwnProperty(g)&&(c[g]=h[g])})(l,t)},function(l,t){function c(){this.constructor=l}m(l,t),l.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)});Object.defineProperty(k,"__esModule",{value:!0});var u=function(){function m(){this.findIter=function(l){for(var t=this._root,c=this.iterator();null!==t;){var h=this._comparator(l,t.data);if(0===h)return c._cursor=t,c;c._ancestors.push(t),t=t.get_child(h>0)}return null}}return m.prototype.clear=function(){this._root=null,this.size=0},m.prototype.find=function(l){for(var t=this._root;null!==t;){var c=this._comparator(l,t.data);if(0===c)return t.data;t=t.get_child(c>0)}return null},m.prototype.lowerBound=function(l){return this._bound(l,this._comparator)},m.prototype.upperBound=function(l){var t=this._comparator;return this._bound(l,function c(h,g){return t(g,h)})},m.prototype.min=function(){var l=this._root;if(null===l)return null;for(;null!==l.left;)l=l.left;return l.data},m.prototype.max=function(){var l=this._root;if(null===l)return null;for(;null!==l.right;)l=l.right;return l.data},m.prototype.iterator=function(){return new x(this)},m.prototype.each=function(l){for(var c,t=this.iterator();null!==(c=t.next());)l(c)},m.prototype.reach=function(l){for(var c,t=this.iterator();null!==(c=t.prev());)l(c)},m.prototype._bound=function(l,t){for(var c=this._root,h=this.iterator();null!==c;){var g=this._comparator(l,c.data);if(0===g)return h._cursor=c,h;h._ancestors.push(c),c=c.get_child(g>0)}for(var f=h._ancestors.length-1;f>=0;--f)if(t(l,(c=h._ancestors[f]).data)>0)return h._cursor=c,h._ancestors.length=f,h;return h._ancestors.length=0,h},m}();k.TreeBase=u;var x=function(){function m(l){this._tree=l,this._ancestors=[],this._cursor=null}return m.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},m.prototype.next=function(){if(null===this._cursor){var l=this._tree._root;null!==l&&this._minNode(l)}else if(null===this._cursor.right){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},m.prototype.prev=function(){if(null===this._cursor){var l=this._tree._root;null!==l&&this._maxNode(l)}else if(null===this._cursor.left){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},m.prototype._minNode=function(l){for(;null!==l.left;)this._ancestors.push(l),l=l.left;this._cursor=l},m.prototype._maxNode=function(l){for(;null!==l.right;)this._ancestors.push(l),l=l.right;this._cursor=l},m}();k.Iterator=x;var v=function(){function m(l){this.data=l,this.left=null,this.right=null,this.red=!0}return m.prototype.get_child=function(l){return l?this.right:this.left},m.prototype.set_child=function(l,t){l?this.right=t:this.left=t},m}(),_=function(m){function l(t){var c=m.call(this)||this;return c._root=null,c._comparator=t,c.size=0,c}return o(l,m),l.prototype.insert=function(t){var c=!1;if(null===this._root)this._root=new v(t),c=!0,this.size++;else{var h=new v(void 0),g=!1,f=!1,p=null,C=h,A=null,L=this._root;for(C.right=this._root;;){if(null===L?(L=new v(t),A.set_child(g,L),c=!0,this.size++):l.is_red(L.left)&&l.is_red(L.right)&&(L.red=!0,L.left.red=!1,L.right.red=!1),l.is_red(L)&&l.is_red(A)){var N=C.right===p;L===A.get_child(f)?C.set_child(N,l.single_rotate(p,!f)):C.set_child(N,l.double_rotate(p,!f))}var P=this._comparator(L.data,t);if(0===P)break;f=g,null!==p&&(C=p),p=A,A=L,L=L.get_child(g=P<0)}this._root=h.right}return this._root.red=!1,c},l.prototype.remove=function(t){if(null===this._root)return!1;var c=new v(void 0),h=c;h.right=this._root;for(var g=null,f=null,p=null,C=!0;null!==h.get_child(C);){var A=C;f=g,g=h,h=h.get_child(C);var L=this._comparator(t,h.data);if(C=L>0,0===L&&(p=h),!l.is_red(h)&&!l.is_red(h.get_child(C)))if(l.is_red(h.get_child(!C))){var N=l.single_rotate(h,C);g.set_child(A,N),g=N}else if(!l.is_red(h.get_child(!C))){var P=g.get_child(!A);if(null!==P)if(l.is_red(P.get_child(!A))||l.is_red(P.get_child(A))){var R=f.right===g;l.is_red(P.get_child(A))?f.set_child(R,l.double_rotate(g,A)):l.is_red(P.get_child(!A))&&f.set_child(R,l.single_rotate(g,A));var Z=f.get_child(R);Z.red=!0,h.red=!0,Z.left.red=!1,Z.right.red=!1}else g.red=!1,P.red=!0,h.red=!0}}return null!==p&&(p.data=h.data,g.set_child(g.right===h,h.get_child(null===h.left)),this.size--),this._root=c.right,null!==this._root&&(this._root.red=!1),null!==p},l.is_red=function(t){return null!==t&&t.red},l.single_rotate=function(t,c){var h=t.get_child(!c);return t.set_child(!c,h.get_child(c)),h.set_child(c,t),t.red=!0,h.red=!1,h},l.double_rotate=function(t,c){return t.set_child(!c,l.single_rotate(t.get_child(!c),!c)),l.single_rotate(t,c)},l}(u);k.RBTree=_},4068:function(w,k,o){"use strict";var J,u=this&&this.__extends||(J=function(et,q){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,Y){at.__proto__=Y}||function(at,Y){for(var K in Y)Y.hasOwnProperty(K)&&(at[K]=Y[K])})(et,q)},function(et,q){function at(){this.constructor=et}J(et,q),et.prototype=null===q?Object.create(q):(at.prototype=q.prototype,new at)});Object.defineProperty(k,"__esModule",{value:!0});var x=o(98237),v=o(94655);function _(J){return J.bounds=void 0!==J.leaves?J.leaves.reduce(function(et,q){return q.bounds.union(et)},m.empty()):m.empty(),void 0!==J.groups&&(J.bounds=J.groups.reduce(function(et,q){return _(q).union(et)},J.bounds)),J.bounds=J.bounds.inflate(J.padding),J.bounds}k.computeGroupBounds=_;var m=function(){function J(et,q,at,Y){this.x=et,this.X=q,this.y=at,this.Y=Y}return J.empty=function(){return new J(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},J.prototype.cx=function(){return(this.x+this.X)/2},J.prototype.cy=function(){return(this.y+this.Y)/2},J.prototype.overlapX=function(et){var q=this.cx(),at=et.cx();return q<=at&&et.x<this.X?this.X-et.x:at<=q&&this.x<et.X?et.X-this.x:0},J.prototype.overlapY=function(et){var q=this.cy(),at=et.cy();return q<=at&&et.y<this.Y?this.Y-et.y:at<=q&&this.y<et.Y?et.Y-this.y:0},J.prototype.setXCentre=function(et){var q=et-this.cx();this.x+=q,this.X+=q},J.prototype.setYCentre=function(et){var q=et-this.cy();this.y+=q,this.Y+=q},J.prototype.width=function(){return this.X-this.x},J.prototype.height=function(){return this.Y-this.y},J.prototype.union=function(et){return new J(Math.min(this.x,et.x),Math.max(this.X,et.X),Math.min(this.y,et.y),Math.max(this.Y,et.Y))},J.prototype.lineIntersections=function(et,q,at,Y){for(var K=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],ut=[],it=0;it<4;++it){var G=J.lineIntersection(et,q,at,Y,K[it][0],K[it][1],K[it][2],K[it][3]);null!==G&&ut.push({x:G.x,y:G.y})}return ut},J.prototype.rayIntersection=function(et,q){var at=this.lineIntersections(this.cx(),this.cy(),et,q);return at.length>0?at[0]:null},J.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},J.lineIntersection=function(et,q,at,Y,K,ut,it,G){var M=at-et,ft=it-K,It=Y-q,Zt=G-ut,zt=Zt*M-ft*It;if(0==zt)return null;var ne=et-K,Ut=q-ut,pt=(ft*Ut-Zt*ne)/zt,Jt=(M*Ut-It*ne)/zt;return pt>=0&&pt<=1&&Jt>=0&&Jt<=1?{x:et+pt*M,y:q+pt*It}:null},J.prototype.inflate=function(et){return new J(this.x-et,this.X+et,this.y-et,this.Y+et)},J}();k.Rectangle=m,k.makeEdgeBetween=function l(J,et,q){var at=J.rayIntersection(et.cx(),et.cy())||{x:J.cx(),y:J.cy()},Y=et.rayIntersection(J.cx(),J.cy())||{x:et.cx(),y:et.cy()},K=Y.x-at.x,ut=Y.y-at.y,it=Math.sqrt(K*K+ut*ut),G=it-q;return{sourceIntersection:at,targetIntersection:Y,arrowStart:{x:at.x+G*K/it,y:at.y+G*ut/it}}},k.makeEdgeTo=function t(J,et,q){var at=et.rayIntersection(J.x,J.y);at||(at={x:et.cx(),y:et.cy()});var Y=at.x-J.x,K=at.y-J.y,ut=Math.sqrt(Y*Y+K*K);return{x:at.x-q*Y/ut,y:at.y-q*K/ut}};var c=function J(et,q,at){this.v=et,this.r=q,this.pos=at,this.prev=f(),this.next=f()},h=function J(et,q,at){this.isOpen=et,this.v=q,this.pos=at};function g(J,et){return J.pos>et.pos?1:J.pos<et.pos||J.isOpen?-1:et.isOpen?1:0}function f(){return new v.RBTree(function(J,et){return J.pos-et.pos})}var p={getCentre:function(J){return J.cx()},getOpen:function(J){return J.y},getClose:function(J){return J.Y},getSize:function(J){return J.width()},makeRect:function(J,et,q,at){return new m(q-at/2,q+at/2,J,et)},findNeighbours:function N(J,et){var q=function(at,Y){for(var ut,K=et.findIter(J);null!==(ut=K[at]());){var it=ut.r.overlapX(J.r);if((it<=0||it<=ut.r.overlapY(J.r))&&(J[at].insert(ut),ut[Y].insert(J)),it<=0)break}};q("next","prev"),q("prev","next")}},C={getCentre:function(J){return J.cy()},getOpen:function(J){return J.x},getClose:function(J){return J.X},getSize:function(J){return J.height()},makeRect:function(J,et,q,at){return new m(J,et,q-at/2,q+at/2)},findNeighbours:function P(J,et){var q=function(at,Y){var K=et.findIter(J)[at]();null!==K&&K.r.overlapX(J.r)>0&&(J[at].insert(K),K[Y].insert(J))};q("next","prev"),q("prev","next")}};function A(J,et,q,at){void 0===at&&(at=!1);var Y=J.padding,K=void 0!==J.groups?J.groups.length:0,ut=void 0!==J.leaves?J.leaves.length:0,it=K?J.groups.reduce(function(_e,Te){return _e.concat(A(Te,et,q,!0))},[]):[],G=(at?2:0)+ut+K,M=new Array(G),ft=new Array(G),It=0,Zt=function(_e,Te){ft[It]=_e,M[It++]=Te};if(at){var zt=J.bounds,ne=et.getCentre(zt),Ut=et.getSize(zt)/2,xt=et.getOpen(zt),pt=et.getClose(zt),Nt=ne-Ut+Y/2,Jt=ne+Ut-Y/2;J.minVar.desiredPosition=Nt,Zt(et.makeRect(xt,pt,Nt,Y),J.minVar),J.maxVar.desiredPosition=Jt,Zt(et.makeRect(xt,pt,Jt,Y),J.maxVar)}ut&&J.leaves.forEach(function(_e){return Zt(_e.bounds,_e.variable)}),K&&J.groups.forEach(function(_e){var Te=_e.bounds;Zt(et.makeRect(et.getOpen(Te),et.getClose(Te),et.getCentre(Te),et.getSize(Te)),_e.minVar)});var ge=L(ft,M,et,q);return K&&(M.forEach(function(_e){_e.cOut=[],_e.cIn=[]}),ge.forEach(function(_e){_e.left.cOut.push(_e),_e.right.cIn.push(_e)}),J.groups.forEach(function(_e){var Te=(_e.padding-et.getSize(_e.bounds))/2;_e.minVar.cIn.forEach(function(Re){return Re.gap+=Te}),_e.minVar.cOut.forEach(function(Re){Re.left=_e.maxVar,Re.gap+=Te})})),it.concat(ge)}function L(J,et,q,at){var Y,K=J.length,ut=2*K;console.assert(et.length>=K);var it=new Array(ut);for(Y=0;Y<K;++Y){var G=J[Y],M=new c(et[Y],G,q.getCentre(G));it[Y]=new h(!0,M,q.getOpen(G)),it[Y+K]=new h(!1,M,q.getClose(G))}it.sort(g);var ft=new Array,It=f();for(Y=0;Y<ut;++Y){var Zt=it[Y];if(M=Zt.v,Zt.isOpen)It.insert(M),q.findNeighbours(M,It);else{It.remove(M);var zt=function(xt,pt){var Nt=(q.getSize(xt.r)+q.getSize(pt.r))/2+at;ft.push(new x.Constraint(xt.v,pt.v,Nt))},ne=function(xt,pt,Nt){for(var Jt,ge=M[xt].iterator();null!==(Jt=ge[xt]());)Nt(Jt,M),Jt[pt].remove(M)};ne("prev","next",function(xt,pt){return zt(xt,pt)}),ne("next","prev",function(xt,pt){return zt(pt,xt)})}}return console.assert(0===It.size),ft}function R(J,et){return L(J,et,p,1e-6)}function Z(J,et){return L(J,et,C,1e-6)}function z(J){return A(J,p,1e-6)}function H(J){return A(J,C,1e-6)}k.generateXConstraints=R,k.generateYConstraints=Z,k.generateXGroupConstraints=z,k.generateYGroupConstraints=H,k.removeOverlaps=function tt(J){var et=J.map(function(Y){return new x.Variable(Y.cx())}),q=R(J,et),at=new x.Solver(et,q);at.solve(),et.forEach(function(Y,K){return J[K].setXCentre(Y.position())}),et=J.map(function(Y){return new x.Variable(Y.cy())}),q=Z(J,et),(at=new x.Solver(et,q)).solve(),et.forEach(function(Y,K){return J[K].setYCentre(Y.position())})};var rt=function(J){function et(q,at){var Y=J.call(this,0,at)||this;return Y.index=q,Y}return u(et,J),et}(x.Variable);k.IndexedVariable=rt;var ot=function(){function J(et,q,at,Y,K){var ut=this;if(void 0===at&&(at=null),void 0===Y&&(Y=null),void 0===K&&(K=!1),this.nodes=et,this.groups=q,this.rootGroup=at,this.avoidOverlaps=K,this.variables=et.map(function(G,M){return G.variable=new rt(M,1)}),Y&&this.createConstraints(Y),K&&at&&void 0!==at.groups){et.forEach(function(G){if(G.width&&G.height){var M=G.width/2,ft=G.height/2;G.bounds=new m(G.x-M,G.x+M,G.y-ft,G.y+ft)}else G.bounds=new m(G.x,G.x,G.y,G.y)}),_(at);var it=et.length;q.forEach(function(G){ut.variables[it]=G.minVar=new rt(it++,void 0!==G.stiffness?G.stiffness:.01),ut.variables[it]=G.maxVar=new rt(it++,void 0!==G.stiffness?G.stiffness:.01)})}}return J.prototype.createSeparation=function(et){return new x.Constraint(this.nodes[et.left].variable,this.nodes[et.right].variable,et.gap,void 0!==et.equality&&et.equality)},J.prototype.makeFeasible=function(et){var q=this;if(this.avoidOverlaps){var at="x",Y="width";"x"===et.axis&&(at="y",Y="height");var K=et.offsets.map(function(it){return q.nodes[it.node]}).sort(function(it,G){return it[at]-G[at]}),ut=null;K.forEach(function(it){if(ut){var G=ut[at]+ut[Y];G>it[at]&&(it[at]=G)}ut=it})}},J.prototype.createAlignment=function(et){var q=this,at=this.nodes[et.offsets[0].node].variable;this.makeFeasible(et);var Y="x"===et.axis?this.xConstraints:this.yConstraints;et.offsets.slice(1).forEach(function(K){Y.push(new x.Constraint(at,q.nodes[K.node].variable,K.offset,!0))})},J.prototype.createConstraints=function(et){var q=this,at=function(Y){return void 0===Y.type||"separation"===Y.type};this.xConstraints=et.filter(function(Y){return"x"===Y.axis&&at(Y)}).map(function(Y){return q.createSeparation(Y)}),this.yConstraints=et.filter(function(Y){return"y"===Y.axis&&at(Y)}).map(function(Y){return q.createSeparation(Y)}),et.filter(function(Y){return"alignment"===Y.type}).forEach(function(Y){return q.createAlignment(Y)})},J.prototype.setupVariablesAndBounds=function(et,q,at,Y){this.nodes.forEach(function(K,ut){K.fixed?(K.variable.weight=K.fixedWeight?K.fixedWeight:1e3,at[ut]=Y(K)):K.variable.weight=1;var it=(K.width||0)/2,G=(K.height||0)/2,M=et[ut],ft=q[ut];K.bounds=new m(M-it,M+it,ft-G,ft+G)})},J.prototype.xProject=function(et,q,at){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(et,q,et,at,function(Y){return Y.px},this.xConstraints,z,function(Y){return Y.bounds.setXCentre(at[Y.variable.index]=Y.variable.position())},function(Y){var K=at[Y.minVar.index]=Y.minVar.position(),ut=at[Y.maxVar.index]=Y.maxVar.position(),it=Y.padding/2;Y.bounds.x=K-it,Y.bounds.X=ut+it})},J.prototype.yProject=function(et,q,at){!this.rootGroup&&!this.yConstraints||this.project(et,q,q,at,function(Y){return Y.py},this.yConstraints,H,function(Y){return Y.bounds.setYCentre(at[Y.variable.index]=Y.variable.position())},function(Y){var K=at[Y.minVar.index]=Y.minVar.position(),ut=at[Y.maxVar.index]=Y.maxVar.position(),it=Y.padding/2;Y.bounds.y=K-it,Y.bounds.Y=ut+it})},J.prototype.projectFunctions=function(){var et=this;return[function(q,at,Y){return et.xProject(q,at,Y)},function(q,at,Y){return et.yProject(q,at,Y)}]},J.prototype.project=function(et,q,at,Y,K,ut,it,G,M){this.setupVariablesAndBounds(et,q,Y,K),this.rootGroup&&this.avoidOverlaps&&(_(this.rootGroup),ut=ut.concat(it(this.rootGroup))),this.solve(this.variables,ut,at,Y),this.nodes.forEach(G),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(M),_(this.rootGroup))},J.prototype.solve=function(et,q,at,Y){var K=new x.Solver(et,q);K.setStartingPositions(at),K.setDesiredPositions(Y),K.solve()},J}();k.Projection=ot},33858:(w,k,o)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var u=o(88866),x=function l(t,c){this.id=t,this.distance=c},v=function l(t){this.id=t,this.neighbours=[]},_=function l(t,c,h){this.node=t,this.prev=c,this.d=h},m=function(){function l(t,c,h,g,f){this.n=t,this.es=c,this.neighbours=new Array(this.n);for(var p=this.n;p--;)this.neighbours[p]=new v(p);for(p=this.es.length;p--;){var C=this.es[p],A=h(C),L=g(C),N=f(C);this.neighbours[A].neighbours.push(new x(L,N)),this.neighbours[L].neighbours.push(new x(A,N))}}return l.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),c=0;c<this.n;++c)t[c]=this.dijkstraNeighbours(c);return t},l.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},l.prototype.PathFromNodeToNode=function(t,c){return this.dijkstraNeighbours(t,c)},l.prototype.PathFromNodeToNodeWithPrevCost=function(t,c,h){var g=new u.PriorityQueue(function(H,tt){return H.d<=tt.d}),f=this.neighbours[t],p=new _(f,null,0),C={};for(g.push(p);!g.empty()&&(f=(p=g.pop()).node).id!==c;)for(var A=f.neighbours.length;A--;){var L=f.neighbours[A],N=this.neighbours[L.id];if(!p.prev||N.id!==p.prev.node.id){var P=N.id+","+f.id;if(!(P in C&&C[P]<=p.d)){var R=p.prev?h(p.prev.node.id,f.id,N.id):0,Z=p.d+L.distance+R;C[P]=Z,g.push(new _(N,p,Z))}}}for(var z=[];p.prev;)z.push((p=p.prev).node.id);return z},l.prototype.dijkstraNeighbours=function(t,c){void 0===c&&(c=-1);for(var h=new u.PriorityQueue(function(R,Z){return R.d<=Z.d}),g=this.neighbours.length,f=new Array(g);g--;){var p=this.neighbours[g];p.d=g===t?0:Number.POSITIVE_INFINITY,p.q=h.push(p)}for(;!h.empty();){var C=h.pop();if(f[C.id]=C.d,C.id===c){for(var A=[],L=C;void 0!==L.prev;)A.push(L.prev.id),L=L.prev;return A}for(g=C.neighbours.length;g--;){var N=C.neighbours[g],P=(L=this.neighbours[N.id],C.d+N.distance);C.d!==Number.MAX_VALUE&&L.d>P&&(L.d=P,L.prev=C,h.reduceKey(L.q,L,function(Z,z){return Z.q=z}))}}return f},l}();k.Calculator=m},98237:(w,k)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});var o=function(){function t(c){this.scale=c,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(c){var h=this.scale/c.scale,f=c.weight;this.AB+=f*h*(c.offset/c.scale),this.AD+=f*h*c.desiredPosition,this.A2+=f*h*h},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();k.PositionStats=o;var u=function(){function t(c,h,g,f){void 0===f&&(f=!1),this.left=c,this.right=h,this.gap=g,this.equality=f,this.active=!1,this.unsatisfiable=!1,this.left=c,this.right=h,this.gap=g,this.equality=f}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();k.Constraint=u;var x=function(){function t(c,h,g){void 0===h&&(h=1),void 0===g&&(g=1),this.desiredPosition=c,this.weight=h,this.scale=g,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(c,h){var g=function(f,p){return f.active&&c!==p&&h(f,p)};this.cOut.forEach(function(f){return g(f,f.right)}),this.cIn.forEach(function(f){return g(f,f.left)})},t}();k.Variable=x;var v=function(){function t(c){this.vars=[],c.offset=0,this.ps=new o(c.scale),this.addVariable(c)}return t.prototype.addVariable=function(c){c.block=this,this.vars.push(c),this.ps.addVariable(c),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var c=0,h=this.vars.length;c<h;++c)this.ps.addVariable(this.vars[c]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(c,h,g){var f=this,p=c.dfdv();return c.visitNeighbours(h,function(C,A){var L=f.compute_lm(A,c,g);A===C.right?(p+=L*C.left.scale,C.lm=L):(p+=L*C.right.scale,C.lm=-L),g(C)}),p/c.scale},t.prototype.populateSplitBlock=function(c,h){var g=this;c.visitNeighbours(h,function(f,p){p.offset=c.offset+(p===f.right?f.gap:-f.gap),g.addVariable(p),g.populateSplitBlock(p,c)})},t.prototype.traverse=function(c,h,g,f){var p=this;void 0===g&&(g=this.vars[0]),void 0===f&&(f=null),g.visitNeighbours(f,function(C,A){h.push(c(C)),p.traverse(c,h,A,g)})},t.prototype.findMinLM=function(){var c=null;return this.compute_lm(this.vars[0],null,function(h){!h.equality&&(null===c||h.lm<c.lm)&&(c=h)}),c},t.prototype.findMinLMBetween=function(c,h){this.compute_lm(c,null,function(){});var g=null;return this.findPath(c,null,h,function(f,p){!f.equality&&f.right===p&&(null===g||f.lm<g.lm)&&(g=f)}),g},t.prototype.findPath=function(c,h,g,f){var p=this,C=!1;return c.visitNeighbours(h,function(A,L){!C&&(L===g||p.findPath(L,c,g,f))&&(C=!0,f(A,L))}),C},t.prototype.isActiveDirectedPathBetween=function(c,h){if(c===h)return!0;for(var g=c.cOut.length;g--;){var f=c.cOut[g];if(f.active&&this.isActiveDirectedPathBetween(f.right,h))return!0}return!1},t.split=function(c){return c.active=!1,[t.createSplitBlock(c.left),t.createSplitBlock(c.right)]},t.createSplitBlock=function(c){var h=new t(c);return h.populateSplitBlock(c,null),h},t.prototype.splitBetween=function(c,h){var g=this.findMinLMBetween(c,h);if(null!==g){var f=t.split(g);return{constraint:g,lb:f[0],rb:f[1]}}return null},t.prototype.mergeAcross=function(c,h,g){h.active=!0;for(var f=0,p=c.vars.length;f<p;++f){var C=c.vars[f];C.offset+=g,this.addVariable(C)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var c=0,h=this.vars.length;h--;){var g=this.vars[h],f=g.position()-g.desiredPosition;c+=f*f*g.weight}return c},t}();k.Block=v;var _=function(){function t(c){this.vs=c;var h=c.length;for(this.list=new Array(h);h--;){var g=new v(c[h]);this.list[h]=g,g.blockInd=h}}return t.prototype.cost=function(){for(var c=0,h=this.list.length;h--;)c+=this.list[h].cost();return c},t.prototype.insert=function(c){c.blockInd=this.list.length,this.list.push(c)},t.prototype.remove=function(c){var h=this.list.length-1,g=this.list[h];this.list.length=h,c!==g&&(this.list[c.blockInd]=g,g.blockInd=c.blockInd)},t.prototype.merge=function(c){var h=c.left.block,g=c.right.block,f=c.right.offset-c.left.offset-c.gap;h.vars.length<g.vars.length?(g.mergeAcross(h,c,f),this.remove(h)):(h.mergeAcross(g,c,-f),this.remove(g))},t.prototype.forEach=function(c){this.list.forEach(c)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(c){return c.updateWeightedPosition()})},t.prototype.split=function(c){var h=this;this.updateBlockPositions(),this.list.forEach(function(g){var f=g.findMinLM();null!==f&&f.lm<m.LAGRANGIAN_TOLERANCE&&(g=f.left.block,v.split(f).forEach(function(p){return h.insert(p)}),h.remove(g),c.push(f))})},t}();k.Blocks=_;var m=function(){function t(c,h){this.vs=c,this.cs=h,this.vs=c,c.forEach(function(g){g.cIn=[],g.cOut=[]}),this.cs=h,h.forEach(function(g){g.left.cOut.push(g),g.right.cIn.push(g)}),this.inactive=h.map(function(g){return g.active=!1,g}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(c){this.inactive=this.cs.map(function(h){return h.active=!1,h}),this.bs=new _(this.vs),this.bs.forEach(function(h,g){return h.posn=c[g]})},t.prototype.setDesiredPositions=function(c){this.vs.forEach(function(h,g){return h.desiredPosition=c[g]})},t.prototype.mostViolated=function(){for(var c=Number.MAX_VALUE,h=null,g=this.inactive,f=g.length,p=f,C=0;C<f;++C){var A=g[C];if(!A.unsatisfiable){var L=A.slack();if((A.equality||L<c)&&(c=L,h=A,p=C,A.equality))break}}return p!==f&&(c<t.ZERO_UPPERBOUND&&!h.active||h.equality)&&(g[p]=g[f-1],g.length=f-1),h},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new _(this.vs)),this.bs.split(this.inactive);for(var c=null;(c=this.mostViolated())&&(c.equality||c.slack()<t.ZERO_UPPERBOUND&&!c.active);){var h=c.left.block;if(h!==c.right.block)this.bs.merge(c);else{if(h.isActiveDirectedPathBetween(c.right,c.left)){c.unsatisfiable=!0;continue}var f=h.splitBetween(c.left,c.right);if(null===f){c.unsatisfiable=!0;continue}this.bs.insert(f.lb),this.bs.insert(f.rb),this.bs.remove(h),this.inactive.push(f.constraint),c.slack()>=0?this.inactive.push(c):this.bs.merge(c)}}},t.prototype.solve=function(){this.satisfy();for(var c=Number.MAX_VALUE,h=this.bs.cost();Math.abs(c-h)>1e-4;)this.satisfy(),c=h,h=this.bs.cost();return h},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();k.Solver=m,k.removeOverlapInOneDimension=function l(t,c,h){for(var g=t.map(function(rt){return new x(rt.desiredCenter)}),f=[],p=t.length,C=0;C<p-1;C++)f.push(new u(g[C],g[C+1],(t[C].size+t[C+1].size)/2));var N=g[0],P=g[p-1],R=t[0].size/2,Z=t[p-1].size/2,z=null,H=null;return c&&(z=new x(c,1e3*N.weight),g.push(z),f.push(new u(z,N,R))),h&&(H=new x(h,1e3*P.weight),g.push(H),f.push(new u(P,H,Z))),new m(g,f).solve(),{newCenters:g.slice(0,t.length).map(function(rt){return rt.position()}),lowerBound:z?z.position():N.position()-R,upperBound:H?H.position():P.position()+Z}}}}]);