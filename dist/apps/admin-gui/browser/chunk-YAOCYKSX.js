import{Aa as _,Ag as Oe,Ba as M,Ca as v,Cc as me,Da as C,Dc as ue,Gc as he,Ha as k,Hc as Se,Ia as A,Ja as O,Kc as _e,La as q,Lb as X,Lc as Ce,Mc as fe,N as $,Na as d,Oa as I,Oc as ge,Pa as h,Pc as L,Q as w,Qc as be,Rc as ve,S as T,Sf as Me,T as x,V as W,W as Q,Wa as N,Wg as Ne,Xa as V,_a as D,_e as Le,aa as o,cb as c,d as z,db as p,ea as E,eb as P,fa as U,fe as Ie,gd as De,hd as Te,id as xe,jd as Ee,ka as u,la as G,lc as Y,mc as Z,nc as B,oa as y,oc as ee,pc as te,pf as we,pi as j,qa as f,qb as J,qc as ie,qf as ye,ra as g,rc as ae,rf as H,sc as ne,sf as F,tb as K,tc as oe,uc as re,va as m,vc as le,wa as l,wc as se,wd as Re,wg as ke,xa as s,xc as ce,ya as R,yc as pe,za as S,zc as de,zg as Ae}from"./chunk-353QRQI4.js";var pt=(()=>{class e{constructor(t,a){this.router=t,this.routeReuseStrategy=a;let i=a;this.refreshCachedData=new z(""),t.events.subscribe(r=>{r instanceof he&&(r.navigationTrigger==="popstate"?i.setLastNavigationType("back"):i.setLastNavigationType("direct")),r instanceof Se&&i.isRouteCached(r.url)&&this.refreshCachedData.next(i.getActiveCachedComponentId())})}init(){}refreshComponentCachedData(){return this.refreshCachedData.asObservable()}static{this.\u0275fac=function(a){return new(a||e)(w(Ce),w(_e))}}static{this.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var He=e=>({all:e}),Fe=e=>({name:e}),Ve=e=>["/admin/services",e];function je(e,n){if(e&1){let t=M();l(0,"th",18)(1,"mat-checkbox",19),c(2,"masterCheckboxLabel"),c(3,"translate"),v("change",function(i){T(t);let r=C(2);return x(i?r.masterToggle():null)}),s()()}if(e&2){let t=C(),a=C();o(),m("aria-label",p(3,5,p(2,3,t.all)))("checked",a.selection.hasValue()&&t.all)("indeterminate",a.selection.hasValue()&&!t.all)}}function ze(e,n){if(e&1){let t=M();l(0,"td",20)(1,"mat-checkbox",21),c(2,"lowercase"),c(3,"checkboxLabel"),c(4,"translate"),v("change",function(i){let r=T(t).$implicit,b=C(2);return x(i?b.toggleRow(r):null)})("click",function(i){return T(t),x(i.stopPropagation())}),s()()}if(e&2){let t=n.$implicit,a=C(2);o(),y("data-cy",V("",p(2,4,t.name),"-checkbox")),m("aria-label",P(4,8,p(3,6,a.selection.isSelected(t)),D(11,Fe,t.name)))("checked",a.selection.isSelected(t))}}function $e(e,n){e&1&&(S(0,3),u(1,je,4,7,"th",16)(2,ze,5,13,"td",17),_())}function We(e,n){e&1&&(l(0,"th",22),d(1),c(2,"translate"),s()),e&2&&(o(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.ID")," "))}function Qe(e,n){if(e&1&&(l(0,"td",23),d(1),s()),e&2){let t=n.$implicit;o(),I(t.id)}}function Ue(e,n){e&1&&(l(0,"th",22),d(1),c(2,"translate"),s()),e&2&&(o(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.NAME")," "))}function Ge(e,n){if(e&1&&(l(0,"td",24),c(1,"lowercase"),d(2),s()),e&2){let t=n.$implicit;y("data-cy",V("",p(1,3,t.name),"-name-td")),o(2),h(" ",t.name," ")}}function qe(e,n){e&1&&R(0,"th",25)}function Je(e,n){e&1&&(l(0,"mat-icon",26),c(1,"translate"),d(2," check_circle_outline "),s()),e&2&&m("matTooltip",N(p(1,2,"SHARED.COMPONENTS.SERVICES_LIST.ENABLED")))}function Ke(e,n){e&1&&(l(0,"mat-icon",27),c(1,"translate"),d(2," block "),s()),e&2&&m("matTooltip",N(p(1,2,"SHARED.COMPONENTS.SERVICES_LIST.DISABLED")))}function Xe(e,n){if(e&1&&(l(0,"td",24),f(1,Je,3,4,"mat-icon",26),f(2,Ke,3,4,"mat-icon",27),s()),e&2){let t=n.$implicit;o(),g(t.enabled?1:-1),o(),g(t.enabled?-1:2)}}function Ye(e,n){e&1&&(l(0,"th",25),d(1),c(2,"translate"),s()),e&2&&(o(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.SCRIPT")," "))}function Ze(e,n){if(e&1&&(l(0,"td",24),d(1),s()),e&2){let t=n.$implicit;o(),I(t.script)}}function et(e,n){e&1&&(l(0,"th",22),d(1),c(2,"translate"),s()),e&2&&(o(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.DESCRIPTION")," "))}function tt(e,n){if(e&1&&(l(0,"td",24),d(1),s()),e&2){let t=n.$implicit;o(),I(t.description)}}function it(e,n){e&1&&R(0,"tr",28)}function at(e,n){if(e&1&&R(0,"tr",29),e&2){let t=n.$implicit,a=C();q("cursor-pointer",!a.disableRouting)("disable-outline",a.disableRouting),m("perunWebAppsMiddleClickRouterLink",a.disableRouting?null:D(6,Ve,t.id))("routerLink",a.disableRouting?null:D(8,Ve,t.id))}}function nt(e,n){e&1&&(l(0,"perun-web-apps-alert",15),d(1),c(2,"translate"),s()),e&2&&(o(),h(" ",p(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT")," "))}function ot(e,n){e&1&&(l(0,"perun-web-apps-alert",15),d(1),c(2,"translate"),s()),e&2&&(o(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.NO_SERVICES_WARNING")," "))}var Wt=(()=>{class e{constructor(t,a,i){this.authResolver=t,this.tableCheckbox=a,this.destroyRef=i,this.services=[],this.filterValue="",this.displayedColumns=["select","id","name","enabled","script","description"],this.selection=new B(!0,[]),this.disableRouting=!1,this.selectionChanged=new G,this.pageSizeOptions=Le}set matSort(t){this.sort=t,this.setDataSource()}static getDataForColumn(t,a){switch(a){case"id":return t.id.toString();case"name":return t.name;case"enabled":return t.enabled?"true":"false";case"script":return t.script;case"description":return t.description;default:return""}}ngOnInit(){this.selection&&(this.cachedSelection=new B(this.selection.isMultipleSelection(),[],!0,this.selection.compareWith),this.cachedSubject?.pipe(Ne(this.destroyRef)).subscribe(t=>{t&&this.cachedSelection.clear()}))}ngOnChanges(){localStorage.getItem("showIds")!=="true"&&(this.displayedColumns=this.displayedColumns.filter(t=>t!=="id")),this.dataSource=new de(this.services),this.setDataSource(),this.selection.changed.subscribe(()=>{this.selectionChanged.emit()})}exportAllData(t){F(H(this.dataSource.filteredData,this.displayedColumns,e.getDataForColumn),t)}exportDisplayedData(t){let a=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,i=a+this.dataSource.paginator.pageSize;F(H(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(a,i),this.displayedColumns,e.getDataForColumn),t)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(t,a)=>ye(t,a,this.displayedColumns,e.getDataForColumn),this.dataSource.sortData=(t,a)=>we(t,a,e.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}toggleRow(t){this.selection.toggle(t),this.cachedSelection.toggle(t)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.cachedSelection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}pageChanged(){this.cachedSelection&&this.tableCheckbox.selectCachedDataOnPage(this.dataSource,this.selection,this.cachedSelection,this.selection.compareWith)}static{this.\u0275fac=function(a){return new(a||e)(E(Ie),E(Me),E(W))}}static{this.\u0275cmp=U({type:e,selectors:[["app-services-list"]],viewQuery:function(a,i){if(a&1&&(k(j,7),k(L,7)),a&2){let r;A(r=O())&&(i.child=r.first),A(r=O())&&(i.matSort=r.first)}},inputs:{services:"services",filterValue:"filterValue",tableId:"tableId",displayedColumns:"displayedColumns",selection:"selection",cachedSubject:"cachedSubject",disableRouting:"disableRouting",loading:"loading"},outputs:{selectionChanged:"selectionChanged"},features:[Q],decls:24,vars:15,consts:[[1,"card","mt-3",3,"hidden"],[3,"exportDisplayedData","exportAllData","pageChanged","pageSizeOptions","dataLength","tableId"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"matSortChange","dataSource"],["matColumnDef","select"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enabled"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","script"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","disable-outline","perunWebAppsMiddleClickRouterLink","routerLink",4,"matRowDef","matRowDefColumns"],["alert_type","warn"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"change","aria-label","checked","indeterminate"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"change","click","aria-label","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],[1,"align-bottom","green",3,"matTooltip"],[1,"align-bottom","red",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"perunWebAppsMiddleClickRouterLink","routerLink"]],template:function(a,i){if(a&1&&(l(0,"div",0)(1,"perun-web-apps-table-wrapper",1),v("exportDisplayedData",function(b){return i.exportDisplayedData(b)})("exportAllData",function(b){return i.exportAllData(b)})("pageChanged",function(){return i.pageChanged()}),l(2,"table",2),v("matSortChange",function(){return i.pageSizeOptions}),f(3,$e,3,0,"ng-container",3),c(4,"isAllSelected"),S(5,4),u(6,We,3,3,"th",5)(7,Qe,2,1,"td",6),_(),S(8,7),u(9,Ue,3,3,"th",5)(10,Ge,3,5,"td",8),_(),S(11,9),u(12,qe,1,0,"th",10)(13,Xe,3,2,"td",8),_(),S(14,11),u(15,Ye,3,3,"th",10)(16,Ze,2,1,"td",8),_(),S(17,12),u(18,et,3,3,"th",5)(19,tt,2,1,"td",8),_(),u(20,it,1,0,"tr",13)(21,at,1,10,"tr",14),s()()(),f(22,nt,3,3,"perun-web-apps-alert",15),f(23,ot,3,3,"perun-web-apps-alert",15)),a&2){let r;m("hidden",i.services===void 0||i.services.length===0||i.dataSource.filteredData.length===0),o(),m("pageSizeOptions",i.pageSizeOptions)("dataLength",i.dataSource.filteredData.length)("tableId",i.tableId),o(),m("dataSource",i.dataSource),o(),g((r=D(13,He,P(4,10,i.dataSource,i.selection.selected.length)))?3:-1,r),o(17),m("matHeaderRowDef",i.displayedColumns),o(),m("matRowDefColumns",i.displayedColumns),o(),g(i.dataSource.filteredData.length===0&&i.services!==void 0&&i.services.length!==0?22:-1),o(),g(!i.loading&&(i.services===void 0||i.services.length===0)?23:-1)}},dependencies:[K,Te,De,Z,Y,Ee,xe,Re,j,ge,fe,pe,ee,ie,re,ae,te,le,ne,oe,se,ce,ve,L,be,ue,X,J,ke,me,Ae,Oe],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.disable-outline[_ngcontent-%COMP%]{outline:none!important}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:red}"]})}}return e})();export{pt as a,Wt as b};
