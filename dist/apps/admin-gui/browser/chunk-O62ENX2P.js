import{Aa as Oe,Ba as R,Bc as P,Ca as _,Cc as y,Da as I,Dc as x,Fj as ee,H as Le,Ic as Qe,K as Ue,Ka as O,Lc as Xe,Ma as k,Mi as Ie,Na as d,Ni as rt,Oa as h,Of as X,Pa as S,Qb as ie,Qd as U,Qh as _e,Rb as T,Rh as nt,S as g,Sb as ne,Sc as ae,T as C,Tc as se,Wc as le,Xa as Be,Xb as G,Xf as it,Yc as de,Za as Me,Ze as ye,_b as re,aa as n,bd as N,cb as s,cd as L,d as te,db as l,ea as c,ec as Fe,ee as Y,fa as A,fe as H,gd as ce,ge as q,gk as at,hd as et,he as z,ib as B,id as pe,ie as Se,ik as st,jc as oe,jd as me,je as K,k as xe,ka as b,kd as W,ke as Z,kj as ot,ld as ue,le as $,mb as Ge,me as J,mf as Q,nc as j,ob as Ve,oc as ke,pc as je,qa as v,qc as Pe,ra as E,rc as We,s as Ne,sc as Ye,tb as M,tc as He,td as fe,uc as qe,ud as he,va as p,vc as ze,wa as a,wc as Ke,xa as o,xc as Ze,xd as V,ya as f,yc as $e,za as we,zc as Je,zd as tt}from"./chunk-353QRQI4.js";function mt(t,u){t&1&&f(0,"perun-web-apps-loading-dialog")}function ut(t,u){t&1&&f(0,"perun-web-apps-loading-table")}function ft(t,u){if(t&1&&(f(0,"perun-web-apps-users-list",15),s(1,"translate")),t&2){let e=I(3);p("loading",e.loading)("displayColumns",e.displayedColumns)("selection",e.selection)("tableId",e.tableId)("disableRouting",!0)("users",e.identities)("noUsersFoundLabel",l(1,7,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES"))}}function ht(t,u){if(t&1&&(a(0,"div",9),b(1,ft,2,9,"perun-web-apps-users-list",14),o()),t&2){I();let e=O(18),r=I();n(),p("perunWebAppsLoader",r.loading)("perunWebAppsLoaderIndicator",e)}}function St(t,u){t&1&&(a(0,"perun-web-apps-alert",10),d(1),s(2,"translate"),o()),t&2&&(n(),S(" ",l(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function _t(t,u){if(t&1){let e=R();a(0,"div")(1,"div",3),_("keyup",function(i){g(e);let m=I();return C(m.onKeyInput(i))}),a(2,"h1",4),d(3),s(4,"translate"),o(),a(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),d(8),s(9,"translate"),o(),f(10,"input",7),a(11,"mat-error"),d(12),s(13,"translate"),o()(),a(14,"button",8),_("click",function(){g(e);let i=I();return C(i.onSearchByString())}),a(15,"mat-icon"),d(16,"search"),o()(),b(17,ut,1,0,"ng-template",null,1,B),v(19,ht,2,2,"div",9),v(20,St,3,3,"perun-web-apps-alert",10),o(),a(21,"div",11)(22,"button",12),_("click",function(){g(e);let i=I();return C(i.onCancel())}),d(23),s(24,"translate"),o(),a(25,"button",13),_("click",function(){g(e);let i=I();return C(i.onAdd())}),d(26),s(27,"translate"),o()()()()}if(t&2){let e=I();n(),k(e.theme),n(2),h(l(4,12,"DIALOGS.CONNECT_IDENTITY.TITLE_"+e.target)),n(5),h(l(9,14,"DIALOGS.CONNECT_IDENTITY.SEARCH")),n(2),p("formControl",e.searchCtrl),n(2),S(" ",l(13,16,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),n(2),p("disabled",e.loading),n(5),E(e.firstSearchDone?19:-1),n(),E(e.firstSearchDone?-1:20),n(3),S(" ",l(24,18,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),n(2),p("disabled",e.loading||e.selection.selected.length===0),n(),S(" ",l(27,20,"DIALOGS.CONNECT_IDENTITY.CONNECT")," ")}}var De=(()=>{class t{constructor(e,r,i,m,D,w){this.dialogRef=e,this.data=r,this.userManager=i,this.storeService=m,this.notificator=D,this.translate=w,this.loading=!1,this.finalLoading=!1,this.identities=[],this.selection=new j(!1,[],!0,(F,Re)=>F.id===Re.id),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=_e}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new G("",[T.required,T.pattern(".*[\\S]+.*")])}onAdd(){this.finalLoading=!0;let e,r;this.isService?(e=this.selection.selected[0].id,r=this.userId):(e=this.userId,r=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(e,r).subscribe({next:()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)},error:()=>this.finalLoading=!1})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid){this.searchCtrl.markAllAsTouched();return}this.loading=!0,this.firstSearchDone=!0;let e=[ye.USER_DEF_ORGANIZATION,ye.USER_DEF_PREFERRED_MAIL];e=e.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value.trim(),e).subscribe({next:r=>{this.identities=this.filterIdentities(r),this.loading=!1},error:()=>this.loading=!1})}onKeyInput(e){e.key==="Enter"&&this.onSearchByString()}filterIdentities(e){return this.isService?e.filter(r=>!r.serviceUser):e.filter(r=>r.serviceUser)}static{this.\u0275fac=function(r){return new(r||t)(c(q),c(z),c(U),c(Y),c(X),c(P))}}static{this.\u0275cmp=A({type:t,selectors:[["app-connect-identity-dialog"]],decls:4,vars:5,consts:[["spinner",""],["searchSpinner",""],[4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"me-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"formControl"],["color","primary","mat-flat-button","",1,"me-2","search-btn",3,"click","disabled"],[1,"position-relative","table-min-height"],["alert_type","info"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","accent","mat-flat-button","",1,"ms-2",3,"click","disabled"],[3,"loading","displayColumns","selection","tableId","disableRouting","users","noUsersFoundLabel",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"loading","displayColumns","selection","tableId","disableRouting","users","noUsersFoundLabel"]],template:function(r,i){if(r&1&&(b(0,mt,1,0,"ng-template",null,0,B),a(2,"div"),b(3,_t,28,22,"div",2),o()),r&2){let m=O(1);n(2),k(Be("",i.theme," position-relative")),n(),p("perunWebAppsLoader",i.finalLoading)("perunWebAppsLoaderIndicator",m)}},dependencies:[M,L,N,et,ce,de,le,ae,se,he,fe,oe,ie,ne,re,J,K,$,Z,me,pe,ue,x,V,ee,W,y],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]})}}return t})();function It(t,u){t&1&&f(0,"perun-web-apps-loading-dialog")}function gt(t,u){t&1&&(a(0,"perun-web-apps-alert",5),d(1),s(2,"translate"),o()),t&2&&(n(),S(" ",l(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}function Ct(t,u){t&1&&(a(0,"perun-web-apps-alert",5),d(1),s(2,"translate"),o()),t&2&&(n(),S(" ",l(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function vt(t,u){t&1&&f(0,"th",15)}function Et(t,u){if(t&1&&(a(0,"td",16),d(1),s(2,"userFullName"),o()),t&2){let e=u.$implicit;n(),h(l(2,1,e))}}function Tt(t,u){t&1&&f(0,"tr",17)}function bt(t,u){t&1&&f(0,"tr",18)}function Dt(t,u){if(t&1){let e=R();a(0,"div")(1,"h1",2),d(2),s(3,"translate"),o(),a(4,"div")(5,"div",3)(6,"p"),d(7),s(8,"translate"),o(),a(9,"div",4),d(10),s(11,"translate"),o(),v(12,gt,3,3,"perun-web-apps-alert",5),v(13,Ct,3,3,"perun-web-apps-alert",5),a(14,"table",6),we(15,7),b(16,vt,1,0,"th",8)(17,Et,3,3,"td",9),Oe(),b(18,Tt,1,0,"tr",10)(19,bt,1,0,"tr",11),o()(),a(20,"div",12)(21,"button",13),_("click",function(){g(e);let i=I();return C(i.onCancel())}),d(22),s(23,"translate"),o(),a(24,"button",14),_("click",function(){g(e);let i=I();return C(i.onConfirm())}),d(25),s(26,"translate"),o()()()()}if(t&2){let e=I();n(2),h(l(3,12,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+e.targetTitle)),n(2),k(e.theme),n(3),h(l(8,14,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+e.targetDescription)),n(3),S(" ",l(11,16,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),n(2),E(e.disconnectingLastOwner?12:-1),n(),E(e.disconnectingSelf?13:-1),n(),p("dataSource",e.dataSource),n(4),p("matHeaderRowDef",e.displayedColumns),n(),p("matRowDefColumns",e.displayedColumns),n(3),S(" ",l(23,18,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),n(3),S(" ",l(26,20,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," ")}}var Ae=(()=>{class t{constructor(e,r,i,m,D,w,F){this.dialogRef=e,this.data=r,this.userManager=i,this.notificator=m,this.translate=D,this.store=w,this.authService=F,this.loading=!1,this.displayedColumns=["name"]}ngOnInit(){this.loading=!0,this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new Je([this.data.specificUser]),this.isService=this.data.isService;let e,r;this.isService?(e=this.userId,r=this.dataSource.data[0].id,this.disconnectingSelf=!this.authService.isPerunAdmin()&&r===this.store.getPerunPrincipal().userId):(e=this.dataSource.data[0].id,r=this.userId,this.disconnectingSelf=!this.authService.isPerunAdmin()&&this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUnanonymizedUsersBySpecificUser(e).subscribe({next:i=>{i.length===1&&(this.disconnectingLastOwner=i[0].id===r),this.loading=!1},error:()=>{this.loading=!1}})}onConfirm(){let e,r;this.isService?(e=this.dataSource.data[0].id,r=this.userId):(e=this.userId,r=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(e,r).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(r){return new(r||t)(c(q),c(z),c(U),c(X),c(P),c(Y),c(H))}}static{this.\u0275cmp=A({type:t,selectors:[["app-disconnect-identity-dialog"]],decls:3,vars:2,consts:[["spinner",""],[4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"fw-bold"],["alert_type","warn"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","fw-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","warn","mat-flat-button","",1,"ms-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"fw-bolder"],["mat-row",""]],template:function(r,i){if(r&1&&b(0,It,1,0,"ng-template",null,0,B)(2,Dt,27,22,"div",1),r&2){let m=O(1);n(2),p("perunWebAppsLoader",i.loading)("perunWebAppsLoaderIndicator",m)}},dependencies:[M,L,N,J,K,$,Z,me,pe,ue,$e,ke,Pe,qe,We,je,ze,Ye,He,Ke,Ze,x,V,y,tt],encapsulation:2})}}return t})();var Rt=()=>[],Mt=()=>({color:"black"});function yt(t,u){t&1&&(f(0,"perun-web-apps-back-button"),a(1,"h1",9),f(2,"mat-icon",10),d(3),s(4,"translate"),o()),t&2&&(n(2),p("ngStyle",Me(4,Mt)),n(),S(" ",l(4,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE_NON_ADMIN")," "))}function xt(t,u){t&1&&(a(0,"h1",2),d(1),s(2,"translate"),o()),t&2&&(n(),h(l(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")))}function Nt(t,u){if(t&1){let e=R();a(0,"button",11),_("click",function(){g(e);let i=I();return C(i.onAdd())}),d(1),s(2,"translate"),o()}t&2&&(n(),S(" ",l(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE")," "))}function Lt(t,u){if(t&1){let e=R();a(0,"button",12),_("click",function(){g(e);let i=I();return C(i.onRemove())}),d(1),s(2,"translate"),o()}if(t&2){let e=I();p("disabled",e.loading||e.selection.selected.length===0),n(),S(" ",l(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE")," ")}}function Ut(t,u){t&1&&f(0,"perun-web-apps-loading-table")}function wt(t,u){if(t&1&&(f(0,"perun-web-apps-users-list",13),s(1,"translate")),t&2){let e=I();p("loading",e.loading)("noUsersFoundLabel",l(1,9,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("routeToAdmin",e.routeToAdminSection)("displayColumns",e.displayedColumns)("selection",e.selection)("tableId",e.tableId)("users",e.identities)("filter",e.filterValue)("cacheSubject",e.cacheSubject)}}var tn=(()=>{class t{constructor(e,r,i,m,D,w){this.sideMenuService=e,this.route=r,this.dialog=i,this.userManager=m,this.authResolver=D,this.store=w,this.loading=!1,this.selection=new j(!1,[],!1,(F,Re)=>F.id===Re.id),this.identities=[],this.tableId=_e,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE",this.cacheSubject=new te(!0),this.filterValue="",this.classesForGlobalView=["container-fluid","ps-xl-5","pe-xl-5","user-theme"]}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.loading=!0,this.subscription=this.route.parent.params.subscribe(e=>{this.userId=Number(e.userId),this.userId||(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}ngAfterViewChecked(){this.sideMenuService.setFacilityMenuItems([])}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(e=>{this.identities=e,this.cacheSubject.next(!0),this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){let e=Q();e.width="1250px",e.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(De,e).afterClosed().subscribe(i=>{i&&this.refreshTable()})}onRemove(){let e=Q();e.width="650px",e.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(Ae,e).afterClosed().subscribe(i=>{i&&this.refreshTable()})}applyFilter(e){this.filterValue=e,this.refreshTable()}static{this.\u0275fac=function(r){return new(r||t)(c(st),c(Qe),c(Se),c(U),c(H),c(Y))}}static{this.\u0275cmp=A({type:t,selectors:[["app-user-service-identity-select-page"]],decls:11,vars:10,consts:[["spinner",""],[3,"ngClass"],[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","action-button"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled"],[3,"filter","autoFocus","placeholder","linkGlobalSearch"],[1,"position-relative","table-min-height"],[3,"loading","noUsersFoundLabel","routeToAdmin","displayColumns","selection","tableId","users","filter","cacheSubject",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[1,"page-title","d-flex"],["svgIcon","perun-service-identity-black",1,"perun-icon","icon-scale",3,"ngStyle"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"click","disabled"],[3,"loading","noUsersFoundLabel","routeToAdmin","displayColumns","selection","tableId","users","filter","cacheSubject"]],template:function(r,i){if(r&1){let m=R();a(0,"div",1),v(1,yt,5,5)(2,xt,3,3,"h1",2),a(3,"perun-web-apps-refresh-button",3),_("refresh",function(){return g(m),C(i.refreshTable())}),o(),v(4,Nt,3,3,"button",4),v(5,Lt,3,4,"button",5),a(6,"perun-web-apps-debounce-filter",6),_("filter",function(w){return g(m),C(i.applyFilter(w))}),o(),b(7,Ut,1,0,"ng-template",null,0,B),a(9,"div",7),b(10,wt,2,11,"perun-web-apps-users-list",8),o()()}if(r&2){let m=O(8);p("ngClass",i.routeToAdminSection?Me(9,Rt):i.classesForGlobalView),n(),E(i.routeToAdminSection?2:1),n(3),E(i.addIdentity?4:-1),n(),E(i.removeIdentity?5:-1),n(),p("autoFocus",!0)("placeholder","FACILITY_MANAGEMENT.FILTER_PLACEHOLDER")("linkGlobalSearch",!0),n(4),p("perunWebAppsLoader",i.loading)("perunWebAppsLoaderIndicator",m)}},dependencies:[M,Ge,Ve,L,N,Ie,x,ee,V,W,at,rt,ot,ce,y],encapsulation:2})}}return t})();function Ot(t,u){t&1&&f(0,"perun-web-apps-loading-table")}function Bt(t,u){if(t&1&&(f(0,"perun-web-apps-users-list",7),s(1,"translate")),t&2){let e=I();p("loading",e.loading)("noUsersFoundLabel",l(1,9,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("disableRouting",e.disableRouting)("routeToAdmin",!0)("displayColumns",e.displayedColumns)("selection",e.selection)("tableId",e.tableId)("users",e.associatedUsers)("cacheSubject",e.cacheSubject)}}var En=(()=>{class t{constructor(e,r,i,m,D){this.dialog=e,this.router=r,this.authResolver=i,this.userManager=m,this.entityStorageService=D,this.loading=!1,this.selection=new j(!1,[],!0,(w,F)=>w.id===F.id),this.associatedUsers=[],this.tableId=nt,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.cacheSubject=new te(!0)}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).pipe(xe(e=>e.map(r=>r.id)),Ue(e=>{e.length===0?(this.loading=!1,this.associatedUsers=[],this.hasManagers=!1):this.hasManagers=!0}),Ne(e=>e.length>0),Le(e=>this.userManager.getRichUsersWithAttributesByIds(e))).subscribe({next:e=>{this.associatedUsers=e,this.cacheSubject.next(!0),this.selection.clear(),this.setAuth(),this.loading=!1},error:()=>{this.loading=!1}})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){let e=Q();e.width="1250px",e.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(De,e).afterClosed().subscribe(i=>{i&&this.refreshTable()})}onRemove(){let e=Q();e.width="650px",e.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"USER"},this.dialog.open(Ae,e).afterClosed().subscribe(i=>{i&&this.refreshTable()})}static{this.\u0275fac=function(r){return new(r||t)(c(Se),c(Xe),c(H),c(U),c(it))}}static{this.\u0275cmp=A({type:t,selectors:[["app-user-settings-associated-users"]],decls:15,vars:12,consts:[["spinner",""],[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"click","disabled"],[1,"position-relative","table-min-height"],[3,"loading","noUsersFoundLabel","disableRouting","routeToAdmin","displayColumns","selection","tableId","users","cacheSubject",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"loading","noUsersFoundLabel","disableRouting","routeToAdmin","displayColumns","selection","tableId","users","cacheSubject"]],template:function(r,i){if(r&1){let m=R();a(0,"div")(1,"h1",1),d(2),s(3,"translate"),o(),a(4,"perun-web-apps-refresh-button",2),_("refresh",function(){return g(m),C(i.refreshTable())}),o(),a(5,"button",3),_("click",function(){return g(m),C(i.onAdd())}),d(6),s(7,"translate"),o(),a(8,"button",4),_("click",function(){return g(m),C(i.onRemove())}),d(9),s(10,"translate"),o(),b(11,Ot,1,0,"ng-template",null,0,B),a(13,"div",5),b(14,Bt,2,11,"perun-web-apps-users-list",6),o()()}if(r&2){let m=O(12);n(2),h(l(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),n(4),S(" ",l(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),n(2),p("disabled",i.loading||i.selection.selected.length===0),n(),S(" ",l(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),n(5),p("perunWebAppsLoader",i.loading)("perunWebAppsLoaderIndicator",m)}},dependencies:[M,L,N,Ie,x,ee,V,W,y],encapsulation:2})}}return t})();function Gt(t,u){t&1&&(a(0,"mat-error"),d(1),s(2,"translate"),o()),t&2&&(n(),h(l(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function Vt(t,u){t&1&&(a(0,"mat-error"),d(1),s(2,"translate"),o()),t&2&&(n(),h(l(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function Ft(t,u){t&1&&(a(0,"mat-error"),d(1),s(2,"translate"),o()),t&2&&(n(),h(l(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function kt(t,u){t&1&&(a(0,"mat-error"),d(1),s(2,"translate"),o()),t&2&&(n(),h(l(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function jt(t,u){t&1&&(a(0,"mat-error"),d(1),s(2,"translate"),o()),t&2&&(n(),h(l(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}var Gn=(()=>{class t{constructor(e,r,i,m,D){this.dialogRef=e,this.data=r,this.userService=i,this.notificator=m,this.translateService=D,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new G(this.data.user.titleBefore,[T.pattern(".*[\\S]+.*"),T.maxLength(129)]),this.titleAfter=new G(this.data.user.titleAfter,[T.pattern(".*[\\S]+.*"),T.maxLength(129)]),this.firstName=new G(this.data.user.firstName,[T.required,T.pattern(".*[\\S]+.*"),T.maxLength(129)]),this.middleName=new G(this.data.user.middleName,[T.pattern(".*[\\S]+.*"),T.maxLength(129)]),this.lastName=new G(this.data.user.lastName,[T.required,T.pattern(".*[\\S]+.*"),T.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(e=>{this.notificator.showSuccess(e),this.dialogRef.close(!0)})},()=>this.loading=!1)}static{this.\u0275fac=function(r){return new(r||t)(c(q),c(z),c(U),c(X),c(P))}}static{this.\u0275cmp=A({type:t,selectors:[["app-edit-user-dialog"]],decls:42,vars:37,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl"],["matInput","","data-cy","user-first-name-input","required","",3,"formControl"],["matInput","","required","",3,"formControl"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","accent","data-cy","user-save-button","mat-flat-button","",1,"ms-2",3,"click","disabled"]],template:function(r,i){r&1&&(a(0,"div")(1,"h1",0),d(2),s(3,"translate"),o(),a(4,"div",1)(5,"mat-form-field")(6,"mat-label"),d(7),s(8,"translate"),o(),f(9,"input",2),v(10,Gt,3,3,"mat-error"),o(),a(11,"mat-form-field")(12,"mat-label"),d(13),s(14,"translate"),o(),f(15,"input",2),v(16,Vt,3,3,"mat-error"),o(),a(17,"mat-form-field")(18,"mat-label"),d(19),s(20,"translate"),o(),f(21,"input",3),v(22,Ft,3,3,"mat-error"),o(),a(23,"mat-form-field")(24,"mat-label"),d(25),s(26,"translate"),o(),f(27,"input",2),v(28,kt,3,3,"mat-error"),o(),a(29,"mat-form-field")(30,"mat-label"),d(31),s(32,"translate"),o(),f(33,"input",4),v(34,jt,3,3,"mat-error"),o()(),a(35,"div",5)(36,"button",6),_("click",function(){return i.onCancel()}),d(37),s(38,"translate"),o(),a(39,"button",7),_("click",function(){return i.onSave()}),d(40),s(41,"translate"),o()()()),r&2&&(k(i.theme),n(2),h(l(3,21,"DIALOGS.EDIT_USER.DIALOG_TITLE")),n(5),h(l(8,23,"DIALOGS.EDIT_USER.TITLE_BEFORE")),n(2),p("formControl",i.titleBefore),n(),E(i.titleBefore.invalid?10:-1),n(3),h(l(14,25,"DIALOGS.EDIT_USER.TITLE_AFTER")),n(2),p("formControl",i.titleAfter),n(),E(i.titleAfter.invalid?16:-1),n(3),h(l(20,27,"DIALOGS.EDIT_USER.FIRST_NAME")),n(2),p("formControl",i.firstName),n(),E(i.firstName.invalid?22:-1),n(3),h(l(26,29,"DIALOGS.EDIT_USER.MIDDLE_NAME")),n(2),p("formControl",i.middleName),n(),E(i.middleName.invalid?28:-1),n(3),h(l(32,31,"DIALOGS.EDIT_USER.LAST_NAME")),n(2),p("formControl",i.lastName),n(),E(i.lastName.invalid?34:-1),n(3),S(" ",l(38,33,"DIALOGS.EDIT_USER.CANCEL")," "),n(2),p("disabled",i.loading||i.firstName.invalid||i.lastName.invalid||i.titleBefore.invalid||i.titleAfter.invalid||i.middleName.invalid),n(),S(" ",l(41,35,"DIALOGS.EDIT_USER.SAVE")," "))},dependencies:[M,L,N,de,le,ae,se,he,fe,oe,ie,ne,Fe,re,J,K,$,Z,x,y],encapsulation:2})}}return t})();export{Gn as a,tn as b,En as c};
