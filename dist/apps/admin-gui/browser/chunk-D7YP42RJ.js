import{Bc as g,Ca as p,Hi as y,Ma as u,Md as v,Of as D,aa as n,ea as o,fa as c,ge as S,he as R,tb as f,va as l,wa as d,xa as m,zc as h}from"./chunk-353QRQI4.js";var L=(()=>{class r{constructor(e,t,i,a,s){this.dialogRef=e,this.data=t,this.notificator=i,this.translate=a,this.resourcesManager=s,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.dataSource=new h(this.data.resources)}onCancel(){this.dialogRef.close(!1)}onDelete(){this.loading=!0,this.data.resources.length===0?this.translate.get("DIALOGS.REMOVE_RESOURCES.SUCCESS").subscribe(e=>{this.loading=!1,this.notificator.showSuccess(e),this.dialogRef.close(!0)}):this.resourcesManager.deleteResource(this.data.resources[0].id).subscribe(()=>{this.data.resources.shift(),this.onDelete()},()=>{this.dialogRef.close(!0)})}onSubmit(e){e.deleted?this.onDelete():this.onCancel()}static{this.\u0275fac=function(t){return new(t||r)(o(S),o(R),o(D),o(g),o(v))}}static{this.\u0275cmp=c({type:r,selectors:[["app-remove-resource-dialog"]],decls:2,vars:6,consts:[[3,"deleted","entityNames","entityType","disableForce","loading"]],template:function(t,i){t&1&&(d(0,"div")(1,"perun-web-apps-delete-entity-dialog",0),p("deleted",function(s){return i.onSubmit(s)}),m()()),t&2&&(u(i.theme),n(),l("entityNames",i.dataSource)("entityType","resources")("disableForce",!0)("loading",i.loading))},dependencies:[f,y],encapsulation:2})}}return r})();export{L as a};
