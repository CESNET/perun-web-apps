import{b as rs,d as ns,f as os,j as ss,k as as,m as ls,n as cs,o as ps,p as ds,q as ms,r as us,s as hs,t as gs,u as fs,w as vs,x as ys}from"./chunk-OJI2BWKU.js";import{a as _s,d as bs,e as Ss}from"./chunk-GQ5SADSO.js";import"./chunk-JD644HWR.js";import{b as ws,c as Cs,d as Ms,e as Es}from"./chunk-YDCB4HC6.js";import"./chunk-D7YP42RJ.js";import{a as ts}from"./chunk-YAOCYKSX.js";import{a as is}from"./chunk-EIFLC2UB.js";import{$ as Cn,$a as Ve,A as hn,Aa as On,Ab as Bn,Ac as Zn,Ba as Ae,Bb as jn,Bc as Mt,Bd as mr,C as ti,Ca as z,Cb as Un,Cc as ee,D as gn,Da as M,Db as Hn,Dc as j,Di as $o,E as fn,Ea as Tn,Eb as St,Ec as Jn,Ed as Xe,Ej as Jo,F as vn,Fa as An,Fb as lr,Fc as eo,Ga as Rn,Gb as Wn,Gc as to,H as Vt,Ha as Re,Hb as cr,Hc as io,Hd as yo,Hf as Tt,I as _e,Ia as we,Ib as ai,Ic as ro,Id as _o,If as xo,J as yn,Ja as Ce,Jc as hi,Jf as Lo,K as $,Ka as Ge,Kb as Ke,Kc as no,Kf as zo,Kg as Wo,Kj as es,L as N,La as $e,Lb as wt,Lc as Ne,Lf as Fo,Li as qo,M as _n,Ma as De,Mb as li,Mc as gi,Md as bo,Mf as At,N as re,Na as S,Nb as ci,Nc as oo,Nf as ur,Ni as Ko,O as gt,Oa as X,Ob as pi,Oc as ve,Of as Vo,P as ft,Pa as L,Pb as di,Pf as Bo,Q as k,Qa as Dn,Qb as Gn,Qd as So,Qf as hr,R as bn,Rb as pr,Rd as wo,Rf as jo,S as be,Sb as mi,Sc as so,Sd as Co,T as Se,Ta as or,Tc as ao,Tf as Uo,U as fe,Ua as sr,Va as ar,Vf as _i,Vi as Qo,W as Sn,Wa as yt,Wb as dr,Wc as lo,Wj as Ci,X as ne,Xa as Fe,Y as wn,Ya as Nn,Yb as $n,Yc as fi,Z as tr,Za as qe,_a as he,_b as qn,_d as Mo,a as an,aa as p,b as ht,ba as Mn,bd as Qe,c as Ue,ca as En,cb as P,cd as Et,ce as Eo,cg as Ho,d as ln,da as Pn,db as O,df as Bt,e as Jt,ea as d,eb as ii,ec as Kn,ed as co,ee as pe,ef as No,f as cn,fa as x,fd as po,fe as ke,ga as vt,gd as ce,ge as Po,gj as Yo,gk as Rt,h as Ft,ha as se,hd as q,ib as kn,ic as Qn,id as Pt,ie as It,ij as bi,ik as Mi,j as pn,ja as nt,jb as ri,jc as Ct,jd as Ye,je as Io,k as J,ka as ze,kb as xn,kc as ui,kd as mo,ke as Oo,l as dn,la as ir,lc as Yn,le as To,ma as We,mb as ni,mc as Xn,md as uo,me as Ao,mf as Ot,n as Y,na as rr,nb as Ln,nd as ho,ne as Ro,oa as nr,ob as _t,oe as Do,q as mn,qa as A,qi as Go,qj as T,r as He,ra as R,ri as il,rj as Me,s as ei,sa as ot,sj as Xo,ta as ae,tb as F,td as go,tj as gr,u as un,ua as le,ub as zn,ud as vi,uj as st,va as f,vb as Fn,vj as Si,wa as m,wb as Vn,wd as yi,wj as jt,xa as u,xb as oi,xd as fo,xj as Zo,ya as C,yb as si,yj as wi,z as er,za as In,zb as bt,zd as vo,zf as ko}from"./chunk-353QRQI4.js";import{a as Q,b as zt,d as sn}from"./chunk-TSRGIXR5.js";var Ps=(()=>{class r{constructor(e){this.dialogRef=e}onReload(){location.reload()}onClose(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||r)(d(Po))}}static{this.\u0275cmp=x({type:r,selectors:[["app-new-version-dialog"]],decls:15,vars:12,consts:[["mat-dialog-title",""],[1,"user-theme"],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","accent","mat-flat-button","",1,"ms-2",3,"click"]],template:function(t,n){t&1&&(m(0,"h1",0),S(1),P(2,"translate"),u(),m(3,"div",1)(4,"div",2)(5,"p"),S(6),P(7,"translate"),u()(),m(8,"div",3)(9,"button",4),z("click",function(){return n.onClose()}),S(10),P(11,"translate"),u(),m(12,"button",5),z("click",function(){return n.onReload()}),S(13),P(14,"translate"),u()()()),t&2&&(p(),X(O(2,4,"DIALOGS.NEW_VERSION.TITLE")),p(5),L(" ",O(7,6,"DIALOGS.NEW_VERSION.DESCRIPTION")," "),p(4),L(" ",O(11,8,"DIALOGS.NEW_VERSION.LATER")," "),p(3),L(" ",O(14,10,"DIALOGS.NEW_VERSION.RELOAD")," "))},dependencies:[F,Et,Qe,Ao,Io,To,Oo,j,ee],encapsulation:2})}}return r})();var nl=4,ol=.001,sl=1e-7,al=10,Ut=11,Ei=1/(Ut-1),ll=typeof Float32Array=="function";function Is(r,i){return 1-3*i+3*r}function Os(r,i){return 3*i-6*r}function Ts(r){return 3*r}function Pi(r,i,e){return((Is(i,e)*r+Os(i,e))*r+Ts(i))*r}function As(r,i,e){return 3*Is(i,e)*r*r+2*Os(i,e)*r+Ts(i)}function cl(r,i,e,t,n){let o,s,a=0;do s=i+(e-i)/2,o=Pi(s,t,n)-r,o>0?e=s:i=s;while(Math.abs(o)>sl&&++a<al);return s}function pl(r,i,e,t){for(let n=0;n<nl;++n){let o=As(i,e,t);if(o===0)return i;let s=Pi(i,e,t)-r;i-=s/o}return i}function dl(r){return r}function ml(r,i,e,t){if(!(0<=r&&r<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(r===i&&e===t)return dl;let n=ll?new Float32Array(Ut):new Array(Ut);for(let s=0;s<Ut;++s)n[s]=Pi(s*Ei,r,e);function o(s){let a=0,l=1,c=Ut-1;for(;l!==c&&n[l]<=s;++l)a+=Ei;--l;let g=(s-n[l])/(n[l+1]-n[l]),h=a+g*Ei,I=As(h,r,e);return I>=ol?pl(s,h,r,e):I===0?h:cl(s,a,a+Ei,r,e)}return function(a){return a===0?0:a===1?1:Pi(o(a),i,t)}}var ul=new ft("SMOOTH_SCROLL_OPTIONS"),Rs=(()=>{class r{get _w(){return this._document.defaultView}get _now(){return this._w.performance&&this._w.performance.now?this._w.performance.now.bind(this._w.performance):Date.now}constructor(e,t,n){this._document=e,this._platform=t,this._onGoingScrolls=new Map,this._defaultOptions=Q({duration:468,easing:{x1:.42,y1:0,x2:.58,y2:1}},n)}_scrollElement(e,t,n){e.scrollLeft=t,e.scrollTop=n}_getElement(e,t){return typeof e=="string"?(t||this._document).querySelector(e):Wn(e)}_initSmoothScroll(e){return this._onGoingScrolls.has(e)&&this._onGoingScrolls.get(e).next(),this._onGoingScrolls.set(e,new Ue).get(e)}_isFinished(e,t,n){return e.currentX!==e.x||e.currentY!==e.y?!0:(t.next(),n(),!1)}_interrupted(e,t){return He(Y(e,"wheel",{passive:!0,capture:!0}),Y(e,"touchmove",{passive:!0,capture:!0}),t).pipe(hn(1))}_destroy(e,t){t.complete(),this._onGoingScrolls.delete(e)}_step(e){return new ht(t=>{let n=(this._now()-e.startTime)/e.duration;n=n>1?1:n;let o=e.easing(n);e.currentX=e.startX+(e.x-e.startX)*o,e.currentY=e.startY+(e.y-e.startY)*o,this._scrollElement(e.scrollable,e.currentX,e.currentY),Jt.schedule(()=>t.next(e))})}_applyScrollToOptions(e,t){if(!t.duration)return this._scrollElement(e,t.left,t.top),Promise.resolve();let n=this._initSmoothScroll(e),o={scrollable:e,startTime:this._now(),startX:e.scrollLeft,startY:e.scrollTop,x:t.left==null?e.scrollLeft:~~t.left,y:t.top==null?e.scrollTop:~~t.top,duration:t.duration,easing:ml(t.easing.x1,t.easing.y1,t.easing.x2,t.easing.y2)};return new Promise(s=>{Ft(null).pipe(gn(()=>this._step(o).pipe(yn(a=>this._isFinished(a,n,s)))),_e(this._interrupted(e,n)),fn(()=>this._destroy(e,n))).subscribe()})}scrollTo(e,t){if(zn(this._platform)){let n=this._getElement(e),o=getComputedStyle(n).direction==="rtl",s=ai(),a=zt(Q(Q({},this._defaultOptions),t),{left:t.left==null?o?t.end:t.start:t.left,right:t.right==null?o?t.start:t.end:t.right});return a.bottom!=null&&(a.top=n.scrollHeight-n.clientHeight-a.bottom),o&&s!==0?(a.left!=null&&(a.right=n.scrollWidth-n.clientWidth-a.left),s===2?a.left=a.right:s===1&&(a.left=a.right?-a.right:a.right)):a.right!=null&&(a.left=n.scrollWidth-n.clientWidth-a.right),this._applyScrollToOptions(n,a)}return Promise.resolve()}scrollToElement(e,t,n={}){let o=this._getElement(e),s=this._getElement(t,o),a=zt(Q({},n),{left:s.offsetLeft+(n.left||0),top:s.offsetTop+(n.top||0)});return s?this.scrollTo(o,a):Promise.resolve()}static{this.\u0275fac=function(t){return new(t||r)(k(fe),k(wn),k(ul,8))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var gl=["scrollbarY"],fl=["scrollbarX"],vl=["*"];function yl(r,i){if(r&1&&C(0,"scrollbar-x",null,0),r&2){let e=M(2);nr("scrollable",e.state.isHorizontallyScrollable)("fit",e.state.verticalUsed)}}function _l(r,i){if(r&1&&C(0,"scrollbar-y",null,1),r&2){let e=M(2);nr("scrollable",e.state.isVerticallyScrollable)("fit",e.state.horizontalUsed)}}function bl(r,i){if(r&1&&(In(0),ze(1,yl,2,2,"scrollbar-x",5)(2,_l,2,2,"scrollbar-y",5),On()),r&2){let e=M();p(),f("ngIf",e.state.horizontalUsed),p(),f("ngIf",e.state.verticalUsed)}}var Sl=(()=>{class r{constructor(e){this.el=e}set ngAttr(e){for(let[t,n]of Object.entries(e))this.el.nativeElement.setAttribute(t,n)}static{this.\u0275fac=function(t){return new(t||r)(d(ne))}}static{this.\u0275dir=se({type:r,selectors:[["","ngAttr",""]],inputs:{ngAttr:"ngAttr"}})}}return r})();function xs(r){return $(()=>{r.onselectstart=()=>!1})}function Ls(r){return $(()=>{r.onselectstart=null})}function Je(){return $(r=>r.stopPropagation())}function vr(r,i){return r.clientX>=i.left&&r.clientX<=i.left+i.width&&r.clientY>=i.top&&r.clientY<=i.top+i.height}var yr=(()=>{class r{get clientHeight(){return this.nativeElement.clientHeight}get clientWidth(){return this.nativeElement.clientWidth}get scrollHeight(){return this.nativeElement.scrollHeight}get scrollWidth(){return this.nativeElement.scrollWidth}get scrollTop(){return this.nativeElement.scrollTop}get scrollLeft(){return this.nativeElement.scrollLeft}get scrollMaxX(){return this.scrollWidth-this.clientWidth}get scrollMaxY(){return this.scrollHeight-this.clientHeight}get contentHeight(){return this.contentWrapperElement?.clientHeight||0}get contentWidth(){return this.contentWrapperElement?.clientWidth||0}constructor(e){this.viewPort=e,this.nativeElement=e.nativeElement}activatePointerEvents(e,t){this.hovered=new ht(n=>{let o=Y(this.nativeElement,"mousemove",{passive:!0}),s=e?o:o.pipe(Je()),a=Y(this.nativeElement,"mouseleave",{passive:!0}).pipe(J(()=>!1));He(s,a).pipe($(l=>n.next(l)),_e(t)).subscribe()}),this.clicked=new ht(n=>{let o=Y(this.nativeElement,"mousedown",{passive:!0}).pipe($(a=>n.next(a))),s=Y(this.nativeElement,"mouseup",{passive:!0}).pipe($(()=>n.next(!1)));o.pipe(Vt(()=>s),_e(t)).subscribe()})}setAsWrapper(){this.nativeElement.className="ng-native-scrollbar-hider ng-scroll-layer",this.nativeElement.firstElementChild&&(this.nativeElement.firstElementChild.className="ng-scroll-layer")}setAsViewport(e){this.nativeElement.className+=` ng-native-scrollbar-hider ng-scroll-viewport ${e}`,this.nativeElement.firstElementChild&&(this.contentWrapperElement=this.nativeElement.firstElementChild,this.contentWrapperElement.classList.add("ng-scroll-content"))}scrollYTo(e){this.nativeElement.scrollTop=e}scrollXTo(e){this.nativeElement.scrollLeft=e}static{this.\u0275fac=function(t){return new(t||r)(d(ne))}}static{this.\u0275dir=se({type:r,selectors:[["","scrollViewport",""]]})}}return r})(),Ee=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275dir=se({type:r,standalone:!1})}}return r})(),Sr=(()=>{class r{get clicked(){let e=Y(this.trackElement,"mousedown",{passive:!0}).pipe(Je(),xs(this.document)),t=Y(this.document,"mouseup",{passive:!0}).pipe(Je(),Ls(this.document),Vt(()=>cn));return He(e,t)}get clientRect(){return this.trackElement.getBoundingClientRect()}constructor(e,t,n){this.cmp=e,this.trackElement=t,this.document=n}onTrackClicked(e,t,n){return Ft(e).pipe(J(o=>o[this.pageProperty]),J(o=>(o-this.offset-t/2)/this.size*n),$(o=>{this.cmp.scrollTo(zt(Q({},this.mapToScrollToOption(o)),{duration:lr(this.cmp.trackClickScrollDuration)}))}))}static{this.\u0275fac=function(t){return new(t||r)(d(Ee),d(HTMLElement),d(Document))}}static{this.\u0275dir=se({type:r,standalone:!1})}}return r})(),_r=(()=>{class r extends Sr{get pageProperty(){return"pageX"}get offset(){return this.clientRect.left}get size(){return this.trackElement.clientWidth}constructor(e,t,n){super(e,t.nativeElement,n),this.cmp=e,this.document=n}mapToScrollToOption(e){return{left:e}}static{this.\u0275fac=function(t){return new(t||r)(d(Ee),d(ne),d(fe))}}static{this.\u0275dir=se({type:r,selectors:[["","scrollbarTrackX",""]],features:[nt]})}}return r})(),br=(()=>{class r extends Sr{get pageProperty(){return"pageY"}get offset(){return this.clientRect.top}get size(){return this.trackElement.clientHeight}constructor(e,t,n){super(e,t.nativeElement,n),this.cmp=e,this.document=n}mapToScrollToOption(e){return{top:e}}static{this.\u0275fac=function(t){return new(t||r)(d(Ee),d(ne),d(fe))}}static{this.\u0275dir=se({type:r,selectors:[["","scrollbarTrackY",""]],features:[nt]})}}return r})(),zs=(()=>{class r{get trackMax(){return this.track.size-this.size}get clientRect(){return this.thumbElement.getBoundingClientRect()}get clicked(){return Y(this.thumbElement,"mousedown",{passive:!0}).pipe(Je())}constructor(e,t,n,o){this.cmp=e,this.track=t,this.thumbElement=n,this.document=o,this._dragging=new Ue,this.dragging=this._dragging.pipe(ti())}update(){let e=wl(this.track.size,this.viewportScrollSize,this.cmp.minThumbSize),t=Cl(this.viewportScrollOffset,this.viewportScrollMax,this.trackMax);Jt.schedule(()=>this.updateStyles(this.handleDirection(t,this.trackMax),e))}dragged(e){let t,n,o=Ft(e).pipe(xs(this.document),$(()=>{t=this.trackMax,n=this.viewportScrollMax,this.setDragging(!0)})),s=Y(this.document,"mousemove",{capture:!0,passive:!0}).pipe(Je()),a=Y(this.document,"mouseup",{capture:!0}).pipe(Je(),Ls(this.document),$(()=>this.setDragging(!1)));return o.pipe(J(l=>l[this.pageProperty]),J(l=>l-this.dragStartOffset),dn(l=>s.pipe(J(c=>c[this.clientProperty]),J(c=>c-this.track.offset),J(c=>n*(c-l)/t),J(c=>this.handleDrag(c,n)),$(c=>this.scrollTo(c)),_e(a))))}static{this.\u0275fac=function(t){return new(t||r)(d(Ee),d(Sr),d(HTMLElement),d(Document))}}static{this.\u0275dir=se({type:r,outputs:{dragging:"dragging"},standalone:!1})}}return r})();function wl(r,i,e){let n=r/i*r;return Math.max(~~n,e)}function Cl(r,i,e){return r*e/i}var Ds=(()=>{class r extends zs{get clientProperty(){return"clientX"}get pageProperty(){return"pageX"}get viewportScrollSize(){return this.cmp.viewport.scrollWidth}get viewportScrollOffset(){return this.cmp.viewport.scrollLeft}get viewportScrollMax(){return this.cmp.viewport.scrollMaxX}get dragStartOffset(){return this.clientRect.left+this.document.defaultView.pageXOffset||0}get size(){return this.thumbElement.clientWidth}constructor(e,t,n,o,s){super(e,t,n.nativeElement,o),this.cmp=e,this.track=t,this.element=n,this.document=o,this.dir=s}updateStyles(e,t){this.thumbElement.style.width=`${t}px`,this.thumbElement.style.transform=`translate3d(${e}px, 0, 0)`}handleDrag(e,t){if(this.dir.value==="rtl"){if(this.cmp.manager.rtlScrollAxisType===1)return e-t;if(this.cmp.manager.rtlScrollAxisType===2)return t-e}return e}handleDirection(e,t){if(this.dir.value==="rtl"){if(this.cmp.manager.rtlScrollAxisType===2)return-e;if(this.cmp.manager.rtlScrollAxisType===0)return e-t}return e}setDragging(e){this.cmp.setDragging({horizontalDragging:e})}scrollTo(e){this.cmp.viewport.scrollXTo(e)}static{this.\u0275fac=function(t){return new(t||r)(d(Ee),d(_r),d(ne),d(fe),d(cr))}}static{this.\u0275dir=se({type:r,selectors:[["","scrollbarThumbX",""]],features:[nt]})}}return r})(),Ns=(()=>{class r extends zs{get pageProperty(){return"pageY"}get viewportScrollSize(){return this.cmp.viewport.scrollHeight}get viewportScrollOffset(){return this.cmp.viewport.scrollTop}get viewportScrollMax(){return this.cmp.viewport.scrollMaxY}get clientProperty(){return"clientY"}get dragStartOffset(){return this.clientRect.top+this.document.defaultView.pageYOffset||0}get size(){return this.thumbElement.clientHeight}constructor(e,t,n,o){super(e,t,n.nativeElement,o),this.cmp=e,this.track=t,this.element=n,this.document=o}updateStyles(e,t){this.thumbElement.style.height=`${t}px`,this.thumbElement.style.transform=`translate3d(0px, ${e}px, 0)`}handleDrag(e){return e}handleDirection(e){return e}setDragging(e){this.cmp.setDragging({verticalDragging:e})}scrollTo(e){this.cmp.viewport.scrollYTo(e)}static{this.\u0275fac=function(t){return new(t||r)(d(Ee),d(br),d(ne),d(fe))}}static{this.\u0275dir=se({type:r,selectors:[["","scrollbarThumbY",""]],features:[nt]})}}return r})(),Fs=(()=>{class r{constructor(e,t,n,o,s){this.el=e,this.cmp=t,this.platform=n,this.document=o,this.zone=s,this.destroyed=new Ue}activatePointerEvents(){let e,t,n;return this.cmp.pointerEventsMethod==="viewport"?(this.viewportTrackClicked=new Ue,this.viewportThumbClicked=new Ue,this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove,this.destroyed),e=this.viewportThumbClicked,t=this.viewportTrackClicked,n=this.cmp.viewport.hovered.pipe(J(o=>o?vr(o,this.el.getBoundingClientRect()):!1),ti(),$(o=>this.document.onselectstart=o?()=>!1:null)),this.cmp.viewport.clicked.pipe($(o=>{o?vr(o,this.thumb.clientRect)?this.viewportThumbClicked.next(o):vr(o,this.track.clientRect)&&(this.cmp.setClicked(!0),this.viewportTrackClicked.next(o)):this.cmp.setClicked(!1)}),_e(this.destroyed)).subscribe()):(e=this.thumb.clicked,t=this.track.clicked,n=this.hovered),He(n.pipe($(o=>this.setHovered(o))),e.pipe(Vt(o=>this.thumb.dragged(o))),t.pipe(Vt(o=>this.track.onTrackClicked(o,this.thumb.size,this.viewportScrollSize))))}get hovered(){let e=Y(this.el,"mouseenter",{passive:!0}).pipe(Je(),J(()=>!0)),t=Y(this.el,"mouseleave",{passive:!0}).pipe(Je(),J(()=>!1));return He(e,t)}ngOnInit(){this.zone.runOutsideAngular(()=>{!(this.platform.IOS||this.platform.ANDROID)&&!this.cmp.pointerEventsDisabled&&this.activatePointerEvents().pipe(_e(this.destroyed)).subscribe(),He(this.cmp.scrolled,this.cmp.updated).pipe($(()=>this.thumb?.update()),_e(this.destroyed)).subscribe()})}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete(),this.viewportThumbClicked&&this.viewportTrackClicked&&(this.viewportTrackClicked.complete(),this.viewportThumbClicked.complete())}static{this.\u0275fac=function(t){return new(t||r)(d(HTMLElement),d(Ee),d(St),d(Document),d(We))}}static{this.\u0275dir=se({type:r,standalone:!1})}}return r})(),Ml=(()=>{class r extends Fs{get viewportScrollSize(){return this.cmp.viewport.scrollHeight}constructor(e,t,n,o,s){super(e.nativeElement,t,n,o,s),this.cmp=t,this.platform=n,this.document=o,this.zone=s}setHovered(e){this.cmp.setHovered({verticalHovered:e})}static{this.\u0275fac=function(t){return new(t||r)(d(ne),d(Ee),d(St),d(fe),d(We))}}static{this.\u0275cmp=x({type:r,selectors:[["scrollbar-y"]],viewQuery:function(t,n){if(t&1&&(Re(br,7),Re(Ns,7)),t&2){let o;we(o=Ce())&&(n.track=o.first),we(o=Ce())&&(n.thumb=o.first)}},hostVars:2,hostBindings:function(t,n){t&2&&$e("scrollbar-control",!0)},features:[nt],decls:2,vars:6,consts:[["scrollbarTrackY",""],["scrollbarThumbY",""]],template:function(t,n){t&1&&(m(0,"div",0),C(1,"div",1),u()),t&2&&(De(Fe("ng-scrollbar-track ",n.cmp.trackClass)),p(),De(Fe("ng-scrollbar-thumb ",n.cmp.thumbClass)))},dependencies:[br,Ns],styles:[".ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}  .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control{left:unset;right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}"],changeDetection:0})}}return r})(),El=(()=>{class r extends Fs{get viewportScrollSize(){return this.cmp.viewport.scrollWidth}constructor(e,t,n,o,s){super(e.nativeElement,t,n,o,s),this.cmp=t,this.platform=n,this.document=o,this.zone=s}setHovered(e){this.cmp.setHovered({horizontalHovered:e})}static{this.\u0275fac=function(t){return new(t||r)(d(ne),d(Ee),d(St),d(fe),d(We))}}static{this.\u0275cmp=x({type:r,selectors:[["scrollbar-x"]],viewQuery:function(t,n){if(t&1&&(Re(_r,7),Re(Ds,7)),t&2){let o;we(o=Ce())&&(n.track=o.first),we(o=Ce())&&(n.thumb=o.first)}},hostVars:2,hostBindings:function(t,n){t&2&&$e("scrollbar-control",!0)},features:[nt],decls:2,vars:6,consts:[["scrollbarTrackX",""],["scrollbarThumbX",""]],template:function(t,n){t&1&&(m(0,"div",0),C(1,"div",1),u()),t&2&&(De(Fe("ng-scrollbar-track ",n.cmp.trackClass)),p(),De(Fe("ng-scrollbar-thumb ",n.cmp.thumbClass)))},dependencies:[_r,Ds],styles:[".ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}  .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}  .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}"],changeDetection:0})}}return r})(),wr=new ft("NG_SCROLLBAR_OPTIONS"),ks={viewClass:"",trackClass:"",thumbClass:"",track:"vertical",appearance:"compact",visibility:"native",position:"native",pointerEventsMethod:"viewport",trackClickScrollDuration:300,minThumbSize:20,windowResizeDebounce:0,sensorDebounce:0,scrollAuditTime:0,viewportPropagateMouseMove:!0,autoHeightDisabled:!0,autoWidthDisabled:!0,sensorDisabled:!1,pointerEventsDisabled:!1},Vs=(()=>{class r{constructor(e){this.globalOptions=e?Q(Q({},ks),e):ks,this.rtlScrollAxisType=ai()}static{this.\u0275fac=function(t){return new(t||r)(k(wr,8))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Pl=(()=>{class r{constructor(e,t,n){this.document=e,this.manager=t,this.platform=n,this._scrollbarSize=new ln(this.getNativeScrollbarSize()),this.scrollbarSize=this._scrollbarSize.asObservable(),n.isBrowser&&Y(this.document.defaultView,"resize",{passive:!0}).pipe(er(this.manager.globalOptions.windowResizeDebounce),J(()=>this.getNativeScrollbarSize()),ti(),$(o=>this._scrollbarSize.next(o))).subscribe()}getNativeScrollbarSize(){if(!this.platform.isBrowser)return 0;if(this.platform.IOS)return 6;let e=this.document.createElement("div");e.className="ng-scrollbar-measure",e.style.left="0px",e.style.overflow="scroll",e.style.position="fixed",e.style.top="-9999px",this.document.body.appendChild(e);let t=e.getBoundingClientRect().right;return this.document.body.removeChild(e),t}static{this.\u0275fac=function(t){return new(t||r)(k(fe),k(Vs),k(St))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Il=(()=>{class r{constructor(e,t,n){this.renderer=t,this.hideNativeScrollbar=n,this._subscriber=an.EMPTY,this._subscriber=n.scrollbarSize.subscribe(o=>{this.renderer.setStyle(e.nativeElement,"--native-scrollbar-size",`-${o}px`,Mn.DashCase)})}ngOnDestroy(){this._subscriber.unsubscribe()}static{this.\u0275fac=function(t){return new(t||r)(d(ne),d(Pn),d(Pl))}}static{this.\u0275dir=se({type:r,selectors:[["","hideNativeScrollbar",""]]})}}return r})(),Ol=(()=>{class r{get debounce(){return this._debounce}set debounce(e){this._debounce=lr(e),this._subscribe()}get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e),this._disabled?this._unsubscribe():this._subscribe()}constructor(e,t,n){if(this.zone=e,this.platform=t,this.scrollbar=n,this._disabled=!1,this._currentSubscription=null,this.event=new ir,!n)throw new Error("[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.")}ngAfterContentInit(){!this._currentSubscription&&!this._disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){if(this._unsubscribe(),this.platform.isBrowser){let e=new ht(t=>{this._resizeObserver=new ResizeObserver(n=>t.next(n)),this._resizeObserver.observe(this.scrollbar.viewport.nativeElement),this.scrollbar.viewport.contentWrapperElement&&this._resizeObserver.observe(this.scrollbar.viewport.contentWrapperElement)});this.zone.runOutsideAngular(()=>{this._currentSubscription=(this._debounce?e.pipe(er(this._debounce)):e).subscribe(this.event)})}}_unsubscribe(){this._resizeObserver?.disconnect(),this._currentSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||r)(d(We),d(St),d(Ee))}}static{this.\u0275dir=se({type:r,selectors:[["","resizeSensor",""]],inputs:{debounce:[0,"sensorDebounce","debounce"],disabled:[0,"sensorDisabled","disabled"]},outputs:{event:"resizeSensor"}})}}return r})(),Bs=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e)}get sensorDisabled(){return this._sensorDisabled}set sensorDisabled(e){this._sensorDisabled=Ke(e)}get pointerEventsDisabled(){return this._pointerEventsDisabled}set pointerEventsDisabled(e){this._pointerEventsDisabled=Ke(e)}get viewportPropagateMouseMove(){return this._viewportPropagateMouseMove}set viewportPropagateMouseMove(e){this._viewportPropagateMouseMove=Ke(e)}get autoHeightDisabled(){return this._autoHeightDisabled}set autoHeightDisabled(e){this._autoHeightDisabled=Ke(e)}get autoWidthDisabled(){return this._autoWidthDisabled}set autoWidthDisabled(e){this._autoWidthDisabled=Ke(e)}get nativeElement(){return this.el.nativeElement}constructor(e,t,n,o,s,a){this.el=e,this.zone=t,this.changeDetectorRef=n,this.dir=o,this.smoothScroll=s,this.manager=a,this._disabled=!1,this._sensorDisabled=this.manager.globalOptions.sensorDisabled,this._pointerEventsDisabled=this.manager.globalOptions.pointerEventsDisabled,this._autoHeightDisabled=this.manager.globalOptions.autoHeightDisabled,this._autoWidthDisabled=this.manager.globalOptions.autoWidthDisabled,this._viewportPropagateMouseMove=this.manager.globalOptions.viewportPropagateMouseMove,this.viewClass=this.manager.globalOptions.viewClass,this.trackClass=this.manager.globalOptions.trackClass,this.thumbClass=this.manager.globalOptions.thumbClass,this.minThumbSize=this.manager.globalOptions.minThumbSize,this.trackClickScrollDuration=this.manager.globalOptions.trackClickScrollDuration,this.pointerEventsMethod=this.manager.globalOptions.pointerEventsMethod,this.track=this.manager.globalOptions.track,this.visibility=this.manager.globalOptions.visibility,this.appearance=this.manager.globalOptions.appearance,this.position=this.manager.globalOptions.position,this.sensorDebounce=this.manager.globalOptions.sensorDebounce,this.scrollAuditTime=this.manager.globalOptions.scrollAuditTime,this.updated=new ir,this.state={},this.destroyed=new Ue}updateState(){let e=!1,t=!1,n=!1,o=!1;(this.track==="all"||this.track==="vertical")&&(n=this.viewport.scrollHeight>this.viewport.clientHeight,e=this.visibility==="always"||n),(this.track==="all"||this.track==="horizontal")&&(o=this.viewport.scrollWidth>this.viewport.clientWidth,t=this.visibility==="always"||o),this.setState({position:this.position,track:this.track,appearance:this.appearance,visibility:this.visibility,deactivated:this.disabled,dir:this.dir.value,pointerEventsMethod:this.pointerEventsMethod,verticalUsed:e,horizontalUsed:t,isVerticallyScrollable:n,isHorizontallyScrollable:o})}setState(e){this.state=Q(Q({},this.state),e),this.changeDetectorRef.detectChanges()}getScrolledByDirection(e){let t;return this.scrolled.pipe($(n=>t=n),J(n=>n.target[e]),vn(),ei(([n,o])=>n!==o),J(()=>t))}setHovered(e){this.zone.run(()=>this.setState(Q({},e)))}setDragging(e){this.zone.run(()=>this.setState(Q({},e)))}setClicked(e){this.zone.run(()=>this.setState({scrollbarClicked:e}))}ngOnInit(){this.zone.runOutsideAngular(()=>{this.customViewPort?(this.viewport=this.customViewPort,this.defaultViewPort.setAsWrapper()):this.viewport=this.defaultViewPort,this.viewport.setAsViewport(this.viewClass);let e=Y(this.viewport.nativeElement,"scroll",{passive:!0});e=this.scrollAuditTime?e.pipe(un(this.scrollAuditTime)):e,this.scrolled=e.pipe(_e(this.destroyed)),this.verticalScrolled=this.getScrolledByDirection("scrollTop"),this.horizontalScrolled=this.getScrolledByDirection("scrollLeft")})}ngOnChanges(e){this.viewport&&this.update()}ngAfterViewInit(){this.update(),this.dir.change.pipe($(()=>this.update()),_e(this.destroyed)).subscribe()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}update(){this.autoHeightDisabled||this.updateHeight(),this.autoWidthDisabled||this.updateWidth(),this.updateState(),this.updated.next()}scrollTo(e){return this.smoothScroll.scrollTo(this.viewport.nativeElement,e)}scrollToElement(e,t){return this.smoothScroll.scrollToElement(this.viewport.nativeElement,e,t)}updateHeight(){this.appearance==="standard"&&this.scrollbarX?this.nativeElement.style.height=`${this.viewport.contentHeight+this.scrollbarX.nativeElement.clientHeight}px`:this.nativeElement.style.height=`${this.viewport.contentHeight}px`}updateWidth(){this.appearance==="standard"&&this.scrollbarY?this.nativeElement.style.width=`${this.viewport.contentWidth+this.scrollbarY.nativeElement.clientWidth}px`:this.nativeElement.style.width=`${this.viewport.contentWidth}px`}static{this.\u0275fac=function(t){return new(t||r)(d(ne),d(We),d(ri),d(cr),d(Rs),d(Vs))}}static{this.\u0275cmp=x({type:r,selectors:[["ng-scrollbar"]],contentQueries:function(t,n,o){if(t&1&&Rn(o,yr,7),t&2){let s;we(s=Ce())&&(n.customViewPort=s.first)}},viewQuery:function(t,n){if(t&1&&(Re(gl,5,ne),Re(fl,5,ne),Re(yr,7)),t&2){let o;we(o=Ce())&&(n.scrollbarY=o.first),we(o=Ce())&&(n.scrollbarX=o.first),we(o=Ce())&&(n.defaultViewPort=o.first)}},hostVars:2,hostBindings:function(t,n){t&2&&$e("ng-scrollbar",!0)},inputs:{disabled:"disabled",sensorDisabled:"sensorDisabled",pointerEventsDisabled:"pointerEventsDisabled",viewportPropagateMouseMove:"viewportPropagateMouseMove",autoHeightDisabled:"autoHeightDisabled",autoWidthDisabled:"autoWidthDisabled",viewClass:"viewClass",trackClass:"trackClass",thumbClass:"thumbClass",minThumbSize:"minThumbSize",trackClickScrollDuration:"trackClickScrollDuration",pointerEventsMethod:"pointerEventsMethod",track:"track",visibility:"visibility",appearance:"appearance",position:"position",sensorDebounce:"sensorDebounce",scrollAuditTime:"scrollAuditTime"},outputs:{updated:"updated"},exportAs:["ngScrollbar"],features:[Nn([{provide:Ee,useExisting:r}]),Sn],ngContentSelectors:vl,decls:6,vars:4,consts:[["scrollbarX",""],["scrollbarY",""],[1,"ng-scrollbar-wrapper",3,"ngAttr"],[1,"ng-scroll-viewport-wrapper",3,"resizeSensor","sensorDebounce","sensorDisabled"],["scrollViewport","","hideNativeScrollbar",""],[4,"ngIf"]],template:function(t,n){t&1&&(Tn(),m(0,"div",2)(1,"div",3),z("resizeSensor",function(){return n.update()}),m(2,"div",4)(3,"div"),An(4),u()()(),ze(5,bl,3,2,"ng-container",5),u()),t&2&&(f("ngAttr",n.state),p(),f("sensorDebounce",n.sensorDebounce)("sensorDisabled",n.sensorDisabled),p(4),f("ngIf",!n.disabled))},dependencies:[Ln,Sl,Ol,yr,Il,El,Ml],styles:[".ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}  .ng-scrollbar-measure::-webkit-scrollbar{display:none}[_nghost-%COMP%]{--scrollbar-border-radius: 7px;--scrollbar-padding: 4px;--scrollbar-track-color: transparent;--scrollbar-thumb-color: rgba(0, 0, 0, .2);--scrollbar-thumb-hover-color: var(--scrollbar-thumb-color);--scrollbar-size: 5px;--scrollbar-hover-size: var(--scrollbar-size);--scrollbar-overscroll-behavior: initial;--scrollbar-transition-duration: .4s;--scrollbar-transition-delay: .8s;--scrollbar-thumb-transition: height ease-out .15s, width ease-out .15s;--scrollbar-track-transition: height ease-out .15s, width ease-out .15s;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}[_nghost-%COMP%] > .ng-scrollbar-wrapper[_ngcontent-%COMP%]{--scrollbar-total-size: calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size: var(--scrollbar-size);--horizontal-scrollbar-size: var(--scrollbar-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalHovered=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalDragging=true][_ngcontent-%COMP%]{--vertical-scrollbar-size: var(--scrollbar-hover-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalHovered=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalDragging=true][_ngcontent-%COMP%]{--horizontal-scrollbar-size: var(--scrollbar-hover-size);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:0;bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:var(--scrollbar-total-size);bottom:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport>.ng-scroll-content{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport::-webkit-scrollbar{display:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%] > .scrollbar-control[_ngcontent-%COMP%]{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:hover > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:active > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:focus > .scrollbar-control[_ngcontent-%COMP%]{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >   .ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{overflow:hidden}.ng-scroll-viewport[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}  .ng-scroll-content{display:inline-block;min-width:100%}.ng-scrollbar-wrapper[_ngcontent-%COMP%], .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], .ng-scroll-layer[_ngcontent-%COMP%],   .ng-scroll-viewport{position:absolute;inset:0}",".ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}  .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>  .ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>  .ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>  .ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}  .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}  .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}  .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}  .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"],changeDetection:0})}}return r})(),js=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=vt({type:r})}static{this.\u0275inj=gt({})}}return r})();var Tl=(r,i)=>({background:r,"border-top":i}),Us=r=>({color:r}),Al=()=>({color:"currentColor"}),Rl=r=>({background:r}),Dl=()=>({color:"linkTextColor"}),Nl=(r,i)=>({color:r,"border-color":i}),kl=(r,i)=>i.label;function xl(r,i){if(r&1&&(m(0,"span",7)(1,"mat-icon",9),S(2),u()()),r&2){let e=M().$implicit,t=M();p(),f("ngStyle",qe(2,Dl)),p(),L(" ",t.expandSections.get(e.showChildren)?"keyboard_arrow_down":"keyboard_arrow_right"," ")}}function Ll(r,i){if(r&1){let e=Ae();m(0,"a",11),P(1,"activeSideMenuItem"),z("auxclick",function(n){return be(e),Se(n.preventDefault())}),S(2),P(3,"translate"),u()}if(r&2){let e=i.$implicit,t=M(3);f("routerLink",e.url)("perunWebAppsMiddleClickRouterLink",e.url)("matRippleColor",t.rippleColor)("ngClass",ii(1,6,t.currentUrl,e.activatedRegex)&&t.item.activatedClass)("ngStyle",Ve(11,Nl,t.linkTextColor,t.linkTextColor)),p(2),L(" ",O(3,9,e.label)," ")}}function zl(r,i){if(r&1&&(m(0,"div",8),ae(1,Ll,4,14,"a",10,ot),u()),r&2){let e=M().$implicit;f("@rollInOut",void 0),p(),le(e==null?null:e.children)}}function Fl(r,i){if(r&1){let e=Ae();m(0,"div")(1,"a",6),P(2,"activeSideMenuItem"),z("click",function(n){let o=be(e).$implicit,s=M();return Se(s.navigateOrExpandSideMenu(o,n))})("auxclick",function(n){return be(e),Se(n.preventDefault())}),S(3),P(4,"translate"),A(5,xl,3,3,"span",7),u(),A(6,zl,3,1,"div",8),u()}if(r&2){let e=i.$implicit,t=M();p(),f("perunWebAppsMiddleClickRouterLink",e.children?null:e.url)("ngClass",ii(2,6,t.currentUrl,e.activatedRegex)&&t.item.activatedClass)("ngStyle",he(11,Us,t.linkTextColor)),p(2),L(" ",O(4,9,e.label)," "),p(2),R(e.children?5:-1),p(),R(t.expandSections.get(e.showChildren)?6:-1)}}var Hs=(()=>{class r{constructor(e,t,n){this.router=e,this.store=t,this.expandedTilesStore=n,this.root=!1,this.showLinks=!1,this.linkBgColor=this.store.getProperty("theme").sidemenu_submenu_bg_color,this.linkTextColor=this.store.getProperty("theme").sidemenu_submenu_text_color,this.dividerStyle="1px solid "+this.store.getProperty("theme").sidemenu_divider_color,this.rippleColor="rgba(255, 255, 255, 0.1)",this.currentUrl=e.url,e.events.subscribe(o=>{o instanceof io&&(this.currentUrl=o.url)}),this.expandedTilesStore.getStates().subscribe({next:o=>{this.expandSections=o}})}navigateOrExpandSideMenu(e,t){!t.ctrlKey&&!t.metaKey&&(e.children?this.expandedTilesStore.setItem(e.showChildren):this.router.navigate(e.url))}static{this.\u0275fac=function(t){return new(t||r)(d(Ne),d(pe),d(Ho))}}static{this.\u0275cmp=x({type:r,selectors:[["app-side-menu-item"]],inputs:{item:"item",root:"root",showLinks:"showLinks"},decls:12,vars:31,consts:[[1,"w-100"],["matRipple","",1,"side-menu-item",3,"ngStyle","matRippleColor"],["matRipple",""],[1,"side-menu-item-label","clickable",3,"auxclick","ngStyle","routerLink","perunWebAppsMiddleClickRouterLink"],[1,"perun-icon","me-3",3,"ngStyle","svgIcon"],[3,"ngStyle"],["matRipple","",1,"clickable","d-flex",3,"click","auxclick","perunWebAppsMiddleClickRouterLink","ngClass","ngStyle"],[1,"ms-auto"],[1,"overflow-hidden"],[1,"perun-icon","icon-beak",3,"ngStyle"],["matRipple","",1,"ps-5","clickable",3,"routerLink","perunWebAppsMiddleClickRouterLink","matRippleColor","ngClass","ngStyle"],["matRipple","",1,"ps-5","clickable",3,"auxclick","routerLink","perunWebAppsMiddleClickRouterLink","matRippleColor","ngClass","ngStyle"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"div",1),P(2,"activeSideMenuItem"),m(3,"div",2)(4,"a",3),z("auxclick",function(s){return s.preventDefault()}),C(5,"mat-icon",4),S(6),P(7,"translate"),u()()(),m(8,"div")(9,"div",5),ae(10,Fl,7,13,"div",null,kl),u()()()),t&2&&(p(),$e("header-activated",ii(2,18,n.currentUrl,n.item.baseColorClassRegex)&&n.root),f("ngStyle",Ve(23,Tl,n.item.backgroundColorCss,n.root?"":n.dividerStyle))("matRippleColor",n.rippleColor),p(2),De(n.item.labelClass),p(),f("ngStyle",he(26,Us,n.item.textColorCss))("routerLink",n.item.baseLink)("perunWebAppsMiddleClickRouterLink",n.item.baseLink),p(),f("ngStyle",qe(28,Al))("svgIcon",n.item.icon),p(),L(" ",O(7,21,n.item.label)," "),p(2),f("@openClose",n.showLinks?"open":"closed"),p(),De(Fe("side-menu-link ",n.item.linksClass)),f("ngStyle",he(29,Rl,n.linkBgColor))("@rollInOut",void 0),p(),le(n.item.links))},dependencies:[F,ni,_t,q,ce,yi,ve,gi,ui,j,ee,Wo],encapsulation:2,data:{animation:[Zo,wi]}})}}return r})();var Ht=(r,i)=>i.label;function Bl(r,i){if(r&1&&(m(0,"div",3),C(1,"app-side-menu-item",8),u()),r&2){let e=i.$implicit,t=i.$index,n=M();f("@rollInOut",void 0),p(),f("item",e)("showLinks",t===n.accessItems.length-1)}}function jl(r,i){if(r&1&&C(0,"app-side-menu-item",4),r&2){let e=M();f("item",e.facilityItem)("root",!0)}}function Ul(r,i){if(r&1&&(m(0,"div",3),C(1,"app-side-menu-item",8),u()),r&2){let e=i.$implicit,t=i.$index,n=M();f("@rollInOut",void 0),p(),f("item",e)("showLinks",t===n.facilityItems.length-1)}}function Hl(r,i){if(r&1&&C(0,"app-side-menu-item",6),r&2){let e=M();f("item",e.adminItem)("showLinks",e.adminItemOpened)("root",!0)}}function Wl(r,i){if(r&1&&(m(0,"div",3),C(1,"app-side-menu-item",8),u()),r&2){let e=i.$implicit;f("@rollInOut",void 0),p(),f("item",e)("showLinks",!0)}}function Gl(r,i){if(r&1&&C(0,"app-side-menu-item",1),r&2){let e=M();f("item",e.serviceIdentitiesItem)("root",!0)}}function $l(r,i){if(r&1&&(m(0,"div",3),C(1,"app-side-menu-item",8),u()),r&2){let e=i.$implicit,t=i.$index,n=M();f("@rollInOut",void 0),p(),f("item",e)("showLinks",t===n.serviceIdentitiesItems.length-1)}}function ql(r,i){if(r&1&&(m(0,"div",3),C(1,"app-side-menu-item",8),u()),r&2){let e=i.$implicit,t=i.$index,n=M();f("@rollInOut",void 0),p(),f("item",e)("showLinks",t===n.settingsItems.length-1)}}var Ws=(()=>{class r{constructor(e,t,n,o){this.sideMenuService=e,this.sideMenuItemService=t,this.otherAppService=n,this.authResolver=o,this.accessItems=[],this.facilityItems=[],this.adminItems=[],this.homeItems=[],this.settingsItems=[],this.serviceIdentitiesItems=[],this.accessItem=this.sideMenuItemService.getAccessManagementItem(),this.adminItem=this.sideMenuItemService.getAdminItem(),this.facilityItem=this.sideMenuItemService.getFacilitiesManagementItem(),this.homeItem=this.sideMenuItemService.getHomeItem(),this.userItem=this.sideMenuItemService.getUserItem(),this.settingsItem=this.sideMenuItemService.getSettingsItem(),this.serviceIdentitiesItem=this.sideMenuItemService.getServiceIdentitiesItem(),this.mobileView=!0,this.adminItemOpened=!1,this.userItemOpened=!1,this.settingsItemOpened=!1}static areSameItems(e,t){return e.label===t.label&&e.labelClass===t.labelClass}static areSameLinks(e,t){if(e.links.length!==t.links.length)return!1;for(let n=0;n<e.links.length;n++)if(e.links[n].label!==t.links[n].label)return!1;return!0}static setNewItems(e,t){let n=e.length>t.length?e.length:t.length;for(let o=0;o<n;o++)if(o>e.length-1)e.push(t[o]);else if(o>t.length-1){let s=e.length;for(let a=0;a<s-o;a++)e.pop();break}else r.areSameItems(e[o],t[o])?r.areSameLinks(e[o],t[o])||(e[o].links=t[o].links):e[o]=t[o]}ngOnInit(){this.mobileView=window.innerWidth<=Ii.minWidth,this.mobileView?this.sideNav.close():this.sideNav.open(),this.sideMenuService.facilityItemsChange.subscribe(e=>{this.setFacilityItems(e)}),this.sideMenuService.accessItemsChange.subscribe(e=>{this.setAccessItems(e)}),this.sideMenuService.adminItemsChange.subscribe(e=>{this.setAdminItems(e)}),this.sideMenuService.homeItemsChange.subscribe(e=>{this.setHomeItems(e)}),this.sideMenuService.settingsItemsChange.subscribe(e=>{this.setSettingsItems(e)}),this.sideMenuService.serviceIdentitiesItemsChange.subscribe(e=>{this.setServiceIdentitiesItems(e)}),this.sideMenuService.resetChange.subscribe(()=>{this.reset()})}redirectToProfile(){window.open(this.otherAppService.getUrlForOtherApplication(Eo.Profile),"_blank")}reset(){this.adminItemOpened=!1,this.userItemOpened=!1,this.settingsItemOpened=!1,r.setNewItems(this.homeItems,[]),r.setNewItems(this.adminItems,[]),r.setNewItems(this.accessItems,[]),r.setNewItems(this.facilityItems,[]),r.setNewItems(this.settingsItems,[]),r.setNewItems(this.serviceIdentitiesItems,[])}resetExceptHome(){this.adminItemOpened=!1,this.userItemOpened=!1,this.settingsItemOpened=!1,r.setNewItems(this.adminItems,[]),r.setNewItems(this.accessItems,[]),r.setNewItems(this.facilityItems,[]),r.setNewItems(this.settingsItems,[]),r.setNewItems(this.serviceIdentitiesItems,[])}resetExceptFacility(){this.adminItemOpened=!1,this.userItemOpened=!1,this.settingsItemOpened=!1,r.setNewItems(this.homeItems,[]),r.setNewItems(this.adminItems,[]),r.setNewItems(this.accessItems,[]),r.setNewItems(this.settingsItems,[]),r.setNewItems(this.serviceIdentitiesItems,[])}resetExceptAccess(){this.adminItemOpened=!1,this.userItemOpened=!1,this.settingsItemOpened=!1,r.setNewItems(this.homeItems,[]),r.setNewItems(this.adminItems,[]),r.setNewItems(this.facilityItems,[]),r.setNewItems(this.settingsItems,[]),r.setNewItems(this.serviceIdentitiesItems,[])}resetExceptAdmin(){this.userItemOpened=!1,this.settingsItemOpened=!1,r.setNewItems(this.homeItems,[]),r.setNewItems(this.accessItems,[]),r.setNewItems(this.facilityItems,[]),r.setNewItems(this.settingsItems,[]),r.setNewItems(this.serviceIdentitiesItems,[])}resetExceptSettings(){this.userItemOpened=!1,this.adminItemOpened=!1,r.setNewItems(this.homeItems,[]),r.setNewItems(this.accessItems,[]),r.setNewItems(this.facilityItems,[]),r.setNewItems(this.adminItems,[]),r.setNewItems(this.serviceIdentitiesItems,[])}resetExceptServiceIdentities(){this.adminItemOpened=!1,this.userItemOpened=!1,this.settingsItemOpened=!1,r.setNewItems(this.homeItems,[]),r.setNewItems(this.adminItems,[]),r.setNewItems(this.accessItems,[]),r.setNewItems(this.settingsItems,[]),r.setNewItems(this.facilityItems,[])}setHomeItems(e){this.resetExceptHome(),r.setNewItems(this.homeItems,e)}setFacilityItems(e){this.resetExceptFacility(),r.setNewItems(this.facilityItems,e)}setAccessItems(e){this.resetExceptAccess(),r.setNewItems(this.accessItems,e)}setAdminItems(e){this.adminItemOpened=e.length===0,this.resetExceptAdmin(),r.setNewItems(this.adminItems,e)}setSettingsItems(e){this.settingsItemOpened=e.length===0,this.resetExceptSettings(),r.setNewItems(this.settingsItems,e)}setServiceIdentitiesItems(e){this.resetExceptServiceIdentities(),r.setNewItems(this.serviceIdentitiesItems,e)}static{this.\u0275fac=function(t){return new(t||r)(d(Mi),d(is),d(_i),d(ke))}}static{this.\u0275cmp=x({type:r,selectors:[["app-side-menu"]],inputs:{sideNav:"sideNav"},decls:18,vars:12,consts:[[1,"side-menu-width"],[3,"item","root"],["data-cy","access-item-button",3,"item","root"],[1,"overflow-hidden"],["data-cy","facilities-button",3,"item","root"],[3,"click","item","root"],["data-cy","admin-button",3,"item","showLinks","root"],[3,"item","showLinks","root"],[3,"item","showLinks"]],template:function(t,n){t&1&&(m(0,"div",0),C(1,"app-side-menu-item",1)(2,"app-side-menu-item",2),ae(3,Bl,2,3,"div",3,Ht),A(5,jl,1,2,"app-side-menu-item",4),ae(6,Ul,2,3,"div",3,Ht),m(8,"app-side-menu-item",5),z("click",function(){return n.redirectToProfile()}),u(),A(9,Hl,1,3,"app-side-menu-item",6),ae(10,Wl,2,3,"div",3,Ht),A(12,Gl,1,2,"app-side-menu-item",1),ae(13,$l,2,3,"div",3,Ht),C(15,"app-side-menu-item",7),ae(16,ql,2,3,"div",3,Ht),u()),t&2&&(p(),f("item",n.homeItem)("root",!0),p(),f("item",n.accessItem)("root",!0),p(),le(n.accessItems),p(2),R(n.authResolver.canManageFacilities()?5:-1),p(),le(n.facilityItems),p(2),f("item",n.userItem)("root",!0),p(),R(n.authResolver.isPerunAdminOrObserver()?9:-1),p(),le(n.adminItems),p(2),R(n.authResolver.getHasServiceIdentities()?12:-1),p(),le(n.serviceIdentitiesItems),p(2),f("item",n.settingsItem)("showLinks",n.settingsItemOpened)("root",!0),p(),le(n.settingsItems))},dependencies:[F,Hs],styles:[".side-menu-width[_ngcontent-%COMP%]{width:300px}"],data:{animation:[wi]}})}}return r})();function Kl(r,i){r&1&&(m(0,"perun-web-apps-alert",3),S(1),P(2,"translate"),u()),r&2&&(p(),L(" ",O(2,1,"SHARED_LIB.PERUN.LOGIN.LOGOUT_INFO")," "))}var Oi=(()=>{class r{constructor(e,t,n){this.auth=e,this.router=t,this.storeService=n}ngOnInit(){(this.auth.isLoggedIn()||sessionStorage.getItem("baPrincipal"))&&this.router.navigate([""],{queryParamsHandling:"merge"}),this.auth.isLogoutProcess()&&(this.afterLogout=!0,this.auth.setLogoutProcess(!1))}startAuth(){this.auth.startAuthentication()}static{this.\u0275fac=function(t){return new(t||r)(d(Tt),d(Ne),d(pe))}}static{this.\u0275cmp=x({type:r,selectors:[["perun-web-apps-login-screen"]],decls:12,vars:7,consts:[[1,"container","login-con"],[1,"row"],[1,"ms-auto","me-auto","d-flex","flex-column","align-items-center"],["alert_type","success",1,"mb-2"],[1,"mb-3"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),A(3,Kl,3,3,"perun-web-apps-alert",3),m(4,"h4",4),S(5),P(6,"translate"),u(),m(7,"button",5),z("click",function(){return n.startAuth()}),S(8),P(9,"translate"),m(10,"mat-icon"),S(11," login "),u()()()()()),t&2&&(p(3),R(n.afterLogout?3:-1),p(2),L(" ",O(6,3,"SHARED_LIB.PERUN.LOGIN.TEXT")," "),p(3),L(" ",O(9,5,"SHARED_LIB.PERUN.LOGIN.SIGN_IN")," "))},dependencies:[F,q,ce,Ye,Pt,j,Qe,ee],styles:[".login-con[_ngcontent-%COMP%]{padding:120px 0}"]})}}return r})();var Yl=(r,i)=>({"background-color":r,"margin-top":i}),Xl=r=>({"min-height":r}),Ti=(()=>{class r{constructor(e,t,n,o){this.storeService=e,this.sanitizer=t,this.preferredLangService=n,this.translateService=o,this.contentBackgroundColor=this.storeService.getProperty("theme").content_bg_color}ngOnInit(){if(this.headerBackgroundColor=this.storeService.getProperty("theme").nav_bg_color,this.headerTextColor=this.storeService.getProperty("theme").nav_text_color,this.logo=this.sanitizer.bypassSecurityTrustHtml(this.storeService.getProperty("logo")),this.textColor=this.headerTitle?this.storeService.getProperty("theme").nav_text_color:"",this.application==="user-profile"){let e=this.preferredLangService.getPreferredLanguage(null);this.translateService.use(e)}}getContentInnerMinHeight(){return(this.displayWarning?"calc((100vh - 112px) + ":"calc((100vh - 64px) + ")+"0"+"px)"}getContentMarginTop(){return this.displayWarning?"48px":"0px"}getNavMenuTop(){return this.displayWarning?"48px":"0px"}static{this.\u0275fac=function(t){return new(t||r)(d(pe),d(Hn),d(Uo),d(Mt))}}static{this.\u0275cmp=x({type:r,selectors:[["perun-web-apps-login-screen-base"]],inputs:{application:"application",headerTitle:"headerTitle",displayWarning:"displayWarning"},decls:7,vars:11,consts:[[3,"showToggle","showOtherApps","logoutEnabled","showUserName"],["id","content"],["id","content-inner",3,"ngStyle"],["id","content-wrap",3,"ngStyle"],["id","footer"]],template:function(t,n){t&1&&(C(0,"perun-web-apps-header",0),m(1,"div",1)(2,"div",2)(3,"div",3),C(4,"router-outlet"),u(),m(5,"div",4),C(6,"perun-web-apps-footer"),u()()()),t&2&&(f("showToggle",!1)("showOtherApps",!1)("logoutEnabled",!1)("showUserName",!1),p(2),f("ngStyle",Ve(6,Yl,n.contentBackgroundColor,n.getContentMarginTop())),p(),f("ngStyle",he(9,Xl,n.getContentInnerMinHeight())))},dependencies:[F,_t,bi,Ci,ve,hi],styles:["#login-nav[_ngcontent-%COMP%]{position:fixed;width:100%;z-index:999;display:flex;height:64px;max-height:64px;top:0}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}#content[_ngcontent-%COMP%]{width:100%}#content-inner[_ngcontent-%COMP%]{position:relative}#content-wrap[_ngcontent-%COMP%]{padding-bottom:250px;padding-top:10px}@media (max-width: 768px){#content-wrap[_ngcontent-%COMP%]{padding-bottom:500px}}.router-icon[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;cursor:pointer;outline:0}.page-subtitle[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.5rem}.logo-container[_ngcontent-%COMP%]{padding:0 8px}.logo-container[_ngcontent-%COMP%]     img, .logo-container[_ngcontent-%COMP%]     svg{max-height:50px}.display-flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]})}}return r})();function Jl(r,i){r&1&&(m(0,"perun-web-apps-alert",3),S(1),P(2,"translate"),u()),r&2&&(p(),L(" ",O(2,1,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.WRONG_LOGIN_OR_PASSWORD")," "))}function ec(r,i){r&1&&(m(0,"perun-web-apps-alert",4),S(1),P(2,"translate"),u()),r&2&&(p(),L(" ",O(2,1,"SHARED_LIB.PERUN.LOGIN.LOGOUT_INFO")," "))}var Ai=(()=>{class r{constructor(e,t,n,o){this.authzService=e,this.auth=t,this.initAuth=n,this.router=o,this.usernameCtrl=new dr(null,[pr.required]),this.passwordCtrl=new dr(null,[pr.required]),this.wrongUsernameOrPassword=!1}startAuth(){this.usernameCtrl.invalid||this.passwordCtrl.invalid||(sessionStorage.removeItem("baAfterLogout"),sessionStorage.setItem("basicUsername",this.usernameCtrl.value),sessionStorage.setItem("basicPassword",this.passwordCtrl.value),this.authzService.getPerunPrincipal().subscribe({next:e=>{sessionStorage.setItem("baPrincipal",JSON.stringify(e)),location.reload()},error:()=>{this.wrongUsernameOrPassword=!0}}))}ngOnInit(){(this.auth.isLoggedIn()||sessionStorage.getItem("baPrincipal"))&&(sessionStorage.removeItem("baAfterLogout"),this.router.navigate([""],{queryParamsHandling:"merge"})),sessionStorage.getItem("baLogout")&&(this.initAuth.invalidateServiceAccess(),location.reload()),sessionStorage.getItem("baAfterLogout")&&(this.afterLogout=!0)}ngAfterViewInit(){sessionStorage.getItem("baLogout")||sessionStorage.removeItem("baAfterLogout")}static{this.\u0275fac=function(t){return new(t||r)(d(Xe),d(Tt),d(At),d(Ne))}}static{this.\u0275cmp=x({type:r,selectors:[["perun-web-apps-login-screen-service-access"]],decls:29,vars:24,consts:[[1,"container","login-con","vo-theme","top-padding"],[1,"row"],[1,"ms-auto","me-auto","d-flex","flex-column","align-items-center"],["alert_type","error"],["alert_type","success",1,"mb-2"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","required","",3,"keyup.enter","formControl"],["appearance","outline","subscriptSizing","dynamic",1,"my-3"],["matInput","","required","",3,"keyup.enter","formControl","type"],["mat-raised-button","",1,"black",3,"click","disabled"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),S(4),P(5,"translate"),u(),A(6,Jl,3,3,"perun-web-apps-alert",3),A(7,ec,3,3,"perun-web-apps-alert",4),m(8,"mat-form-field",5)(9,"mat-label"),S(10),P(11,"translate"),u(),m(12,"input",6),z("keyup.enter",function(){return n.startAuth()}),u(),m(13,"mat-error"),S(14),P(15,"translate"),u()(),m(16,"mat-form-field",7)(17,"mat-label"),S(18),P(19,"translate"),u(),m(20,"input",8),z("keyup.enter",function(){return n.startAuth()}),u(),m(21,"mat-error"),S(22),P(23,"translate"),u()(),m(24,"button",9),z("click",function(){return n.startAuth()}),S(25),P(26,"translate"),m(27,"mat-icon"),S(28," login "),u()()()()()),t&2&&(p(4),X(O(5,12,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.LABEL")),p(2),R(n.wrongUsernameOrPassword?6:-1),p(),R(n.afterLogout&&!n.wrongUsernameOrPassword?7:-1),p(3),X(O(11,14,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.USERNAME")),p(2),f("formControl",n.usernameCtrl),p(2),L(" ",O(15,16,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.USERNAME_ERROR")," "),p(4),X(O(19,18,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.PASSWORD")),p(2),f("formControl",n.passwordCtrl)("type","password"),p(2),L(" ",O(23,20,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.PASSWORD_ERROR")," "),p(2),f("disabled",n.usernameCtrl.invalid||n.passwordCtrl.invalid),p(),L(" ",O(26,22,"SHARED_LIB.PERUN.LOGIN_SERVICE_ACCESS.SIGN_IN")," "))},dependencies:[F,q,ce,fi,lo,so,ao,vi,go,Ct,Gn,mi,Kn,qn,Ye,Pt,j,Qe,ee],styles:[".top-padding[_ngcontent-%COMP%]{padding:120px 0}mat-form-field.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:250px}.black[_ngcontent-%COMP%]{background-color:#000;color:#fff}"]})}}return r})();var $s=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=vt({type:r})}static{this.\u0275inj=gt({imports:[F,Et,q,ve,Rt,j,fi,Ct,vi,Ye,ho,Oi,Ti,Ai]})}}return r})();var rc=["footer"],nc=(r,i)=>({top:r,background:i}),oc=r=>["nav-menu mat-elevation-z3",r],sc=(r,i)=>({"margin-top":r,"min-height":i}),qs=r=>({"min-height":r}),ac=(r,i)=>({"border-color":r,background:i}),lc=r=>({"background-color":r});function cc(r,i){if(r&1&&(m(0,"div",2)(1,"mat-icon"),S(2,"alert"),u(),S(3),u()),r&2){let e=M();f("matTooltip",yt(e.warningMessage)),p(3),L(" ",e.warningMessage," ")}}function pc(r,i){if(r&1){let e=Ae();m(0,"perun-web-apps-header",6),z("sidenavToggle",function(){be(e);let n=Ge(3);return Se(n.toggle())}),u(),m(1,"mat-sidenav-container",7)(2,"mat-sidenav",8,0)(4,"ng-scrollbar"),C(5,"app-side-menu",9),u()(),m(6,"mat-sidenav-content",10)(7,"div",11),C(8,"router-outlet"),u(),m(9,"div",null,1),C(11,"perun-web-apps-footer"),u()()()}if(r&2){let e=Ge(3),t=M();f("ngStyle",Ve(13,nc,t.getNavMenuTop(),t.navBackgroundColor))("showNotifications",!0)("showSearch",t.showSearch)("ngClass",he(16,oc,t.principal?"":"header-index")),p(),f("ngStyle",t.principal?Ve(18,sc,t.getSideNavMarginTop(),t.getSideNavMinHeight()):he(21,qs,t.getSideNavMinHeight())),p(),f("fixedInViewport",!0)("mode",t.sidebarMode)("fixedTopGap",t.getTopGap())("ngStyle",Ve(23,ac,t.sideBarBorderColor,t.sideMenubackgroundColor))("opened",!t.isMobile()),p(3),f("sideNav",e),p(),f("ngStyle",he(26,lc,t.contentBackgroundColor)),p(),f("ngStyle",he(28,qs,t.contentInnerMinHeight))}}function dc(r,i){r&1&&(m(0,"div",4),C(1,"div",12),u())}function mc(r,i){if(r&1&&C(0,"perun-web-apps-login-screen-base",5),r&2){let e=M();f("application","admin-gui")("headerTitle",e.adminHeaderLabel)("displayWarning",e.displayWarning)}}var Ii=(()=>{class r{static{this.minWidth=992}constructor(e,t,n,o,s,a,l,c,g){this.cache=e,this.store=t,this.http=n,this.dialog=o,this.router=s,this.initAuth=a,this.authService=l,this.guiAuthResolverService=c,this.cd=g,this.sidebarMode="side",this.theme=this.store.getProperty("theme"),this.navBackgroundColor=this.theme.nav_bg_color,this.sideBarBorderColor=this.theme.sidemenu_border_color,this.contentBackgroundColor=this.theme.content_bg_color,this.sideMenubackgroundColor=this.theme.sidemenu_bg_color,this.displayWarning=this.store.getProperty("display_warning"),this.warningMessage=this.store.getProperty("warning_message"),this.adminHeaderLabel=this.store.getProperty("header_label_en"),this.showSearch=this.store.getProperty("display_search"),this.version=il().version,this.contentInnerMinHeight=this.displayWarning?"calc(100vh - 112px)":"calc(100vh - 64px)",this.isMfaWindowOpen=!1,this.cache.init(),this.getScreenSize()}getScreenSize(){this.sidebarMode=this.isMobile()?"over":"side",this.lastScreenWidth=window.innerWidth}isLoggedIn(){return this.authService.isLoggedIn()||this.initAuth.isServiceAccess()}isMobile(){return window.innerWidth<=r.minWidth}ngOnInit(){if(localStorage.getItem("mfaWindow")){this.isMfaWindowOpen=!0;return}this.isLoginScreenShow=this.initAuth.isLoginScreenShown(),this.isServiceAccess=this.initAuth.isServiceAccessLoginScreenShown(),sessionStorage.removeItem("baLogout"),this.guiAuthResolverService.isPerunAdminOrObserver()&&!localStorage.getItem("showIds")&&localStorage.setItem("showIds","true"),sessionStorage.getItem("initPage")===null&&(sessionStorage.setItem("initPage",location.pathname),sessionStorage.setItem("onInitPage","true")),this.store.setInitialPageId(1),this.principal=this.store.getPerunPrincipal(),this.loadAppVersion(),mn(3e4).subscribe(()=>{this.loadAppVersion()}),this.router.events.pipe(ei(e=>e instanceof to)).subscribe(e=>{this.updateInitAccessedPage(e)})}getTopGap(){return this.displayWarning?112:64}getSideNavMarginTop(){return this.displayWarning?"112px":"64px"}getSideNavMinHeight(){return this.displayWarning?"calc(100vh - 112px)":"calc(100vh - 64px)"}getNavMenuTop(){return this.displayWarning?"48px":"0"}ngAfterViewInit(){let e=this.footer?.nativeElement?.offsetHeight?.toString()??"0";this.contentInnerMinHeight=this.displayWarning?"calc(100vh - "+e+"px - 112px)":"calc(100vh - "+e+"px - 64px)",this.cd.detectChanges()}updateInitAccessedPage(e){e.url===sessionStorage.getItem("initPage")?(e.navigationTrigger==="imperative"&&e.id!==this.store.getInitialPageId()&&sessionStorage.setItem("onInitPage","false"),e.navigationTrigger==="popstate"&&(e.restoredState.navigationId===this.store.getInitialPageId()?(sessionStorage.setItem("onInitPage","true"),this.store.setInitialPageId(e.id)):sessionStorage.setItem("onInitPage","false"))):sessionStorage.setItem("onInitPage","false")}loadAppVersion(){let e=new si({"Cache-Control":"no-cache, no-store, must-revalidate, post-check=0, pre-check=0",Pragma:"no-cache",Expires:"0"});this.http.get("/assets/config/version.json",{headers:e}).subscribe(t=>{let n=t.version;if(n)if(this.version&&n!=="SNAPSHOT"&&this.version!==n){let o=Ot();this.dialog.open(Ps,o)}else this.version=n})}static{this.\u0275fac=function(t){return new(t||r)(d(ts),d(pe),d(bt),d(It),d(Ne),d(At),d(Tt),d(ke),d(ri))}}static{this.\u0275cmp=x({type:r,selectors:[["app-root"]],viewQuery:function(t,n){if(t&1&&Re(rc,5),t&2){let o;we(o=Ce())&&(n.footer=o.first)}},hostBindings:function(t,n){t&1&&z("resize",function(s){return n.getScreenSize(s)},Cn)},decls:5,vars:5,consts:[["sidenav",""],["footer",""],["matTooltipPosition","below",1,"beta-warning","text-truncate",3,"matTooltip"],[3,"displayWarning"],[1,"loader-wrapper"],[3,"application","headerTitle","displayWarning"],[3,"sidenavToggle","ngStyle","showNotifications","showSearch","ngClass"],["autosize","true",3,"ngStyle"],[1,"side-nav",3,"fixedInViewport","mode","fixedTopGap","ngStyle","opened"],[3,"sideNav"],[1,"side-nav-content",3,"ngStyle"],["id","content-wrap",3,"ngStyle"],["id","loader"]],template:function(t,n){t&1&&(A(0,cc,4,3,"div",2),C(1,"perun-web-apps-notificator",3),A(2,pc,12,30),A(3,dc,2,0,"div",4),A(4,mc,1,3,"perun-web-apps-login-screen-base",5)),t&2&&(R(n.displayWarning?0:-1),p(),f("displayWarning",n.displayWarning),p(),R(!n.isLoginScreenShow&&!n.isServiceAccess&&n.isLoggedIn()&&!n.isMfaWindowOpen?2:-1),p(),R(n.isMfaWindowOpen?3:-1),p(),R((n.isLoginScreenShow||n.isServiceAccess||!n.isLoggedIn())&&!n.isMfaWindowOpen?4:-1))},dependencies:[F,ni,_t,q,ce,bi,Ci,di,ci,pi,li,ve,hi,wt,Jo,Bs,Ws,Ti],styles:["#content-inner[_ngcontent-%COMP%]{position:relative}#content-wrap[_ngcontent-%COMP%]{padding-bottom:25px;padding-top:10px}.beta-warning[_ngcontent-%COMP%]{overflow:hidden;height:48px;position:fixed;z-index:999;top:0;background-color:#ffbfc5;width:100%;color:#d32f2f;text-align:center;font-weight:500;padding:6px;line-height:36px;font-size:1rem}ng-scrollbar[_ngcontent-%COMP%]{--scrollbar-thumb: (106, 106, 106, .5);--scrollbar-thumb-hover-color: lightgrey}.loader-wrapper[_ngcontent-%COMP%]{display:block;height:100vh}.header-index[_ngcontent-%COMP%]{z-index:1001;position:relative}"]})}}return r})();var Ks=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=x({type:r,selectors:[["app-auth-callback"]],decls:0,vars:0,template:function(t,n){},dependencies:[F],encapsulation:2})}}return r})();var Qs=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=x({type:r,selectors:[["app-perun-web-apps-not-found-page"]],decls:5,vars:3,consts:[[1,"container-fluid","ps-xl-5","pe-xl-5"],[1,"page-title"]],template:function(t,n){t&1&&(m(0,"div",0),C(1,"perun-web-apps-back-button"),m(2,"h1",1),S(3),P(4,"translate"),u()()),t&2&&(p(3),X(O(4,1,"GENERAL.PAGE_NOT_FOUND.TITLE")))},dependencies:[F,Rt,Ko,j,ee],encapsulation:2})}}return r})();var uc=r=>[r];function hc(r,i){r&1&&C(0,"mat-spinner",0)}function gc(r,i){r&1&&(m(0,"perun-web-apps-alert",1),S(1),P(2,"translate"),u()),r&2&&(p(),X(O(2,1,"USER_DETAIL.DASHBOARD.NO_RECENTLY_VIEWED")))}function fc(r,i){if(r&1){let e=Ae();m(0,"div",3)(1,"a",4),z("auxclick",function(n){return be(e),Se(n.preventDefault())}),m(2,"span",5),S(3),u(),C(4,"mat-icon",6),m(5,"p",7),S(6),u()()()}if(r&2){let e=i.$implicit;p(),De(Fe("",e.style," item-itself")),f("matTooltip",yt(e.tooltip))("perunWebAppsMiddleClickRouterLink",he(10,uc,e.url))("routerLink",e.url),p(2),X(e.type),p(),f("svgIcon",e.cssIcon),p(2),X(e.label)}}function vc(r,i){if(r&1&&(m(0,"div",2),ae(1,fc,7,12,"div",3,ot),u()),r&2){let e=M();p(),le(e.items)}}var Ys=(()=>{class r{constructor(e,t,n,o){this.vosManager=e,this.groupsManager=t,this.authResolver=n,this.facilitiesManager=o,this.items=[],this.vosIds=[],this.groupsIds=[],this.facilitiesIds=[],this.existingRecentIds=[],this.vos=[],this.groups=[],this.facilities=[]}ngOnInit(){this.loading=!0,this.recentItems=No("recent");for(let e of this.recentItems)switch(e.type){case"Vo":{this.vosIds.push(e.id);break}case"RichGroup":case"Group":{this.groupsIds.push(e.id);break}case"Facility":{this.facilitiesIds.push(e.id);break}}this.vosIds.length===0&&this.vosIds.push(-1),this.groupsIds.length===0&&this.groupsIds.push(-1),this.facilitiesIds.length===0&&this.facilitiesIds.push(-1),this.getVos()}getVos(){this.authResolver.isAuthorized("getVosByIds_List<Integer>_policy",[])?this.vosManager.getVosByIds(this.vosIds).subscribe(e=>{this.vos=e,this.getGroups()}):this.getGroups()}getGroups(){this.authResolver.isAuthorized("getGroupsByIds_List<Integer>_policy",[])?this.groupsManager.getGroupsByIds(this.groupsIds).subscribe(e=>{this.groups=e,this.getFacilities()}):this.getFacilities()}getFacilities(){this.authResolver.isAuthorized("getFacilitiesByIds_List<Integer>_policy",[])?this.facilitiesManager.getFacilitiesByIds(this.facilitiesIds).subscribe(e=>{this.facilities=e,this.addRecentlyViewedToDashboard()}):this.addRecentlyViewedToDashboard()}addRecentlyViewedToDashboard(){for(let e of this.recentItems)switch(e.type){case"Vo":{let t=this.vos.filter(n=>n.id===e.id)[0];t&&this.items.push({cssIcon:"perun-vo",url:`/organizations/${t.id}`,label:t.name,tooltip:t.name,style:"vo-btn",type:"Organization"});break}case"RichGroup":case"Group":{let t=this.groups.filter(n=>n.id===e.id)[0];t&&this.items.push({cssIcon:"perun-group",url:`/organizations/${t.voId}/groups/${t.id}`,label:t.shortName,tooltip:`${e.voName} : ${t.name.replace(/:/g," : ")}`,style:"group-btn",type:"Group"});break}case"Facility":{let t=this.facilities.filter(n=>n.id===e.id)[0];t&&this.items.push({cssIcon:"perun-facility-white",url:`/facilities/${t.id}`,label:t.name,tooltip:t.name,style:"facility-btn",type:"Facility"});break}}this.loading=!1}static{this.\u0275fac=function(t){return new(t||r)(d(Co),d(_o),d(ke),d(yo))}}static{this.\u0275cmp=x({type:r,selectors:[["app-perun-web-apps-dashboard-recently-viewed-button-field"]],decls:3,vars:3,consts:[[1,"ms-auto","me-auto"],["alert_type","info"],[1,"items-container"],["mat-ripple","",1,"item-itself-container"],[3,"auxclick","perunWebAppsMiddleClickRouterLink","routerLink","matTooltip"],[1,"item-type"],[1,"item-pic","perun-icon",3,"svgIcon"],[1,"truncate"]],template:function(t,n){t&1&&(A(0,hc,1,0,"mat-spinner",0),A(1,gc,3,3,"perun-web-apps-alert",1),A(2,vc,3,0,"div",2)),t&2&&(R(n.loading?0:-1),p(),R(n.items.length===0&&!n.loading?1:-1),p(),R(n.items.length>0?2:-1))},dependencies:[F,q,ce,Ye,Pt,yi,ve,gi,po,co,j,wt,ui,ee],styles:[".items-container[_ngcontent-%COMP%]{display:grid;grid-gap:0;grid-template-columns:repeat(auto-fill,minmax(208px,1fr));margin:0 -8px}@media (max-width: 768px){.items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(148px,1fr))}}.item-pic[_ngcontent-%COMP%]{color:currentColor;transform:scale(3);height:74px;margin-bottom:22px;align-self:center}.item-itself-container[_ngcontent-%COMP%]{margin:8px;transition:.25s}.item-itself-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 25px 5px #00000054;transform:scale(1.02);border-radius:var(--bs-border-radius)}.item-itself[_ngcontent-%COMP%]{text-align:center;min-height:186px;height:100%;padding:20px;display:flex;flex-direction:column;font-size:1.25rem;word-wrap:break-word;overflow-wrap:break-word;word-break:break-word;text-decoration:none;border-radius:var(--bs-border-radius)}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;margin-bottom:10px}@media (max-width: 768px){.item-itself[_ngcontent-%COMP%]{min-height:150px;padding:10px;word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;margin-bottom:10px}}.item-type[_ngcontent-%COMP%]{font-size:.75rem}.truncate[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}"]})}}return r})();var yc=()=>["id","recent","shortName","name"],_c=()=>["id","recent","vo","name","description"],bc=()=>["id","recent","name","vo","facility"],Sc=()=>["id","recent","name","description"];function wc(r,i){r&1&&C(0,"perun-web-apps-loading-table")}function Cc(r,i){if(r&1&&C(0,"perun-web-apps-vos-list",8),r&2){let e=M(2);f("loading",e.loading)("displayedColumns",qe(4,yc))("recentIds",e.recentIds)("vos",e.objects)}}function Mc(r,i){if(r&1&&(m(0,"div",6),ze(1,Cc,1,5,"perun-web-apps-vos-list",7),u()),r&2){let e=M(),t=Ge(10);p(),f("perunWebAppsLoader",e.loading)("perunWebAppsLoaderIndicator",t)}}function Ec(r,i){if(r&1&&C(0,"perun-web-apps-groups-list",10),r&2){let e=M(2);f("loading",e.loading)("displayedColumns",qe(4,_c))("groups",e.objects)("recentIds",e.recentIds)}}function Pc(r,i){if(r&1&&(m(0,"div",6),ze(1,Ec,1,5,"perun-web-apps-groups-list",9),u()),r&2){let e=M(),t=Ge(10);p(),f("perunWebAppsLoader",e.loading)("perunWebAppsLoaderIndicator",t)}}function Ic(r,i){if(r&1&&C(0,"perun-web-apps-resources-list",12),r&2){let e=M(2);f("loading",e.loading)("displayedColumns",qe(5,bc))("resources",e.objects)("recentIds",e.recentIds)("routingVo",!0)}}function Oc(r,i){if(r&1&&(m(0,"div",6),ze(1,Ic,1,6,"perun-web-apps-resources-list",11),u()),r&2){let e=M(),t=Ge(10);p(),f("perunWebAppsLoader",e.loading)("perunWebAppsLoaderIndicator",t)}}function Tc(r,i){if(r&1&&C(0,"perun-web-apps-facilities-list",14),r&2){let e=M(2);f("loading",e.loading)("displayedColumns",qe(4,Sc))("facilities",e.objects)("recentIds",e.recentIds)}}function Ac(r,i){if(r&1&&(m(0,"div",6),ze(1,Tc,1,5,"perun-web-apps-facilities-list",13),u()),r&2){let e=M(),t=Ge(10);p(),f("perunWebAppsLoader",e.loading)("perunWebAppsLoaderIndicator",t)}}var Xs=(()=>{class r{constructor(e,t,n){this.authzResolver=e,this.guiAuthResolver=t,this.resourceService=n,this.objects=[],this.loading=!1,this.recentIds=[]}ngOnInit(){this.loading=!0,this.primaryObject=this.guiAuthResolver.getPrimaryObjectOfRole(this.roleName),this.svgIcon="perun-"+this.primaryObject.toLowerCase()+"-black",this.title="USER_DETAIL.DASHBOARD.CARD_TITLE_"+this.roleName,this.roleTooltipInfo="USER_DETAIL.DASHBOARD.ROLE_INFO_"+this.roleName,this.getObjects()}getObjects(){switch(this.primaryObject){case"Vo":{this.authzResolver.getVosWhereUserIsInRoles([this.roleName]).subscribe(e=>{this.objects=e,this.recentIds=Bt("vos"),this.loading=!1});break}case"Group":{this.authzResolver.getGroupsWhereUserIsInRoles([this.roleName]).subscribe(e=>{this.objects=e,this.recentIds=Bt("groups"),this.loading=!1});break}case"Resource":{this.resourceService.getRichResourcesByIds(this.role[this.primaryObject]).subscribe(e=>{this.objects=e,this.recentIds=Bt("resources"),this.loading=!1});break}case"Facility":{this.authzResolver.getFacilitiesWhereUserIsInRoles([this.roleName]).subscribe(e=>{this.objects=e.map(t=>({facility:t})),this.recentIds=Bt("facilities"),this.loading=!1});break}default:this.objects=[],this.loading=!1}}static{this.\u0275fac=function(t){return new(t||r)(d(Xe),d(ke),d(bo))}}static{this.\u0275cmp=x({type:r,selectors:[["app-perun-web-apps-dashboard-card"]],inputs:{role:"role",roleName:"roleName"},decls:15,vars:12,consts:[["spinner",""],[1,"py-3"],[1,"d-flex","flex-row","align-items-center","gap-2","card-title"],[1,"perun-icon","d-flex","cover-image",3,"svgIcon"],["matTooltipPosition","above",3,"matTooltip"],[1,"dashboard-icon"],[1,"position-relative","table-min-height"],[3,"loading","displayedColumns","recentIds","vos",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"loading","displayedColumns","recentIds","vos"],[3,"loading","displayedColumns","groups","recentIds",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"loading","displayedColumns","groups","recentIds"],[3,"loading","displayedColumns","resources","recentIds","routingVo",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"loading","displayedColumns","resources","recentIds","routingVo"],[3,"loading","displayedColumns","facilities","recentIds",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"loading","displayedColumns","facilities","recentIds"]],template:function(t,n){t&1&&(m(0,"div",1)(1,"div",2),C(2,"mat-icon",3),S(3),P(4,"translate"),m(5,"span",4),P(6,"translate"),m(7,"mat-icon",5),S(8,"info_outline"),u()()(),ze(9,wc,1,0,"ng-template",null,0,kn),A(11,Mc,2,2,"div",6),A(12,Pc,2,2,"div",6),A(13,Oc,2,2,"div",6),A(14,Ac,2,2,"div",6),u()),t&2&&(p(2),f("svgIcon",n.svgIcon),p(),L(" ",O(4,8,n.title)," "),p(2),f("matTooltip",yt(O(6,10,n.roleTooltipInfo))),p(6),R(n.primaryObject==="Vo"?11:-1),p(),R(n.primaryObject==="Group"?12:-1),p(),R(n.primaryObject==="Resource"?13:-1),p(),R(n.primaryObject==="Facility"?14:-1))},dependencies:[F,q,ce,j,wt,mo,Go,fo,qo,Qo,Yo,ee],styles:[".dashboard-icon[_ngcontent-%COMP%]{vertical-align:middle;transform:scale(.8)}.card-title[_ngcontent-%COMP%]{font-size:1.4rem;flex-wrap:wrap}.cover-image[_ngcontent-%COMP%]{transform:scale(1.8);margin-left:.9rem;margin-right:.7rem}"]})}}return r})();function Rc(r,i){if(r&1){let e=Ae();m(0,"div")(1,"mat-checkbox",7),z("change",function(n){let o=be(e).$implicit,s=M();return Se(n?s.changeRoleView(o):null)}),S(2),P(3,"translate"),u()()}if(r&2){let e=i.$implicit,t=M();p(),f("checked",t.isRoleShowed(e)),p(),X(O(3,2,"USER_DETAIL.DASHBOARD.CARD_TITLE_"+e))}}function Dc(r,i){if(r&1){let e=Ae();m(0,"button",12),z("click",function(){be(e);let n=M(2);return Se(n.rightSettingOpened=!0)}),m(1,"mat-icon"),S(2,"settings"),u()()}}function Nc(r,i){r&1&&(m(0,"div")(1,"div",13)(2,"div",14),S(3),P(4,"translate"),u()()()),r&2&&(p(3),L(" ",O(4,1,"USER_DETAIL.DASHBOARD.NO_ASSIGNED_ROLES")," "))}function kc(r,i){r&1&&(m(0,"span")(1,"div",3),S(2),P(3,"translate"),u(),C(4,"app-perun-web-apps-dashboard-recently-viewed-button-field"),u()),r&2&&(p(2),L(" ",O(3,1,"USER_DETAIL.DASHBOARD.RECENTLY_VIEWED")," "))}function xc(r,i){r&1&&(m(0,"div",15),S(1),P(2,"translate"),u()),r&2&&(p(),L(" ",O(2,1,"USER_DETAIL.DASHBOARD.MANAGEABLE_ENTITIES")," "))}function Lc(r,i){if(r&1&&C(0,"app-perun-web-apps-dashboard-card",17),r&2){let e=M().$implicit,t=M(3);f("roleName",e)("role",t.roles[e])}}function zc(r,i){if(r&1&&(m(0,"div",16),A(1,Lc,1,2,"app-perun-web-apps-dashboard-card",17),u()),r&2){let e=i.$implicit,t=M(3);p(),R(t.isRoleShowed(e)?1:-1)}}function Fc(r,i){if(r&1&&(A(0,kc,5,3,"span"),A(1,xc,3,3,"div",15),m(2,"div"),ae(3,zc,2,1,"div",16,ot),u()),r&2){let e=M(2);R(e.recentlyViewedShow?0:-1),p(),R(e.rolesToHide.toString()!==e.roleNames.toString()?1:-1),p(2),le(e.roleNames)}}function Vc(r,i){if(r&1&&(m(0,"div",6)(1,"h1",8),C(2,"mat-icon",9),m(3,"span",10),S(4),P(5,"translate"),P(6,"userFullName"),u(),A(7,Dc,3,0,"button",11),u(),A(8,Nc,5,3,"div"),A(9,Fc,5,2),u()),r&2){let e=M();p(4),Dn("",O(5,5,"USER_DETAIL.DASHBOARD.TITLE")," ",O(6,7,e.user)),p(3),R(e.hasOnlyNoRightsRoles?-1:7),p(),R(e.hasOnlyNoRightsRoles?8:-1),p(),R(e.hasOnlyNoRightsRoles?-1:9)}}var Zs=(()=>{class r{constructor(e,t,n,o,s,a,l,c,g,h){this.userManager=e,this.storeService=t,this.sideMenuService=n,this.route=o,this.router=s,this.notificator=a,this.translateService=l,this.dialog=c,this.apiRequestConfiguration=g,this.otherApplicationService=h,this.roles={},this.hasOnlyNoRightsRoles=!1,this.rightSettingOpened=!1,this.recentlyViewedShow=!0,this.rolesToHide=[],this.noRightsRoles=new Set(["SELF","MEMBERSHIP","SPONSORSHIP"]),this.allowedRoles=["VOADMIN","GROUPADMIN","FACILITYADMIN","RESOURCEADMIN","TOPGROUPCREATOR","GROUPCREATOR","VOOBSERVER","ORGANIZATIONMEMBERSHIPMANAGER","GROUPOBSERVER","GROUPMEMBERSHIPMANAGER","FACILITYOBSERVER","RESOURCEOBSERVER","SERVICEACCOUNTCREATOR"],l.get("USER_DETAIL.DASHBOARD.MAIL_CHANGE_SUCCESS").subscribe(I=>this.mailSuccessMessage=I)}ngOnInit(){this.sideMenuService.setHomeItems([]),this.validatePreferredMailChange(),this.user=this.storeService.getPerunPrincipal()?.user,this.roles=this.storeService.getPerunPrincipal()?.roles??{};let e=Object.keys(this.roles);this.hasOnlyNoRightsRoles=e.every(t=>this.noRightsRoles.has(t)),this.storeService.getProperty("enable_sponsorships")&&this.allowedRoles.push("SPONSOR"),this.roleNames=this.allowedRoles.filter(t=>e.includes(t)),this.getDashboardSettings()}recentlyViewedChanged(){localStorage.setItem("showRecentlyViewed",JSON.stringify(this.recentlyViewedShow))}changeRoleView(e){if(!this.isRoleShowed(e))this.rolesToHide=this.rolesToHide.filter(t=>t!==e);else{let t=[];for(let n of this.roleNames)this.isRoleShowed(n)||t.push(n),n===e&&t.push(n);this.rolesToHide=t}localStorage.setItem("rolesToHide",JSON.stringify(this.rolesToHide))}isRoleShowed(e){return!this.rolesToHide.includes(e)}validatePreferredMailChange(){let e=this.route.snapshot.queryParamMap,t=e.get("token"),n=e.get("u");t&&n&&(this.apiRequestConfiguration.dontHandleErrorForNext(),this.userManager.validatePreferredEmailChangeWithToken({token:t,u:Number.parseInt(n,10)}).subscribe({next:()=>{this.notificator.showSuccess(this.mailSuccessMessage),this.router.navigate([],{replaceUrl:!0,queryParamsHandling:"preserve"})},error:()=>{let o=Ot();o.width="600px",this.dialog.open($o,o).afterClosed().subscribe(()=>{this.getDashboardSettings()})}}))}getDashboardSettings(){let e=JSON.parse(localStorage.getItem("showRecentlyViewed"));this.recentlyViewedShow=e===null?!0:e;let t=JSON.parse(localStorage.getItem("rolesToHide"));this.rolesToHide=t===null?[]:t}static{this.\u0275fac=function(t){return new(t||r)(d(So),d(pe),d(Mi),d(ro),d(Ne),d(Vo),d(Mt),d(It),d(Bo),d(_i))}}static{this.\u0275cmp=x({type:r,selectors:[["app-perun-web-apps-user-dashboard"]],hostVars:2,hostBindings:function(t,n){t&2&&$e("router-component",n.true)},decls:17,vars:12,consts:[["hasBackdrop","true",1,"dashboard"],["mode","over","position","end",3,"openedChange","opened"],[1,"m-4","user-theme"],[1,"page-subtitle"],[3,"ngModelChange","change","ngModel"],[1,"text-bigger","mt-1","mb-1"],[1,"container-fluid","ps-xl-5","pe-xl-5","user-theme"],[3,"change","checked"],[1,"page-title","d-flex"],["svgIcon","perun-home-white",1,"home-image","perun-icon"],["data-cy","dashboard-welcome",1,"pt-1"],["mat-stroked-button","",1,"ms-auto","text-bigger"],["mat-stroked-button","",1,"ms-auto","text-bigger",3,"click"],[1,"card","m-3","p-4"],[1,"text-align"],[1,"page-subtitle","my-4"],[1,"mb-3"],[3,"roleName","role"]],template:function(t,n){t&1&&(m(0,"mat-sidenav-container",0)(1,"mat-sidenav",1),ar("openedChange",function(s){return sr(n.rightSettingOpened,s)||(n.rightSettingOpened=s),s}),m(2,"div",2)(3,"div",3),S(4),P(5,"translate"),u(),m(6,"div")(7,"mat-checkbox",4),ar("ngModelChange",function(s){return sr(n.recentlyViewedShow,s)||(n.recentlyViewedShow=s),s}),z("change",function(s){return s?n.recentlyViewedChanged():null}),S(8),P(9,"translate"),u()(),m(10,"div",5),S(11),P(12,"translate"),u(),ae(13,Rc,4,4,"div",null,ot),u()(),m(15,"mat-sidenav-content"),A(16,Vc,10,9,"div",6),u()()),t&2&&(p(),or("opened",n.rightSettingOpened),p(3),X(O(5,6,"USER_DETAIL.DASHBOARD.DASHBOARD_SETTINGS")),p(3),or("ngModel",n.recentlyViewedShow),p(),X(O(9,8,"USER_DETAIL.DASHBOARD.SHOW_RECENTLY_VIEWED")),p(3),X(O(12,10,"USER_DETAIL.DASHBOARD.SHOW_ROLES")),p(2),le(n.roleNames),p(3),R(n.user!==void 0?16:-1))},dependencies:[F,Et,Qe,q,ce,Xn,Yn,Qn,mi,$n,Ct,di,ci,pi,li,ve,j,Ys,Xs,ee,vo],styles:[".dashboard-container[_ngcontent-%COMP%]{columns:300px 2;column-gap:1rem;margin:0}.dashboard-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 1rem 1rem 0;display:inline-block;min-width:300px;width:100%}.home-image[_ngcontent-%COMP%]{transform:scale(1.4);margin-right:.7rem;margin-left:.6rem}.text-align[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem}.text-bigger[_ngcontent-%COMP%]{font-size:1.1rem}.user-icon[_ngcontent-%COMP%]{vertical-align:top}.dashboard[_ngcontent-%COMP%]{position:relative;min-height:calc(100vh - 234px);margin-bottom:-60px!important;padding-bottom:50px;top:-10px!important;left:0;right:0}"]})}}return r})();var Js=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"api-callback",component:Ks},{path:"login",component:Oi},{path:"service-access",component:Ai},{path:"logout",component:uo},{path:"organizations",loadChildren:()=>import("./chunk-U5EFMK4H.js").then(r=>r.vosRoutes)},{path:"admin",loadChildren:()=>import("./chunk-VUJ2OU2K.js").then(r=>r.adminRoutes)},{path:"facilities",loadChildren:()=>import("./chunk-IVKYHJKD.js").then(r=>r.facilitiesRoutes)},{path:"settings",loadChildren:()=>import("./chunk-A7677JET.js").then(r=>r.settingsRoutes)},{path:"service-identities",loadChildren:()=>import("./chunk-QGKG2JO6.js").then(r=>r.usersRoutes)},{path:"home",component:Zs},{path:"notAuthorized",component:es},{path:"**",component:Qs}];var Ri=class{http;prefix;suffix;constructor(i,e="/assets/i18n/",t=".json"){this.http=i,this.prefix=e,this.suffix=t}getTranslation(i){return this.http.get(`${this.prefix}${i}${this.suffix}`)}};function ea(r){return new N(3e3,!1)}function Bc(){return new N(3100,!1)}function jc(){return new N(3101,!1)}function Uc(r){return new N(3001,!1)}function Hc(r){return new N(3003,!1)}function Wc(r){return new N(3004,!1)}function ia(r,i){return new N(3005,!1)}function ra(){return new N(3006,!1)}function na(){return new N(3007,!1)}function oa(r,i){return new N(3008,!1)}function sa(r){return new N(3002,!1)}function aa(r,i,e,t,n){return new N(3010,!1)}function la(){return new N(3011,!1)}function ca(){return new N(3012,!1)}function pa(){return new N(3200,!1)}function da(){return new N(3202,!1)}function ma(){return new N(3013,!1)}function ua(r){return new N(3014,!1)}function ha(r){return new N(3015,!1)}function ga(r){return new N(3016,!1)}function fa(r,i){return new N(3404,!1)}function Gc(r){return new N(3502,!1)}function va(r){return new N(3503,!1)}function ya(){return new N(3300,!1)}function _a(r){return new N(3504,!1)}function ba(r){return new N(3301,!1)}function Sa(r,i){return new N(3302,!1)}function wa(r){return new N(3303,!1)}function Ca(r,i){return new N(3400,!1)}function Ma(r){return new N(3401,!1)}function Ea(r){return new N(3402,!1)}function Pa(r,i){return new N(3505,!1)}function Be(r){switch(r.length){case 0:return new st;case 1:return r[0];default:return new Si(r)}}function Ir(r,i,e=new Map,t=new Map){let n=[],o=[],s=-1,a=null;if(i.forEach(l=>{let c=l.get("offset"),g=c==s,h=g&&a||new Map;l.forEach((I,E)=>{let y=E,w=I;if(E!=="offset")switch(y=r.normalizePropertyName(y,n),w){case jt:w=e.get(E);break;case Me:w=t.get(E);break;default:w=r.normalizeStyleValue(E,y,w,n);break}h.set(y,w)}),g||o.push(h),a=h,s=c}),n.length)throw Gc(n);return o}function Di(r,i,e,t){switch(i){case"start":r.onStart(()=>t(e&&Mr(e,"start",r)));break;case"done":r.onDone(()=>t(e&&Mr(e,"done",r)));break;case"destroy":r.onDestroy(()=>t(e&&Mr(e,"destroy",r)));break}}function Mr(r,i,e){let t=e.totalTime,n=!!e.disabled,o=Ni(r.element,r.triggerName,r.fromState,r.toState,i||r.phaseName,t??r.totalTime,n),s=r._data;return s!=null&&(o._data=s),o}function Ni(r,i,e,t,n="",o=0,s){return{element:r,triggerName:i,fromState:e,toState:t,phaseName:n,totalTime:o,disabled:!!s}}function de(r,i,e){let t=r.get(i);return t||r.set(i,t=e),t}function Or(r){let i=r.indexOf(":"),e=r.substring(1,i),t=r.slice(i+1);return[e,t]}var $c=typeof document>"u"?null:document.documentElement;function ki(r){let i=r.parentNode||r.host||null;return i===$c?null:i}function qc(r){return r.substring(1,6)=="ebkit"}var lt=null,ta=!1;function Ia(r){lt||(lt=Kc()||{},ta=lt.style?"WebkitAppearance"in lt.style:!1);let i=!0;return lt.style&&!qc(r)&&(i=r in lt.style,!i&&ta&&(i="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in lt.style)),i}function Kc(){return typeof document<"u"?document.body:null}function Tr(r,i){for(;i;){if(i===r)return!0;i=ki(i)}return!1}function Ar(r,i,e){if(e)return Array.from(r.querySelectorAll(i));let t=r.querySelector(i);return t?[t]:[]}var Qc=1e3,Rr="{{",Yc="}}",Dr="ng-enter",xi="ng-leave",Gt="ng-trigger",$t=".ng-trigger",Nr="ng-animating",Li=".ng-animating";function Le(r){if(typeof r=="number")return r;let i=r.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:Er(parseFloat(i[1]),i[2])}function Er(r,i){switch(i){case"s":return r*Qc;default:return r}}function qt(r,i,e){return r.hasOwnProperty("duration")?r:Zc(r,i,e)}var Xc=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Zc(r,i,e){let t,n=0,o="";if(typeof r=="string"){let s=r.match(Xc);if(s===null)return i.push(ea(r)),{duration:0,delay:0,easing:""};t=Er(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(n=Er(parseFloat(a),s[4]));let l=s[5];l&&(o=l)}else t=r;if(!e){let s=!1,a=i.length;t<0&&(i.push(Bc()),s=!0),n<0&&(i.push(jc()),s=!0),s&&i.splice(a,0,ea(r))}return{duration:t,delay:n,easing:o}}function Oa(r){return r.length?r[0]instanceof Map?r:r.map(i=>new Map(Object.entries(i))):[]}function Pe(r,i,e){i.forEach((t,n)=>{let o=zi(n);e&&!e.has(n)&&e.set(n,r.style[o]),r.style[o]=t})}function et(r,i){i.forEach((e,t)=>{let n=zi(t);r.style[n]=""})}function Nt(r){return Array.isArray(r)?r.length==1?r[0]:Xo(r):r}function Ta(r,i,e){let t=i.params||{},n=kr(r);n.length&&n.forEach(o=>{t.hasOwnProperty(o)||e.push(Uc(o))})}var Pr=new RegExp(`${Rr}\\s*(.+?)\\s*${Yc}`,"g");function kr(r){let i=[];if(typeof r=="string"){let e;for(;e=Pr.exec(r);)i.push(e[1]);Pr.lastIndex=0}return i}function kt(r,i,e){let t=`${r}`,n=t.replace(Pr,(o,s)=>{let a=i[s];return a==null&&(e.push(Hc(s)),a=""),a.toString()});return n==t?r:n}var Jc=/-+([a-z0-9])/g;function zi(r){return r.replace(Jc,(...i)=>i[1].toUpperCase())}function Aa(r,i){return r===0||i===0}function Ra(r,i,e){if(e.size&&i.length){let t=i[0],n=[];if(e.forEach((o,s)=>{t.has(s)||n.push(s),t.set(s,o)}),n.length)for(let o=1;o<i.length;o++){let s=i[o];n.forEach(a=>s.set(a,Fi(r,a)))}}return i}function me(r,i,e){switch(i.type){case T.Trigger:return r.visitTrigger(i,e);case T.State:return r.visitState(i,e);case T.Transition:return r.visitTransition(i,e);case T.Sequence:return r.visitSequence(i,e);case T.Group:return r.visitGroup(i,e);case T.Animate:return r.visitAnimate(i,e);case T.Keyframes:return r.visitKeyframes(i,e);case T.Style:return r.visitStyle(i,e);case T.Reference:return r.visitReference(i,e);case T.AnimateChild:return r.visitAnimateChild(i,e);case T.AnimateRef:return r.visitAnimateRef(i,e);case T.Query:return r.visitQuery(i,e);case T.Stagger:return r.visitStagger(i,e);default:throw Wc(i.type)}}function Fi(r,i){return window.getComputedStyle(r)[i]}var Xr=(()=>{class r{validateStyleProperty(e){return Ia(e)}containsElement(e,t){return Tr(e,t)}getParentElement(e){return ki(e)}query(e,t,n){return Ar(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,o,s,a=[],l){return new st(n,o)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=re({token:r,factory:r.\u0275fac})}return r})(),pt=class{static NOOP=new Xr},dt=class{};var ep=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Hi=class extends dt{normalizePropertyName(i,e){return zi(i)}normalizeStyleValue(i,e,t,n){let o="",s=t.toString().trim();if(ep.has(e)&&t!==0&&t!=="0")if(typeof t=="number")o="px";else{let a=t.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&n.push(ia(i,t))}return s+o}};var Wi="*";function tp(r,i){let e=[];return typeof r=="string"?r.split(/\s*,\s*/).forEach(t=>ip(t,e,i)):e.push(r),e}function ip(r,i,e){if(r[0]==":"){let l=rp(r,e);if(typeof l=="function"){i.push(l);return}r=l}let t=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return e.push(ha(r)),i;let n=t[1],o=t[2],s=t[3];i.push(Da(n,s));let a=n==Wi&&s==Wi;o[0]=="<"&&!a&&i.push(Da(s,n))}function rp(r,i){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return i.push(ga(r)),"* => *"}}var Vi=new Set(["true","1"]),Bi=new Set(["false","0"]);function Da(r,i){let e=Vi.has(r)||Bi.has(r),t=Vi.has(i)||Bi.has(i);return(n,o)=>{let s=r==Wi||r==n,a=i==Wi||i==o;return!s&&e&&typeof n=="boolean"&&(s=n?Vi.has(r):Bi.has(r)),!a&&t&&typeof o=="boolean"&&(a=o?Vi.has(i):Bi.has(i)),s&&a}}var Ua=":self",np=new RegExp(`s*${Ua}s*,?`,"g");function Ha(r,i,e,t){return new Br(r).build(i,e,t)}var Na="",Br=class{_driver;constructor(i){this._driver=i}build(i,e,t){let n=new jr(e);return this._resetContextStyleTimingState(n),me(this,Nt(i),n)}_resetContextStyleTimingState(i){i.currentQuerySelector=Na,i.collectedStyles=new Map,i.collectedStyles.set(Na,new Map),i.currentTime=0}visitTrigger(i,e){let t=e.queryCount=0,n=e.depCount=0,o=[],s=[];return i.name.charAt(0)=="@"&&e.errors.push(ra()),i.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==T.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(g=>{l.name=g,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==T.Transition){let l=this.visitTransition(a,e);t+=l.queryCount,n+=l.depCount,s.push(l)}else e.errors.push(na())}),{type:T.Trigger,name:i.name,states:o,transitions:s,queryCount:t,depCount:n,options:null}}visitState(i,e){let t=this.visitStyle(i.styles,e),n=i.options&&i.options.params||null;if(t.containsDynamicStyles){let o=new Set,s=n||{};t.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{kr(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(oa(i.name,[...o.values()]))}return{type:T.State,name:i.name,style:t,options:n?{params:n}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;let t=me(this,Nt(i.animation),e),n=tp(i.expr,e.errors);return{type:T.Transition,matchers:n,animation:t,queryCount:e.queryCount,depCount:e.depCount,options:ct(i.options)}}visitSequence(i,e){return{type:T.Sequence,steps:i.steps.map(t=>me(this,t,e)),options:ct(i.options)}}visitGroup(i,e){let t=e.currentTime,n=0,o=i.steps.map(s=>{e.currentTime=t;let a=me(this,s,e);return n=Math.max(n,e.currentTime),a});return e.currentTime=n,{type:T.Group,steps:o,options:ct(i.options)}}visitAnimate(i,e){let t=lp(i.timings,e.errors);e.currentAnimateTimings=t;let n,o=i.styles?i.styles:gr({});if(o.type==T.Keyframes)n=this.visitKeyframes(o,e);else{let s=i.styles,a=!1;if(!s){a=!0;let c={};t.easing&&(c.easing=t.easing),s=gr(c)}e.currentTime+=t.duration+t.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,n=l}return e.currentAnimateTimings=null,{type:T.Animate,timings:t,style:n,options:null}}visitStyle(i,e){let t=this._makeStyleAst(i,e);return this._validateStyleAst(t,e),t}_makeStyleAst(i,e){let t=[],n=Array.isArray(i.styles)?i.styles:[i.styles];for(let a of n)typeof a=="string"?a===Me?t.push(a):e.errors.push(sa(a)):t.push(new Map(Object.entries(a)));let o=!1,s=null;return t.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(Rr)>=0){o=!0;break}}}),{type:T.Style,styles:t,easing:s,offset:i.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(i,e){let t=e.currentAnimateTimings,n=e.currentTime,o=e.currentTime;t&&o>0&&(o-=t.duration+t.delay),i.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),g=c.get(l),h=!0;g&&(o!=n&&o>=g.startTime&&n<=g.endTime&&(e.errors.push(aa(l,g.startTime,g.endTime,o,n)),h=!1),o=g.startTime),h&&c.set(l,{startTime:o,endTime:n}),e.options&&Ta(a,e.options,e.errors)})})}visitKeyframes(i,e){let t={type:T.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(la()),t;let n=1,o=0,s=[],a=!1,l=!1,c=0,g=i.steps.map(U=>{let W=this._makeStyleAst(U,e),te=W.offset!=null?W.offset:ap(W.styles),K=0;return te!=null&&(o++,K=W.offset=te),l=l||K<0||K>1,a=a||K<c,c=K,s.push(K),W});l&&e.errors.push(ca()),a&&e.errors.push(pa());let h=i.steps.length,I=0;o>0&&o<h?e.errors.push(da()):o==0&&(I=n/(h-1));let E=h-1,y=e.currentTime,w=e.currentAnimateTimings,V=w.duration;return g.forEach((U,W)=>{let te=I>0?W==E?1:I*W:s[W],K=te*V;e.currentTime=y+w.delay+K,w.duration=K,this._validateStyleAst(U,e),U.offset=te,t.styles.push(U)}),t}visitReference(i,e){return{type:T.Reference,animation:me(this,Nt(i.animation),e),options:ct(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:T.AnimateChild,options:ct(i.options)}}visitAnimateRef(i,e){return{type:T.AnimateRef,animation:this.visitReference(i.animation,e),options:ct(i.options)}}visitQuery(i,e){let t=e.currentQuerySelector,n=i.options||{};e.queryCount++,e.currentQuery=i;let[o,s]=op(i.selector);e.currentQuerySelector=t.length?t+" "+o:o,de(e.collectedStyles,e.currentQuerySelector,new Map);let a=me(this,Nt(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=t,{type:T.Query,selector:o,limit:n.limit||0,optional:!!n.optional,includeSelf:s,animation:a,originalSelector:i.selector,options:ct(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(ma());let t=i.timings==="full"?{duration:0,delay:0,easing:"full"}:qt(i.timings,e.errors,!0);return{type:T.Stagger,animation:me(this,Nt(i.animation),e),timings:t,options:null}}};function op(r){let i=!!r.split(/\s*,\s*/).find(e=>e==Ua);return i&&(r=r.replace(np,"")),r=r.replace(/@\*/g,$t).replace(/@\w+/g,e=>$t+"-"+e.slice(1)).replace(/:animating/g,Li),[r,i]}function sp(r){return r?Q({},r):null}var jr=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(i){this.errors=i}};function ap(r){if(typeof r=="string")return null;let i=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){let t=e;i=parseFloat(t.get("offset")),t.delete("offset")}});else if(r instanceof Map&&r.has("offset")){let e=r;i=parseFloat(e.get("offset")),e.delete("offset")}return i}function lp(r,i){if(r.hasOwnProperty("duration"))return r;if(typeof r=="number"){let o=qt(r,i).duration;return xr(o,0,"")}let e=r;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=xr(0,0,"");return o.dynamic=!0,o.strValue=e,o}let n=qt(e,i);return xr(n.duration,n.delay,n.easing)}function ct(r){return r?(r=Q({},r),r.params&&(r.params=sp(r.params))):r={},r}function xr(r,i,e){return{duration:r,delay:i,easing:e}}function Zr(r,i,e,t,n,o,s=null,a=!1){return{type:1,element:r,keyframes:i,preStyleProps:e,postStyleProps:t,duration:n,delay:o,totalTime:n+o,easing:s,subTimeline:a}}var Qt=class{_map=new Map;get(i){return this._map.get(i)||[]}append(i,e){let t=this._map.get(i);t||this._map.set(i,t=[]),t.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}},cp=1,pp=":enter",dp=new RegExp(pp,"g"),mp=":leave",up=new RegExp(mp,"g");function Wa(r,i,e,t,n,o=new Map,s=new Map,a,l,c=[]){return new Ur().buildKeyframes(r,i,e,t,n,o,s,a,l,c)}var Ur=class{buildKeyframes(i,e,t,n,o,s,a,l,c,g=[]){c=c||new Qt;let h=new Hr(i,e,c,n,o,g,[]);h.options=l;let I=l.delay?Le(l.delay):0;h.currentTimeline.delayNextStep(I),h.currentTimeline.setStyles([s],null,h.errors,l),me(this,t,h);let E=h.timelines.filter(y=>y.containsAnimation());if(E.length&&a.size){let y;for(let w=E.length-1;w>=0;w--){let V=E[w];if(V.element===e){y=V;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,h.errors,l)}return E.length?E.map(y=>y.buildKeyframes()):[Zr(e,[],[],[],0,I,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){let t=e.subInstructions.get(e.element);if(t){let n=e.createSubContext(i.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(t,n,n.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=i}visitAnimateRef(i,e){let t=e.createSubContext(i.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,t),this.visitReference(i.animation,t),e.transformIntoNewTimeline(t.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,t){for(let n of i){let o=n?.delay;if(o){let s=typeof o=="number"?o:Le(kt(o,n?.params??{},e.errors));t.delayNextStep(s)}}}_visitSubInstructions(i,e,t){let o=e.currentTimeline.currentTime,s=t.duration!=null?Le(t.duration):null,a=t.delay!=null?Le(t.delay):null;return s!==0&&i.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(i,e){e.updateOptions(i.options,!0),me(this,i.animation,e),e.previousNode=i}visitSequence(i,e){let t=e.subContextCount,n=e,o=i.options;if(o&&(o.params||o.delay)&&(n=e.createSubContext(o),n.transformIntoNewTimeline(),o.delay!=null)){n.previousNode.type==T.Style&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Gi);let s=Le(o.delay);n.delayNextStep(s)}i.steps.length&&(i.steps.forEach(s=>me(this,s,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>t&&n.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){let t=[],n=e.currentTimeline.currentTime,o=i.options&&i.options.delay?Le(i.options.delay):0;i.steps.forEach(s=>{let a=e.createSubContext(i.options);o&&a.delayNextStep(o),me(this,s,a),n=Math.max(n,a.currentTimeline.currentTime),t.push(a.currentTimeline)}),t.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(n),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){let t=i.strValue,n=e.params?kt(t,e.params,e.errors):t;return qt(n,e.errors)}else return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){let t=e.currentAnimateTimings=this._visitTiming(i.timings,e),n=e.currentTimeline;t.delay&&(e.incrementTime(t.delay),n.snapshotCurrentStyles());let o=i.style;o.type==T.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(t.duration),this.visitStyle(o,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){let t=e.currentTimeline,n=e.currentAnimateTimings;!n&&t.hasCurrentStyleProperties()&&t.forwardFrame();let o=n&&n.easing||i.easing;i.isEmptyStep?t.applyEmptyStep(o):t.setStyles(i.styles,o,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){let t=e.currentAnimateTimings,n=e.currentTimeline.duration,o=t.duration,a=e.createSubContext().currentTimeline;a.easing=t.easing,i.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(n+o),e.previousNode=i}visitQuery(i,e){let t=e.currentTimeline.currentTime,n=i.options||{},o=n.delay?Le(n.delay):0;o&&(e.previousNode.type===T.Style||t==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Gi);let s=t,a=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,g)=>{e.currentQueryIndex=g;let h=e.createSubContext(i.options,c);o&&h.delayNextStep(o),c===e.element&&(l=h.currentTimeline),me(this,i.animation,h),h.currentTimeline.applyStylesToKeyframe();let I=h.currentTimeline.currentTime;s=Math.max(s,I)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){let t=e.parentContext,n=e.currentTimeline,o=i.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=t.currentStaggerTime;break}let g=e.currentTimeline;l&&g.delayNextStep(l);let h=g.currentTime;me(this,i.animation,e),e.previousNode=i,t.currentStaggerTime=n.currentTime-h+(n.startTime-t.currentTimeline.startTime)}},Gi={},Hr=class r{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Gi;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(i,e,t,n,o,s,a,l){this._driver=i,this.element=e,this.subInstructions=t,this._enterClassName=n,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new $i(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;let t=i,n=this.options;t.duration!=null&&(n.duration=Le(t.duration)),t.delay!=null&&(n.delay=Le(t.delay));let o=t.params;if(o){let s=n.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=kt(o[a],s,this.errors))})}}_copyOptions(){let i={};if(this.options){let e=this.options.params;if(e){let t=i.params={};Object.keys(e).forEach(n=>{t[n]=e[n]})}}return i}createSubContext(i=null,e,t){let n=e||this.element,o=new r(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,t||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(i),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(i){return this.previousNode=Gi,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,t){let n={duration:e??i.duration,delay:this.currentTimeline.currentTime+(t??0)+i.delay,easing:""},o=new Wr(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,n,i.stretchStartingKeyframe);return this.timelines.push(o),n}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,t,n,o,s){let a=[];if(n&&a.push(this.element),i.length>0){i=i.replace(dp,"."+this._enterClassName),i=i.replace(up,"."+this._leaveClassName);let l=t!=1,c=this._driver.query(this.element,i,l);t!==0&&(c=t<0?c.slice(c.length+t,c.length):c.slice(0,t)),a.push(...c)}return!o&&a.length==0&&s.push(ua(e)),a}},$i=class r{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(i,e,t,n){this._driver=i,this.element=e,this.startTime=t,this._elementTimelineStylesLookup=n,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new r(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=cp,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,t]of this._globalTimelineStyles)this._backFill.set(e,t||Me),this._currentKeyframe.set(e,Me);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,t,n){e&&this._previousKeyframe.set("easing",e);let o=n&&n.params||{},s=hp(i,this._globalTimelineStyles);for(let[a,l]of s){let c=kt(l,o,t);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Me),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,t)=>{let n=this._styleSummary.get(t);(!n||e.time>n.time)&&this._updateStyle(t,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let i=new Set,e=new Set,t=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((g,h)=>{g===jt?i.add(h):g===Me&&e.add(h)}),t||c.set("offset",l/this.duration),n.push(c)});let o=[...i.values()],s=[...e.values()];if(t){let a=n[0],l=new Map(a);a.set("offset",0),l.set("offset",1),n=[a,l]}return Zr(this.element,n,o,s,this.duration,this.startTime,this.easing,!1)}},Wr=class extends $i{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(i,e,t,n,o,s,a=!1){super(i,e,s.delay),this.keyframes=t,this.preStyleProps=n,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:t,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=t+e,a=e/s,l=new Map(i[0]);l.set("offset",0),o.push(l);let c=new Map(i[0]);c.set("offset",ka(a)),o.push(c);let g=i.length-1;for(let h=1;h<=g;h++){let I=new Map(i[h]),E=I.get("offset"),y=e+E*t;I.set("offset",ka(y/s)),o.push(I)}t=s,e=0,n="",i=o}return Zr(this.element,i,this.preStyleProps,this.postStyleProps,t,e,n,!0)}};function ka(r,i=3){let e=Math.pow(10,i-1);return Math.round(r*e)/e}function hp(r,i){let e=new Map,t;return r.forEach(n=>{if(n==="*"){t??=i.keys();for(let o of t)e.set(o,Me)}else for(let[o,s]of n)e.set(o,s)}),e}function xa(r,i,e,t,n,o,s,a,l,c,g,h,I){return{type:0,element:r,triggerName:i,isRemovalTransition:n,fromState:e,fromStyles:o,toState:t,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:g,totalTime:h,errors:I}}var Lr={},qi=class{_triggerName;ast;_stateStyles;constructor(i,e,t){this._triggerName=i,this.ast=e,this._stateStyles=t}match(i,e,t,n){return gp(this.ast.matchers,i,e,t,n)}buildStyles(i,e,t){let n=this._stateStyles.get("*");return i!==void 0&&(n=this._stateStyles.get(i?.toString())||n),n?n.buildStyles(e,t):new Map}build(i,e,t,n,o,s,a,l,c,g){let h=[],I=this.ast.options&&this.ast.options.params||Lr,E=a&&a.params||Lr,y=this.buildStyles(t,E,h),w=l&&l.params||Lr,V=this.buildStyles(n,w,h),U=new Set,W=new Map,te=new Map,K=n==="void",mt={params:Ga(w,I),delay:this.ast.options?.delay},Oe=g?[]:Wa(i,e,this.ast.animation,o,s,y,V,mt,c,h),ie=0;return Oe.forEach(oe=>{ie=Math.max(oe.duration+oe.delay,ie)}),h.length?xa(e,this._triggerName,t,n,K,y,V,[],[],W,te,ie,h):(Oe.forEach(oe=>{let tt=oe.element,ut=de(W,tt,new Set);oe.preStyleProps.forEach(it=>ut.add(it));let tn=de(te,tt,new Set);oe.postStyleProps.forEach(it=>tn.add(it)),tt!==e&&U.add(tt)}),xa(e,this._triggerName,t,n,K,y,V,Oe,[...U.values()],W,te,ie))}};function gp(r,i,e,t,n){return r.some(o=>o(i,e,t,n))}function Ga(r,i){let e=Q({},i);return Object.entries(r).forEach(([t,n])=>{n!=null&&(e[t]=n)}),e}var Gr=class{styles;defaultParams;normalizer;constructor(i,e,t){this.styles=i,this.defaultParams=e,this.normalizer=t}buildStyles(i,e){let t=new Map,n=Ga(i,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=kt(s,n,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),t.set(a,s)})}),t}};function fp(r,i,e){return new $r(r,i,e)}var $r=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(i,e,t){this.name=i,this.ast=e,this._normalizer=t,e.states.forEach(n=>{let o=n.options&&n.options.params||{};this.states.set(n.name,new Gr(n.style,o,t))}),La(this.states,"true","1"),La(this.states,"false","0"),e.transitions.forEach(n=>{this.transitionFactories.push(new qi(i,n,this.states))}),this.fallbackTransition=vp(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,t,n){return this.transitionFactories.find(s=>s.match(i,e,t,n))||null}matchStyles(i,e,t){return this.fallbackTransition.buildStyles(i,e,t)}};function vp(r,i,e){let t=[(s,a)=>!0],n={type:T.Sequence,steps:[],options:null},o={type:T.Transition,animation:n,matchers:t,options:null,queryCount:0,depCount:0};return new qi(r,o,i)}function La(r,i,e){r.has(i)?r.has(e)||r.set(e,r.get(i)):r.has(e)&&r.set(i,r.get(e))}var yp=new Qt,qr=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(i,e,t){this.bodyNode=i,this._driver=e,this._normalizer=t}register(i,e){let t=[],n=[],o=Ha(this._driver,e,t,n);if(t.length)throw va(t);this._animations.set(i,o)}_buildPlayer(i,e,t){let n=i.element,o=Ir(this._normalizer,i.keyframes,e,t);return this._driver.animate(n,o,i.duration,i.delay,i.easing,[],!0)}create(i,e,t={}){let n=[],o=this._animations.get(i),s,a=new Map;if(o?(s=Wa(this._driver,e,o,Dr,xi,new Map,new Map,t,yp,n),s.forEach(g=>{let h=de(a,g.element,new Map);g.postStyleProps.forEach(I=>h.set(I,null))})):(n.push(ya()),s=[]),n.length)throw _a(n);a.forEach((g,h)=>{g.forEach((I,E)=>{g.set(E,this._driver.computeStyle(h,E,Me))})});let l=s.map(g=>{let h=a.get(g.element);return this._buildPlayer(g,new Map,h)}),c=Be(l);return this._playersById.set(i,c),c.onDestroy(()=>this.destroy(i)),this.players.push(c),c}destroy(i){let e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);let t=this.players.indexOf(e);t>=0&&this.players.splice(t,1)}_getPlayer(i){let e=this._playersById.get(i);if(!e)throw ba(i);return e}listen(i,e,t,n){let o=Ni(e,"","","");return Di(this._getPlayer(i),t,o,n),()=>{}}command(i,e,t,n){if(t=="register"){this.register(i,n[0]);return}if(t=="create"){let s=n[0]||{};this.create(i,e,s);return}let o=this._getPlayer(i);switch(t){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(i);break}}},za="ng-animate-queued",_p=".ng-animate-queued",zr="ng-animate-disabled",bp=".ng-animate-disabled",Sp="ng-star-inserted",wp=".ng-star-inserted",Cp=[],$a={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Mp={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ie="__ng_removed",Yt=class{namespaceId;value;options;get params(){return this.options.params}constructor(i,e=""){this.namespaceId=e;let t=i&&i.hasOwnProperty("value"),n=t?i.value:i;if(this.value=Pp(n),t){let o=i,{value:s}=o,a=sn(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){let e=i.params;if(e){let t=this.options.params;Object.keys(e).forEach(n=>{t[n]==null&&(t[n]=e[n])})}}},Kt="void",Fr=new Yt(Kt),Kr=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(i,e,t){this.id=i,this.hostElement=e,this._engine=t,this._hostClassName="ng-tns-"+i,ye(e,this._hostClassName)}listen(i,e,t,n){if(!this._triggers.has(e))throw Sa(t,e);if(t==null||t.length==0)throw wa(e);if(!Ip(t))throw Ca(t,e);let o=de(this._elementListeners,i,[]),s={name:e,phase:t,callback:n};o.push(s);let a=de(this._engine.statesByElement,i,new Map);return a.has(e)||(ye(i,Gt),ye(i,Gt+"-"+e),a.set(e,Fr)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(i,e){return this._triggers.has(i)?!1:(this._triggers.set(i,e),!0)}_getTrigger(i){let e=this._triggers.get(i);if(!e)throw Ma(i);return e}trigger(i,e,t,n=!0){let o=this._getTrigger(e),s=new Xt(this.id,e,i),a=this._engine.statesByElement.get(i);a||(ye(i,Gt),ye(i,Gt+"-"+e),this._engine.statesByElement.set(i,a=new Map));let l=a.get(e),c=new Yt(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=Fr),!(c.value===Kt)&&l.value===c.value){if(!Ap(l.params,c.params)){let w=[],V=o.matchStyles(l.value,l.params,w),U=o.matchStyles(c.value,c.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{et(i,V),Pe(i,U)})}return}let I=de(this._engine.playersByElement,i,[]);I.forEach(w=>{w.namespaceId==this.id&&w.triggerName==e&&w.queued&&w.destroy()});let E=o.matchTransition(l.value,c.value,i,c.params),y=!1;if(!E){if(!n)return;E=o.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:E,fromState:l,toState:c,player:s,isFallbackTransition:y}),y||(ye(i,za),s.onStart(()=>{xt(i,za)})),s.onDone(()=>{let w=this.players.indexOf(s);w>=0&&this.players.splice(w,1);let V=this._engine.playersByElement.get(i);if(V){let U=V.indexOf(s);U>=0&&V.splice(U,1)}}),this.players.push(s),I.push(s),s}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,t)=>{this._elementListeners.set(t,e.filter(n=>n.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);let e=this._engine.playersByElement.get(i);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){let t=this._engine.driver.query(i,$t,!0);t.forEach(n=>{if(n[Ie])return;let o=this._engine.fetchNamespacesByElement(n);o.size?o.forEach(s=>s.triggerLeaveAnimation(n,e,!1,!0)):this.clearElementCache(n)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(n=>this.clearElementCache(n)))}triggerLeaveAnimation(i,e,t,n){let o=this._engine.statesByElement.get(i),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let g=this.trigger(i,c,Kt,n);g&&a.push(g)}}),a.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,s),t&&Be(a).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){let e=this._elementListeners.get(i),t=this._engine.statesByElement.get(i);if(e&&t){let n=new Set;e.forEach(o=>{let s=o.name;if(n.has(s))return;n.add(s);let l=this._triggers.get(s).fallbackTransition,c=t.get(s)||Fr,g=new Yt(Kt),h=new Xt(this.id,s,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:s,transition:l,fromState:c,toState:g,player:h,isFallbackTransition:!0})})}}removeNode(i,e){let t=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let n=!1;if(t.totalAnimations){let o=t.players.length?t.playersByQueriedElement.get(i):[];if(o&&o.length)n=!0;else{let s=i;for(;s=s.parentNode;)if(t.statesByElement.get(s)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(i),n)t.markElementAsRemoved(this.id,i,!1,e);else{let o=i[Ie];(!o||o===$a)&&(t.afterFlush(()=>this.clearElementCache(i)),t.destroyInnerAnimations(i),t._onRemovalComplete(i,e))}}insertNode(i,e){ye(i,this._hostClassName)}drainQueuedTransitions(i){let e=[];return this._queue.forEach(t=>{let n=t.player;if(n.destroyed)return;let o=t.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==t.triggerName){let l=Ni(o,t.triggerName,t.fromState.value,t.toState.value);l._data=i,Di(t.player,a.phase,l,a.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(t)}),this._queue=[],e.sort((t,n)=>{let o=t.transition.ast.depCount,s=n.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(t.element,n.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}},Qr=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(i,e)=>{};_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}constructor(i,e,t){this.bodyNode=i,this.driver=e,this._normalizer=t}get queuedPlayers(){let i=[];return this._namespaceList.forEach(e=>{e.players.forEach(t=>{t.queued&&i.push(t)})}),i}createNamespace(i,e){let t=new Kr(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(t,e):(this.newHostElements.set(e,t),this.collectEnterElement(e)),this._namespaceLookup[i]=t}_balanceNamespaceList(i,e){let t=this._namespaceList,n=this.namespacesByHostElement;if(t.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=n.get(a);if(l){let c=t.indexOf(l);t.splice(c+1,0,i),s=!0;break}a=this.driver.getParentElement(a)}s||t.unshift(i)}else t.push(i);return n.set(e,i),i}register(i,e){let t=this._namespaceLookup[i];return t||(t=this.createNamespace(i,e)),t}registerTrigger(i,e,t){let n=this._namespaceLookup[i];n&&n.register(e,t)&&this.totalAnimations++}destroy(i,e){i&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(i);this.namespacesByHostElement.delete(t.hostElement);let n=this._namespaceList.indexOf(t);n>=0&&this._namespaceList.splice(n,1),t.destroy(e),delete this._namespaceLookup[i]}))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){let e=new Set,t=this.statesByElement.get(i);if(t){for(let n of t.values())if(n.namespaceId){let o=this._fetchNamespace(n.namespaceId);o&&e.add(o)}}return e}trigger(i,e,t,n){if(ji(e)){let o=this._fetchNamespace(i);if(o)return o.trigger(e,t,n),!0}return!1}insertNode(i,e,t,n){if(!ji(e))return;let o=e[Ie];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(i){let s=this._fetchNamespace(i);s&&s.insertNode(e,t)}n&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),ye(i,zr)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),xt(i,zr))}removeNode(i,e,t){if(ji(e)){let n=i?this._fetchNamespace(i):null;n?n.removeNode(e,t):this.markElementAsRemoved(i,e,!1,t);let o=this.namespacesByHostElement.get(e);o&&o.id!==i&&o.removeNode(e,t)}else this._onRemovalComplete(e,t)}markElementAsRemoved(i,e,t,n,o){this.collectedLeaveElements.push(e),e[Ie]={namespaceId:i,setForRemoval:n,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:o}}listen(i,e,t,n,o){return ji(e)?this._fetchNamespace(i).listen(e,t,n,o):()=>{}}_buildInstruction(i,e,t,n,o){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,t,n,i.fromState.options,i.toState.options,e,o)}destroyInnerAnimations(i){let e=this.driver.query(i,$t,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(i,Li,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(i){let e=this.playersByElement.get(i);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(i){let e=this.playersByQueriedElement.get(i);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return Be(this.players).onDone(()=>i());i()})}processLeaveNode(i){let e=i[Ie];if(e&&e.setForRemoval){if(i[Ie]=$a,e.namespaceId){this.destroyInnerAnimations(i);let t=this._fetchNamespace(e.namespaceId);t&&t.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains(zr)&&this.markElementAsDisabled(i,!1),this.driver.query(i,bp,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,n)=>this._balanceNamespaceList(t,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let n=this.collectedEnterElements[t];ye(n,Sp)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{e=this._flushAnimations(t,i)}finally{for(let n=0;n<t.length;n++)t[n]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let n=this.collectedLeaveElements[t];this.processLeaveNode(n)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],e.length?Be(e).onDone(()=>{t.forEach(n=>n())}):t.forEach(n=>n())}}reportError(i){throw Ea(i)}_flushAnimations(i,e){let t=new Qt,n=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,g=new Set;this.disabledNodes.forEach(v=>{g.add(v);let _=this.driver.query(v,_p,!0);for(let b=0;b<_.length;b++)g.add(_[b])});let h=this.bodyNode,I=Array.from(this.statesByElement.keys()),E=Ba(I,this.collectedEnterElements),y=new Map,w=0;E.forEach((v,_)=>{let b=Dr+w++;y.set(_,b),v.forEach(D=>ye(D,b))});let V=[],U=new Set,W=new Set;for(let v=0;v<this.collectedLeaveElements.length;v++){let _=this.collectedLeaveElements[v],b=_[Ie];b&&b.setForRemoval&&(V.push(_),U.add(_),b.hasAnimation?this.driver.query(_,wp,!0).forEach(D=>U.add(D)):W.add(_))}let te=new Map,K=Ba(I,Array.from(U));K.forEach((v,_)=>{let b=xi+w++;te.set(_,b),v.forEach(D=>ye(D,b))}),i.push(()=>{E.forEach((v,_)=>{let b=y.get(_);v.forEach(D=>xt(D,b))}),K.forEach((v,_)=>{let b=te.get(_);v.forEach(D=>xt(D,b))}),V.forEach(v=>{this.processLeaveNode(v)})});let mt=[],Oe=[];for(let v=this._namespaceList.length-1;v>=0;v--)this._namespaceList[v].drainQueuedTransitions(e).forEach(b=>{let D=b.player,G=b.element;if(mt.push(D),this.collectedEnterElements.length){let Z=G[Ie];if(Z&&Z.setForMove){if(Z.previousTriggersValues&&Z.previousTriggersValues.has(b.triggerName)){let rt=Z.previousTriggersValues.get(b.triggerName),ge=this.statesByElement.get(b.element);if(ge&&ge.has(b.triggerName)){let Zt=ge.get(b.triggerName);Zt.value=rt,ge.set(b.triggerName,Zt)}}D.destroy();return}}let Te=!h||!this.driver.containsElement(h,G),ue=te.get(G),je=y.get(G),B=this._buildInstruction(b,t,je,ue,Te);if(B.errors&&B.errors.length){Oe.push(B);return}if(Te){D.onStart(()=>et(G,B.fromStyles)),D.onDestroy(()=>Pe(G,B.toStyles)),n.push(D);return}if(b.isFallbackTransition){D.onStart(()=>et(G,B.fromStyles)),D.onDestroy(()=>Pe(G,B.toStyles)),n.push(D);return}let on=[];B.timelines.forEach(Z=>{Z.stretchStartingKeyframe=!0,this.disabledNodes.has(Z.element)||on.push(Z)}),B.timelines=on,t.append(G,B.timelines);let tl={instruction:B,player:D,element:G};s.push(tl),B.queriedElements.forEach(Z=>de(a,Z,[]).push(D)),B.preStyleProps.forEach((Z,rt)=>{if(Z.size){let ge=l.get(rt);ge||l.set(rt,ge=new Set),Z.forEach((Zt,Ji)=>ge.add(Ji))}}),B.postStyleProps.forEach((Z,rt)=>{let ge=c.get(rt);ge||c.set(rt,ge=new Set),Z.forEach((Zt,Ji)=>ge.add(Ji))})});if(Oe.length){let v=[];Oe.forEach(_=>{v.push(Pa(_.triggerName,_.errors))}),mt.forEach(_=>_.destroy()),this.reportError(v)}let ie=new Map,oe=new Map;s.forEach(v=>{let _=v.element;t.has(_)&&(oe.set(_,_),this._beforeAnimationBuild(v.player.namespaceId,v.instruction,ie))}),n.forEach(v=>{let _=v.element;this._getPreviousPlayers(_,!1,v.namespaceId,v.triggerName,null).forEach(D=>{de(ie,_,[]).push(D),D.destroy()})});let tt=V.filter(v=>ja(v,l,c)),ut=new Map;Va(ut,this.driver,W,c,Me).forEach(v=>{ja(v,l,c)&&tt.push(v)});let it=new Map;E.forEach((v,_)=>{Va(it,this.driver,new Set(v),l,jt)}),tt.forEach(v=>{let _=ut.get(v),b=it.get(v);ut.set(v,new Map([..._?.entries()??[],...b?.entries()??[]]))});let Zi=[],rn=[],nn={};s.forEach(v=>{let{element:_,player:b,instruction:D}=v;if(t.has(_)){if(g.has(_)){b.onDestroy(()=>Pe(_,D.toStyles)),b.disabled=!0,b.overrideTotalTime(D.totalTime),n.push(b);return}let G=nn;if(oe.size>1){let ue=_,je=[];for(;ue=ue.parentNode;){let B=oe.get(ue);if(B){G=B;break}je.push(ue)}je.forEach(B=>oe.set(B,G))}let Te=this._buildAnimation(b.namespaceId,D,ie,o,it,ut);if(b.setRealPlayer(Te),G===nn)Zi.push(b);else{let ue=this.playersByElement.get(G);ue&&ue.length&&(b.parentPlayer=Be(ue)),n.push(b)}}else et(_,D.fromStyles),b.onDestroy(()=>Pe(_,D.toStyles)),rn.push(b),g.has(_)&&n.push(b)}),rn.forEach(v=>{let _=o.get(v.element);if(_&&_.length){let b=Be(_);v.setRealPlayer(b)}}),n.forEach(v=>{v.parentPlayer?v.syncPlayerEvents(v.parentPlayer):v.destroy()});for(let v=0;v<V.length;v++){let _=V[v],b=_[Ie];if(xt(_,xi),b&&b.hasAnimation)continue;let D=[];if(a.size){let Te=a.get(_);Te&&Te.length&&D.push(...Te);let ue=this.driver.query(_,Li,!0);for(let je=0;je<ue.length;je++){let B=a.get(ue[je]);B&&B.length&&D.push(...B)}}let G=D.filter(Te=>!Te.destroyed);G.length?Op(this,_,G):this.processLeaveNode(_)}return V.length=0,Zi.forEach(v=>{this.players.push(v),v.onDone(()=>{v.destroy();let _=this.players.indexOf(v);this.players.splice(_,1)}),v.play()}),Zi}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,t,n,o){let s=[];if(e){let a=this.playersByQueriedElement.get(i);a&&(s=a)}else{let a=this.playersByElement.get(i);if(a){let l=!o||o==Kt;a.forEach(c=>{c.queued||!l&&c.triggerName!=n||s.push(c)})}}return(t||n)&&(s=s.filter(a=>!(t&&t!=a.namespaceId||n&&n!=a.triggerName))),s}_beforeAnimationBuild(i,e,t){let n=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:i,a=e.isRemovalTransition?void 0:n;for(let l of e.timelines){let c=l.element,g=c!==o,h=de(t,c,[]);this._getPreviousPlayers(c,g,s,a,e.toState).forEach(E=>{let y=E.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),E.destroy(),h.push(E)})}et(o,e.fromStyles)}_buildAnimation(i,e,t,n,o,s){let a=e.triggerName,l=e.element,c=[],g=new Set,h=new Set,I=e.timelines.map(y=>{let w=y.element;g.add(w);let V=w[Ie];if(V&&V.removedBeforeQueried)return new st(y.duration,y.delay);let U=w!==l,W=Tp((t.get(w)||Cp).map(ie=>ie.getRealPlayer())).filter(ie=>{let oe=ie;return oe.element?oe.element===w:!1}),te=o.get(w),K=s.get(w),mt=Ir(this._normalizer,y.keyframes,te,K),Oe=this._buildPlayer(y,mt,W);if(y.subTimeline&&n&&h.add(w),U){let ie=new Xt(i,a,w);ie.setRealPlayer(Oe),c.push(ie)}return Oe});c.forEach(y=>{de(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>Ep(this.playersByQueriedElement,y.element,y))}),g.forEach(y=>ye(y,Nr));let E=Be(I);return E.onDestroy(()=>{g.forEach(y=>xt(y,Nr)),Pe(l,e.toStyles)}),h.forEach(y=>{de(n,y,[]).push(E)}),E}_buildPlayer(i,e,t){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,t):new st(i.duration,i.delay)}},Xt=class{namespaceId;triggerName;element;_player=new st;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(i,e,t){this.namespaceId=i,this.triggerName=e,this.element=t}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,t)=>{e.forEach(n=>Di(i,t,void 0,n))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){let e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){de(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){let e=this._player;e.triggerCallback&&e.triggerCallback(i)}};function Ep(r,i,e){let t=r.get(i);if(t){if(t.length){let n=t.indexOf(e);t.splice(n,1)}t.length==0&&r.delete(i)}return t}function Pp(r){return r??null}function ji(r){return r&&r.nodeType===1}function Ip(r){return r=="start"||r=="done"}function Fa(r,i){let e=r.style.display;return r.style.display=i??"none",e}function Va(r,i,e,t,n){let o=[];e.forEach(l=>o.push(Fa(l)));let s=[];t.forEach((l,c)=>{let g=new Map;l.forEach(h=>{let I=i.computeStyle(c,h,n);g.set(h,I),(!I||I.length==0)&&(c[Ie]=Mp,s.push(c))}),r.set(c,g)});let a=0;return e.forEach(l=>Fa(l,o[a++])),s}function Ba(r,i){let e=new Map;if(r.forEach(a=>e.set(a,[])),i.length==0)return e;let t=1,n=new Set(i),o=new Map;function s(a){if(!a)return t;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:n.has(c)?l=t:l=s(c),o.set(a,l),l}return i.forEach(a=>{let l=s(a);l!==t&&e.get(l).push(a)}),e}function ye(r,i){r.classList?.add(i)}function xt(r,i){r.classList?.remove(i)}function Op(r,i,e){Be(e).onDone(()=>r.processLeaveNode(i))}function Tp(r){let i=[];return qa(r,i),i}function qa(r,i){for(let e=0;e<r.length;e++){let t=r[e];t instanceof Si?qa(t.players,i):i.push(t)}}function Ap(r,i){let e=Object.keys(r),t=Object.keys(i);if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let o=e[n];if(!i.hasOwnProperty(o)||r[o]!==i[o])return!1}return!0}function ja(r,i,e){let t=e.get(r);if(!t)return!1;let n=i.get(r);return n?t.forEach(o=>n.add(o)):i.set(r,t),e.delete(r),!0}var Lt=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(i,e)=>{};constructor(i,e,t){this._driver=e,this._normalizer=t,this._transitionEngine=new Qr(i.body,e,t),this._timelineEngine=new qr(i.body,e,t),this._transitionEngine.onRemovalComplete=(n,o)=>this.onRemovalComplete(n,o)}registerTrigger(i,e,t,n,o){let s=i+"-"+n,a=this._triggerCache[s];if(!a){let l=[],c=[],g=Ha(this._driver,o,l,c);if(l.length)throw fa(n,l);a=fp(n,g,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,n,a)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,t,n){this._transitionEngine.insertNode(i,e,t,n)}onRemove(i,e,t){this._transitionEngine.removeNode(i,e,t)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,t,n){if(t.charAt(0)=="@"){let[o,s]=Or(t),a=n;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(i,e,t,n)}listen(i,e,t,n,o){if(t.charAt(0)=="@"){let[s,a]=Or(t);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(i,e,t,n,o)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(i){this._transitionEngine.afterFlushAnimationsDone(i)}};function Rp(r,i){let e=null,t=null;return Array.isArray(i)&&i.length?(e=Vr(i[0]),i.length>1&&(t=Vr(i[i.length-1]))):i instanceof Map&&(e=Vr(i)),e||t?new Dp(r,e,t):null}var Dp=(()=>{class r{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n;let o=r.initialStylesByElement.get(e);o||r.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Pe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pe(this._element,this._initialStyles),this._endStyles&&(Pe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(et(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(et(this._element,this._endStyles),this._endStyles=null),Pe(this._element,this._initialStyles),this._state=3)}}return r})();function Vr(r){let i=null;return r.forEach((e,t)=>{Np(t)&&(i=i||new Map,i.set(t,e))}),i}function Np(r){return r==="display"||r==="position"}var Ki=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(i,e,t,n){this.element=i,this.keyframes=e,this.options=t,this._specialStyles=n,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){let e=[];return i.forEach(t=>{e.push(Object.fromEntries(t))}),e}_triggerWebAnimation(i,e,t){return i.animate(this._convertKeyframesToObject(e),t)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,n)=>{n!=="offset"&&i.set(n,this._finished?t:Fi(this.element,n))}),this.currentSnapshot=i}triggerCallback(i){let e=i==="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},Qi=class{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}containsElement(i,e){return Tr(i,e)}getParentElement(i){return ki(i)}query(i,e,t){return Ar(i,e,t)}computeStyle(i,e,t){return Fi(i,e)}animate(i,e,t,n,o,s=[]){let a=n==0?"both":"forwards",l={duration:t,delay:n,fill:a};o&&(l.easing=o);let c=new Map,g=s.filter(E=>E instanceof Ki);Aa(t,n)&&g.forEach(E=>{E.currentSnapshot.forEach((y,w)=>c.set(w,y))});let h=Oa(e).map(E=>new Map(E));h=Ra(i,h,c);let I=Rp(i,h);return new Ki(i,h,l,I)}};var Ui="@",Ka="@.disabled",Yi=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(i,e,t,n){this.namespaceId=i,this.delegate=e,this.engine=t,this._onDestroy=n}get data(){return this.delegate.data}destroyNode(i){this.delegate.destroyNode?.(i)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,t,n=!0){this.delegate.insertBefore(i,e,t),this.engine.onInsert(this.namespaceId,e,i,n)}removeChild(i,e,t){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,t,n){this.delegate.setAttribute(i,e,t,n)}removeAttribute(i,e,t){this.delegate.removeAttribute(i,e,t)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,t,n){this.delegate.setStyle(i,e,t,n)}removeStyle(i,e,t){this.delegate.removeStyle(i,e,t)}setProperty(i,e,t){e.charAt(0)==Ui&&e==Ka?this.disableAnimations(i,!!t):this.delegate.setProperty(i,e,t)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,t,n){return this.delegate.listen(i,e,t,n)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}},Yr=class extends Yi{factory;constructor(i,e,t,n,o){super(e,t,n,o),this.factory=i,this.namespaceId=e}setProperty(i,e,t){e.charAt(0)==Ui?e.charAt(1)=="."&&e==Ka?(t=t===void 0?!0:!!t,this.disableAnimations(i,t)):this.engine.process(this.namespaceId,i,e.slice(1),t):this.delegate.setProperty(i,e,t)}listen(i,e,t,n){if(e.charAt(0)==Ui){let o=kp(i),s=e.slice(1),a="";return s.charAt(0)!=Ui&&([s,a]=xp(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,t,l)})}return this.delegate.listen(i,e,t,n)}};function kp(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}function xp(r){let i=r.indexOf("."),e=r.substring(0,i),t=r.slice(i+1);return[e,t]}var Xi=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(i,e,t){this.delegate=i,this.engine=e,this._zone=t,e.onRemovalComplete=(n,o)=>{o?.removeChild(null,n)}}createRenderer(i,e){let t="",n=this.delegate.createRenderer(i,e);if(!i||!e?.data?.animation){let c=this._rendererCache,g=c.get(n);if(!g){let h=()=>c.delete(n);g=new Yi(t,n,this.engine,h),c.set(n,g)}return g}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,i);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,i,c.name,c)};return e.data.animation.forEach(a),new Yr(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,e,t){if(i>=0&&i<this._microtaskId){this._zone.run(()=>e(t));return}let n=this._animationCallbacksBuffer;n.length==0&&queueMicrotask(()=>{this._zone.run(()=>{n.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),n.push([e,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(i){this.engine.flush(),this.delegate.componentReplaced?.(i)}};var zp=(()=>{class r extends Lt{constructor(e,t,n){super(e,t,n)}ngOnDestroy(){this.flush()}static \u0275fac=function(t){return new(t||r)(k(fe),k(pt),k(dt))};static \u0275prov=re({token:r,factory:r.\u0275fac})}return r})();function Fp(){return new Hi}function Vp(r,i,e){return new Xi(r,i,e)}var Ya=[{provide:dt,useFactory:Fp},{provide:Lt,useClass:zp},{provide:En,useFactory:Vp,deps:[Fn,Lt,We]}],Bp=[{provide:pt,useClass:Xr},{provide:tr,useValue:"NoopAnimations"},...Ya],Qa=[{provide:pt,useFactory:()=>new Qi},{provide:tr,useFactory:()=>"BrowserAnimations"},...Ya],Xa=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?Bp:Qa}}static \u0275fac=function(t){return new(t||r)};static \u0275mod=vt({type:r});static \u0275inj=gt({providers:Qa,imports:[oi]})}return r})();var Za=(()=>{class r{constructor(e){this.urlSerializer=e,this.handlers=new Map,this.cachedComponents=new Set([os.id,ns.id,ls.id,us.id,hs.id,ms.id,vs.id,ps.id,as.id,ds.id,ys.id,cs.id,gs.id,fs.id,Ms.id,Cs.id,Es.id,ss.id,_s.id,Ss.id,bs.id,rs.id,ws.id]),this.cacheTimeMs=3e5,this.isUserNavigatingBack=!1}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}retrieve(e){let t=this.getKey(e);return this.handlers.has(t)?(this.activeCachedComponentId=String(this.handlers.get(t).routeHandle.componentRef.componentType.id),this.handlers.get(t).routeHandle):null}isRouteCached(e){return this.handlers.has(e)}getActiveCachedComponentId(){return this.activeCachedComponentId}shouldAttach(e){let t=this.handlers.get(this.getKey(e));return!this.isUserNavigatingBack||!e.component?!1:t&&this.getCurrentTimestamp()-t.saveTimeStamp<this.cacheTimeMs}shouldDetach(e){this.activeCachedComponentId=null;let t=this.getComponentId(e.component);return this.cachedComponents.has(t)}store(e,t){for(;document.getElementsByTagName("mat-tooltip-component").length>0;)document.getElementsByTagName("mat-tooltip-component")[0].remove();if(document.getElementsByClassName("cdk-overlay-container").length>0)for(;document.getElementsByClassName("cdk-overlay-container")[0].children.length>0;)document.getElementsByClassName("cdk-overlay-container")[0].children[0].remove();let n=this.handlers.get(this.getKey(e));t&&(n&&n.routeHandle.componentRef!==t.componentRef&&n.routeHandle.componentRef.destroy(),this.handlers.set(this.getKey(e),{routeHandle:t,saveTimeStamp:this.getCurrentTimestamp()}))}setLastNavigationType(e){this.isUserNavigatingBack=e==="back"}getComponentId(e){return e.id}getKey(e){return this.urlSerializer.serialize(eo(e,["."]))}getCurrentTimestamp(){return+Date.now()}static{this.\u0275fac=function(t){return new(t||r)(k(Jn))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac})}}return r})();var Ja=new ft("perun-api-service");var Jr=(()=>{class r{constructor(e,t,n,o,s){this.http=e,this.storeService=t,this.authzSevice=n,this.titleService=o,this.utilsService=s}initializeColors(e,t){return new Promise(n=>{t.forEach(o=>{let s=this.storeService.getProperty("theme")[o.configValue];document.documentElement.style.setProperty(o.cssVariable,s)}),e.forEach(o=>{let s=this.storeService.getProperty("theme")[o.configValue],a=tinycolor.mostReadable(s,["#ffffff","#000000"]).toHexString();document.documentElement.style.setProperty(o.cssVariable,s),document.documentElement.style.setProperty(o.cssTextVariable,a),this.setEntityTheme(o.entity,s)}),n()})}setEntityTheme(e,t){let n=this.computeColors(t);for(let o of n){let s=`--${e}-theme-primary-${o.name}`,a=`${o.red},${o.green},${o.blue}`,l=`--${e}-theme-primary-contrast-${o.name}`,c=o.darkContrast?"30,30,30":"255,255,255";document.documentElement.style.setProperty(s,a),document.documentElement.style.setProperty(l,c)}}loadAppDefaultConfig(){return new Promise(e=>{this.http.get("/assets/config/defaultConfig.json",{headers:this.getNoCacheHeaders()}).subscribe(t=>{this.storeService.setDefaultConfig(t),e()})})}loadAppInstanceConfig(){return new Promise(e=>{this.http.get("/assets/config/instanceConfig.json",{headers:this.getNoCacheHeaders()}).subscribe({next:t=>{this.storeService.mergeConfig(t);let n=document.location.hostname;t?.brandings?.[n]&&this.storeService.mergeConfig(t?.brandings?.[n]),e()},error:()=>{e()}})})}getNoCacheHeaders(){return new si({CacheControl:"no-cache, no-store, must-revalidate, post-check=0, pre-check=0",Pragma:"no-cache",Expires:"0"})}setInstanceFavicon(){return new Promise(e=>{let t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",this.storeService.getProperty("instance_favicon")?t.href="./assets/config/instanceFavicon.ico":t.href="./assets/img/perun.ico",document.getElementsByTagName("head")[0].appendChild(t),e()})}setApiUrl(){return new Promise(e=>{let t=this.storeService.getProperty("api_url");(location.pathname==="/service-access"||sessionStorage.getItem("baPrincipal")||this.storeService.getProperty("auto_service_access_redirect"))&&(t=t.replace("oauth","ba")),this.authzSevice.configuration.basePath=t,this.titleService.setTitle(this.storeService.getProperty("document_title").en),e()})}loadAppsConfig(){return new Promise((e,t)=>{this.utilsService.getAppsConfig().subscribe(n=>{this.storeService.setAppsConfig(n),e()},n=>t(n))})}computeColors(e){return[this.getColorObject(tinycolor(e).lighten(52),"50"),this.getColorObject(tinycolor(e).lighten(37),"100"),this.getColorObject(tinycolor(e).lighten(26),"200"),this.getColorObject(tinycolor(e).lighten(12),"300"),this.getColorObject(tinycolor(e).lighten(6),"400"),this.getColorObject(tinycolor(e),"500"),this.getColorObject(tinycolor(e).darken(6),"600"),this.getColorObject(tinycolor(e).darken(12),"700"),this.getColorObject(tinycolor(e).darken(18),"800"),this.getColorObject(tinycolor(e).darken(24),"900"),this.getColorObject(tinycolor(e).lighten(50).saturate(30),"A100"),this.getColorObject(tinycolor(e).lighten(30).saturate(30),"A200"),this.getColorObject(tinycolor(e).lighten(10).saturate(15),"A400"),this.getColorObject(tinycolor(e).lighten(5).saturate(5),"A700")]}getColorObject(e,t){let n=tinycolor(e),o=n.toRgb();return{name:t,hex:n.toHexString(),darkContrast:n.isLight(),red:o.r,green:o.g,blue:o.b}}static{this.\u0275fac=function(t){return new(t||r)(k(bt),k(pe),k(Xe),k(Un),k(wo))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var en=(()=>{class r{constructor(e,t,n,o,s,a,l){this.initAuthService=e,this.appConfigService=t,this.authzSevice=n,this.dialog=o,this.location=s,this.guiAuthResolver=a,this.mfaHandlerService=l,this.entityColorConfigs=[{entity:"vo",configValue:"vo_color",cssVariable:"--vo-color",cssTextVariable:"--vo-color-text"},{entity:"group",configValue:"group_color",cssVariable:"--group-color",cssTextVariable:"--group-color-text"},{entity:"user",configValue:"user_color",cssVariable:"--user-color",cssTextVariable:"--user-color-text"},{entity:"member",configValue:"member_color",cssVariable:"--member-color",cssTextVariable:"--member-color-text"},{entity:"facility",configValue:"facility_color",cssVariable:"--facility-color",cssTextVariable:"--facility-color-text"},{entity:"resource",configValue:"resource_color",cssVariable:"--resource-color",cssTextVariable:"--resource-color-text"},{entity:"admin",configValue:"admin_color",cssVariable:"--admin-color",cssTextVariable:"--admin-color-text"},{entity:"service",configValue:"service_color",cssVariable:"--service-color",cssTextVariable:"--service-color-text"}],this.colorConfigs=[{configValue:"sidemenu_hover_color",cssVariable:"--sidemenu-hover-color"},{configValue:"sidemenu_active_color",cssVariable:"--sidemenu-active-color"},{configValue:"sidemenu_submenu_active_color",cssVariable:"--sidemenu-submenu-active-color"},{configValue:"sidemenu_submenu_hover_color",cssVariable:"--sidemenu-submenu-hover-color"},{configValue:"sidemenu_hover_text_color",cssVariable:"--sidemenu-hover-text-color"},{configValue:"sidemenu_active_text_color",cssVariable:"--sidmenu-active-text-color"},{configValue:"sidemenu_submenu_active_text_color",cssVariable:"--sidemenu-submenu-active-text-color"},{configValue:"sidemenu_submenu_hover_text_color",cssVariable:"--sidemenu-submenu-hover-text-color"}]}initialize(){return this.appConfigService.loadAppDefaultConfig().then(()=>this.appConfigService.loadAppInstanceConfig()).then(()=>this.appConfigService.setApiUrl()).then(()=>this.appConfigService.initializeColors(this.entityColorConfigs,this.colorConfigs)).then(()=>this.appConfigService.setInstanceFavicon()).then(()=>this.initAuthService.verifyAuth()).catch(e=>{if(e==="Invalid path")this.handleErr(e);else throw this.mfaHandlerService.catchNoMfaTokenError(e?.params?.error),console.error(e),this.location.go("/"),location.reload(),e}).then(e=>e?(this.mfaHandlerService.closeMfaWindow(),this.initAuthService.loadPrincipal().catch(t=>this.handleErr(t)).then(()=>this.loadPolicies()).then(()=>this.appConfigService.loadAppsConfig()).then(()=>this.guiAuthResolver.loadRolesManagementRules()).then(()=>this.initAuthService.checkRouteGuard())):this.initAuthService.handleAuthStart())}handleErr(e){let t=Ot();throw e==="Invalid path"?(t.data={title:"GENERAL.PROXY_OVERLOAD_PREVENTION.TITLE",message:"GENERAL.PROXY_OVERLOAD_PREVENTION.MESSAGE",action:"GENERAL.PROXY_OVERLOAD_PREVENTION.ACTION"},this.dialog.open(Lo,t)):e.status!==401&&(t.data={title:"GENERAL.PRINCIPAL_ERROR.TITLE",message:e.status===0?"GENERAL.PRINCIPAL_ERROR.MESSAGE":e.message,action:"GENERAL.PRINCIPAL_ERROR.ACTION"},this.dialog.open(xo,t)),console.error(e),new Error(e)}loadPolicies(){return pn(this.authzSevice.getAllPolicies()).then(e=>this.guiAuthResolver.setPerunPolicies(e))}static{this.\u0275fac=function(t){return new(t||r)(k(At),k(Jr),k(Xe),k(It),k(xn),k(ke),k(Fo))}}static{this.\u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var el={production:!0};var Up={provide:Bn,useExisting:_n(()=>hr),multi:!0};function Hp(r){return new Ri(r,"./assets/i18n/",".json")}function Wp(r){let i={basePath:r.getProperty("api_url"),withCredentials:!ko()};return new mr(i)}var Gp=r=>()=>r.initialize(),$p=(r,i)=>()=>(i.setDefaultLang("en"),i.use("en"),r.registerPerunRefreshIcon(),Promise.resolve());el.production&&void 0;Vn(Ii,{providers:[bn(Xa,oi,jn,q,zo,j.forRoot({loader:{provide:Zn,useFactory:Hp,deps:[bt]}}),Mo,Rt,$s,js,Do.forRoot()),oo(Js),en,{provide:rr,useFactory:Gp,multi:!0,deps:[en]},{provide:rr,useFactory:$p,multi:!0,deps:[ur,Mt]},{provide:mr,useFactory:Wp,deps:[pe]},{provide:no,useClass:Za},ur,{provide:Ja,useClass:jo},hr,Up,{provide:Ro,useFactory:()=>localStorage},{provide:wr,useValue:{autoWidthDisabled:!1,visibility:"hover"}}]}).catch(r=>console.error(r));export{Up as API_INTERCEPTOR_PROVIDER,Wp as apiConfigFactory,Hp as httpLoaderFactory};
