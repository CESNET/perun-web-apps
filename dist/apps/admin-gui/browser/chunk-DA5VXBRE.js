import{a as zi,b as $i,c as Xi,d as Ki}from"./chunk-NTE67PVQ.js";import{a as Si,b as yi,c as bi,d as Ti,e as Ai,f as Ei,g as Fi,h as xi,i as Di,j as wi,k as Li,l as Mi}from"./chunk-JAKIHJ5D.js";import{a as Wi}from"./chunk-NLKFGJH6.js";import"./chunk-B2UJ4L5D.js";import{k as Hi}from"./chunk-PZMYCRNF.js";import"./chunk-KQEWADPE.js";import{a as Be}from"./chunk-TILXPZVT.js";import{$b as w,$h as gi,$j as Pi,Aa as u,Ba as b,Ca as g,Cc as N,Da as oe,Db as D,Dc as bt,E as it,Ea as ct,Eh as Oe,F as Te,Ga as pt,Gb as vt,Gg as ri,H as nt,Hh as di,Hj as Pe,Ib as xe,If as Zt,Ii as Ci,Ij as Oi,Ja as q,Jf as H,Jj as Ni,K as T,Ka as Ke,Kb as ie,L as Ae,Lb as Re,Lc as Tt,Lf as ei,Lg as si,Lj as je,Mc as Qe,Me as we,Mf as ti,Na as p,Nc as At,Ne as Kt,Nf as ii,Nj as ki,O as S,Oa as m,Of as ni,Oj as Vi,P as C,Ph as ui,Qh as fi,Ra as U,Rc as se,Re as J,Sd as Pt,Sj as Bi,T as Ee,Td as jt,Th as hi,Ub as re,Uc as Et,Ud as Gt,Vb as E,Wa as mt,Xa as dt,Xb as It,Y as r,Ya as F,Ye as x,Yh as _i,Z as d,Za as ut,Zb as St,Ze as Le,_ as at,_a as ft,_b as Ct,_j as Ge,aa as Fe,ad as Ft,ae as De,ak as ji,ca as ot,cb as ht,cf as qt,d as G,da as v,de as Ut,di as vi,dj as Ri,ee as Yt,ef as Y,ek as Gi,fd as xt,fe as Ht,fh as li,fi as Ii,fk as Ui,ga as c,gc as j,gd as Rt,ge as Wt,gi as Ne,ha as O,hf as Qt,hh as ee,i as Ie,ia as ce,id as Dt,if as Jt,jd as wt,jk as Yi,ka as l,la as s,lc as yt,ld as Lt,ma as I,od as Mt,of as Z,oh as ci,pa as y,pe as Je,ph as Me,qa as _,qb as me,qd as le,ra as f,sd as Ot,tb as de,tc as ue,th as pi,ua as pe,ub as _t,uc as fe,ud as ve,ue as zt,vc as B,ve as $t,vh as mi,wa as rt,wb as qe,wc as he,wd as Nt,x as Se,xa as st,xc as _e,xd as kt,xe as L,xi as ke,ya as lt,yb as gt,yc as ge,yd as Vt,ye as Xt,yg as ai,z as tt,za as R,zd as Bt,zg as oi,zh as W,zi as Ve}from"./chunk-5CH43A5R.js";import"./chunk-2YRG3NBG.js";function _n(i,a){i&1&&I(0,"mat-spinner",3)}function gn(i,a){if(i&1){let n=y();l(0,"button",12),_("click",function(){S(n);let t=f(2);return C(t.editFacility())}),p(1,"translate"),l(2,"mat-icon"),u(3,"edit"),s()()}i&2&&pe("matTooltip",m(1,1,"FACILITY_DETAIL.EDIT"))}function vn(i,a){if(i&1){let n=y();l(0,"button",12),_("click",function(){S(n);let t=f(2);return C(t.deleteFacility())}),p(1,"translate"),l(2,"mat-icon"),u(3,"delete_forever"),s()()}i&2&&pe("matTooltip",m(1,1,"FACILITY_DETAIL.DELETE"))}var In=()=>({color:"black"}),qi=i=>["/facilities",i];function Sn(i,a){if(i&1&&(l(0,"div")(1,"div",4),I(2,"mat-icon",5),p(3,"translate"),l(4,"div",6)(5,"div",7)(6,"a",8),_("auxclick",function(e){return e.preventDefault()}),u(7),s(),l(8,"span",9),u(9),s(),v(10,gn,4,3,"button",10)(11,vn,4,3,"button",10),s(),l(12,"div"),u(13),p(14,"translate"),s(),l(15,"span",11),u(16),p(17,"translate"),p(18,"translate"),s()()(),I(19,"app-animated-router-outlet"),s()),i&2){let n=f();r(2),pe("matTooltip",m(3,13,"FACILITY_DETAIL.ENTITY")),c("ngStyle",q(21,In)),r(4),c("perunWebAppsMiddleClickRouterLink",Ke(22,qi,n.facility.id.toString()))("routerLink",Ke(24,qi,n.facility.id)),r(),b(n.facility.name),r(2),g(" \xA0#",n.facility.id," "),r(),c("ngIf",n.editFacilityAuth),r(),c("ngIf",n.deleteAuth),r(2),oe("",m(14,15,"FACILITY_DETAIL.UUID"),": ",n.facility.uuid,""),r(3),ct(" ",m(17,17,"FACILITY_DETAIL.ENTITY"),", ",m(18,19,"FACILITY_DETAIL.DESCRIPTION"),": ",n.facility.description," ")}}var Ji=(()=>{let a=class a extends Si(){constructor(e,t,o,h,A,k,P,V,K){super(),this.dialog=e,this.facilityManager=t,this.route=o,this.sideMenuService=h,this.sideMenuItemService=A,this.guiAuthResolver=k,this.router=P,this.entityStorageService=V,this.reloadEntityDetail=K,this.editFacilityAuth=!1,this.deleteAuth=!1,this.loading=!1}ngOnInit(){this.reloadData(),this.reloadEntityDetail.entityDetailChange.pipe(tt(this.destroyed$)).subscribe(()=>{this.reloadData()})}reloadData(){this.loading=!0,this.route.params.subscribe(e=>{let t=Number(e.facilityId);this.facilityManager.getFacilityById(t).subscribe({next:o=>{this.facility=o,this.entityStorageService.setEntityAndPathParam({id:o.id,beanName:o.beanName},St.Facility),this.setMenuItems(),this.editFacilityAuth=this.guiAuthResolver.isAuthorized("updateFacility_Facility_policy",[this.facility]),this.deleteAuth=this.guiAuthResolver.isAuthorized("deleteFacility_Facility_Boolean_policy",[this.facility]),zt("facilities",this.facility),$t(this.facility),this.loading=!1},error:()=>this.loading=!1})})}setMenuItems(){let e=this.sideMenuItemService.parseFacility(this.facility);this.sideMenuService.setFacilityMenuItems([e])}editFacility(){let e=L();e.width="450px",e.data={theme:"facility-theme",facility:this.facility,dialogType:Qt.FACILITY},this.dialog.open(Jt,e).afterClosed().subscribe(o=>{o&&this.facilityManager.getFacilityById(this.facility.id).subscribe(h=>{this.facility=h,this.setMenuItems()})})}deleteFacility(){let e=L();e.width="500px",e.data={theme:"facility-theme",facility:this.facility},this.dialog.open(Bi,e).afterClosed().subscribe(o=>{o&&this.router.navigate([""],{queryParamsHandling:"preserve"})})}};a.\u0275fac=function(t){return new(t||a)(d(B),d(D),d(me),d(qt),d(vi),d(w),d(de),d(x),d(Ii))},a.\u0275cmp=T({type:a,selectors:[["app-facility-detail-page"]],features:[ot],decls:4,vars:2,consts:[[1,"container-fluid","ps-xl-5","pe-xl-5","facility-theme"],["class","me-auto ms-auto",4,"ngIf"],[4,"ngIf"],[1,"me-auto","ms-auto"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-facility-black",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"facility-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[1,"text-muted"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],[1,"mt-1","entity-info"],["mat-icon-button","",3,"matTooltip","click"]],template:function(t,o){t&1&&(l(0,"div",0),I(1,"perun-web-apps-back-button"),v(2,_n,1,0,"mat-spinner",1)(3,Sn,20,26,"div",2),s()),t&2&&(r(2),c("ngIf",o.loading),r(),c("ngIf",!o.loading&&o.facility!==void 0))},dependencies:[F,ut,_t,le,bt,ve,De,Ne,li,ti,ii,E],data:{animation:[Oe]}});let i=a;return i})();function yn(i,a){i&1&&I(0,"mat-spinner",2)}function bn(i,a){if(i&1&&(l(0,"div"),I(1,"perun-web-apps-menu-buttons-field",3)(2,"perun-web-apps-expandable-tiles",4),s()),i&2){let n=f();r(),c("items",n.items),r(),c("items",n.settingItems)("title","MENU_ITEMS.FACILITY.SETTINGS")("sectionId","settings")}}var Zi=(()=>{let a=class a{constructor(e,t,o,h){this.facilityManager=e,this.authResolver=t,this.entityStorageService=o,this.routePolicyService=h,this.items=[],this.settingItems=[],this.loading=!1}ngOnInit(){this.loading=!0,this.facility=this.entityStorageService.getEntity(),this.setItems(),this.setSettingsItems(),this.loading=!1}setItems(){this.items=[],this.routePolicyService.canNavigate("facilities-resources",this.facility)&&this.items.push({cssIcon:"perun-manage-facility",url:`/facilities/${this.facility.id}/resources`,label:"MENU_ITEMS.FACILITY.RESOURCES",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-allowed-users",this.facility)&&this.items.push({cssIcon:"perun-user",url:`/facilities/${this.facility.id}/allowed-users`,label:"MENU_ITEMS.FACILITY.ALLOWED_USERS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-allowed-groups",this.facility)&&this.items.push({cssIcon:"perun-group",url:`/facilities/${this.facility.id}/allowed-groups`,label:"MENU_ITEMS.FACILITY.ALLOWED_GROUPS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-services-status",this.facility)&&this.items.push({cssIcon:"perun-service-status",url:`/facilities/${this.facility.id}/services-status`,label:"MENU_ITEMS.FACILITY.SERVICES_STATUS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-services-destinations",this.facility)&&this.items.push({cssIcon:"perun-service_destination",url:`/facilities/${this.facility.id}/services-destinations`,label:"MENU_ITEMS.FACILITY.SERVICES_DESTINATIONS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-hosts",this.facility)&&this.items.push({cssIcon:"perun-hosts",url:`/facilities/${this.facility.id}/hosts`,label:"MENU_ITEMS.FACILITY.HOSTS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-attributes",this.facility)&&this.items.push({cssIcon:"perun-attributes",url:`/facilities/${this.facility.id}/attributes`,label:"MENU_ITEMS.FACILITY.ATTRIBUTES",style:"facility-btn"})}setSettingsItems(){this.settingItems=[],this.routePolicyService.canNavigate("facilities-settings-managers",this.facility)&&this.settingItems.push({cssIcon:"perun-manager",url:`/facilities/${this.facility.id}/settings/managers`,label:"MENU_ITEMS.FACILITY.MANAGERS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-settings-bans",this.facility)&&this.settingItems.push({cssIcon:"perun-ban",url:`/facilities/${this.facility.id}/settings/bans`,label:"MENU_ITEMS.FACILITY.BANS",style:"facility-btn"})}};a.\u0275fac=function(t){return new(t||a)(d(D),d(w),d(x),d(Le))},a.\u0275cmp=T({type:a,selectors:[["app-facility-overview"]],hostVars:2,hostBindings:function(t,o){t&2&&O("router-component",o.true)},decls:2,vars:2,consts:[["class","me-auto ms-auto",4,"ngIf"],[4,"ngIf"],[1,"me-auto","ms-auto"],[3,"items"],[3,"items","title","sectionId"]],template:function(t,o){t&1&&v(0,yn,1,0,"mat-spinner",0)(1,bn,3,4,"div",1),t&2&&(c("ngIf",o.loading),r(),c("ngIf",!o.loading))},dependencies:[F,ve,Me,_i]});let i=a;return i})();var en=(()=>{let a=class a{};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=T({type:a,selectors:[["app-facility-settings"]],hostVars:2,hostBindings:function(t,o){t&2&&O("router-component",o.true)},decls:1,vars:0,template:function(t,o){t&1&&I(0,"app-animated-router-outlet")},dependencies:[Ne],data:{animation:[Oe]}});let i=a;return i})();function Tn(i,a){i&1&&I(0,"mat-spinner",2)}function An(i,a){if(i&1&&(l(0,"div"),I(1,"perun-web-apps-menu-buttons-field",3),s()),i&2){let n=f();r(),c("items",n.items)}}var tn=(()=>{let a=class a{constructor(e,t,o,h){this.facilityManager=e,this.authResolver=t,this.entityStorageService=o,this.routePolicyService=h,this.items=[],this.loading=!1}ngOnInit(){this.loading=!0,this.facility=this.entityStorageService.getEntity(),this.initItems(),this.loading=!1}initItems(){this.items=[],this.routePolicyService.canNavigate("facilities-settings-managers",this.facility)&&this.items.push({cssIcon:"perun-manager",url:`/facilities/${this.facility.id}/settings/managers`,label:"MENU_ITEMS.FACILITY.MANAGERS",style:"facility-btn"}),this.routePolicyService.canNavigate("facilities-settings-bans",this.facility)&&this.items.push({cssIcon:"perun-ban",url:`/facilities/${this.facility.id}/settings/bans`,label:"MENU_ITEMS.FACILITY.BANS",style:"facility-btn"})}};a.\u0275fac=function(t){return new(t||a)(d(D),d(w),d(x),d(Le))},a.\u0275cmp=T({type:a,selectors:[["app-facility-settings-overview"]],hostVars:2,hostBindings:function(t,o){t&2&&O("router-component",o.true)},decls:2,vars:2,consts:[["class","me-auto ms-auto",4,"ngIf"],[4,"ngIf"],[1,"me-auto","ms-auto"],[3,"items"]],template:function(t,o){t&1&&v(0,Tn,1,0,"mat-spinner",0)(1,An,2,1,"div",1),t&2&&(c("ngIf",o.loading),r(),c("ngIf",!o.loading))},dependencies:[F,ve,Me]});let i=a;return i})();function Fn(i,a){i&1&&(u(0),p(1,"translate")),i&2&&g(" ",m(1,1,"FACILITY_DETAIL.ENTITY")," ")}function xn(i,a){if(i&1&&I(0,"app-one-entity-attribute-page",5),i&2){let n=f();c("entityId",n.facility.id)("entity","facility")}}function Rn(i,a){i&1&&(u(0),p(1,"translate"),p(2,"translate")),i&2&&oe(" ",m(1,2,"FACILITY_DETAIL.ENTITY")," - ",m(2,4,"ADMIN_USER.ENTITY")," ")}function Dn(i,a){if(i&1&&I(0,"app-two-entity-attribute-page",6),i&2){let n=f(2);c("firstEntity","facility")("firstEntityId",n.facility.id)("secondEntity","user")}}function wn(i,a){i&1&&(l(0,"mat-tab"),v(1,Rn,3,6,"ng-template",2)(2,Dn,1,3,"ng-template",3),s())}var nn=(()=>{let a=class a{constructor(e,t){this.authResolver=e,this.entityStorageService=t}ngOnInit(){this.facility=this.entityStorageService.getEntity(),this.facilityUserAttAuth=this.authResolver.isAuthorized("getAssignedUsers_Facility_policy",[this.facility])}};a.\u0275fac=function(t){return new(t||a)(d(w),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-facility-attributes"]],hostVars:2,hostBindings:function(t,o){t&2&&O("router-component",o.true)},decls:9,vars:4,consts:[[1,"page-subtitle"],["mat-stretch-tabs","false"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(t,o){t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),l(4,"mat-tab-group",1)(5,"mat-tab"),v(6,Fn,2,3,"ng-template",2)(7,xn,1,2,"ng-template",3),s(),v(8,wn,3,0,"mat-tab",4),s()()),t&2&&(r(2),b(m(3,2,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),r(6),c("ngIf",o.facilityUserAttAuth))},dependencies:[F,Ut,Yt,Ht,Wt,Ci,ke,E]});let i=a;return i})();function Mn(i,a){if(i&1){let n=y();l(0,"mat-option",10),_("onSelectionChange",function(){let o=S(n).$implicit,h=f(3);return C(h.onSelectedService(o))}),u(1),s()}if(i&2){let n=a.$implicit;c("value",n),r(),g(" ",n.name," ")}}function On(i,a){if(i&1){let n=y();l(0,"mat-form-field",6)(1,"mat-label"),u(2),p(3,"translate"),s(),l(4,"input",7),_("keyup",function(t){S(n);let o=f(2);return C(o.updatedSerVal(t))}),s(),l(5,"mat-autocomplete",8,9)(7,"mat-option",10),_("onSelectionChange",function(){S(n);let t=f(2);return C(t.onSelectedService("NOT_SELECTED"))}),u(8),p(9,"translate"),s(),l(10,"mat-option",10),_("onSelectionChange",function(){S(n);let t=f(2);return C(t.onSelectedService("ALL"))}),u(11),p(12,"translate"),s(),v(13,Mn,2,2,"mat-option",11),p(14,"async"),s()()}if(i&2){let n=R(6),e=f(2);r(2),b(m(3,9,"FACILITY_DETAIL.SERVICE_CONFIG.SERVICE_SELECT")),r(2),c("formControl",e.serviceField)("matAutocomplete",n),r(),c("displayWith",e.serviceDisplayFn.bind(e)),r(2),c("value","NOT_SELECTED"),r(),g(" ",m(9,11,"FACILITY_DETAIL.SERVICE_CONFIG.NOT_SELECTED")," "),r(2),c("value","ALL"),r(),g(" ",m(12,13,"FACILITY_DETAIL.SERVICE_CONFIG.ALL")," "),r(2),c("ngForOf",m(14,15,e.filteredServices))}}function Nn(i,a){if(i&1){let n=y();l(0,"mat-option",10),_("onSelectionChange",function(){let o=S(n).$implicit,h=f(3);return C(h.onSelectedResource(o))}),u(1),s()}if(i&2){let n=a.$implicit;c("value",n),r(),g(" ",n.name," ")}}function kn(i,a){if(i&1){let n=y();l(0,"mat-form-field",6)(1,"mat-label"),u(2),p(3,"translate"),s(),l(4,"input",7),_("keyup",function(t){S(n);let o=f(2);return C(o.updatedResVal(t))}),s(),l(5,"mat-autocomplete",8,9),v(7,Nn,2,2,"mat-option",11),p(8,"async"),s()()}if(i&2){let n=R(6),e=f(2);r(2),b(m(3,5,"FACILITY_DETAIL.SERVICE_CONFIG.RES_SELECT")),r(2),c("formControl",e.resourceField)("matAutocomplete",n),r(),c("displayWith",e.resourceDisplayFn.bind(e)),r(2),c("ngForOf",m(8,7,e.filteredResources))}}function Vn(i,a){if(i&1){let n=y();l(0,"mat-option",10),_("onSelectionChange",function(){let o=S(n).$implicit,h=f(3);return C(h.onSelectedGroup(o))}),u(1),s()}if(i&2){let n=a.$implicit;c("value",n),r(),g(" ",n.name," ")}}function Bn(i,a){if(i&1){let n=y();l(0,"mat-form-field",6)(1,"mat-label"),u(2),p(3,"translate"),s(),l(4,"input",7),_("keyup",function(t){S(n);let o=f(2);return C(o.updatedGroupVal(t))}),s(),l(5,"mat-autocomplete",12,9),v(7,Vn,2,2,"mat-option",11),p(8,"async"),s()()}if(i&2){let n=R(6),e=f(2);r(2),b(m(3,5,"FACILITY_DETAIL.SERVICE_CONFIG.GROUP_SELECT")),r(2),c("formControl",e.groupField)("matAutocomplete",n),r(),c("displayWith",e.groupDisplayFn.bind(e)),r(2),c("ngForOf",m(8,7,e.filteredGroups))}}function Pn(i,a){if(i&1){let n=y();l(0,"mat-option",10),_("onSelectionChange",function(){let o=S(n).$implicit,h=f(3);return C(h.onSelectedMember(o))}),u(1),p(2,"userFullName"),s()}if(i&2){let n=a.$implicit;c("value",n),r(),g(" ",m(2,2,n.user)," ")}}function jn(i,a){if(i&1&&(l(0,"mat-form-field",6)(1,"mat-label"),u(2),p(3,"translate"),s(),I(4,"input",13),l(5,"mat-autocomplete",8,9),v(7,Pn,3,4,"mat-option",11),p(8,"async"),s()()),i&2){let n=R(6),e=f(2);r(2),b(m(3,5,"FACILITY_DETAIL.SERVICE_CONFIG.MEMBER_SELECT")),r(2),c("matAutocomplete",n)("formControl",e.memberField),r(),c("displayWith",e.memberDisplayFn.bind(e)),r(2),c("ngForOf",m(8,7,e.filteredMembers))}}function Gn(i,a){if(i&1){let n=y();l(0,"div",3),v(1,On,15,17,"mat-form-field",4),l(2,"mat-checkbox",5),_("change",function(t){S(n);let o=f();return C(o.onOfferAllServices(t))}),u(3),p(4,"translate"),s(),v(5,kn,9,9,"mat-form-field",4)(6,Bn,9,9,"mat-form-field",4)(7,jn,9,9,"mat-form-field",4),s()}if(i&2){let n=f();r(),c("ngIf",n.services!==void 0),r(2),g(" ",m(4,5,"FACILITY_DETAIL.SERVICE_CONFIG.ALL_SERVICES")," "),r(2),c("ngIf",n.resources!==void 0&&n.resources.length!==0),r(),c("ngIf",n.selectedResource!==void 0&&n.groups!==void 0&&n.groups.length!==0),r(),c("ngIf",n.selectedGroup!==void 0&&n.members!==void 0&&n.members.length!==0)}}function Un(i,a){if(i&1&&I(0,"perun-web-apps-service-configurator",14),i&2){let n=f();c("facility",n.facility)("resource",n.selectedResource)("group",n.selectedGroup)("member",n.selectedMember)("service",n.selectedService)}}var an=(()=>{let a=class a{constructor(e,t,o,h,A,k,P){this.facilityManager=e,this.resourceManager=t,this.serviceManager=o,this.membersManager=h,this.namePipe=A,this.translate=k,this.entityStorageService=P,this.serviceField=new se,this.resourceField=new se,this.groupField=new se,this.memberField=new se,this.allowedStatuses=["INVALID","VALID"],this.selectedService="NOT_SELECTED",this.attrNames=[],this.translate.get("FACILITY_DETAIL.SERVICE_CONFIG.ALL").subscribe(V=>this.serviceAllTranslation=V),this.translate.get("FACILITY_DETAIL.SERVICE_CONFIG.NOT_SELECTED").subscribe(V=>this.serviceNotSelectedTranslation=V)}ngOnInit(){this.facility=this.entityStorageService.getEntity(),this.facilityManager.getFacilityById(this.facility.id).subscribe(e=>{this.facility=e,this.facilityManager.getAssignedResourcesForFacility(e.id).subscribe(t=>this.resources=t),this.serviceManager.getAssignedServices(e.id).subscribe(t=>this.services=t)}),this.filteredServices=this.serviceField.valueChanges.pipe(Se(""),Ie(e=>this._filterServices(e))),this.filteredResources=this.resourceField.valueChanges.pipe(Se(""),Ie(e=>this._filterResources(e))),this.filteredGroups=this.groupField.valueChanges.pipe(Se(""),Ie(e=>this._filterGroups(e))),this.filteredMembers=this.memberField.valueChanges.pipe(Se(""),Ie(e=>this._filterMembers(e)))}onSelectedService(e){this.selectedService=e}onSelectedResource(e){this.selectedResource=e,this.selectedResource!==void 0?(this.resourceManager.getAssignedGroups(this.selectedResource.id).subscribe(t=>this.groups=t),this.selectedGroup=void 0,this.selectedMember=void 0):this.groups=void 0}onOfferAllServices(e){e.checked||this.serviceManager.getAssignedServices(this.facility.id).subscribe(t=>this.services=t)}onSelectedGroup(e){this.selectedGroup=e,this.selectedGroup!==void 0?(this.membersManager.getCompleteRichMembersForGroup(this.selectedGroup.id,!1,this.allowedStatuses,[],this.attrNames).subscribe(t=>this.members=t),this.selectedMember=void 0):this.members=void 0}onSelectedMember(e){this.selectedMember=e}serviceDisplayFn(e){if(e!==null)return e==="ALL"?this.serviceAllTranslation:e==="NOT_SELECTED"?this.serviceNotSelectedTranslation:typeof e!="string"?e.name:e}resourceDisplayFn(e){if(e!==null)return e.name}groupDisplayFn(e){if(e!==null)return e.name}memberDisplayFn(e){if(e!==null)return this.namePipe.transform(e.user)}updatedSerVal(e){e.target.value===""&&(this.selectedService="NOT_SELECTED")}updatedResVal(e){e.target.value===""&&(this.groups=void 0,this.members=void 0)}updatedGroupVal(e){e.target.value===""&&(this.members=void 0)}_filterServices(e){let t=e.toString().toLowerCase();return this.services.filter(o=>o.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t))}_filterResources(e){let t=e.toString().toLowerCase();return this.resources.filter(o=>o.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t))}_filterGroups(e){let t=e.toString().toLowerCase();return this.groups.filter(o=>o.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t))}_filterMembers(e){let t=e.toString().toLowerCase();return this.members.filter(o=>this.namePipe.transform(o.user).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t))}};a.\u0275fac=function(t){return new(t||a)(d(D),d(xe),d(ie),d(vt),d(Z),d(re),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-facility-service-config"]],decls:6,vars:5,consts:[[1,"page-subtitle"],["class","col-12 col-lg-6 mb-2",4,"ngIf"],[3,"facility","resource","group","member","service",4,"ngIf"],[1,"col-12","col-lg-6","mb-2"],["class","w-100",4,"ngIf"],[3,"change"],[1,"w-100"],["matInput","","type","text",3,"formControl","matAutocomplete","keyup"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value","onSelectionChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["autoActiveFirstOption","",3,"displayWith","ngClass"],["matInput","","type","text",3,"matAutocomplete","formControl"],[3,"facility","resource","group","member","service"]],template:function(t,o){t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),v(4,Gn,8,7,"div",1)(5,Un,1,5,"perun-web-apps-service-configurator",2),s()),t&2&&(r(2),b(m(3,3,"FACILITY_DETAIL.SERVICE_CONFIG.TITLE")),r(2),c("ngIf",!!o.facility),r(),c("ngIf",!!o.facility))},dependencies:[mt,dt,F,ui,yt,fi,Ot,Mt,Lt,Tt,At,Et,Ft,ft,E,Z]});let i=a;return i})();var Ye=(()=>{let a=class a{constructor(e,t,o){this.facilityService=e,this.guiAuthResolver=t,this.entityStorageService=o,this.disableRouting=!1,this.disableSelf=!1,this.availableRoles=[],this.selected="user",this.type="Facility",this.theme="facility-theme"}ngOnInit(){this.facility=this.entityStorageService.getEntity(),this.guiAuthResolver.assignAvailableRoles(this.availableRoles,"Facility")}};a.\u0275fac=function(t){return new(t||a)(d(D),d(w),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-perun-web-apps-facility-settings-managers"]],hostVars:2,hostBindings:function(t,o){t&2&&O("router-component",o.true)},inputs:{disableRouting:"disableRouting",disableSelf:"disableSelf"},decls:1,vars:6,consts:[[3,"complementaryObject","availableRoles","complementaryObjectType","disableSelf","disableRouting","theme"]],template:function(t,o){t&1&&I(0,"app-managers-page",0),t&2&&c("complementaryObject",o.facility)("availableRoles",o.availableRoles)("complementaryObjectType",o.type)("disableSelf",o.disableSelf)("disableRouting",o.disableRouting)("theme",o.theme)},dependencies:[Ve]});let i=a;return i})();function $n(i,a){i&1&&(l(0,"perun-web-apps-alert",10),u(1),p(2,"translate"),s()),i&2&&(r(),g(" ",m(2,1,"FACILITY_DETAIL.SERVICES_DESTINATIONS.DESTINATIONS_INFO")," "))}function Xn(i,a){if(i&1){let n=y();l(0,"button",11),_("click",function(){S(n);let t=f();return C(t.addDestination())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"FACILITY_DETAIL.SERVICES_DESTINATIONS.ADD")," "))}function Kn(i,a){if(i&1){let n=y();l(0,"button",12),_("click",function(){S(n);let t=f();return C(t.removeDestination())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.loading||n.selected.selected.length===0),r(),g(" ",m(2,2,"FACILITY_DETAIL.SERVICES_DESTINATIONS.REMOVE")," ")}}function qn(i,a){if(i&1){let n=y();l(0,"button",13),_("click",function(){S(n);let t=f();return C(t.onAllow())}),l(1,"mat-icon"),u(2," check_circle_outline "),s(),u(3),p(4,"translate"),s()}if(i&2){let n=f();c("disabled",n.loading||n.selected.selected.length===0||n.allSelectedAllowed()),r(3),g(" ",m(4,2,"FACILITY_DETAIL.SERVICES_DESTINATIONS.ALLOW")," ")}}function Qn(i,a){if(i&1){let n=y();l(0,"button",13),_("click",function(){S(n);let t=f();return C(t.onBlock())}),l(1,"mat-icon"),u(2," block "),s(),u(3),p(4,"translate"),s()}if(i&2){let n=f();c("disabled",n.loading||n.selected.selected.length===0||n.allSelectedBlocked()),r(3),g(" ",m(4,2,"FACILITY_DETAIL.SERVICES_DESTINATIONS.BLOCK")," ")}}function Jn(i,a){i&1&&I(0,"perun-web-apps-loading-table")}function Zn(i,a){if(i&1&&I(0,"app-perun-web-apps-destination-list",14),i&2){let n=f();c("filterValue",n.filterValue)("loading",n.loading)("selection",n.selected)("cachedSubject",n.cachedSubject)("destinations",n.destinations)("services",n.configServicesIds)("displayedColumns",n.displayedColumns)("tableId",n.tableId)}}var We=(()=>{let a=class a{constructor(e,t,o,h,A,k,P){this.dialog=e,this.servicesManager=t,this.translate=o,this.notificator=h,this.authResolver=A,this.serviceManager=k,this.entityStorageService=P,this.displayedColumns=["select","destinationId","service","destination","type","status","propagationType","lastSuccessfulPropagation","lastAttemptedPropagation"],this.configServices=[],this.configServicesIds=new Set,this.title="FACILITY_DETAIL.SERVICES_DESTINATIONS.TITLE",this.destinationEmitter=new Fe,this.destinations=[],this.selected=new j(!0,[],!0,(V,K)=>V.id===K.id&&V.facility?.id===K.facility?.id&&V.service?.id===K.service?.id),this.cachedSubject=new G(!0),this.filterValue="",this.tableId=ai}ngOnInit(){this.loading=!0,this.facility=this.entityStorageService.getEntity(),this.setAuthRights(),this.refreshTable()}refreshTable(){this.loading=!0,this.servicesManager.getAllRichDestinationsForFacility(this.facility.id).subscribe(e=>{this.destinations=e,this.destinationEmitter.emit(this.destinations),this.selected.clear(),this.cachedSubject.next(!0),this.setAuthRights(),this.loading=!1})}setAuthRights(){this.addAuth=this.authResolver.isAuthorized("addDestination_Service_Facility_Destination_policy",[this.facility]),this.removeAuth=this.authResolver.isAuthorized("removeDestination_Service_Facility_Destination_policy",[this.facility]),this.allowAuth=this.authResolver.isAuthorized("unblockServiceOnDestination_Service_int_policy",[this.facility]),this.blockAuth=this.authResolver.isAuthorized("blockServiceOnDestination_Service_int_policy",[this.facility]),this.displayedColumns=this.removeAuth?this.displayedColumns:this.displayedColumns.filter(e=>e!=="select")}addDestination(){let e=L();e.width="600px",e.data={facility:this.facility,theme:"facility-theme",configServices:this.configServices},this.dialog.open(Ni,e).afterClosed().subscribe(o=>{o&&(this.refreshTable(),this.notificator.showSuccess(this.translate.instant("FACILITY_DETAIL.SERVICES_DESTINATIONS.ADD_SUCCESS")))})}removeDestination(){let e=L();e.width="600px",e.data={destinations:this.selected.selected,theme:"facility-theme"},this.dialog.open(Oi,e).afterClosed().subscribe(o=>{o&&this.refreshTable()})}blockServicesOnDestinations(e){this.serviceManager.blockServicesOnDestinations({richDestinations:e}).subscribe({next:()=>{this.notificator.showSuccess(this.translate.instant("FACILITY_DETAIL.SERVICES_DESTINATIONS.BLOCK_SUCCESS")),this.refreshTable()},error:()=>this.loading=!1})}onBlock(){this.loading=!0,this.blockServicesOnDestinations(this.selected.selected)}allowServicesOnDestinations(e){this.serviceManager.unblockServicesOnDestinations({richDestinations:e}).subscribe({next:()=>{this.notificator.showSuccess(this.translate.instant("FACILITY_DETAIL.SERVICES_DESTINATIONS.ALLOW_SUCCESS")),this.refreshTable()},error:()=>this.loading=!1})}onAllow(){this.loading=!0,this.allowServicesOnDestinations(this.selected.selected)}applyFilter(e){this.filterValue=e,this.refreshTable()}allSelectedAllowed(){return this.selected.selected.reduce((e,t)=>e&&!t.blocked,!0)}allSelectedBlocked(){return this.selected.selected.reduce((e,t)=>e&&t.blocked,!0)}};a.id="FacilityServicesDestinationsComponent",a.\u0275fac=function(t){return new(t||a)(d(B),d(ie),d(It),d(J),d(w),d(ie),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-perun-web-apps-facility-services-destinations"]],hostVars:2,hostBindings:function(t,o){t&2&&O("router-component",o.true)},inputs:{displayedColumns:"displayedColumns",configServices:"configServices",configServicesIds:"configServicesIds",title:"title",loading:"loading"},outputs:{destinationEmitter:"destinationEmitter"},decls:15,vars:11,consts:[[1,"page-subtitle"],["alert_type","info",4,"ngIf"],[3,"refresh"],["color","accent","class","me-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","me-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","me-2","mat-stroked-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["spinner",""],[1,"position-relative","table-min-height"],[3,"filterValue","loading","selection","cachedSubject","destinations","services","displayedColumns","tableId",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["alert_type","info"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],["mat-stroked-button","",1,"me-2",3,"disabled","click"],[3,"filterValue","loading","selection","cachedSubject","destinations","services","displayedColumns","tableId"]],template:function(t,o){if(t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),v(4,$n,3,3,"perun-web-apps-alert",1),l(5,"perun-web-apps-refresh-button",2),_("refresh",function(){return o.refreshTable()}),s(),v(6,Xn,3,3,"button",3)(7,Kn,3,4,"button",4)(8,qn,5,4,"button",5)(9,Qn,5,4,"button",5),l(10,"perun-web-apps-debounce-filter",6),_("filter",function(A){return o.applyFilter(A)}),s(),v(11,Jn,1,0,"ng-template",null,7,U),l(13,"div",8),v(14,Zn,1,8,"app-perun-web-apps-destination-list",9),s()()),t&2){let h=R(12);r(2),b(m(3,9,o.title)),r(2),c("ngIf",o.title.includes("CONFIG")),r(2),c("ngIf",o.addAuth),r(),c("ngIf",o.removeAuth),r(),c("ngIf",o.allowAuth),r(),c("ngIf",o.blockAuth),r(),c("placeholder","FACILITY_DETAIL.SERVICES_DESTINATIONS.FILTER"),r(4),c("perunWebAppsLoader",o.loading)("perunWebAppsLoaderIndicator",h)}},dependencies:[F,le,N,Pe,we,H,ee,W,Y,E]});let i=a;return i})();function ia(i,a){if(i&1){let n=y();l(0,"button",8),_("click",function(){S(n);let t=f();return C(t.addHost())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"FACILITY_DETAIL.HOSTS.ADD")," "))}function na(i,a){if(i&1){let n=y();l(0,"button",9),_("click",function(){S(n);let t=f();return C(t.removeHost())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.loading||n.selected.selected.length===0),r(),g(" ",m(2,2,"FACILITY_DETAIL.HOSTS.REMOVE")," ")}}function aa(i,a){i&1&&I(0,"perun-web-apps-loading-table")}function oa(i,a){if(i&1&&I(0,"app-hosts-list",10),i&2){let n=f();c("disableRouting",!n.routeAuth||n.disableRouting)("loading",n.loading)("filterValue",n.filterValue)("hosts",n.hosts)("selection",n.selected)("cachedSubject",n.cachedSubject)("displayedColumns",n.displayedColumns)("facilityId",n.facility.id)("tableId",n.tableId)}}var ze=(()=>{let a=class a{constructor(e,t,o,h){this.dialog=e,this.facilitiesManager=t,this.authResolver=o,this.entityStorageService=h,this.disableRouting=!1,this.hostEmitter=new Fe,this.hosts=[],this.selected=new j(!0,[],!0,(A,k)=>A.id===k.id),this.cachedSubject=new G(!0),this.filterValue="",this.tableId=oi,this.displayedColumns=["id","name"]}ngOnInit(){this.loading=!0,this.facility=this.entityStorageService.getEntity(),this.setAuthRights(),this.refreshTable()}refreshTable(){this.loading=!0,this.facilitiesManager.getHosts(this.facility.id).subscribe(e=>{this.hosts=e,this.hostEmitter.emit(this.hosts),this.selected.clear(),this.cachedSubject.next(!0),this.setAuthRights(),this.loading=!1})}setAuthRights(){this.addAuth=this.authResolver.isAuthorized("addHosts_Facility_List<String>_policy",[this.facility]),this.removeAuth=this.authResolver.isAuthorized("removeHosts_List<Host>_Facility_policy",[this.facility]),this.displayedColumns=this.removeAuth?["select","id","name"]:["id","name"],this.hosts.length!==0&&(this.routeAuth=this.authResolver.isAuthorized("getHostById_int_policy",[this.facility,this.hosts[0]]))}addHost(){let e=L();e.width="600px",e.data={facilityId:this.facility.id,theme:"facility-theme"},this.dialog.open(ki,e).afterClosed().subscribe(o=>{o&&this.refreshTable()})}removeHost(){let e=L();e.width="600px",e.data={facilityId:this.facility.id,theme:"facility-theme",hosts:this.selected.selected},this.dialog.open(Vi,e).afterClosed().subscribe(o=>{o&&this.refreshTable()})}applyFilter(e){this.filterValue=e,this.refreshTable()}};a.\u0275fac=function(t){return new(t||a)(d(B),d(D),d(w),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-facility-hosts"]],inputs:{disableRouting:"disableRouting"},outputs:{hostEmitter:"hostEmitter"},decls:12,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","me-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["class","me-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["spinner",""],[1,"position-relative","table-min-height"],[3,"disableRouting","loading","filterValue","hosts","selection","cachedSubject","displayedColumns","facilityId","tableId",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],[3,"disableRouting","loading","filterValue","hosts","selection","cachedSubject","displayedColumns","facilityId","tableId"]],template:function(t,o){if(t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),l(4,"perun-web-apps-refresh-button",1),_("refresh",function(){return o.refreshTable()}),s(),v(5,ia,3,3,"button",2)(6,na,3,4,"button",3),l(7,"perun-web-apps-debounce-filter",4),_("filter",function(A){return o.applyFilter(A)}),s(),v(8,aa,1,0,"ng-template",null,5,U),l(10,"div",6),v(11,oa,1,9,"app-hosts-list",7),s()()),t&2){let h=R(9);r(2),b(m(3,6,"FACILITY_DETAIL.HOSTS.TITLE")),r(3),c("ngIf",o.addAuth),r(),c("ngIf",o.removeAuth),r(),c("placeholder","FACILITY_DETAIL.HOSTS.FILTER"),r(4),c("perunWebAppsLoader",o.loading)("perunWebAppsLoaderIndicator",h)}},dependencies:[F,N,je,H,ee,W,Y,E]});let i=a;return i})();var on=(()=>{let a=class a{constructor(e,t){this.facilityManager=e,this.route=t,this.host={beanName:"",id:0}}ngOnInit(){this.route.params.subscribe(e=>{this.hostId=Number(e.hostId),this.facilityManager.getHostById(this.hostId).subscribe(t=>{this.host=t})})}};a.\u0275fac=function(t){return new(t||a)(d(D),d(me))},a.\u0275cmp=T({type:a,selectors:[["app-facility-hosts-detail"]],decls:5,vars:6,consts:[[1,"page-subtitle"],[3,"entityId","entity"]],template:function(t,o){t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),I(4,"app-one-entity-attribute-page",1),s()),t&2&&(r(2),oe(" ",m(3,4,"FACILITY_DETAIL.HOSTS.HOSTS_DETAIL.TITLE")," ",o.host.hostname," "),r(2),c("entityId",o.hostId)("entity","host"))},dependencies:[ke,E]});let i=a;return i})();function sa(i,a){if(i&1){let n=y();l(0,"button",12),_("click",function(){S(n);let t=f();return C(t.forcePropagation())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.selected.selected.length===0||n.disableForcePropagationButton||n.loading),r(),g(" ",m(2,2,"FACILITY_DETAIL.SERVICES_STATUS.FORCE_PROPAGATION")," ")}}function la(i,a){if(i&1){let n=y();l(0,"button",12),_("click",function(){S(n);let t=f();return C(t.allow())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.selected.selected.length===0||n.disableAllowButton||n.loading),r(),g(" ",m(2,2,"FACILITY_DETAIL.SERVICES_STATUS.ALLOW")," ")}}function ca(i,a){if(i&1){let n=y();l(0,"button",13),_("click",function(){S(n);let t=f();return C(t.block())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.selected.selected.length===0||n.disableBlockButton||n.loading),r(),g(" ",m(2,2,"FACILITY_DETAIL.SERVICES_STATUS.BLOCK")," ")}}function pa(i,a){if(i&1&&(l(0,"button",14),p(1,"translate"),u(2),p(3,"translate"),s()),i&2){let n=f(),e=R(10);pe("matTooltip",m(1,5,"DIALOGS.REMOVE_SERVICE_FROM_FACILITY.CHECKBOXES_DISABLED")),c("disabled",n.selected.selected.length===0||n.disableRemoveButton||n.loading)("matMenuTriggerFor",e)("matTooltipDisabled",!n.disableRemoveButton),r(2),g(" ",m(3,7,"FACILITY_DETAIL.SERVICES_STATUS.REMOVE")," ")}}function ma(i,a){if(i&1){let n=y();l(0,"button",7),_("click",function(){S(n);let t=f();return C(t.removeTaskResults())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"FACILITY_DETAIL.SERVICES_STATUS.REMOVE_TASK_RESULTS")," "))}function da(i,a){i&1&&I(0,"perun-web-apps-loading-table")}function ua(i,a){if(i&1){let n=y();l(0,"perun-web-apps-services-status-list",15),_("selectionChange",function(){S(n);let t=f();return C(t.selectionChanged())}),s()}if(i&2){let n=f();c("disableRouting",!n.routeAuth)("loading",n.loading)("filterValue",n.filterValue)("servicesStatus",n.servicesStates)("selection",n.selected)("cachedSubject",n.cachedSubject)("tableId",n.tableId)}}var rn=(()=>{let a=class a{constructor(e,t,o,h,A,k,P,V,K){this.tasksManager=e,this.servicesManager=t,this.notificator=o,this.translate=h,this.authResolver=A,this.facilityManager=k,this.resourcesManager=P,this.dialog=V,this.entityStorageService=K,this.servicesStates=[],this.selected=new j(!0,[],!0,($e,te)=>$e.service.id===te.service.id),this.cachedSubject=new G(!0),this.filterValue="",this.tableId=ri,this.disableAllowButton=!0,this.disableBlockButton=!0,this.disableRemoveButton=!0,this.disableForcePropagationButton=!1}ngOnInit(){this.loading=!0,this.facility=this.entityStorageService.getEntity(),this.setAuthRights(),this.refreshTable()}forcePropagation(){let e=this.selected.selected.map(t=>t.service.id);this.servicesManager.forceServicePropagationBulk(e,this.facility.id).subscribe({next:()=>{this.notificator.showInstantSuccess("FACILITY_DETAIL.SERVICES_STATUS.SUCCESS_FORCE_PROPAGATION"),this.loading=!1,this.refreshTable()},error:()=>{this.loading=!1}})}allow(){let e=this.selected.selected.map(t=>t.service.id);this.servicesManager.unblockServicesOnFacility(e,this.facility.id).subscribe({next:()=>{this.notificator.showInstantSuccess("FACILITY_DETAIL.SERVICES_STATUS.SUCCESS_ALLOW"),this.refreshTable()},error:()=>{this.loading=!1}})}block(){let e=this.selected.selected.map(t=>t.service.id);this.servicesManager.blockServicesOnFacility(e,this.facility.id).subscribe({next:()=>{this.notificator.showInstantSuccess("FACILITY_DETAIL.SERVICES_STATUS.SUCCESS_BLOCK"),this.refreshTable()},error:()=>{this.loading=!1}})}removeTaskResults(){this.loading=!0,this.tasksManager.getTaskResultsForGUIByTask(this.selected.selected[0].task.id).subscribe(e=>{let t=L();t.width="600px",t.data={theme:"facility-theme",taskResults:e},this.loading=!1,this.dialog.open(Ge,t)})}removeServiceFromFacility(){this.loading=!0,this.facilityManager.getAssignedResourcesByAssignedServiceForFacility(this.selected.selected[0].facility.id,this.selected.selected[0].service.id).subscribe({next:e=>{let t=L();t.width="600px",this.taskId=this.taskIsNull?null:this.selected.selected[0].task.id,e.length===0?(t.data={theme:"facility-theme",taskId:this.taskId},this.loading=!1,this.dialog.open(ji,t).afterClosed().subscribe(h=>{h&&(this.disableRemoveButton=!0,this.refreshTable())})):this.resourcesManager.getRichResourcesByIds(e.map(o=>o.id)).subscribe(o=>{t.data={theme:"facility-theme",taskId:this.taskId,serviceId:this.selected.selected[0].service.id,facilityId:this.selected.selected[0].facility.id,resource:o},this.loading=!1,this.dialog.open(Pi,t).afterClosed().subscribe(A=>{A&&(this.disableRemoveButton=!0,this.refreshTable())})})},error:()=>this.loading=!1})}refreshTable(){this.loading=!0,this.tasksManager.getFacilityServicesState(this.facility.id).subscribe(e=>{this.servicesStates=e,this.selected.clear(),this.cachedSubject.next(!0),this.setAuthRights(),this.loading=!1})}setAuthRights(){this.propagationAuth=this.authResolver.isAuthorized("forceServicePropagation_Facility_Service_policy",[this.facility]),this.blockAuth=this.authResolver.isAuthorized("blockServiceOnFacility_Service_Facility_policy",[this.facility]),this.allowAuth=this.authResolver.isAuthorized("unblockServiceOnFacility_Service_Facility_policy",[this.facility]),this.deleteAuth=this.authResolver.isAuthorized("deleteTask_Task_policy",[this.facility]),this.routeAuth=this.authResolver.isAuthorized("getTaskResultsByTask_int_policy",[this.facility])}applyFilter(e){this.filterValue=e,this.refreshTable()}selectionChanged(){this.disableBlockButton=!1,this.disableAllowButton=!1,this.disableRemoveButton=this.selected.selected.length!==1,this.disableForcePropagationButton=!1,this.disableRemoveButton||(this.taskIsNull=this.selected.selected[0].task===null);for(let e of this.selected.selected)e.blockedOnFacility?(this.disableBlockButton=!0,this.disableForcePropagationButton=!0):this.disableAllowButton=!0}};a.\u0275fac=function(t){return new(t||a)(d(Re),d(ie),d(J),d(re),d(w),d(D),d(xe),d(B),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-facility-service-status"]],decls:20,vars:14,consts:[[1,"page-subtitle"],[3,"refresh"],["class","me-2","color","accent","mat-flat-button","",3,"disabled","click",4,"ngIf"],["class","me-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],["mat-flat-button","","class","me-2 dropdown-toggle","color","warn",3,"disabled","matMenuTriggerFor","matTooltipDisabled","matTooltip",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"placeholder","filter"],["spinner",""],[1,"position-relative","table-min-height"],[3,"disableRouting","loading","filterValue","servicesStatus","selection","cachedSubject","tableId","selectionChange",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["color","accent","mat-flat-button","",1,"me-2",3,"disabled","click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"me-2","dropdown-toggle",3,"disabled","matMenuTriggerFor","matTooltipDisabled","matTooltip"],[3,"disableRouting","loading","filterValue","servicesStatus","selection","cachedSubject","tableId","selectionChange"]],template:function(t,o){if(t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),l(4,"perun-web-apps-refresh-button",1),_("refresh",function(){return o.refreshTable()}),s(),v(5,sa,3,4,"button",2)(6,la,3,4,"button",2)(7,ca,3,4,"button",3)(8,pa,4,9,"button",4),l(9,"mat-menu",null,5),v(11,ma,3,3,"button",6),l(12,"button",7),_("click",function(){return o.removeServiceFromFacility()}),u(13),p(14,"translate"),s()(),l(15,"perun-web-apps-debounce-filter",8),_("filter",function(A){return o.applyFilter(A)}),s(),v(16,da,1,0,"ng-template",null,9,U),l(18,"div",10),v(19,ua,1,7,"perun-web-apps-services-status-list",11),s()()),t&2){let h=R(17);r(2),b(m(3,10,"FACILITY_DETAIL.SERVICES_STATUS.TITLE")),r(3),c("ngIf",o.propagationAuth),r(),c("ngIf",o.allowAuth),r(),c("ngIf",o.blockAuth),r(),c("ngIf",o.deleteAuth),r(3),c("ngIf",!o.taskIsNull),r(2),g(" ",m(14,12,"FACILITY_DETAIL.SERVICES_STATUS.REMOVE_SERVICE_FROM_FACILITY")," "),r(2),c("placeholder","SHARED_LIB.PERUN.COMPONENTS.SERVICES_STATUS_LIST.TABLE_SEARCH"),r(4),c("perunWebAppsLoader",o.loading)("perunWebAppsLoaderIndicator",h)}},dependencies:[F,N,De,jt,Pt,Gt,H,ee,pi,W,Y,E]});let i=a;return i})();function fa(i,a){if(i&1){let n=y();l(0,"button",8),_("click",function(){S(n);let t=f();return C(t.removeTaskResult())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.loading||n.selection.selected.length===0),r(),g(" ",m(2,2,"FACILITY_DETAIL.TASK_RESULTS.REMOVE"),`
`)}}function ha(i,a){i&1&&I(0,"perun-web-apps-loading-table")}function _a(i,a){if(i&1&&I(0,"perun-web-apps-task-results-list",9),i&2){let n=f();c("tableId",n.tableId)("loading",n.loading)("displayedColumns",n.displayedColumns)("filterValue",n.filterValue)("selection",n.selection)("cachedSubject",n.cachedSubject)("taskResults",n.taskResults)}}var sn=(()=>{let a=class a{constructor(e,t,o,h,A){this.route=e,this.taskManager=t,this.authResolver=o,this.dialog=h,this.entityStorageService=A,this.loading=!1,this.filterValue="",this.selection=new j(!0,[],!0,(k,P)=>k.id===P.id),this.task={id:0},this.taskResults=[],this.cachedSubject=new G(!0),this.tableId=si,this.displayedColumns=["select","id","destination","type","service","status","time","returnCode","standardMessage","errorMessage"],this.removeAuth=!1}ngOnInit(){this.loading=!0,this.facility=this.entityStorageService.getEntity(),this.removeAuth=this.authResolver.isAuthorized("deleteTask_Task_policy",[this.facility]),this.removeAuth||(this.displayedColumns=["id","destination","type","service","status","time","returnCode","standardMessage","errorMessage"]),this.route.params.subscribe(e=>{this.taskId=Number(e.taskId),this.taskManager.getTaskById(this.taskId).subscribe(t=>{this.task=t,this.refreshTable()})})}refreshTable(){this.loading=!0,this.taskManager.getTaskResultsForGUIByTask(this.taskId).subscribe(e=>{this.selection.clear(),this.cachedSubject.next(!0),this.taskResults=e,this.loading=!1})}removeTaskResult(){let e=L();e.width="600px",e.data={theme:"facility-theme",taskResults:this.selection.selected},this.dialog.open(Ge,e).afterClosed().subscribe(o=>{o&&this.refreshTable()})}applyFilter(e){this.filterValue=e,this.refreshTable()}};a.\u0275fac=function(t){return new(t||a)(d(me),d(Re),d(w),d(B),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-facility-task-results"]],decls:12,vars:9,consts:[[1,"page-subtitle"],[1,"text-muted"],[3,"refresh"],["class","me-2","color","warn","mat-flat-button","",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter"],["spinner",""],[1,"position-relative","table-min-height"],[3,"tableId","loading","displayedColumns","filterValue","selection","cachedSubject","taskResults",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],[3,"tableId","loading","displayedColumns","filterValue","selection","cachedSubject","taskResults"]],template:function(t,o){if(t&1&&(l(0,"h1",0),u(1),p(2,"translate"),l(3,"span",1),u(4),s()(),l(5,"perun-web-apps-refresh-button",2),_("refresh",function(){return o.refreshTable()}),s(),v(6,fa,3,4,"button",3),l(7,"perun-web-apps-debounce-filter",4),_("filter",function(A){return o.applyFilter(A)}),s(),v(8,ha,1,0,"ng-template",null,5,U),l(10,"div",6),v(11,_a,1,7,"perun-web-apps-task-results-list",7),s()),t&2){let h=R(9);r(),oe(" ",m(2,7,"FACILITY_DETAIL.TASK_RESULTS.TITLE")," - ",o.task.service?o.task.service.name:""," "),r(3),g(" \xA0#",o.task.id," "),r(2),c("ngIf",o.removeAuth),r(),c("placeholder","FACILITY_DETAIL.TASK_RESULTS.FILTER"),r(4),c("perunWebAppsLoader",o.loading)("perunWebAppsLoaderIndicator",h)}},dependencies:[F,N,H,ee,mi,W,Y,E]});let i=a;return i})();var ln=(()=>{let a=class a{constructor(e,t){this.dialogRef=e,this.data=t,this.theme=""}ngOnInit(){this.theme=this.data.theme}onCancel(){this.dialogRef.close(!1)}onSkip(){this.dialogRef.close(!0)}};a.\u0275fac=function(t){return new(t||a)(d(ue),d(fe))},a.\u0275cmp=T({type:a,selectors:[["app-no-service-dialog"]],decls:14,vars:15,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matDialogActions",""],["mat-stroked-button","",1,"ms-auto","me-2",3,"click"],["color","accent","mat-flat-button","",3,"click"]],template:function(t,o){t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),l(4,"div",1),u(5),p(6,"translate"),s(),l(7,"div",2)(8,"button",3),_("click",function(){return o.onCancel()}),u(9),p(10,"translate"),s(),l(11,"button",4),_("click",function(){return o.onSkip()}),u(12),p(13,"translate"),s()()()),t&2&&(ce(o.theme),r(2),b(m(3,7,"DIALOGS.NO_SERVICE.TITLE")),r(3),g(" ",m(6,9,"DIALOGS.NO_SERVICE.INFO")," "),r(4),g(" ",m(10,11,"DIALOGS.NO_SERVICE.CANCEL")," "),r(3),g(" ",m(13,13,"DIALOGS.NO_SERVICE.SKIP")," "))},dependencies:[N,he,ge,_e,E]});let i=a;return i})();var cn=(()=>{let a=class a{constructor(e,t){this.dialogRef=e,this.data=t,this.theme=""}ngOnInit(){this.theme=this.data.theme}onCancel(){this.dialogRef.close(!1)}onSkip(){this.dialogRef.close(!0)}};a.\u0275fac=function(t){return new(t||a)(d(ue),d(fe))},a.\u0275cmp=T({type:a,selectors:[["app-config-unsaved-dialog"]],decls:14,vars:15,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matDialogActions",""],["mat-stroked-button","",1,"ms-auto","me-2",3,"click"],["color","accent","mat-flat-button","",3,"click"]],template:function(t,o){t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),l(4,"div",1),u(5),p(6,"translate"),s(),l(7,"div",2)(8,"button",3),_("click",function(){return o.onCancel()}),u(9),p(10,"translate"),s(),l(11,"button",4),_("click",function(){return o.onSkip()}),u(12),p(13,"translate"),s()()()),t&2&&(ce(o.theme),r(2),b(m(3,7,"DIALOGS.CONFIG_UNSAVED.TITLE")),r(3),g(" ",m(6,9,"DIALOGS.CONFIG_UNSAVED.INFO")," "),r(4),g(" ",m(10,11,"DIALOGS.CONFIG_UNSAVED.CANCEL")," "),r(3),g(" ",m(13,13,"DIALOGS.CONFIG_UNSAVED.SKIP")," "))},dependencies:[N,he,ge,_e,E]});let i=a;return i})();function ga(i,a){if(i&1&&(l(0,"div",3),I(1,"i",4),p(2,"translate"),s()),i&2){let n=f();r(),c("innerHTML",m(2,1,n.info),Ee)}}function va(i,a){if(i&1){let n=y();l(0,"button",10),_("click",function(){S(n);let t=f(2);return C(t.onKeep())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"DIALOGS.CANCEL_CONFIG.KEEP")," "))}function Ia(i,a){if(i&1){let n=y();l(0,"div",5)(1,"button",6),_("click",function(){S(n);let t=f();return C(t.onCancel())}),u(2),p(3,"translate"),s(),l(4,"button",7),_("click",function(){S(n);let t=f();return C(t.onDelete())}),l(5,"mat-icon",8),u(6," warning "),s(),u(7),p(8,"translate"),s(),v(9,va,3,3,"button",9),s()}if(i&2){let n=f();r(2),g(" ",m(3,3,"DIALOGS.CANCEL_CONFIG.CANCEL")," "),r(5),g(" ",m(8,5,"DIALOGS.CANCEL_CONFIG.DELETE")," "),r(2),c("ngIf",!n.lastStep)}}var pn=(()=>{let a=class a{constructor(e,t,o,h,A){this.dialogRef=e,this.data=t,this.facilityService=o,this.notificator=h,this.translate=A,this.theme="",this.title="",this.info="",this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.lastStep=this.data.lastStep,this.lastStep?(this.title="DIALOGS.CANCEL_CONFIG.TITLE_COMPLETE",this.info="DIALOGS.CANCEL_CONFIG.INFO_COMPLETE"):(this.title="DIALOGS.CANCEL_CONFIG.TITLE_INCOMPLETE",this.info="DIALOGS.CANCEL_CONFIG.INFO_INCOMPLETE")}onCancel(){this.dialogRef.close(!1)}onDelete(){this.loading=!0,this.facilityService.deleteFacility(this.data.facilityId,!0).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CANCEL_CONFIG.SUCCESS")),this.dialogRef.close(!0),this.loading=!1},()=>this.loading=!1)}onKeep(){this.dialogRef.close(!0)}};a.\u0275fac=function(t){return new(t||a)(d(ue),d(fe),d(D),d(J),d(re))},a.\u0275cmp=T({type:a,selectors:[["app-cancel-configuration-dialog"]],decls:6,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content","",4,"ngIf"],["matDialogActions","",4,"ngIf"],["mat-dialog-content",""],[3,"innerHTML"],["matDialogActions",""],["mat-stroked-button","",1,"me-2",3,"click"],["color","warn","mat-flat-button","",1,"ms-auto","me-2",3,"click"],["iconPositionEnd",""],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"]],template:function(t,o){t&1&&(l(0,"div")(1,"h1",0),u(2),p(3,"translate"),s(),v(4,ga,3,3,"div",1)(5,Ia,10,7,"div",2),s()),t&2&&(ce(o.theme),r(2),b(m(3,6,o.title)),r(2),c("ngIf",!o.loading),r(),c("ngIf",!o.loading))},dependencies:[F,le,N,he,ge,_e,E]});let i=a;return i})();var Sa=["stepper"];function Ca(i,a){i&1&&I(0,"perun-web-apps-loading-table")}function ya(i,a){i&1&&(u(0),p(1,"translate")),i&2&&b(m(1,1,"FACILITY_CONFIGURATION.HOSTS"))}function ba(i,a){if(i&1){let n=y();l(0,"app-facility-hosts",15),_("hostEmitter",function(t){S(n);let o=f();return C(o.hosts=t)}),s()}i&2&&c("disableRouting",!0)}function Ta(i,a){i&1&&(u(0),p(1,"translate")),i&2&&b(m(1,1,"FACILITY_CONFIGURATION.SERVICES"))}var Aa=()=>["select","id","name","enabled","description"];function Ea(i,a){if(i&1){let n=y();l(0,"h1",16),u(1),p(2,"translate"),s(),l(3,"perun-web-apps-alert",17),u(4),p(5,"translate"),s(),l(6,"div",18)(7,"perun-web-apps-debounce-filter",19),_("filter",function(t){S(n);let o=f();return C(o.applyFilter(t))}),s()(),l(8,"app-services-list",20),_("selectionChanged",function(){S(n);let t=f();return C(t.singleServiceSelected())}),s()}if(i&2){let n=f();r(),b(m(2,10,"FACILITY_CONFIGURATION.SERVICES")),r(3),g(" ",m(5,12,"FACILITY_CONFIGURATION.SERVICES_INFO")," "),r(3),c("placeholder","FACILITY_CONFIGURATION.SERVICES_FILTER"),r(),c("loading",n.processing)("disableRouting",!0)("displayedColumns",q(14,Aa))("selection",n.selection)("cachedSubject",n.cachedSubject)("filterValue",n.filterValue)("services",n.services)}}function Fa(i,a){i&1&&(u(0),p(1,"translate")),i&2&&b(m(1,1,"FACILITY_CONFIGURATION.SERVICE_CONFIG"))}function xa(i,a){if(i&1){let n=y();l(0,"perun-web-apps-service-search-select",26),_("serviceSelected",function(t){S(n);let o=f(2);return C(o.filterAttributes(t))}),s()}if(i&2){let n=f(2);c("disableAutoSelect",!0)("services",n.selection.selected)("multiple",!0)("theme","facility-theme")}}function Ra(i,a){if(i&1&&I(0,"perun-web-apps-attributes-list",27),i&2){let n=f(2);c("loading",n.processing)("emptyListText","FACILITY_CONFIGURATION.EMPTY_REQ_ATT")("attributes",n.filteredAttributes)("selection",n.attSelection)("cachedSubject",n.cachedSubject)}}function Da(i,a){if(i&1){let n=y();l(0,"h1",16),u(1),p(2,"translate"),s(),l(3,"perun-web-apps-alert",17),u(4),p(5,"translate"),s(),l(6,"div",18)(7,"button",21),_("click",function(){S(n);let t=f();return C(t.onRemoveAttributes())}),u(8),p(9,"translate"),s(),l(10,"button",22),_("click",function(){S(n);let t=f();return C(t.onSaveAttributes())}),u(11),p(12,"translate"),s(),v(13,xa,1,4,"perun-web-apps-service-search-select",23),s(),l(14,"div",24),v(15,Ra,1,5,"perun-web-apps-attributes-list",25),s()}if(i&2){let n=f(),e=R(5),t=R(7);r(),b(m(2,9,"FACILITY_CONFIGURATION.SERVICE_CONFIG")),r(3),g(" ",m(5,11,"FACILITY_CONFIGURATION.ATT_INFO")," "),r(3),c("disabled",n.processing||n.attSelection.selected.length===0),r(),g(" ",m(9,13,"FACILITY_CONFIGURATION.REMOVE")," "),r(2),c("disabled",n.processing||n.attSelection.selected.length===0),r(),g(" ",m(12,15,"FACILITY_CONFIGURATION.SAVE")," "),r(2),c("ngIf",e.selectedIndex===n.ATTRIBUTES_IDX),r(2),c("perunWebAppsLoader",n.processing)("perunWebAppsLoaderIndicator",t)}}function wa(i,a){i&1&&(u(0),p(1,"translate")),i&2&&b(m(1,1,"FACILITY_CONFIGURATION.DESTINATION_CONFIG"))}var La=()=>["select","destinationId","service","warn","destination","type","propagationType"];function Ma(i,a){if(i&1){let n=y();l(0,"app-perun-web-apps-facility-services-destinations",28),_("destinationEmitter",function(t){S(n);let o=f();return C(o.destinations=t)}),s()}if(i&2){let n=f();c("configServicesIds",n.serviceIds)("displayedColumns",q(5,La))("configServices",n.selection.selected)("loading",n.processing)("title","FACILITY_CONFIGURATION.DESTINATION_CONFIG")}}function Oa(i,a){i&1&&(u(0),p(1,"translate")),i&2&&b(m(1,1,"FACILITY_CONFIGURATION.MANAGERS"))}function Na(i,a){i&1&&I(0,"app-perun-web-apps-facility-settings-managers",29),i&2&&c("disableRouting",!0)("disableSelf",!0)}function ka(i,a){i&1&&(u(0),p(1,"translate")),i&2&&b(m(1,1,"FACILITY_CONFIGURATION.SUMMARY"))}var Va=()=>["id","name"];function Ba(i,a){if(i&1&&I(0,"app-hosts-list",44),i&2){let n=f(3);c("loading",n.processing)("disableRouting",!0)("displayedColumns",q(4,Va))("hosts",n.hosts)}}var Pa=()=>["destinationId","service","warn","destination","type","propagationType"];function ja(i,a){if(i&1&&I(0,"app-perun-web-apps-destination-list",45),i&2){let n=f(3);c("loading",n.processing)("destinations",n.destinations)("displayedColumns",q(4,Pa))("services",n.serviceIds)}}var Ga=()=>["id","name","enabled","script","description"],Ua=()=>["id","displayName","value","description"],Ya=()=>["id","vo","name","description"],Ha=()=>["id","name","email","logins","organization"];function Wa(i,a){if(i&1){let n=y();l(0,"mat-accordion")(1,"mat-expansion-panel",32)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),I(4,"mat-icon",33),u(5),p(6,"translate"),s()(),l(7,"h1",16),u(8),p(9,"translate"),s(),l(10,"div",24),v(11,Ba,1,5,"app-hosts-list",34),s()(),l(12,"mat-expansion-panel",32)(13,"mat-expansion-panel-header")(14,"mat-panel-title"),I(15,"mat-icon",35),u(16),p(17,"translate"),s()(),l(18,"h1",16),u(19),p(20,"translate"),s(),I(21,"app-services-list",36),s(),l(22,"mat-expansion-panel",37),_("opened",function(){S(n);let t=f(2);return C(t.getNonEmptyAttributes())}),l(23,"mat-expansion-panel-header")(24,"mat-panel-title"),I(25,"mat-icon",33),u(26),p(27,"translate"),s()(),l(28,"h1",16),u(29),p(30,"translate"),s(),I(31,"perun-web-apps-attributes-list",38),s(),l(32,"mat-expansion-panel",39),_("expandedChange",function(t){S(n);let o=f(2);return C(o.destinationServiceMissing=t)}),l(33,"mat-expansion-panel-header")(34,"mat-panel-title"),I(35,"mat-icon",40),u(36),p(37,"translate"),s()(),l(38,"h1",16),u(39),p(40,"translate"),s(),l(41,"div",24),v(42,ja,1,5,"app-perun-web-apps-destination-list",41),s()(),l(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title"),I(46,"mat-icon",42),u(47),p(48,"translate"),s()(),I(49,"app-managers-page",43),s()()}if(i&2){let n=f(2),e=R(7);c("@.disabled",!0),r(),c("disabled",n.hosts.length===0),r(),O("cursor-default",n.hosts.length===0),r(3),g(" ",m(6,42,"FACILITY_CONFIGURATION.HOSTS")," "),r(3),b(m(9,44,"FACILITY_CONFIGURATION.HOSTS")),r(3),c("perunWebAppsLoader",n.processing)("perunWebAppsLoaderIndicator",e),r(),c("disabled",n.selection.selected.length===0),r(),O("cursor-default",n.selection.selected.length===0),r(3),g(" ",m(17,46,"FACILITY_CONFIGURATION.SERVICES")," "),r(3),b(m(20,48,"FACILITY_CONFIGURATION.SERVICES")),r(2),c("loading",n.processing)("disableRouting",!0)("displayedColumns",q(60,Ga))("services",n.selection.selected),r(),c("disabled",n.selection.selected.length===0),r(),O("cursor-default",n.selection.selected.length===0),r(3),g(" ",m(27,50,"FACILITY_CONFIGURATION.SERVICE_CONFIG")," "),r(3),b(m(30,52,"FACILITY_CONFIGURATION.ATTS")),r(2),c("loading",n.processing)("displayedColumns",q(61,Ua))("attributes",n.filteredAttributes)("emptyListText","FACILITY_CONFIGURATION.EMPTY_REQ_ATT"),r(),c("expanded",n.destinationServiceMissing)("disabled",n.selection.selected.length===0&&n.destinations.length===0),r(),O("cursor-default",n.selection.selected.length===0&&n.destinations.length===0),r(3),g(" ",m(37,54,"FACILITY_CONFIGURATION.DESTINATION_CONFIG")," "),r(3),b(m(40,56,"FACILITY_CONFIGURATION.DESTINATION")),r(3),c("perunWebAppsLoader",n.processing)("perunWebAppsLoaderIndicator",e),r(5),g(" ",m(48,58,"FACILITY_CONFIGURATION.MANAGERS")," "),r(2),c("complementaryObject",n.facility)("configMode",!0)("disableRouting",!0)("availableRoles",n.availableRoles)("complementaryObjectType","Facility")("displayedGroupColumns",q(62,Ya))("displayedUserColumns",q(63,Ha))}}function za(i,a){if(i&1&&(l(0,"perun-web-apps-alert",17),I(1,"i",30),p(2,"translate"),s(),v(3,Wa,50,64,"mat-accordion",31)),i&2){f();let n=R(5);r(),c("innerHTML",m(2,2,"FACILITY_CONFIGURATION.SUMMARY_INFO"),Ee),r(2),c("ngIf",n.selectedIndex===n.steps.length-1)}}function $a(i,a){if(i&1){let n=y();l(0,"button",46),_("click",function(){S(n);let t=f();return C(t.back())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"FACILITY_CONFIGURATION.BACK")," "))}function Xa(i,a){if(i&1){let n=y();l(0,"button",47),_("click",function(){S(n);let t=f();return C(t.next())}),u(1),p(2,"translate"),s()}if(i&2){f();let n=R(5);O("me-2",n!==void 0&&n.selectedIndex!==0)("ms-auto",!(n!==void 0&&n.selectedIndex!==0)),r(),g(" ",m(2,5,"FACILITY_CONFIGURATION.NEXT")," ")}}function Ka(i,a){if(i&1){let n=y();l(0,"button",48),_("click",function(){S(n);let t=f();return C(t.onFinish())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"FACILITY_CONFIGURATION.FINISH")," "))}var mn=(()=>{let a=class a{constructor(e,t,o,h,A,k,P,V,K,$e){this.attributesManager=e,this.serviceManager=t,this.facilityService=o,this.cd=h,this.dialog=A,this.notificator=k,this.translate=P,this.router=V,this.guiAuthResolver=K,this.entityStorageService=$e,this.processing=!1,this.filteredAttributes=[],this.attSelection=new j(!0,[],!0,(te,Xe)=>te.id===Xe.id),this.cachedSubject=new G(!0),this.services=[],this.serviceIds=new Set,this.selection=new j(!0,[],!0,(te,Xe)=>te.id===Xe.id),this.hosts=[],this.destinations=[],this.destinationServiceMissing=!1,this.availableRoles=[],this.filterValue="",this.ATTRIBUTES_IDX=3,this.serviceControl=new se(!1,Qe.requiredTrue),this.attributesControl=new se(!0,Qe.requiredTrue),this.allowNavigate=!1,this.attributes=[],this.attributeIds=new Set,this.attributesPerService=new Map,this.servicesPerPackage=new Map,this.saveMsg="",this.removeMsg="",this.BEFORE_OPTIONAL_IDX=2,this.DESTINATIONS_IDX=4,this.AFTER_OPTIONAL_IDX=5,this.translate.get("FACILITY_CONFIGURATION.ATT_SAVED").subscribe(te=>this.saveMsg=te),this.translate.get("FACILITY_CONFIGURATION.ATT_REMOVED").subscribe(te=>this.removeMsg=te)}ngOnInit(){this.facility=this.entityStorageService.getEntity(),this.guiAuthResolver.assignAvailableRoles(this.availableRoles,"Facility"),this.serviceManager.getServices().subscribe(e=>{this.services=e})}ngAfterViewInit(){this.cd.detectChanges(),this.attSelection.changed.subscribe(()=>{this.attributesControl.setValue(this.attSelection.selected.length===0)})}onCancel(){let e=L();e.width="550px",e.data={facilityId:this.facility.id,lastStep:this.stepper.selectedIndex===this.stepper.steps.length-1,theme:"facility-theme"},this.dialog.open(pn,e).afterClosed().subscribe(o=>{o&&(this.allowNavigate=!0,sessionStorage.removeItem("newFacilityId"),this.router.navigate(["facilities"],{queryParamsHandling:"merge"}))})}singleServiceSelected(){this.setServiceControl(),this.processing}back(){this.stepper.selectedIndex<=this.BEFORE_OPTIONAL_IDX&&this.setServiceControl(),this.stepper.selectedIndex===this.AFTER_OPTIONAL_IDX&&this.selection.selected.length===0?this.stepper.selectedIndex=this.BEFORE_OPTIONAL_IDX:this.stepper.previous()}onSaveAttributes(){return new Promise((e,t)=>{this.processing=!0,this.attributesManager.setFacilityAttributes({facility:this.facility.id,attributes:this.attSelection.selected}).subscribe({next:()=>{this.notificator.showSuccess(this.saveMsg),this.attSelection.clear(),this.cachedSubject.next(!0),this.processing=!1,e()},error:()=>{this.processing=!1,t()}})})}next(){this.checkDestinationDependency(this.stepper.selectedIndex),this.stepper.selectedIndex===this.BEFORE_OPTIONAL_IDX?this.selection.selected.length===0?this.openSkipDialog():(this.getRequiredAttributes(),this.stepper.next()):this.stepper.selectedIndex===this.ATTRIBUTES_IDX?this.attSelection.selected.length!==0?this.openUnsavedAttsDialog():this.stepper.next():this.stepper.next()}onFinish(){this.allowNavigate=!0,sessionStorage.removeItem("newFacilityId"),this.router.navigate(["facilities",this.facility.id],{queryParamsHandling:"merge"})}onRemoveAttributes(){this.processing=!0;let e=this.attSelection.selected.map(t=>t.id);this.attributesManager.removeFacilityAttributes(this.facility.id,e).subscribe({next:()=>{this.notificator.showSuccess(this.removeMsg),this.attSelection.clear(),this.cachedSubject.next(!0),this.getRequiredAttributes(),this.processing=!1},error:()=>this.processing=!1})}filterAttributes(e){if(e===void 0||e.length===0){this.filteredAttributes=this.attributes;return}let t=new Set;for(let o of e)this.attributesPerService.get(o.id).forEach(h=>t.add(h));this.filteredAttributes=[];for(let o of this.attributes)t.has(o.id)&&this.filteredAttributes.push(o);this.attSelection.clear(),this.cachedSubject.next(!0)}getNonEmptyAttributes(){this.filteredAttributes=this.attributes.filter(e=>{if(e.value&&(!Array.isArray(e.value)||e.value.length!==0))return e})}navigationStep(e){this.checkDestinationDependency(e.previouslySelectedIndex),e.selectedIndex===this.ATTRIBUTES_IDX?this.getRequiredAttributes():e.selectedIndex===this.DESTINATIONS_IDX?this.processing=!1:e.selectedIndex<=this.BEFORE_OPTIONAL_IDX&&this.setServiceControl()}applyFilter(e){this.filterValue=e,this.selection.clear(),this.cachedSubject.next(!0)}canDeactivate(){return this.allowNavigate||this.onCancel(),this.allowNavigate}getServiceRequiredAttributes(e,t){t!==e.length&&this.attributesManager.getRequiredAttributesDefinition(e[t].id).subscribe(o=>{o=o.filter(h=>this.attributeIds.has(h.id)),this.attributesPerService.set(e[t].id,o.map(h=>h.id)),this.getServiceRequiredAttributes(e,t+1)})}setServiceControl(){this.serviceControl.setValue(this.selection.selected.length!==0)}openSkipDialog(){let e=L();e.width="400px",e.data={theme:"facility-theme"},this.dialog.open(ln,e).afterClosed().subscribe(o=>{o&&(this.serviceControl.setValue(!0),this.stepper.selectedIndex=this.AFTER_OPTIONAL_IDX)})}getRequiredAttributes(){this.processing=!0,this.attributesManager.getRequiredAttributesFacilityServices(this.selection.selected.map(e=>e.id),this.facility.id).subscribe(e=>{this.attSelection.clear(),this.attributes=e.filter(t=>!Xt(t)),this.filteredAttributes=this.attributes,this.attributes.forEach(t=>this.attributeIds.add(t.id)),this.getServiceRequiredAttributes(this.selection.selected,0),this.processing=!1})}openUnsavedAttsDialog(){let e=L();e.width="400px",e.data={theme:"facility-theme"},this.dialog.open(cn,e).afterClosed().subscribe(o=>{o&&this.onSaveAttributes().then(()=>{this.stepper.next()},()=>this.getRequiredAttributes())})}checkDestinationDependency(e){(e===this.BEFORE_OPTIONAL_IDX||e===this.DESTINATIONS_IDX)&&(this.serviceIds=new Set([...this.selection.selected.map(t=>t.id)]),this.destinationServicePresent())}destinationServicePresent(){for(let e of this.destinations)if(!this.serviceIds.has(e.service.id)){this.destinationServiceMissing=!0;return}this.destinationServiceMissing=!1}};a.\u0275fac=function(t){return new(t||a)(d(gt),d(ie),d(D),d(at),d(B),d(J),d(re),d(de),d(w),d(x))},a.\u0275cmp=T({type:a,selectors:[["app-facility-configuration-page"]],viewQuery:function(t,o){if(t&1&&rt(Sa,5),t&2){let h;st(h=lt())&&(o.stepper=h.first)}},decls:33,vars:15,consts:[[1,"facility-theme"],[1,"page-title"],[3,"linear","selectionChange"],["stepper",""],["spinner",""],["matStepLabel",""],["matStepContent",""],[3,"stepControl"],["optional","true",3,"editable","stepControl"],[3,"editable","optional"],[1,"actions"],["mat-stroked-button","",3,"click"],["class","ms-auto me-2","mat-stroked-button","",3,"click",4,"ngIf"],["color","accent","mat-flat-button","",3,"me-2","ms-auto","click",4,"ngIf"],["class","me-2","color","accent","mat-flat-button","",3,"click",4,"ngIf"],[3,"disableRouting","hostEmitter"],[1,"page-subtitle"],["alert_type","info"],[1,"filters"],[1,"filter",3,"placeholder","filter"],[3,"loading","disableRouting","displayedColumns","selection","cachedSubject","filterValue","services","selectionChanged"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],["color","accent","mat-flat-button","",1,"me-2",3,"disabled","click"],["class","service-search-select",3,"disableAutoSelect","services","multiple","theme","serviceSelected",4,"ngIf"],[1,"position-relative","table-min-height"],[3,"loading","emptyListText","attributes","selection","cachedSubject",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[1,"service-search-select",3,"disableAutoSelect","services","multiple","theme","serviceSelected"],[3,"loading","emptyListText","attributes","selection","cachedSubject"],[3,"configServicesIds","displayedColumns","configServices","loading","title","destinationEmitter"],[3,"disableRouting","disableSelf"],[3,"innerHTML"],[4,"ngIf"],[3,"disabled"],["svgIcon","perun-hosts",1,"me-2"],[3,"loading","disableRouting","displayedColumns","hosts",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["svgIcon","perun-service",1,"me-2"],[3,"loading","disableRouting","displayedColumns","services"],[3,"disabled","opened"],[3,"loading","displayedColumns","attributes","emptyListText"],[3,"expanded","disabled","expandedChange"],["svgIcon","perun-service_destination",1,"me-2"],[3,"loading","destinations","displayedColumns","services",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["svgIcon","perun-manager",1,"me-2"],[3,"complementaryObject","configMode","disableRouting","availableRoles","complementaryObjectType","displayedGroupColumns","displayedUserColumns"],[3,"loading","disableRouting","displayedColumns","hosts"],[3,"loading","destinations","displayedColumns","services"],["mat-stroked-button","",1,"ms-auto","me-2",3,"click"],["color","accent","mat-flat-button","",3,"click"],["color","accent","mat-flat-button","",1,"me-2",3,"click"]],template:function(t,o){if(t&1&&(l(0,"div",0)(1,"div",1),u(2),p(3,"translate"),s(),l(4,"mat-stepper",2,3),_("selectionChange",function(A){return o.navigationStep(A)}),v(6,Ca,1,0,"ng-template",null,4,U),l(8,"mat-step"),v(9,ya,2,3,"ng-template",5)(10,ba,1,1,"ng-template",6),s(),l(11,"mat-step",7),v(12,Ta,2,3,"ng-template",5)(13,Ea,9,15,"ng-template",6),s(),l(14,"mat-step",8),v(15,Fa,2,3,"ng-template",5)(16,Da,16,17,"ng-template",6),s(),l(17,"mat-step",9),v(18,wa,2,3,"ng-template",5)(19,Ma,1,6,"ng-template",6),s(),l(20,"mat-step"),v(21,Oa,2,3,"ng-template",5)(22,Na,1,2,"ng-template",6),s(),l(23,"mat-step"),v(24,ka,2,3,"ng-template",5)(25,za,4,4,"ng-template",6),s()(),l(26,"div",10)(27,"button",11),_("click",function(){return o.onCancel()}),u(28),p(29,"translate"),s(),v(30,$a,3,3,"button",12)(31,Xa,3,7,"button",13)(32,Ka,3,3,"button",14),s()()),t&2){let h=R(5);r(2),g(" ",m(3,11,"FACILITY_CONFIGURATION.TITLE")," "),r(2),c("linear",!0),r(7),c("stepControl",o.serviceControl),r(3),c("editable",o.selection.selected.length!==0)("stepControl",o.attributesControl),r(3),c("editable",o.selection.selected.length!==0||o.destinations.length!==0)("optional",o.destinations.length===0),r(11),g(" ",m(29,13,"FACILITY_CONFIGURATION.CANCEL")," "),r(2),c("ngIf",h!==void 0&&h.selectedIndex!==0),r(),c("ngIf",h!==void 0&&h.selectedIndex!==h.steps.length-1),r(),c("ngIf",h!==void 0&&h.selectedIndex===h.steps.length-1)}},dependencies:[F,le,N,Vt,Nt,Bt,kt,wt,xt,Rt,Dt,Ve,Pe,je,Ri,we,H,ci,W,di,Y,Ye,We,ze,E],styles:[".icon-scale[_ngcontent-%COMP%]{transform:scale(1.7);margin-left:.5rem;margin-top:-.6rem;margin-right:.9rem}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:baseline}.package-search-select[_ngcontent-%COMP%]{width:650px}.service-search-select[_ngcontent-%COMP%]{width:400px}.filter[_ngcontent-%COMP%]{width:350px;margin-right:20px}.actions[_ngcontent-%COMP%]{background-color:#fff;display:flex;padding:20px}.cursor-default[_ngcontent-%COMP%]{cursor:default}"]});let i=a;return i})();var et=(()=>{let a=class a{constructor(e){this.router=e}canActivate(e){return e.parent.params.facilityId===sessionStorage.getItem("newFacilityId")?!0:(this.router.navigate(["/home"],{queryParamsHandling:"merge"}),!1)}canDeactivate(e){return e.canDeactivate()}};a.\u0275fac=function(t){return new(t||a)(nt(de))},a.\u0275prov=it({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();function qa(i,a){if(i&1){let n=y();l(0,"button",8),_("click",function(){S(n);let t=f();return C(t.add())}),u(1),p(2,"translate"),s()}i&2&&(r(),g(" ",m(2,1,"FACILITY_DETAIL.SETTINGS.BANS.ADD"),`
`))}function Qa(i,a){if(i&1){let n=y();l(0,"button",9),_("click",function(){S(n);let t=f();return C(t.remove())}),u(1),p(2,"translate"),s()}if(i&2){let n=f();c("disabled",n.loading||n.selection.selected.length===0),r(),g(" ",m(2,2,"FACILITY_DETAIL.SETTINGS.BANS.REMOVE"),`
`)}}function Ja(i,a){if(i&1){let n=y();l(0,"perun-web-apps-ban-on-entity-list",10),_("updateBan",function(t){S(n);let o=f();return C(o.update(t))}),s()}if(i&2){let n=f();c("loading",n.loading)("bans",n.bans)("selection",n.selection)("cachedSubject",n.cachedSubject)("displayedColumns",n.displayedColumns)("filter",n.filter)("updatePolicy","updateBan_BanOnFacility_policy")}}function Za(i,a){i&1&&I(0,"perun-web-apps-loading-table")}var dn=(()=>{let a=class a{constructor(e,t,o,h,A,k,P){this.facilityService=e,this.entityService=t,this.authResolver=o,this.dialog=h,this.notificator=A,this.store=k,this.userName=P,this.loading=!1,this.bans=[],this.removeAuth=!1,this.filter="",this.selection=new j(!1,[],!0,(V,K)=>V.ban.id===K.ban.id),this.cachedSubject=new G(!0),this.attrNames=[Je.MEMBER_DEF_MAIL,Je.USER_DEF_PREFERRED_MAIL].concat(this.store.getLoginAttributeNames()),this.displayedColumns=["select","banId","subjectId","subjectName","description","expiration","edit"]}ngOnInit(){this.loading=!0,this.facility=this.entityService.getEntity(),this.addAuth=this.authResolver.isAuthorized("setBan_BanOnFacility_policy",[this.facility]),this.removeAuth=this.authResolver.isAuthorized("removeBan_int_policy",[this.facility]),this.refresh()}refresh(){this.loading=!0,this.facilityService.getEnrichedBansForFacility(this.facility.id,this.attrNames).subscribe({next:e=>{this.bans=e,this.selection.clear(),this.cachedSubject.next(!0),this.loading=!1},error:()=>this.loading=!1})}add(){let e=L();e.width="850px",e.data={entityId:this.facility.id,theme:"facility-theme",bans:this.bans.map(o=>o.ban)},this.dialog.open(Gi,e).afterClosed().subscribe(o=>{o&&this.refresh()})}remove(){let e=L();e.width="550px",e.data={theme:"facility-theme",title:"DIALOGS.REMOVE_BAN.TITLE",description:"DIALOGS.REMOVE_BAN.DESCRIPTION",items:[this.userName.transform(this.selection.selected[0].user)],type:"remove",showAsk:!0},this.dialog.open(ni,e).afterClosed().subscribe(o=>{o&&(this.loading=!0,this.facilityService.removeFacilityBanById(this.selection.selected[0].ban.id).subscribe(()=>{this.notificator.showSuccess("DIALOGS.REMOVE_BAN.SUCCESS"),this.refresh()}))})}update(e){let t=L();t.width="600px",t.data={ban:e.ban,theme:"facility-theme"},this.dialog.open(Ui,t).afterClosed().subscribe(h=>{h&&this.refresh()})}applyFilter(e){this.filter=e,this.refresh()}};a.\u0275fac=function(t){return new(t||a)(d(D),d(x),d(w),d(B),d(J),d(Ct),d(Z))},a.\u0275cmp=T({type:a,selectors:[["app-facility-settings-bans"]],features:[pt([Z])],decls:11,vars:8,consts:[[1,"page-subtitle"],[3,"click"],["class","me-2 action-button","color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","me-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],[1,"mt-2","search-field",3,"placeholder","filter"],[1,"position-relative","table-min-height"],[3,"loading","bans","selection","cachedSubject","displayedColumns","filter","updatePolicy","updateBan",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["spinner",""],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],[3,"loading","bans","selection","cachedSubject","displayedColumns","filter","updatePolicy","updateBan"]],template:function(t,o){if(t&1&&(l(0,"h1",0),u(1),p(2,"translate"),s(),l(3,"perun-web-apps-refresh-button",1),_("click",function(){return o.refresh()}),s(),v(4,qa,3,3,"button",2)(5,Qa,3,4,"button",3),l(6,"perun-web-apps-debounce-filter",4),_("filter",function(A){return o.applyFilter(A)}),s(),l(7,"div",5),v(8,Ja,1,7,"perun-web-apps-ban-on-entity-list",6),s(),v(9,Za,1,0,"ng-template",null,7,U)),t&2){let h=R(10);r(),g(" ",m(2,6,"FACILITY_DETAIL.SETTINGS.BANS.TITLE"),`
`),r(3),c("ngIf",o.addAuth),r(),c("ngIf",o.removeAuth),r(),c("placeholder","FACILITY_DETAIL.SETTINGS.BANS.FILTER"),r(2),c("perunWebAppsLoader",o.loading)("perunWebAppsLoaderIndicator",h)}},dependencies:[F,N,H,ee,W,hi,Y,E]});let i=a;return i})();var eo=[{path:"",component:zi,canActivate:[Be]},{path:":facilityId",component:Ji,canActivateChild:[Be],children:[{path:"",component:Zi,data:{animation:"FacilityOverviewPage"}},{path:"attributes",component:nn,data:{animation:"FacilityAttributesPage"}},{path:"resources",component:$i,data:{animation:"FacilityResourcesPage"}},{path:"allowed-users",component:Ki,data:{animation:"FacilityAllowedUsersPage"}},{path:"allowed-groups",component:Xi,data:{animation:"FacilityAllowedGroupsPage"}},{path:"services-status",component:rn,data:{animation:"FacilityServiceStatusPage"}},{path:"services-status/:taskId",component:sn,data:{animation:"FacilityTaskResultsPage"}},{path:"service-config",component:an,data:{animation:"FacilityServiceConfigPage"}},{path:"services-destinations",component:We,data:{animation:"FacilityServicesDestinationsPage"}},{path:"hosts",component:ze,data:{animation:"FacilityHostsPage"}},{path:"hosts/:hostId",component:on,data:{animation:"FacilityHostsDetailPage"}},{path:"settings",component:en,children:[{path:"",component:tn,data:{animation:"FacilitySettingsOverviewPage"}},{path:"managers",component:Ye,data:{animation:"FacilitySettingsManagersPage"}},{path:"bans",component:dn,data:{animation:"FacilitySettingsBansPage"}}]},{path:"configuration",component:mn,canActivate:[et],canDeactivate:[et]}]},{path:":facilityId/resources/:resourceId",component:yi,canActivateChild:[Be],children:[{path:"",component:bi,data:{animation:"ResourceOverviewPage"}},{path:"attributes",component:Fi,data:{animation:"ResourceAttributesPage"}},{path:"groups",component:Ti,data:{animation:"ResourceGroupsComponent"}},{path:"services",component:Di,data:{animation:"ResourceAssignedServicesComponent"}},{path:"members",component:wi,data:{animation:"ResourceAssignedMembersComponent"}},{path:"tags",component:Li,data:{animation:"ResourceTagsComponent"}},{path:"settings",component:Ai,children:[{path:"",component:Ei,data:{animation:"ResourceSettingsOverviewPage"}},{path:"managers",component:xi,data:{animation:"ResourceSettingsManagersPage"}},{path:"bans",component:Mi,data:{animation:"ResourceSettingsBansPage"}}]}]}],un=(()=>{let a=class a{};a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=Ae({type:a}),a.\u0275inj=Te({imports:[qe.forChild(eo),qe]});let i=a;return i})();var xp=(()=>{let a=class a{};a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=Ae({type:a}),a.\u0275inj=Te({providers:[Z],imports:[ht,un,Yi,Kt,ei,gi,Zt,Hi,Wi]});let i=a;return i})();export{xp as FacilitiesModule};
