import{e as ye}from"./chunk-HMVCITBB.js";import{Aa as x,Ag as Ee,Ba as M,Ca as S,Cc as re,Da as C,Dc as le,Ha as R,Ia as L,Ja as O,Na as u,Oa as k,Of as ge,Pa as _,Pc as w,Qc as se,Rc as ce,S as b,Sd as me,Sf as xe,T as D,V as H,W as F,Wg as Te,Xa as Q,_a as A,_e,aa as n,cb as c,db as p,ea as m,eb as V,fa as E,fe as ue,ge as he,he as Se,ia as j,id as pe,jd as de,ka as f,lc as $,mc as G,nc as B,oa as z,oc as W,pc as q,pf as fe,pi as U,qa as T,qb as X,qc as Y,qf as Ce,ra as y,rc as J,rf as P,sc as K,sf as N,tb as v,tc as Z,uc as ee,va as d,vc as te,wa as l,wc as ie,wg as be,xa as s,xc as ae,ya as I,yc as oe,za as g,zc as ne,zg as De}from"./chunk-353QRQI4.js";var we=(()=>{class e{transform(t){return t.substring(40)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275pipe=j({name:"extSourceType",type:e,pure:!0})}}return e})();var Me=e=>({all:e}),Re=e=>({name:e});function Le(e,r){if(e&1){let t=M();l(0,"th",15)(1,"mat-checkbox",16),c(2,"masterCheckboxLabel"),c(3,"translate"),S("change",function(i){b(t);let o=C(2);return D(i?o.masterToggle():null)}),s()()}if(e&2){let t=C(),a=C();n(),d("aria-label",p(3,5,p(2,3,t.all)))("checked",a.selection.hasValue()&&t.all)("indeterminate",a.selection.hasValue()&&!t.all)}}function Oe(e,r){if(e&1){let t=M();l(0,"td",17)(1,"mat-checkbox",18),c(2,"checkboxLabel"),c(3,"translate"),S("change",function(i){let o=b(t).$implicit,h=C(2);return D(i?h.toggleRow(o):null)})("click",function(i){return b(t),D(i.stopPropagation())}),s()()}if(e&2){let t=r.$implicit,a=C(2);n(),d("aria-label",V(3,4,p(2,2,a.selection.isSelected(t)),A(7,Re,t.name)))("checked",a.selection.isSelected(t))}}function ke(e,r){e&1&&(g(0,3),f(1,Le,4,7,"th",13)(2,Oe,4,9,"td",14),x())}function Ae(e,r){e&1&&(l(0,"th",19),u(1),c(2,"translate"),s()),e&2&&(n(),_(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.ID")," "))}function Ve(e,r){if(e&1&&(l(0,"td",20),u(1),s()),e&2){let t=r.$implicit;n(),k(t.id)}}function Be(e,r){e&1&&(l(0,"th",19),u(1),c(2,"translate"),s()),e&2&&(n(),_(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.NAME")," "))}function Pe(e,r){if(e&1&&(l(0,"td",21),c(1,"lowercase"),u(2),s()),e&2){let t=r.$implicit;z("data-cy",Q("",p(1,3,t.name),"-name-td")),n(2),_(" ",t.name," ")}}function Ne(e,r){e&1&&(l(0,"th",19),u(1),c(2,"translate"),s()),e&2&&(n(),_(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.TYPE")," "))}function Ue(e,r){if(e&1&&(l(0,"td",21),u(1),c(2,"extSourceType"),s()),e&2){let t=r.$implicit;n(),k(p(2,1,t.type))}}function He(e,r){e&1&&I(0,"tr",22)}function Fe(e,r){e&1&&I(0,"tr",23)}function je(e,r){e&1&&(l(0,"perun-web-apps-alert",12),u(1),c(2,"translate"),s()),e&2&&(n(),_(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.NO_EXT_SOURCES")," "))}function ze(e,r){e&1&&(l(0,"perun-web-apps-alert",12),u(1),c(2,"translate"),s()),e&2&&(n(),_(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.NO_FILTER_RESULTS")," "))}var mt=(()=>{class e{constructor(t,a,i){this.authResolver=t,this.tableCheckbox=a,this.destroyRef=i,this.selection=new B,this.filterValue="",this.displayedColumns=["select","id","name","type"],this.exporting=!1,this.pageSizeOptions=_e}set matSort(t){this.sort=t,this.setDataSource()}static getDataForColumn(t,a){switch(a){case"id":return t.id.toString();case"type":return t.type.substring(40);case"name":return t.name;default:return""}}ngOnInit(){this.selection&&(this.cachedSelection=new B(this.selection.isMultipleSelection(),[],!0,this.selection.compareWith),this.cachedSubject?.pipe(Te(this.destroyRef)).subscribe(t=>{t&&this.cachedSelection.clear()}))}ngAfterViewInit(){this.setDataSource()}ngOnChanges(){localStorage.getItem("showIds")!=="true"&&(this.displayedColumns=this.displayedColumns.filter(t=>t!=="id")),this.dataSource=new ne(this.extSources),this.setDataSource()}exportAllData(t){N(P(this.dataSource.filteredData,this.displayedColumns,e.getDataForColumn),t)}exportDisplayedData(t){let a=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,i=a+this.dataSource.paginator.pageSize;N(P(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(a,i),this.displayedColumns,e.getDataForColumn),t)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(t,a)=>Ce(t,a,this.displayedColumns,e.getDataForColumn),this.dataSource.sortData=(t,a)=>fe(t,a,e.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.cachedSelection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}toggleRow(t){this.selection.toggle(t),this.cachedSelection.toggle(t)}pageChanged(){this.cachedSelection&&this.tableCheckbox.selectCachedDataOnPage(this.dataSource,this.selection,this.cachedSelection,this.selection.compareWith)}static{this.\u0275fac=function(a){return new(a||e)(m(ue),m(xe),m(H))}}static{this.\u0275cmp=E({type:e,selectors:[["app-ext-sources-list"]],viewQuery:function(a,i){if(a&1&&(R(U,7),R(w,7)),a&2){let o;L(o=O())&&(i.child=o.first),L(o=O())&&(i.matSort=o.first)}},inputs:{extSources:"extSources",selection:"selection",cachedSubject:"cachedSubject",filterValue:"filterValue",displayedColumns:"displayedColumns",tableId:"tableId",loading:"loading"},features:[F],decls:18,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"exportDisplayedData","exportAllData","pageChanged","pageSizeOptions","dataLength","tableId"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"matSortChange","dataSource"],["matColumnDef","select"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"change","aria-label","checked","indeterminate"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"change","click","aria-label","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"]],template:function(a,i){if(a&1&&(l(0,"div",0)(1,"perun-web-apps-table-wrapper",1),S("exportDisplayedData",function(h){return i.exportDisplayedData(h)})("exportAllData",function(h){return i.exportAllData(h)})("pageChanged",function(){return i.pageChanged()}),l(2,"table",2),S("matSortChange",function(){return i.pageChanged()}),T(3,ke,3,0,"ng-container",3),c(4,"isAllSelected"),g(5,4),f(6,Ae,3,3,"th",5)(7,Ve,2,1,"td",6),x(),g(8,7),f(9,Be,3,3,"th",5)(10,Pe,3,5,"td",8),x(),g(11,9),f(12,Ne,3,3,"th",5)(13,Ue,3,3,"td",8),x(),f(14,He,1,0,"tr",10)(15,Fe,1,0,"tr",11),s()()(),T(16,je,3,3,"perun-web-apps-alert",12),T(17,ze,3,3,"perun-web-apps-alert",12)),a&2){let o;d("hidden",i.extSources.length===0||i.dataSource.filteredData.length===0),n(),d("pageSizeOptions",i.pageSizeOptions)("dataLength",i.dataSource.filteredData.length)("tableId",i.tableId),n(),d("dataSource",i.dataSource),n(),y((o=A(13,Me,V(4,10,i.dataSource,i.selection.selected.length)))?3:-1,o),n(11),d("matHeaderRowDef",i.displayedColumns),n(),d("matRowDefColumns",i.displayedColumns),n(),y(!i.loading&&i.extSources.length===0?16:-1),n(),y(i.dataSource.filteredData.length===0&&i.extSources.length!==0?17:-1)}},dependencies:[v,G,$,de,pe,U,oe,W,Y,ee,J,q,te,K,Z,ie,ae,ce,w,se,le,X,be,re,De,Ee,we],encapsulation:2})}}return e})();var Tt=(()=>{class e{constructor(t,a,i,o){this.data=t,this.dialogRef=a,this.voService=i,this.notificator=o,this.loading=!1}update(t){this.loading=!0,this.voService.updateVoBan({banOnVo:{id:this.data.ban.id,beanName:"BanOnVo",voId:this.data.ban.voId,memberId:this.data.ban.memberId,description:t.description,validityTo:t.validity}}).subscribe({next:()=>{this.notificator.showSuccess("DIALOGS.UPDATE_BAN.SUCCESS"),this.dialogRef.close(!0)},error:()=>{this.loading=!1}})}cancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(a){return new(a||e)(m(Se),m(he),m(me),m(ge))}}static{this.\u0275cmp=E({type:e,selectors:[["app-update-vo-ban-dialog"]],decls:1,vars:3,consts:[[3,"cancelled","update","ban","theme","loading"]],template:function(a,i){a&1&&(l(0,"app-update-ban-dialog",0),S("cancelled",function(){return i.cancel()})("update",function(h){return i.update(h)}),s()),a&2&&d("ban",i.data.ban)("theme","vo-theme")("loading",i.loading)},dependencies:[v,ye],encapsulation:2})}}return e})();export{mt as a,Tt as b};
