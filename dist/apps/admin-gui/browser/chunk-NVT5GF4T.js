import{Aa as S,Ag as Oe,Ba as M,Bg as Ne,Ca as D,Cc as ue,Da as f,Dc as he,Gc as Ce,Ha as k,Hc as Se,Ia as A,Ja as O,Kc as fe,La as J,Lb as Y,Lc as _e,Mc as ge,N as W,Na as d,Oa as R,Oc as be,Pa as h,Pc as y,Q as w,Qc as ve,Rc as De,S as x,T as E,Tf as ke,V as Q,W as U,Wa as N,Xa as V,Yg as j,_a as T,_e as we,_g as Ve,aa as r,cb as c,d as $,db as p,ea as v,eb as P,fa as G,fe as ye,gd as Te,hd as xe,id as Ee,jd as Ie,ka as u,la as q,lc as Z,mc as ee,nc as B,oa as L,oc as te,pc as ie,pf as Le,pi as z,qa as _,qb as K,qc as ae,qf as Me,ra as g,rc as ne,rf as H,sc as oe,sf as F,tb as X,tc as re,uc as le,va as m,vc as se,wa as l,wc as ce,wd as Re,xa as s,xc as pe,xg as Ae,ya as I,yc as de,za as C,zc as me}from"./chunk-ZTJUWZ37.js";var dt=(()=>{class e{constructor(t,i){this.router=t,this.routeReuseStrategy=i;let a=i;this.refreshCachedData=new $(""),t.events.subscribe(o=>{o instanceof Ce&&(o.navigationTrigger==="popstate"?a.setLastNavigationType("back"):a.setLastNavigationType("direct")),o instanceof Se&&a.isRouteCached(o.url)&&this.refreshCachedData.next(a.getActiveCachedComponentId())})}init(){}refreshComponentCachedData(){return this.refreshCachedData.asObservable()}static{this.\u0275fac=function(i){return new(i||e)(w(_e),w(fe))}}static{this.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Fe=e=>({all:e}),je=e=>({name:e}),Pe=e=>["/admin/services",e];function ze(e,n){if(e&1){let t=M();l(0,"th",18)(1,"mat-checkbox",19),c(2,"masterCheckboxLabel"),c(3,"translate"),D("change",function(a){x(t);let o=f(2);return E(a?o.masterToggle():null)}),s()()}if(e&2){let t=f(),i=f();r(),m("aria-label",p(3,5,p(2,3,t.all)))("checked",i.selection.hasValue()&&t.all)("indeterminate",i.selection.hasValue()&&!t.all)}}function $e(e,n){if(e&1){let t=M();l(0,"td",20)(1,"mat-checkbox",21),c(2,"lowercase"),c(3,"checkboxLabel"),c(4,"translate"),D("change",function(a){let o=x(t).$implicit,b=f(2);return E(a?b.toggleRow(o):null)})("click",function(a){return x(t),E(a.stopPropagation())}),s()()}if(e&2){let t=n.$implicit,i=f(2);r(),L("data-cy",V("",p(2,4,t.name),"-checkbox")),m("aria-label",P(4,8,p(3,6,i.selection.isSelected(t)),T(11,je,t.name)))("checked",i.selection.isSelected(t))}}function We(e,n){e&1&&(C(0,3),u(1,ze,4,7,"th",16)(2,$e,5,13,"td",17),S())}function Qe(e,n){e&1&&(l(0,"th",22),d(1),c(2,"translate"),s()),e&2&&(r(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.ID")," "))}function Ue(e,n){if(e&1&&(l(0,"td",23),d(1),s()),e&2){let t=n.$implicit;r(),R(t.id)}}function Ge(e,n){e&1&&(l(0,"th",22),d(1),c(2,"translate"),s()),e&2&&(r(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.NAME")," "))}function qe(e,n){if(e&1&&(l(0,"td",24),c(1,"lowercase"),d(2),s()),e&2){let t=n.$implicit;L("data-cy",V("",p(1,3,t.name),"-name-td")),r(2),h(" ",t.name," ")}}function Je(e,n){e&1&&I(0,"th",25)}function Ke(e,n){e&1&&(l(0,"mat-icon",26),c(1,"translate"),d(2," check_circle_outline "),s()),e&2&&m("matTooltip",N(p(1,2,"SHARED.COMPONENTS.SERVICES_LIST.ENABLED")))}function Xe(e,n){e&1&&(l(0,"mat-icon",27),c(1,"translate"),d(2," block "),s()),e&2&&m("matTooltip",N(p(1,2,"SHARED.COMPONENTS.SERVICES_LIST.DISABLED")))}function Ye(e,n){if(e&1&&(l(0,"td",24),_(1,Ke,3,4,"mat-icon",26),_(2,Xe,3,4,"mat-icon",27),s()),e&2){let t=n.$implicit;r(),g(t.enabled?1:-1),r(),g(t.enabled?-1:2)}}function Ze(e,n){e&1&&(l(0,"th",25),d(1),c(2,"translate"),s()),e&2&&(r(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.SCRIPT")," "))}function et(e,n){if(e&1&&(l(0,"td",24),d(1),s()),e&2){let t=n.$implicit;r(),R(t.script)}}function tt(e,n){e&1&&(l(0,"th",22),d(1),c(2,"translate"),s()),e&2&&(r(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.DESCRIPTION")," "))}function it(e,n){if(e&1&&(l(0,"td",24),d(1),s()),e&2){let t=n.$implicit;r(),R(t.description)}}function at(e,n){e&1&&I(0,"tr",28)}function nt(e,n){if(e&1&&I(0,"tr",29),e&2){let t=n.$implicit,i=f();J("cursor-pointer",!i.disableRouting)("disable-outline",i.disableRouting),m("perunWebAppsMiddleClickRouterLink",i.disableRouting?null:T(6,Pe,t.id))("routerLink",i.disableRouting?null:T(8,Pe,t.id))}}function ot(e,n){e&1&&(l(0,"perun-web-apps-alert",15),d(1),c(2,"translate"),s()),e&2&&(r(),h(" ",p(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT")," "))}function rt(e,n){e&1&&(l(0,"perun-web-apps-alert",15),d(1),c(2,"translate"),s()),e&2&&(r(),h(" ",p(2,1,"SHARED.COMPONENTS.SERVICES_LIST.NO_SERVICES_WARNING")," "))}var qt=(()=>{class e{constructor(t,i,a,o){this.authResolver=t,this.tableCheckbox=i,this.destroyRef=a,this.tableConfigService=o,this.services=[],this.filterValue="",this.selection=new B(!0,[]),this.disableRouting=!1,this.selectionChanged=new q,this.pageSizeOptions=we,this.displayedColumns=["select","id","name","enabled","script","description"],this.unfilteredColumns=this.displayedColumns}set displayColumns(t){this.unfilteredColumns=t,localStorage.getItem("showIds")!=="true"&&(t=t.filter(i=>i!=="id")),this.displayedColumns=t}set matSort(t){this.sort=t,this.setDataSource()}static getDataForColumn(t,i){switch(i){case"id":return t.id.toString();case"name":return t.name;case"enabled":return t.enabled?"true":"false";case"script":return t.script;case"description":return t.description;default:return""}}ngOnInit(){this.selection&&(this.cachedSelection=new B(this.selection.isMultipleSelection(),[],!0,this.selection.compareWith),this.cachedSubject?.pipe(j(this.destroyRef)).subscribe(t=>{t&&this.cachedSelection.clear()})),this.watchForIdColumnChanges()}ngOnChanges(){localStorage.getItem("showIds")!=="true"&&(this.displayedColumns=this.displayedColumns.filter(t=>t!=="id")),this.dataSource=new me(this.services),this.setDataSource(),this.selection.changed.subscribe(()=>{this.selectionChanged.emit()})}exportAllData(t){F(H(this.dataSource.filteredData,this.displayedColumns,e.getDataForColumn),t)}exportDisplayedData(t){let i=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=i+this.dataSource.paginator.pageSize;F(H(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(i,a),this.displayedColumns,e.getDataForColumn),t)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(t,i)=>Me(t,i,this.displayedColumns,e.getDataForColumn),this.dataSource.sortData=(t,i)=>Le(t,i,e.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}toggleRow(t){this.selection.toggle(t),this.cachedSelection.toggle(t)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.cachedSelection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}ngAfterViewInit(){this.dataSource.paginator=this.child.paginator}pageChanged(){this.cachedSelection&&this.tableCheckbox.selectCachedDataOnPage(this.dataSource,this.selection,this.cachedSelection,this.selection.compareWith)}watchForIdColumnChanges(){this.tableConfigService.showIdsChanged.pipe(j(this.destroyRef)).subscribe(t=>{t?this.displayedColumns=this.unfilteredColumns:this.displayedColumns=this.unfilteredColumns.filter(i=>i!=="id")}),localStorage.getItem("showIds")!=="true"&&(this.displayedColumns=this.displayedColumns.filter(t=>t!=="id"))}static{this.\u0275fac=function(i){return new(i||e)(v(ye),v(ke),v(Q),v(Ve))}}static{this.\u0275cmp=G({type:e,selectors:[["app-services-list"]],viewQuery:function(i,a){if(i&1&&(k(z,7),k(y,7)),i&2){let o;A(o=O())&&(a.child=o.first),A(o=O())&&(a.matSort=o.first)}},inputs:{services:"services",filterValue:"filterValue",tableId:"tableId",selection:"selection",cachedSubject:"cachedSubject",disableRouting:"disableRouting",loading:"loading",displayColumns:"displayColumns"},outputs:{selectionChanged:"selectionChanged"},features:[U],decls:24,vars:15,consts:[[1,"card","mt-3",3,"hidden"],[3,"exportDisplayedData","exportAllData","pageChanged","pageSizeOptions","dataLength","tableId"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"matSortChange","dataSource"],["matColumnDef","select"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","enabled"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","script"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","disable-outline","perunWebAppsMiddleClickRouterLink","routerLink",4,"matRowDef","matRowDefColumns"],["alert_type","warn"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"change","aria-label","checked","indeterminate"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"change","click","aria-label","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-cell",""],[1,"align-bottom","green",3,"matTooltip"],[1,"align-bottom","red",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"perunWebAppsMiddleClickRouterLink","routerLink"]],template:function(i,a){if(i&1&&(l(0,"div",0)(1,"perun-web-apps-table-wrapper",1),D("exportDisplayedData",function(b){return a.exportDisplayedData(b)})("exportAllData",function(b){return a.exportAllData(b)})("pageChanged",function(){return a.pageChanged()}),l(2,"table",2),D("matSortChange",function(){return a.pageSizeOptions}),_(3,We,3,0,"ng-container",3),c(4,"isAllSelected"),C(5,4),u(6,Qe,3,3,"th",5)(7,Ue,2,1,"td",6),S(),C(8,7),u(9,Ge,3,3,"th",5)(10,qe,3,5,"td",8),S(),C(11,9),u(12,Je,1,0,"th",10)(13,Ye,3,2,"td",8),S(),C(14,11),u(15,Ze,3,3,"th",10)(16,et,2,1,"td",8),S(),C(17,12),u(18,tt,3,3,"th",5)(19,it,2,1,"td",8),S(),u(20,at,1,0,"tr",13)(21,nt,1,10,"tr",14),s()()(),_(22,ot,3,3,"perun-web-apps-alert",15),_(23,rt,3,3,"perun-web-apps-alert",15)),i&2){let o;m("hidden",a.services===void 0||a.services.length===0||a.dataSource.filteredData.length===0),r(),m("pageSizeOptions",a.pageSizeOptions)("dataLength",a.dataSource.filteredData.length)("tableId",a.tableId),r(),m("dataSource",a.dataSource),r(),g((o=T(13,Fe,P(4,10,a.dataSource,a.selection.selected.length)))?3:-1,o),r(17),m("matHeaderRowDef",a.displayedColumns),r(),m("matRowDefColumns",a.displayedColumns),r(),g(a.dataSource.filteredData.length===0&&a.services!==void 0&&a.services.length!==0?22:-1),r(),g(!a.loading&&(a.services===void 0||a.services.length===0)?23:-1)}},dependencies:[X,xe,Te,ee,Z,Ie,Ee,Re,z,be,ge,de,te,ae,le,ne,ie,se,oe,re,ce,pe,De,y,ve,he,Y,K,Ae,ue,Oe,Ne],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.disable-outline[_ngcontent-%COMP%]{outline:none!important}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:red}"]})}}return e})();export{dt as a,qt as b};
