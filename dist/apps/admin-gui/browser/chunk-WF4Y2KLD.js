import{e as we}from"./chunk-BJPWMLOV.js";import{$a as V,$e as Ce,$g as ve,Aa as g,Ac as le,Ba as x,Bg as Te,Ca as R,Cg as ye,Da as S,Dc as se,Ea as C,Ec as ce,Ia as L,Ja as O,Ka as k,Oa as u,Pa as A,Qa as f,Qc as w,Qf as be,Rc as pe,S as b,Sc as de,T as D,Td as he,Uf as De,V as j,W as z,Ya as $,Zg as F,aa as n,ah as H,db as c,eb as p,fb as P,ga as d,ge as Se,ha as E,he as fe,ie as _e,jd as me,ka as Q,kd as ue,ma as _,mc as W,nc as q,oa as I,oc as B,pa as X,pc as Y,qc as J,qf as ge,ra as T,rb as G,rc as K,rf as xe,sa as y,sc as Z,sf as N,tc as ee,tf as U,ub as v,uc as te,vc as ie,wa as m,wc as ae,xa as l,xc as oe,ya as s,yc as ne,yg as Ee,za as M,zc as re}from"./chunk-6NXECROM.js";var Me=(()=>{class t{transform(e){return e.substring(40)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=Q({name:"extSourceType",type:t,pure:!0})}}return t})();var Le=t=>({all:t}),Oe=t=>({name:t});function ke(t,r){if(t&1){let e=R();l(0,"th",15)(1,"mat-checkbox",16),c(2,"masterCheckboxLabel"),c(3,"translate"),S("change",function(a){b(e);let o=C(2);return D(a?o.masterToggle():null)}),s()()}if(t&2){let e=C(),i=C();n(),I("aria-label",p(3,5,p(2,3,e.all))),m("checked",i.selection.hasValue()&&e.all)("indeterminate",i.selection.hasValue()&&!e.all)}}function Ae(t,r){if(t&1){let e=R();l(0,"td",17)(1,"mat-checkbox",18),c(2,"checkboxLabel"),c(3,"translate"),S("change",function(a){let o=b(e).$implicit,h=C(2);return D(a?h.toggleRow(o):null)})("click",function(a){return b(e),D(a.stopPropagation())}),s()()}if(t&2){let e=r.$implicit,i=C(2);n(),I("aria-label",P(3,4,p(2,2,i.selection.isSelected(e)),V(7,Oe,e.name))),m("checked",i.selection.isSelected(e))}}function Ve(t,r){t&1&&(g(0,3),_(1,ke,4,7,"th",13)(2,Ae,4,9,"td",14),x())}function Pe(t,r){t&1&&(l(0,"th",19),u(1),c(2,"translate"),s()),t&2&&(n(),f(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.ID")," "))}function Be(t,r){if(t&1&&(l(0,"td",20),u(1),s()),t&2){let e=r.$implicit;n(),A(e.id)}}function Ne(t,r){t&1&&(l(0,"th",19),u(1),c(2,"translate"),s()),t&2&&(n(),f(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.NAME")," "))}function Ue(t,r){if(t&1&&(l(0,"td",21),c(1,"lowercase"),u(2),s()),t&2){let e=r.$implicit;X("data-cy",$("",p(1,3,e.name),"-name-td")),n(2),f(" ",e.name," ")}}function Fe(t,r){t&1&&(l(0,"th",19),u(1),c(2,"translate"),s()),t&2&&(n(),f(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.TYPE")," "))}function He(t,r){if(t&1&&(l(0,"td",21),u(1),c(2,"extSourceType"),s()),t&2){let e=r.$implicit;n(),A(p(2,1,e.type))}}function je(t,r){t&1&&M(0,"tr",22)}function ze(t,r){t&1&&M(0,"tr",23)}function Qe(t,r){t&1&&(l(0,"perun-web-apps-alert",12),u(1),c(2,"translate"),s()),t&2&&(n(),f(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.NO_EXT_SOURCES")," "))}function Xe(t,r){t&1&&(l(0,"perun-web-apps-alert",12),u(1),c(2,"translate"),s()),t&2&&(n(),f(" ",p(2,1,"SHARED.COMPONENTS.EXT_SOURCES_LIST.NO_FILTER_RESULTS")," "))}var _t=(()=>{class t{constructor(e,i,a,o){this.authResolver=e,this.tableCheckbox=i,this.tableConfigService=a,this.destroyRef=o,this.selection=new B,this.filterValue="",this.exporting=!1,this.pageSizeOptions=Ce,this.displayedColumns=["select","id","name","type"],this.unfilteredColumns=this.displayedColumns,this.tableId="app-ext-sources-list"}set displayColumns(e){this.unfilteredColumns=e,localStorage.getItem("showIds")!=="true"&&(e=e.filter(i=>i!=="id")),this.displayedColumns=e}set matSort(e){this.sort=e,this.setDataSource()}static getDataForColumn(e,i){switch(i){case"id":return e.id.toString();case"type":return e.type.substring(40);case"name":return e.name;default:return""}}ngOnInit(){this.selection&&(this.cachedSelection=new B(this.selection.isMultipleSelection(),[],!0,this.selection.compareWith),this.cachedSubject?.pipe(F(this.destroyRef)).subscribe(e=>{e&&this.cachedSelection.clear()})),this.watchForIdColumnChanges()}ngAfterViewInit(){this.setDataSource()}ngOnChanges(){this.dataSource=new le(this.extSources),this.setDataSource()}exportAllData(e){U(N(this.dataSource.filteredData,this.displayedColumns,t.getDataForColumn),e)}exportDisplayedData(e){let i=this.dataSource.paginator.pageIndex*this.dataSource.paginator.pageSize,a=i+this.dataSource.paginator.pageSize;U(N(this.dataSource.sortData(this.dataSource.filteredData,this.dataSource.sort).slice(i,a),this.displayedColumns,t.getDataForColumn),e)}setDataSource(){this.dataSource&&(this.dataSource.filterPredicate=(e,i)=>xe(e,i,this.displayedColumns,t.getDataForColumn),this.dataSource.sortData=(e,i)=>ge(e,i,t.getDataForColumn),this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filter=this.filterValue)}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.cachedSelection,this.filterValue,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}toggleRow(e){this.selection.toggle(e),this.cachedSelection.toggle(e)}pageChanged(){this.cachedSelection&&this.tableCheckbox.selectCachedDataOnPage(this.dataSource,this.selection,this.cachedSelection,this.selection.compareWith)}watchForIdColumnChanges(){this.tableConfigService.showIdsChanged.pipe(F(this.destroyRef)).subscribe(e=>{e?this.displayedColumns=this.unfilteredColumns:this.displayedColumns=this.unfilteredColumns.filter(i=>i!=="id")}),localStorage.getItem("showIds")!=="true"&&(this.displayedColumns=this.displayedColumns.filter(e=>e!=="id"))}static{this.\u0275fac=function(i){return new(i||t)(d(Se),d(De),d(ve),d(j))}}static{this.\u0275cmp=E({type:t,selectors:[["app-ext-sources-list"]],viewQuery:function(i,a){if(i&1&&(L(H,7),L(w,7)),i&2){let o;O(o=k())&&(a.child=o.first),O(o=k())&&(a.matSort=o.first)}},inputs:{extSources:"extSources",selection:"selection",cachedSubject:"cachedSubject",filterValue:"filterValue",loading:"loading",displayColumns:"displayColumns"},features:[z],decls:18,vars:15,consts:[[1,"card","mt-2",3,"hidden"],[3,"exportDisplayedData","exportAllData","pageChanged","pageSizeOptions","dataLength","tableId"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"matSortChange","dataSource"],["matColumnDef","select"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn"],["class","align-checkbox","mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"change","aria-label","checked","indeterminate"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"change","click","aria-label","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item"]],template:function(i,a){if(i&1&&(l(0,"div",0)(1,"perun-web-apps-table-wrapper",1),S("exportDisplayedData",function(h){return a.exportDisplayedData(h)})("exportAllData",function(h){return a.exportAllData(h)})("pageChanged",function(){return a.pageChanged()}),l(2,"table",2),S("matSortChange",function(){return a.pageChanged()}),T(3,Ve,3,0,"ng-container",3),c(4,"isAllSelected"),g(5,4),_(6,Pe,3,3,"th",5)(7,Be,2,1,"td",6),x(),g(8,7),_(9,Ne,3,3,"th",5)(10,Ue,3,5,"td",8),x(),g(11,9),_(12,Fe,3,3,"th",5)(13,He,3,3,"td",8),x(),_(14,je,1,0,"tr",10)(15,ze,1,0,"tr",11),s()()(),T(16,Qe,3,3,"perun-web-apps-alert",12),T(17,Xe,3,3,"perun-web-apps-alert",12)),i&2){let o;m("hidden",a.extSources.length===0||a.dataSource.filteredData.length===0),n(),m("pageSizeOptions",a.pageSizeOptions)("dataLength",a.dataSource.filteredData.length)("tableId",a.tableId),n(),m("dataSource",a.dataSource),n(),y((o=V(13,Le,P(4,10,a.dataSource,a.selection.selected.length)))?3:-1,o),n(11),m("matHeaderRowDef",a.displayedColumns),n(),m("matRowDefColumns",a.displayedColumns),n(),y(!a.loading&&a.extSources.length===0?16:-1),n(),y(a.dataSource.filteredData.length===0&&a.extSources.length!==0?17:-1)}},dependencies:[v,q,W,ue,me,H,re,Y,K,ie,Z,J,ae,ee,te,oe,ne,de,w,pe,ce,G,Ee,se,Te,ye,Me],encapsulation:2})}}return t})();var Mt=(()=>{class t{constructor(e,i,a,o){this.data=e,this.dialogRef=i,this.voService=a,this.notificator=o,this.loading=!1}update(e){this.loading=!0,this.voService.updateVoBan({banOnVo:{id:this.data.ban.id,beanName:"BanOnVo",voId:this.data.ban.voId,memberId:this.data.ban.memberId,description:e.description,validityTo:e.validity}}).subscribe({next:()=>{this.notificator.showSuccess("DIALOGS.UPDATE_BAN.SUCCESS"),this.dialogRef.close(!0)},error:()=>{this.loading=!1}})}cancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(i){return new(i||t)(d(_e),d(fe),d(he),d(be))}}static{this.\u0275cmp=E({type:t,selectors:[["app-update-vo-ban-dialog"]],decls:1,vars:3,consts:[[3,"cancelled","update","ban","theme","loading"]],template:function(i,a){i&1&&(l(0,"app-update-ban-dialog",0),S("cancelled",function(){return a.cancel()})("update",function(h){return a.update(h)}),s()),i&2&&m("ban",a.data.ban)("theme","vo-theme")("loading",a.loading)},dependencies:[v,we],encapsulation:2})}}return t})();export{_t as a,Mt as b};
