"use strict";(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[50],{61283:(W,x,s)=>{s.d(x,{A:()=>A});var c=s(36769),h=s(5e3),L=s(11735);let A=(()=>{class n{constructor(){}prepareRoute(a){return a&&a.activatedRouteData&&a.activatedRouteData.animation}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-animated-router-outlet"]],decls:3,vars:0,consts:[["outlet","outlet"]],template:function(a,D){1&a&&(h.TgZ(0,"div"),h._UZ(1,"router-outlet",null,0),h.qZA())},directives:[L.lC],styles:[""],data:{animation:[c.Ji]}}),n})()},71103:(W,x,s)=>{s.d(x,{n:()=>b});var c=s(48966),h=s(20449),L=s(36908),A=s(112),n=s(10036),a=(s(80255),s(5e3)),D=s(51062),t=s(7434),N=s(69808),Z=s(98380),I=s(20773),U=s(53984),S=s(47423);const w=["list"];function F(E,v){1&E&&(a.TgZ(0,"app-alert",10),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&E&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"DIALOGS.CREATE_ATTRIBUTE.ERROR_EMPTY_VALUE")," "))}function T(E,v){1&E&&a._UZ(0,"mat-spinner",11)}function R(E,v){if(1&E&&a._UZ(0,"perun-web-apps-attributes-list",12,13),2&E){const p=a.oxw();a.Q6J("tableId",p.tableId)("attributes",p.attributes)("filterValue",p.filterValue)("inDialog",!0)("emptyListText","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.EMPTY_ATTRIBUTES")("selection",p.selected)}}let b=(()=>{class E{constructor(p,f,u,y,C){this.dialogRef=p,this.data=f,this.attributesManager=u,this.notificator=y,this.translate=C,this.attributes=[],this.selected=new h.Ov(!0,[]),this.showError=!1,this.filterValue="",this.tableId=n.rF,this.translate.get("DIALOGS.CREATE_ATTRIBUTE.SUCCESS_SAVE").subscribe(B=>this.saveSuccessMessage=B)}ngOnInit(){const p=new Array;let f,u,y,C,B,J,k,K;switch(this.data.notEmptyAttributes.forEach(Y=>{p.push(Y.id)}),this.data.entity){case"member":f=this.data.entityId;break;case"user":u=this.data.entityId;break;case"vo":y=this.data.entityId;break;case"group":C=this.data.entityId;break;case"resource":B=this.data.entityId;break;case"facility":J=this.data.entityId;break;case"host":k=this.data.entityId;break;case"ues":K=this.data.entityId}switch(this.data.secondEntity){case"member":f=this.data.secondEntityId;break;case"user":u=this.data.secondEntityId;break;case"vo":y=this.data.secondEntityId;break;case"group":C=this.data.secondEntityId;break;case"resource":B=this.data.secondEntityId;break;case"facility":J=this.data.secondEntityId;break;case"host":k=this.data.secondEntityId;break;case"ues":K=this.data.secondEntityId}this.loading=!0,this.attributesManager.getAttributesDefinitionWithRights(f,u,y,C,B,J,k,K).subscribe(Y=>{this.attributes=Y,this.attributes=this.attributes.filter(Q=>!p.includes(Q.id)&&this.twoEntityValid(Q)),this.loading=!1})}onCancel(){this.dialogRef.close()}onSave(){this.list.updateMapAttributes();let p=!1;for(const f of this.selected.selected)"java.util.ArrayList"===f.type&&0===f.value.length&&(p=!0),void 0===f.value&&(p=!0);if(p)return this.showError=!0,void setTimeout(()=>{this.showError=!1},5e3);switch(this.data.entity){case"facility":this.attributesManager.setFacilityAttributes({facility:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"group":"resource"===this.data.secondEntity?this.attributesManager.setGroupResourceAttributes({group:this.data.entityId,resource:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()}):this.attributesManager.setGroupAttributes({group:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"member":switch(this.data.secondEntity){case"resource":this.attributesManager.setMemberResourceAttributes({member:this.data.entityId,resource:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"group":this.attributesManager.setMemberGroupAttributes({member:this.data.entityId,group:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;default:this.attributesManager.setMemberAttributes({member:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()})}break;case"resource":this.attributesManager.setResourceAttributes({resource:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"user":"facility"===this.data.secondEntity?this.attributesManager.setUserFacilityAttributes({user:this.data.entityId,facility:this.data.secondEntityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()}):this.attributesManager.setUserAttributes({user:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"vo":this.attributesManager.setVoAttributes({vo:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"host":this.attributesManager.setHostAttributes({host:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()});break;case"ues":this.attributesManager.setUserExtSourceAttributes({userExtSource:this.data.entityId,attributes:this.selected.selected}).subscribe(()=>{this.handleSuccess()})}}applyFilter(p){this.filterValue=p}handleSuccess(){this.notificator.showSuccess(this.saveSuccessMessage),this.selected.clear(),this.dialogRef.close("saved")}twoEntityValid(p){return!this.data.secondEntity||p.entity===`${this.data.entity}_${this.data.secondEntity}`}}return E.\u0275fac=function(p){return new(p||E)(a.Y36(c.so),a.Y36(c.WI),a.Y36(A.H8),a.Y36(L.V6),a.Y36(D.sK))},E.\u0275cmp=a.Xpm({type:E,selectors:[["app-create-attribute-dialog"]],viewQuery:function(p,f){if(1&p&&a.Gf(w,5),2&p){let u;a.iGM(u=a.CRH())&&(f.list=u.first)}},decls:17,vars:17,consts:[["mat-dialog-title",""],[1,"page-subtitle"],["data-cy","filter-attributes",1,"font-size-1rem",3,"placeholder","filter"],["class","ml-3 font-size-1rem","alert_type","error",4,"ngIf"],["mat-dialog-content",""],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","attributes","filterValue","inDialog","emptyListText","selection",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["color","accent","data-cy","save-selected-attributes","mat-flat-button","",1,"ml-2",3,"disabled","click"],["alert_type","error",1,"ml-3","font-size-1rem"],[1,"ml-auto","mr-auto"],[3,"tableId","attributes","filterValue","inDialog","emptyListText","selection"],["list",""]],template:function(p,f){1&p&&(a.TgZ(0,"div"),a.TgZ(1,"div",0),a.TgZ(2,"h1",1),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"perun-web-apps-immediate-filter",2),a.NdJ("filter",function(y){return f.applyFilter(y)}),a.qZA(),a.YNc(6,F,3,3,"app-alert",3),a.qZA(),a.TgZ(7,"div",4),a.YNc(8,T,1,0,"mat-spinner",5),a.YNc(9,R,2,6,"perun-web-apps-attributes-list",6),a.qZA(),a.TgZ(10,"div",7),a.TgZ(11,"button",8),a.NdJ("click",function(){return f.onCancel()}),a._uU(12),a.ALo(13,"translate"),a.qZA(),a.TgZ(14,"button",9),a.NdJ("click",function(){return f.onSave()}),a._uU(15),a.ALo(16,"translate"),a.qZA(),a.qZA(),a.qZA()),2&p&&(a.Tol(f.data.style),a.xp6(3),a.Oqu(a.lcZ(4,11,"DIALOGS.CREATE_ATTRIBUTE.SET_NEW")),a.xp6(2),a.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),a.xp6(1),a.Q6J("ngIf",f.showError),a.xp6(2),a.Q6J("ngIf",f.loading),a.xp6(1),a.Q6J("ngIf",!f.loading),a.xp6(3),a.hij(" ",a.lcZ(13,13,"DIALOGS.CREATE_ATTRIBUTE.CANCEL")," "),a.xp6(2),a.Q6J("disabled",0===f.selected.selected.length),a.xp6(1),a.hij(" ",a.lcZ(16,15,"DIALOGS.CREATE_ATTRIBUTE.SAVE")," "))},directives:[c.uh,t.L,N.O5,Z.w,c.xY,I.$g,U.p,c.H8,S.lW],pipes:[D.X$],styles:[".font-size-1rem[_ngcontent-%COMP%]{font-size:1rem!important}"]}),E})()},61365:(W,x,s)=>{s.d(x,{k:()=>F});var c=s(48966),h=s(32075),L=s(36908),A=s(112),n=s(5e3),e=s(51062),a=s(69808),D=s(20773),t=s(47423);function N(T,R){1&T&&n._UZ(0,"mat-spinner",6)}function Z(T,R){1&T&&n._UZ(0,"th",15)}function I(T,R){if(1&T&&(n.TgZ(0,"td",16),n._uU(1),n.qZA()),2&T){const b=R.$implicit;n.xp6(1),n.Oqu(b.displayName)}}function U(T,R){1&T&&n._UZ(0,"tr",17)}function S(T,R){1&T&&n._UZ(0,"tr",18)}function w(T,R){if(1&T&&(n.TgZ(0,"div",7),n.TgZ(1,"div"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",8),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"table",9),n.ynx(8,10),n.YNc(9,Z,1,0,"th",11),n.YNc(10,I,2,1,"td",12),n.BQk(),n.YNc(11,U,1,0,"tr",13),n.YNc(12,S,1,0,"tr",14),n.qZA(),n.qZA()),2&T){const b=n.oxw();n.xp6(2),n.hij(" ",n.lcZ(3,5,"DIALOGS.DELETE_ATTRIBUTES.DESCRIPTION")," "),n.xp6(3),n.hij(" ",n.lcZ(6,7,"DIALOGS.DELETE_ATTRIBUTES.ASK")," "),n.xp6(2),n.Q6J("dataSource",b.dataSource),n.xp6(4),n.Q6J("matHeaderRowDef",b.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",b.displayedColumns)}}let F=(()=>{class T{constructor(b,E,v,p,f){this.dialogRef=b,this.data=E,this.notificator=v,this.translate=p,this.attributesManager=f,this.displayedColumns=["name"],this.loading=!1}ngOnInit(){this.dataSource=new h.by(this.data.attributes),this.theme=this.data.theme}onCancel(){this.dialogRef.close(!1)}onSubmit(){const b=[];for(const v of this.data.attributes)b.push(v.id);const E={};switch(E[this.data.entity]=this.data.entityId,E.attributes=b,void 0!==this.data.secondEntity&&(E[this.data.secondEntity]=this.data.secondEntityId),this.loading=!0,this.data.entity){case"vo":this.attributesManager.removeVoAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"group":"resource"===this.data.secondEntity?this.attributesManager.removeGroupResourceAttributes(this.data.entityId,this.data.secondEntityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1):this.attributesManager.removeGroupAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"user":"facility"===this.data.secondEntity?this.attributesManager.removeUserFacilityAttributes(this.data.entityId,this.data.secondEntityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1):this.attributesManager.removeUserAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"member":switch(this.data.secondEntity){case"resource":this.attributesManager.removeMemberResourceAttributes(this.data.entityId,this.data.secondEntityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"group":this.attributesManager.removeMemberGroupAttributes(this.data.entityId,this.data.secondEntityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;default:this.attributesManager.removeMemberAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1)}break;case"facility":this.attributesManager.removeFacilityAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"host":this.attributesManager.removeHostAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()},()=>this.loading=!1);break;case"ues":this.attributesManager.removeUesAttributes(this.data.entityId,b).subscribe(()=>{this.onSuccess()});break;case"resource":this.attributesManager.removeResourceAttributes(this.data.entityId,b).subscribe(()=>this.onSuccess())}}onSuccess(){this.translate.get("DIALOGS.DELETE_ATTRIBUTES.SUCCESS").subscribe(b=>{this.notificator.showSuccess(b),this.dialogRef.close(!0)})}}return T.\u0275fac=function(b){return new(b||T)(n.Y36(c.so),n.Y36(c.WI),n.Y36(L.V6),n.Y36(e.sK),n.Y36(A.H8))},T.\u0275cmp=n.Xpm({type:T,selectors:[["app-delete-attribute-dialog"]],decls:13,vars:15,consts:[["mat-dialog-title",""],["class","ml-auto mr-auto",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["mat-flat-button","",1,"ml-auto",3,"click"],["mat-flat-button","","color","warn","data-cy","delete-attributes",1,"ml-2",3,"disabled","click"],[1,"ml-auto","mr-auto"],["mat-dialog-content",""],[1,"font-weight-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","","class","font-weight-bolder",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"font-weight-bolder"],["mat-row",""]],template:function(b,E){1&b&&(n.TgZ(0,"div"),n.TgZ(1,"h1",0),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,N,1,0,"mat-spinner",1),n.YNc(5,w,13,9,"div",2),n.TgZ(6,"div",3),n.TgZ(7,"button",4),n.NdJ("click",function(){return E.onCancel()}),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"button",5),n.NdJ("click",function(){return E.onSubmit()}),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.qZA(),n.qZA()),2&b&&(n.Tol(E.theme),n.xp6(2),n.Oqu(n.lcZ(3,9,"DIALOGS.DELETE_ATTRIBUTES.TITLE")),n.xp6(2),n.Q6J("ngIf",E.loading),n.xp6(1),n.Q6J("ngIf",!E.loading),n.xp6(3),n.hij(" ",n.lcZ(9,11,"DIALOGS.DELETE_ATTRIBUTES.CANCEL")," "),n.xp6(2),n.Q6J("disabled",E.loading),n.xp6(1),n.hij(" ",n.lcZ(12,13,"DIALOGS.DELETE_ATTRIBUTES.DELETE")," "))},directives:[c.uh,a.O5,D.$g,c.xY,h.BZ,h.w1,h.fO,h.ge,h.Dz,h.ev,h.as,h.XQ,h.nj,h.Gk,c.H8,t.lW],pipes:[e.X$],styles:[""]}),T})()},12651:(W,x,s)=>{s.d(x,{t:()=>v});var c=s(112),h=s(20449),L=s(9244),A=s(71103),n=s(84379),e=s(61365),D=(s(80255),s(10036)),t=s(5e3),N=s(48966),Z=s(96214),I=s(47423),U=s(7434),S=s(69808),w=s(20773),F=s(53984),T=s(51062);const R=["list"];function b(p,f){1&p&&t._UZ(0,"mat-spinner",7)}function E(p,f){if(1&p&&t._UZ(0,"perun-web-apps-attributes-list",8,9),2&p){const u=t.oxw();t.Q6J("tableId",u.tableId)("filterValue",u.filterValue)("attributes",u.attributes)("selection",u.selection)}}let v=(()=>{class p{constructor(u,y){this.attributesManagerService=u,this.dialog=y,this.attributes=[],this.selection=new h.Ov(!0,[]),this.filterValue="",this.tableId=D.rF,this.loading=!1}ngOnInit(){this.refreshTable()}refreshTable(){switch(this.loading=!0,this.entity){case"member":this.attributesManagerService.getMemberAttributes(this.entityId).subscribe(u=>{this.attributes=u,this.selection.clear(),this.loading=!1});break;case"group":this.attributesManagerService.getGroupAttributes(this.entityId).subscribe(u=>{this.attributes=u,this.selection.clear(),this.loading=!1});break;case"user":this.attributesManagerService.getUserAttributes(this.entityId).subscribe(u=>{this.attributes=u,this.selection.clear(),this.loading=!1});break;case"resource":this.attributesManagerService.getResourceAttributes(this.entityId).subscribe(u=>{this.attributes=u,this.selection.clear(),this.loading=!1});break;case"facility":this.attributesManagerService.getFacilityAttributes(this.entityId).subscribe(u=>{this.attributes=u,this.selection.clear(),this.loading=!1});break;case"vo":this.attributesManagerService.getVoAttributes(this.entityId).subscribe(u=>{this.attributes=u,this.selection.clear(),this.loading=!1})}}applyFilter(u){this.filterValue=u}onCreate(){const u=(0,L.kZ)();u.width="1050px",u.data={entityId:this.entityId,entity:this.entity,notEmptyAttributes:this.attributes,style:this.entity+"-theme"},this.dialog.open(A.n,u).afterClosed().subscribe(C=>{C&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const u=(0,L.kZ)();u.width="450px",u.data={entityId:this.entityId,entity:this.entity,attributes:this.selection.selected},this.dialog.open(n.wA,u).afterClosed().subscribe(C=>{C&&this.refreshTable()})}onDelete(){const u=(0,L.kZ)();u.width="450px",u.data={entityId:this.entityId,entity:this.entity,attributes:this.selection.selected},this.dialog.open(e.k,u).afterClosed().subscribe(C=>{C&&this.refreshTable()})}}return p.\u0275fac=function(u){return new(u||p)(t.Y36(c.H8),t.Y36(N.uw))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-one-entity-attribute-page"]],viewQuery:function(u,y){if(1&u&&t.Gf(R,5),2&u){let C;t.iGM(C=t.CRH())&&(y.list=C.first)}},inputs:{entity:"entity",entityId:"entityId"},decls:13,vars:14,consts:[[1,"mt-2",3,"refresh"],["mat-flat-button","","color","accent","data-cy","add-attributes",1,"mr-2","mt-2","action-button",3,"click"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"disabled","click"],["color","warn","mat-flat-button","","data-cy","remove-attributes",1,"mt-2","mr-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"tableId","filterValue","attributes","selection",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"tableId","filterValue","attributes","selection"],["list",""]],template:function(u,y){1&u&&(t.TgZ(0,"perun-web-apps-refresh-button",0),t.NdJ("refresh",function(){return y.refreshTable()}),t.qZA(),t.TgZ(1,"button",1),t.NdJ("click",function(){return y.onCreate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return y.onSave()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return y.onDelete()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"perun-web-apps-immediate-filter",4),t.NdJ("filter",function(B){return y.applyFilter(B)}),t.qZA(),t.YNc(11,b,1,0,"mat-spinner",5),t.YNc(12,E,2,4,"perun-web-apps-attributes-list",6)),2&u&&(t.xp6(2),t.hij(" ",t.lcZ(3,8,"USER_DETAIL.SETTINGS.ATTRIBUTES.CREATE"),"\n"),t.xp6(2),t.Q6J("disabled",0===y.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(6,10,"USER_DETAIL.SETTINGS.ATTRIBUTES.SAVE"),"\n"),t.xp6(2),t.Q6J("disabled",0===y.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(9,12,"USER_DETAIL.SETTINGS.ATTRIBUTES.DELETE"),"\n"),t.xp6(2),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),t.xp6(1),t.Q6J("ngIf",y.loading),t.xp6(1),t.Q6J("ngIf",!y.loading))},directives:[Z.t,I.lW,U.L,S.O5,w.$g,F.p],pipes:[T.X$],styles:[""]}),p})()},19191:(W,x,s)=>{s.d(x,{Y:()=>z});var c=s(112),L=(s(80255),s(20449)),A=s(61365),n=s(9244),e=s(84379),a=s(71103),D=s(64080),t=s(5e3),N=s(48966),Z=s(69808),I=s(20773),U=s(98380),S=s(82322),w=s(45703),F=s(42377),T=s(51062);let R=(()=>{class _{constructor(){this.memberSelected=new t.vpe,this.memberFullNameFunction=i=>(0,n.bD)(i.user)}ngOnInit(){this.members=this.members.sort(n.fx)}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["perun-web-apps-member-search-select"]],inputs:{members:"members"},outputs:{memberSelected:"memberSelected"},decls:4,vars:12,consts:[[3,"entities","searchFunction","mainTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(i,l){1&i&&(t.TgZ(0,"perun-web-apps-entity-search-select",0),t.NdJ("entitySelected",function(O){return l.memberSelected.emit(O)}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&t.Q6J("entities",l.members)("searchFunction",l.memberFullNameFunction)("mainTextFunction",l.memberFullNameFunction)("selectPlaceholder",t.lcZ(1,6,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.SELECT_MEMBER"))("findPlaceholder",t.lcZ(2,8,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.FIND_MEMBER"))("noEntriesText",t.lcZ(3,10,"SHARED_LIB.PERUN.COMPONENTS.MEMBER_SEARCH_SELECT.NO_MEMBER_FOUND"))},directives:[F.i],pipes:[T.X$],styles:[""]}),_})(),b=(()=>{class _{constructor(){this.facilitySelected=new t.vpe,this.nameFunction=i=>i.name}ngOnInit(){this.facilities=this.facilities.sort(n.aC)}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["perun-web-apps-facility-search-select"]],inputs:{facilities:"facilities"},outputs:{facilitySelected:"facilitySelected"},decls:4,vars:12,consts:[[3,"entities","searchFunction","mainTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(i,l){1&i&&(t.TgZ(0,"perun-web-apps-entity-search-select",0),t.NdJ("entitySelected",function(O){return l.facilitySelected.emit(O)}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&t.Q6J("entities",l.facilities)("searchFunction",l.nameFunction)("mainTextFunction",l.nameFunction)("selectPlaceholder",t.lcZ(1,6,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.SELECT_FACILITY"))("findPlaceholder",t.lcZ(2,8,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.FIND_FACILITY"))("noEntriesText",t.lcZ(3,10,"SHARED_LIB.PERUN.COMPONENTS.FACILITY_SEARCH_SELECT.NO_FACILITY_FOUND"))},directives:[F.i],pipes:[T.X$],styles:[""]}),_})();var E=s(74250),v=s(96214),p=s(47423),f=s(7434),u=s(53984);const y=["list"];function C(_,M){1&_&&t._UZ(0,"mat-spinner",4)}function B(_,M){if(1&_&&(t.TgZ(0,"app-alert",5),t._uU(1),t.qZA()),2&_){const i=t.oxw();t.xp6(1),t.Oqu(i.noEntityMessage)}}function J(_,M){if(1&_){const i=t.EpF();t.TgZ(0,"perun-web-apps-group-search-select",18),t.NdJ("groupSelected",function(d){return t.CHM(i),t.oxw(2).specifySecondEntity(d)}),t.qZA()}if(2&_){const i=t.oxw(2);t.Q6J("groups",i.entityValues)("firstSelectedGroup",i.specificSecondEntity)("displayStatus",!0)}}function k(_,M){if(1&_){const i=t.EpF();t.TgZ(0,"perun-web-apps-resource-search-select",19),t.NdJ("resourceSelected",function(d){return t.CHM(i),t.oxw(2).specifySecondEntity(d)}),t.qZA()}if(2&_){const i=t.oxw(2);t.Q6J("resources",i.entityValues)}}function K(_,M){if(1&_){const i=t.EpF();t.TgZ(0,"perun-web-apps-member-search-select",20),t.NdJ("memberSelected",function(d){return t.CHM(i),t.oxw(2).specifySecondEntity(d)}),t.qZA()}if(2&_){const i=t.oxw(2);t.Q6J("members",i.entityValues)}}function Y(_,M){if(1&_){const i=t.EpF();t.TgZ(0,"perun-web-apps-facility-search-select",21),t.NdJ("facilitySelected",function(d){return t.CHM(i),t.oxw(2).specifySecondEntity(d)}),t.qZA()}if(2&_){const i=t.oxw(2);t.Q6J("facilities",i.entityValues)}}function Q(_,M){if(1&_){const i=t.EpF();t.TgZ(0,"perun-web-apps-user-search-select",22),t.NdJ("userSelected",function(d){return t.CHM(i),t.oxw(2).specifySecondEntity(d)}),t.qZA()}if(2&_){const i=t.oxw(2);t.Q6J("users",i.entityValues)}}function H(_,M){1&_&&t._UZ(0,"mat-spinner",4)}function G(_,M){if(1&_&&t._UZ(0,"perun-web-apps-attributes-list",23,24),2&_){const i=t.oxw(2);t.Q6J("attributes",i.attributes)("filterValue",i.filterValue)("selection",i.selection)}}function $(_,M){if(1&_){const i=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",6),t.YNc(2,J,1,3,"perun-web-apps-group-search-select",7),t.YNc(3,k,1,1,"perun-web-apps-resource-search-select",8),t.YNc(4,K,1,1,"perun-web-apps-member-search-select",9),t.YNc(5,Y,1,1,"perun-web-apps-facility-search-select",10),t.YNc(6,Q,1,1,"perun-web-apps-user-search-select",11),t.qZA(),t.TgZ(7,"perun-web-apps-refresh-button",12),t.NdJ("refresh",function(){t.CHM(i);const d=t.oxw();return d.getAttributes(d.specificSecondEntity.id)}),t.qZA(),t.TgZ(8,"button",13),t.NdJ("click",function(){t.CHM(i);const d=t.oxw();return d.onAdd(d.specificSecondEntity.id)}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",14),t.NdJ("click",function(){t.CHM(i);const d=t.oxw();return d.onSave(d.specificSecondEntity.id)}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",15),t.NdJ("click",function(){t.CHM(i);const d=t.oxw();return d.onDelete(d.specificSecondEntity.id)}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"perun-web-apps-immediate-filter",16),t.NdJ("filter",function(d){return t.CHM(i),t.oxw().applyFilter(d)}),t.qZA(),t.YNc(18,H,1,0,"mat-spinner",1),t.YNc(19,G,2,3,"perun-web-apps-attributes-list",17),t.qZA()}if(2&_){const i=t.oxw();t.xp6(2),t.Q6J("ngIf","group"===i.secondEntity),t.xp6(1),t.Q6J("ngIf","resource"===i.secondEntity),t.xp6(1),t.Q6J("ngIf","member"===i.secondEntity),t.xp6(1),t.Q6J("ngIf","facility"===i.secondEntity),t.xp6(1),t.Q6J("ngIf","user"===i.secondEntity),t.xp6(3),t.hij(" ",t.lcZ(10,13,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),t.xp6(2),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(13,15,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),t.xp6(2),t.Q6J("disabled",0===i.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(16,17,"MEMBER_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),t.xp6(2),t.Q6J("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),t.xp6(1),t.Q6J("ngIf",i.innerLoading),t.xp6(1),t.Q6J("ngIf",!i.innerLoading)}}let z=(()=>{class _{constructor(i,l,d,O,o,g){this.attributesManagerService=i,this.resourcesManagerService=l,this.facilitiesManagerService=d,this.groupsManagerService=O,this.membersManager=o,this.dialog=g,this.entityValues=[],this.attributes=[],this.selection=new L.Ov(!0,[]),this.allowedStatuses=["INVALID","VALID"],this.loading=!1,this.innerLoading=!1,this.filterValue=""}ngOnInit(){this.loadEntityValues(),this.setMessages(this.secondEntity.toLowerCase())}loadEntityValues(){switch(this.loading=!0,this.firstEntity){case"member":switch(this.secondEntity){case"resource":this.resourcesManagerService.getAssignedResourcesWithStatus(this.firstEntityId).subscribe(i=>{this.entityValues=i.map(l=>l.enrichedResource.resource),this.preselectEntity(),this.loading=!1});break;case"group":this.groupsManagerService.getMemberGroups(this.firstEntityId).subscribe(i=>{this.entityValues=i,this.preselectEntity(),this.loading=!1})}break;case"group":switch(this.secondEntity){case"resource":this.resourcesManagerService.getResourceAssignments(this.firstEntityId).subscribe(i=>{this.entityValues=i.map(l=>{const d=l.enrichedResource.resource;return d.status=l.status,d}),this.preselectEntity(),this.loading=!1});break;case"member":this.membersManager.getCompleteRichMembersForGroup(this.firstEntityId,!1,this.allowedStatuses,null,[D.r.MEMBER_CORE_ID]).subscribe(i=>{this.entityValues=i,this.preselectEntity(),this.loading=!1})}break;case"user":this.facilitiesManagerService.getAssignedFacilitiesByUser(this.firstEntityId).subscribe(i=>{this.entityValues=i,this.preselectEntity(),this.loading=!1});break;case"resource":switch(this.secondEntity){case"member":this.resourcesManagerService.getAssignedMembersWithStatus(this.firstEntityId).subscribe(i=>{this.entityValues=i.map(l=>l.richMember),this.preselectEntity(),this.loading=!1});break;case"group":this.resourcesManagerService.getGroupAssignments(this.firstEntityId).subscribe(i=>{this.entityValues=i.map(l=>{const d=l.enrichedGroup.group;return d.status=l.status,d}),this.preselectEntity(),this.loading=!1})}break;case"facility":this.facilitiesManagerService.getAssignedUsers(this.firstEntityId).subscribe(i=>{this.entityValues=i,this.preselectEntity(),this.loading=!1})}}preselectEntity(){0!==this.entityValues.length&&this.findInitiallySelectedEntity()}findInitiallySelectedEntity(){let i=this.entityValues[0];const l=(0,n.vL)(this.entityKey());if(l)for(const d of this.entityValues)if(d.id===l[0]){i=d;break}this.specifySecondEntity(i)}entityKey(){return"group"===this.secondEntity?"groups":""}getAttributes(i){switch(this.innerLoading=!0,this.firstEntity){case"member":switch(this.secondEntity){case"resource":this.attributesManagerService.getMemberResourceAttributes(this.firstEntityId,i).subscribe(l=>{this.attributes=l,this.innerLoading=!1});break;case"group":this.attributesManagerService.getMemberGroupAttributes(this.firstEntityId,i).subscribe(l=>{this.attributes=l,this.innerLoading=!1})}break;case"group":switch(this.secondEntity){case"resource":this.attributesManagerService.getGroupResourceAttributes(this.firstEntityId,i).subscribe(l=>{this.attributes=l,this.innerLoading=!1});break;case"member":this.attributesManagerService.getMemberGroupAttributes(i,this.firstEntityId).subscribe(l=>{this.attributes=l,this.innerLoading=!1})}break;case"user":this.attributesManagerService.getUserFacilityAttributes(this.firstEntityId,i).subscribe(l=>{this.attributes=l,this.innerLoading=!1});break;case"resource":switch(this.secondEntity){case"member":this.attributesManagerService.getMemberResourceAttributes(i,this.firstEntityId).subscribe(l=>{this.attributes=l,this.innerLoading=!1});break;case"group":this.attributesManagerService.getGroupResourceAttributes(i,this.firstEntityId).subscribe(l=>{this.attributes=l,this.innerLoading=!1})}break;case"facility":this.attributesManagerService.getUserFacilityAttributes(i,this.firstEntityId).subscribe(l=>{this.attributes=l,this.innerLoading=!1})}}setMessages(i){this.noEntityMessage=`No ${i} assigned`}onSave(i){this.list.updateMapAttributes();const l=(0,n.kZ)();l.width="450px",l.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:i,attributes:this.selection.selected},this.dialog.open(e.wA,l).afterClosed().subscribe(O=>{O&&(this.selection.clear(),this.getAttributes(i))})}onDelete(i){const l=(0,n.kZ)();l.width="450px",l.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:i,attributes:this.selection.selected,theme:`${this.firstEntity}-theme`},this.dialog.open(A.k,l).afterClosed().subscribe(O=>{O&&(this.selection.clear(),this.getAttributes(i))})}onAdd(i){const l=(0,n.kZ)();l.width="1050px",l.data={entityId:this.firstEntityId,entity:this.firstEntity,secondEntity:this.secondEntity,secondEntityId:i,notEmptyAttributes:this.attributes,style:`${this.firstEntity}-theme`},this.dialog.open(a.n,l).afterClosed().subscribe(O=>{O&&(this.selection.clear(),this.getAttributes(i))})}specifySecondEntity(i){i&&(this.specificSecondEntity=i,this.getAttributes(this.specificSecondEntity.id))}applyFilter(i){this.filterValue=i}}return _.\u0275fac=function(i){return new(i||_)(t.Y36(c.H8),t.Y36(c.xk),t.Y36(c.IQ),t.Y36(c.ff),t.Y36(c.uq),t.Y36(N.uw))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-two-entity-attribute-page"]],viewQuery:function(i,l){if(1&i&&t.Gf(y,5),2&i){let d;t.iGM(d=t.CRH())&&(l.list=d.first)}},inputs:{firstEntityId:"firstEntityId",firstEntity:"firstEntity",secondEntity:"secondEntity"},decls:4,vars:3,consts:[[1,"mt-3"],["class","ml-auto mr-auto",4,"ngIf"],["alert_type","warn",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],["alert_type","warn"],[1,"flex-row"],[3,"groups","firstSelectedGroup","displayStatus","groupSelected",4,"ngIf"],[3,"resources","resourceSelected",4,"ngIf"],[3,"members","memberSelected",4,"ngIf"],[3,"facilities","facilitySelected",4,"ngIf"],[3,"users","userSelected",4,"ngIf"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","action-button",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"mr-2",3,"disabled","click"],[3,"placeholder","filter"],[3,"attributes","filterValue","selection",4,"ngIf"],[3,"groups","firstSelectedGroup","displayStatus","groupSelected"],[3,"resources","resourceSelected"],[3,"members","memberSelected"],[3,"facilities","facilitySelected"],[3,"users","userSelected"],[3,"attributes","filterValue","selection"],["list",""]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t.YNc(1,C,1,0,"mat-spinner",1),t.YNc(2,B,2,1,"app-alert",2),t.YNc(3,$,20,19,"div",3),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",l.loading),t.xp6(1),t.Q6J("ngIf",0===l.entityValues.length&&!l.loading),t.xp6(1),t.Q6J("ngIf",0!==l.entityValues.length))},directives:[Z.O5,I.$g,U.w,S.h,w.L,R,b,E.S,v.t,p.lW,f.L,u.p],pipes:[T.X$],styles:[".w-35[_ngcontent-%COMP%]{width:35%}"]}),_})()},64877:(W,x,s)=>{s.d(x,{C:()=>O});var c=s(84847),h=s(32075),L=s(20449),A=s(9244),n=s(36908),e=s(5e3),a=s(18750),D=s(69808),t=s(77446),N=s(25245),Z=s(29772),I=s(50301),U=s(98380),S=s(51062),w=s(31359),F=s(9954),T=s(16119),R=s(7598);function b(o,g){if(1&o){const r=e.EpF();e.TgZ(0,"mat-checkbox",21),e.NdJ("change",function(P){e.CHM(r);const V=e.oxw(2);return P?V.masterToggle():null}),e.qZA()}if(2&o){const r=e.oxw(2);e.Q6J("aria-label",r.checkboxLabel())("checked",r.selection.hasValue()&&r.isAllSelected())("indeterminate",r.selection.hasValue()&&!r.isAllSelected())}}function E(o,g){if(1&o&&(e.TgZ(0,"th",19),e.YNc(1,b,1,3,"mat-checkbox",20),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.selection.isMultipleSelection())}}function v(o,g){if(1&o){const r=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"mat-checkbox",23),e.NdJ("change",function(P){const j=e.CHM(r).$implicit,X=e.oxw();return P?X.selection.toggle(j):null})("click",function(P){return P.stopPropagation()}),e.ALo(2,"lowercase"),e.qZA(),e.qZA()}if(2&o){const r=g.$implicit,m=e.oxw();e.xp6(1),e.Q2q("data-cy","",e.lcZ(2,4,r.firstName),"-checkbox"),e.Q6J("aria-label",m.checkboxLabel(r))("checked",m.selection.isSelected(r))("disabled",m.disableSelf&&r.id===m.principalId&&!m.authResolver.isPerunAdmin())}}function p(o,g){1&o&&e._UZ(0,"th",24)}function f(o,g){1&o&&(e.TgZ(0,"mat-icon",28),e.ALo(1,"translate"),e._uU(2," account_circle "),e.qZA()),2&o&&e.s9C("matTooltip",e.lcZ(1,1,"MANAGERS_LIST.PERSON"))}function u(o,g){if(1&o&&(e._UZ(0,"mat-icon",29),e.ALo(1,"translate")),2&o){const r=e.oxw(2);e.s9C("matTooltip",e.lcZ(1,2,"MANAGERS_LIST.SERVICE")),e.Q6J("svgIcon",r.svgIcon)}}function y(o,g){if(1&o&&(e.TgZ(0,"td",25),e.YNc(1,f,3,3,"mat-icon",26),e.YNc(2,u,2,4,"mat-icon",27),e.qZA()),2&o){const r=g.$implicit;e.xp6(1),e.Q6J("ngIf",!r.serviceUser),e.xp6(1),e.Q6J("ngIf",r.serviceUser)}}function C(o,g){1&o&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MANAGERS_LIST.ID")," "))}function B(o,g){if(1&o&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&o){const r=g.$implicit;e.xp6(1),e.hij(" ",r.id," ")}}function J(o,g){1&o&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MANAGERS_LIST.NAME")," "))}function k(o,g){if(1&o&&(e.TgZ(0,"td",31),e._uU(1),e.ALo(2,"userFullName"),e.qZA()),2&o){const r=g.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,r))}}function K(o,g){1&o&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MANAGERS_LIST.ORGANIZATION")," "))}function Y(o,g){if(1&o&&(e.TgZ(0,"td",31),e._uU(1),e.ALo(2,"userVo"),e.qZA()),2&o){const r=g.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,r))}}function Q(o,g){1&o&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MANAGERS_LIST.EMAIL")," "))}function H(o,g){if(1&o&&(e.TgZ(0,"td",31),e._uU(1),e.ALo(2,"userEmail"),e.qZA()),2&o){const r=g.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,r))}}function G(o,g){1&o&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MANAGERS_LIST.LOGINS")," "))}function $(o,g){if(1&o&&(e.TgZ(0,"td",31),e._uU(1),e.ALo(2,"userLogins"),e.qZA()),2&o){const r=g.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,r))}}function z(o,g){1&o&&e._UZ(0,"tr",32)}const _=function(o){return["/admin/users",o]},M=function(o){return["/myProfile/service-identities",o]};function i(o,g){if(1&o&&e._UZ(0,"tr",33),2&o){const r=g.$implicit,m=e.oxw();e.ekj("cursor-pointer",!m.disableRouting),e.Q6J("perunWebAppsForceRouterLink",m.disableRouting?null:m.routeToAdmin?e.VKq(4,_,r.id):e.VKq(6,M,r.id))("perunWebAppsMiddleClickRouterLink",m.disableRouting?null:m.routeToAdmin?e.VKq(8,_,r.id):e.VKq(10,M,r.id))}}function l(o,g){if(1&o&&(e.TgZ(0,"app-alert",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.noUsersFoundLabel?r.noUsersFoundLabel:e.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_USERS"),"\n")}}function d(o,g){1&o&&(e.TgZ(0,"app-alert",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}let O=(()=>{class o{constructor(r,m,P){this.authResolver=r,this.tableCheckbox=m,this.storeService=P,this.svgIcon="perun-service-identity-black",this.selection=new L.Ov(!0,[]),this.displayedColumns=["select","user","id","name","email","logins","organization"],this.routeToAdmin=!0,this.disableRouting=!1,this.filter="",this.disableSelf=!1,this.pageSizeOptions=A.f7}set matSort(r){this.sort=r}getDataForColumn(r,m){var P;switch(m){case"id":return r.id.toString();case"user":return r.serviceUser?"true":"false";case"name":return r?r.lastName?r.lastName:null!==(P=r.firstName)&&void 0!==P?P:"":"";case"organization":return(0,A.OV)(r);case"email":return(0,A.kN)(r);case"logins":return(0,A.lt)(r);default:return""}}getExportDataForColumn(r,m){switch(m){case"id":return r.id.toString();case"user":return r.serviceUser?"service-user":"user";case"name":return r?(0,A.bD)(r):"";case"organization":return(0,A.OV)(r);case"email":return(0,A.kN)(r);case"logins":return(0,A.lt)(r);default:return""}}exportData(r){(0,A.O6)((0,A.Xn)(this.dataSource.filteredData,this.displayedColumns,this.getExportDataForColumn,this),r)}setDataSource(){this.dataSource||(this.dataSource=new h.by,this.dataSource.sort=this.sort,this.dataSource.paginator=this.child.paginator,this.dataSource.filterPredicate=(r,m)=>(0,A.Sd)(r,m,this.displayedColumns,this.getDataForColumn,this),this.dataSource.sortData=(r,m)=>(0,A.pR)(r,m,this.getDataForColumn,this)),this.dataSource.filter=this.filter,this.dataSource.data=this.users}ngOnChanges(){this.principalId=this.storeService.getPerunPrincipal().userId,this.authResolver.isPerunAdminOrObserver()||(this.displayedColumns=this.displayedColumns.filter(r=>"id"!==r)),this.setDataSource()}isAllSelected(){return this.tableCheckbox.isAllSelected(this.selection.selected.length,this.filter,this.child.paginator.pageSize,this.child.paginator.hasNextPage(),this.dataSource)}masterToggle(){this.tableCheckbox.masterToggle(this.isAllSelected(),this.selection,this.filter,this.dataSource,this.sort,this.child.paginator.pageSize,this.child.paginator.pageIndex,!1)}checkboxLabel(r){return r?`${this.selection.isSelected(r)?"deselect":"select"} row ${r.id+1}`:(this.isAllSelected()?"select":"deselect")+" all"}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(n.x4),e.Y36(n.UA),e.Y36(n.d6))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-users-list"]],viewQuery:function(r,m){if(1&r&&(e.Gf(c.YE,7),e.Gf(A.l9,7)),2&r){let P;e.iGM(P=e.CRH())&&(m.matSort=P.first),e.iGM(P=e.CRH())&&(m.child=P.first)}},inputs:{users:"users",selection:"selection",displayedColumns:"displayedColumns",routeToAdmin:"routeToAdmin",disableRouting:"disableRouting",filter:"filter",tableId:"tableId",noUsersFoundLabel:"noUsersFoundLabel",disableSelf:"disableSelf"},features:[e.TTD],decls:28,vars:9,consts:[[1,"card","mt-2",3,"hidden"],[3,"dataLength","tableId","pageSizeOptions","exportData"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","align-checkbox",4,"matHeaderCellDef"],["class","static-column-size align-checkbox","mat-cell","",4,"matCellDef"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-cell","",4,"matCellDef"],["matColumnDef","organization"],["matColumnDef","email"],["matColumnDef","logins"],["mat-header-row","",4,"matHeaderRowDef"],["class","dark-hover-list-item","mat-row","",3,"cursor-pointer","perunWebAppsForceRouterLink","perunWebAppsMiddleClickRouterLink",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-header-cell","",1,"align-checkbox"],["color","primary",3,"aria-label","checked","indeterminate","change",4,"ngIf"],["color","primary",3,"aria-label","checked","indeterminate","change"],["mat-cell","",1,"static-column-size","align-checkbox"],["color","primary",3,"aria-label","checked","disabled","change","click"],["mat-header-cell",""],["mat-cell","",1,"static-column-size"],["class","align-bottom",3,"matTooltip",4,"ngIf"],["class","align-bottom",3,"matTooltip","svgIcon",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],[1,"align-bottom",3,"matTooltip","svgIcon"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"perunWebAppsForceRouterLink","perunWebAppsMiddleClickRouterLink"],["alert_type","warn"]],template:function(r,m){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"perun-web-apps-table-wrapper",1),e.NdJ("exportData",function(V){return m.exportData(V)}),e.TgZ(2,"table",2),e.ynx(3,3),e.YNc(4,E,2,1,"th",4),e.YNc(5,v,3,6,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,p,1,0,"th",7),e.YNc(8,y,3,2,"td",8),e.BQk(),e.ynx(9,9),e.YNc(10,C,3,3,"th",10),e.YNc(11,B,2,1,"td",8),e.BQk(),e.ynx(12,11),e.YNc(13,J,3,3,"th",10),e.YNc(14,k,3,3,"td",12),e.BQk(),e.ynx(15,13),e.YNc(16,K,3,3,"th",10),e.YNc(17,Y,3,3,"td",12),e.BQk(),e.ynx(18,14),e.YNc(19,Q,3,3,"th",10),e.YNc(20,H,3,3,"td",12),e.BQk(),e.ynx(21,15),e.YNc(22,G,3,3,"th",10),e.YNc(23,$,3,3,"td",12),e.BQk(),e.YNc(24,z,1,0,"tr",16),e.YNc(25,i,1,12,"tr",17),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,l,3,3,"app-alert",18),e.YNc(27,d,3,3,"app-alert",18)),2&r&&(e.Q6J("hidden",0===m.users.length||!m.dataSource||0===m.dataSource.filteredData.length),e.xp6(1),e.Q6J("dataLength",m.dataSource.filteredData.length)("tableId",m.tableId)("pageSizeOptions",m.pageSizeOptions),e.xp6(1),e.Q6J("dataSource",m.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",m.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",m.displayedColumns),e.xp6(1),e.Q6J("ngIf",0===m.users.length),e.xp6(1),e.Q6J("ngIf",0===m.dataSource.filteredData.length&&0!==m.users.length))},directives:[a.l,h.BZ,c.YE,h.w1,h.fO,h.ge,D.O5,t.oG,h.Dz,h.ev,N.Hw,Z.gM,c.nU,h.as,h.XQ,h.nj,h.Gk,I.Kd,I.YH,U.w],pipes:[D.i8,S.X$,w.d,F.Z,T.S,R.g],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),o})()},71135:(W,x,s)=>{s.d(x,{L:()=>Z});var c=s(5e3),h=s(48966),L=s(11735),A=s(69808),n=s(90508),e=s(25245),a=s(64597),D=s(51062);function t(I,U){if(1&I&&(c.TgZ(0,"div",3),c.TgZ(1,"a",4),c.ALo(2,"multiWordDataCy"),c.ALo(3,"translate"),c._UZ(4,"mat-icon",5),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA()),2&I){const S=U.$implicit;c.xp6(1),c.Gre("",S.style," item-itself"),c.Q6J("routerLink",S.url),c.uIk("data-cy",c.lcZ(2,7,c.lcZ(3,9,S.label))),c.xp6(3),c.Q6J("svgIcon",S.cssIcon),c.xp6(1),c.hij(" ",c.lcZ(6,11,S.label)," ")}}function N(I,U){if(1&I&&(c.TgZ(0,"div",1),c.YNc(1,t,7,13,"div",2),c.qZA()),2&I){const S=c.oxw();c.xp6(1),c.Q6J("ngForOf",S.items)}}let Z=(()=>{class I{constructor(S,w){this.dialog=S,this.route=w,this.size="large"}ngOnInit(){this.route.params.subscribe(S=>{this.voId=S.voId})}}return I.\u0275fac=function(S){return new(S||I)(c.Y36(h.uw),c.Y36(L.gz))},I.\u0275cmp=c.Xpm({type:I,selectors:[["perun-web-apps-menu-buttons-field"]],inputs:{items:"items",size:"size"},decls:1,vars:1,consts:[["class","items-container",4,"ngIf"],[1,"items-container"],["class","item-itself-container","mat-ripple","",4,"ngFor","ngForOf"],["mat-ripple","",1,"item-itself-container"],["queryParamsHandling","merge",3,"routerLink"],[1,"item-pic","perun-icon",3,"svgIcon"]],template:function(S,w){1&S&&c.YNc(0,N,2,1,"div",0),2&S&&c.Q6J("ngIf","small"===w.size)},directives:[A.O5,A.sg,n.wG,L.yS,e.Hw],pipes:[a.R,D.X$],styles:[".items-container[_ngcontent-%COMP%]{display:grid;grid-gap:0;grid-template-columns:repeat(auto-fill,minmax(208px,1fr));margin:0 -8px}@media (max-width: 768px){.items-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(148px,1fr))}}.item-pic[_ngcontent-%COMP%]{color:currentColor;transform:scale(3);height:74px;margin-bottom:22px}.item-itself-container[_ngcontent-%COMP%]{margin:8px}.item-itself[_ngcontent-%COMP%]{text-align:center;min-height:186px;height:100%;padding:20px;display:flex;flex-direction:column;align-items:center;font-size:1.25rem}.item-itself[_ngcontent-%COMP%]:hover{text-decoration:none}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;margin-bottom:10px}@media (max-width: 768px){.item-itself[_ngcontent-%COMP%]{min-height:150px;padding:10px}.item-itself[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;margin-bottom:10px}}"]}),I})()},45703:(W,x,s)=>{s.d(x,{L:()=>n});var c=s(5e3),h=s(9244),L=s(42377),A=s(51062);let n=(()=>{class e{constructor(){this.resource=null,this.displayStatus=!0,this.resourceSelected=new c.vpe,this.nameFunction=D=>D.name,this.secondaryFunction=()=>null}ngOnInit(){this.resources=this.resources.sort(h.aC)}}return e.\u0275fac=function(D){return new(D||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["perun-web-apps-resource-search-select"]],inputs:{resource:"resource",resources:"resources",displayStatus:"displayStatus"},outputs:{resourceSelected:"resourceSelected"},decls:4,vars:15,consts:[[3,"entity","entities","displayStatus","searchFunction","mainTextFunction","secondaryTextFunction","selectPlaceholder","findPlaceholder","noEntriesText","entitySelected"]],template:function(D,t){1&D&&(c.TgZ(0,"perun-web-apps-entity-search-select",0),c.NdJ("entitySelected",function(Z){return t.resourceSelected.emit(Z)}),c.ALo(1,"translate"),c.ALo(2,"translate"),c.ALo(3,"translate"),c.qZA()),2&D&&c.Q6J("entity",t.resource)("entities",t.resources)("displayStatus",t.displayStatus)("searchFunction",t.nameFunction)("mainTextFunction",t.nameFunction)("secondaryTextFunction",t.secondaryFunction)("selectPlaceholder",c.lcZ(1,9,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.SELECT_RESOURCE"))("findPlaceholder",c.lcZ(2,11,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.FIND_RESOURCE"))("noEntriesText",c.lcZ(3,13,"SHARED_LIB.PERUN.COMPONENTS.RESOURCE_SEARCH_SELECT.NO_RESOURCE_FOUND"))},directives:[L.i],pipes:[A.X$],styles:[""]}),e})()}}]);