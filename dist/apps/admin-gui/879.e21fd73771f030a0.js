"use strict";(self.webpackChunkadmin_gui=self.webpackChunkadmin_gui||[]).push([[879],{80992:(W,B,t)=>{t.d(B,{l:()=>m});var O=t(17700),c=t(4330),d=t(50826),s=t(38106),e=t(78337),P=t(1385),n=t(56223),i=t(65879),R=t(71365),h=t(96814),y=t(24516),N=t(64170),M=t(30617),Z=t(32296),I=t(11186),S=t(55959),v=t(12207),b=t(69755),D=t(16921);function U(_,p){1&_&&i._UZ(0,"perun-web-apps-loading-dialog")}function u(_,p){1&_&&i._UZ(0,"perun-web-apps-loading-table")}function E(_,p){if(1&_&&(i._UZ(0,"app-users-list",16),i.ALo(1,"translate")),2&_){const g=i.oxw(3);i.Q6J("displayedColumns",g.displayedColumns)("selection",g.selection)("tableId",g.tableId)("disableRouting",!0)("users",g.identities)("noUsersFoundLabel",i.lcZ(1,6,"DIALOGS.CONNECT_IDENTITY.NO_IDENTITIES"))}}function f(_,p){if(1&_&&(i.TgZ(0,"div",14),i.YNc(1,E,2,8,"app-users-list",15),i.qZA()),2&_){i.oxw();const g=i.MAs(18),C=i.oxw();i.xp6(1),i.Q6J("perunWebAppsLoader",C.loading)("perunWebAppsLoaderIndicator",g)}}function A(_,p){1&_&&(i.TgZ(0,"perun-web-apps-alert",17),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&_&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"DIALOGS.CONNECT_IDENTITY.SEARCH_HINT")," "))}function l(_,p){if(1&_){const g=i.EpF();i.TgZ(0,"div")(1,"div",2),i.NdJ("keyup",function(L){i.CHM(g);const Y=i.oxw();return i.KtG(Y.onKeyInput(L))}),i.TgZ(2,"h1",3),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.TgZ(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),i._uU(8),i.ALo(9,"translate"),i.qZA(),i._UZ(10,"input",6),i.TgZ(11,"mat-error"),i._uU(12),i.ALo(13,"translate"),i.qZA()(),i.TgZ(14,"button",7),i.NdJ("click",function(){i.CHM(g);const L=i.oxw();return i.KtG(L.onSearchByString())}),i.TgZ(15,"mat-icon"),i._uU(16,"search"),i.qZA()(),i.YNc(17,u,1,0,"ng-template",null,8,i.W1O),i.YNc(19,f,2,2,"div",9),i.YNc(20,A,3,3,"perun-web-apps-alert",10),i.qZA(),i.TgZ(21,"div",11)(22,"button",12),i.NdJ("click",function(){i.CHM(g);const L=i.oxw();return i.KtG(L.onCancel())}),i._uU(23),i.ALo(24,"translate"),i.qZA(),i.TgZ(25,"button",13),i.NdJ("click",function(){i.CHM(g);const L=i.oxw();return i.KtG(L.onAdd())}),i._uU(26),i.ALo(27,"translate"),i.qZA()()()()}if(2&_){const g=i.oxw();i.xp6(1),i.Tol(g.theme),i.xp6(2),i.Oqu(i.lcZ(4,13,"DIALOGS.CONNECT_IDENTITY.TITLE_"+g.target)),i.xp6(5),i.Oqu(i.lcZ(9,15,"DIALOGS.CONNECT_IDENTITY.SEARCH")),i.xp6(2),i.Q6J("formControl",g.searchCtrl),i.xp6(2),i.hij(" ",i.lcZ(13,17,"DIALOGS.CONNECT_IDENTITY.EMPTY_SEARCH_MESSAGE")," "),i.xp6(2),i.Q6J("disabled",g.loading),i.xp6(5),i.Q6J("ngIf",g.firstSearchDone),i.xp6(1),i.Q6J("ngIf",!g.firstSearchDone),i.xp6(3),i.hij(" ",i.lcZ(24,19,"DIALOGS.CONNECT_IDENTITY.CANCEL")," "),i.xp6(2),i.Q6J("disabled",0===g.selection.selected.length),i.xp6(1),i.hij(" ",i.lcZ(27,21,"DIALOGS.CONNECT_IDENTITY.CONNECT")," ")}}let m=(()=>{class _{constructor(g,C,L,Y,V,j){this.dialogRef=g,this.data=C,this.userManager=L,this.storeService=Y,this.notificator=V,this.translate=j,this.loading=!1,this.finalLoading=!1,this.identities=[],this.selection=new e.Ov(!1,[]),this.firstSearchDone=!1,this.displayedColumns=["select","id","user","name","email","logins","organization"],this.tableId=s.Iz}ngOnInit(){this.target=this.data.target,this.theme=this.data.theme,this.userId=this.data.userId,this.isService=this.data.isService,this.searchCtrl=new n.p4("",[n.kI.required,n.kI.pattern(".*[\\S]+.*")])}onAdd(){let g,C;this.finalLoading=!0,this.isService?(g=this.selection.selected[0].id,C=this.userId):(g=this.userId,C=this.selection.selected[0].id),this.userManager.addSpecificUserOwner(g,C).subscribe({next:()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.CONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)},error:()=>this.finalLoading=!1})}onCancel(){this.dialogRef.close(!1)}onSearchByString(){if(this.searchCtrl.invalid)return void this.searchCtrl.markAllAsTouched();this.loading=!0,this.firstSearchDone=!0;let g=[P.r.USER_DEF_ORGANIZATION,P.r.USER_DEF_PREFERRED_MAIL];g=g.concat(this.storeService.getLoginAttributeNames()),this.userManager.findRichUsersWithAttributes(this.searchCtrl.value,g).subscribe(C=>{this.identities=this.filterIdentities(C),this.loading=!1},()=>{this.loading=!1})}onKeyInput(g){"Enter"===g.key&&this.onSearchByString()}filterIdentities(g){return g.filter(this.isService?C=>!C.serviceUser:C=>C.serviceUser)}static#e=this.\u0275fac=function(C){return new(C||_)(i.Y36(O.so),i.Y36(O.WI),i.Y36(c.Fv),i.Y36(d.d6),i.Y36(d.V6),i.Y36(R.sK))};static#t=this.\u0275cmp=i.Xpm({type:_,selectors:[["app-connect-identity-dialog"]],decls:4,vars:5,consts:[["spinner",""],[4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"keyup"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[1,"me-2","search-field","no-border-mat-input"],["matInput","","autocomplete","false",3,"formControl"],["color","primary","mat-flat-button","",1,"me-2","search-btn",3,"disabled","click"],["searchSpinner",""],["class","position-relative",4,"ngIf"],["alert_type","info",4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","accent","mat-flat-button","",1,"ms-2",3,"disabled","click"],[1,"position-relative"],[3,"displayedColumns","selection","tableId","disableRouting","users","noUsersFoundLabel",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"displayedColumns","selection","tableId","disableRouting","users","noUsersFoundLabel"],["alert_type","info"]],template:function(C,L){if(1&C&&(i.YNc(0,U,1,0,"ng-template",null,0,i.W1O),i.TgZ(2,"div"),i.YNc(3,l,28,23,"div",1),i.qZA()),2&C){const Y=i.MAs(1);i.xp6(2),i.Gre("",L.theme," position-relative"),i.xp6(1),i.Q6J("perunWebAppsLoader",L.finalLoading)("perunWebAppsLoaderIndicator",Y)}},dependencies:[h.O5,y.Nt,N.KE,N.hX,N.TO,n.Fj,n.JJ,n.oH,M.Hw,Z.lW,O.uh,O.xY,O.H8,I.w,S.K,v.b,b.e,D.C,R.X$],styles:[".search-field[_ngcontent-%COMP%]{width:300px}.search-btn[_ngcontent-%COMP%]{width:50px}"]})}return _})()},88885:(W,B,t)=>{t.d(B,{B:()=>v});var O=t(4330),c=t(17700),d=t(50826),s=t(25313),e=t(65879),P=t(71365),n=t(96814),i=t(32296),R=t(11186),h=t(37803);function y(b,D){1&b&&e._UZ(0,"th",13)}function N(b,D){if(1&b&&(e.TgZ(0,"td",14),e._uU(1),e.ALo(2,"userFullName"),e.qZA()),2&b){const U=D.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,U))}}function M(b,D){1&b&&e._UZ(0,"tr",15)}function Z(b,D){1&b&&e._UZ(0,"tr",16)}function I(b,D){1&b&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&b&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_DISCONNECT_YOURSELF")," "))}function S(b,D){1&b&&(e.TgZ(0,"perun-web-apps-alert",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&b&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DIALOGS.DISCONNECT_IDENTITY.WARNING_LAST_USER")," "))}let v=(()=>{class b{constructor(U,u,E,f,A,l){this.dialogRef=U,this.data=u,this.userManager=E,this.notificator=f,this.translate=A,this.store=l,this.displayedColumns=["name"]}ngOnInit(){let U;this.targetTitle=this.data.targetTitle,this.targetDescription=this.data.targetDescription,this.theme=this.data.theme,this.userId=Number(this.data.userId),this.dataSource=new s.by([this.data.specificUser]),this.isService=this.data.isService,this.isService?(U=this.userId,this.disconnectingSelf=this.dataSource.data[0].id===this.store.getPerunPrincipal().userId):(U=this.dataSource.data[0].id,this.disconnectingSelf=this.userId===this.store.getPerunPrincipal().userId),this.userManager.getUsersBySpecificUser(U).subscribe(u=>{this.disconnectingLastOwner=1===u.length})}onConfirm(){let U,u;this.isService?(U=this.dataSource.data[0].id,u=this.userId):(U=this.userId,u=this.dataSource.data[0].id),this.userManager.removeSpecificUserOwner(U,u).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.DISCONNECT_IDENTITY.SUCCESS")),this.dialogRef.close(!0)})}onCancel(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(u){return new(u||b)(e.Y36(c.so),e.Y36(c.WI),e.Y36(O.Fv),e.Y36(d.V6),e.Y36(P.sK),e.Y36(d.d6))};static#t=this.\u0275cmp=e.Xpm({type:b,selectors:[["app-disconnect-identity-dialog"]],decls:26,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fw-bold"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["class","fw-bolder","mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["alert_type","warn",4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","warn","mat-flat-button","",1,"ms-2",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"fw-bolder"],["mat-row",""],["alert_type","warn"]],template:function(u,E){1&u&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div")(4,"div",1)(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",2),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"table",3),e.ynx(12,4),e.YNc(13,y,1,0,"th",5),e.YNc(14,N,3,3,"td",6),e.BQk(),e.YNc(15,M,1,0,"tr",7),e.YNc(16,Z,1,0,"tr",8),e.qZA(),e.YNc(17,I,3,3,"perun-web-apps-alert",9),e.YNc(18,S,3,3,"perun-web-apps-alert",9),e.qZA(),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return E.onCancel()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return E.onConfirm()}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()),2&u&&(e.xp6(1),e.Oqu(e.lcZ(2,13,"DIALOGS.DISCONNECT_IDENTITY.TITLE_"+E.targetTitle)),e.xp6(2),e.Tol(E.theme),e.xp6(3),e.Oqu(e.lcZ(7,15,"DIALOGS.DISCONNECT_IDENTITY.DESCRIPTION_"+E.targetDescription)),e.xp6(3),e.hij(" ",e.lcZ(10,17,"DIALOGS.DISCONNECT_IDENTITY.ASK")," "),e.xp6(2),e.Q6J("dataSource",E.dataSource),e.xp6(4),e.Q6J("matHeaderRowDef",E.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",E.displayedColumns),e.xp6(1),e.Q6J("ngIf",E.disconnectingSelf),e.xp6(1),e.Q6J("ngIf",E.disconnectingLastOwner),e.xp6(3),e.hij(" ",e.lcZ(22,19,"DIALOGS.DISCONNECT_IDENTITY.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(25,21,"DIALOGS.DISCONNECT_IDENTITY.REMOVE")," "))},dependencies:[n.O5,i.lW,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,c.uh,c.xY,c.H8,R.w,P.X$,h.d]})}return b})()},13350:(W,B,t)=>{t.d(B,{x:()=>S});var O=t(4330),c=t(17700),d=t(50826),s=t(56223),e=t(65879),P=t(71365),n=t(96814),i=t(24516),R=t(64170),h=t(32296);function y(v,b){1&v&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function N(v,b){1&v&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function M(v,b){1&v&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_FIRST_NAME")))}function Z(v,b){1&v&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LENGTH")))}function I(v,b){1&v&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&v&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DIALOGS.EDIT_USER.ERROR_LAST_NAME")))}let S=(()=>{class v{constructor(D,U,u,E,f){this.dialogRef=D,this.data=U,this.userService=u,this.notificator=E,this.translateService=f,this.loading=!1}ngOnInit(){this.theme=this.data.theme,this.titleBefore=new s.p4(this.data.user.titleBefore,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.titleAfter=new s.p4(this.data.user.titleAfter,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.firstName=new s.p4(this.data.user.firstName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.middleName=new s.p4(this.data.user.middleName,[s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)]),this.lastName=new s.p4(this.data.user.lastName,[s.kI.required,s.kI.pattern(".*[\\S]+.*"),s.kI.maxLength(129)])}onCancel(){this.dialogRef.close(!1)}onSave(){this.loading=!0,this.data.user.titleBefore=this.titleBefore.value,this.data.user.titleAfter=this.titleAfter.value,this.data.user.firstName=this.firstName.value,this.data.user.middleName=this.middleName.value,this.data.user.lastName=this.lastName.value,this.userService.updateUser({user:this.data.user}).subscribe(()=>{this.translateService.get("DIALOGS.EDIT_USER.SUCCESS").subscribe(D=>{this.notificator.showSuccess(D),this.dialogRef.close(!0)})},()=>this.loading=!1)}static#e=this.\u0275fac=function(U){return new(U||v)(e.Y36(c.so),e.Y36(c.WI),e.Y36(O.Fv),e.Y36(d.V6),e.Y36(P.sK))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-edit-user-dialog"]],decls:42,vars:38,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],["matInput","",3,"formControl"],[4,"ngIf"],["matInput","","data-cy","user-first-name-input","required","",3,"formControl"],["matInput","","required","",3,"formControl"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","accent","data-cy","user-save-button","mat-flat-button","",1,"ms-2",3,"disabled","click"]],template:function(U,u){1&U&&(e.TgZ(0,"div")(1,"h1",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1)(5,"mat-form-field")(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",2),e.YNc(10,y,3,3,"mat-error",3),e.qZA(),e.TgZ(11,"mat-form-field")(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",2),e.YNc(16,N,3,3,"mat-error",3),e.qZA(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",4),e.YNc(22,M,3,3,"mat-error",3),e.qZA(),e.TgZ(23,"mat-form-field")(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"input",2),e.YNc(28,Z,3,3,"mat-error",3),e.qZA(),e.TgZ(29,"mat-form-field")(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",5),e.YNc(34,I,3,3,"mat-error",3),e.qZA()(),e.TgZ(35,"div",6)(36,"button",7),e.NdJ("click",function(){return u.onCancel()}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"button",8),e.NdJ("click",function(){return u.onSave()}),e._uU(40),e.ALo(41,"translate"),e.qZA()()()),2&U&&(e.Tol(u.theme),e.xp6(2),e.Oqu(e.lcZ(3,22,"DIALOGS.EDIT_USER.DIALOG_TITLE")),e.xp6(5),e.Oqu(e.lcZ(8,24,"DIALOGS.EDIT_USER.TITLE_BEFORE")),e.xp6(2),e.Q6J("formControl",u.titleBefore),e.xp6(1),e.Q6J("ngIf",u.titleBefore.invalid),e.xp6(3),e.Oqu(e.lcZ(14,26,"DIALOGS.EDIT_USER.TITLE_AFTER")),e.xp6(2),e.Q6J("formControl",u.titleAfter),e.xp6(1),e.Q6J("ngIf",u.titleAfter.invalid),e.xp6(3),e.Oqu(e.lcZ(20,28,"DIALOGS.EDIT_USER.FIRST_NAME")),e.xp6(2),e.Q6J("formControl",u.firstName),e.xp6(1),e.Q6J("ngIf",u.firstName.invalid),e.xp6(3),e.Oqu(e.lcZ(26,30,"DIALOGS.EDIT_USER.MIDDLE_NAME")),e.xp6(2),e.Q6J("formControl",u.middleName),e.xp6(1),e.Q6J("ngIf",u.middleName.invalid),e.xp6(3),e.Oqu(e.lcZ(32,32,"DIALOGS.EDIT_USER.LAST_NAME")),e.xp6(2),e.Q6J("formControl",u.lastName),e.xp6(1),e.Q6J("ngIf",u.lastName.invalid),e.xp6(3),e.hij(" ",e.lcZ(38,34,"DIALOGS.EDIT_USER.CANCEL")," "),e.xp6(2),e.Q6J("disabled",u.loading||u.firstName.invalid||u.lastName.invalid||u.titleBefore.invalid||u.titleAfter.invalid||u.middleName.invalid),e.xp6(1),e.hij(" ",e.lcZ(41,36,"DIALOGS.EDIT_USER.SAVE")," "))},dependencies:[n.O5,i.Nt,R.KE,R.hX,R.TO,s.Fj,s.JJ,s.Q7,s.oH,h.lW,c.uh,c.xY,c.H8,P.X$]})}return v})()},46685:(W,B,t)=>{t.d(B,{G:()=>P});var O=t(17700),c=t(50826),d=t(4330),s=t(65879),e=t(54200);let P=(()=>{class n{constructor(R,h,y,N){this.data=R,this.dialogRef=h,this.facilityService=y,this.notificator=N,this.loading=!1}update(R){this.loading=!0,this.facilityService.updateFacilityBan({banOnFacility:{id:this.data.ban.id,beanName:"BanOnFacility",facilityId:this.data.ban.facilityId,userId:this.data.ban.userId,description:R.description,validityTo:R.validity}}).subscribe({next:()=>{this.notificator.showSuccess("DIALOGS.UPDATE_BAN.SUCCESS"),this.dialogRef.close(!0)},error:()=>{this.loading=!1}})}cancel(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(h){return new(h||n)(s.Y36(O.WI),s.Y36(O.so),s.Y36(d.IQ),s.Y36(c.V6))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-update-facility-ban-dialog"]],decls:1,vars:3,consts:[[3,"ban","theme","loading","cancel","update"]],template:function(h,y){1&h&&(s.TgZ(0,"app-update-ban-dialog",0),s.NdJ("cancel",function(){return y.cancel()})("update",function(M){return y.update(M)}),s.qZA()),2&h&&s.Q6J("ban",y.data.ban)("theme","facility-theme")("loading",y.loading)},dependencies:[e.l]})}return n})()},98836:(W,B,t)=>{t.d(B,{u:()=>Z});var O=t(50826),c=t(65879),d=t(44112),s=t(96814),e=t(74104),P=t(95845),n=t(5786),i=t(71365);function R(I,S){1&I&&(c._uU(0),c.ALo(1,"translate")),2&I&&c.hij(" ",c.lcZ(1,1,"ADMIN_USER.ENTITY")," ")}function h(I,S){if(1&I&&c._UZ(0,"app-one-entity-attribute-page",6),2&I){const v=c.oxw();c.Q6J("entityId",v.userId)("entity","user")}}function y(I,S){1&I&&(c._uU(0),c.ALo(1,"translate"),c.ALo(2,"translate")),2&I&&c.AsE(" ",c.lcZ(1,2,"ADMIN_USER.ENTITY")," - ",c.lcZ(2,4,"FACILITY_DETAIL.ENTITY")," ")}function N(I,S){if(1&I&&c._UZ(0,"app-two-entity-attribute-page",7),2&I){const v=c.oxw(2);c.Q6J("firstEntity","user")("firstEntityId",v.userId)("secondEntity","facility")}}function M(I,S){1&I&&(c.TgZ(0,"mat-tab"),c.YNc(1,y,3,6,"ng-template",3),c.YNc(2,N,1,3,"ng-template",4),c.qZA())}let Z=(()=>{class I{constructor(v,b,D){this.route=v,this.store=b,this.authResolver=D}ngOnInit(){this.route.parent.params.subscribe(v=>{this.userId=Number(v.userId),this.userId||(this.userId=this.store.getPerunPrincipal().userId),this.userFacilityAttAuth=this.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:this.userId,beanName:"User"}])})}static#e=this.\u0275fac=function(b){return new(b||I)(c.Y36(d.gz),c.Y36(O.d6),c.Y36(O.x4))};static#t=this.\u0275cmp=c.Xpm({type:I,selectors:[["app-user-settings-attributes"]],hostVars:2,hostBindings:function(b,D){2&b&&c.ekj("router-component",D.true)},decls:8,vars:4,consts:[[1,"page-subtitle"],["mat-stretch-tabs","false"],[1,"mb-2"],["matTabLabel",""],["matTabContent",""],[4,"ngIf"],[3,"entityId","entity"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(b,D){1&b&&(c.TgZ(0,"h1",0),c._uU(1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"mat-tab-group",1)(4,"mat-tab",2),c.YNc(5,R,2,3,"ng-template",3),c.YNc(6,h,1,2,"ng-template",4),c.qZA(),c.YNc(7,M,3,0,"mat-tab",5),c.qZA()),2&b&&(c.xp6(1),c.Oqu(c.lcZ(2,2,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),c.xp6(6),c.Q6J("ngIf",D.userFacilityAttAuth))},dependencies:[s.O5,e.Vc,e.uD,e.uX,e.SP,P.Y,n.t,i.X$]})}return I})()},81381:(W,B,t)=>{t.d(B,{Q:()=>l});var O=t(4330),c=t(50826),d=t(64124),s=t(82060),e=t(52260),P=t(46685),n=t(65879),i=t(17700),R=t(74104),h=t(55959),y=t(2730),N=t(6849),M=t(69755),Z=t(71365);function I(m,_){1&m&&(n._uU(0),n.ALo(1,"translate")),2&m&&n.hij(" ",n.lcZ(1,1,"USER_DETAIL.BANS.VO")," ")}function S(m,_){if(1&m){const p=n.EpF();n.TgZ(0,"perun-web-apps-ban-on-entity-list",8),n.NdJ("updateBan",function(C){n.CHM(p);const L=n.oxw(2);return n.KtG(L.updateVoBan(C))}),n.qZA()}if(2&m){const p=n.oxw(2);n.Q6J("bans",p.voBans)("displayedColumns",p.displayedColumns)("filter",p.filter)("updatePolicy","updateBan_BanOnVo_policy")}}function v(m,_){if(1&m){const p=n.EpF();n.TgZ(0,"perun-web-apps-debounce-filter",5),n.NdJ("filter",function(C){n.CHM(p);const L=n.oxw();return n.KtG(L.filter=C)}),n.qZA(),n.TgZ(1,"div",6),n.YNc(2,S,1,4,"perun-web-apps-ban-on-entity-list",7),n.qZA()}if(2&m){const p=n.oxw(),g=n.MAs(14);n.Q6J("placeholder","USER_DETAIL.BANS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",p.loading)("perunWebAppsLoaderIndicator",g)}}function b(m,_){1&m&&(n._uU(0),n.ALo(1,"translate")),2&m&&n.hij(" ",n.lcZ(1,1,"USER_DETAIL.BANS.RESOURCE")," ")}function D(m,_){if(1&m){const p=n.EpF();n.TgZ(0,"perun-web-apps-ban-on-entity-list",8),n.NdJ("updateBan",function(C){n.CHM(p);const L=n.oxw(2);return n.KtG(L.updateResourceBan(C))}),n.qZA()}if(2&m){const p=n.oxw(2);n.Q6J("bans",p.resourceBans)("displayedColumns",p.displayedColumns)("filter",p.filter)("updatePolicy","updateBan_BanOnResource_policy")}}function U(m,_){if(1&m){const p=n.EpF();n.TgZ(0,"perun-web-apps-debounce-filter",5),n.NdJ("filter",function(C){n.CHM(p);const L=n.oxw();return n.KtG(L.filter=C)}),n.qZA(),n.TgZ(1,"div",6),n.YNc(2,D,1,4,"perun-web-apps-ban-on-entity-list",7),n.qZA()}if(2&m){const p=n.oxw(),g=n.MAs(14);n.Q6J("placeholder","USER_DETAIL.BANS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",p.loading)("perunWebAppsLoaderIndicator",g)}}function u(m,_){1&m&&(n._uU(0),n.ALo(1,"translate")),2&m&&n.hij(" ",n.lcZ(1,1,"USER_DETAIL.BANS.FACILITY")," ")}function E(m,_){if(1&m){const p=n.EpF();n.TgZ(0,"perun-web-apps-ban-on-entity-list",8),n.NdJ("updateBan",function(C){n.CHM(p);const L=n.oxw(2);return n.KtG(L.updateFacilityBan(C))}),n.qZA()}if(2&m){const p=n.oxw(2);n.Q6J("bans",p.facilityBans)("displayedColumns",p.displayedColumns)("filter",p.filter)("updatePolicy","updateBan_BanOnFacility_policy")}}function f(m,_){if(1&m){const p=n.EpF();n.TgZ(0,"perun-web-apps-debounce-filter",5),n.NdJ("filter",function(C){n.CHM(p);const L=n.oxw();return n.KtG(L.filter=C)}),n.qZA(),n.TgZ(1,"div",6),n.YNc(2,E,1,4,"perun-web-apps-ban-on-entity-list",7),n.qZA()}if(2&m){const p=n.oxw(),g=n.MAs(14);n.Q6J("placeholder","USER_DETAIL.BANS.FILTER"),n.xp6(2),n.Q6J("perunWebAppsLoader",p.loading)("perunWebAppsLoaderIndicator",g)}}function A(m,_){1&m&&n._UZ(0,"perun-web-apps-loading-table")}let l=(()=>{class m{constructor(p,g,C,L,Y){this.voService=p,this.resourceService=g,this.facilityService=C,this.entityService=L,this.dialog=Y,this.loading=!1,this.voBans=[],this.resourceBans=[],this.facilityBans=[],this.filter="",this.displayedColumns=["banId","targetId","targetName","description","expiration","edit"]}ngOnInit(){this.loading=!0,this.user=this.entityService.getEntity(),this.refreshVoBans()}refreshVoBans(){this.loading=!0,this.voService.getEnrichedVoBansForUser(this.user.id).subscribe({next:p=>{this.voBans=p,this.loading=!1},error:()=>this.loading=!1})}refreshResourceBans(){this.loading=!0,this.resourceService.getEnrichedBansForUser(this.user.id).subscribe({next:p=>{this.resourceBans=p,this.loading=!1},error:()=>this.loading=!1})}refreshFacilityBans(){this.loading=!0,this.facilityService.getEnricheFacilitydBansForUser(this.user.id).subscribe({next:p=>{this.facilityBans=p,this.loading=!1},error:()=>this.loading=!1})}updateVoBan(p){this.dialog.open(s.A,this.getConfig(p)).afterClosed().subscribe(C=>{C&&this.refreshVoBans()})}updateResourceBan(p){this.dialog.open(e.e,this.getConfig(p)).afterClosed().subscribe(C=>{C&&this.refreshResourceBans()})}updateFacilityBan(p){this.dialog.open(P.G,this.getConfig(p)).afterClosed().subscribe(C=>{C&&this.refreshFacilityBans()})}getConfig(p){const g=(0,d.kZ)();return g.width="600px",g.data={ban:p.ban,theme:"user-theme"},g}refresh(p){0===p.index?this.refreshVoBans():1===p.index?this.refreshResourceBans():this.refreshFacilityBans()}static#e=this.\u0275fac=function(g){return new(g||m)(n.Y36(O.YF),n.Y36(O.xk),n.Y36(O.IQ),n.Y36(c.fb),n.Y36(i.uw))};static#t=this.\u0275cmp=n.Xpm({type:m,selectors:[["app-user-bans"]],decls:15,vars:3,consts:[[1,"page-subtitle"],["mat-stretch-tabs","false",1,"mt-3",3,"selectedTabChange"],["matTabLabel",""],["matTabContent",""],["spinner",""],[1,"mt-2","search-field",3,"placeholder","filter"],[1,"position-relative"],[3,"bans","displayedColumns","filter","updatePolicy","updateBan",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"bans","displayedColumns","filter","updatePolicy","updateBan"]],template:function(g,C){1&g&&(n.TgZ(0,"h1",0),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"mat-tab-group",1),n.NdJ("selectedTabChange",function(Y){return C.refresh(Y)}),n.TgZ(4,"mat-tab"),n.YNc(5,I,2,3,"ng-template",2),n.YNc(6,v,3,3,"ng-template",3),n.qZA(),n.TgZ(7,"mat-tab"),n.YNc(8,b,2,3,"ng-template",2),n.YNc(9,U,3,3,"ng-template",3),n.qZA(),n.TgZ(10,"mat-tab"),n.YNc(11,u,2,3,"ng-template",2),n.YNc(12,f,3,3,"ng-template",3),n.qZA()(),n.YNc(13,A,1,0,"ng-template",null,4,n.W1O)),2&g&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"USER_DETAIL.BANS.TITLE"),"\n"))},dependencies:[R.Vc,R.uD,R.uX,R.SP,h.K,y.P,N.s,M.e,Z.X$]})}return m})()},10088:(W,B,t)=>{t.d(B,{u:()=>U});var O=t(50826),c=t(4330),d=t(38106),s=t(65879),e=t(44112),P=t(96814),n=t(55959),i=t(44168),R=t(62481),h=t(2730),y=t(69755),N=t(71365);function M(u,E){1&u&&(s.TgZ(0,"h1",7),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&u&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function Z(u,E){1&u&&(s.TgZ(0,"h1",7),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&u&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}const I=function(){return["id","vo","name","description"]};function S(u,E){if(1&u&&s._UZ(0,"perun-web-apps-groups-list",8),2&u){const f=s.oxw();s.Q6J("disableMembers",!1)("groups",f.membersGroups)("displayedColumns",s.DdM(5,I))("filter",f.memberFilterValue)("tableId",f.tableId)}}function v(u,E){if(1&u&&s._UZ(0,"perun-web-apps-groups-list",8),2&u){const f=s.oxw(2);s.Q6J("disableMembers",!1)("groups",f.adminsGroups)("displayedColumns",s.DdM(5,I))("filter",f.adminFilterValue)("tableId",f.adminTableId)}}function b(u,E){if(1&u){const f=s.EpF();s.TgZ(0,"div",9)(1,"h1",7),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){s.CHM(f);const l=s.oxw();return s.KtG(l.refreshAdminTable())}),s.qZA(),s.TgZ(5,"perun-web-apps-debounce-filter",2),s.NdJ("filter",function(l){s.CHM(f);const m=s.oxw();return s.KtG(m.adminFilter(l))}),s.qZA(),s.TgZ(6,"div",3),s.YNc(7,v,1,6,"perun-web-apps-groups-list",4),s.qZA()()}if(2&u){const f=s.oxw(),A=s.MAs(8);s.xp6(2),s.hij(" ",s.lcZ(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(2),s.Q6J("perunWebAppsLoader",f.adminRefresh)("perunWebAppsLoaderIndicator",A)}}function D(u,E){1&u&&s._UZ(0,"perun-web-apps-loading-table")}let U=(()=>{class u{constructor(f,A,l,m,_){this.usersService=f,this.memberService=A,this.groupService=l,this.store=m,this.route=_,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=d.KE,this.adminTableId=d.Sb}ngOnInit(){(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(f=>this.userId=Number(f.userId)),this.refreshAdminTable(),this.refreshMemberTable()}memberFilter(f){this.memberFilterValue=f}adminFilter(f){this.adminFilterValue=f}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe(f=>{this.adminsGroups=f,this.adminRefresh=!1})}refreshMemberTable(){this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe(f=>{this.vos=f;for(const A of this.vos)this.memberService.getMemberByUser(A.id,this.userId).subscribe(l=>{this.groupService.getMemberGroups(l.id).subscribe(m=>{this.membersGroups=this.membersGroups.concat(m),this.vos.indexOf(A)===this.vos.length-1&&(this.memberRefresh=!1)})});0===f.length&&(this.memberRefresh=!1)})}static#e=this.\u0275fac=function(A){return new(A||u)(s.Y36(c.Fv),s.Y36(c.uq),s.Y36(c.ff),s.Y36(O.d6),s.Y36(e.gz))};static#t=this.\u0275cmp=s.Xpm({type:u,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(A,l){2&A&&s.ekj("router-component",l.true)},decls:9,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"position-relative"],[3,"disableMembers","groups","displayedColumns","filter","tableId",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["class","mt-5",4,"ngIf"],["spinner",""],[1,"page-subtitle"],[3,"disableMembers","groups","displayedColumns","filter","tableId"],[1,"mt-5"]],template:function(A,l){if(1&A&&(s.YNc(0,M,3,3,"h1",0),s.YNc(1,Z,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return l.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-debounce-filter",2),s.NdJ("filter",function(_){return l.memberFilter(_)}),s.qZA(),s.TgZ(4,"div",3),s.YNc(5,S,1,6,"perun-web-apps-groups-list",4),s.qZA(),s.YNc(6,b,8,6,"div",5),s.YNc(7,D,1,0,"ng-template",null,6,s.W1O)),2&A){const m=s.MAs(8);s.Q6J("ngIf",l.showPrincipal),s.xp6(1),s.Q6J("ngIf",!l.showPrincipal),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(2),s.Q6J("perunWebAppsLoader",l.memberRefresh)("perunWebAppsLoaderIndicator",m),s.xp6(1),s.Q6J("ngIf",!l.showPrincipal)}},dependencies:[P.O5,n.K,i.W,R.t,h.P,y.e,N.X$]})}return u})()},61527:(W,B,t)=>{t.d(B,{j:()=>D});var O=t(4330),c=t(50826),d=t(38106),s=t(65879),e=t(44112),P=t(96814),n=t(55959),i=t(80238),R=t(62481),h=t(2730),y=t(69755),N=t(71365);function M(U,u){1&U&&(s.TgZ(0,"h1",7),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&U&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function Z(U,u){1&U&&(s.TgZ(0,"h1",7),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&U&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function I(U,u){if(1&U&&s._UZ(0,"perun-web-apps-vos-list",8),2&U){const E=s.oxw();s.Q6J("displayedColumns",E.displayedColumns)("tableId",E.memberTableId)("filterValue",E.memberFilterValue)("vos",E.vosWhereIsMember)}}function S(U,u){if(1&U&&s._UZ(0,"perun-web-apps-vos-list",8),2&U){const E=s.oxw(2);s.Q6J("displayedColumns",E.displayedColumns)("tableId",E.adminTableId)("filterValue",E.adminFilterValue)("vos",E.vosWhereIsAdmin)}}function v(U,u){if(1&U){const E=s.EpF();s.TgZ(0,"div",9)(1,"h1",7),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){s.CHM(E);const A=s.oxw();return s.KtG(A.refreshAdminTable())}),s.qZA(),s.TgZ(5,"perun-web-apps-debounce-filter",2),s.NdJ("filter",function(A){s.CHM(E);const l=s.oxw();return s.KtG(l.applyAdminFilter(A))}),s.qZA(),s.TgZ(6,"div",3),s.YNc(7,S,1,4,"perun-web-apps-vos-list",4),s.qZA()()}if(2&U){const E=s.oxw(),f=s.MAs(8);s.xp6(2),s.Oqu(s.lcZ(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),s.xp6(3),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(2),s.Q6J("perunWebAppsLoader",E.adminRefresh)("perunWebAppsLoaderIndicator",f)}}function b(U,u){1&U&&s._UZ(0,"perun-web-apps-loading-table")}let D=(()=>{class U{constructor(E,f,A,l){this.usersService=E,this.authResolver=f,this.store=A,this.route=l,this.vosWhereIsAdmin=[],this.vosWhereIsMember=[],this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=d.YF,this.memberTableId=d.gc}ngOnInit(){(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe(E=>this.userId=Number(E.userId)),this.refreshAdminTable(),this.refreshMemberTable()}refreshMemberTable(){this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe(E=>{this.vosWhereIsMember=E,this.memberRefresh=!1},()=>this.memberRefresh=!1)}refreshAdminTable(){this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe(E=>{this.vosWhereIsAdmin=E,this.adminRefresh=!1},()=>this.adminRefresh=!1)}applyMemberFilter(E){this.memberFilterValue=E}applyAdminFilter(E){this.adminFilterValue=E}static#e=this.\u0275fac=function(f){return new(f||U)(s.Y36(O.Fv),s.Y36(c.x4),s.Y36(c.d6),s.Y36(e.gz))};static#t=this.\u0275cmp=s.Xpm({type:U,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(f,A){2&f&&s.ekj("router-component",A.true)},decls:9,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"position-relative"],[3,"displayedColumns","tableId","filterValue","vos",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["class","mt-5",4,"ngIf"],["spinner",""],[1,"page-subtitle"],[3,"displayedColumns","tableId","filterValue","vos"],[1,"mt-5"]],template:function(f,A){if(1&f&&(s.YNc(0,M,3,3,"h1",0),s.YNc(1,Z,3,3,"h1",0),s.TgZ(2,"perun-web-apps-refresh-button",1),s.NdJ("refresh",function(){return A.refreshMemberTable()}),s.qZA(),s.TgZ(3,"perun-web-apps-debounce-filter",2),s.NdJ("filter",function(m){return A.applyMemberFilter(m)}),s.qZA(),s.TgZ(4,"div",3),s.YNc(5,I,1,4,"perun-web-apps-vos-list",4),s.qZA(),s.YNc(6,v,8,6,"div",5),s.YNc(7,b,1,0,"ng-template",null,6,s.W1O)),2&f){const l=s.MAs(8);s.Q6J("ngIf",A.isMyProfile),s.xp6(1),s.Q6J("ngIf",!A.isMyProfile),s.xp6(2),s.Q6J("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),s.xp6(2),s.Q6J("perunWebAppsLoader",A.memberRefresh)("perunWebAppsLoaderIndicator",l),s.xp6(1),s.Q6J("ngIf",!A.isMyProfile)}},dependencies:[P.O5,n.K,i.Z,R.t,h.P,y.e,N.X$]})}return U})()},5824:(W,B,t)=>{t.d(B,{Z:()=>A});var O=t(4330),c=t(25313),d=t(50826),s=t(1385),e=t(64124),P=t(63712),n=t(65879),i=t(44112),R=t(17700),h=t(96814),y=t(30617),N=t(32296),M=t(92596),Z=t(95195),I=t(39518),S=t(19218),v=t(71365);function b(l,m){1&l&&n._UZ(0,"th",13)}function D(l,m){if(1&l&&(n.TgZ(0,"td",14),n._uU(1),n.qZA()),2&l){const _=m.$implicit;n.xp6(1),n.hij("",_.displayName,":")}}function U(l,m){1&l&&n._UZ(0,"th",13)}function u(l,m){if(1&l){const _=n.EpF();n.TgZ(0,"td",15)(1,"div",16),n._uU(2),n.TgZ(3,"button",17),n.NdJ("click",function(){n.CHM(_);const g=n.oxw(2);return n.KtG(g.changeEmail())}),n.ALo(4,"translate"),n.TgZ(5,"mat-icon"),n._uU(6,"edit"),n.qZA()()()()}if(2&l){const _=m.$implicit;n.xp6(2),n.hij(" ",_.value," "),n.xp6(1),n.s9C("matTooltip",n.lcZ(4,2,"USER_DETAIL.OVERVIEW.CHANGE_EMAIL"))}}function E(l,m){1&l&&n._UZ(0,"tr",18)}function f(l,m){if(1&l&&(n.TgZ(0,"div",3)(1,"mat-card",4)(2,"mat-card-header")(3,"mat-card-title")(4,"h1",5),n._uU(5),n.ALo(6,"translate"),n.qZA()()(),n.TgZ(7,"mat-card-content")(8,"table",6),n.ynx(9,7),n.YNc(10,b,1,0,"th",8),n.YNc(11,D,2,1,"td",9),n.BQk(),n.ynx(12,10),n.YNc(13,U,1,0,"th",8),n.YNc(14,u,7,4,"td",11),n.BQk(),n.YNc(15,E,1,0,"tr",12),n.qZA()()()()),2&l){const _=n.oxw();n.xp6(5),n.Oqu(n.lcZ(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),n.xp6(3),n.Q6J("dataSource",_.mailDataSource),n.xp6(7),n.Q6J("matRowDefColumns",_.displayedColumns)}}let A=(()=>{class l{constructor(_,p,g,C,L){this.userService=_,this.attributeService=p,this.storeService=g,this.route=C,this.dialog=L,this.items=[],this.settingsItems=[],this.isServiceUser=!1,this.displayedColumns=["name","value"],this.inMyProfile=!1}ngOnInit(){this.route.params.subscribe(_=>{_.userId?this.userService.getUserById(Number(_.userId)).subscribe(p=>{this.user=p,this.isServiceUser=p.serviceUser,this.setItems(`/admin/users/${this.user.id}`),this.setSettingsItems()}):(this.inMyProfile=!0,this.userID=this.storeService.getPerunPrincipal().user.id,this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(p=>{this.preferredMail=p,this.handleMailNotDefined(),this.mailDataSource=new c.by([this.preferredMail]),this.setItems("/myProfile"),this.setSettingsItems()}))})}changeEmail(){const _=(0,e.kZ)();_.width="350px",_.data={userId:this.userID},this.dialog.open(P.gr,_).afterClosed().subscribe(g=>{g&&this.attributeService.getUserAttributeByName(this.userID,s.r.USER_DEF_PREFERRED_MAIL).subscribe(C=>{this.preferredMail=C,this.handleMailNotDefined(),this.mailDataSource=new c.by([this.preferredMail])})})}handleMailNotDefined(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:(0,e.Cz)(s.r.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:new Object("-")})}setItems(_){this.items=[{cssIcon:"perun-vo",url:`${_}/organizations`,label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:`${_}/groups`,label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],this.inMyProfile||this.items.push({cssIcon:"perun-user",url:`${_}/accounts`,label:"MENU_ITEMS.USER.ACCOUNTS",style:"user-btn"},{cssIcon:"perun-identity",url:`${_}/identities`,label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:`${_}/facilities`,label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:`${_}/resources`,label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.items.push({cssIcon:"perun-attributes",url:`${_}/attributes`,label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.items.push({cssIcon:"perun-roles",url:`${_}/roles`,label:"MENU_ITEMS.USER.ROLES",style:"user-btn"}),this.items.push(this.isServiceUser?{cssIcon:"perun-manager",url:`${_}/associated-users`,label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:`${_}/service-identities`,label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}),this.items.push({cssIcon:"perun-ban",url:"bans",label:"MENU_ITEMS.USER.BANS",style:"user-btn"})}setSettingsItems(){this.settingsItems=[],this.inMyProfile&&this.settingsItems.push({cssIcon:"perun-settings2",url:"/myProfile/settings/passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings1",url:"/myProfile/settings/guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}static#e=this.\u0275fac=function(p){return new(p||l)(n.Y36(O.Fv),n.Y36(O.H8),n.Y36(d.d6),n.Y36(i.gz),n.Y36(R.uw))};static#t=this.\u0275cmp=n.Xpm({type:l,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(p,g){2&p&&n.ekj("router-component",g.true)},decls:3,vars:5,consts:[["class","align-cards",4,"ngIf"],[3,"items"],[3,"items","title","sectionId"],[1,"align-cards"],["appearance","outlined",1,"card","mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","fw-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"fw-bold"],["mat-cell",""],[1,"d-flex","align-items-center"],["mat-icon-button","",1,"ms-3",3,"matTooltip","click"],["mat-row",""]],template:function(p,g){1&p&&(n.YNc(0,f,16,5,"div",0),n._UZ(1,"perun-web-apps-menu-buttons-field",1)(2,"perun-web-apps-expandable-tiles",2)),2&p&&(n.Q6J("ngIf",g.inMyProfile),n.xp6(1),n.Q6J("items",g.items),n.xp6(1),n.Q6J("items",g.settingsItems)("title","MENU_ITEMS.USER.SETTINGS")("sectionId","settings"))},dependencies:[h.O5,y.Hw,N.RK,c.BZ,c.fO,c.w1,c.Dz,c.nj,c.ge,c.ev,c.Gk,M.gM,Z.a8,Z.dn,Z.dk,Z.n5,I.L,S.A,v.X$],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem 0;display:inline-block;vertical-align:top}"]})}return l})()},47406:(W,B,t)=>{t.d(B,{t:()=>N});var O=t(4330),c=t(50826),d=t(65879),s=t(44112),e=t(74104),P=t(65573),n=t(71365);function i(M,Z){1&M&&(d._uU(0),d.ALo(1,"translate")),2&M&&d.hij(" ",d.lcZ(1,1,"USER_DETAIL.DASHBOARD.DIRECT_ROLES")," ")}function R(M,Z){if(1&M){const I=d.EpF();d.TgZ(0,"app-perun-web-apps-roles-page",4),d.NdJ("reload",function(){d.CHM(I);const v=d.oxw();return d.KtG(v.getData())})("startLoading",function(){d.CHM(I);const v=d.oxw();return d.KtG(v.outerLoading=!0)}),d.qZA()}if(2&M){const I=d.oxw();d.Q6J("outerLoading",I.outerLoading)("roles",I.roles)("entityId",I.userId)("showDescription",I.showDescription)("entityType",I.entityType)("editable",!0)}}function h(M,Z){1&M&&(d._uU(0),d.ALo(1,"translate")),2&M&&d.hij(" ",d.lcZ(1,1,"USER_DETAIL.DASHBOARD.AUTHORIZED_GROUP_BASED_ROLES")," ")}function y(M,Z){if(1&M){const I=d.EpF();d.TgZ(0,"app-perun-web-apps-roles-page",5),d.NdJ("reload",function(){d.CHM(I);const v=d.oxw();return d.KtG(v.getData())})("startLoading",function(){d.CHM(I);const v=d.oxw();return d.KtG(v.outerLoading=!0)}),d.qZA()}if(2&M){const I=d.oxw();d.Q6J("outerLoading",I.outerLoading)("roles",I.indirectRoles)("entityId",I.userId)("showDescription",I.showDescription)("entityType",I.entityType)("editable",!1)("complementaryObjectsWithAuthzGroups",I.rolesComplementaryObjectsWithAuthzGroups)}}let N=(()=>{class M{constructor(I,S,v,b){this.authzResolverService=I,this.route=S,this.store=v,this.roleService=b,this.roles=new Map,this.indirectRoles=new Map,this.rolesComplementaryObjectsWithAuthzGroups=new Map,this.showDescription=!0}ngOnInit(){this.outerLoading=!0,this.route.parent.params.subscribe(I=>{I.userId?(this.entityType="USER",this.userId=Number(I.userId)):(this.userId=this.store.getPerunPrincipal().userId,this.entityType="SELF"),this.getData()})}getData(){this.outerLoading=!0,this.roles.clear(),this.authzResolverService.getUserDirectRoles(this.userId).subscribe({next:I=>{const S=Object.keys(I).map(v=>v.toUpperCase());this.roles=this.roleService.prepareRoles(I,S),this.indirectRoles.clear(),this.authzResolverService.getUserRolesObtainedFromAuthorizedGroupMemberships(this.userId).subscribe({next:v=>{const b=Object.keys(v).map(D=>D.toUpperCase());this.indirectRoles=this.roleService.prepareRoles(v,b),this.rolesComplementaryObjectsWithAuthzGroups.clear(),this.authzResolverService.getRoleComplementaryObjectsWithAuthorizedGroups(this.userId).subscribe({next:D=>{this.rolesComplementaryObjectsWithAuthzGroups=this.roleService.prepareComplementaryObjects(Object.keys(D),D),this.outerLoading=!1},error:()=>this.outerLoading=!1})},error:()=>this.outerLoading=!1})},error:()=>this.outerLoading=!1})}static#e=this.\u0275fac=function(S){return new(S||M)(d.Y36(O.Ct),d.Y36(s.gz),d.Y36(c.d6),d.Y36(c.Nj))};static#t=this.\u0275cmp=d.Xpm({type:M,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(S,v){2&S&&d.ekj("router-component",v.true)},decls:10,vars:3,consts:[[1,"page-subtitle","d-flex"],["mat-stretch-tabs","false"],["matTabLabel",""],["matTabContent",""],[3,"outerLoading","roles","entityId","showDescription","entityType","editable","reload","startLoading"],[3,"outerLoading","roles","entityId","showDescription","entityType","editable","complementaryObjectsWithAuthzGroups","reload","startLoading"]],template:function(S,v){1&S&&(d.TgZ(0,"h1",0),d._uU(1),d.ALo(2,"translate"),d.qZA(),d.TgZ(3,"mat-tab-group",1)(4,"mat-tab"),d.YNc(5,i,2,3,"ng-template",2),d.YNc(6,R,1,6,"ng-template",3),d.qZA(),d.TgZ(7,"mat-tab"),d.YNc(8,h,2,3,"ng-template",2),d.YNc(9,y,1,7,"ng-template",3),d.qZA()()),2&S&&(d.xp6(1),d.Oqu(d.lcZ(2,1,"ROLES.TITLE")))},dependencies:[e.Vc,e.uD,e.uX,e.SP,P._,n.X$]})}return M})()},35938:(W,B,t)=>{t.d(B,{d:()=>u});var O=t(38106),c=t(4330),d=t(78337),s=t(64124),e=t(80992),P=t(88885),n=t(50826),i=t(37398),R=t(94664),h=t(65879),y=t(17700),N=t(44112),M=t(32296),Z=t(55959),I=t(62481),S=t(69755),v=t(16921),b=t(71365);function D(E,f){1&E&&h._UZ(0,"perun-web-apps-loading-table")}function U(E,f){if(1&E&&(h._UZ(0,"app-users-list",7),h.ALo(1,"translate")),2&E){const A=h.oxw();h.Q6J("noUsersFoundLabel",h.lcZ(1,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.NO_ASSOCIATED_USERS"))("disableRouting",A.disableRouting)("displayedColumns",A.displayedColumns)("selection",A.selection)("tableId",A.tableId)("users",A.associatedUsers)}}let u=(()=>{class E{constructor(A,l,m,_,p){this.dialog=A,this.router=l,this.authResolver=m,this.userManager=_,this.entityStorageService=p,this.loading=!1,this.selection=new d.Ov(!1,[]),this.associatedUsers=[],this.tableId=O.It,this.displayedColumns=["select","id","user","name","email","logins","organization"]}ngOnInit(){this.loading=!0,this.user=this.entityStorageService.getEntity(),this.refreshTable()}refreshTable(){this.loading=!0,this.userManager.getUsersBySpecificUser(this.user.id).pipe((0,i.U)(A=>A.map(l=>l.id)),(0,R.w)(A=>this.userManager.getRichUsersWithAttributesByIds(A))).subscribe(A=>{this.associatedUsers=A,this.selection.clear(),this.setAuth(),this.loading=!1})}setAuth(){this.addAuth=this.authResolver.isAuthorized("addSpecificUserOwner_User_User_policy",[this.user]),this.removeAuth=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[this.user]),this.disableRouting=!this.authResolver.isPerunAdminOrObserver()}onAdd(){const A=(0,s.kZ)();A.width="1250px",A.data={userId:this.user.id,theme:"user-theme",isService:!0,target:"USER"},this.dialog.open(e.l,A).afterClosed().subscribe(m=>{m&&this.refreshTable()})}onRemove(){const A=(0,s.kZ)();A.width="650px",A.data={identities:this.selection.selected,userId:this.user.id,specificUser:this.selection.selected[0],isService:!0,theme:"user-theme",targetTitle:"USER",targetDescription:"SERVICE"},this.dialog.open(P.B,A).afterClosed().subscribe(m=>{m&&(this.authResolver.isAuthorized("getUsersBySpecificUser_User_policy",[this.user])?this.refreshTable():this.router.navigate(["/myProfile"],{queryParamsHandling:"preserve"}))})}static#e=this.\u0275fac=function(l){return new(l||E)(h.Y36(y.uw),h.Y36(N.F0),h.Y36(n.x4),h.Y36(c.Fv),h.Y36(n.fb))};static#t=this.\u0275cmp=h.Xpm({type:E,selectors:[["app-user-settings-associated-users"]],decls:15,vars:12,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],["spinner",""],[1,"position-relative"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"noUsersFoundLabel","disableRouting","displayedColumns","selection","tableId","users"]],template:function(l,m){if(1&l&&(h.TgZ(0,"div")(1,"h1",0),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"perun-web-apps-refresh-button",1),h.NdJ("refresh",function(){return m.refreshTable()}),h.qZA(),h.TgZ(5,"button",2),h.NdJ("click",function(){return m.onAdd()}),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.TgZ(8,"button",3),h.NdJ("click",function(){return m.onRemove()}),h._uU(9),h.ALo(10,"translate"),h.qZA(),h.YNc(11,D,1,0,"ng-template",null,4,h.W1O),h.TgZ(13,"div",5),h.YNc(14,U,2,8,"app-users-list",6),h.qZA()()),2&l){const _=h.MAs(12);h.xp6(2),h.Oqu(h.lcZ(3,6,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.TITLE")),h.xp6(4),h.hij(" ",h.lcZ(7,8,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.ADD")," "),h.xp6(2),h.Q6J("disabled",0===m.selection.selected.length),h.xp6(1),h.hij(" ",h.lcZ(10,10,"USER_DETAIL.SETTINGS.ASSOCIATED_USERS.REMOVE")," "),h.xp6(5),h.Q6J("perunWebAppsLoader",m.loading)("perunWebAppsLoaderIndicator",_)}},dependencies:[M.lW,Z.K,I.t,S.e,v.C,b.X$]})}return E})()},99497:(W,B,t)=>{t.d(B,{R:()=>E});var O=t(78337),c=t(4330),d=t(38106),s=t(64124),e=t(80992),P=t(88885),n=t(50826),i=t(65879),R=t(44112),h=t(17700),y=t(96814),N=t(32296),M=t(55959),Z=t(62481),I=t(69755),S=t(16921),v=t(71365);function b(f,A){if(1&f){const l=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(){i.CHM(l);const _=i.oxw();return i.KtG(_.onAdd())}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&f&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.CREATE"),"\n"))}function D(f,A){if(1&f){const l=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){i.CHM(l);const _=i.oxw();return i.KtG(_.onRemove())}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&f){const l=i.oxw();i.Q6J("disabled",0===l.selection.selected.length),i.xp6(1),i.hij(" ",i.lcZ(2,2,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.DELETE"),"\n")}}function U(f,A){1&f&&i._UZ(0,"perun-web-apps-loading-table")}function u(f,A){if(1&f&&(i._UZ(0,"app-users-list",9),i.ALo(1,"translate")),2&f){const l=i.oxw();i.Q6J("noUsersFoundLabel",i.lcZ(1,6,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.NO_IDENTITIES"))("displayedColumns",l.displayedColumns)("selection",l.selection)("tableId",l.tableId)("routeToAdmin",l.routeToAdminSection)("users",l.identities)}}let E=(()=>{class f{constructor(l,m,_,p,g,C){this.route=l,this.dialog=m,this.router=_,this.userManager=p,this.authResolver=g,this.store=C,this.loading=!1,this.selection=new O.Ov(!1,[]),this.identities=[],this.tableId=d.Iz,this.displayedColumns=["select","id","user","name"],this.routeToAdminSection=!0,this.targetTitle="SERVICE",this.targetDescription="SERVICE"}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.loading=!0,this.subscription=this.route.parent.params.subscribe(l=>{this.userId=Number(l.userId),this.userId||(this.targetTitle="SERVICE",this.targetDescription="SELF",this.userId=this.store.getPerunPrincipal().userId,this.routeToAdminSection=!1),this.setAuthRights(),this.refreshTable()})}refreshTable(){this.loading=!0,this.userManager.getSpecificUsersByUser(this.userId).subscribe(l=>{this.identities=l,this.selection.clear(),this.loading=!1})}setAuthRights(){this.addIdentity=this.authResolver.isPerunAdmin(),this.removeIdentity=this.authResolver.isAuthorized("removeSpecificUserOwner_User_User_policy",[{id:this.userId,beanName:"User"}])}onAdd(){const l=(0,s.kZ)();l.width="1250px",l.data={userId:this.userId,theme:"user-theme",isService:!1,target:this.targetTitle},this.dialog.open(e.l,l).afterClosed().subscribe(_=>{_&&this.refreshTable()})}onRemove(){const l=(0,s.kZ)();l.width="650px",l.data={identities:this.selection.selected,userId:this.userId,specificUser:this.selection.selected[0],theme:"user-theme",targetTitle:this.targetTitle,targetDescription:this.targetDescription},this.dialog.open(P.B,l).afterClosed().subscribe(_=>{_&&this.refreshTable()})}static#e=this.\u0275fac=function(m){return new(m||f)(i.Y36(R.gz),i.Y36(h.uw),i.Y36(R.F0),i.Y36(c.Fv),i.Y36(n.x4),i.Y36(n.d6))};static#t=this.\u0275cmp=i.Xpm({type:f,selectors:[["app-user-settings-service-identities"]],decls:10,vars:7,consts:[[1,"page-subtitle"],[3,"refresh"],["color","accent","class","me-2 action-button","mat-flat-button","",3,"click",4,"ngIf"],["color","warn","class","me-2","mat-flat-button","",3,"disabled","click",4,"ngIf"],["spinner",""],[1,"position-relative"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],["color","warn","mat-flat-button","",1,"me-2",3,"disabled","click"],[3,"noUsersFoundLabel","displayedColumns","selection","tableId","routeToAdmin","users"]],template:function(m,_){if(1&m&&(i.TgZ(0,"h1",0),i._uU(1),i.ALo(2,"translate"),i.qZA(),i.TgZ(3,"perun-web-apps-refresh-button",1),i.NdJ("refresh",function(){return _.refreshTable()}),i.qZA(),i.YNc(4,b,3,3,"button",2),i.YNc(5,D,3,4,"button",3),i.YNc(6,U,1,0,"ng-template",null,4,i.W1O),i.TgZ(8,"div",5),i.YNc(9,u,2,8,"app-users-list",6),i.qZA()),2&m){const p=i.MAs(7);i.xp6(1),i.Oqu(i.lcZ(2,5,"USER_DETAIL.SETTINGS.SERVICE_IDENTITIES.TITLE")),i.xp6(3),i.Q6J("ngIf",_.addIdentity),i.xp6(1),i.Q6J("ngIf",_.removeIdentity),i.xp6(4),i.Q6J("perunWebAppsLoader",_.loading)("perunWebAppsLoaderIndicator",p)}},dependencies:[y.O5,N.lW,M.K,Z.t,I.e,S.C,v.X$]})}return f})()},9879:(W,B,t)=>{t.r(B),t.d(B,{UsersModule:()=>dt});var O=t(96814),c=t(44112),d=t(61527),s=t(10088),e=t(65879),P=t(11712);let n=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(r,T){2&r&&e.ekj("router-component",T.true)},decls:1,vars:0,template:function(r,T){1&r&&e._UZ(0,"app-animated-router-outlet")},dependencies:[P.A]})}return o})();var i=t(4330),R=t(55940),h=t(39518);function y(o,K){1&o&&e._UZ(0,"mat-spinner",2)}function N(o,K){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"perun-web-apps-menu-buttons-field",3),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.Q6J("items",a.navItems)}}let M=(()=>{class o{constructor(a,r){this.route=a,this.userManager=r,this.navItems=[],this.loading=!1}ngOnInit(){window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe(a=>{const r=Number(a.userId);this.userManager.getUserById(r).subscribe(T=>{this.isServiceUser=T.serviceUser,this.initNavItems(),this.loading=!1},()=>this.loading=!1)})):this.initNavItems()}initNavItems(){this.navItems=[],window.location.pathname.startsWith("/admin")||this.navItems.push({cssIcon:"perun-settings2",url:"/myProfile/settings/passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings1",url:"/myProfile/settings/guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(c.gz),e.Y36(i.Fv))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(r,T){2&r&&e.ekj("router-component",T.true)},decls:2,vars:2,consts:[["class","me-auto ms-auto",4,"ngIf"],[4,"ngIf"],[1,"me-auto","ms-auto"],[3,"items"]],template:function(r,T){1&r&&(e.YNc(0,y,1,0,"mat-spinner",0),e.YNc(1,N,2,1,"div",1)),2&r&&(e.Q6J("ngIf",T.loading),e.xp6(1),e.Q6J("ngIf",!T.loading))},dependencies:[O.O5,R.Ou,h.L]})}return o})();var Z=t(98836),I=t(78932),S=t(64124),v=t(38573),b=t(23680),D=t(64170),U=t(98525),u=t(71365);function E(o,K){if(1&o&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&o){const a=K.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}let f=(()=>{class o{constructor(a){this.guiConfigService=a,this.tablePageSizeOptions=S.f7}ngOnInit(){this.preferredTablePageSize=this.guiConfigService.getNumber(v.Rc)}updatePreferredTablePageSize(){this.guiConfigService.setNumber(v.Rc,this.preferredTablePageSize)}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(v.Ng))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(r,T){1&r&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-select",3),e.NdJ("valueChange",function(G){return T.preferredTablePageSize=G})("valueChange",function(){return T.updatePreferredTablePageSize()}),e.YNc(9,E,2,2,"mat-option",4),e.qZA()()()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),e.xp6(5),e.Oqu(e.lcZ(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),e.xp6(2),e.Q6J("value",T.preferredTablePageSize),e.xp6(1),e.Q6J("ngForOf",T.tablePageSizeOptions))},dependencies:[O.sg,b.ey,D.KE,D.hX,U.gD,u.X$]})}return o})();var A=t(5824),l=t(50826),m=t(39743),_=t(30617),p=t(92596),g=t(41419),C=t(92738),L=t(52269),Y=t(37803);const V=function(){return{color:"black"}},j=function(){return["/myProfile"]};function k(o,K){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.TgZ(2,"div",2),e._UZ(3,"mat-icon",3),e.ALo(4,"translate"),e.TgZ(5,"div",4)(6,"div",5)(7,"a",6),e.NdJ("auxclick",function(r){return r.preventDefault()}),e._uU(8),e.ALo(9,"userFullName"),e.qZA(),e.TgZ(10,"span",7),e._uU(11),e.qZA()(),e.TgZ(12,"span",8),e._uU(13),e.ALo(14,"translate"),e.ALo(15,"translate"),e.qZA()()(),e._UZ(16,"app-animated-router-outlet"),e.qZA()),2&o){const a=e.oxw();e.xp6(3),e.s9C("matTooltip",e.lcZ(4,9,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(17,V)),e.xp6(4),e.Q6J("perunWebAppsMiddleClickRouterLink",e.DdM(18,j))("routerLink",e.DdM(19,j)),e.xp6(1),e.hij(" ",e.lcZ(9,11,a.user)," "),e.xp6(3),e.hij(" \xa0#",a.user.id," "),e.xp6(2),e.lnq(" ",e.lcZ(14,13,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(15,15,"MENU_ITEMS.USER.USER_TYPE"),": ",a.getUserType()," ")}}let ee=(()=>{class o{constructor(a,r,T,x){this.sideMenuService=a,this.store=r,this.entityStore=T,this.router=x}ngOnInit(){this.path=this.router.url,this.router.events.subscribe(()=>{this.path=this.router.url}),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.entityStore.setEntity(this.user),this.sideMenuService.setUserItems([])}getUserType(){return this.user.serviceUser?"Service":"Person"}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(m.D),e.Y36(l.d6),e.Y36(l.fb),e.Y36(c.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid ps-xl-5 pe-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","ps-xl-5","pe-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"user-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(r,T){1&r&&e.YNc(0,k,17,20,"div",0),2&r&&e.Q6J("ngIf",void 0!==T.user)},dependencies:[O.O5,O.PC,c.rH,_.Hw,p.gM,g.W,C.Y,L.Q,P.A,u.X$,Y.d]})}return o})();var te=t(47406),se=t(99497),ne=t(67582),ie=t(13350),w=t(17700),Q=t(32296);function ae(o,K){1&o&&e._UZ(0,"mat-spinner",11)}function re(o,K){if(1&o){const a=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(a);const T=e.oxw(2);return e.KtG(T.editUser())}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"MENU_ITEMS.USER.EDIT"))}const oe=function(){return{color:"black"}},z=function(o){return["/myProfile/service-identities",o]};function le(o,K){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"perun-web-apps-back-button"),e.YNc(2,ae,1,0,"mat-spinner",2),e.TgZ(3,"div",3),e._UZ(4,"mat-icon",4),e.ALo(5,"translate"),e.TgZ(6,"div",5)(7,"div",6)(8,"a",7),e.NdJ("auxclick",function(r){return r.preventDefault()}),e._uU(9),e.ALo(10,"userFullName"),e.qZA(),e.TgZ(11,"span",8),e._uU(12),e.qZA(),e.YNc(13,re,4,3,"button",9),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span",10),e._uU(18),e.ALo(19,"translate"),e.ALo(20,"translate"),e.qZA()()(),e._UZ(21,"app-animated-router-outlet"),e.qZA()),2&o){const a=e.oxw();e.xp6(2),e.Q6J("ngIf",a.loading),e.xp6(2),e.s9C("matTooltip",e.lcZ(5,13,"MENU_ITEMS.USER.ENTITY")),e.Q6J("ngStyle",e.DdM(23,oe)),e.xp6(4),e.Q6J("perunWebAppsMiddleClickRouterLink",e.VKq(24,z,a.user.id.toString()))("routerLink",e.VKq(26,z,a.user.id)),e.xp6(1),e.hij(" ",e.lcZ(10,15,a.user)," "),e.xp6(3),e.hij(" \xa0#",a.user.id," "),e.xp6(1),e.Q6J("ngIf",a.authResolver.isPerunAdmin()),e.xp6(2),e.AsE("",e.lcZ(16,17,"ADMIN_USER.UUID"),": ",a.user.uuid,""),e.xp6(3),e.lnq(" ",e.lcZ(19,19,"MENU_ITEMS.USER.ENTITY"),", ",e.lcZ(20,21,"MENU_ITEMS.USER.USER_TYPE"),": ",a.getUserType()," ")}}let _e=(()=>{class o{constructor(a,r,T,x,G,J,H){this.sideMenuService=a,this.usersService=r,this.sideMenuItemService=T,this.route=x,this.dialog=G,this.authResolver=J,this.entityStorageService=H,this.loading=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(a=>{const r=Number(a.userId);this.entityStorageService.setEntity({id:r,beanName:"User"}),this.usersService.getUserById(r).subscribe(T=>{this.user=T;const x=this.sideMenuItemService.parseServiceIdentity(T);this.sideMenuService.setUserItems([x]),this.loading=!1},()=>this.loading=!1)})}getUserType(){return this.user.serviceUser?"Service":"Person"}editUser(){const a=(0,S.kZ)();a.width="450px",a.data={theme:"admin-theme",user:this.user},this.dialog.open(ie.x,a).afterClosed().subscribe(T=>{T&&this.usersService.getUserById(this.user.id).subscribe(x=>{this.user=x})})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(m.D),e.Y36(i.Fv),e.Y36(ne.V),e.Y36(c.gz),e.Y36(w.uw),e.Y36(l.x4),e.Y36(l.fb))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-service-identity-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid ps-xl-5 pe-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","ps-xl-5","pe-xl-5","user-theme"],["class","me-auto ms-auto",4,"ngIf"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-service-identity",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"user-link",3,"perunWebAppsMiddleClickRouterLink","routerLink","auxclick"],[1,"text-muted"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],[1,"mt-1","entity-info"],[1,"me-auto","ms-auto"],["mat-icon-button","",3,"matTooltip","click"]],template:function(r,T){1&r&&e.YNc(0,le,22,28,"div",0),2&r&&e.Q6J("ngIf",void 0!==T.user)},dependencies:[O.O5,O.PC,c.rH,_.Hw,Q.RK,R.Ou,p.gM,g.W,C.Y,L.Q,P.A,u.X$,Y.d]})}return o})(),ce=(()=>{class o{constructor(a){this.entityStorageService=a,this.navItems=[]}ngOnInit(){this.serviceAccount=this.entityStorageService.getEntity(),this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-manager",url:`/myProfile/service-identities/${this.serviceAccount.id}/associated-users`,label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"},{cssIcon:"perun-notification",url:`/myProfile/service-identities/${this.serviceAccount.id}/mailing-lists`,label:"MENU_ITEMS.USER.MAILING_LISTS",style:"user-btn"},{cssIcon:"perun-statistics",url:`/myProfile/service-identities/${this.serviceAccount.id}/data-quotas`,label:"MENU_ITEMS.USER.DATA_QUOTAS",style:"user-btn"},{cssIcon:"perun-authentication",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication`,label:"MENU_ITEMS.USER.AUTHENTICATION",style:"user-btn"}]}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(l.fb))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-service-identity-overview"]],decls:1,vars:1,consts:[[3,"items"]],template:function(r,T){1&r&&e._UZ(0,"perun-web-apps-menu-buttons-field",0),2&r&&e.Q6J("items",T.navItems)},dependencies:[h.L]})}return o})();var pe=t(35938),ue=t(60353);let de=(()=>{class o{constructor(a){this.entityStorageService=a}ngOnInit(){this.user=this.entityStorageService.getEntity()}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(l.fb))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-perun-web-apps-user-settings-mailing-lists"]],decls:1,vars:2,consts:[[3,"user","isService"]],template:function(r,T){1&r&&e._UZ(0,"perun-web-apps-mailing-lists",0),2&r&&e.Q6J("user",T.user)("isService",!0)},dependencies:[ue.E]})}return o})();var me=t(71588);let he=(()=>{class o{constructor(a){this.entityStorageService=a}ngOnInit(){this.user=this.entityStorageService.getEntity()}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(l.fb))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-perun-web-apps-user-settings-data-quotas"]],decls:1,vars:1,consts:[[3,"user"]],template:function(r,T){1&r&&e._UZ(0,"perun-web-apps-data-quotas",0),2&r&&e.Q6J("user",T.user)},dependencies:[me.m]})}return o})(),ge=(()=>{class o{constructor(a){this.entityStorageService=a,this.navItems=[]}ngOnInit(){this.serviceAccount=this.entityStorageService.getEntity(),this.initNavItems()}initNavItems(){this.navItems=[{cssIcon:"perun-logins",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication/logins`,label:"MENU_ITEMS.USER.LOGINS",style:"user-btn"},{cssIcon:"perun-certificates",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication/certificates`,label:"MENU_ITEMS.USER.CERTIFICATES",style:"user-btn"},{cssIcon:"perun-key",url:`/myProfile/service-identities/${this.serviceAccount.id}/authentication/ssh-keys`,label:"MENU_ITEMS.USER.SSH_KEYS",style:"user-btn"}]}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(l.fb))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-service-identity-authentication-overview"]],decls:1,vars:1,consts:[[3,"items"]],template:function(r,T){1&r&&e._UZ(0,"perun-web-apps-menu-buttons-field",0),2&r&&e.Q6J("items",T.navItems)},dependencies:[h.L]})}return o})();var F=t(56223),fe=t(50165),Ee=t(12207),X=t(69755),Ie=t(7831);function Te(o,K){1&o&&e._UZ(0,"perun-web-apps-loading-dialog")}function ve(o,K){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"h1",3),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"app-login-password-form-with-generate-option",5),e.qZA(),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(){e.CHM(a);const T=e.oxw();return e.KtG(T.onCancel())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){e.CHM(a);const T=e.oxw();return e.KtG(T.onSetLogin())}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()}if(2&o){const a=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"DIALOGS.SET_LOGIN.TITLE")),e.xp6(3),e.Q6J("formGroup",a.formGroup)("filteredNamespace",a.data.filteredNamespaces),e.xp6(3),e.hij(" ",e.lcZ(9,8,"DIALOGS.SET_LOGIN.CANCEL")," "),e.xp6(2),e.Q6J("disabled","Not selected"===a.formGroup.get("namespaceCtrl").value||a.formGroup.invalid||a.formGroup.pending||a.processing),e.xp6(1),e.hij(" ",e.lcZ(12,10,"DIALOGS.SET_LOGIN.SET_LOGIN")," ")}}let Ae=(()=>{class o{constructor(a,r,T,x,G,J,H,mt,ht,gt){this.dialogRef=a,this.data=r,this.formBuilder=T,this.usersManagerService=x,this.membersManagerService=G,this.attributesManagerService=J,this.apiRequestConfiguration=H,this.notificator=mt,this.translate=ht,this.cd=gt,this.processing=!1}ngOnInit(){this.userId=this.data.userId,this.formGroup=this.formBuilder.group({namespaceCtrl:["Not selected"],loginCtrl:["",[F.kI.pattern("^[a-z][a-z0-9_-]+$"),F.kI.maxLength(15),F.kI.minLength(2)]],passwordCtrl:["",F.kI.required,[(0,fe.yT)(null,this.usersManagerService,this.apiRequestConfiguration)]],passwordAgainCtrl:[""],generatePasswordCtrl:[!0]},{validators:S.dN.passwordMatchValidator})}ngAfterViewInit(){this.cd.detectChanges()}onSetLogin(){this.processing=!0;const a=this.formGroup.get("namespaceCtrl").value.toLowerCase(),r=this.formGroup.get("loginCtrl").value;if(r)this.setLogin(a,r);else{const T=`urn:perun:user:attribute-def:def:login-namespace:${a}`;this.attributesManagerService.getUserAttributeByName(this.userId,"urn:perun:user:attribute-def:core:lastName").subscribe(x=>{this.usersManagerService.generateAccountForName(a,x.value).subscribe(J=>{this.setLogin(a,J[T])},()=>this.processing=!1)})}}setLogin(a,r){this.usersManagerService.setLogin(this.userId,r,a).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_LOGIN")),this.setPassword()},()=>{this.processing=!1})}setPassword(){const a=this.formGroup.get("namespaceCtrl").value.toLowerCase(),r=this.formGroup.get("passwordCtrl").value;if(this.formGroup.get("generatePasswordCtrl").value){if(!this.formGroup.get("loginCtrl").value)return;this.usersManagerService.reserveRandomPassword(this.userId,a).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,a).subscribe(()=>{this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}else this.usersManagerService.reservePasswordForUser({user:this.userId,namespace:a,password:r}).subscribe(()=>{this.usersManagerService.validatePasswordForUser(this.userId,a).subscribe(()=>{this.notificator.showSuccess(this.translate.instant("DIALOGS.SET_LOGIN.SUCCESS_PASSWORD")),this.dialogRef.close(!0)},()=>{this.processing=!1})},()=>{this.processing=!1})}onCancel(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(w.so),e.Y36(w.WI),e.Y36(F.QS),e.Y36(i.Fv),e.Y36(i.uq),e.Y36(i.H8),e.Y36(l.F5),e.Y36(l.V6),e.Y36(u.sK),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-perun-web-apps-set-login-dialog"]],decls:4,vars:2,consts:[["spinner",""],[1,"vo-theme","position-relative"],[4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-container"],[3,"formGroup","filteredNamespace"],["mat-dialog-actions",""],["mat-stroked-button","",1,"ms-auto",3,"click"],["color","accent","mat-flat-button","",1,"ms-2",3,"disabled","click"]],template:function(r,T){if(1&r&&(e.YNc(0,Te,1,0,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,ve,13,12,"div",2),e.qZA()),2&r){const x=e.MAs(1);e.xp6(3),e.Q6J("perunWebAppsLoader",T.processing)("perunWebAppsLoaderIndicator",x)}},dependencies:[F.JL,F.sg,Q.lW,w.uh,w.xY,w.H8,Ee.b,X.e,Ie.r,u.X$]})}return o})();var $=t(62481),be=t(97694);const Ue=["logins"];let Ce=(()=>{class o{constructor(a,r){this.dialog=a,this.entityStorageService=r,this.filteredNamespaces=[]}ngOnInit(){this.userId=this.entityStorageService.getEntity().id}onAdd(){const a=(0,S.kZ)();a.width="500px",a.data={userId:this.userId,filteredNamespaces:this.filteredNamespaces},this.dialog.open(Ae,a).afterClosed().subscribe(T=>{T&&this.logins.refreshTable()})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(w.uw),e.Y36(l.fb))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-perun-web-apps-user-settings-logins"]],viewQuery:function(r,T){if(1&r&&e.Gf(Ue,5),2&r){let x;e.iGM(x=e.CRH())&&(T.logins=x.first)}},decls:9,vars:7,consts:[[1,"page-title"],[3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","action-button",3,"click"],[3,"authenticationPage","filteredNamespaces"],["logins",""]],template:function(r,T){if(1&r){const x=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perun-web-apps-refresh-button",1),e.NdJ("refresh",function(){e.CHM(x);const J=e.MAs(8);return e.KtG(J.refreshTable())}),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return T.onAdd()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"perun-web-apps-password-reset",3,4),e.NdJ("filteredNamespaces",function(J){return T.filteredNamespaces=J}),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"USER_DETAIL.SETTINGS.LOGINS.TITLE")),e.xp6(4),e.hij(" ",e.lcZ(6,5,"USER_DETAIL.SETTINGS.LOGINS.ADD"),"\n"),e.xp6(2),e.Q6J("authenticationPage",!0))},dependencies:[Q.lW,$.t,be.N,u.X$]})}return o})(),Se=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-service-identity-authentication"]],hostVars:2,hostBindings:function(r,T){2&r&&e.ekj("router-component",T.true)},decls:1,vars:0,template:function(r,T){1&r&&e._UZ(0,"app-animated-router-outlet")},dependencies:[P.A]})}return o})();var De=t(1385),Oe=t(78337),Me=t(63712),Re=t(55959),Le=t(25184);const Pe=["list"];function ye(o,K){1&o&&e._UZ(0,"perun-web-apps-loading-table")}const Ne=function(o){return[o]};function Ze(o,K){if(1&o&&e._UZ(0,"perun-web-apps-attributes-list",6,7),2&o){const a=e.oxw();e.Q6J("attributes",e.VKq(2,Ne,a.certificates))("selection",a.selection)}}let xe=(()=>{class o{constructor(a,r,T){this.entityStorageService=a,this.attributesManagerService=r,this.dialog=T,this.selection=new Oe.Ov(!0,[])}ngOnInit(){this.userId=this.entityStorageService.getEntity().id,this.refresh()}refresh(){this.loading=!0,this.attributesManagerService.getUserAttributeByName(this.userId,De.r.USER_DEF_CERTIFICATES).subscribe(a=>{this.certificates=a,this.selection.clear(),this.loading=!1})}save(){this.list.updateMapAttributes();const a=(0,S.kZ)();a.width="450px",a.data={entityId:this.userId,entity:"user",attributes:this.selection.selected},this.dialog.open(Me.wA,a).afterClosed().subscribe(T=>{T&&this.refresh()})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(l.fb),e.Y36(i.H8),e.Y36(w.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-service-identity-certificates"]],viewQuery:function(r,T){if(1&r&&e.Gf(Pe,5),2&r){let x;e.iGM(x=e.CRH())&&(T.list=x.first)}},decls:11,vars:9,consts:[[1,"page-title"],[1,"mt-2",3,"refresh"],["color","accent","mat-flat-button","",1,"me-2","mt-2",3,"disabled","click"],["spinner",""],[1,"position-relative"],[3,"attributes","selection",4,"perunWebAppsLoader","perunWebAppsLoaderIndicator"],[3,"attributes","selection"],["list",""]],template:function(r,T){if(1&r&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perun-web-apps-refresh-button",1),e.NdJ("refresh",function(){return T.refresh()}),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return T.save()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ye,1,0,"ng-template",null,3,e.W1O),e.TgZ(9,"div",4),e.YNc(10,Ze,2,4,"perun-web-apps-attributes-list",5),e.qZA()),2&r){const x=e.MAs(8);e.xp6(1),e.Oqu(e.lcZ(2,5,"USER_DETAIL.SETTINGS.CERTIFICATES.TITLE")),e.xp6(3),e.Q6J("disabled",0===T.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(6,7,"USER_DETAIL.SETTINGS.CERTIFICATES.SAVE"),"\n"),e.xp6(5),e.Q6J("perunWebAppsLoader",T.loading)("perunWebAppsLoaderIndicator",x)}},dependencies:[Q.lW,Re.K,$.t,Le.p,X.e,u.X$]})}return o})();var Be=t(81381);const We=[{path:"",component:ee,children:[{path:"",component:A.Z,data:{animation:"UserOverviewPage"}},{path:"attributes",component:Z.u,data:{animation:"UserAttributesPage"}},{path:"organizations",component:d.j,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:s.u,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:te.t,data:{animation:"UserRolesPage"}},{path:"service-identities",component:se.R,data:{animation:"UserServiceIdentities"}},{path:"bans",component:Be.Q,data:{animation:"UserBansPage"}},{path:"settings",component:n,children:[{path:"",component:M,data:{animation:"UserSettingsOverviewPage"}},{path:"passwordReset",component:I.Nj,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:f,data:{animation:"UserAppConfigurationPage"}}]}]},{path:"service-identities/:userId",component:_e,children:[{path:"",component:ce},{path:"associated-users",component:pe.d},{path:"authentication",component:Se,children:[{path:"",component:ge},{path:"logins",component:Ce},{path:"certificates",component:xe},{path:"ssh-keys",component:I.N7}]},{path:"mailing-lists",component:de},{path:"data-quotas",component:he}]}];let Ye=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#s=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(We),c.Bz]})}return o})();var Ke=t(24630),Ge=t(24516),we=t(32651),Fe=t(3305),Je=t(13566),Qe=t(25313),He=t(74104),je=t(98445),Ve=t(75986),ze=t(22939),Xe=t(16007),$e=t(82599),qe=t(38034),ke=t(87466),et=t(26385),tt=t(21476),q=t(95195),st=t(61545),nt=t(34423),it=t(22557),at=t(77988),rt=t(16672),ot=t(62034),lt=t(99441),_t=t(39014),ct=t(60060),pt=t(80874),ut=t(35050);let dt=(()=>{class o{constructor(a){this.translate=a,a.addLangs(["en","cs"])}static#e=this.\u0275fac=function(r){return new(r||o)(e.LFG(u.sK))};static#t=this.\u0275mod=e.oAB({type:o});static#s=this.\u0275inj=e.cJS({imports:[O.ez,Ye,Ke.Bb,Ge.c,D.lN,F.UX,F.u5,_.Ps,we.SJ,Fe.To,u.aw.forChild({}),Q.ot,Je.JX,Qe.p0,He.Nh,je.dp,Q.ot,Ve.p9,w.Is,U.LD,ze.ZX,R.Cq,Xe.Cv,p.AV,$e.rP,qe.FA,b.XK,ke.Fk,et.t,b.si,tt.TU,q.QW,st.T5,nt._t,q.QW,it.Hi,at.Tx,rt.Cl,ot.r,lt.A,_t.g,I.ez,ct.r,pt.d4,ut.m]})}return o})()}}]);