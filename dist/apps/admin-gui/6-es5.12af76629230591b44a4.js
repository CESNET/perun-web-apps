function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"pjY/":function(e,t,i){"use strict";i.r(t),i.d(t,"FacilitiesModule",(function(){return Vt}));var a=i("2kYt"),c=i("sEIs"),s=i("4sdY"),n=i("X2Q7"),r=i("8clQ"),o=i("iyZ4"),l=i("EM62"),u=i("EtYo"),b=i("0XDM"),f=i("A8Ay"),p=i("csyo"),d=i("iAde"),h=i("cePI"),g=i("FlRo"),m=i("9wx0"),I=i("mWkV"),v=i("bFHC"),C=i("Y2X+"),y=i("FcRk"),S=i("s2Ay"),E=i("pTCp");function T(e,t){1&e&&(l.Wb(0,"th",19),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Mc(l.kc(2,1,"FACILITY_MANAGEMENT.TABLE.ID")))}function A(e,t){if(1&e&&(l.Wb(0,"td",20),l.Lc(1),l.Vb()),2&e){var i=t.$implicit;l.Cb(1),l.Mc(i.id)}}function L(e,t){1&e&&l.Rb(0,"th",21)}function R(e,t){1&e&&(l.Wb(0,"mat-icon",24),l.jc(1,"translate"),l.Lc(2," visibility "),l.Vb()),2&e&&l.pc("matTooltip",l.kc(1,1,"VO_MANAGEMENT.TABLE.RECENT"))}function k(e,t){if(1&e&&(l.Wb(0,"td",22),l.Jc(1,R,3,3,"mat-icon",23),l.Vb()),2&e){var i=t.$implicit,a=l.ic();l.Cb(1),l.oc("ngIf",a.recentIds.indexOf(i.id)>-1)}}function V(e,t){1&e&&(l.Wb(0,"th",19),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Mc(l.kc(2,1,"FACILITY_MANAGEMENT.TABLE.NAME")))}function w(e,t){if(1&e&&(l.Wb(0,"td",22),l.Lc(1),l.Vb()),2&e){var i=t.$implicit;l.Cb(1),l.Mc(i.name)}}function _(e,t){1&e&&(l.Wb(0,"th",21),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Mc(l.kc(2,1,"FACILITY_MANAGEMENT.TABLE.DESCRIPTION")))}function M(e,t){if(1&e&&(l.Wb(0,"td",22),l.Lc(1),l.Vb()),2&e){var i=t.$implicit;l.Cb(1),l.Mc(i.description)}}function O(e,t){1&e&&(l.Wb(0,"th",21),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Mc(l.kc(2,1,"FACILITY_MANAGEMENT.TABLE.TECHNICAL_OWNERS")))}function N(e,t){if(1&e&&(l.Wb(0,"td",22),l.Lc(1),l.jc(2,"technicalOwners"),l.Vb()),2&e){var i=t.$implicit;l.Cb(1),l.Mc(l.kc(2,1,i.facilityOwners))}}function F(e,t){1&e&&l.Rb(0,"tr",25)}var W=function(e){return["/facilities",e]};function G(e,t){1&e&&l.Rb(0,"tr",26),2&e&&l.oc("routerLink",l.tc(1,W,t.$implicit.id))}function D(e,t){1&e&&l.Rb(0,"mat-spinner",27)}function z(e,t){1&e&&(l.Wb(0,"app-alert",28),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"SHARED_LIB.UI.ALERTS.NO_FILTER_RESULTS_ALERT"),"\n"))}var U,j=((U=function(){function e(){_classCallCheck(this,e),this.pageSize=10,this.page=new l.o,this.exporting=!1,this.displayedColumns=["id","recent","name","description","technicalOwners"],this.pageSizeOptions=r.a}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.dataSource=new g.o(this.facilities),this.setDataSource(),this.dataSource.filter=this.filterValue}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator}},{key:"setDataSource",value:function(){this.dataSource&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSource.filterPredicate=function(e,t){var i=t.trim().toLowerCase();return-1!==e.name.trim().toLowerCase().indexOf(i)||null!==e.description&&-1!==e.description.trim().toLowerCase().indexOf(i)||!!e.id.toString(10).startsWith(t)||-1!==Object(r.r)(e.facilityOwners).toLowerCase().indexOf(i)})}},{key:"pageChanged",value:function(e){this.page.emit(e)}},{key:"matSort",set:function(e){this.sort=e,this.setDataSource()}}]),e}()).\u0275fac=function(e){return new(e||U)},U.\u0275cmp=l.Kb({type:U,selectors:[["app-facility-select-table"]],viewQuery:function(e,t){var i;1&e&&(l.Hc(h.a,!0),l.Sc(d.a,!0)),2&e&&(l.wc(i=l.fc())&&(t.matSort=i.first),l.wc(i=l.fc())&&(t.paginator=i.first))},inputs:{facilities:"facilities",recentIds:"recentIds",filterValue:"filterValue",pageSize:"pageSize"},outputs:{page:"page"},features:[l.Ab],decls:25,vars:12,consts:[[1,"card","mt-3",3,"hidden"],[1,"card-body"],[3,"exporter","end","start"],["mat-table","","matTableExporter","","matSort","","matSortDirection","asc","matSortDisableClear","",1,"w-100",3,"dataSource"],["exporter","matTableExporter"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","static-column-size","mat-cell","",4,"matCellDef"],["matColumnDef","recent"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","technicalOwners"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","dark-hover-list-item",3,"routerLink",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["class","ml-auto mr-auto",4,"ngIf"],["color","warn",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"static-column-size"],["mat-header-cell",""],["mat-cell",""],["class","align-bottom",3,"matTooltip",4,"ngIf"],[1,"align-bottom",3,"matTooltip"],["mat-header-row",""],["mat-row","",1,"dark-hover-list-item",3,"routerLink"],[1,"ml-auto","mr-auto"],["color","warn"]],template:function(e,t){if(1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"perun-web-apps-table-options",2),l.ec("end",(function(){return t.exporting=!1}))("start",(function(){return t.exporting=!0})),l.Vb(),l.Wb(3,"table",3,4),l.Ub(5,5),l.Jc(6,T,3,3,"th",6),l.Jc(7,A,2,1,"td",7),l.Tb(),l.Ub(8,8),l.Jc(9,L,1,0,"th",9),l.Jc(10,k,2,1,"td",10),l.Tb(),l.Ub(11,11),l.Jc(12,V,3,3,"th",6),l.Jc(13,w,2,1,"td",10),l.Tb(),l.Ub(14,12),l.Jc(15,_,3,3,"th",9),l.Jc(16,M,2,1,"td",10),l.Tb(),l.Ub(17,13),l.Jc(18,O,3,3,"th",9),l.Jc(19,N,3,3,"td",10),l.Tb(),l.Jc(20,F,1,0,"tr",14),l.Jc(21,G,1,3,"tr",15),l.Vb(),l.Wb(22,"mat-paginator",16),l.ec("page",(function(e){return t.pageChanged(e)})),l.Vb(),l.Vb(),l.Vb(),l.Jc(23,D,1,0,"mat-spinner",17),l.Jc(24,z,3,3,"app-alert",18)),2&e){var i=l.xc(4);l.Gb("hide-table",t.exporting),l.oc("hidden",0===t.dataSource.filteredData.length),l.Cb(2),l.oc("exporter",i),l.Cb(1),l.oc("dataSource",t.dataSource),l.Cb(17),l.oc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.oc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.oc("length",t.facilities.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions),l.Cb(1),l.oc("ngIf",t.exporting),l.Cb(1),l.oc("ngIf",0===t.dataSource.filteredData.length)}},directives:[m.a,g.n,I.a,h.a,g.c,g.i,g.b,g.k,g.m,d.a,a.t,g.h,h.b,g.a,v.a,C.a,g.j,g.l,c.g,p.c,y.a],pipes:[S.d,E.a],styles:[""]}),U);function B(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-refresh-button",6),l.ec("refresh",(function(){return l.Bc(i),l.ic().refreshTable()})),l.Vb()}}function Q(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-immediate-filter",7),l.ec("filter",(function(e){return l.Bc(i),l.ic().applyFilter(e)})),l.Vb()}2&e&&l.oc("placeholder","FACILITY_MANAGEMENT.FILTER_PLACEHOLDER")}function x(e,t){1&e&&l.Rb(0,"mat-spinner",8)}function P(e,t){if(1&e){var i=l.Xb();l.Wb(0,"app-facility-select-table",9),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb()}if(2&e){var a=l.ic();l.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("facilities",a.facilities)("recentIds",a.recentIds)}}var J,Y=((J=function(){function e(t,i,a){_classCallCheck(this,e),this.facilityManager=t,this.sideMenuService=i,this.tableConfigService=a,this.facilities=[],this.recentIds=[],this.filterValue="",this.tableId=o.p}return _createClass(e,[{key:"ngOnInit",value:function(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.sideMenuService.setFacilityMenuItems([]),this.refreshTable()}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.facilityManager.getRichFacilities().subscribe((function(t){e.facilities=Object(r.j)("facilities",t),e.recentIds=Object(r.k)("facilities"),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||J)(l.Qb(n.g),l.Qb(s.a),l.Qb(o.O))},J.\u0275cmp=l.Kb({type:J,selectors:[["app-facility-select-page"]],decls:9,vars:7,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","facility-theme"],[1,"page-title"],[3,"refresh",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","facilities","recentIds","page",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","facilities","recentIds","page"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Rb(1,"perun-web-apps-back-button"),l.Wb(2,"h1",1),l.Lc(3),l.jc(4,"translate"),l.Vb(),l.Jc(5,B,1,0,"perun-web-apps-refresh-button",2),l.Jc(6,Q,1,1,"perun-web-apps-immediate-filter",3),l.Jc(7,x,1,0,"mat-spinner",4),l.Jc(8,P,1,4,"app-facility-select-table",5),l.Vb()),2&e&&(l.Cb(3),l.Mc(l.kc(4,5,"FACILITY_MANAGEMENT.TITLE")),l.Cb(2),l.oc("ngIf",!t.loading),l.Cb(1),l.oc("ngIf",!t.loading),l.Cb(1),l.oc("ngIf",t.loading),l.Cb(1),l.oc("ngIf",!t.loading))},directives:[u.a,a.t,b.a,f.a,p.c,j],pipes:[S.d],styles:[""]}),J),K=i("rI+q"),H=i("EkAj"),X=i("ma6z"),$=function(e){return["/facilities",e]};function q(e,t){if(1&e&&(l.Wb(0,"div",1),l.Rb(1,"perun-web-apps-back-button"),l.Wb(2,"h1",2),l.Lc(3),l.jc(4,"translate"),l.Wb(5,"a",3),l.Lc(6),l.Vb(),l.Wb(7,"span",4),l.Lc(8),l.Vb(),l.Vb(),l.Rb(9,"app-animated-router-outlet"),l.Vb()),2&e){var i=l.ic();l.Cb(3),l.Nc(" ",l.kc(4,4,"FACILITY_DETAIL.TITLE")," "),l.Cb(2),l.oc("routerLink",l.tc(6,$,i.facility.id)),l.Cb(1),l.Nc(" ",i.facility.name," "),l.Cb(2),l.Nc(" \xa0#",i.facility.id," ")}}var Z,ee,te=((Z=function(){function e(t,i,a,c){_classCallCheck(this,e),this.facilityManager=t,this.route=i,this.sideMenuService=a,this.sideMenuItemService=c}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t;var i=e.sideMenuItemService.parseFacility(t);e.sideMenuService.setFacilityMenuItems([i]),Object(r.b)("facilities",e.facility)}))}))}}]),e}()).\u0275fac=function(e){return new(e||Z)(l.Qb(n.g),l.Qb(c.a),l.Qb(s.a),l.Qb(H.a))},Z.\u0275cmp=l.Kb({type:Z,selectors:[["app-facility-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 facility-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","facility-theme"],[1,"page-title"],[1,"facility-link",3,"routerLink"],[1,"text-muted"]],template:function(e,t){1&e&&l.Jc(0,q,10,8,"div",0),2&e&&l.oc("ngIf",void 0!==t.facility)},directives:[a.t,u.a,c.i,X.a],pipes:[S.d],styles:[""],data:{animation:[K.a]}}),Z),ie=i("ZG5M"),ae=((ee=function(){function e(t,i){_classCallCheck(this,e),this.facilityManager=t,this.route=i,this.navItems=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.initItems()}))}))}},{key:"initItems",value:function(){this.navItems=[{cssIcon:"perun-manage-facility",url:"/facilities/".concat(this.facility.id,"/resources"),label:"MENU_ITEMS.FACILITY.RESOURCES",style:"facility-btn"},{cssIcon:"perun-group",url:"/facilities/".concat(this.facility.id,"/allowed-groups"),label:"MENU_ITEMS.FACILITY.ALLOWED_GROUPS",style:"facility-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.facility.id,"/settings"),label:"MENU_ITEMS.FACILITY.SETTINGS",style:"facility-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.facility.id,"/service-config"),label:"MENU_ITEMS.FACILITY.SERVICE_CONFIG",style:"facility-btn"}]}}]),e}()).\u0275fac=function(e){return new(e||ee)(l.Qb(n.g),l.Qb(c.a))},ee.\u0275cmp=l.Kb({type:ee,selectors:[["app-facility-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Rb(1,"perun-web-apps-menu-buttons-field",0),l.Vb()),2&e&&(l.Cb(1),l.oc("items",t.navItems)("size","small"))},directives:[ie.a],styles:[""]}),ee),ce=i("s8L6"),se=i("Wq+4"),ne=function(e,t){return["/facilities",e,"resources",t]};function re(e,t){if(1&e&&(l.Wb(0,"div",1),l.Rb(1,"perun-web-apps-back-button"),l.Wb(2,"h1",2),l.Lc(3),l.jc(4,"translate"),l.Wb(5,"a",3),l.Lc(6),l.Vb(),l.Wb(7,"span",4),l.Lc(8),l.Vb(),l.Vb(),l.Rb(9,"app-animated-router-outlet"),l.Vb()),2&e){var i=l.ic();l.Cb(3),l.Nc(" ",l.kc(4,4,"RESOURCE_DETAIL.TITLE")," "),l.Cb(2),l.oc("routerLink",l.uc(6,ne,i.resource.facilityId,i.resource.id)),l.Cb(1),l.Nc(" ",i.resource.name," "),l.Cb(2),l.Nc(" \xa0#",i.resource.id," ")}}var oe,le,ue,be,fe=((be=function(){function e(t,i,a,c,s){_classCallCheck(this,e),this.route=t,this.facilityManager=i,this.resourcesManager=a,this.sideMenuService=c,this.sideMenuItemService=s}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.resourcesManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.facilityManager.getFacilityById(t.facilityId).subscribe((function(i){var a=e.sideMenuItemService.parseFacility(i),c=e.sideMenuItemService.parseResource(t);e.sideMenuService.setFacilityMenuItems([a,c])}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||be)(l.Qb(c.a),l.Qb(n.g),l.Qb(n.j),l.Qb(s.a),l.Qb(H.a))},be.\u0275cmp=l.Kb({type:be,selectors:[["app-resource-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 resource-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],[1,"page-title"],[1,"resource-link",3,"routerLink"],[1,"text-muted"]],template:function(e,t){1&e&&l.Jc(0,re,10,9,"div",0),2&e&&l.oc("ngIf",void 0!==t.resource)},directives:[a.t,u.a,c.i,X.a],pipes:[S.d],styles:[""],data:{animation:[K.a]}}),be),pe=((ue=function(){function e(t,i){_classCallCheck(this,e),this.resourcesManager=t,this.route=i,this.navItems=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.resourcesManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems()}))}))}},{key:"initItems",value:function(){this.navItems=[{cssIcon:"perun-group",url:"/facilities/".concat(this.resource.facilityId,"/resources/").concat(this.resource.id,"/groups"),label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings"),label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"}]}}]),e}()).\u0275fac=function(e){return new(e||ue)(l.Qb(n.j),l.Qb(c.a))},ue.\u0275cmp=l.Kb({type:ue,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Rb(1,"perun-web-apps-menu-buttons-field",0),l.Vb()),2&e&&(l.Cb(1),l.oc("items",t.navItems)("size","small"))},directives:[ie.a],styles:[""]}),ue),de=((le=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||le)},le.\u0275cmp=l.Kb({type:le,selectors:[["app-facility-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&l.Rb(0,"app-animated-router-outlet")},directives:[X.a],styles:[""],data:{animation:[K.a]}}),le),he=((oe=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.facilityManager=i,this.items=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.initItems()}))}))}},{key:"initItems",value:function(){this.items=[{cssIcon:"perun-attributes",url:"/facilities/".concat(this.facility.id,"/settings/attributes"),label:"MENU_ITEMS.FACILITY.ATTRIBUTES",style:"facility-btn"},{cssIcon:"perun-manager",url:"/facilities/".concat(this.facility.id,"/settings/managers"),label:"MENU_ITEMS.FACILITY.MANAGERS",style:"facility-btn"}]}}]),e}()).\u0275fac=function(e){return new(e||oe)(l.Qb(c.a),l.Qb(n.g))},oe.\u0275cmp=l.Kb({type:oe,selectors:[["app-facility-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Rb(1,"perun-web-apps-menu-buttons-field",0),l.Vb()),2&e&&(l.Cb(1),l.oc("items",t.items)("size","small"))},directives:[ie.a],styles:[""]}),oe),ge=i("U7JG"),me=i("HHEo"),Ie=i("cqs0"),ve=i("mEf3"),Ce=i("IDQ9"),ye=i("6lcu"),Se=i("OZ4H"),Ee=i("PBFl"),Te=i("LKLE"),Ae=["list"];function Le(e,t){1&e&&l.Rb(0,"mat-spinner",8)}function Re(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-attributes-list",9,10),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb()}if(2&e){var a=l.ic();l.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("attributes",a.attributes)("selection",a.selection)}}var ke,Ve,we,_e=((we=function(){function e(t,i,a,c,s,n){var r=this;_classCallCheck(this,e),this.attributesManager=t,this.route=i,this.dialog=a,this.notificator=c,this.tableConfigService=s,this.translate=n,this.attributes=[],this.selection=new Ie.c(!0,[]),this.filterValue="",this.tableId=o.k,this.translate.get("FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(e){return r.saveSuccessMessage=e})),this.translate.get("FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(e){return r.deleteSuccessMessage=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.parent.params.subscribe((function(t){e.facilityId=t.facilityId,e.refreshTable()}))}},{key:"onDelete",value:function(){var e=this;this.dialog.open(ve.a,{width:"450px",data:{entityId:this.facilityId,entity:"facility",attributes:this.selection.selected}}).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes(),this.dialog.open(ye.a,{width:"450px",data:{entityId:this.facilityId,entity:"facility",attributes:this.selection.selected}}).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onCreate",value:function(){var e=this;this.dialog.open(Ce.a,{width:"1050px",data:{entityId:this.facilityId,entity:"facility",notEmptyAttributes:this.attributes,style:"facility-theme"}}).afterClosed().subscribe((function(t){"saved"===t&&e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getFacilityAttributes(this.facilityId).subscribe((function(t){e.attributes=Object(r.f)(t),e.selection.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||we)(l.Qb(n.c),l.Qb(c.a),l.Qb(Se.b),l.Qb(ge.a),l.Qb(o.O),l.Qb(S.e))},we.\u0275cmp=l.Kb({type:we,selectors:[["app-facility-settings-attributes"]],viewQuery:function(e,t){var i;1&e&&l.Sc(Ae,!0),2&e&&l.wc(i=l.fc())&&(t.list=i.first)},hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:17,vars:17,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Wb(1,"h1",0),l.Lc(2),l.jc(3,"translate"),l.Vb(),l.Wb(4,"perun-web-apps-refresh-button",1),l.ec("refresh",(function(){return t.refreshTable()})),l.Vb(),l.Wb(5,"button",2),l.ec("click",(function(){return t.onCreate()})),l.Lc(6),l.jc(7,"translate"),l.Vb(),l.Wb(8,"button",3),l.ec("click",(function(){return t.onSave()})),l.Lc(9),l.jc(10,"translate"),l.Vb(),l.Wb(11,"button",4),l.ec("click",(function(){return t.onDelete()})),l.Lc(12),l.jc(13,"translate"),l.Vb(),l.Wb(14,"perun-web-apps-immediate-filter",5),l.ec("filter",(function(e){return t.applyFilter(e)})),l.Vb(),l.Jc(15,Le,1,0,"mat-spinner",6),l.Jc(16,Re,2,4,"perun-web-apps-attributes-list",7),l.Vb()),2&e&&(l.Cb(2),l.Mc(l.kc(3,9,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),l.Cb(4),l.Nc(" ",l.kc(7,11,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),l.Cb(2),l.oc("disabled",0===t.selection.selected.length),l.Cb(1),l.Nc(" ",l.kc(10,13,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),l.Cb(2),l.oc("disabled",0===t.selection.selected.length),l.Cb(1),l.Nc(" ",l.kc(13,15,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),l.Cb(2),l.oc("placeholder","SHARED.COMPONENTS.ATTRIBUTES_LIST.FILTER"),l.Cb(1),l.oc("ngIf",t.loading),l.Cb(1),l.oc("ngIf",!t.loading))},directives:[b.a,Ee.b,f.a,a.t,p.c,Te.a],pipes:[S.d],styles:[""]}),we),Me=((Ve=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ve)},Ve.\u0275cmp=l.Kb({type:Ve,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&l.Rb(0,"app-animated-router-outlet")},directives:[X.a],styles:[""],data:{animation:[K.a]}}),Ve),Oe=((ke=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.resourceManager=i,this.items=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.resourceManager.getResourceById(t.resourceId).subscribe((function(t){e.resource=t,e.initItems()}))}))}},{key:"initItems",value:function(){this.items=[{cssIcon:"perun-attributes",url:"/facilities/".concat(this.resource.facilityId,"/resources/").concat(this.resource.id,"/settings/attributes"),label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"}]}}]),e}()).\u0275fac=function(e){return new(e||ke)(l.Qb(c.a),l.Qb(n.j))},ke.\u0275cmp=l.Kb({type:ke,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Rb(1,"perun-web-apps-menu-buttons-field",0),l.Vb()),2&e&&(l.Cb(1),l.oc("items",t.items)("size","small"))},directives:[ie.a],styles:[""]}),ke),Ne=["list"];function Fe(e,t){1&e&&l.Rb(0,"mat-spinner",8)}function We(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-attributes-list",9,10),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb()}if(2&e){var a=l.ic();l.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("attributes",a.attributes)("selection",a.selection)}}var Ge,De=((Ge=function(){function e(t,i,a,c,s,n){var r=this;_classCallCheck(this,e),this.attributesManager=t,this.route=i,this.dialog=a,this.notificator=c,this.tableConfigService=s,this.translate=n,this.attributes=[],this.selection=new Ie.c(!0,[]),this.filterValue="",this.tableId=o.k,this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(e){return r.saveSuccessMessage=e})),this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(e){return r.deleteSuccessMessage=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.refreshTable()}))}},{key:"onDelete",value:function(){var e=this;this.dialog.open(ve.a,{width:"450px",data:{entityId:this.resourceId,entity:"resource",attributes:this.selection.selected}}).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes(),this.dialog.open(ye.a,{width:"450px",data:{entityId:this.resourceId,entity:"resource",attributes:this.selection.selected}}).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onCreate",value:function(){var e=this;this.dialog.open(Ce.a,{width:"1050px",data:{entityId:this.resourceId,entity:"resource",notEmptyAttributes:this.attributes,style:"resource-theme"}}).afterClosed().subscribe((function(t){"saved"===t&&e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getResourceAttributes(this.resourceId).subscribe((function(t){e.attributes=Object(r.f)(t),e.selection.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||Ge)(l.Qb(n.c),l.Qb(c.a),l.Qb(Se.b),l.Qb(ge.a),l.Qb(o.O),l.Qb(S.e))},Ge.\u0275cmp=l.Kb({type:Ge,selectors:[["app-resource-settings-attributes"]],viewQuery:function(e,t){var i;1&e&&l.Sc(Ne,!0),2&e&&l.wc(i=l.fc())&&(t.list=i.first)},hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:17,vars:17,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Wb(1,"h1",0),l.Lc(2),l.jc(3,"translate"),l.Vb(),l.Wb(4,"perun-web-apps-refresh-button",1),l.ec("refresh",(function(){return t.refreshTable()})),l.Vb(),l.Wb(5,"button",2),l.ec("click",(function(){return t.onCreate()})),l.Lc(6),l.jc(7,"translate"),l.Vb(),l.Wb(8,"button",3),l.ec("click",(function(){return t.onSave()})),l.Lc(9),l.jc(10,"translate"),l.Vb(),l.Wb(11,"button",4),l.ec("click",(function(){return t.onDelete()})),l.Lc(12),l.jc(13,"translate"),l.Vb(),l.Wb(14,"perun-web-apps-immediate-filter",5),l.ec("filter",(function(e){return t.applyFilter(e)})),l.Vb(),l.Jc(15,Fe,1,0,"mat-spinner",6),l.Jc(16,We,2,4,"perun-web-apps-attributes-list",7),l.Vb()),2&e&&(l.Cb(2),l.Mc(l.kc(3,9,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),l.Cb(4),l.Nc(" ",l.kc(7,11,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),l.Cb(2),l.oc("disabled",0===t.selection.selected.length),l.Cb(1),l.Nc(" ",l.kc(10,13,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),l.Cb(2),l.oc("disabled",0===t.selection.selected.length),l.Cb(1),l.Nc(" ",l.kc(13,15,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),l.Cb(2),l.oc("placeholder","SHARED.COMPONENTS.ATTRIBUTES_LIST.FILTER"),l.Cb(1),l.oc("ngIf",t.loading),l.Cb(1),l.oc("ngIf",!t.loading))},directives:[b.a,Ee.b,f.a,a.t,p.c,Te.a],pipes:[S.d],styles:[""]}),Ge),ze=i("ILoV"),Ue=i("VEwN"),je=i("FoxU"),Be=i("K9kF"),Qe=["checkbox"];function xe(e,t){1&e&&l.Rb(0,"mat-spinner",8)}var Pe=function(){return["vo","menu"]};function Je(e,t){if(1&e){var i=l.Xb();l.Wb(0,"div",9),l.Wb(1,"perun-web-apps-groups-list",10),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb(),l.Vb()}if(2&e){var a=l.ic();l.Cb(1),l.oc("pageSize",a.pageSize)("groups",a.filteredGroups)("selection",a.selected)("disableMembers",!1)("inDialog",!1)("hideColumns",l.sc(6,Pe))}}function Ye(e,t){1&e&&(l.Wb(0,"app-alert",11),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}var Ke,He=((Ke=function(){function e(t,i,a,c){_classCallCheck(this,e),this.route=t,this.resourcesManager=i,this.tableConfigService=a,this.dialog=c,this.assignedGroups=[],this.selected=new Ie.c(!0,[]),this.filteredGroups=[],this.tableId=o.z}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe((function(t){e.resourceId=t.resourceId,e.loadAllGroups()}))}},{key:"loadAllGroups",value:function(){var e=this;this.loading=!0,this.resourcesManager.getAssignedGroups(this.resourceId).subscribe((function(t){e.assignedGroups=t,e.filteredGroups=t,e.selected.clear(),e.loading=!1}))}},{key:"addGroup",value:function(){var e=this;this.dialog.open(Ue.a,{width:"800px",data:{theme:"resource-theme",resourceId:this.resourceId}}).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"removeGroups",value:function(){var e=this;this.dialog.open(ze.a,{width:"500px",data:{resourceId:this.resourceId,groups:this.selected.selected}}).afterClosed().subscribe((function(t){t&&e.loadAllGroups()}))}},{key:"applyFilter",value:function(e){this.filteredGroups=this.assignedGroups.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||Ke)(l.Qb(c.a),l.Qb(n.j),l.Qb(o.O),l.Qb(Se.b))},Ke.\u0275cmp=l.Kb({type:Ke,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(e,t){var i;1&e&&l.Hc(Qe,!0),2&e&&l.wc(i=l.fc())&&(t.checkbox=i.first)},decls:14,vars:14,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["color","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"pageSize","groups","selection","disableMembers","inDialog","hideColumns","page"],["color","warn"]],template:function(e,t){1&e&&(l.Wb(0,"h1",0),l.Lc(1),l.jc(2,"translate"),l.Vb(),l.Wb(3,"perun-web-apps-refresh-button",1),l.ec("refresh",(function(){return t.loadAllGroups()})),l.Vb(),l.Wb(4,"button",2),l.ec("click",(function(){return t.addGroup()})),l.Lc(5),l.jc(6,"translate"),l.Vb(),l.Wb(7,"button",3),l.ec("click",(function(){return t.removeGroups()})),l.Lc(8),l.jc(9,"translate"),l.Vb(),l.Wb(10,"app-debounce-filter",4),l.ec("filter",(function(e){return t.applyFilter(e)})),l.Vb(),l.Jc(11,xe,1,0,"mat-spinner",5),l.Jc(12,Je,2,7,"div",6),l.Jc(13,Ye,3,3,"app-alert",7)),2&e&&(l.Cb(1),l.Mc(l.kc(2,8,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),l.Cb(4),l.Nc(" ",l.kc(6,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"),l.Cb(2),l.oc("disabled",0===t.selected.selected.length),l.Cb(1),l.Nc(" ",l.kc(9,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP"),"\n"),l.Cb(2),l.oc("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),l.Cb(1),l.oc("ngIf",t.loading),l.Cb(1),l.oc("ngIf",!t.loading&&0!==t.assignedGroups.length),l.Cb(1),l.oc("ngIf",0===t.assignedGroups.length&&!t.loading))},directives:[b.a,Ee.b,je.a,a.t,p.c,Be.a,y.a],pipes:[S.d],styles:[""]}),Ke),Xe=i("29Wa"),$e=i("R7+U"),qe=i("mFH5"),Ze=i("+Tre"),et=i("KZIX");function tt(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-attributes-list",5),l.ec("page",(function(e){return l.Bc(i),l.ic().pageChanged(e)})),l.Vb()}if(2&e){var a=l.ic();l.oc("pageSize",a.pageSize)("attributes",a.facilityAttributes)}}function it(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-attributes-list",5),l.ec("page",(function(e){return l.Bc(i),l.ic(2).pageChanged(e)})),l.Vb()}if(2&e){var a=l.ic(2);l.oc("pageSize",a.pageSize)("attributes",a.resourceAttributes)}}function at(e,t){if(1&e&&(l.Wb(0,"mat-tab",2),l.Jc(1,it,1,2,"perun-web-apps-attributes-list",3),l.Vb()),2&e){var i=l.ic();l.oc("label",i.resource.name),l.Cb(1),l.oc("ngIf",!!i.resourceAttributes)}}function ct(e,t){if(1&e){var i=l.Xb();l.Wb(0,"perun-web-apps-attributes-list",5),l.ec("page",(function(e){return l.Bc(i),l.ic(2).pageChanged(e)})),l.Vb()}if(2&e){var a=l.ic(2);l.oc("pageSize",a.pageSize)("attributes",a.groupAttributes)}}function st(e,t){if(1&e&&(l.Wb(0,"mat-tab",2),l.Jc(1,ct,1,2,"perun-web-apps-attributes-list",3),l.Vb()),2&e){var i=l.ic();l.oc("label",i.group.name),l.Cb(1),l.oc("ngIf",!!i.groupAttributes)}}var nt,rt=((nt=function(){function e(t,i){_classCallCheck(this,e),this.attributesManager=t,this.tableConfigService=i,this.showTab=0,this.tableId=o.k}return _createClass(e,[{key:"ngOnInit",value:function(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loadFacilityAttributes()}},{key:"ngOnChanges",value:function(e){var t=this;e.service?this.reloadAll():e.resource?void 0===e.resource.currentValue?(this.resourceAttributes=void 0,this.showTab=0):(this.showTab=1,this.loadResourceAttributes()):e.group&&(void 0===e.group.currentValue?(this.groupAttributes=void 0,this.showTab=1):(this.showTab=2,this.attributesManager.getGroupAttributes(this.group.id).subscribe((function(e){return t.groupAttributes=e}))))}},{key:"loadResourceAttributes",value:function(){var e=this;"NOT_SELECTED"===this.service?this.attributesManager.getResourceAttributes(this.resource.id).subscribe((function(t){return e.resourceAttributes=t})):"ALL"===this.service?this.attributesManager.getRequiredAttributesResource(this.resource.id).subscribe((function(t){return e.resourceAttributes=t})):this.attributesManager.getRequiredAttributesResourceService(this.service.id,this.resource.id).subscribe((function(t){return e.resourceAttributes=t}))}},{key:"loadFacilityAttributes",value:function(){var e=this;"NOT_SELECTED"===this.service?this.attributesManager.getFacilityAttributes(this.facility.id).subscribe((function(t){return e.facilityAttributes=t})):"ALL"===this.service?this.attributesManager.getRequiredAttributesFacility(this.facility.id).subscribe((function(t){return e.facilityAttributes=t})):this.attributesManager.getRequiredAttributesFacilityService(this.service.id,this.facility.id).subscribe((function(t){return e.facilityAttributes=t}))}},{key:"reloadAll",value:function(){this.loadFacilityAttributes(),void 0!==this.resource&&this.loadResourceAttributes()}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||nt)(l.Qb(n.c),l.Qb(o.O))},nt.\u0275cmp=l.Kb({type:nt,selectors:[["perun-web-apps-service-configurator"]],inputs:{facility:"facility",service:"service",resource:"resource",group:"group"},features:[l.Ab],decls:6,vars:6,consts:[[2,"min-height","500px"],[3,"dynamicHeight","selectedIndex","selectedIndexChange"],[3,"label"],[3,"pageSize","attributes","page",4,"ngIf"],[3,"label",4,"ngIf"],[3,"pageSize","attributes","page"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"mat-tab-group",1),l.ec("selectedIndexChange",(function(e){return t.showTab=e})),l.Wb(2,"mat-tab",2),l.Jc(3,tt,1,2,"perun-web-apps-attributes-list",3),l.Vb(),l.Jc(4,at,2,2,"mat-tab",4),l.Jc(5,st,2,2,"mat-tab",4),l.Vb(),l.Vb()),2&e&&(l.Cb(1),l.oc("dynamicHeight",!0)("selectedIndex",t.showTab),l.Cb(1),l.oc("label",t.facility.name),l.Cb(1),l.oc("ngIf",!!t.facilityAttributes),l.Cb(1),l.oc("ngIf",!!t.resource),l.Cb(1),l.oc("ngIf",!!t.group))},directives:[et.c,et.a,a.t,Te.a],styles:[""]}),nt);function ot(e,t){if(1&e&&(l.Wb(0,"mat-option",6),l.Lc(1),l.Vb()),2&e){var i=t.$implicit;l.oc("value",i),l.Cb(1),l.Nc(" ",i.name," ")}}function lt(e,t){1&e&&(l.Wb(0,"mat-option"),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"FACILITY_DETAIL.SERVICE_CONFIG.SERVICE_SELECT_NO_SERVICE")," "))}function ut(e,t){if(1&e&&(l.Wb(0,"mat-option",6),l.Lc(1),l.Vb()),2&e){var i=t.$implicit;l.oc("value",i),l.Cb(1),l.Nc(" ",i.name," ")}}function bt(e,t){if(1&e&&(l.Wb(0,"mat-option",6),l.Lc(1),l.Vb()),2&e){var i=t.$implicit;l.oc("value",i),l.Cb(1),l.Nc(" ",i.name," ")}}function ft(e,t){1&e&&(l.Wb(0,"mat-hint"),l.Lc(1),l.jc(2,"translate"),l.Vb()),2&e&&(l.Cb(1),l.Nc(" ",l.kc(2,1,"FACILITY_DETAIL.SERVICE_CONFIG.GROUP_SELECT_DEFAULT")," "))}function pt(e,t){if(1&e){var i=l.Xb();l.Wb(0,"div",3),l.Wb(1,"mat-form-field",4),l.Wb(2,"mat-label"),l.Lc(3),l.jc(4,"translate"),l.Vb(),l.Wb(5,"mat-select",5),l.ec("valueChange",(function(e){return l.Bc(i),l.ic().selectedService=e})),l.Wb(6,"mat-option",6),l.Lc(7," NOT SELECTED "),l.Vb(),l.Wb(8,"mat-option",6),l.Lc(9," ALL "),l.Vb(),l.Jc(10,ot,2,2,"mat-option",7),l.Jc(11,lt,3,3,"mat-option",8),l.Vb(),l.Vb(),l.Wb(12,"mat-checkbox",9),l.ec("change",(function(e){return l.Bc(i),l.ic().onOfferAllServices(e)})),l.Lc(13),l.jc(14,"translate"),l.Vb(),l.Wb(15,"mat-form-field",4),l.Wb(16,"mat-label"),l.Lc(17),l.jc(18,"translate"),l.Vb(),l.Wb(19,"mat-select",10),l.ec("valueChange",(function(e){return l.Bc(i),l.ic().selectedResource=e}))("selectionChange",(function(){return l.Bc(i),l.ic().onSelectedResource()})),l.Wb(20,"mat-option"),l.Lc(21),l.jc(22,"translate"),l.Vb(),l.Jc(23,ut,2,2,"mat-option",7),l.Vb(),l.Vb(),l.Wb(24,"mat-form-field",4),l.Wb(25,"mat-label"),l.Lc(26),l.jc(27,"translate"),l.Vb(),l.Wb(28,"mat-select",11),l.ec("valueChange",(function(e){return l.Bc(i),l.ic().selectedGroup=e})),l.Jc(29,bt,2,2,"mat-option",7),l.Vb(),l.Jc(30,ft,3,3,"mat-hint",8),l.Vb(),l.Vb()}if(2&e){var a=l.ic();l.Cb(3),l.Mc(l.kc(4,16,"FACILITY_DETAIL.SERVICE_CONFIG.SERVICE_SELECT")),l.Cb(2),l.oc("value",a.selectedService),l.Cb(1),l.oc("value","NOT_SELECTED"),l.Cb(2),l.oc("value","ALL"),l.Cb(2),l.oc("ngForOf",a.services),l.Cb(1),l.oc("ngIf",!!a.services&&0===a.services.length),l.Cb(2),l.Nc(" ",l.kc(14,18,"FACILITY_DETAIL.SERVICE_CONFIG.ALL_SERVICES")," "),l.Cb(4),l.Mc(l.kc(18,20,"FACILITY_DETAIL.SERVICE_CONFIG.RES_SELECT")),l.Cb(2),l.oc("value",a.selectedResource),l.Cb(2),l.Mc(l.kc(22,22,"FACILITY_DETAIL.SERVICE_CONFIG.UNSELECTED")),l.Cb(2),l.oc("ngForOf",a.resources),l.Cb(3),l.Mc(l.kc(27,24,"FACILITY_DETAIL.SERVICE_CONFIG.GROUP_SELECT")),l.Cb(2),l.oc("value",a.selectedGroup)("disabled",void 0===a.selectedResource),l.Cb(1),l.oc("ngForOf",a.groups),l.Cb(1),l.oc("ngIf",void 0===a.selectedResource)}}function dt(e,t){if(1&e&&l.Rb(0,"perun-web-apps-service-configurator",12),2&e){var i=l.ic();l.oc("facility",i.facility)("resource",i.selectedResource)("group",i.selectedGroup)("service",i.selectedService)}}var ht,gt=((ht=function(){function e(t,i,a,c){_classCallCheck(this,e),this.route=t,this.facilityManager=i,this.resourceManager=a,this.serviceManager=c,this.selectedService="NOT_SELECTED"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.facilityManager.getAssignedResourcesForFacility(t.id).subscribe((function(t){return e.resources=t})),e.serviceManager.getAssignedServices(t.id).subscribe((function(t){return e.services=t}))}))}))}},{key:"onSelectedResource",value:function(){var e=this;void 0!==this.selectedResource&&(this.resourceManager.getAssignedGroups(this.selectedResource.id).subscribe((function(t){return e.groups=t})),this.selectedGroup=void 0)}},{key:"onOfferAllServices",value:function(e){var t=this;e.checked||this.serviceManager.getAssignedServices(this.facility.id).subscribe((function(e){return t.services=e}))}}]),e}()).\u0275fac=function(e){return new(e||ht)(l.Qb(c.a),l.Qb(n.g),l.Qb(n.j),l.Qb(n.k))},ht.\u0275cmp=l.Kb({type:ht,selectors:[["app-facility-service-config"]],decls:6,vars:5,consts:[[1,"page-subtitle"],["class","col-12 col-lg-6 mb-2",4,"ngIf"],[3,"facility","resource","group","service",4,"ngIf"],[1,"col-12","col-lg-6","mb-2"],[1,"w-100"],[3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"change"],[3,"value","valueChange","selectionChange"],[3,"value","disabled","valueChange"],[3,"facility","resource","group","service"]],template:function(e,t){1&e&&(l.Wb(0,"div"),l.Wb(1,"h1",0),l.Lc(2),l.jc(3,"translate"),l.Vb(),l.Jc(4,pt,31,26,"div",1),l.Jc(5,dt,1,4,"perun-web-apps-service-configurator",2),l.Vb()),2&e&&(l.Cb(2),l.Mc(l.kc(3,3,"FACILITY_DETAIL.SERVICE_CONFIG.TITLE")),l.Cb(2),l.oc("ngIf",!!t.facility),l.Cb(1),l.oc("ngIf",!!t.facility))},directives:[a.t,Xe.b,Xe.f,$e.a,qe.l,a.s,Ze.a,Xe.e,rt],pipes:[S.d],styles:[""]}),ht),mt=i("Iydx"),It=i("NU+N");function vt(e,t){if(1&e&&l.Rb(0,"app-managers-page",1),2&e){var i=l.ic();l.oc("complementaryObject",i.facility)("complementaryObjectType",i.type)("theme",i.theme)("availableRoles",i.availableRoles)}}var Ct,yt,St,Et,Tt=[{path:"",component:Y},{path:":facilityId",component:te,children:[{path:"",component:ae,data:{animation:"FacilityOverviewPage"}},{path:"resources",component:ce.a,data:{animation:"FacilityResourcesPage"}},{path:"allowed-groups",component:se.a,data:{animation:"FacilityAllowedGroupsPage"}},{path:"service-config",component:gt,data:{animation:"FacilityServiceConfigPage"}},{path:"settings",component:de,children:[{path:"",component:he,data:{animation:"FacilitySettingsOverviewPage"}},{path:"attributes",component:_e,data:{animation:"FacilitySettingsAttributesPage"}},{path:"managers",component:(Ct=function(){function e(t,i){_classCallCheck(this,e),this.facilityService=t,this.route=i,this.availableRoles=[mt.b.FACILITYADMIN],this.selected="user",this.type="Facility",this.theme="facility-theme"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.facilityService.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t}))}))}}]),e}(),Ct.\u0275fac=function(e){return new(e||Ct)(l.Qb(n.g),l.Qb(c.a))},Ct.\u0275cmp=l.Kb({type:Ct,selectors:[["app-perun-web-apps-facility-settings-managers"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("router-component",!0)},decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&l.Jc(0,vt,1,4,"app-managers-page",0),2&e&&l.oc("ngIf",t.facility)},directives:[a.t,It.a],styles:[""]}),Ct),data:{animation:"FacilitySettingsManagersPage"}}]}]},{path:":facilityId/resources/:resourceId",component:fe,children:[{path:"",component:pe,data:{animation:"ResourceOverviewPage"}},{path:"groups",component:He,data:{animation:"ResourceGroupsComponent"}},{path:"settings",component:Me,children:[{path:"",component:Oe,data:{animation:"ResourceSettingsOverviewPage"}},{path:"attributes",component:De,data:{animation:"ResourceSettingsAttributesPage"}}]}]}],At=((yt=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:yt}),yt.\u0275inj=l.Nb({factory:function(e){return new(e||yt)},imports:[[c.j.forChild(Tt)],c.j]}),yt),Lt=i("PCNd"),Rt=i("KoHB"),kt=((Et=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:Et}),Et.\u0275inj=l.Nb({factory:function(e){return new(e||Et)},imports:[[a.c,et.g,me.b]]}),Et),Vt=((St=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:St}),St.\u0275inj=l.Nb({factory:function(e){return new(e||St)},imports:[[a.c,At,I.b,Lt.a,Rt.a,me.b,kt]]}),St)}}]);