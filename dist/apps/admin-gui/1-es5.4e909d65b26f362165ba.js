!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{BAI5:function(e,n,s){"use strict";s.d(n,"a",(function(){return T}));var r=s("Ssnw"),c=s("X2Q7"),o=s("iyZ4"),u=s("EM62"),b=s("sEIs"),l=s("2kYt"),f=s("0XDM"),p=s("A8Ay"),d=s("csyo"),m=s("K9kF"),S=s("s2Ay");function g(e,t){1&e&&(u.Sb(0,"h1",6),u.Jc(1),u.ec(2,"translate"),u.Rb()),2&e&&(u.Ab(1),u.Lc(" ",u.fc(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.YOU_ARE_MEMBER"),"\n"))}function h(e,t){1&e&&(u.Sb(0,"h1",6),u.Jc(1),u.ec(2,"translate"),u.Rb()),2&e&&(u.Ab(1),u.Lc(" ",u.fc(2,1,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_MEMBER"),"\n"))}function v(e,t){1&e&&u.Nb(0,"mat-spinner",7)}var I=function(){return["select","expiration","menu","recent"]};function R(e,t){if(1&e){var n=u.Tb();u.Sb(0,"perun-web-apps-groups-list",8),u.Zb("page",(function(e){return u.xc(n),u.dc().pageChanged(e)})),u.Rb()}if(2&e){var i=u.dc();u.kc("pageSize",i.pageSize)("groups",i.membersGroups)("hideColumns",u.oc(5,I))("disableMembers",!1)("filter",i.memberFilterValue)}}function E(e,t){1&e&&u.Nb(0,"mat-spinner",7)}function A(e,t){if(1&e){var n=u.Tb();u.Sb(0,"perun-web-apps-groups-list",8),u.Zb("page",(function(e){return u.xc(n),u.dc(2).adminPageChanged(e)})),u.Rb()}if(2&e){var i=u.dc(2);u.kc("pageSize",i.adminPageSize)("groups",i.adminsGroups)("hideColumns",u.oc(5,I))("disableMembers",!1)("filter",i.adminFilterValue)}}function y(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",9),u.Sb(1,"h1",6),u.Jc(2),u.ec(3,"translate"),u.Rb(),u.Sb(4,"perun-web-apps-refresh-button",1),u.Zb("refresh",(function(){return u.xc(n),u.dc().refreshAdminTable()})),u.Rb(),u.Sb(5,"perun-web-apps-immediate-filter",2),u.Zb("filter",(function(e){return u.xc(n),u.dc().adminFilter(e)})),u.Rb(),u.Hc(6,E,1,0,"mat-spinner",3),u.Hc(7,A,1,6,"perun-web-apps-groups-list",4),u.Rb()}if(2&e){var i=u.dc();u.Ab(2),u.Lc(" ",u.fc(3,4,"SHARED.COMPONENTS.USER_DETAIL.GROUPS.USER_IS_ADMIN")," "),u.Ab(3),u.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),u.Ab(1),u.kc("ngIf",i.adminRefresh),u.Ab(1),u.kc("ngIf",!i.adminRefresh)}}var T=function(){var e=function(){function e(t,n,s,a,r,c){i(this,e),this.usersService=t,this.memberService=n,this.tableConfigService=s,this.groupService=a,this.store=r,this.route=c,this.memberFilterValue="",this.adminFilterValue="",this.vos=[],this.membersGroups=[],this.adminsGroups=[],this.tableId=o.Z,this.adminTableId=o.Y}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.adminPageSize=this.tableConfigService.getTablePageSize(this.adminTableId),!0===(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe((function(t){return e.userId=t.userId})),this.refreshAdminTable(),this.refreshMemberTable()}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"adminPageChanged",value:function(e){this.adminPageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.adminTableId,e.pageSize)}},{key:"memberFilter",value:function(e){this.memberFilterValue=e}},{key:"adminFilter",value:function(e){this.adminFilterValue=e}},{key:"refreshAdminTable",value:function(){var e=this;this.adminRefresh=!0,this.usersService.getGroupsWhereUserIsAdmin(this.userId).subscribe((function(t){e.adminsGroups=t,e.adminRefresh=!1}))}},{key:"refreshMemberTable",value:function(){var e=this;this.memberRefresh=!0,this.membersGroups=[],this.usersService.getVosWhereUserIsMember(this.userId).subscribe((function(n){e.vos=n;var i,s=function(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=t(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var s=0,a=function(){};return{s:a,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return c=e.done,e},e:function(e){o=!0,r=e},f:function(){try{c||null==i.return||i.return()}finally{if(o)throw r}}}}(e.vos);try{var a=function(){var t=i.value;e.memberService.getMemberByUser(t.id,e.userId).subscribe((function(n){e.groupService.getMemberGroups(n.id).subscribe((function(n){e.membersGroups=e.membersGroups.concat(n),e.vos.indexOf(t)===e.vos.length-1&&(e.memberRefresh=!1)}))}))};for(s.s();!(i=s.n()).done;)a()}catch(r){s.e(r)}finally{s.f()}0===n.length&&(e.memberRefresh=!1)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Mb(c.p),u.Mb(c.i),u.Mb(o.nb),u.Mb(c.h),u.Mb(r.m),u.Mb(b.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-user-groups"]],hostVars:2,hostBindings:function(e,t){2&e&&u.Eb("router-component",!0)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","groups","hideColumns","disableMembers","filter","page",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"ml-auto","mr-auto"],[3,"pageSize","groups","hideColumns","disableMembers","filter","page"],[1,"mt-5"]],template:function(e,t){1&e&&(u.Hc(0,g,3,3,"h1",0),u.Hc(1,h,3,3,"h1",0),u.Sb(2,"perun-web-apps-refresh-button",1),u.Zb("refresh",(function(){return t.refreshMemberTable()})),u.Rb(),u.Sb(3,"perun-web-apps-immediate-filter",2),u.Zb("filter",(function(e){return t.memberFilter(e)})),u.Rb(),u.Hc(4,v,1,0,"mat-spinner",3),u.Hc(5,R,1,6,"perun-web-apps-groups-list",4),u.Hc(6,y,8,6,"div",5)),2&e&&(u.kc("ngIf",t.showPrincipal),u.Ab(1),u.kc("ngIf",!t.showPrincipal),u.Ab(2),u.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),u.Ab(1),u.kc("ngIf",t.memberRefresh),u.Ab(1),u.kc("ngIf",!t.memberRefresh),u.Ab(1),u.kc("ngIf",!t.showPrincipal))},directives:[l.t,f.a,p.a,d.c,m.a],pipes:[S.d],styles:[""]}),e}()},ECIY:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var s=n("X2Q7"),r=n("Ssnw"),c=n("EM62"),o=n("sEIs"),u=n("2kYt"),b=n("bdug"),l=n("csyo"),f=n("s2Ay");function p(e,t){if(1&e&&c.Nb(0,"app-two-entity-attribute-page",3),2&e){var n=c.dc();c.kc("entityValues",n.facilities)("firstEntity","user")("firstEntityId",n.userId)("secondEntity","facility")}}function d(e,t){1&e&&c.Nb(0,"mat-spinner",4)}var m=function(){var e=function(){function e(t,n,s,a){i(this,e),this.route=t,this.storage=n,this.facilitiesManagerService=s,this.store=a,this.facilities=[]}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,!0===(this.showPrincipal=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.parent.params.subscribe((function(t){return e.userId=t.userId})),this.facilitiesManagerService.getAssignedFacilitiesByUser(this.userId).subscribe((function(t){e.facilities=t,e.loading=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Mb(o.a),c.Mb(r.m),c.Mb(s.g),c.Mb(r.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-settings-facility-attributes"]],decls:5,vars:5,consts:[[1,"page-subtitle"],[3,"entityValues","firstEntity","firstEntityId","secondEntity",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"entityValues","firstEntity","firstEntityId","secondEntity"],[1,"ml-auto","mr-auto"]],template:function(e,t){1&e&&(c.Sb(0,"h1",0),c.Jc(1),c.ec(2,"translate"),c.Rb(),c.Hc(3,p,1,4,"app-two-entity-attribute-page",1),c.Hc(4,d,1,0,"mat-spinner",2)),2&e&&(c.Ab(1),c.Kc(c.fc(2,3,"USER_DETAIL.SETTINGS.FACILITY_ATTRIBUTES.TITLE")),c.Ab(2),c.kc("ngIf",!t.loading),c.Ab(1),c.kc("ngIf",t.loading))},directives:[u.t,b.a,l.c],pipes:[f.d],styles:[""]}),e}()},"Q/gj":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var s=n("Ssnw"),r=(n("HHEo"),n("cqs0")),c=n("8clQ"),o=n("mEf3"),u=n("X2Q7"),b=n("iyZ4"),l=n("+0js"),f=n("IDQ9"),p=n("EM62"),d=n("sEIs"),m=n("OZ4H"),S=n("s2Ay"),g=n("KZIX"),h=n("0XDM"),v=n("PBFl"),I=n("A8Ay"),R=n("2kYt"),E=n("csyo"),A=n("LKLE"),y=n("bdug"),T=["list"];function k(e,t){1&e&&(p.Jc(0),p.ec(1,"translate")),2&e&&p.Lc(" ",p.fc(1,1,"ADMIN_USER.ENTITY")," ")}function O(e,t){1&e&&p.Nb(0,"mat-spinner",11)}function M(e,t){if(1&e){var n=p.Tb();p.Sb(0,"perun-web-apps-attributes-list",12,13),p.Zb("page",(function(e){return p.xc(n),p.dc().pageChanged(e)})),p.Rb()}if(2&e){var i=p.dc();p.kc("pageSize",i.pageSize)("filterValue",i.filterValue)("attributes",i.attributes)("selection",i.selection)}}function N(e,t){1&e&&(p.Jc(0),p.ec(1,"translate"),p.ec(2,"translate")),2&e&&p.Mc(" ",p.fc(1,2,"ADMIN_USER.ENTITY")," - ",p.fc(2,4,"FACILITY_DETAIL.ENTITY")," ")}function U(e,t){if(1&e&&p.Nb(0,"app-two-entity-attribute-page",16),2&e){var n=p.dc(3);p.kc("firstEntity","user")("firstEntityId",n.userId)("secondEntity","facility")}}function C(e,t){if(1&e&&p.Hc(0,U,1,3,"app-two-entity-attribute-page",15),2&e){var n=p.dc(2);p.kc("ngIf",!n.loading)}}function P(e,t){1&e&&(p.Sb(0,"mat-tab"),p.Hc(1,N,3,6,"ng-template",2),p.Hc(2,C,1,1,"ng-template",14),p.Rb())}var w=function(){var e=function(){function e(t,n,s,a,c,o,u,l){var f=this;i(this,e),this.route=t,this.attributesManager=n,this.notificator=s,this.dialog=a,this.translate=c,this.tableConfigService=o,this.store=u,this.authResolver=l,this.selection=new r.c(!0,[]),this.attributes=[],this.filterValue="",this.tableId=b.p,this.translate.get("USER_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(e){return f.saveSuccessMessage=e})),this.translate.get("USER_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(e){return f.deleteSuccessMessage=e}))}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.userId=t.userId,void 0===e.userId&&(e.userId=e.store.getPerunPrincipal().userId),e.userFacilityAttAuth=e.authResolver.isAuthorized("getAssignedFacilities_User_policy",[{id:e.userId,beanName:"User"}]),e.refreshTable()}))}},{key:"onCreate",value:function(){var e=this,t=Object(c.o)();t.width="1050px",t.data={entityId:this.userId,entity:"user",notEmptyAttributes:this.attributes,style:"user-theme"},this.dialog.open(f.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes();var t=Object(c.o)();t.width="450px",t.data={entityId:this.userId,entity:"user",attributes:this.selection.selected},this.dialog.open(l.f,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onDelete",value:function(){var e=this,t=Object(c.o)();t.width="450px",t.data={entityId:this.userId,entity:"user",attributes:this.selection.selected},this.dialog.open(o.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getUserAttributes(this.userId).subscribe((function(t){e.attributes=t,e.selection.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Mb(d.a),p.Mb(u.c),p.Mb(s.l),p.Mb(m.b),p.Mb(S.e),p.Mb(b.nb),p.Mb(s.m),p.Mb(s.h))},e.\u0275cmp=p.Gb({type:e,selectors:[["app-user-settings-attributes"]],viewQuery:function(e,t){var n;1&e&&p.Qc(T,!0),2&e&&p.sc(n=p.ac())&&(t.list=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&p.Eb("router-component",!0)},decls:20,vars:18,consts:[[1,"page-subtitle"],[1,"mb-2"],["matTabLabel",""],[1,"mt-2",3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2","mt-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"mt-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""],["matTabContent",""],[3,"firstEntity","firstEntityId","secondEntity",4,"ngIf"],[3,"firstEntity","firstEntityId","secondEntity"]],template:function(e,t){1&e&&(p.Sb(0,"h1",0),p.Jc(1),p.ec(2,"translate"),p.Rb(),p.Sb(3,"mat-tab-group"),p.Sb(4,"mat-tab",1),p.Hc(5,k,2,3,"ng-template",2),p.Sb(6,"perun-web-apps-refresh-button",3),p.Zb("refresh",(function(){return t.refreshTable()})),p.Rb(),p.Sb(7,"button",4),p.Zb("click",(function(){return t.onCreate()})),p.Jc(8),p.ec(9,"translate"),p.Rb(),p.Sb(10,"button",5),p.Zb("click",(function(){return t.onSave()})),p.Jc(11),p.ec(12,"translate"),p.Rb(),p.Sb(13,"button",6),p.Zb("click",(function(){return t.onDelete()})),p.Jc(14),p.ec(15,"translate"),p.Rb(),p.Sb(16,"perun-web-apps-immediate-filter",7),p.Zb("filter",(function(e){return t.applyFilter(e)})),p.Rb(),p.Hc(17,O,1,0,"mat-spinner",8),p.Hc(18,M,2,4,"perun-web-apps-attributes-list",9),p.Rb(),p.Hc(19,P,3,0,"mat-tab",10),p.Rb()),2&e&&(p.Ab(1),p.Kc(p.fc(2,10,"USER_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),p.Ab(7),p.Lc(" ",p.fc(9,12,"USER_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),p.Ab(2),p.kc("disabled",0===t.selection.selected.length),p.Ab(1),p.Lc(" ",p.fc(12,14,"USER_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),p.Ab(2),p.kc("disabled",0===t.selection.selected.length),p.Ab(1),p.Lc(" ",p.fc(15,16,"USER_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),p.Ab(2),p.kc("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),p.Ab(1),p.kc("ngIf",t.loading),p.Ab(1),p.kc("ngIf",!t.loading),p.Ab(1),p.kc("ngIf",t.userFacilityAttAuth))},directives:[g.c,g.a,g.d,h.a,v.b,I.a,R.t,E.c,A.a,g.b,y.a],pipes:[S.d],styles:[""]}),e}()},QOlj:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var s=n("X2Q7"),r=n("FlRo"),c=n("Ssnw"),o=n("nyAh"),u=n("8clQ"),b=n("+0js"),l=n("EM62"),f=n("sEIs"),p=n("OZ4H"),d=n("2kYt"),m=n("ZG5M"),S=n("Meci"),g=n("PBFl"),h=n("bFHC"),v=n("s2Ay");function I(e,t){1&e&&l.Nb(0,"th",12)}function R(e,t){if(1&e&&(l.Sb(0,"td",13),l.Jc(1),l.Rb()),2&e){var n=t.$implicit;l.Ab(1),l.Lc(" ",n.displayName,": ")}}function E(e,t){1&e&&l.Nb(0,"th",12)}function A(e,t){if(1&e){var n=l.Tb();l.Sb(0,"td",14),l.Jc(1),l.Sb(2,"button",15),l.Zb("click",(function(){return l.xc(n),l.dc(2).changeEmail()})),l.Sb(3,"mat-icon"),l.Jc(4,"edit"),l.Rb(),l.Rb(),l.Rb()}if(2&e){var i=t.$implicit;l.Ab(1),l.Lc(" ",i.value," ")}}function y(e,t){1&e&&l.Nb(0,"tr",16)}function T(e,t){if(1&e&&(l.Sb(0,"div",2),l.Sb(1,"mat-card",3),l.Sb(2,"mat-card-header"),l.Sb(3,"mat-card-title"),l.Sb(4,"h1",4),l.Jc(5),l.ec(6,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Sb(7,"mat-card-content"),l.Sb(8,"table",5),l.Qb(9,6),l.Hc(10,I,1,0,"th",7),l.Hc(11,R,2,1,"td",8),l.Pb(),l.Qb(12,9),l.Hc(13,E,1,0,"th",7),l.Hc(14,A,5,1,"td",10),l.Pb(),l.Hc(15,y,1,0,"tr",11),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.dc();l.Ab(5),l.Kc(l.fc(6,3,"USER_DETAIL.OVERVIEW.GENERAL_SETTINGS")),l.Ab(3),l.kc("dataSource",n.mailDataSource),l.Ab(7),l.kc("matRowDefColumns",n.displayedColumns)}}var k=function(){var e=function(){function e(t,n,s,a,r){i(this,e),this.userService=t,this.attributeService=n,this.storeService=s,this.route=a,this.dialog=r,this.navItems=[],this.displayedColumns=["name","value"],this.inMyProfile=!1}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){void 0!==t.userId?e.userService.getUserById(t.userId).subscribe((function(t){e.user=t,e.initNavItems()})):(e.inMyProfile=!0,e.userID=e.storeService.getPerunPrincipal().user.id,e.attributeService.getUserAttributeByName(e.userID,o.a.USER_DEF_PREFERRED_MAIL).subscribe((function(t){e.preferredMail=t,e.handleMailNotDefined(),e.mailDataSource=new r.o([e.preferredMail]),e.initNavItems()})))}))}},{key:"initNavItems",value:function(){this.navItems=[{cssIcon:"perun-vo",url:"organizations",label:"MENU_ITEMS.ADMIN.ORGANIZATIONS",style:"user-btn"},{cssIcon:"perun-group",url:"groups",label:"MENU_ITEMS.ADMIN.GROUPS",style:"user-btn"}],window.location.pathname.startsWith("/admin")&&this.navItems.push({cssIcon:"perun-group",url:"identities",label:"MENU_ITEMS.USER.IDENTITIES",style:"user-btn"},{cssIcon:"perun-facility-white",url:"facilities",label:"MENU_ITEMS.USER.FACILITIES",style:"user-btn"},{cssIcon:"perun-resource",url:"resources",label:"MENU_ITEMS.USER.RESOURCES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-attributes",url:"attributes",label:"MENU_ITEMS.USER.ATTRIBUTES",style:"user-btn"}),this.navItems.push({cssIcon:"perun-group",url:"roles",label:"MENU_ITEMS.USER.ROLES",style:"user-btn"},{cssIcon:"perun-settings2",url:"settings",label:"MENU_ITEMS.ADMIN.SETTINGS",style:"user-btn"})}},{key:"changeEmail",value:function(){var e=this,t=Object(u.o)();t.width="350px",t.data={userId:this.userID},this.dialog.open(b.c,t).afterClosed().subscribe((function(t){t&&e.attributeService.getUserAttributeByName(e.userID,o.a.USER_DEF_PREFERRED_MAIL).subscribe((function(t){e.preferredMail=t,e.handleMailNotDefined(),e.mailDataSource=new r.o([e.preferredMail])}))}))}},{key:"handleMailNotDefined",value:function(){null==this.preferredMail&&(this.preferredMail={id:-1,beanName:"Attribute",displayName:Object(u.t)(o.a.USER_DEF_PREFERRED_MAIL.split(":").pop()),value:Object("-")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Mb(s.p),l.Mb(s.c),l.Mb(c.m),l.Mb(f.a),l.Mb(p.b))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-user-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Eb("router-component",!0)},decls:2,vars:3,consts:[["class","align-cards",4,"ngIf"],[3,"items","size"],[1,"align-cards"],[1,"mat-elevation-z3"],[1,"page-subtitle"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","font-weight-bold","mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"font-weight-bold"],["mat-cell",""],["mat-icon-button","",1,"ml-3",3,"click"],["mat-row",""]],template:function(e,t){1&e&&(l.Hc(0,T,16,5,"div",0),l.Nb(1,"perun-web-apps-menu-buttons-field",1)),2&e&&(l.kc("ngIf",t.inMyProfile),l.Ab(1),l.kc("items",t.navItems)("size","small"))},directives:[d.t,m.a,S.a,S.f,S.m,S.d,r.n,r.c,r.i,r.b,r.m,r.h,r.a,g.b,h.a,r.l],pipes:[v.d],styles:[".align-cards[_ngcontent-%COMP%]{margin:1rem;display:inline-block;vertical-align:top}"]}),e}()},S5du:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var s=n("X2Q7"),r=n("Ssnw"),c=n("iyZ4"),o=n("EM62"),u=n("sEIs"),b=n("2kYt"),l=n("0XDM"),f=n("A8Ay"),p=n("csyo"),d=n("qySP"),m=n("s2Ay");function S(e,t){1&e&&(o.Sb(0,"h1",6),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.YOU_ARE_MEMBER"),"\n"))}function g(e,t){1&e&&(o.Sb(0,"h1",6),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_MEMBER"),"\n"))}function h(e,t){1&e&&o.Nb(0,"mat-spinner",7)}function v(e,t){if(1&e){var n=o.Tb();o.Sb(0,"perun-web-apps-vos-list",8),o.Zb("page",(function(e){return o.xc(n),o.dc().memberPageChanged(e)})),o.Rb()}if(2&e){var i=o.dc();o.kc("displayedColumns",i.displayedColumns)("pageSize",i.memberPageSize)("filterValue",i.memberFilterValue)("vos",i.vosWhereIsMember)}}function I(e,t){1&e&&o.Nb(0,"mat-spinner",7)}function R(e,t){if(1&e){var n=o.Tb();o.Sb(0,"perun-web-apps-vos-list",8),o.Zb("page",(function(e){return o.xc(n),o.dc(2).adminPageChanged(e)})),o.Rb()}if(2&e){var i=o.dc(2);o.kc("displayedColumns",i.displayedColumns)("pageSize",i.adminPageSize)("filterValue",i.adminFilterValue)("vos",i.vosWhereIsAdmin)}}function E(e,t){if(1&e){var n=o.Tb();o.Sb(0,"div",9),o.Sb(1,"h1",6),o.Jc(2),o.ec(3,"translate"),o.Rb(),o.Sb(4,"perun-web-apps-refresh-button",1),o.Zb("refresh",(function(){return o.xc(n),o.dc().refreshAdminTable()})),o.Rb(),o.Sb(5,"perun-web-apps-immediate-filter",2),o.Zb("filter",(function(e){return o.xc(n),o.dc().applyAdminFilter(e)})),o.Rb(),o.Hc(6,I,1,0,"mat-spinner",3),o.Hc(7,R,1,4,"perun-web-apps-vos-list",4),o.Rb()}if(2&e){var i=o.dc();o.Ab(2),o.Kc(o.fc(3,4,"SHARED_LIB.PERUN.ORGANIZATIONS.USER_IS_ADMIN")),o.Ab(3),o.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),o.Ab(1),o.kc("ngIf",i.adminRefresh),o.Ab(1),o.kc("ngIf",!i.adminRefresh)}}var A=function(){var e=function(){function e(t,n,s,a,r){i(this,e),this.usersService=t,this.authResolver=n,this.tableConfigService=s,this.store=a,this.route=r,this.adminFilterValue="",this.memberFilterValue="",this.displayedColumns=["id","name"],this.adminTableId=c.bb,this.memberTableId=c.cb}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.adminPageSize=this.tableConfigService.getTablePageSize(this.adminTableId),this.memberPageSize=this.tableConfigService.getTablePageSize(this.memberTableId),!0===(this.isMyProfile=this.route.snapshot.data.showPrincipal)?this.userId=this.store.getPerunPrincipal().user.id:this.route.parent.params.subscribe((function(t){return e.userId=t.userId})),this.refreshAdminTable(),this.refreshMemberTable()}},{key:"refreshMemberTable",value:function(){var e=this;this.memberRefresh=!0,this.usersService.getVosWhereUserIsMember(this.userId).subscribe((function(t){e.vosWhereIsMember=t,e.memberRefresh=!1}),(function(){return e.memberRefresh=!1}))}},{key:"refreshAdminTable",value:function(){var e=this;this.adminRefresh=!0,this.usersService.getVosWhereUserIsAdmin(this.userId).subscribe((function(t){e.vosWhereIsAdmin=t,e.adminRefresh=!1}),(function(){return e.adminRefresh=!1}))}},{key:"applyMemberFilter",value:function(e){this.memberFilterValue=e}},{key:"adminPageChanged",value:function(e){this.adminPageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.adminTableId,e.pageSize)}},{key:"memberPageChanged",value:function(e){this.memberPageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.memberTableId,e.pageSize)}},{key:"applyAdminFilter",value:function(e){this.adminFilterValue=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Mb(s.p),o.Mb(r.h),o.Mb(c.nb),o.Mb(r.m),o.Mb(u.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-user-organizations"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Eb("router-component",!0)},decls:7,vars:6,consts:[["class","page-subtitle",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],["class","mr-auto ml-auto",4,"ngIf"],[3,"displayedColumns","pageSize","filterValue","vos","page",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"page-subtitle"],[1,"mr-auto","ml-auto"],[3,"displayedColumns","pageSize","filterValue","vos","page"],[1,"mt-5"]],template:function(e,t){1&e&&(o.Hc(0,S,3,3,"h1",0),o.Hc(1,g,3,3,"h1",0),o.Sb(2,"perun-web-apps-refresh-button",1),o.Zb("refresh",(function(){return t.refreshMemberTable()})),o.Rb(),o.Sb(3,"perun-web-apps-immediate-filter",2),o.Zb("filter",(function(e){return t.applyMemberFilter(e)})),o.Rb(),o.Hc(4,h,1,0,"mat-spinner",3),o.Hc(5,v,1,4,"perun-web-apps-vos-list",4),o.Hc(6,E,8,6,"div",5)),2&e&&(o.kc("ngIf",t.isMyProfile),o.Ab(1),o.kc("ngIf",!t.isMyProfile),o.Ab(2),o.kc("placeholder","SHARED_LIB.PERUN.ORGANIZATIONS.FILTER"),o.Ab(1),o.kc("ngIf",t.memberRefresh),o.Ab(1),o.kc("ngIf",!t.memberRefresh),o.Ab(1),o.kc("ngIf",!t.isMyProfile))},directives:[b.t,l.a,f.a,p.c,d.a],pipes:[m.d],styles:[""]}),e}()},faZ6:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("EM62"),r=n("ma6z"),c=function(){var e=function(){function e(){i(this,e)}return a(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-user-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Eb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&s.Nb(0,"app-animated-router-outlet")},directives:[r.a],styles:[""]}),e}()},m1kt:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var s=n("X2Q7"),r=n("EM62"),c=n("sEIs"),o=n("2kYt"),u=n("csyo"),b=n("ZG5M");function l(e,t){1&e&&r.Nb(0,"mat-spinner",2)}function f(e,t){if(1&e&&(r.Sb(0,"div"),r.Nb(1,"perun-web-apps-menu-buttons-field",3),r.Rb()),2&e){var n=r.dc();r.Ab(1),r.kc("items",n.navItems)("size","small")}}var p=function(){var e=function(){function e(t,n){i(this,e),this.route=t,this.userManager=n,this.navItems=[],this.loading=!1}return a(e,[{key:"ngOnInit",value:function(){var e=this;window.location.pathname.startsWith("/admin")?(this.loading=!0,this.route.parent.parent.params.subscribe((function(t){e.userManager.getUserById(t.userId).subscribe((function(t){e.isServiceUser=t.serviceUser,e.initNavItems(),e.loading=!1}),(function(){return e.loading=!1}))}))):this.initNavItems()}},{key:"initNavItems",value:function(){this.navItems=[],window.location.pathname.startsWith("/admin")?this.navItems.push(this.isServiceUser?{cssIcon:"perun-service-identity",url:"associated-users",label:"MENU_ITEMS.USER.ASSOCIATED_USERS",style:"user-btn"}:{cssIcon:"perun-service-identity",url:"service-identities",label:"MENU_ITEMS.USER.SERVICE_IDENTITIES",style:"user-btn"}):this.navItems.push({cssIcon:"perun-settings2",url:"passwordReset",label:"MENU_ITEMS.USER.PASSWORD_RESET",style:"user-btn"},{cssIcon:"perun-settings2",url:"guiConfig",label:"MENU_ITEMS.USER.GUI_CONFIG",style:"user-btn"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Mb(c.a),r.Mb(s.p))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-user-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Eb("router-component",!0)},decls:2,vars:2,consts:[["class","mr-auto ml-auto",4,"ngIf"],[4,"ngIf"],[1,"mr-auto","ml-auto"],[3,"items","size"]],template:function(e,t){1&e&&(r.Hc(0,l,1,0,"mat-spinner",0),r.Hc(1,f,2,2,"div",1)),2&e&&(r.kc("ngIf",t.loading),r.Ab(1),r.kc("ngIf",!t.loading))},directives:[o.t,u.c,b.a],styles:[""]}),e}()},oXY0:function(t,n,s){"use strict";s.d(n,"a",(function(){return xe}));var r=s("X2Q7"),c=s("Ssnw"),o=s("EM62"),u=s("sEIs"),b=s("2kYt"),l=s("csyo"),f=s("3Uyd"),p=s("bFHC"),d=s("Meci"),m=s("qySP"),S=s("NC8S"),g=s("K9kF"),h=s("23RZ"),v=s("w+DT"),I=s("nz2m"),R=s("s2Ay");function E(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function A(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function y(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.SELF_VOS_ADMIN")," "))}function T(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.SELF_VOS")," "))}function k(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.SELF_IDENTITIES_ADMIN")," "))}function O(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.SELF_IDENTITIES")," "))}var M=function(){return["user","id","name"]};function N(e,t){if(1&e&&(o.Sb(0,"div",11),o.Hc(1,k,3,3,"div",2),o.Hc(2,O,3,3,"div",2),o.Nb(3,"app-users-list",12),o.Rb()),2&e){var n=o.dc(4);o.Ab(1),o.kc("ngIf",!n.showDescription),o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("users",n.users)("disableRouting",!0)("displayedColumns",o.oc(5,M))}}var U=function(){return["id","name","shortName"]};function C(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,y,3,3,"div",2),o.Hc(2,T,3,3,"div",2),o.Nb(3,"perun-web-apps-vos-list",9),o.Hc(4,N,4,6,"div",10),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",!n.showDescription),o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(5,U))("vos",n.vos),o.Ab(1),o.kc("ngIf",n.users.length)}}function P(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getSelfData()})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",7),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,A,1,0,"mat-spinner",1),o.Hc(8,C,5,6,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.SELF")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function w(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function L(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.GROUPADMIN_GROUPS")," "))}var D=function(){return["select","menu","expiration","recent"]};function H(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,L,3,3,"div",2),o.Nb(2,"perun-web-apps-groups-list",14),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("groups",n.groups)("hideColumns",o.oc(3,D))}}function F(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getAdminGroupsAndVos()})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",13),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,w,1,0,"mat-spinner",1),o.Hc(8,H,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.GROUPADMIN")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function V(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function _(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.GROUPOBSERVER_GROUPS")," "))}var x=function(){return["select","menu","expiration"]};function G(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,_,3,3,"div",2),o.Nb(2,"perun-web-apps-groups-list",14),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("groups",n.groups)("hideColumns",o.oc(3,x))}}function z(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getGroupsAndVos("GROUPOBSERVER")})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",13),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,V,1,0,"mat-spinner",1),o.Hc(8,G,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.GROUPOBSERVER")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function B(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function J(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.VOADMIN_VOS")," "))}function Z(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,J,3,3,"div",2),o.Nb(2,"perun-web-apps-vos-list",9),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,U))("vos",n.vos)}}function Y(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getAdminVos()})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",15),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,B,1,0,"mat-spinner",1),o.Hc(8,Z,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.VOADMIN")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function K(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function j(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.VOOBSERVER_VOS")," "))}function Q(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,j,3,3,"div",2),o.Nb(2,"perun-web-apps-vos-list",9),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,U))("vos",n.vos)}}function W(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){o.xc(n);var e=o.dc(2);return e.getVos(e.roles.get("VOOBSERVER").get("Vo"))})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",15),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,K,1,0,"mat-spinner",1),o.Hc(8,Q,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.VOOBSERVER")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function X(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function q(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.TRUSTEDFACILITYADMIN_VOS")," "))}function $(e,t){if(1&e&&(o.Sb(0,"div"),o.Sb(1,"div"),o.Hc(2,q,3,3,"div",2),o.Nb(3,"perun-web-apps-vos-list",9),o.Rb(),o.Rb()),2&e){var n=o.dc(3);o.Ab(2),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,U))("vos",n.vos)}}function ee(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){o.xc(n);var e=o.dc(2);return e.getVos(e.roles.get("TRUSTEDFACILITYADMIN").get("Vo"))})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",15),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,X,1,0,"mat-spinner",1),o.Hc(8,$,4,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.TRUSTEDFACILITYADMIN")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function te(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function ne(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.TOPGROUPCREATOR_VOS")," "))}function ie(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,ne,3,3,"div",2),o.Nb(2,"perun-web-apps-vos-list",9),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,U))("vos",n.vos)}}function se(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){o.xc(n);var e=o.dc(2);return e.getVos(e.roles.get("TOPGROUPCREATOR").get("Vo"))})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",15),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,te,1,0,"mat-spinner",1),o.Hc(8,ie,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.TOPGROUPCREATOR")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function ae(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function re(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.RESOURCEADMIN_RESOURCES")," "))}var ce=function(){return["id","name","vo","facility","description"]};function oe(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,re,3,3,"div",2),o.Nb(2,"perun-web-apps-resources-list",17),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("resources",n.resources)("routingVo",!0)("displayedColumns",o.oc(4,ce))}}function ue(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getResourcesData("RESOURCEADMIN")})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",16),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,ae,1,0,"mat-spinner",1),o.Hc(8,oe,3,5,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.RESOURCEADMIN")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function be(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function le(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.RESOURCEOBSERVER_RESOURCES")," "))}function fe(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,le,3,3,"div",2),o.Nb(2,"perun-web-apps-resources-list",17),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("resources",n.resources)("routingVo",!0)("displayedColumns",o.oc(4,ce))}}function pe(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getResourcesData("RESOURCEOBSERVER")})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",16),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,be,1,0,"mat-spinner",1),o.Hc(8,fe,3,5,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.RESOURCEOBSERVER")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function de(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function me(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.RESOURCESELFSERVICE_RESOURCES")," "))}function Se(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,me,3,3,"div",2),o.Nb(2,"perun-web-apps-resources-list",17),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("resources",n.resources)("routingVo",!0)("displayedColumns",o.oc(4,ce))}}function ge(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getResourcesData("RESOURCESELFSERVICE")})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",16),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,de,1,0,"mat-spinner",1),o.Hc(8,Se,3,5,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.RESOURCESELFSERVICE")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function he(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function ve(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.FACILITYADMIN_FACILITIES")," "))}var Ie=function(){return["id","name","description"]};function Re(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,ve,3,3,"div",2),o.Nb(2,"perun-web-apps-facilities-list",19),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,Ie))("facilities",n.facilities)}}function Ee(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getAdminFacilities()})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",18),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,he,1,0,"mat-spinner",1),o.Hc(8,Re,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.FACILITYADMIN")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function Ae(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function ye(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.FACILITYOBSERVER_FACILITIES")," "))}function Te(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,ye,3,3,"div",2),o.Nb(2,"perun-web-apps-facilities-list",19),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,Ie))("facilities",n.facilities)}}function ke(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getFacilities("FACILITYOBSERVER")})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",18),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,Ae,1,0,"mat-spinner",1),o.Hc(8,Te,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.FACILITYOBSERVER")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function Oe(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function Me(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.SPONSORSHIP_MEMBERS")," "))}var Ne=function(){return["checkbox","email","logins","status","groupStatus","organization","type"]};function Ue(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,Me,3,3,"div",2),o.Nb(2,"perun-web-apps-members-list",20),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("members",n.members)("hideColumns",o.oc(3,Ne))}}function Ce(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){return o.xc(n),o.dc(2).getMembers()})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",7),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,Oe,1,0,"mat-spinner",1),o.Hc(8,Ue,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.SPONSORSHIP")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function Pe(e,t){1&e&&o.Nb(0,"mat-spinner",3)}function we(e,t){1&e&&(o.Sb(0,"div"),o.Jc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Lc(" ",o.fc(2,1,"ROLES.SPONSOR_VOS")," "))}function Le(e,t){if(1&e&&(o.Sb(0,"div"),o.Hc(1,we,3,3,"div",2),o.Nb(2,"perun-web-apps-vos-list",9),o.Rb()),2&e){var n=o.dc(3);o.Ab(1),o.kc("ngIf",n.showDescription),o.Ab(1),o.kc("displayedColumns",o.oc(3,U))("vos",n.vos)}}function De(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){o.xc(n);var e=o.dc(2);return e.getVos(e.roles.get("SPONSOR").get("Vo"))})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",7),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Hc(7,Pe,1,0,"mat-spinner",1),o.Hc(8,Le,3,4,"div",2),o.Rb()}if(2&e){var i=o.dc(2);o.Ab(5),o.Kc(o.fc(6,3,"ROLES.SPONSOR")),o.Ab(2),o.kc("ngIf",i.loading),o.Ab(1),o.kc("ngIf",!i.loading)}}function He(e,t){1&e&&(o.Sb(0,"mat-expansion-panel"),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",7),o.Sb(4,"p",8),o.Jc(5),o.ec(6,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&e&&(o.Ab(5),o.Kc(o.fc(6,1,"ROLES.PERUN_ADMIN")))}function Fe(e,t){if(1&e&&(o.Sb(0,"p",22),o.Jc(1),o.Rb()),2&e){var n=t.$implicit;o.Ab(1),o.Mc("",n[0]," ids: ",n[1],"")}}function Ve(e,t){if(1&e){var n=o.Tb();o.Sb(0,"mat-expansion-panel",6),o.Zb("opened",(function(){o.xc(n);var e=t.$implicit;return o.dc(2).getInnerKeys(e)})),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Nb(3,"mat-icon",7),o.Sb(4,"p",8),o.Jc(5),o.Rb(),o.Rb(),o.Rb(),o.Hc(6,Fe,2,2,"p",21),o.Rb()}if(2&e){var i=t.$implicit,s=o.dc(2);o.Ab(5),o.Kc(i),o.Ab(1),o.kc("ngForOf",s.currentIds)}}function _e(e,t){if(1&e&&(o.Sb(0,"mat-accordion"),o.Hc(1,P,9,5,"mat-expansion-panel",4),o.Hc(2,F,9,5,"mat-expansion-panel",4),o.Hc(3,z,9,5,"mat-expansion-panel",4),o.Hc(4,Y,9,5,"mat-expansion-panel",4),o.Hc(5,W,9,5,"mat-expansion-panel",4),o.Hc(6,ee,9,5,"mat-expansion-panel",4),o.Hc(7,se,9,5,"mat-expansion-panel",4),o.Hc(8,ue,9,5,"mat-expansion-panel",4),o.Hc(9,pe,9,5,"mat-expansion-panel",4),o.Hc(10,ge,9,5,"mat-expansion-panel",4),o.Hc(11,Ee,9,5,"mat-expansion-panel",4),o.Hc(12,ke,9,5,"mat-expansion-panel",4),o.Hc(13,Ce,9,5,"mat-expansion-panel",4),o.Hc(14,De,9,5,"mat-expansion-panel",4),o.Hc(15,He,7,3,"mat-expansion-panel",2),o.Hc(16,Ve,7,2,"mat-expansion-panel",5),o.Rb()),2&e){var n=o.dc();o.Ab(1),o.kc("ngIf",n.isSelf),o.Ab(1),o.kc("ngIf",n.isGroupAdmin),o.Ab(1),o.kc("ngIf",n.isGroupObserver),o.Ab(1),o.kc("ngIf",n.isVoAdmin),o.Ab(1),o.kc("ngIf",n.isVoObserver),o.Ab(1),o.kc("ngIf",n.isTrustedFacilityAdmin),o.Ab(1),o.kc("ngIf",n.isTopGroupCreator),o.Ab(1),o.kc("ngIf",n.isResourceAdmin),o.Ab(1),o.kc("ngIf",n.isResourceObserver),o.Ab(1),o.kc("ngIf",n.isResourceSelfService),o.Ab(1),o.kc("ngIf",n.isFacilityAdmin),o.Ab(1),o.kc("ngIf",n.isFacilityObserver),o.Ab(1),o.kc("ngIf",n.hasSponsorship),o.Ab(1),o.kc("ngIf",n.isSponsor),o.Ab(1),o.kc("ngIf",n.isPerunAdmin),o.Ab(1),o.kc("ngForOf",n.roleNames)}}var xe=function(){var t=function(){function t(e,n,s,a,r,c,o,u,b){i(this,t),this.authzResolverService=e,this.usersManagerService=n,this.vosManagerService=s,this.facilitiesManagerService=a,this.resourcesManagerService=r,this.membersManagerService=c,this.groupsManagerService=o,this.route=u,this.store=b,this.currentIds=[],this.roles=new Map,this.roleFilter=["SELF","GROUPADMIN","VOADMIN","RESOURCEADMIN","FACILITYADMIN","TOPGROUPCREATOR","SPONSORSHIP","SPONSOR","RESOURCESELFSERVICE","VOOBSERVER","RESOURCEOBSERVER","GROUPOBSERVER","TRUSTEDFACILITYADMIN","FACILITYOBSERVER","PERUNADMIN"],this.roleNames=[],this.groups=[],this.vos=[],this.facilities=[],this.users=[],this.resources=[],this.members=[]}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.outerLoading=!0,this.route.parent.params.subscribe((function(t){t.userId?(e.userId=t.userId,e.authzResolverService.getUserRoleNames(e.userId).subscribe((function(t){e.roleNames=t.map((function(e){return e.toUpperCase()})),e.authzResolverService.getUserRoles(e.userId).subscribe((function(t){e.prepareRoles(t)}))}))):(e.showDescription=!0,e.principal=e.store.getPerunPrincipal(),e.userId=e.principal.userId,e.roleNames=Object.keys(e.principal.roles),e.prepareRoles(e.principal.roles))}))}},{key:"prepareRoles",value:function(e){var t=this;this.roleNames.forEach((function(n){var i=new Map;switch(Object.keys(e[n]).forEach((function(t){i.set(t,e[n][t])})),n){case"SELF":t.isSelf=!0;break;case"GROUPADMIN":t.isGroupAdmin=!0;break;case"VOADMIN":t.isVoAdmin=!0;break;case"RESOURCEADMIN":t.isResourceAdmin=!0;break;case"FACILITYADMIN":t.isFacilityAdmin=!0;break;case"TOPGROUPCREATOR":t.isTopGroupCreator=!0;break;case"SPONSORSHIP":t.hasSponsorship=!0;break;case"SPONSOR":t.isSponsor=!0;break;case"RESOURCESELFSERVICE":t.isResourceSelfService=!0;break;case"VOOBSERVER":t.isVoObserver=!0;break;case"RESOURCEOBSERVER":t.isResourceObserver=!0;break;case"GROUPOBSERVER":t.isGroupObserver=!0;break;case"TRUSTEDFACILITYADMIN":t.isTrustedFacilityAdmin=!0;break;case"FACILITYOBSERVER":t.isFacilityObserver=!0;break;case"PERUNADMIN":t.isPerunAdmin=!0}t.roles.set(n,i)})),this.roleNames=this.roleNames.filter((function(e){return!t.roleFilter.includes(e)})),this.outerLoading=!1}},{key:"getAdminGroupsAndVos",value:function(){var t=this;this.loading=!0,this.groups=[],this.usersManagerService.getGroupsWhereUserIsAdmin(this.userId).subscribe((function(n){t.groups=n;var i=e(new Set(t.groups.map((function(e){return e.voId}))));t.getVos(i)}))}},{key:"getVos",value:function(e){var t=this;this.loading=!0,this.vos=[],this.vosManagerService.getVosByIds(e).subscribe((function(e){t.vos=e,t.loading=!1}))}},{key:"getInnerKeys",value:function(e){if(this.roles.get(e)){for(var t=this.roles.get(e).entries(),n=[],i=t.next().value;i;)n.push(i),i=t.next().value;this.currentIds=n}else this.currentIds=[]}},{key:"getAdminVos",value:function(){var e=this;this.loading=!0,this.vos=[],this.usersManagerService.getVosWhereUserIsAdmin(this.userId).subscribe((function(t){e.vos=t,e.loading=!1}))}},{key:"getAdminFacilities",value:function(){var e=this;this.loading=!0,this.facilities=[],this.facilitiesManagerService.getFacilitiesWhereUserIsAdmin(this.userId).subscribe((function(t){e.facilities=t.map((function(e){return{facility:e}})),e.loading=!1}))}},{key:"getSelfData",value:function(){var e=this;this.loading=!0,this.vos=[],this.users=[],this.usersManagerService.getVosWhereUserIsMember(this.userId).subscribe((function(t){e.vos=t;var n=e.roles.get("SELF").get("User");n?e.usersManagerService.getUsersByIds(n).subscribe((function(t){e.users=t,e.loading=!1})):e.loading=!1}))}},{key:"getResourcesData",value:function(e){var t=this;this.loading=!0;var n=this.roles.get(e).get("Resource");this.vos=[],this.facilities=[],this.resources=[],this.resourcesManagerService.getRichResourcesByIds(n).subscribe((function(e){t.resources=e,t.vos=t.resources.map((function(e){return e.vo})).filter((function(e,t,n){return n.indexOf(e)===t})),t.facilities=t.resources.map((function(e){return{facility:e.facility}})).filter((function(e,t,n){return n.indexOf(e)===t})),t.loading=!1}))}},{key:"getMembers",value:function(){var e=this;this.loading=!0;var t=this.roles.get("SPONSORSHIP").get("Member");this.members=[],this.membersManagerService.getRichMembersByIds(t).subscribe((function(t){e.members=t,e.loading=!1}))}},{key:"getGroupsAndVos",value:function(e){var t=this;this.loading=!0;var n=this.roles.get(e).get("Vo"),i=this.roles.get(e).get("Group");this.vos=[],this.groups=[],this.groupsManagerService.getGroupsByIds(i).subscribe((function(e){t.groups=e,t.vosManagerService.getVosByIds(n).subscribe((function(e){t.vos=e,t.loading=!1}))}))}},{key:"getFacilities",value:function(e){var t=this;this.loading=!0,this.facilities=[];var n=this.roles.get(e).get("Facility");this.facilitiesManagerService.getFacilitiesByIds(n).subscribe((function(e){t.facilities=e.map((function(e){return{facility:e}})),t.loading=!1}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Mb(r.d),o.Mb(r.p),o.Mb(r.q),o.Mb(r.g),o.Mb(r.m),o.Mb(r.i),o.Mb(r.h),o.Mb(u.a),o.Mb(c.m))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-user-roles"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Eb("router-component",!0)},decls:5,vars:5,consts:[[1,"page-subtitle","d-flex"],["class","ml-auto mr-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"opened",4,"ngIf"],[3,"opened",4,"ngFor","ngForOf"],[3,"opened"],["mat-card-avatar","","svgIcon","perun-user-dark",1,"mr-2"],[1,"mt-auto","mb-auto"],[3,"displayedColumns","vos"],["class","mt-5",4,"ngIf"],[1,"mt-5"],[3,"users","disableRouting","displayedColumns"],["mat-card-avatar","","svgIcon","perun-group-black",1,"mr-2"],[3,"groups","hideColumns"],["mat-card-avatar","","svgIcon","perun-vo-black",1,"mr-2"],["mat-card-avatar","","svgIcon","perun-resource-black",1,"mr-2"],[3,"resources","routingVo","displayedColumns"],["mat-card-avatar","","svgIcon","perun-facility-black",1,"mr-2"],[3,"displayedColumns","facilities"],[3,"members","hideColumns"],["class","role-content",4,"ngFor","ngForOf"],[1,"role-content"]],template:function(e,t){1&e&&(o.Sb(0,"h1",0),o.Jc(1),o.ec(2,"translate"),o.Rb(),o.Hc(3,E,1,0,"mat-spinner",1),o.Hc(4,_e,17,16,"mat-accordion",2)),2&e&&(o.Ab(1),o.Kc(o.fc(2,3,"ROLES.TITLE")),o.Ab(2),o.kc("ngIf",t.outerLoading),o.Ab(1),o.kc("ngIf",!t.outerLoading))},directives:[b.t,l.c,f.a,b.s,f.c,f.g,f.h,p.a,d.c,m.a,S.a,g.a,h.a,v.a,I.a],pipes:[R.d],styles:[".role-content[_ngcontent-%COMP%]{overflow:auto;overflow-y:hidden}.info-icon[_ngcontent-%COMP%]{vertical-align:middle;transform:scale(.8)}"]}),t}()},zrcO:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return he}));var s=n("2kYt"),r=n("sEIs"),c=n("S5du"),o=n("BAI5"),u=n("faZ6"),b=n("m1kt"),l=n("Q/gj"),f=n("ECIY"),p=n("HHEo"),d=n("8clQ"),m=n("iyZ4"),S=n("EM62"),g=n("29Wa"),h=n("R7+U"),v=n("mFH5"),I=n("s2Ay");function R(e,t){if(1&e&&(S.Sb(0,"mat-option",5),S.Jc(1),S.Rb()),2&e){var n=t.$implicit;S.kc("value",n),S.Ab(1),S.Lc(" ",n," ")}}var E,A=((E=function(){function e(t){i(this,e),this.guiConfigService=t,this.tablePageSizeOptions=d.a}return a(e,[{key:"ngOnInit",value:function(){this.preferredTablePageSize=this.guiConfigService.getNumber(m.c)}},{key:"updatePreferredTablePageSize",value:function(){this.guiConfigService.setNumber(m.c,this.preferredTablePageSize)}}]),e}()).\u0275fac=function(e){return new(e||E)(S.Mb(m.b))},E.\u0275cmp=S.Gb({type:E,selectors:[["app-user-settings-app-configuration"]],decls:10,vars:8,consts:[[1,"page-subtitle"],[1,"col-12","col-lg-6","p-0"],[1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(S.Sb(0,"h1",0),S.Jc(1),S.ec(2,"translate"),S.Rb(),S.Sb(3,"div",1),S.Sb(4,"mat-form-field",2),S.Sb(5,"mat-label"),S.Jc(6),S.ec(7,"translate"),S.Rb(),S.Sb(8,"mat-select",3),S.Zb("valueChange",(function(e){return t.preferredTablePageSize=e}))("valueChange",(function(){return t.updatePreferredTablePageSize()})),S.Hc(9,R,2,2,"mat-option",4),S.Rb(),S.Rb(),S.Rb()),2&e&&(S.Ab(1),S.Kc(S.fc(2,4,"USER_DETAIL.SETTINGS.GUI_CONFIG.TITLE")),S.Ab(5),S.Kc(S.fc(7,6,"USER_DETAIL.SETTINGS.GUI_CONFIG.PREF_TABLE_PAGE_SIZE")),S.Ab(2),S.kc("value",t.preferredTablePageSize),S.Ab(1),S.kc("ngForOf",t.tablePageSizeOptions))},directives:[g.c,g.g,h.a,s.s,v.n],pipes:[I.d],styles:[""]}),E),y=n("QOlj"),T=n("4sdY"),k=n("Ssnw"),O=n("EtYo"),M=n("bFHC"),N=n("Y2X+"),U=n("ma6z"),C=n("j+u3"),P=function(){return{color:"black"}},w=function(){return["/myProfile"]};function L(e,t){if(1&e&&(S.Sb(0,"div",1),S.Nb(1,"perun-web-apps-back-button"),S.Sb(2,"div",2),S.Nb(3,"mat-icon",3),S.ec(4,"translate"),S.Sb(5,"div",4),S.Sb(6,"div",5),S.Sb(7,"a",6),S.Jc(8),S.ec(9,"userFullName"),S.Rb(),S.Sb(10,"span",7),S.Jc(11),S.Rb(),S.Rb(),S.Sb(12,"span",8),S.Jc(13),S.ec(14,"translate"),S.ec(15,"translate"),S.Rb(),S.Rb(),S.Rb(),S.Nb(16,"app-animated-router-outlet"),S.Rb()),2&e){var n=S.dc();S.Ab(3),S.lc("matTooltip",S.fc(4,8,"MENU_ITEMS.USER.ENTITY")),S.kc("ngStyle",S.oc(16,P)),S.Ab(4),S.kc("routerLink",S.oc(17,w)),S.Ab(1),S.Lc(" ",S.fc(9,10,n.user)," "),S.Ab(3),S.Lc(" \xa0#",n.user.id," "),S.Ab(2),S.Nc(" ",S.fc(14,12,"MENU_ITEMS.USER.ENTITY"),", ",S.fc(15,14,"MENU_ITEMS.USER.USER_TYPE"),": ",n.getUserType()," ")}}var D,H,F,V=((D=function(){function e(t,n,s){i(this,e),this.sideMenuService=t,this.store=n,this.router=s}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.path=this.router.url,this.router.events.subscribe((function(t){e.path=e.router.url})),this.principal=this.store.getPerunPrincipal(),this.user=this.principal.user,this.sideMenuService.setUserItems([])}},{key:"getUserType",value:function(){return this.user.serviceUser?"Service":"Person"}}]),e}()).\u0275fac=function(e){return new(e||D)(S.Mb(T.a),S.Mb(k.m),S.Mb(r.f))},D.\u0275cmp=S.Gb({type:D,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 user-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","user-theme"],[1,"d-flex","page-title-headtitle"],["svgIcon","perun-user-dark",1,"perun-icon","perun-icon-detail",3,"matTooltip","ngStyle"],[1,"page-title-block"],[1,"page-title-headline","d-flex","align-items-center"],[1,"user-link",3,"routerLink"],[1,"text-muted"],[1,"mt-1","entity-info"]],template:function(e,t){1&e&&S.Hc(0,L,17,18,"div",0),2&e&&S.kc("ngIf",void 0!==t.user)},directives:[s.t,O.a,M.a,N.a,s.w,r.i,U.a],pipes:[I.d,C.a],styles:[""]}),D),_=n("oXY0"),x=[{path:"",component:V,children:[{path:"",component:y.a,data:{animation:"UserOverviewPage"}},{path:"attributes",component:l.a,data:{animation:"UserAttributesPage"}},{path:"organizations",component:c.a,data:{animation:"UserOrganizationsPage",showPrincipal:!0}},{path:"groups",component:o.a,data:{animation:"UserGroupsPage",showPrincipal:!0}},{path:"roles",component:_.a,data:{animation:"UserRolesPage"}},{path:"settings",component:u.a,children:[{path:"",component:b.a,data:{animation:"UserSettingsOverviewPage"}},{path:"facilityAttributes",component:f.a,data:{animation:"UserSettingsFacilityAttributesPage",showPrincipal:!0}},{path:"passwordReset",component:p.c,data:{animation:"PasswordResetPage"}},{path:"guiConfig",component:A,data:{animation:"UserAppConfigurationPage"}}]}]}],G=((H=function e(){i(this,e)}).\u0275mod=S.Kb({type:H}),H.\u0275inj=S.Jb({factory:function(e){return new(e||H)},imports:[[r.j.forChild(x)],r.j]}),H),z=n("ulve"),B=n("Cd2c"),J=n("nIj0"),Z=n("lQ7A"),Y=n("3Uyd"),K=n("PBFl"),j=n("cePI"),Q=n("FlRo"),W=n("KZIX"),X=n("QcI7"),q=n("+Tre"),$=n("OZ4H"),ee=n("W1gw"),te=n("csyo"),ne=n("66mq"),ie=n("k8N0"),se=n("gcUQ"),ae=n("F1o0"),re=n("zmEM"),ce=n("iAde"),oe=n("Meci"),ue=n("x9Az"),be=n("oqI+"),le=n("S17y"),fe=n("Jb3d"),pe=n("qvOF"),de=n("KoHB"),me=n("f3iV"),Se=n("t47Z"),ge=n("PCNd"),he=((F=function e(t){i(this,e),this.translate=t,t.addLangs(["en","cs"])}).\u0275mod=S.Kb({type:F}),F.\u0275inj=S.Jb({factory:function(e){return new(e||F)(S.Wb(I.e))},imports:[[s.c,G,z.b,B.c,g.e,J.B,J.l,M.b,Z.g,Y.b,I.c.forChild({}),K.c,j.c,Q.p,W.g,X.e,K.c,q.b,$.h,h.b,ee.b,te.b,ne.b,N.b,ie.b,se.g,v.l,ae.c,re.b,v.t,ce.b,oe.j,ue.g,be.g,oe.j,le.g,fe.c,pe.g,de.a,me.b,p.d,m.a,Se.b,ge.a]]}),F)}}])}();