<h1 mat-dialog-title>{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.TITLE' | translate}}</h1>
<div class="dialog-container user-theme" mat-dialog-content>
    <form *ngIf="!loading" [formGroup]="formGroup">
      <div class="display-flex">
        <mat-form-field>
          <mat-label>{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.OLD_PASSWORD' | translate}}</mat-label>
          <input formControlName="oldPasswordCtrl" matInput required type="password">
          <mat-error *ngIf="oldPwd.hasError('required')">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.FIELD_EMPTY' | translate}}</mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.NEW_PASSWORD' | translate}}</mat-label>
          <input formControlName="passwordCtrl" matInput required type="password">
          <mat-error *ngIf="newPwd.hasError('required')">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.FIELD_EMPTY' | translate}}</mat-error>
          <mat-error *ngIf="newPwd.hasError('isWeak') && !newPwd.hasError('minlength')">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.PWD_WEAK' | translate}}</mat-error>
          <mat-error *ngIf="newPwd.hasError('minlength')">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.PWD_SHORT' | translate}}</mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.NEW_PASSWORD_AGAIN' | translate}}</mat-label>
          <input formControlName="passwordAgainCtrl" matInput required type="password">
          <mat-error *ngIf="newPwdAgain.hasError('required')">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.FIELD_EMPTY' | translate}}</mat-error>
          <mat-error *ngIf="newPwdAgain.hasError('noPasswordMatch')">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.PWD_DONT_MATCH' | translate}}</mat-error>
        </mat-form-field>

              <p class="white-space-pre">{{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.PASSWORD_INFO' | translate}}</p>
      </div>
    </form>
    <mat-spinner *ngIf="loading" class="ml-auto mr-auto"></mat-spinner>
</div>

<div *ngIf="!loading" mat-dialog-actions>
  <div class="ml-auto">
    <button (click)="close()" mat-button>
      {{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.CANCEL' | translate}}
    </button>
    <button
      (click)="changePassword()"
      [disabled]="formGroup.invalid"
      class="ml-2"
      color="accent"
      mat-flat-button>
      {{'SHARED_LIB.PERUN.COMPONENTS.CHANGE_PASSWORD_DIALOG.CHANGE' | translate}}
    </button>
  </div>
</div>
