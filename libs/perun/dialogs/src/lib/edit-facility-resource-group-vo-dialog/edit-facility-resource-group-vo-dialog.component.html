<ng-template #spinner>
  <perun-web-apps-loading-dialog></perun-web-apps-loading-dialog>
</ng-template>
<div class="{{theme}} position-relative">
  <div *perunWebAppsLoader="loading; indicator: spinner">
    @if (dialogType === 0) {
      <h1 mat-dialog-title>
        {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.EDIT_FACILITY' | translate}}
      </h1>
    }
    @if (dialogType === 1) {
      <h1 mat-dialog-title>
        {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.EDIT_RESOURCE' | translate}}
      </h1>
    }
    @if (dialogType === 2) {
      <h1 mat-dialog-title>
        {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.EDIT_VO' | translate}}
      </h1>
    }
    @if (dialogType === 3) {
      <h1 mat-dialog-title>
        {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.EDIT_GROUP' | translate}}
      </h1>
    }
    <div class="dialog-container" mat-dialog-content>
      @if (dialogType === 2) {
        <mat-form-field>
          <mat-label
            >{{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.SHORT_NAME' | translate}}:</mat-label
          >
          <input [value]="shortName" disabled matInput required />
        </mat-form-field>
      }
      <mat-form-field>
        <mat-label>{{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.NAME' | translate}}:</mat-label>
        <input [formControl]="nameCtrl" matInput required />
        @if (nameCtrl.errors?.['spaceName']) {
          <mat-error>
            {{'DIALOGS.NAME_SPACE_ERROR' | translate}}
          </mat-error>
        }
        @if (!nameCtrl.errors?.['spaceName']) {
          <mat-error>
            {{invalidNameMessage.length ? invalidNameMessage : ('DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.FILL_NAME' | translate)}}
          </mat-error>
        }
      </mat-form-field>
      @if (dialogType !== 2) {
        <mat-form-field class="mt-3">
          <mat-label>
            {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.DESCRIPTION' | translate}}:
          </mat-label>
          <textarea
            [formControl]="descriptionCtrl"
            class="overflow-hidden"
            cdkTextareaAutosize
            matInput></textarea>
        </mat-form-field>
      }
    </div>

    <div mat-dialog-actions>
      <button (click)="cancel()" class="ms-auto" mat-stroked-button>
        {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.CANCEL_BUTTON' | translate}}
      </button>
      <button
        (click)="submit()"
        [disabled]="loading || nameCtrl.invalid || descriptionCtrl.invalid"
        class="ms-2"
        color="accent"
        mat-flat-button>
        {{'DIALOGS.EDIT_FACILITY_RESOURCE_GROUP_VO.SUBMIT_BUTTON' | translate}}
      </button>
    </div>
  </div>
</div>
