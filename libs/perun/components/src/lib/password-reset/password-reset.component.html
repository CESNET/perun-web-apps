<h1 class="page-title">
  {{authenticationPage ? '' : ('SHARED_LIB.PERUN.COMPONENTS.PASSWORD_RESET.TITLE' | customTranslate | translate)}}
</h1>
@if (!logins.length && !authenticationPage) {
  <perun-web-apps-alert
    >{{'SHARED_LIB.PERUN.COMPONENTS.PASSWORD_RESET.NOT_SUPPORTED' | customTranslate | translate}}</perun-web-apps-alert
  >
}
<div class="card mt-2 table-size-fix">
  <div class="card-body">
    <div class="overflow-auto">
      <table
        [dataSource]="dataSource"
        class="w-100"
        mat-table
        matSort
        matSortActive="value"
        matSortDirection="asc"
        matSortDisableClear>
        <ng-container matColumnDef="namespace">
          <th *matHeaderCellDef mat-header-cell>
            {{'SHARED_LIB.PERUN.COMPONENTS.PASSWORD_RESET.NAMESPACE' | customTranslate | translate}}
          </th>
          <td *matCellDef="let login" class="w-25" mat-cell>{{login.friendlyNameParameter}}</td>
        </ng-container>
        <ng-container matColumnDef="value">
          <th *matHeaderCellDef mat-header-cell>
            {{'SHARED_LIB.PERUN.COMPONENTS.PASSWORD_RESET.LOGIN' | customTranslate | translate}}
          </th>
          <td *matCellDef="let login" class="w-50" mat-cell>{{login.value}}</td>
        </ng-container>
        <ng-container matColumnDef="reset">
          <th *matHeaderCellDef mat-header-cell></th>
          <td *matCellDef="let login" mat-cell>
            <button
              (click)="resetPassword(login)"
              [disabled]="!logins.includes(login)"
              color="accent"
              mat-flat-button>
              {{'SHARED_LIB.PERUN.COMPONENTS.PASSWORD_RESET.RESET_PASSWORD' | customTranslate | translate}}
            </button>
          </td>
        </ng-container>
        <ng-container matColumnDef="change">
          <th *matHeaderCellDef mat-header-cell></th>
          <td *matCellDef="let login" mat-cell>
            <button
              (click)="changePassword(login)"
              [disabled]="!logins.includes(login)"
              color="accent"
              class="action-button"
              mat-flat-button>
              {{'SHARED_LIB.PERUN.COMPONENTS.PASSWORD_RESET.CHANGE_PASSWORD' | customTranslate | translate}}
            </button>
          </td>
        </ng-container>

        <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
        <tr
          *matRowDef="let group; columns: displayedColumns;"
          class="dark-hover-list-item"
          mat-row></tr>
      </table>
    </div>
  </div>
</div>
